<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SQL Rooms AI @Tigzig</title>
    <!-- FontAwesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Roboto Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <script type="module" crossorigin>var e,t,n,r,i,o,a,s,l=Object.defineProperty,u=(e,t,n)=>((e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);function c(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function p(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var h,m,g={exports:{}},y={};var v,b,w=(m||(m=1,g.exports=function(){if(h)return y;h=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(t,n,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==n.key&&(i=""+n.key),"key"in n)for(var o in r={},n)"key"!==o&&(r[o]=n[o]);else r=n;return n=r.ref,{$$typeof:e,type:t,key:i,ref:void 0!==n?n:null,props:r}}return y.Fragment=t,y.jsx=n,y.jsxs=n,y}()),g.exports),_={exports:{}},x={};function E(){if(v)return x;v=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,h={};function m(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||f}function g(){}function y(e,t,n){this.props=e,this.context=t,this.refs=h,this.updater=n||f}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=y.prototype=new g;b.constructor=y,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function S(t,n,r,i,o,a){return r=a.ref,{$$typeof:e,type:t,key:n,ref:void 0!==r?r:null,props:a}}function k(t){return"object"==typeof t&&null!==t&&t.$$typeof===e}var T=/\/+/g;function C(e,t){return"object"==typeof e&&null!==e&&null!=e.key?(n=""+e.key,r={"=":"=0",":":"=2"},"$"+n.replace(/[=:]/g,function(e){return r[e]})):t.toString(36);var n,r}function A(){}function I(n,r,i,o,a){var s=typeof n;"undefined"!==s&&"boolean"!==s||(n=null);var l,u,f=!1;if(null===n)f=!0;else switch(s){case"bigint":case"string":case"number":f=!0;break;case"object":switch(n.$$typeof){case e:case t:f=!0;break;case c:return I((f=n._init)(n._payload),r,i,o,a)}}if(f)return a=a(n),f=""===o?"."+C(n,0):o,w(a)?(i="",null!=f&&(i=f.replace(T,"$&/")+"/"),I(a,r,i,"",function(e){return e})):null!=a&&(k(a)&&(l=a,u=i+(null==a.key||n&&n.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+f,a=S(l.type,u,void 0,0,0,l.props)),r.push(a)),1;f=0;var p,h=""===o?".":o+":";if(w(n))for(var m=0;m<n.length;m++)f+=I(o=n[m],r,i,s=h+C(o,m),a);else if("function"==typeof(m=null===(p=n)||"object"!=typeof p?null:"function"==typeof(p=d&&p[d]||p["@@iterator"])?p:null))for(n=m.call(n),m=0;!(o=n.next()).done;)f+=I(o=o.value,r,i,s=h+C(o,m++),a);else if("object"===s){if("function"==typeof n.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"==typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(n),r,i,o,a);throw r=String(n),Error("Objects are not valid as a React child (found: "+("[object Object]"===r?"object with keys {"+Object.keys(n).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.")}return f}function O(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function R(){}return x.Children={map:O,forEach:function(e,t,n){O(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return O(e,function(){t++}),t},toArray:function(e){return O(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},x.Component=m,x.Fragment=n,x.Profiler=i,x.PureComponent=y,x.StrictMode=r,x.Suspense=l,x.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,x.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},x.cache=function(e){return function(){return e.apply(null,arguments)}},x.cloneElement=function(e,t,n){if(null==e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),i=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=n;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return S(e.type,i,void 0,0,0,r)},x.createContext=function(e){return(e={$$typeof:a,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},x.createElement=function(e,t,n){var r,i={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var a=arguments.length-2;if(1===a)i.children=n;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===i[r]&&(i[r]=a[r]);return S(e,o,void 0,0,0,i)},x.createRef=function(){return{current:null}},x.forwardRef=function(e){return{$$typeof:s,render:e}},x.isValidElement=k,x.lazy=function(e){return{$$typeof:c,_payload:{_status:-1,_result:e},_init:N}},x.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},x.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),i=_.S;null!==i&&i(n,r),"object"==typeof r&&null!==r&&"function"==typeof r.then&&r.then(R,D)}catch(o){D(o)}finally{_.T=t}},x.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},x.use=function(e){return _.H.use(e)},x.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},x.useCallback=function(e,t){return _.H.useCallback(e,t)},x.useContext=function(e){return _.H.useContext(e)},x.useDebugValue=function(){},x.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},x.useEffect=function(e,t,n){var r=_.H;if("function"==typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},x.useId=function(){return _.H.useId()},x.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},x.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},x.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},x.useMemo=function(e,t){return _.H.useMemo(e,t)},x.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},x.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},x.useRef=function(e){return _.H.useRef(e)},x.useState=function(e){return _.H.useState(e)},x.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},x.useTransition=function(){return _.H.useTransition()},x.version="19.1.1",x}function S(){return b||(b=1,_.exports=E()),_.exports}var k=S();const T=f(k),C=c({__proto__:null,default:T},[k]);function A(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>k.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return k.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const i=k.createContext(r),o=n.length;n=[...n,r];const a=t=>{var n;const{scope:r,children:a,...s}=t,l=(null==(n=null==r?void 0:r[e])?void 0:n[o])||i,u=k.useMemo(()=>s,Object.values(s));return w.jsx(l.Provider,{value:u,children:a})};return a.displayName=t+"Provider",[a,function(n,a){var s;const l=(null==(s=null==a?void 0:a[e])?void 0:s[o])||i,u=k.useContext(l);if(u)return u;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},I(r,...t)]}function I(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return k.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}function O(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function N(...e){return t=>{let n=!1;const r=e.map(e=>{const r=O(e,t);return n||"function"!=typeof r||(n=!0),r});if(n)return()=>{for(let t=0;t<r.length;t++){const n=r[t];"function"==typeof n?n():O(e[t],null)}}}}function D(...e){return k.useCallback(N(...e),e)}function R(e){const t=P(e),n=k.forwardRef((e,n)=>{const{children:r,...i}=e,o=k.Children.toArray(r),a=o.find(j);if(a){const e=a.props.children,r=o.map(t=>t===a?k.Children.count(e)>1?k.Children.only(null):k.isValidElement(e)?e.props.children:null:t);return w.jsx(t,{...i,ref:n,children:k.isValidElement(e)?k.cloneElement(e,void 0,r):null})}return w.jsx(t,{...i,ref:n,children:r})});return n.displayName=`${e}.Slot`,n}var M=R("Slot");function P(e){const t=k.forwardRef((e,t)=>{const{children:n,...r}=e;if(k.isValidElement(n)){const e=function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(n),i=function(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...e)=>{const t=o(...e);return i(...e),t}:i&&(n[r]=i):"style"===r?n[r]={...i,...o}:"className"===r&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}(r,n.props);return n.type!==k.Fragment&&(i.ref=t?N(t,e):e),k.cloneElement(n,i)}return k.Children.count(n)>1?k.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var F=Symbol("radix.slottable");function L(e){const t=({children:e})=>w.jsx(w.Fragment,{children:e});return t.displayName=`${e}.Slottable`,t.__radixId=F,t}function j(e){return k.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===F}function B(e){const t=e+"CollectionProvider",[n,r]=A(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{const{scope:t,children:n}=e,r=T.useRef(null),o=T.useRef(new Map).current;return w.jsx(i,{scope:t,itemMap:o,collectionRef:r,children:n})};a.displayName=t;const s=e+"CollectionSlot",l=R(s),u=T.forwardRef((e,t)=>{const{scope:n,children:r}=e,i=D(t,o(s,n).collectionRef);return w.jsx(l,{ref:i,children:r})});u.displayName=s;const c=e+"CollectionItemSlot",d="data-radix-collection-item",f=R(c),p=T.forwardRef((e,t)=>{const{scope:n,children:r,...i}=e,a=T.useRef(null),s=D(t,a),l=o(c,n);return T.useEffect(()=>(l.itemMap.set(a,{ref:a,...i}),()=>{l.itemMap.delete(a)})),w.jsx(f,{[d]:"",ref:s,children:r})});return p.displayName=c,[{Provider:a,Slot:u,ItemSlot:p},function(t){const n=o(e+"CollectionConsumer",t);return T.useCallback(()=>{const e=n.collectionRef.current;if(!e)return[];const t=Array.from(e.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort((e,n)=>t.indexOf(e.ref.current)-t.indexOf(n.ref.current))},[n.collectionRef,n.itemMap])},r]}function $(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}var z=(null==globalThis?void 0:globalThis.document)?k.useLayoutEffect:()=>{},U=C[" useInsertionEffect ".trim().toString()]||z;function q({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,a]=function({defaultProp:e,onChange:t}){const[n,r]=k.useState(e),i=k.useRef(n),o=k.useRef(t);return U(()=>{o.current=t},[t]),k.useEffect(()=>{var e;i.current!==n&&(null==(e=o.current)||e.call(o,n),i.current=n)},[n,i]),[n,r,o]}({defaultProp:t,onChange:n}),s=void 0!==e,l=s?e:i;{const t=k.useRef(void 0!==e);k.useEffect(()=>{const e=t.current;if(e!==s){}t.current=s},[s,r])}const u=k.useCallback(t=>{var n;if(s){const r=function(e){return"function"==typeof e}(t)?t(e):t;r!==e&&(null==(n=a.current)||n.call(a,r))}else o(t)},[s,e,o,a]);return[l,u]}var H,V,W={exports:{}},G={};function Y(){if(H)return G;H=1;var e=S();function t(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function a(e,t){return"font"===e?"":"string"==typeof t?"use-credentials"===t?t:"":void 0}return G.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,G.createPortal=function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!n||1!==n.nodeType&&9!==n.nodeType&&11!==n.nodeType)throw Error(t(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:i,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,n,null,r)},G.flushSync=function(e){var t=o.T,n=r.p;try{if(o.T=null,r.p=2,e)return e()}finally{o.T=t,r.p=n,r.d.f()}},G.preconnect=function(e,t){"string"==typeof e&&(t?t="string"==typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,r.d.C(e,t))},G.prefetchDNS=function(e){"string"==typeof e&&r.d.D(e)},G.preinit=function(e,t){if("string"==typeof e&&t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin),o="string"==typeof t.integrity?t.integrity:void 0,s="string"==typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?r.d.S(e,"string"==typeof t.precedence?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:s}):"script"===n&&r.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:s,nonce:"string"==typeof t.nonce?t.nonce:void 0})}},G.preinitModule=function(e,t){if("string"==typeof e)if("object"==typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=a(t.as,t.crossOrigin);r.d.M(e,{crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0})}}else null==t&&r.d.M(e)},G.preload=function(e,t){if("string"==typeof e&&"object"==typeof t&&null!==t&&"string"==typeof t.as){var n=t.as,i=a(n,t.crossOrigin);r.d.L(e,n,{crossOrigin:i,integrity:"string"==typeof t.integrity?t.integrity:void 0,nonce:"string"==typeof t.nonce?t.nonce:void 0,type:"string"==typeof t.type?t.type:void 0,fetchPriority:"string"==typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"==typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"==typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"==typeof t.imageSizes?t.imageSizes:void 0,media:"string"==typeof t.media?t.media:void 0})}},G.preloadModule=function(e,t){if("string"==typeof e)if(t){var n=a(t.as,t.crossOrigin);r.d.m(e,{as:"string"==typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"==typeof t.integrity?t.integrity:void 0})}else r.d.m(e)},G.requestFormReset=function(e){r.d.r(e)},G.unstable_batchedUpdates=function(e,t){return e(t)},G.useFormState=function(e,t,n){return o.H.useFormState(e,t,n)},G.useFormStatus=function(){return o.H.useHostTransitionStatus()},G.version="19.1.1",G}function K(){if(V)return W.exports;return V=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),W.exports=Y(),W.exports}var Z=K();const Q=f(Z);var X=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{const n=R(`Primitive.${t}`),r=k.forwardRef((e,r)=>{const{asChild:i,...o}=e,a=i?n:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),w.jsx(a,{...o,ref:r})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function J(e,t){e&&Z.flushSync(()=>e.dispatchEvent(t))}var ee=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=k.useState(),r=k.useRef(null),i=k.useRef(e),o=k.useRef("none"),a=e?"mounted":"unmounted",[s,l]=function(e,t){return k.useReducer((e,n)=>t[e][n]??e,e)}(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return k.useEffect(()=>{const e=te(r.current);o.current="mounted"===s?e:"none"},[s]),z(()=>{const t=r.current,n=i.current;if(n!==e){const r=o.current,a=te(t);if(e)l("MOUNT");else if("none"===a||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(n&&r!==a?"ANIMATION_OUT":"UNMOUNT")}i.current=e}},[e,l]),z(()=>{if(t){let e;const n=t.ownerDocument.defaultView??window,a=o=>{const a=te(r.current).includes(CSS.escape(o.animationName));if(o.target===t&&a&&(l("ANIMATION_END"),!i.current)){const r=t.style.animationFillMode;t.style.animationFillMode="forwards",e=n.setTimeout(()=>{"forwards"===t.style.animationFillMode&&(t.style.animationFillMode=r)})}},s=e=>{e.target===t&&(o.current=te(r.current))};return t.addEventListener("animationstart",s),t.addEventListener("animationcancel",a),t.addEventListener("animationend",a),()=>{n.clearTimeout(e),t.removeEventListener("animationstart",s),t.removeEventListener("animationcancel",a),t.removeEventListener("animationend",a)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:k.useCallback(e=>{r.current=e?getComputedStyle(e):null,n(e)},[])}}(t),i="function"==typeof n?n({present:r.isPresent}):k.Children.only(n),o=D(r.ref,function(e){var t,n;let r=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,i=r&&"isReactWarning"in r&&r.isReactWarning;if(i)return e.ref;if(r=null==(n=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:n.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i)return e.props.ref;return e.props.ref||e.ref}(i));return"function"==typeof n||r.isPresent?k.cloneElement(i,{ref:o}):null};function te(e){return(null==e?void 0:e.animationName)||"none"}ee.displayName="Presence";var ne=C[" useId ".trim().toString()]||(()=>{}),re=0;function ie(e){const[t,n]=k.useState(ne());return z(()=>{n(e=>e??String(re++))},[e]),t?`radix-${t}`:""}var oe="Collapsible",[ae,se]=A(oe),[le,ue]=ae(oe),ce=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:a,...s}=e,[l,u]=q({prop:r,defaultProp:i??!1,onChange:a,caller:oe});return w.jsx(le,{scope:n,disabled:o,contentId:ie(),open:l,onOpenToggle:k.useCallback(()=>u(e=>!e),[u]),children:w.jsx(X.div,{"data-state":ge(l),"data-disabled":o?"":void 0,...s,ref:t})})});ce.displayName=oe;var de="CollapsibleTrigger",fe=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,i=ue(de,n);return w.jsx(X.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":ge(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:t,onClick:$(e.onClick,i.onOpenToggle)})});fe.displayName=de;var pe="CollapsibleContent",he=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ue(pe,e.__scopeCollapsible);return w.jsx(ee,{present:n||i.open,children:({present:e})=>w.jsx(me,{...r,ref:t,present:e})})});he.displayName=pe;var me=k.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:i,...o}=e,a=ue(pe,n),[s,l]=k.useState(r),u=k.useRef(null),c=D(t,u),d=k.useRef(0),f=d.current,p=k.useRef(0),h=p.current,m=a.open||s,g=k.useRef(m),y=k.useRef(void 0);return k.useEffect(()=>{const e=requestAnimationFrame(()=>g.current=!1);return()=>cancelAnimationFrame(e)},[]),z(()=>{const e=u.current;if(e){y.current=y.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";const t=e.getBoundingClientRect();d.current=t.height,p.current=t.width,g.current||(e.style.transitionDuration=y.current.transitionDuration,e.style.animationName=y.current.animationName),l(r)}},[a.open,r]),w.jsx(X.div,{"data-state":ge(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!m,...o,ref:c,style:{"--radix-collapsible-content-height":f?`${f}px`:void 0,"--radix-collapsible-content-width":h?`${h}px`:void 0,...e.style},children:m&&i})});function ge(e){return e?"open":"closed"}var ye=ce,ve=fe,be=he,we=k.createContext(void 0);function _e(e){const t=k.useContext(we);return e||t||"ltr"}var xe="Accordion",Ee=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Se,ke,Te]=B(xe),[Ce]=A(xe,[Te,se]),Ae=se();T.forwardRef((e,t)=>{const{type:n,...r}=e,i=r,o=r;return w.jsx(Se.Provider,{scope:e.__scopeAccordion,children:"multiple"===n?w.jsx(Me,{...o,ref:t}):w.jsx(Re,{...i,ref:t})})}).displayName=xe;var[Ie,Oe]=Ce(xe),[Ne,De]=Ce(xe,{collapsible:!1}),Re=T.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:o=!1,...a}=e,[s,l]=q({prop:n,defaultProp:r??"",onChange:i,caller:xe});return w.jsx(Ie,{scope:e.__scopeAccordion,value:T.useMemo(()=>s?[s]:[],[s]),onItemOpen:l,onItemClose:T.useCallback(()=>o&&l(""),[o,l]),children:w.jsx(Ne,{scope:e.__scopeAccordion,collapsible:o,children:w.jsx(Le,{...a,ref:t})})})}),Me=T.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[a,s]=q({prop:n,defaultProp:r??[],onChange:i,caller:xe}),l=T.useCallback(e=>s((t=[])=>[...t,e]),[s]),u=T.useCallback(e=>s((t=[])=>t.filter(t=>t!==e)),[s]);return w.jsx(Ie,{scope:e.__scopeAccordion,value:a,onItemOpen:l,onItemClose:u,children:w.jsx(Ne,{scope:e.__scopeAccordion,collapsible:!0,children:w.jsx(Le,{...o,ref:t})})})}),[Pe,Fe]=Ce(xe),Le=T.forwardRef((e,t)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:o="vertical",...a}=e,s=D(T.useRef(null),t),l=ke(n),u="ltr"===_e(i),c=$(e.onKeyDown,e=>{var t;if(!Ee.includes(e.key))return;const n=e.target,r=l().filter(e=>{var t;return!(null==(t=e.ref.current)?void 0:t.disabled)}),i=r.findIndex(e=>e.ref.current===n),a=r.length;if(-1===i)return;e.preventDefault();let s=i;const c=a-1,d=()=>{s=i+1,s>c&&(s=0)},f=()=>{s=i-1,s<0&&(s=c)};switch(e.key){case"Home":s=0;break;case"End":s=c;break;case"ArrowRight":"horizontal"===o&&(u?d():f());break;case"ArrowDown":"vertical"===o&&d();break;case"ArrowLeft":"horizontal"===o&&(u?f():d());break;case"ArrowUp":"vertical"===o&&f()}null==(t=r[s%a].ref.current)||t.focus()});return w.jsx(Pe,{scope:n,disabled:r,direction:i,orientation:o,children:w.jsx(Se.Slot,{scope:n,children:w.jsx(X.div,{...a,"data-orientation":o,ref:s,onKeyDown:r?void 0:c})})})}),je="AccordionItem",[Be,$e]=Ce(je),ze=T.forwardRef((e,t)=>{const{__scopeAccordion:n,value:r,...i}=e,o=Fe(je,n),a=Oe(je,n),s=Ae(n),l=ie(),u=r&&a.value.includes(r)||!1,c=o.disabled||e.disabled;return w.jsx(Be,{scope:n,open:u,disabled:c,triggerId:l,children:w.jsx(ye,{"data-orientation":o.orientation,"data-state":Ye(u),...s,...i,ref:t,disabled:c,open:u,onOpenChange:e=>{e?a.onItemOpen(r):a.onItemClose(r)}})})});ze.displayName=je;var Ue="AccordionHeader",qe=T.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Fe(xe,n),o=$e(Ue,n);return w.jsx(X.h3,{"data-orientation":i.orientation,"data-state":Ye(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:t})});qe.displayName=Ue;var He="AccordionTrigger",Ve=T.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Fe(xe,n),o=$e(He,n),a=De(He,n),s=Ae(n);return w.jsx(Se.ItemSlot,{scope:n,children:w.jsx(ve,{"aria-disabled":o.open&&!a.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...s,...r,ref:t})})});Ve.displayName=He;var We="AccordionContent",Ge=T.forwardRef((e,t)=>{const{__scopeAccordion:n,...r}=e,i=Fe(xe,n),o=$e(We,n),a=Ae(n);return w.jsx(be,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...a,...r,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function Ye(e){return e?"open":"closed"}Ge.displayName=We;var Ke=ze,Ze=qe,Qe=Ve,Xe=Ge;
/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Je=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var et={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},l)=>k.createElement("svg",{ref:l,...et,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Je("lucide",i),...s},[...a.map(([e,t])=>k.createElement(e,t)),...Array.isArray(o)?o:[o]])),nt=(e,t)=>{const n=k.forwardRef(({className:n,...r},i)=>{return k.createElement(tt,{ref:i,iconNode:t,className:Je(`lucide-${o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var o});return n.displayName=`${e}`,n},rt=nt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),it=nt("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ot=nt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),at=nt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),st=nt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),lt=nt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),ut=nt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ct=nt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),dt=nt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ft=nt("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),pt=nt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ht=nt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),mt=nt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),gt=nt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),yt=nt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]),vt=nt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),bt=nt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),wt=nt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),_t=nt("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),xt=nt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Et=nt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),St=nt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),kt=nt("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),Tt=nt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Ct=nt("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),At=nt("OctagonX",[["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M2.586 16.726A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2h6.624a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586z",key:"2d38gg"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),It=nt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),Ot=nt("PinOff",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M15 9.34V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H7.89",key:"znwnzq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v1.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h11",key:"c9qhm2"}]]),Nt=nt("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]),Dt=nt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),Rt=nt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Mt=nt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Pt=nt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),Ft=nt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Lt=nt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),jt=nt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Bt=nt("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),$t=nt("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),zt=nt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Ut=nt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),qt=nt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ht=nt("View",[["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]),Vt=nt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);
/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function Wt(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Wt(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Gt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Wt(e))&&(r&&(r+=" "),r+=t);return r}const Yt=e=>{const t=Xt(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Kt(n,t)||Qt(e)},getConflictingClassGroupIds:(e,t)=>{const i=n[e]||[];return t&&r[e]?[...i,...r[e]]:i}}},Kt=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),o=i?Kt(e.slice(1),i):void 0;if(o)return o;if(0===t.validators.length)return;const a=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(a)))?void 0:n.classGroupId},Zt=/^\[(.+)\]$/,Qt=e=>{if(Zt.test(e)){const t=Zt.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Xt=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return nn(Object.entries(e.classGroups),n).forEach(([e,n])=>{Jt(n,r,e,t)}),r},Jt=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:en(t,e)).classGroupId=n)}if("function"==typeof e)return tn(e)?void Jt(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,i])=>{Jt(i,en(t,e),n,r)})})},en=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},tn=e=>e.isThemeGetter,nn=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,rn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const i=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(i(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):i(e,t)}}},on=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,i=t[0],o=t.length,a=e=>{const n=[];let a,s=0,l=0;for(let d=0;d<e.length;d++){let u=e[d];if(0===s){if(u===i&&(r||e.slice(d,d+o)===t)){n.push(e.slice(l,d)),l=d+o;continue}if("/"===u){a=d;continue}}"["===u?s++:"]"===u&&s--}const u=0===n.length?e:e.substring(l),c=u.startsWith("!");return{modifiers:n,hasImportantModifier:c,baseClassName:c?u.substring(1):u,maybePostfixModifierPosition:a&&a>l?a-l:void 0}};return n?e=>n({className:e,parseClassName:a}):a},an=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},sn=/\s+/;function ln(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=un(e))&&(r&&(r+=" "),r+=t);return r}const un=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=un(e[r]))&&(n&&(n+=" "),n+=t);return n};function cn(e,...t){let n,r,i,o=function(s){const l=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:rn(e.cacheSize),parseClassName:on(e),...Yt(e)}))(l),r=n.cache.get,i=n.cache.set,o=a,a(s)};function a(e){const t=r(e);if(t)return t;const o=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=t,o=[],a=e.trim().split(sn);let s="";for(let l=a.length-1;l>=0;l-=1){const e=a[l],{modifiers:t,hasImportantModifier:u,baseClassName:c,maybePostfixModifierPosition:d}=n(e);let f=Boolean(d),p=r(f?c.substring(0,d):c);if(!p){if(!f){s=e+(s.length>0?" "+s:s);continue}if(p=r(c),!p){s=e+(s.length>0?" "+s:s);continue}f=!1}const h=an(t).join(":"),m=u?h+"!":h,g=m+p;if(o.includes(g))continue;o.push(g);const y=i(p,f);for(let n=0;n<y.length;++n){const e=y[n];o.push(m+e)}s=e+(s.length>0?" "+s:s)}return s})(e,n);return i(e,o),o}return function(){return o(ln.apply(null,arguments))}}const dn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},fn=/^\[(?:([a-z-]+):)?(.+)\]$/i,pn=/^\d+\/\d+$/,hn=new Set(["px","full","screen"]),mn=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gn=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,yn=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,vn=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bn=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wn=e=>xn(e)||hn.has(e)||pn.test(e),_n=e=>Pn(e,"length",Fn),xn=e=>Boolean(e)&&!Number.isNaN(Number(e)),En=e=>Pn(e,"number",xn),Sn=e=>Boolean(e)&&Number.isInteger(Number(e)),kn=e=>e.endsWith("%")&&xn(e.slice(0,-1)),Tn=e=>fn.test(e),Cn=e=>mn.test(e),An=new Set(["length","size","percentage"]),In=e=>Pn(e,An,Ln),On=e=>Pn(e,"position",Ln),Nn=new Set(["image","url"]),Dn=e=>Pn(e,Nn,Bn),Rn=e=>Pn(e,"",jn),Mn=()=>!0,Pn=(e,t,n)=>{const r=fn.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},Fn=e=>gn.test(e)&&!yn.test(e),Ln=()=>!1,jn=e=>vn.test(e),Bn=e=>bn.test(e),$n=cn(()=>{const e=dn("colors"),t=dn("spacing"),n=dn("blur"),r=dn("brightness"),i=dn("borderColor"),o=dn("borderRadius"),a=dn("borderSpacing"),s=dn("borderWidth"),l=dn("contrast"),u=dn("grayscale"),c=dn("hueRotate"),d=dn("invert"),f=dn("gap"),p=dn("gradientColorStops"),h=dn("gradientColorStopPositions"),m=dn("inset"),g=dn("margin"),y=dn("opacity"),v=dn("padding"),b=dn("saturate"),w=dn("scale"),_=dn("sepia"),x=dn("skew"),E=dn("space"),S=dn("translate"),k=()=>["auto",Tn,t],T=()=>[Tn,t],C=()=>["",wn,_n],A=()=>["auto",xn,Tn],I=()=>["","0",Tn],O=()=>[xn,Tn];return{cacheSize:500,separator:":",theme:{colors:[Mn],spacing:[wn,_n],blur:["none","",Cn,Tn],brightness:O(),borderColor:[e],borderRadius:["none","","full",Cn,Tn],borderSpacing:T(),borderWidth:C(),contrast:O(),grayscale:I(),hueRotate:O(),invert:I(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[kn,_n],inset:k(),margin:k(),opacity:O(),padding:T(),saturate:O(),scale:O(),sepia:I(),skew:O(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",Tn]}],container:["container"],columns:[{columns:[Cn]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",Tn]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[m]}],"inset-x":[{"inset-x":[m]}],"inset-y":[{"inset-y":[m]}],start:[{start:[m]}],end:[{end:[m]}],top:[{top:[m]}],right:[{right:[m]}],bottom:[{bottom:[m]}],left:[{left:[m]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sn,Tn]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Tn]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Sn,Tn]}],"grid-cols":[{"grid-cols":[Mn]}],"col-start-end":[{col:["auto",{span:["full",Sn,Tn]},Tn]}],"col-start":[{"col-start":A()}],"col-end":[{"col-end":A()}],"grid-rows":[{"grid-rows":[Mn]}],"row-start-end":[{row:["auto",{span:[Sn,Tn]},Tn]}],"row-start":[{"row-start":A()}],"row-end":[{"row-end":A()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Tn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Tn]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[v]}],px:[{px:[v]}],py:[{py:[v]}],ps:[{ps:[v]}],pe:[{pe:[v]}],pt:[{pt:[v]}],pr:[{pr:[v]}],pb:[{pb:[v]}],pl:[{pl:[v]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[E]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[E]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Tn,t]}],"min-w":[{"min-w":[Tn,t,"min","max","fit"]}],"max-w":[{"max-w":[Tn,t,"none","full","min","max","fit","prose",{screen:[Cn]},Cn]}],h:[{h:[Tn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Tn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Tn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Tn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Cn,_n]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",En]}],"font-family":[{font:[Mn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Tn]}],"line-clamp":[{"line-clamp":["none",xn,En]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",wn,Tn]}],"list-image":[{"list-image":["none",Tn]}],"list-style-type":[{list:["none","disc","decimal",Tn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",wn,_n]}],"underline-offset":[{"underline-offset":["auto",wn,Tn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Tn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Tn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",On]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",In]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Dn]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[h]}],"gradient-via-pos":[{via:[h]}],"gradient-to-pos":[{to:[h]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[wn,Tn]}],"outline-w":[{outline:[wn,_n]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:C()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[wn,_n]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Cn,Rn]}],"shadow-color":[{shadow:[Mn]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",Cn,Tn]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[c]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[c]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Tn]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",Tn]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",Tn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Sn,Tn]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[x]}],"skew-y":[{"skew-y":[x]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Tn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Tn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Tn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[wn,_n,En]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function zn(...e){return $n(Gt(e))}k.forwardRef(({className:e,...t},n)=>w.jsx(Ke,{ref:n,className:zn("border-b",e),...t})).displayName="AccordionItem";k.forwardRef(({className:e,children:t,...n},r)=>w.jsx(Ze,{className:"flex",children:w.jsxs(Qe,{ref:r,className:zn("flex flex-1 items-center justify-between py-4 text-left text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...n,children:[t,w.jsx(st,{className:"text-muted-foreground h-4 w-4 shrink-0 transition-transform duration-200"})]})})).displayName=Qe.displayName;k.forwardRef(({className:e,children:t,...n},r)=>w.jsx(Xe,{ref:r,className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...n,children:w.jsx("div",{className:zn("pb-4 pt-0",e),children:t})})).displayName=Xe.displayName;const Un=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,qn=Gt,Hn=(e,t)=>n=>{var r;if(null==(null==t?void 0:t.variants))return qn(e,null==n?void 0:n.class,null==n?void 0:n.className);const{variants:i,defaultVariants:o}=t,a=Object.keys(i).map(e=>{const t=null==n?void 0:n[e],r=null==o?void 0:o[e];if(null===t)return null;const a=Un(t)||Un(r);return i[e][a]}),s=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{}),l=null==t||null===(r=t.compoundVariants)||void 0===r?void 0:r.reduce((e,t)=>{let{class:n,className:r,...i}=t;return Object.entries(i).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...s}[t]):{...o,...s}[t]===n})?[...e,n,r]:e},[]);return qn(e,a,l,null==n?void 0:n.class,null==n?void 0:n.className)},Vn=Hn("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Wn=k.forwardRef(({className:e,variant:t,...n},r)=>w.jsx("div",{ref:r,role:"alert",className:zn(Vn({variant:t}),e),...n}));Wn.displayName="Alert";const Gn=k.forwardRef(({className:e,...t},n)=>w.jsx("h5",{ref:n,className:zn("mb-1 font-medium leading-none tracking-tight",e),...t}));Gn.displayName="AlertTitle";const Yn=k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("text-sm [&_p]:leading-relaxed",e),...t}));Yn.displayName="AlertDescription";var Kn=k.forwardRef((e,t)=>{const{ratio:n=1,style:r,...i}=e;return w.jsx("div",{style:{position:"relative",width:"100%",paddingBottom:100/n+"%"},"data-radix-aspect-ratio-wrapper":"",children:w.jsx(X.div,{...i,ref:t,style:{...r,position:"absolute",top:0,right:0,bottom:0,left:0}})})});Kn.displayName="AspectRatio";const Zn=Kn,Qn=Hn("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Xn({className:e,variant:t,...n}){return w.jsx("div",{className:zn(Qn({variant:t}),e),...n})}k.forwardRef(({...e},t)=>w.jsx("nav",{ref:t,"aria-label":"breadcrumb",...e})).displayName="Breadcrumb";k.forwardRef(({className:e,...t},n)=>w.jsx("ol",{ref:n,className:zn("text-muted-foreground flex flex-wrap items-center gap-1.5 break-words text-sm sm:gap-2.5",e),...t})).displayName="BreadcrumbList";k.forwardRef(({className:e,...t},n)=>w.jsx("li",{ref:n,className:zn("inline-flex items-center gap-1.5",e),...t})).displayName="BreadcrumbItem";k.forwardRef(({asChild:e,className:t,...n},r)=>{const i=e?M:"a";return w.jsx(i,{ref:r,className:zn("hover:text-foreground transition-colors",t),...n})}).displayName="BreadcrumbLink";k.forwardRef(({className:e,...t},n)=>w.jsx("span",{ref:n,role:"link","aria-disabled":"true","aria-current":"page",className:zn("text-foreground font-normal",e),...t})).displayName="BreadcrumbPage";const Jn=Hn("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xs:"h-8 rounded-md px-2 text-xs"}},defaultVariants:{variant:"default",size:"default"}}),er=k.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...i},o)=>{const a=r?M:"button";return w.jsx(a,{className:zn(Jn({variant:t,size:n,className:e})),ref:o,...i})});er.displayName="Button_";var tr=function(){return tr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tr.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var nr,rr,ir=k.createContext(void 0);k.createContext(void 0),k.forwardRef(function(e,t){var n=function(){var e=k.useContext(ir);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}(),r=n.classNames,i=n.styles,o=[r.button_reset,r.button];e.className&&o.push(e.className);var a=o.join(" "),s=tr(tr({},i.button_reset),i.button);return e.style&&Object.assign(s,e.style),w.jsx("button",tr({},e,{ref:t,type:"button",className:a,style:s}))}),k.createContext(void 0),k.createContext(void 0),(rr=nr||(nr={})).Outside="outside",rr.Disabled="disabled",rr.Selected="selected",rr.Hidden="hidden",rr.Today="today",rr.RangeStart="range_start",rr.RangeEnd="range_end",rr.RangeMiddle="range_middle",nr.Selected,nr.Disabled,nr.Hidden,nr.Today,nr.RangeEnd,nr.RangeMiddle,nr.RangeStart,nr.Outside,k.createContext(void 0),k.createContext(void 0),k.createContext(void 0);k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("bg-card text-card-foreground rounded-xl border shadow",e),...t})).displayName="Card";k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("flex flex-col space-y-1.5 p-6",e),...t})).displayName="CardHeader";k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("font-semibold leading-none tracking-tight",e),...t})).displayName="CardTitle";k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("text-muted-foreground text-sm",e),...t})).displayName="CardDescription";k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("p-6 pt-0",e),...t})).displayName="CardContent";function or(e){const t=k.useRef({value:e,previous:e});return k.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function ar(e){const[t,n]=k.useState(void 0);return z(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const t=new ResizeObserver(t=>{if(!Array.isArray(t))return;if(!t.length)return;const r=t[0];let i,o;if("borderBoxSize"in r){const e=r.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,o=t.blockSize}else i=e.offsetWidth,o=e.offsetHeight;n({width:i,height:o})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),t}k.forwardRef(({className:e,...t},n)=>w.jsx("div",{ref:n,className:zn("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";var sr="Checkbox",[lr]=A(sr),[ur,cr]=lr(sr);function dr(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:i,disabled:o,form:a,name:s,onCheckedChange:l,required:u,value:c="on",internal_do_not_use_render:d}=e,[f,p]=q({prop:n,defaultProp:i??!1,onChange:l,caller:sr}),[h,m]=k.useState(null),[g,y]=k.useState(null),v=k.useRef(!1),b=!h||(!!a||!!h.closest("form")),_={checked:f,disabled:o,setChecked:p,control:h,setControl:m,name:s,form:a,value:c,hasConsumerStoppedPropagationRef:v,required:u,defaultChecked:!wr(i)&&i,isFormControl:b,bubbleInput:g,setBubbleInput:y};return w.jsx(ur,{scope:t,..._,children:br(d)?d(_):r})}var fr="CheckboxTrigger",pr=k.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},i)=>{const{control:o,value:a,disabled:s,checked:l,required:u,setControl:c,setChecked:d,hasConsumerStoppedPropagationRef:f,isFormControl:p,bubbleInput:h}=cr(fr,e),m=D(i,c),g=k.useRef(l);return k.useEffect(()=>{const e=null==o?void 0:o.form;if(e){const t=()=>d(g.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[o,d]),w.jsx(X.button,{type:"button",role:"checkbox","aria-checked":wr(l)?"mixed":l,"aria-required":u,"data-state":_r(l),"data-disabled":s?"":void 0,disabled:s,value:a,...r,ref:m,onKeyDown:$(t,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:$(n,e=>{d(e=>!!wr(e)||!e),h&&p&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})})});pr.displayName=fr;var hr=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:a,disabled:s,value:l,onCheckedChange:u,form:c,...d}=e;return w.jsx(dr,{__scopeCheckbox:n,checked:i,defaultChecked:o,disabled:s,required:a,onCheckedChange:u,name:r,form:c,value:l,internal_do_not_use_render:({isFormControl:e})=>w.jsxs(w.Fragment,{children:[w.jsx(pr,{...d,ref:t,__scopeCheckbox:n}),e&&w.jsx(vr,{__scopeCheckbox:n})]})})});hr.displayName=sr;var mr="CheckboxIndicator",gr=k.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...i}=e,o=cr(mr,n);return w.jsx(ee,{present:r||wr(o.checked)||!0===o.checked,children:w.jsx(X.span,{"data-state":_r(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});gr.displayName=mr;var yr="CheckboxBubbleInput",vr=k.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:a,required:s,disabled:l,name:u,value:c,form:d,bubbleInput:f,setBubbleInput:p}=cr(yr,e),h=D(n,p),m=or(o),g=ar(r);k.useEffect(()=>{const e=f;if(!e)return;const t=window.HTMLInputElement.prototype,n=Object.getOwnPropertyDescriptor(t,"checked").set,r=!i.current;if(m!==o&&n){const t=new Event("click",{bubbles:r});e.indeterminate=wr(o),n.call(e,!wr(o)&&o),e.dispatchEvent(t)}},[f,m,o,i]);const y=k.useRef(!wr(o)&&o);return w.jsx(X.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??y.current,required:s,disabled:l,name:u,value:c,form:d,...t,tabIndex:-1,ref:h,style:{...t.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function br(e){return"function"==typeof e}function wr(e){return"indeterminate"===e}function _r(e){return wr(e)?"indeterminate":e?"checked":"unchecked"}vr.displayName=yr;k.forwardRef(({className:e,...t},n)=>w.jsx(hr,{ref:n,className:zn("border-primary focus-visible:ring-ring data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground peer h-4 w-4 shrink-0 rounded-sm border shadow focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:w.jsx(gr,{className:zn("flex items-center justify-center text-current"),children:w.jsx(at,{className:"h-4 w-4"})})})).displayName=hr.displayName;var xr=.999,Er=/[\\\/_+.#"@\[\(\{&]/,Sr=/[\\\/_+.#"@\[\(\{&]/g,kr=/[\s-]/,Tr=/[\s-]/g;function Cr(e,t,n,r,i,o,a){if(o===t.length)return i===e.length?1:.99;var s=`${i},${o}`;if(void 0!==a[s])return a[s];for(var l,u,c,d,f=r.charAt(o),p=n.indexOf(f,i),h=0;p>=0;)(l=Cr(e,t,n,r,p+1,o+1,a))>h&&(p===i?l*=1:Er.test(e.charAt(p-1))?(l*=.8,(c=e.slice(i,p-1).match(Sr))&&i>0&&(l*=Math.pow(xr,c.length))):kr.test(e.charAt(p-1))?(l*=.9,(d=e.slice(i,p-1).match(Tr))&&i>0&&(l*=Math.pow(xr,d.length))):(l*=.17,i>0&&(l*=Math.pow(xr,p-i))),e.charAt(p)!==t.charAt(o)&&(l*=.9999)),(l<.1&&n.charAt(p-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(p-1)!==r.charAt(o))&&(.1*(u=Cr(e,t,n,r,p+1,o+2,a))>l&&(l=.1*u)),l>h&&(h=l),p=n.indexOf(f,p+1);return a[s]=h,h}function Ar(e){return e.toLowerCase().replace(Tr," ")}function Ir(e,t,n){return Cr(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,Ar(e),Ar(t),0,0,{})}function Or(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),k.useMemo(()=>(...e)=>{var n;return null==(n=t.current)?void 0:n.call(t,...e)},[])}var Nr,Dr="dismissableLayer.update",Rr="dismissableLayer.pointerDownOutside",Mr="dismissableLayer.focusOutside",Pr=k.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Fr=k.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...l}=e,u=k.useContext(Pr),[c,d]=k.useState(null),f=(null==c?void 0:c.ownerDocument)??(null==globalThis?void 0:globalThis.document),[,p]=k.useState({}),h=D(t,e=>d(e)),m=Array.from(u.layers),[g]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(g),v=c?m.indexOf(c):-1,b=u.layersWithOutsidePointerEventsDisabled.size>0,_=v>=y,x=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Or(e),r=k.useRef(!1),i=k.useRef(()=>{});return k.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Br(Rr,n,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=r,t.addEventListener("click",i.current,{once:!0})):r()}else t.removeEventListener("click",i.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...u.branches].some(e=>e.contains(t));_&&!n&&(null==i||i(e),null==a||a(e),e.defaultPrevented||null==s||s())},f),E=function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Or(e),r=k.useRef(!1);return k.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Br(Mr,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==o||o(e),null==a||a(e),e.defaultPrevented||null==s||s())},f);return function(e,t=(null==globalThis?void 0:globalThis.document)){const n=Or(e);k.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[n,t])}(e=>{v===u.layers.size-1&&(null==r||r(e),!e.defaultPrevented&&s&&(e.preventDefault(),s()))},f),k.useEffect(()=>{if(c)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Nr=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(c)),u.layers.add(c),jr(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=Nr)}},[c,f,n,u]),k.useEffect(()=>()=>{c&&(u.layers.delete(c),u.layersWithOutsidePointerEventsDisabled.delete(c),jr())},[c,u]),k.useEffect(()=>{const e=()=>p({});return document.addEventListener(Dr,e),()=>document.removeEventListener(Dr,e)},[]),w.jsx(X.div,{...l,ref:h,style:{pointerEvents:b?_?"auto":"none":void 0,...e.style},onFocusCapture:$(e.onFocusCapture,E.onFocusCapture),onBlurCapture:$(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:$(e.onPointerDownCapture,x.onPointerDownCapture)})});Fr.displayName="DismissableLayer";var Lr=k.forwardRef((e,t)=>{const n=k.useContext(Pr),r=k.useRef(null),i=D(t,r);return k.useEffect(()=>{const e=r.current;if(e)return n.branches.add(e),()=>{n.branches.delete(e)}},[n.branches]),w.jsx(X.div,{...e,ref:i})});function jr(){const e=new CustomEvent(Dr);document.dispatchEvent(e)}function Br(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?J(i,o):i.dispatchEvent(o)}Lr.displayName="DismissableLayerBranch";var $r=Fr,zr=Lr,Ur="focusScope.autoFocusOnMount",qr="focusScope.autoFocusOnUnmount",Hr={bubbles:!1,cancelable:!0},Vr=k.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=e,[s,l]=k.useState(null),u=Or(i),c=Or(o),d=k.useRef(null),f=D(t,e=>l(e)),p=k.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;k.useEffect(()=>{if(r){let e=function(e){if(p.paused||!s)return;const t=e.target;s.contains(t)?d.current=t:Kr(d.current,{select:!0})},t=function(e){if(p.paused||!s)return;const t=e.relatedTarget;null!==t&&(s.contains(t)||Kr(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Kr(s)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return s&&r.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,s,p.paused]),k.useEffect(()=>{if(s){Zr.add(p);const t=document.activeElement;if(!s.contains(t)){const n=new CustomEvent(Ur,Hr);s.addEventListener(Ur,u),s.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Kr(r,{select:t}),document.activeElement!==n)return}((e=Wr(s),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Kr(s))}return()=>{s.removeEventListener(Ur,u),setTimeout(()=>{const e=new CustomEvent(qr,Hr);s.addEventListener(qr,c),s.dispatchEvent(e),e.defaultPrevented||Kr(t??document.body,{select:!0}),s.removeEventListener(qr,c),Zr.remove(p)},0)}}var e},[s,u,c,p]);const h=k.useCallback(e=>{if(!n&&!r)return;if(p.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){const t=e.currentTarget,[r,o]=function(e){const t=Wr(e),n=Gr(t,e),r=Gr(t.reverse(),e);return[n,r]}(t);r&&o?e.shiftKey||i!==o?e.shiftKey&&i===r&&(e.preventDefault(),n&&Kr(o,{select:!0})):(e.preventDefault(),n&&Kr(r,{select:!0})):i===t&&e.preventDefault()}},[n,r,p.paused]);return w.jsx(X.div,{tabIndex:-1,...a,ref:f,onKeyDown:h})});function Wr(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function Gr(e,t){for(const n of e)if(!Yr(n,{upTo:t}))return n}function Yr(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Kr(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}Vr.displayName="FocusScope";var Zr=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=Qr(e,t),e.unshift(t)},remove(t){var n;e=Qr(e,t),null==(n=e[0])||n.resume()}}}();function Qr(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}var Xr=k.forwardRef((e,t)=>{var n;const{container:r,...i}=e,[o,a]=k.useState(!1);z(()=>a(!0),[]);const s=r||o&&(null==(n=null==globalThis?void 0:globalThis.document)?void 0:n.body);return s?Q.createPortal(w.jsx(X.div,{...i,ref:t}),s):null});Xr.displayName="Portal";var Jr=0;function ei(){k.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ti()),document.body.insertAdjacentElement("beforeend",e[1]??ti()),Jr++,()=>{1===Jr&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Jr--}},[])}function ti(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ni=function(){return ni=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ni.apply(this,arguments)};function ri(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function ii(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{l(r.next(e))}catch(F0){o(F0)}}function s(e){try{l(r.throw(e))}catch(F0){o(F0)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}l((r=r.apply(e,t||[])).next())})}function oi(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function ai(e){return this instanceof ai?(this.v=e,this):new ai(e)}function si(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){o.push([e,t,n,r])>1||s(e,t)})},t&&(r[e]=t(r[e])))}function s(e,t){try{(n=i[e](t)).value instanceof ai?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(F0){c(o[0][3],F0)}var n}function l(e){s("next",e)}function u(e){s("throw",e)}function c(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function li(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:ai(e[r](t)),done:!1}:i?i(t):t}:i}}function ui(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=oi(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,i,(t=e[n](t)).done,t.value)})}}}"function"==typeof SuppressedError&&SuppressedError;var ci="right-scroll-bar-position",di="width-before-scroll-bar";function fi(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var pi="undefined"!=typeof window?k.useLayoutEffect:k.useEffect,hi=new WeakMap;function mi(e,t){var n,r,i,o=(n=null,r=function(t){return e.forEach(function(e){return fi(e,t)})},(i=k.useState(function(){return{value:n,callback:r,facade:{get current(){return i.value},set current(e){var t=i.value;t!==e&&(i.value=e,i.callback(e,t))}}}})[0]).callback=r,i.facade);return pi(function(){var t=hi.get(o);if(t){var n=new Set(t),r=new Set(e),i=o.current;n.forEach(function(e){r.has(e)||fi(e,null)}),r.forEach(function(e){n.has(e)||fi(e,i)})}hi.set(o,e)},[e]),o}function gi(e){return e}var yi=function(e){var t=e.sideCar,n=ri(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return k.createElement(r,ni({},n))};yi.isSideCarExport=!0;var vi=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=gi);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var i=t(e,r);return n.push(i),function(){n=n.filter(function(e){return e!==i})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var i=n;n=[],i.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},a=function(){return Promise.resolve().then(o)};a(),n={push:function(e){t.push(e),a()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=ni({async:!0,ssr:!1},e),t}(),bi=function(){},wi=k.forwardRef(function(e,t){var n=k.useRef(null),r=k.useState({onScrollCapture:bi,onWheelCapture:bi,onTouchMoveCapture:bi}),i=r[0],o=r[1],a=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,p=e.noRelative,h=e.noIsolation,m=e.inert,g=e.allowPinchZoom,y=e.as,v=void 0===y?"div":y,b=e.gapMode,w=ri(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),_=f,x=mi([n,t]),E=ni(ni({},w),i);return k.createElement(k.Fragment,null,c&&k.createElement(_,{sideCar:vi,removeScrollBar:u,shards:d,noRelative:p,noIsolation:h,inert:m,setCallbacks:o,allowPinchZoom:!!g,lockRef:n,gapMode:b}),a?k.cloneElement(k.Children.only(s),ni(ni({},E),{ref:x})):k.createElement(v,ni({},E,{className:l,ref:x}),s))});wi.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},wi.classNames={fullWidth:di,zeroRight:ci};function _i(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var xi=function(){var e=0,t=null;return{add:function(n){var r,i;0==e&&(t=_i())&&(i=n,(r=t).styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ei=function(){var e,t=(e=xi(),function(t,n){k.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Si={left:0,top:0,right:0,gap:0},ki=function(e){return parseInt(e||"",10)||0},Ti=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Si;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[ki(n),ki(r),ki(i)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ci=Ei(),Ai="data-scroll-locked",Ii=function(e,t,n,r){var i=e.left,o=e.top,a=e.right,s=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body[").concat(Ai,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(ci," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(di," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(ci," .").concat(ci," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(di," .").concat(di," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Ai,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},Oi=function(){var e=parseInt(document.body.getAttribute(Ai)||"0",10);return isFinite(e)?e:0},Ni=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=void 0===r?"margin":r;k.useEffect(function(){return document.body.setAttribute(Ai,(Oi()+1).toString()),function(){var e=Oi()-1;e<=0?document.body.removeAttribute(Ai):document.body.setAttribute(Ai,e.toString())}},[]);var o=k.useMemo(function(){return Ti(i)},[i]);return k.createElement(Ci,{styles:Ii(o,!t,i,n?"":"!important")})},Di=!1;if("undefined"!=typeof window)try{var Ri=Object.defineProperty({},"passive",{get:function(){return Di=!0,!0}});window.addEventListener("test",Ri,Ri),window.removeEventListener("test",Ri,Ri)}catch(HOt){Di=!1}var Mi=!!Di&&{passive:!1},Pi=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},Fi=function(e,t){var n=t.ownerDocument,r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),Li(e,r)){var i=ji(e,r);if(i[1]>i[2])return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Li=function(e,t){return"v"===e?function(e){return Pi(e,"overflowY")}(t):function(e){return Pi(e,"overflowX")}(t)},ji=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Bi=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$i=function(e){return[e.deltaX,e.deltaY]},zi=function(e){return e&&"current"in e?e.current:e},Ui=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},qi=0,Hi=[];function Vi(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Wi=(Gi=function(e){var t=k.useRef([]),n=k.useRef([0,0]),r=k.useRef(),i=k.useState(qi++)[0],o=k.useState(Ei)[0],a=k.useRef(e);k.useEffect(function(){a.current=e},[e]),k.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(zi),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var s=k.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!a.current.allowPinchZoom;var i,o=Bi(e),s=n.current,l="deltaX"in e?e.deltaX:s[0]-o[0],u="deltaY"in e?e.deltaY:s[1]-o[1],c=e.target,d=Math.abs(l)>Math.abs(u)?"h":"v";if("touches"in e&&"h"===d&&"range"===c.type)return!1;var f=Fi(d,c);if(!f)return!0;if(f?i=d:(i="v"===d?"h":"v",f=Fi(d,c)),!f)return!1;if(!r.current&&"changedTouches"in e&&(l||u)&&(r.current=i),!i)return!0;var p=r.current||i;return function(e,t,n,r){var i=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=i*r,a=n.target,s=t.contains(a),l=!1,u=o>0,c=0,d=0;do{if(!a)break;var f=ji(e,a),p=f[0],h=f[1]-f[2]-i*p;(p||h)&&Li(e,a)&&(c+=h,d+=p);var m=a.parentNode;a=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!s&&a!==document.body||s&&(t.contains(a)||t===a));return(u&&Math.abs(c)<1||!u&&Math.abs(d)<1)&&(l=!0),l}(p,t,e,"h"===p?l:u)},[]),l=k.useCallback(function(e){var n=e;if(Hi.length&&Hi[Hi.length-1]===o){var r="deltaY"in n?$i(n):Bi(n),i=t.current.filter(function(e){return e.name===n.type&&(e.target===n.target||n.target===e.shadowParent)&&(t=e.delta,i=r,t[0]===i[0]&&t[1]===i[1]);var t,i})[0];if(i&&i.should)n.cancelable&&n.preventDefault();else if(!i){var l=(a.current.shards||[]).map(zi).filter(Boolean).filter(function(e){return e.contains(n.target)});(l.length>0?s(n,l[0]):!a.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),u=k.useCallback(function(e,n,r,i){var o={name:e,delta:n,target:r,should:i,shadowParent:Vi(r)};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),c=k.useCallback(function(e){n.current=Bi(e),r.current=void 0},[]),d=k.useCallback(function(t){u(t.type,$i(t),t.target,s(t,e.lockRef.current))},[]),f=k.useCallback(function(t){u(t.type,Bi(t),t.target,s(t,e.lockRef.current))},[]);k.useEffect(function(){return Hi.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,Mi),document.addEventListener("touchmove",l,Mi),document.addEventListener("touchstart",c,Mi),function(){Hi=Hi.filter(function(e){return e!==o}),document.removeEventListener("wheel",l,Mi),document.removeEventListener("touchmove",l,Mi),document.removeEventListener("touchstart",c,Mi)}},[]);var p=e.removeScrollBar,h=e.inert;return k.createElement(k.Fragment,null,h?k.createElement(o,{styles:Ui(i)}):null,p?k.createElement(Ni,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},vi.useMedium(Gi),yi);var Gi,Yi=k.forwardRef(function(e,t){return k.createElement(wi,ni({},e,{ref:t,sideCar:Wi}))});Yi.classNames=wi.classNames;var Ki=new WeakMap,Zi=new WeakMap,Qi={},Xi=0,Ji=function(e){return e&&(e.host||Ji(e.parentNode))},eo=function(e,t,n,r){var i=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=Ji(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Qi[n]||(Qi[n]=new WeakMap);var o=Qi[n],a=[],s=new Set,l=new Set(i),u=function(e){e&&!s.has(e)&&(s.add(e),u(e.parentNode))};i.forEach(u);var c=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(s.has(e))c(e);else try{var t=e.getAttribute(r),i=null!==t&&"false"!==t,l=(Ki.get(e)||0)+1,u=(o.get(e)||0)+1;Ki.set(e,l),o.set(e,u),a.push(e),1===l&&i&&Zi.set(e,!0),1===u&&e.setAttribute(n,"true"),i||e.setAttribute(r,"true")}catch(F0){}})};return c(t),s.clear(),Xi++,function(){a.forEach(function(e){var t=Ki.get(e)-1,i=o.get(e)-1;Ki.set(e,t),o.set(e,i),t||(Zi.has(e)||e.removeAttribute(r),Zi.delete(e)),i||e.removeAttribute(n)}),--Xi||(Ki=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,Qi={})}},to=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live], script"))),eo(r,i,n,"aria-hidden")):function(){return null}},no="Dialog",[ro]=A(no),[io,oo]=ro(no),ao=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!0}=e,s=k.useRef(null),l=k.useRef(null),[u,c]=q({prop:r,defaultProp:i??!1,onChange:o,caller:no});return w.jsx(io,{scope:t,triggerRef:s,contentRef:l,contentId:ie(),titleId:ie(),descriptionId:ie(),open:u,onOpenChange:c,onOpenToggle:k.useCallback(()=>c(e=>!e),[c]),modal:a,children:n})};ao.displayName=no;var so="DialogTrigger";k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oo(so,n),o=D(t,i.triggerRef);return w.jsx(X.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Ao(i.open),...r,ref:o,onClick:$(e.onClick,i.onOpenToggle)})}).displayName=so;var lo="DialogPortal",[uo,co]=ro(lo,{forceMount:void 0}),fo=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=oo(lo,t);return w.jsx(uo,{scope:t,forceMount:n,children:k.Children.map(r,e=>w.jsx(ee,{present:n||o.open,children:w.jsx(Xr,{asChild:!0,container:i,children:e})}))})};fo.displayName=lo;var po="DialogOverlay",ho=k.forwardRef((e,t)=>{const n=co(po,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=oo(po,e.__scopeDialog);return o.modal?w.jsx(ee,{present:r||o.open,children:w.jsx(go,{...i,ref:t})}):null});ho.displayName=po;var mo=R("DialogOverlay.RemoveScroll"),go=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oo(po,n);return w.jsx(Yi,{as:mo,allowPinchZoom:!0,shards:[i.contentRef],children:w.jsx(X.div,{"data-state":Ao(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),yo="DialogContent",vo=k.forwardRef((e,t)=>{const n=co(yo,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=oo(yo,e.__scopeDialog);return w.jsx(ee,{present:r||o.open,children:o.modal?w.jsx(bo,{...i,ref:t}):w.jsx(wo,{...i,ref:t})})});vo.displayName=yo;var bo=k.forwardRef((e,t)=>{const n=oo(yo,e.__scopeDialog),r=k.useRef(null),i=D(t,n.contentRef,r);return k.useEffect(()=>{const e=r.current;if(e)return to(e)},[]),w.jsx(_o,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:$(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:$(e.onFocusOutside,e=>e.preventDefault())})}),wo=k.forwardRef((e,t)=>{const n=oo(yo,e.__scopeDialog),r=k.useRef(!1),i=k.useRef(!1);return w.jsx(_o,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,a;null==(o=e.onCloseAutoFocus)||o.call(e,t),t.defaultPrevented||(r.current||null==(a=n.triggerRef.current)||a.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var o,a;null==(o=e.onInteractOutside)||o.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target;(null==(a=n.triggerRef.current)?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),_o=k.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...a}=e,s=oo(yo,n),l=k.useRef(null),u=D(t,l);return ei(),w.jsxs(w.Fragment,{children:[w.jsx(Vr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:w.jsx(Fr,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":Ao(s.open),...a,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),w.jsxs(w.Fragment,{children:[w.jsx(Do,{titleId:s.titleId}),w.jsx(Ro,{contentRef:l,descriptionId:s.descriptionId})]})]})}),xo="DialogTitle",Eo=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oo(xo,n);return w.jsx(X.h2,{id:i.titleId,...r,ref:t})});Eo.displayName=xo;var So="DialogDescription",ko=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oo(So,n);return w.jsx(X.p,{id:i.descriptionId,...r,ref:t})});ko.displayName=So;var To="DialogClose",Co=k.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=oo(To,n);return w.jsx(X.button,{type:"button",...r,ref:t,onClick:$(e.onClick,()=>i.onOpenChange(!1))})});function Ao(e){return e?"open":"closed"}Co.displayName=To;var Io="DialogTitleWarning",[Oo,No]=function(e,t){const n=k.createContext(t),r=e=>{const{children:t,...r}=e,i=k.useMemo(()=>r,Object.values(r));return w.jsx(n.Provider,{value:i,children:t})};return r.displayName=e+"Provider",[r,function(r){const i=k.useContext(n);if(i)return i;if(void 0!==t)return t;throw new Error(`\`${r}\` must be used within \`${e}\``)}]}(Io,{contentName:yo,titleName:xo,docsSlug:"dialog"}),Do=({titleId:e})=>{const t=No(Io),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return k.useEffect(()=>{if(e){document.getElementById(e)}},[n,e]),null},Ro=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${No("DialogDescriptionWarning").contentName}}.`;return k.useEffect(()=>{var n;const r=null==(n=e.current)?void 0:n.getAttribute("aria-describedby");if(t&&r){document.getElementById(t)}},[n,e,t]),null},Mo=ao,Po=fo,Fo=ho,Lo=vo,jo=Eo,Bo=ko,$o=Co,zo='[cmdk-group=""]',Uo='[cmdk-group-items=""]',qo='[cmdk-item=""]',Ho=`${qo}:not([aria-disabled="true"])`,Vo="cmdk-item-select",Wo="data-value",Go=(e,t,n)=>Ir(e,t,n),Yo=k.createContext(void 0),Ko=()=>k.useContext(Yo),Zo=k.createContext(void 0),Qo=()=>k.useContext(Zo),Xo=k.createContext(void 0),Jo=k.forwardRef((e,t)=>{let n=pa(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=pa(()=>new Set),i=pa(()=>new Map),o=pa(()=>new Map),a=pa(()=>new Set),s=da(e),{label:l,children:u,value:c,onValueChange:d,filter:f,shouldFilter:p,loop:h,disablePointerSelection:m=!1,vimBindings:g=!0,...y}=e,v=ie(),b=ie(),w=ie(),_=k.useRef(null),x=ga();fa(()=>{if(void 0!==c){let e=c.trim();n.current.value=e,E.emit()}},[c]),fa(()=>{x(6,O)},[]);let E=k.useMemo(()=>({subscribe:e=>(a.current.add(e),()=>a.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var i,o,a,l;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)I(),C(),x(1,A);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(w);e?e.focus():null==(i=document.getElementById(v))||i.focus()}if(x(7,()=>{var e;n.current.selectedItemId=null==(e=N())?void 0:e.id,E.emit()}),r||x(5,O),void 0!==(null==(o=s.current)?void 0:o.value)){let e=null!=t?t:"";return void(null==(l=(a=s.current).onValueChange)||l.call(a,e))}}E.emit()}},emit:()=>{a.current.forEach(e=>e())}}),[]),S=k.useMemo(()=>({value:(e,t,r)=>{var i;t!==(null==(i=o.current.get(e))?void 0:i.value)&&(o.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,T(t,r)),x(2,()=>{C(),E.emit()}))},item:(e,t)=>(r.current.add(e),t&&(i.current.has(t)?i.current.get(t).add(e):i.current.set(t,new Set([e]))),x(3,()=>{I(),C(),n.current.value||A(),E.emit()}),()=>{o.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=N();x(4,()=>{I(),(null==t?void 0:t.getAttribute("id"))===e&&A(),E.emit()})}),group:e=>(i.current.has(e)||i.current.set(e,new Set),()=>{o.current.delete(e),i.current.delete(e)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:v,inputId:w,labelId:b,listInnerRef:_}),[]);function T(e,t){var r,i;let o=null!=(i=null==(r=s.current)?void 0:r.filter)?i:Go;return e?o(e,n.current.search,t):0}function C(){if(!n.current.search||!1===s.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=i.current.get(n),o=0;r.forEach(t=>{let n=e.get(t);o=Math.max(n,o)}),t.push([n,o])});let r=_.current;D().sort((t,n)=>{var r,i;let o=t.getAttribute("id"),a=n.getAttribute("id");return(null!=(r=e.get(a))?r:0)-(null!=(i=e.get(o))?i:0)}).forEach(e=>{let t=e.closest(Uo);t?t.appendChild(e.parentElement===t?e:e.closest(`${Uo} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${Uo} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let n=null==(t=_.current)?void 0:t.querySelector(`${zo}[${Wo}="${encodeURIComponent(e[0])}"]`);null==n||n.parentElement.appendChild(n)})}function A(){let e=D().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(Wo);E.setState("value",t||void 0)}function I(){var e,t,a,l;if(!n.current.search||!1===s.current.shouldFilter)return void(n.current.filtered.count=r.current.size);n.current.filtered.groups=new Set;let u=0;for(let i of r.current){let r=T(null!=(t=null==(e=o.current.get(i))?void 0:e.value)?t:"",null!=(l=null==(a=o.current.get(i))?void 0:a.keywords)?l:[]);n.current.filtered.items.set(i,r),r>0&&u++}for(let[r,o]of i.current)for(let e of o)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(r);break}n.current.filtered.count=u}function O(){var e,t,n;let r=N();r&&((null==(e=r.parentElement)?void 0:e.firstChild)===r&&(null==(n=null==(t=r.closest(zo))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),r.scrollIntoView({block:"nearest"}))}function N(){var e;return null==(e=_.current)?void 0:e.querySelector(`${qo}[aria-selected="true"]`)}function D(){var e;return Array.from((null==(e=_.current)?void 0:e.querySelectorAll(Ho))||[])}function R(e){let t=D()[e];t&&E.setState("value",t.getAttribute(Wo))}function M(e){var t;let n=N(),r=D(),i=r.findIndex(e=>e===n),o=r[i+e];null!=(t=s.current)&&t.loop&&(o=i+e<0?r[r.length-1]:i+e===r.length?r[0]:r[i+e]),o&&E.setState("value",o.getAttribute(Wo))}function P(e){let t,n=N(),r=null==n?void 0:n.closest(zo);for(;r&&!t;)r=e>0?ua(r,zo):ca(r,zo),t=null==r?void 0:r.querySelector(Ho);t?E.setState("value",t.getAttribute(Wo)):M(e)}let F=()=>R(D().length-1),L=e=>{e.preventDefault(),e.metaKey?F():e.altKey?P(1):M(1)},j=e=>{e.preventDefault(),e.metaKey?R(0):e.altKey?P(-1):M(-1)};return k.createElement(X.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=y.onKeyDown)||t.call(y,e);let n=e.nativeEvent.isComposing||229===e.keyCode;if(!e.defaultPrevented&&!n)switch(e.key){case"n":case"j":g&&e.ctrlKey&&L(e);break;case"ArrowDown":L(e);break;case"p":case"k":g&&e.ctrlKey&&j(e);break;case"ArrowUp":j(e);break;case"Home":e.preventDefault(),R(0);break;case"End":e.preventDefault(),F();break;case"Enter":{e.preventDefault();let t=N();if(t){let e=new Event(Vo);t.dispatchEvent(e)}}}}},k.createElement("label",{"cmdk-label":"",htmlFor:S.inputId,id:S.labelId,style:va},l),ya(e,e=>k.createElement(Zo.Provider,{value:E},k.createElement(Yo.Provider,{value:S},e))))}),ea=k.forwardRef((e,t)=>{var n,r;let i=ie(),o=k.useRef(null),a=k.useContext(Xo),s=Ko(),l=da(e),u=null!=(r=null==(n=l.current)?void 0:n.forceMount)?r:null==a?void 0:a.forceMount;fa(()=>{if(!u)return s.item(i,null==a?void 0:a.id)},[u]);let c=ma(i,o,[e.value,e.children,o],e.keywords),d=Qo(),f=ha(e=>e.value&&e.value===c.current),p=ha(e=>!(!u&&!1!==s.filter())||(!e.search||e.filtered.items.get(i)>0));function h(){var e,t;m(),null==(t=(e=l.current).onSelect)||t.call(e,c.current)}function m(){d.setState("value",c.current,!0)}if(k.useEffect(()=>{let t=o.current;if(t&&!e.disabled)return t.addEventListener(Vo,h),()=>t.removeEventListener(Vo,h)},[p,e.onSelect,e.disabled]),!p)return null;let{disabled:g,value:y,onSelect:v,forceMount:b,keywords:w,..._}=e;return k.createElement(X.div,{ref:N(o,t),..._,id:i,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||s.getDisablePointerSelection()?void 0:m,onClick:g?void 0:h},e.children)}),ta=k.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:i,...o}=e,a=ie(),s=k.useRef(null),l=k.useRef(null),u=ie(),c=Ko(),d=ha(e=>!(!i&&!1!==c.filter())||(!e.search||e.filtered.groups.has(a)));fa(()=>c.group(a),[]),ma(a,s,[e.value,e.heading,l]);let f=k.useMemo(()=>({id:a,forceMount:i}),[i]);return k.createElement(X.div,{ref:N(s,t),...o,"cmdk-group":"",role:"presentation",hidden:!d||void 0},n&&k.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),ya(e,e=>k.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},k.createElement(Xo.Provider,{value:f},e))))}),na=k.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,i=k.useRef(null),o=ha(e=>!e.search);return n||o?k.createElement(X.div,{ref:N(i,t),...r,"cmdk-separator":"",role:"separator"}):null}),ra=k.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,i=null!=e.value,o=Qo(),a=ha(e=>e.search),s=ha(e=>e.selectedItemId),l=Ko();return k.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),k.createElement(X.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":s,id:l.inputId,type:"text",value:i?e.value:a,onChange:e=>{i||o.setState("search",e.target.value),null==n||n(e.target.value)}})}),ia=k.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...i}=e,o=k.useRef(null),a=k.useRef(null),s=ha(e=>e.selectedItemId),l=Ko();return k.useEffect(()=>{if(a.current&&o.current){let e,t=a.current,n=o.current,r=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return r.observe(t),()=>{cancelAnimationFrame(e),r.unobserve(t)}}},[]),k.createElement(X.div,{ref:N(o,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:l.listId},ya(e,e=>k.createElement("div",{ref:N(a,l.listInnerRef),"cmdk-list-sizer":""},e)))}),oa=k.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:i,contentClassName:o,container:a,...s}=e;return k.createElement(Mo,{open:n,onOpenChange:r},k.createElement(Po,{container:a},k.createElement(Fo,{"cmdk-overlay":"",className:i}),k.createElement(Lo,{"aria-label":e.label,"cmdk-dialog":"",className:o},k.createElement(Jo,{ref:t,...s}))))}),aa=k.forwardRef((e,t)=>ha(e=>0===e.filtered.count)?k.createElement(X.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),sa=k.forwardRef((e,t)=>{let{progress:n,children:r,label:i="Loading...",...o}=e;return k.createElement(X.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},ya(e,e=>k.createElement("div",{"aria-hidden":!0},e)))}),la=Object.assign(Jo,{List:ia,Item:ea,Input:ra,Group:ta,Separator:na,Dialog:oa,Empty:aa,Loading:sa});function ua(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function ca(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function da(e){let t=k.useRef(e);return fa(()=>{t.current=e}),t}var fa="undefined"==typeof window?k.useEffect:k.useLayoutEffect;function pa(e){let t=k.useRef();return void 0===t.current&&(t.current=e()),t}function ha(e){let t=Qo(),n=()=>e(t.snapshot());return k.useSyncExternalStore(t.subscribe,n,n)}function ma(e,t,n,r=[]){let i=k.useRef(),o=Ko();return fa(()=>{var a;let s=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():i.current}})(),l=r.map(e=>e.trim());o.value(e,s,l),null==(a=t.current)||a.setAttribute(Wo,s),i.current=s}),i}var ga=()=>{let[e,t]=k.useState(),n=pa(()=>new Map);return fa(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function ya({asChild:e,children:t},n){return e&&k.isValidElement(t)?k.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var va={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ba=Mo,wa=Po,_a=k.forwardRef(({className:e,...t},n)=>w.jsx(Fo,{ref:n,className:zn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t}));_a.displayName=Fo.displayName;const xa=k.forwardRef(({className:e,children:t,showCloseButton:n=!0,...r},i)=>w.jsxs(wa,{children:[w.jsx(_a,{}),w.jsxs(Lo,{ref:i,className:zn("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e),...r,children:[t,n&&w.jsxs($o,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[w.jsx(Vt,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xa.displayName=Lo.displayName;const Ea=({className:e,...t})=>w.jsx("div",{className:zn("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ea.displayName="DialogHeader";const Sa=({className:e,...t})=>w.jsx("div",{className:zn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Sa.displayName="DialogFooter";const ka=k.forwardRef(({className:e,...t},n)=>w.jsx(jo,{ref:n,className:zn("text-lg font-semibold leading-none tracking-tight",e),...t}));ka.displayName=jo.displayName;const Ta=k.forwardRef(({className:e,...t},n)=>w.jsx(Bo,{ref:n,className:zn("text-muted-foreground text-sm",e),...t}));Ta.displayName=Bo.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(la,{ref:n,className:zn("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})).displayName=la.displayName;k.forwardRef(({className:e,...t},n)=>w.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[w.jsx(Ft,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),w.jsx(la.Input,{ref:n,className:zn("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})).displayName=la.Input.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(la.List,{ref:n,className:zn("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t})).displayName=la.List.displayName;k.forwardRef((e,t)=>w.jsx(la.Empty,{ref:t,className:"py-6 text-center text-sm",...e})).displayName=la.Empty.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(la.Group,{ref:n,className:zn("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})).displayName=la.Group.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(la.Separator,{ref:n,className:zn("bg-border -mx-1 h-px",e),...t})).displayName=la.Separator.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(la.Item,{ref:n,className:zn("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t})).displayName=la.Item.displayName;const Ca=["top","right","bottom","left"],Aa=Math.min,Ia=Math.max,Oa=Math.round,Na=Math.floor,Da=e=>({x:e,y:e}),Ra={left:"right",right:"left",bottom:"top",top:"bottom"},Ma={start:"end",end:"start"};function Pa(e,t,n){return Ia(e,Aa(t,n))}function Fa(e,t){return"function"==typeof e?e(t):e}function La(e){return e.split("-")[0]}function ja(e){return e.split("-")[1]}function Ba(e){return"x"===e?"y":"x"}function $a(e){return"y"===e?"height":"width"}const za=new Set(["top","bottom"]);function Ua(e){return za.has(La(e))?"y":"x"}function qa(e){return Ba(Ua(e))}function Ha(e){return e.replace(/start|end/g,e=>Ma[e])}const Va=["left","right"],Wa=["right","left"],Ga=["top","bottom"],Ya=["bottom","top"];function Ka(e,t,n,r){const i=ja(e);let o=function(e,t,n){switch(e){case"top":case"bottom":return n?t?Wa:Va:t?Va:Wa;case"left":case"right":return t?Ga:Ya;default:return[]}}(La(e),"start"===n,r);return i&&(o=o.map(e=>e+"-"+i),t&&(o=o.concat(o.map(Ha)))),o}function Za(e){return e.replace(/left|right|bottom|top/g,e=>Ra[e])}function Qa(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function Xa(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ja(e,t,n){let{reference:r,floating:i}=e;const o=Ua(t),a=qa(t),s=$a(a),l=La(t),u="y"===o,c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[s]/2-i[s]/2;let p;switch(l){case"top":p={x:c,y:r.y-i.height};break;case"bottom":p={x:c,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(ja(t)){case"start":p[a]-=f*(n&&u?-1:1);break;case"end":p[a]+=f*(n&&u?-1:1)}return p}async function es(e,t){var n;void 0===t&&(t={});const{x:r,y:i,platform:o,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Fa(t,e),h=Qa(p),m=s[f?"floating"===d?"reference":"floating":d],g=Xa(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(m)))||n?m:m.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(s.floating)),boundary:u,rootBoundary:c,strategy:l})),y="floating"===d?{x:r,y:i,width:a.floating.width,height:a.floating.height}:a.reference,v=await(null==o.getOffsetParent?void 0:o.getOffsetParent(s.floating)),b=await(null==o.isElement?void 0:o.isElement(v))&&await(null==o.getScale?void 0:o.getScale(v))||{x:1,y:1},w=Xa(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+h.top)/b.y,bottom:(w.bottom-g.bottom+h.bottom)/b.y,left:(g.left-w.left+h.left)/b.x,right:(w.right-g.right+h.right)/b.x}}function ts(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function ns(e){return Ca.some(t=>e[t]>=0)}const rs=new Set(["left","top"]);function is(){return"undefined"!=typeof window}function os(e){return ls(e)?(e.nodeName||"").toLowerCase():"#document"}function as(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function ss(e){var t;return null==(t=(ls(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function ls(e){return!!is()&&(e instanceof Node||e instanceof as(e).Node)}function us(e){return!!is()&&(e instanceof Element||e instanceof as(e).Element)}function cs(e){return!!is()&&(e instanceof HTMLElement||e instanceof as(e).HTMLElement)}function ds(e){return!(!is()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof as(e).ShadowRoot)}const fs=new Set(["inline","contents"]);function ps(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=ks(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!fs.has(i)}const hs=new Set(["table","td","th"]);function ms(e){return hs.has(os(e))}const gs=[":popover-open",":modal"];function ys(e){return gs.some(t=>{try{return e.matches(t)}catch(n){return!1}})}const vs=["transform","translate","scale","rotate","perspective"],bs=["transform","translate","scale","rotate","perspective","filter"],ws=["paint","layout","strict","content"];function _s(e){const t=xs(),n=us(e)?ks(e):e;return vs.some(e=>!!n[e]&&"none"!==n[e])||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||bs.some(e=>(n.willChange||"").includes(e))||ws.some(e=>(n.contain||"").includes(e))}function xs(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}const Es=new Set(["html","body","#document"]);function Ss(e){return Es.has(os(e))}function ks(e){return as(e).getComputedStyle(e)}function Ts(e){return us(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Cs(e){if("html"===os(e))return e;const t=e.assignedSlot||e.parentNode||ds(e)&&e.host||ss(e);return ds(t)?t.host:t}function As(e){const t=Cs(e);return Ss(t)?e.ownerDocument?e.ownerDocument.body:e.body:cs(t)&&ps(t)?t:As(t)}function Is(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const i=As(e),o=i===(null==(r=e.ownerDocument)?void 0:r.body),a=as(i);if(o){const e=Os(a);return t.concat(a,a.visualViewport||[],ps(i)?i:[],e&&n?Is(e):[])}return t.concat(i,Is(i,[],n))}function Os(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ns(e){const t=ks(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=cs(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Oa(n)!==o||Oa(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}function Ds(e){return us(e)?e:e.contextElement}function Rs(e){const t=Ds(e);if(!cs(t))return Da(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=Ns(t);let a=(o?Oa(n.width):n.width)/r,s=(o?Oa(n.height):n.height)/i;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Ms=Da(0);function Ps(e){const t=as(e);return xs()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Ms}function Fs(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const i=e.getBoundingClientRect(),o=Ds(e);let a=Da(1);t&&(r?us(r)&&(a=Rs(r)):a=Rs(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==as(e))&&t}(o,n,r)?Ps(o):Da(0);let l=(i.left+s.x)/a.x,u=(i.top+s.y)/a.y,c=i.width/a.x,d=i.height/a.y;if(o){const e=as(o),t=r&&us(r)?as(r):r;let n=e,i=Os(n);for(;i&&r&&t!==n;){const e=Rs(i),t=i.getBoundingClientRect(),r=ks(i),o=t.left+(i.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(i.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,c*=e.x,d*=e.y,l+=o,u+=a,n=as(i),i=Os(n)}}return Xa({width:c,height:d,x:l,y:u})}function Ls(e,t){const n=Ts(e).scrollLeft;return t?t.left+n:Fs(ss(e)).left+n}function js(e,t){const n=e.getBoundingClientRect();return{x:n.left+t.scrollLeft-Ls(e,n),y:n.top+t.scrollTop}}const Bs=new Set(["absolute","fixed"]);function $s(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=as(e),r=ss(e),i=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,s=0,l=0;if(i){o=i.width,a=i.height;const e=xs();(!e||e&&"fixed"===t)&&(s=i.offsetLeft,l=i.offsetTop)}const u=Ls(r);if(u<=0){const e=r.ownerDocument,t=e.body,n=getComputedStyle(t),i="CSS1Compat"===e.compatMode&&parseFloat(n.marginLeft)+parseFloat(n.marginRight)||0,a=Math.abs(r.clientWidth-t.clientWidth-i);a<=25&&(o-=a)}else u<=25&&(o+=u);return{width:o,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=ss(e),n=Ts(e),r=e.ownerDocument.body,i=Ia(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Ia(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Ls(e);const s=-n.scrollTop;return"rtl"===ks(r).direction&&(a+=Ia(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(ss(e));else if(us(t))r=function(e,t){const n=Fs(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=cs(e)?Rs(e):Da(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{const n=Ps(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return Xa(r)}function zs(e,t){const n=Cs(e);return!(n===t||!us(n)||Ss(n))&&("fixed"===ks(n).position||zs(n,t))}function Us(e,t,n){const r=cs(t),i=ss(t),o="fixed"===n,a=Fs(e,!0,o,t);let s={scrollLeft:0,scrollTop:0};const l=Da(0);function u(){l.x=Ls(i)}if(r||!r&&!o)if(("body"!==os(t)||ps(i))&&(s=Ts(t)),r){const e=Fs(t,!0,o,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else i&&u();o&&!r&&i&&u();const c=!i||r||o?Da(0):js(i,s);return{x:a.left+s.scrollLeft-l.x-c.x,y:a.top+s.scrollTop-l.y-c.y,width:a.width,height:a.height}}function qs(e){return"static"===ks(e).position}function Hs(e,t){if(!cs(e)||"fixed"===ks(e).position)return null;if(t)return t(e);let n=e.offsetParent;return ss(e)===n&&(n=n.ownerDocument.body),n}function Vs(e,t){const n=as(e);if(ys(e))return n;if(!cs(e)){let t=Cs(e);for(;t&&!Ss(t);){if(us(t)&&!qs(t))return t;t=Cs(t)}return n}let r=Hs(e,t);for(;r&&ms(r)&&qs(r);)r=Hs(r,t);return r&&Ss(r)&&qs(r)&&!_s(r)?n:r||function(e){let t=Cs(e);for(;cs(t)&&!Ss(t);){if(_s(t))return t;if(ys(t))return null;t=Cs(t)}return null}(e)||n}const Ws={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o="fixed"===i,a=ss(r),s=!!t&&ys(t.floating);if(r===a||s&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Da(1);const c=Da(0),d=cs(r);if((d||!d&&!o)&&(("body"!==os(r)||ps(a))&&(l=Ts(r)),cs(r))){const e=Fs(r);u=Rs(r),c.x=e.x+r.clientLeft,c.y=e.y+r.clientTop}const f=!a||d||o?Da(0):js(a,l);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x+f.x,y:n.y*u.y-l.scrollTop*u.y+c.y+f.y}},getDocumentElement:ss,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[..."clippingAncestors"===n?ys(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Is(e,[],!1).filter(e=>us(e)&&"body"!==os(e)),i=null;const o="fixed"===ks(e).position;let a=o?Cs(e):e;for(;us(a)&&!Ss(a);){const t=ks(a),n=_s(a);n||"fixed"!==t.position||(i=null),(o?!n&&!i:!n&&"static"===t.position&&i&&Bs.has(i.position)||ps(a)&&!n&&zs(e,a))?r=r.filter(e=>e!==a):i=t,a=Cs(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=o[0],s=o.reduce((e,n)=>{const r=$s(t,n,i);return e.top=Ia(r.top,e.top),e.right=Aa(r.right,e.right),e.bottom=Aa(r.bottom,e.bottom),e.left=Ia(r.left,e.left),e},$s(t,a,i));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Vs,getElementRects:async function(e){const t=this.getOffsetParent||Vs,n=this.getDimensions,r=await n(e.floating);return{reference:Us(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Ns(e);return{width:t,height:n}},getScale:Rs,isElement:us,isRTL:function(e){return"rtl"===ks(e).direction}};function Gs(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Ys(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,u=Ds(e),c=i||o?[...u?Is(u):[],...Is(t)]:[];c.forEach(e=>{i&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)});const d=u&&s?function(e,t){let n,r=null;const i=ss(e);function o(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),o();const u=e.getBoundingClientRect(),{left:c,top:d,width:f,height:p}=u;if(s||t(),!f||!p)return;const h={rootMargin:-Na(d)+"px "+-Na(i.clientWidth-(c+f))+"px "+-Na(i.clientHeight-(d+p))+"px "+-Na(c)+"px",threshold:Ia(0,Aa(1,l))||1};let m=!0;function g(t){const r=t[0].intersectionRatio;if(r!==l){if(!m)return a();r?a(!1,r):n=setTimeout(()=>{a(!1,1e-7)},1e3)}1!==r||Gs(u,e.getBoundingClientRect())||a(),m=!1}try{r=new IntersectionObserver(g,{...h,root:i.ownerDocument})}catch(y){r=new IntersectionObserver(g,h)}r.observe(e)}(!0),o}(u,n):null;let f,p=-1,h=null;a&&(h=new ResizeObserver(e=>{let[r]=e;r&&r.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var e;null==(e=h)||e.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let m=l?Fs(e):null;return l&&function t(){const r=Fs(e);m&&!Gs(m,r)&&n();m=r,f=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach(e=>{i&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)}),null==d||d(),null==(e=h)||e.disconnect(),h=null,l&&cancelAnimationFrame(f)}}const Ks=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:i}=e,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),a=La(n),s=ja(n),l="y"===Ua(n),u=rs.has(a)?-1:1,c=o&&l?-1:1,d=Fa(t,e);let{mainAxis:f,crossAxis:p,alignmentAxis:h}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&"number"==typeof h&&(p="end"===s?-1*h:h),l?{x:p*c,y:f*u}:{x:f*u,y:p*c}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:a}}}}},Zs=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=Fa(e,t),u={x:n,y:r},c=await es(t,l),d=Ua(La(i)),f=Ba(d);let p=u[f],h=u[d];if(o){const e="y"===f?"bottom":"right";p=Pa(p+c["y"===f?"top":"left"],p,p-c[e])}if(a){const e="y"===d?"bottom":"right";h=Pa(h+c["y"===d?"top":"left"],h,h-c[e])}const m=s.fn({...t,[f]:p,[d]:h});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[f]:o,[d]:a}}}}}},Qs=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:h="none",flipAlignment:m=!0,...g}=Fa(e,t);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const y=La(i),v=Ua(s),b=La(s)===s,w=await(null==l.isRTL?void 0:l.isRTL(u.floating)),_=f||(b||!m?[Za(s)]:function(e){const t=Za(e);return[Ha(e),t,Ha(t)]}(s)),x="none"!==h;!f&&x&&_.push(...Ka(s,m,h,w));const E=[s,..._],S=await es(t,g),k=[];let T=(null==(r=o.flip)?void 0:r.overflows)||[];if(c&&k.push(S[y]),d){const e=function(e,t,n){void 0===n&&(n=!1);const r=ja(e),i=qa(e),o=$a(i);let a="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[o]>t.floating[o]&&(a=Za(a)),[a,Za(a)]}(i,a,w);k.push(S[e[0]],S[e[1]])}if(T=[...T,{placement:i,overflows:k}],!k.every(e=>e<=0)){var C,A;const e=((null==(C=o.flip)?void 0:C.index)||0)+1,t=E[e];if(t){if(!("alignment"===d&&v!==Ua(t))||T.every(e=>Ua(e.placement)!==v||e.overflows[0]>0))return{data:{index:e,overflows:T},reset:{placement:t}}}let n=null==(A=T.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:A.placement;if(!n)switch(p){case"bestFit":{var I;const e=null==(I=T.filter(e=>{if(x){const t=Ua(e.placement);return t===v||"y"===t}return!0}).map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:I[0];e&&(n=e);break}case"initialPlacement":n=s}if(i!==n)return{reset:{placement:n}}}return{}}}},Xs=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:a,elements:s}=t,{apply:l=()=>{},...u}=Fa(e,t),c=await es(t,u),d=La(i),f=ja(i),p="y"===Ua(i),{width:h,height:m}=o.floating;let g,y;"top"===d||"bottom"===d?(g=d,y=f===(await(null==a.isRTL?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(y=d,g="end"===f?"top":"bottom");const v=m-c.top-c.bottom,b=h-c.left-c.right,w=Aa(m-c[g],v),_=Aa(h-c[y],b),x=!t.middlewareData.shift;let E=w,S=_;if(null!=(n=t.middlewareData.shift)&&n.enabled.x&&(S=b),null!=(r=t.middlewareData.shift)&&r.enabled.y&&(E=v),x&&!f){const e=Ia(c.left,0),t=Ia(c.right,0),n=Ia(c.top,0),r=Ia(c.bottom,0);p?S=h-2*(0!==e||0!==t?e+t:Ia(c.left,c.right)):E=m-2*(0!==n||0!==r?n+r:Ia(c.top,c.bottom))}await l({...t,availableWidth:S,availableHeight:E});const k=await a.getDimensions(s.floating);return h!==k.width||m!==k.height?{reset:{rects:!0}}:{}}}},Js=function(e){return void 0===e&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Fa(e,t);switch(r){case"referenceHidden":{const e=ts(await es(t,{...i,elementContext:"reference"}),n.reference);return{data:{referenceHiddenOffsets:e,referenceHidden:ns(e)}}}case"escaped":{const e=ts(await es(t,{...i,altBoundary:!0}),n.floating);return{data:{escapedOffsets:e,escaped:ns(e)}}}default:return{}}}}},el=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:c=0}=Fa(e,t)||{};if(null==u)return{};const d=Qa(c),f={x:n,y:r},p=qa(i),h=$a(p),m=await a.getDimensions(u),g="y"===p,y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=o.reference[h]+o.reference[p]-f[p]-o.floating[h],_=f[p]-o.reference[p],x=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let E=x?x[b]:0;E&&await(null==a.isElement?void 0:a.isElement(x))||(E=s.floating[b]||o.floating[h]);const S=w/2-_/2,k=E/2-m[h]/2-1,T=Aa(d[y],k),C=Aa(d[v],k),A=T,I=E-m[h]-C,O=E/2-m[h]/2+S,N=Pa(A,O,I),D=!l.arrow&&null!=ja(i)&&O!==N&&o.reference[h]/2-(O<A?T:C)-m[h]/2<0,R=D?O<A?O-A:O-I:0;return{[p]:f[p]+R,data:{[p]:N,centerOffset:O-N-R,...D&&{alignmentOffset:R}},reset:D}}}),tl=function(e){return void 0===e&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:a}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=Fa(e,t),c={x:n,y:r},d=Ua(i),f=Ba(d);let p=c[f],h=c[d];const m=Fa(s,t),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const e="y"===f?"height":"width",t=o.reference[f]-o.floating[e]+g.mainAxis,n=o.reference[f]+o.reference[e]-g.mainAxis;p<t?p=t:p>n&&(p=n)}if(u){var y,v;const e="y"===f?"width":"height",t=rs.has(La(i)),n=o.reference[d]-o.floating[e]+(t&&(null==(y=a.offset)?void 0:y[d])||0)+(t?0:g.crossAxis),r=o.reference[d]+o.reference[e]+(t?0:(null==(v=a.offset)?void 0:v[d])||0)-(t?g.crossAxis:0);h<n?h=n:h>r&&(h=r)}return{[f]:p,[d]:h}}}},nl=(e,t,n)=>{const r=new Map,i={platform:Ws,...n},o={...i.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:a}=n,s=o.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Ja(u,r,l),f=r,p={},h=0;for(let m=0;m<s.length;m++){const{name:n,fn:o}=s[m],{x:g,y:y,data:v,reset:b}=await o({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:u,platform:a,elements:{reference:e,floating:t}});c=null!=g?g:c,d=null!=y?y:d,p={...p,[n]:{...p[n],...v}},b&&h<=50&&(h++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(u=!0===b.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):b.rects),({x:c,y:d}=Ja(u,f,l))),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:p}})(e,t,{...i,platform:o})};var rl="undefined"!=typeof document?k.useLayoutEffect:function(){};function il(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;0!==r--;)if(!il(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(("_owner"!==n||!e.$$typeof)&&!il(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function ol(e){if("undefined"==typeof window)return 1;return(e.ownerDocument.defaultView||window).devicePixelRatio||1}function al(e,t){const n=ol(e);return Math.round(t*n)/n}function sl(e){const t=k.useRef(e);return rl(()=>{t.current=e}),t}const ll=e=>({name:"arrow",options:e,fn(t){const{element:n,padding:r}="function"==typeof e?e(t):e;return n&&(i=n,{}.hasOwnProperty.call(i,"current"))?null!=n.current?el({element:n.current,padding:r}).fn(t):{}:n?el({element:n,padding:r}).fn(t):{};var i}}),ul=(e,t)=>({...Ks(e),options:[e,t]}),cl=(e,t)=>({...Zs(e),options:[e,t]}),dl=(e,t)=>({...tl(e),options:[e,t]}),fl=(e,t)=>({...Qs(e),options:[e,t]}),pl=(e,t)=>({...Xs(e),options:[e,t]}),hl=(e,t)=>({...Js(e),options:[e,t]}),ml=(e,t)=>({...ll(e),options:[e,t]});var gl=k.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return w.jsx(X.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:w.jsx("polygon",{points:"0,0 30,0 15,10"})})});gl.displayName="Arrow";var yl=gl,vl="Popper",[bl,wl]=A(vl),[_l,xl]=bl(vl),El=e=>{const{__scopePopper:t,children:n}=e,[r,i]=k.useState(null);return w.jsx(_l,{scope:t,anchor:r,onAnchorChange:i,children:n})};El.displayName=vl;var Sl="PopperAnchor",kl=k.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=xl(Sl,n),a=k.useRef(null),s=D(t,a),l=k.useRef(null);return k.useEffect(()=>{const e=l.current;l.current=(null==r?void 0:r.current)||a.current,e!==l.current&&o.onAnchorChange(l.current)}),r?null:w.jsx(X.div,{...i,ref:s})});kl.displayName=Sl;var Tl="PopperContent",[Cl,Al]=bl(Tl),Il=k.forwardRef((e,t)=>{var n,r,i,o,a,s;const{__scopePopper:l,side:u="bottom",sideOffset:c=0,align:d="center",alignOffset:f=0,arrowPadding:p=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:g=0,sticky:y="partial",hideWhenDetached:v=!1,updatePositionStrategy:b="optimized",onPlaced:_,...x}=e,E=xl(Tl,l),[S,T]=k.useState(null),C=D(t,e=>T(e)),[A,I]=k.useState(null),O=ar(A),N=(null==O?void 0:O.width)??0,R=(null==O?void 0:O.height)??0,M=u+("center"!==d?"-"+d:""),P="number"==typeof g?g:{top:0,right:0,bottom:0,left:0,...g},F=Array.isArray(m)?m:[m],L=F.length>0,j={padding:P,boundary:F.filter(Rl),altBoundary:L},{refs:B,floatingStyles:$,placement:U,isPositioned:q,middlewareData:H}=function(e){void 0===e&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[c,d]=k.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,p]=k.useState(r);il(f,r)||p(r);const[h,m]=k.useState(null),[g,y]=k.useState(null),v=k.useCallback(e=>{e!==x.current&&(x.current=e,m(e))},[]),b=k.useCallback(e=>{e!==E.current&&(E.current=e,y(e))},[]),w=o||h,_=a||g,x=k.useRef(null),E=k.useRef(null),S=k.useRef(c),T=null!=l,C=sl(l),A=sl(i),I=sl(u),O=k.useCallback(()=>{if(!x.current||!E.current)return;const e={placement:t,strategy:n,middleware:f};A.current&&(e.platform=A.current),nl(x.current,E.current,e).then(e=>{const t={...e,isPositioned:!1!==I.current};N.current&&!il(S.current,t)&&(S.current=t,Z.flushSync(()=>{d(t)}))})},[f,t,n,A,I]);rl(()=>{!1===u&&S.current.isPositioned&&(S.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[u]);const N=k.useRef(!1);rl(()=>(N.current=!0,()=>{N.current=!1}),[]),rl(()=>{if(w&&(x.current=w),_&&(E.current=_),w&&_){if(C.current)return C.current(w,_,O);O()}},[w,_,O,C,T]);const D=k.useMemo(()=>({reference:x,floating:E,setReference:v,setFloating:b}),[v,b]),R=k.useMemo(()=>({reference:w,floating:_}),[w,_]),M=k.useMemo(()=>{const e={position:n,left:0,top:0};if(!R.floating)return e;const t=al(R.floating,c.x),r=al(R.floating,c.y);return s?{...e,transform:"translate("+t+"px, "+r+"px)",...ol(R.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:t,top:r}},[n,s,R.floating,c.x,c.y]);return k.useMemo(()=>({...c,update:O,refs:D,elements:R,floatingStyles:M}),[c,O,D,R,M])}({strategy:"fixed",placement:M,whileElementsMounted:(...e)=>Ys(...e,{animationFrame:"always"===b}),elements:{reference:E.anchor},middleware:[ul({mainAxis:c+R,alignmentAxis:f}),h&&cl({mainAxis:!0,crossAxis:!1,limiter:"partial"===y?dl():void 0,...j}),h&&fl({...j}),pl({...j,apply:({elements:e,rects:t,availableWidth:n,availableHeight:r})=>{const{width:i,height:o}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${n}px`),a.setProperty("--radix-popper-available-height",`${r}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${o}px`)}}),A&&ml({element:A,padding:p}),Ml({arrowWidth:N,arrowHeight:R}),v&&hl({strategy:"referenceHidden",...j})]}),[V,W]=Pl(U),G=Or(_);z(()=>{q&&(null==G||G())},[q,G]);const Y=null==(n=H.arrow)?void 0:n.x,K=null==(r=H.arrow)?void 0:r.y,Q=0!==(null==(i=H.arrow)?void 0:i.centerOffset),[J,ee]=k.useState();return z(()=>{S&&ee(window.getComputedStyle(S).zIndex)},[S]),w.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...$,transform:q?$.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:J,"--radix-popper-transform-origin":[null==(o=H.transformOrigin)?void 0:o.x,null==(a=H.transformOrigin)?void 0:a.y].join(" "),...(null==(s=H.hide)?void 0:s.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:w.jsx(Cl,{scope:l,placedSide:V,onArrowChange:I,arrowX:Y,arrowY:K,shouldHideArrow:Q,children:w.jsx(X.div,{"data-side":V,"data-align":W,...x,ref:C,style:{...x.style,animation:q?void 0:"none"}})})})});Il.displayName=Tl;var Ol="PopperArrow",Nl={top:"bottom",right:"left",bottom:"top",left:"right"},Dl=k.forwardRef(function(e,t){const{__scopePopper:n,...r}=e,i=Al(Ol,n),o=Nl[i.placedSide];return w.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:w.jsx(yl,{...r,ref:t,style:{...r.style,display:"block"}})})});function Rl(e){return null!==e}Dl.displayName=Ol;var Ml=e=>({name:"transformOrigin",options:e,fn(t){var n,r,i;const{placement:o,rects:a,middlewareData:s}=t,l=0!==(null==(n=s.arrow)?void 0:n.centerOffset),u=l?0:e.arrowWidth,c=l?0:e.arrowHeight,[d,f]=Pl(o),p={start:"0%",center:"50%",end:"100%"}[f],h=((null==(r=s.arrow)?void 0:r.x)??0)+u/2,m=((null==(i=s.arrow)?void 0:i.y)??0)+c/2;let g="",y="";return"bottom"===d?(g=l?p:`${h}px`,y=-c+"px"):"top"===d?(g=l?p:`${h}px`,y=`${a.floating.height+c}px`):"right"===d?(g=-c+"px",y=l?p:`${m}px`):"left"===d&&(g=`${a.floating.width+c}px`,y=l?p:`${m}px`),{data:{x:g,y:y}}}});function Pl(e){const[t,n="center"]=e.split("-");return[t,n]}var Fl=El,Ll=kl,jl=Il,Bl=Dl,$l="Popover",[zl]=A($l,[wl]),Ul=wl(),[ql,Hl]=zl($l),Vl=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:a=!1}=e,s=Ul(t),l=k.useRef(null),[u,c]=k.useState(!1),[d,f]=q({prop:r,defaultProp:i??!1,onChange:o,caller:$l});return w.jsx(Fl,{...s,children:w.jsx(ql,{scope:t,contentId:ie(),triggerRef:l,open:d,onOpenChange:f,onOpenToggle:k.useCallback(()=>f(e=>!e),[f]),hasCustomAnchor:u,onCustomAnchorAdd:k.useCallback(()=>c(!0),[]),onCustomAnchorRemove:k.useCallback(()=>c(!1),[]),modal:a,children:n})})};Vl.displayName=$l;var Wl="PopoverAnchor";k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Hl(Wl,n),o=Ul(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:s}=i;return k.useEffect(()=>(a(),()=>s()),[a,s]),w.jsx(Ll,{...o,...r,ref:t})}).displayName=Wl;var Gl="PopoverTrigger",Yl=k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Hl(Gl,n),o=Ul(n),a=D(t,i.triggerRef),s=w.jsx(X.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":au(i.open),...r,ref:a,onClick:$(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?s:w.jsx(Ll,{asChild:!0,...o,children:s})});Yl.displayName=Gl;var Kl="PopoverPortal",[Zl,Ql]=zl(Kl,{forceMount:void 0}),Xl=e=>{const{__scopePopover:t,forceMount:n,children:r,container:i}=e,o=Hl(Kl,t);return w.jsx(Zl,{scope:t,forceMount:n,children:w.jsx(ee,{present:n||o.open,children:w.jsx(Xr,{asChild:!0,container:i,children:r})})})};Xl.displayName=Kl;var Jl="PopoverContent",eu=k.forwardRef((e,t)=>{const n=Ql(Jl,e.__scopePopover),{forceMount:r=n.forceMount,...i}=e,o=Hl(Jl,e.__scopePopover);return w.jsx(ee,{present:r||o.open,children:o.modal?w.jsx(nu,{...i,ref:t}):w.jsx(ru,{...i,ref:t})})});eu.displayName=Jl;var tu=R("PopoverContent.RemoveScroll"),nu=k.forwardRef((e,t)=>{const n=Hl(Jl,e.__scopePopover),r=k.useRef(null),i=D(t,r),o=k.useRef(!1);return k.useEffect(()=>{const e=r.current;if(e)return to(e)},[]),w.jsx(Yi,{as:tu,allowPinchZoom:!0,children:w.jsx(iu,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),o.current||null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:$(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;o.current=r},{checkForDefaultPrevented:!1}),onFocusOutside:$(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1})})})}),ru=k.forwardRef((e,t)=>{const n=Hl(Jl,e.__scopePopover),r=k.useRef(!1),i=k.useRef(!1);return w.jsx(iu,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,a;null==(o=e.onCloseAutoFocus)||o.call(e,t),t.defaultPrevented||(r.current||null==(a=n.triggerRef.current)||a.focus(),t.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:t=>{var o,a;null==(o=e.onInteractOutside)||o.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(i.current=!0));const s=t.target;(null==(a=n.triggerRef.current)?void 0:a.contains(s))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}})}),iu=k.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:a,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:c,...d}=e,f=Hl(Jl,n),p=Ul(n);return ei(),w.jsx(Vr,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:w.jsx(Fr,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:c,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>f.onOpenChange(!1),children:w.jsx(jl,{"data-state":au(f.open),role:"dialog",id:f.contentId,...p,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),ou="PopoverClose";k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Hl(ou,n);return w.jsx(X.button,{type:"button",...r,ref:t,onClick:$(e.onClick,()=>i.onOpenChange(!1))})}).displayName=ou;function au(e){return e?"open":"closed"}k.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,i=Ul(n);return w.jsx(Bl,{...i,...r,ref:t})}).displayName="PopoverArrow";var su=Xl,lu=eu;const uu=Vl,cu=Yl,du=k.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},i)=>w.jsx(su,{children:w.jsx(lu,{ref:i,align:t,sideOffset:n,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-none",e),...r})}));du.displayName=lu.displayName;var fu="rovingFocusGroup.onEntryFocus",pu={bubbles:!1,cancelable:!0},hu="RovingFocusGroup",[mu,gu,yu]=B(hu),[vu,bu]=A(hu,[yu]),[wu,_u]=vu(hu),xu=k.forwardRef((e,t)=>w.jsx(mu.Provider,{scope:e.__scopeRovingFocusGroup,children:w.jsx(mu.Slot,{scope:e.__scopeRovingFocusGroup,children:w.jsx(Eu,{...e,ref:t})})}));xu.displayName=hu;var Eu=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:c=!1,...d}=e,f=k.useRef(null),p=D(t,f),h=_e(o),[m,g]=q({prop:a,defaultProp:s??null,onChange:l,caller:hu}),[y,v]=k.useState(!1),b=Or(u),_=gu(n),x=k.useRef(!1),[E,S]=k.useState(0);return k.useEffect(()=>{const e=f.current;if(e)return e.addEventListener(fu,b),()=>e.removeEventListener(fu,b)},[b]),w.jsx(wu,{scope:n,orientation:r,dir:h,loop:i,currentTabStopId:m,onItemFocus:k.useCallback(e=>g(e),[g]),onItemShiftTab:k.useCallback(()=>v(!0),[]),onFocusableItemAdd:k.useCallback(()=>S(e=>e+1),[]),onFocusableItemRemove:k.useCallback(()=>S(e=>e-1),[]),children:w.jsx(X.div,{tabIndex:y||0===E?-1:0,"data-orientation":r,...d,ref:p,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{x.current=!0}),onFocus:$(e.onFocus,e=>{const t=!x.current;if(e.target===e.currentTarget&&t&&!y){const t=new CustomEvent(fu,pu);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){const e=_().filter(e=>e.focusable);Cu([e.find(e=>e.active),e.find(e=>e.id===m),...e].filter(Boolean).map(e=>e.ref.current),c)}}x.current=!1}),onBlur:$(e.onBlur,()=>v(!1))})})}),Su="RovingFocusGroupItem",ku=k.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:a,...s}=e,l=ie(),u=o||l,c=_u(Su,n),d=c.currentTabStopId===u,f=gu(n),{onFocusableItemAdd:p,onFocusableItemRemove:h,currentTabStopId:m}=c;return k.useEffect(()=>{if(r)return p(),()=>h()},[r,p,h]),w.jsx(mu.ItemSlot,{scope:n,id:u,focusable:r,active:i,children:w.jsx(X.span,{tabIndex:d?0:-1,"data-orientation":c.orientation,...s,ref:t,onMouseDown:$(e.onMouseDown,e=>{r?c.onItemFocus(u):e.preventDefault()}),onFocus:$(e.onFocus,()=>c.onItemFocus(u)),onKeyDown:$(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void c.onItemShiftTab();if(e.target!==e.currentTarget)return;const t=function(e,t,n){const r=function(e,t){return"rtl"!==t?e:"ArrowLeft"===e?"ArrowRight":"ArrowRight"===e?"ArrowLeft":e}(e.key,n);return"vertical"===t&&["ArrowLeft","ArrowRight"].includes(r)||"horizontal"===t&&["ArrowUp","ArrowDown"].includes(r)?void 0:Tu[r]}(e,c.orientation,c.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=f().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){"prev"===t&&i.reverse();const o=i.indexOf(e.currentTarget);i=c.loop?(r=o+1,(n=i).map((e,t)=>n[(r+t)%n.length])):i.slice(o+1)}setTimeout(()=>Cu(i))}var n,r}),children:"function"==typeof a?a({isCurrentTabStop:d,hasTabStop:null!=m}):a})})});ku.displayName=Su;var Tu={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Cu(e,t=!1){const n=document.activeElement;for(const r of e){if(r===n)return;if(r.focus({preventScroll:t}),document.activeElement!==n)return}}var Au=xu,Iu=ku,Ou=["Enter"," "],Nu=["ArrowUp","PageDown","End"],Du=["ArrowDown","PageUp","Home",...Nu],Ru={ltr:[...Ou,"ArrowRight"],rtl:[...Ou,"ArrowLeft"]},Mu={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Pu="Menu",[Fu,Lu,ju]=B(Pu),[Bu,$u]=A(Pu,[ju,wl,bu]),zu=wl(),Uu=bu(),[qu,Hu]=Bu(Pu),[Vu,Wu]=Bu(Pu),Gu=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:a=!0}=e,s=zu(t),[l,u]=k.useState(null),c=k.useRef(!1),d=Or(o),f=_e(i);return k.useEffect(()=>{const e=()=>{c.current=!0,document.addEventListener("pointerdown",t,{capture:!0,once:!0}),document.addEventListener("pointermove",t,{capture:!0,once:!0})},t=()=>c.current=!1;return document.addEventListener("keydown",e,{capture:!0}),()=>{document.removeEventListener("keydown",e,{capture:!0}),document.removeEventListener("pointerdown",t,{capture:!0}),document.removeEventListener("pointermove",t,{capture:!0})}},[]),w.jsx(Fl,{...s,children:w.jsx(qu,{scope:t,open:n,onOpenChange:d,content:l,onContentChange:u,children:w.jsx(Vu,{scope:t,onClose:k.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:c,dir:f,modal:a,children:r})})})};Gu.displayName=Pu;var Yu=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=zu(n);return w.jsx(Ll,{...i,...r,ref:t})});Yu.displayName="MenuAnchor";var Ku="MenuPortal",[Zu,Qu]=Bu(Ku,{forceMount:void 0}),Xu=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=Hu(Ku,t);return w.jsx(Zu,{scope:t,forceMount:n,children:w.jsx(ee,{present:n||o.open,children:w.jsx(Xr,{asChild:!0,container:i,children:r})})})};Xu.displayName=Ku;var Ju="MenuContent",[ec,tc]=Bu(Ju),nc=k.forwardRef((e,t)=>{const n=Qu(Ju,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=Hu(Ju,e.__scopeMenu),a=Wu(Ju,e.__scopeMenu);return w.jsx(Fu.Provider,{scope:e.__scopeMenu,children:w.jsx(ee,{present:r||o.open,children:w.jsx(Fu.Slot,{scope:e.__scopeMenu,children:a.modal?w.jsx(rc,{...i,ref:t}):w.jsx(ic,{...i,ref:t})})})})}),rc=k.forwardRef((e,t)=>{const n=Hu(Ju,e.__scopeMenu),r=k.useRef(null),i=D(t,r);return k.useEffect(()=>{const e=r.current;if(e)return to(e)},[]),w.jsx(ac,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$(e.onFocusOutside,e=>e.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ic=k.forwardRef((e,t)=>{const n=Hu(Ju,e.__scopeMenu);return w.jsx(ac,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),oc=R("MenuContent.ScrollLock"),ac=k.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:p,disableOutsideScroll:h,...m}=e,g=Hu(Ju,n),y=Wu(Ju,n),v=zu(n),b=Uu(n),_=Lu(n),[x,E]=k.useState(null),S=k.useRef(null),T=D(t,S,g.onContentChange),C=k.useRef(0),A=k.useRef(""),I=k.useRef(0),O=k.useRef(null),N=k.useRef("right"),R=k.useRef(0),M=h?Yi:k.Fragment,P=h?{as:oc,allowPinchZoom:!0}:void 0,F=e=>{var t,n;const r=A.current+e,i=_().filter(e=>!e.disabled),o=document.activeElement,a=null==(t=i.find(e=>e.ref.current===o))?void 0:t.textValue,s=function(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0]),i=r?t[0]:t,o=n?e.indexOf(n):-1;let a=(s=e,l=Math.max(o,0),s.map((e,t)=>s[(l+t)%s.length]));var s,l;1===i.length&&(a=a.filter(e=>e!==n));const u=a.find(e=>e.toLowerCase().startsWith(i.toLowerCase()));return u!==n?u:void 0}(i.map(e=>e.textValue),r,a),l=null==(n=i.find(e=>e.textValue===s))?void 0:n.ref.current;!function e(t){A.current=t,window.clearTimeout(C.current),""!==t&&(C.current=window.setTimeout(()=>e(""),1e3))}(r),l&&setTimeout(()=>l.focus())};k.useEffect(()=>()=>window.clearTimeout(C.current),[]),ei();const L=k.useCallback(e=>{var t,n;return N.current===(null==(t=O.current)?void 0:t.side)&&function(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return function(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const e=t[o],s=t[a],l=e.x,u=e.y,c=s.x,d=s.y;u>r!=d>r&&n<(c-l)*(r-u)/(d-u)+l&&(i=!i)}return i}(n,t)}(e,null==(n=O.current)?void 0:n.area)},[]);return w.jsx(ec,{scope:n,searchRef:A,onItemEnter:k.useCallback(e=>{L(e)&&e.preventDefault()},[L]),onItemLeave:k.useCallback(e=>{var t;L(e)||(null==(t=S.current)||t.focus(),E(null))},[L]),onTriggerLeave:k.useCallback(e=>{L(e)&&e.preventDefault()},[L]),pointerGraceTimerRef:I,onPointerGraceIntentChange:k.useCallback(e=>{O.current=e},[]),children:w.jsx(M,{...P,children:w.jsx(Vr,{asChild:!0,trapped:i,onMountAutoFocus:$(o,e=>{var t;e.preventDefault(),null==(t=S.current)||t.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:w.jsx(Fr,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:f,onDismiss:p,children:w.jsx(Au,{asChild:!0,...b,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:x,onCurrentTabStopIdChange:E,onEntryFocus:$(l,e=>{y.isUsingKeyboardRef.current||e.preventDefault()}),preventScrollOnEntryFocus:!0,children:w.jsx(jl,{role:"menu","aria-orientation":"vertical","data-state":Dc(g.open),"data-radix-menu-content":"",dir:y.dir,...v,...m,ref:T,style:{outline:"none",...m.style},onKeyDown:$(m.onKeyDown,e=>{const t=e.target.closest("[data-radix-menu-content]")===e.currentTarget,n=e.ctrlKey||e.altKey||e.metaKey,r=1===e.key.length;t&&("Tab"===e.key&&e.preventDefault(),!n&&r&&F(e.key));const i=S.current;if(e.target!==i)return;if(!Du.includes(e.key))return;e.preventDefault();const o=_().filter(e=>!e.disabled).map(e=>e.ref.current);Nu.includes(e.key)&&o.reverse(),function(e){const t=document.activeElement;for(const n of e){if(n===t)return;if(n.focus(),document.activeElement!==t)return}}(o)}),onBlur:$(e.onBlur,e=>{e.currentTarget.contains(e.target)||(window.clearTimeout(C.current),A.current="")}),onPointerMove:$(e.onPointerMove,Pc(e=>{const t=e.target,n=R.current!==e.clientX;if(e.currentTarget.contains(t)&&n){const t=e.clientX>R.current?"right":"left";N.current=t,R.current=e.clientX}}))})})})})})})});nc.displayName=Ju;var sc=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return w.jsx(X.div,{role:"group",...r,ref:t})});sc.displayName="MenuGroup";var lc=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return w.jsx(X.div,{...r,ref:t})});lc.displayName="MenuLabel";var uc="MenuItem",cc="menu.itemSelect",dc=k.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=k.useRef(null),a=Wu(uc,e.__scopeMenu),s=tc(uc,e.__scopeMenu),l=D(t,o),u=k.useRef(!1);return w.jsx(fc,{...i,ref:l,disabled:n,onClick:$(e.onClick,()=>{const e=o.current;if(!n&&e){const t=new CustomEvent(cc,{bubbles:!0,cancelable:!0});e.addEventListener(cc,e=>null==r?void 0:r(e),{once:!0}),J(e,t),t.defaultPrevented?u.current=!1:a.onClose()}}),onPointerDown:t=>{var n;null==(n=e.onPointerDown)||n.call(e,t),u.current=!0},onPointerUp:$(e.onPointerUp,e=>{var t;u.current||null==(t=e.currentTarget)||t.click()}),onKeyDown:$(e.onKeyDown,e=>{const t=""!==s.searchRef.current;n||t&&" "===e.key||Ou.includes(e.key)&&(e.currentTarget.click(),e.preventDefault())})})});dc.displayName=uc;var fc=k.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,a=tc(uc,n),s=Uu(n),l=k.useRef(null),u=D(t,l),[c,d]=k.useState(!1),[f,p]=k.useState("");return k.useEffect(()=>{const e=l.current;e&&p((e.textContent??"").trim())},[o.children]),w.jsx(Fu.ItemSlot,{scope:n,disabled:r,textValue:i??f,children:w.jsx(Iu,{asChild:!0,...s,focusable:!r,children:w.jsx(X.div,{role:"menuitem","data-highlighted":c?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:$(e.onPointerMove,Pc(e=>{if(r)a.onItemLeave(e);else if(a.onItemEnter(e),!e.defaultPrevented){e.currentTarget.focus({preventScroll:!0})}})),onPointerLeave:$(e.onPointerLeave,Pc(e=>a.onItemLeave(e))),onFocus:$(e.onFocus,()=>d(!0)),onBlur:$(e.onBlur,()=>d(!1))})})})}),pc=k.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return w.jsx(_c,{scope:e.__scopeMenu,checked:n,children:w.jsx(dc,{role:"menuitemcheckbox","aria-checked":Rc(n)?"mixed":n,...i,ref:t,"data-state":Mc(n),onSelect:$(i.onSelect,()=>null==r?void 0:r(!!Rc(n)||!n),{checkForDefaultPrevented:!1})})})});pc.displayName="MenuCheckboxItem";var hc="MenuRadioGroup",[mc,gc]=Bu(hc,{value:void 0,onValueChange:()=>{}}),yc=k.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,o=Or(r);return w.jsx(mc,{scope:e.__scopeMenu,value:n,onValueChange:o,children:w.jsx(sc,{...i,ref:t})})});yc.displayName=hc;var vc="MenuRadioItem",bc=k.forwardRef((e,t)=>{const{value:n,...r}=e,i=gc(vc,e.__scopeMenu),o=n===i.value;return w.jsx(_c,{scope:e.__scopeMenu,checked:o,children:w.jsx(dc,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":Mc(o),onSelect:$(r.onSelect,()=>{var e;return null==(e=i.onValueChange)?void 0:e.call(i,n)},{checkForDefaultPrevented:!1})})})});bc.displayName=vc;var wc="MenuItemIndicator",[_c,xc]=Bu(wc,{checked:!1}),Ec=k.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=xc(wc,n);return w.jsx(ee,{present:r||Rc(o.checked)||!0===o.checked,children:w.jsx(X.span,{...i,ref:t,"data-state":Mc(o.checked)})})});Ec.displayName=wc;var Sc=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return w.jsx(X.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Sc.displayName="MenuSeparator";var kc=k.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=zu(n);return w.jsx(Bl,{...i,...r,ref:t})});kc.displayName="MenuArrow";var[Tc,Cc]=Bu("MenuSub"),Ac="MenuSubTrigger",Ic=k.forwardRef((e,t)=>{const n=Hu(Ac,e.__scopeMenu),r=Wu(Ac,e.__scopeMenu),i=Cc(Ac,e.__scopeMenu),o=tc(Ac,e.__scopeMenu),a=k.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=o,u={__scopeMenu:e.__scopeMenu},c=k.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return k.useEffect(()=>c,[c]),k.useEffect(()=>{const e=s.current;return()=>{window.clearTimeout(e),l(null)}},[s,l]),w.jsx(Yu,{asChild:!0,...u,children:w.jsx(fc,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":Dc(n.open),...e,ref:N(t,i.onTriggerChange),onClick:t=>{var r;null==(r=e.onClick)||r.call(e,t),e.disabled||t.defaultPrevented||(t.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$(e.onPointerMove,Pc(t=>{o.onItemEnter(t),t.defaultPrevented||e.disabled||n.open||a.current||(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),c()},100))})),onPointerLeave:$(e.onPointerLeave,Pc(e=>{var t,r;c();const i=null==(t=n.content)?void 0:t.getBoundingClientRect();if(i){const t=null==(r=n.content)?void 0:r.dataset.side,a="right"===t,l=a?-5:5,u=i[a?"left":"right"],c=i[a?"right":"left"];o.onPointerGraceIntentChange({area:[{x:e.clientX+l,y:e.clientY},{x:u,y:i.top},{x:c,y:i.top},{x:c,y:i.bottom},{x:u,y:i.bottom}],side:t}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(e),e.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:$(e.onKeyDown,t=>{var i;const a=""!==o.searchRef.current;e.disabled||a&&" "===t.key||Ru[r.dir].includes(t.key)&&(n.onOpenChange(!0),null==(i=n.content)||i.focus(),t.preventDefault())})})})});Ic.displayName=Ac;var Oc="MenuSubContent",Nc=k.forwardRef((e,t)=>{const n=Qu(Ju,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=Hu(Ju,e.__scopeMenu),a=Wu(Ju,e.__scopeMenu),s=Cc(Oc,e.__scopeMenu),l=k.useRef(null),u=D(t,l);return w.jsx(Fu.Provider,{scope:e.__scopeMenu,children:w.jsx(ee,{present:r||o.open,children:w.jsx(Fu.Slot,{scope:e.__scopeMenu,children:w.jsx(ac,{id:s.contentId,"aria-labelledby":s.triggerId,...i,ref:u,align:"start",side:"rtl"===a.dir?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:e=>{var t;a.isUsingKeyboardRef.current&&(null==(t=l.current)||t.focus()),e.preventDefault()},onCloseAutoFocus:e=>e.preventDefault(),onFocusOutside:$(e.onFocusOutside,e=>{e.target!==s.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:$(e.onEscapeKeyDown,e=>{a.onClose(),e.preventDefault()}),onKeyDown:$(e.onKeyDown,e=>{var t;const n=e.currentTarget.contains(e.target),r=Mu[a.dir].includes(e.key);n&&r&&(o.onOpenChange(!1),null==(t=s.trigger)||t.focus(),e.preventDefault())})})})})})});function Dc(e){return e?"open":"closed"}function Rc(e){return"indeterminate"===e}function Mc(e){return Rc(e)?"indeterminate":e?"checked":"unchecked"}function Pc(e){return t=>"mouse"===t.pointerType?e(t):void 0}Nc.displayName=Oc;var Fc=Gu,Lc=Yu,jc=Xu,Bc=nc,$c=sc,zc=lc,Uc=dc,qc=pc,Hc=yc,Vc=bc,Wc=Ec,Gc=Sc,Yc=kc,Kc=Ic,Zc=Nc,Qc="ContextMenu",[Xc]=A(Qc,[$u]),Jc=$u(),[ed,td]=Xc(Qc),nd="ContextMenuTrigger";k.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=e,o=td(nd,n),a=Jc(n),s=k.useRef({x:0,y:0}),l=k.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),u=k.useRef(0),c=k.useCallback(()=>window.clearTimeout(u.current),[]),d=e=>{s.current={x:e.clientX,y:e.clientY},o.onOpenChange(!0)};return k.useEffect(()=>c,[c]),k.useEffect(()=>{r&&c()},[r,c]),w.jsxs(w.Fragment,{children:[w.jsx(Lc,{...a,virtualRef:l}),w.jsx(X.span,{"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:$(e.onContextMenu,e=>{c(),d(e),e.preventDefault()}),onPointerDown:r?e.onPointerDown:$(e.onPointerDown,hd(e=>{c(),u.current=window.setTimeout(()=>d(e),700)})),onPointerMove:r?e.onPointerMove:$(e.onPointerMove,hd(c)),onPointerCancel:r?e.onPointerCancel:$(e.onPointerCancel,hd(c)),onPointerUp:r?e.onPointerUp:$(e.onPointerUp,hd(c))})]})}).displayName=nd;var rd=e=>{const{__scopeContextMenu:t,...n}=e,r=Jc(t);return w.jsx(jc,{...r,...n})};rd.displayName="ContextMenuPortal";var id="ContextMenuContent",od=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=td(id,n),o=Jc(n),a=k.useRef(!1);return w.jsx(Bc,{...o,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:t=>{var n;null==(n=e.onCloseAutoFocus)||n.call(e,t),!t.defaultPrevented&&a.current&&t.preventDefault(),a.current=!1},onInteractOutside:t=>{var n;null==(n=e.onInteractOutside)||n.call(e,t),t.defaultPrevented||i.modal||(a.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});od.displayName=id;k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx($c,{...i,...r,ref:t})}).displayName="ContextMenuGroup";var ad=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(zc,{...i,...r,ref:t})});ad.displayName="ContextMenuLabel";var sd=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Uc,{...i,...r,ref:t})});sd.displayName="ContextMenuItem";var ld=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(qc,{...i,...r,ref:t})});ld.displayName="ContextMenuCheckboxItem";k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Hc,{...i,...r,ref:t})}).displayName="ContextMenuRadioGroup";var ud=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Vc,{...i,...r,ref:t})});ud.displayName="ContextMenuRadioItem";var cd=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Wc,{...i,...r,ref:t})});cd.displayName="ContextMenuItemIndicator";var dd=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Gc,{...i,...r,ref:t})});dd.displayName="ContextMenuSeparator";k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Yc,{...i,...r,ref:t})}).displayName="ContextMenuArrow";var fd=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Kc,{...i,...r,ref:t})});fd.displayName="ContextMenuSubTrigger";var pd=k.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Jc(n);return w.jsx(Zc,{...i,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});function hd(e){return t=>"mouse"!==t.pointerType?e(t):void 0}pd.displayName="ContextMenuSubContent";var md=rd,gd=od,yd=ad,vd=sd,bd=ld,wd=ud,_d=cd,xd=dd,Ed=fd,Sd=pd;k.forwardRef(({className:e,inset:t,children:n,...r},i)=>w.jsxs(Ed,{ref:i,className:zn("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",t&&"pl-8",e),...r,children:[n,w.jsx(lt,{className:"ml-auto h-4 w-4"})]})).displayName=Ed.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(Sd,{ref:n,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-[--radix-context-menu-content-transform-origin] overflow-hidden rounded-md border p-1 shadow-lg",e),...t})).displayName=Sd.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(md,{children:w.jsx(gd,{ref:n,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] origin-[--radix-context-menu-content-transform-origin] overflow-y-auto overflow-x-hidden rounded-md border p-1 shadow-md",e),...t})})).displayName=gd.displayName;k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(vd,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n})).displayName=vd.displayName;k.forwardRef(({className:e,children:t,checked:n,...r},i)=>w.jsxs(bd,{ref:i,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(_d,{children:w.jsx(at,{className:"h-4 w-4"})})}),t]})).displayName=bd.displayName;k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(wd,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(_d,{children:w.jsx(dt,{className:"h-4 w-4 fill-current"})})}),t]})).displayName=wd.displayName;k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(yd,{ref:r,className:zn("text-foreground px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n})).displayName=yd.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(xd,{ref:n,className:zn("bg-border -mx-1 my-1 h-px",e),...t})).displayName=xd.displayName;const kd=T.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Td=()=>{const e=T.useContext(kd);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};function Cd(...e){return k.useCallback(function(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}(...e),e)}!function(e){if("undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}("[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(\n[data-state=closed]\n){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}");const Ad=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Id(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}const Od={DURATION:.5,EASE:[.32,.72,0,1]};T.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:r,onRelease:i,shouldFade:o,isOpen:a,modal:s,shouldAnimate:l}=Td(),u=Cd(t,n),c=r&&r.length>0;if(!s)return null;const d=T.useCallback(e=>i(e),[i]);return T.createElement(Fo,{onMouseUp:d,ref:u,"data-vaul-overlay":"","data-vaul-snap-points":a&&c?"true":"false","data-vaul-snap-points-overlay":a&&o?"true":"false","data-vaul-animate":(null==l?void 0:l.current)?"true":"false",...e})}).displayName="Drawer.Overlay";const Nd=T.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},i){const{drawerRef:o,onPress:a,onRelease:s,onDrag:l,keyboardIsOpen:u,snapPointsOffset:c,activeSnapPointIndex:d,modal:f,isOpen:p,direction:h,snapPoints:m,container:g,handleOnly:y,shouldAnimate:v,autoFocus:b}=Td(),[w,_]=T.useState(!1),x=Cd(i,o),E=T.useRef(null),S=T.useRef(null),C=T.useRef(!1),A=m&&m.length>0;!function(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:i}=Td(),o=T.useRef(null),a=k.useMemo(()=>document.body.style.backgroundColor,[]);function s(){return(window.innerWidth-26)/window.innerWidth}T.useEffect(()=>{if(t&&n){o.current&&clearTimeout(o.current);const t=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!t)return;r&&!i&&Id(document.body,{background:"black"}),Id(t,{transformOrigin:Ad(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${Od.DURATION}s`,transitionTimingFunction:`cubic-bezier(${Od.EASE.join(",")})`});const n=Id(t,{borderRadius:"8px",overflow:"hidden",...Ad(e)?{transform:`scale(${s()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${s()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{n(),o.current=window.setTimeout(()=>{a?document.body.style.background=a:document.body.style.removeProperty("background")},1e3*Od.DURATION)}}},[t,n,a])}();function I(e){E.current=null,C.current=!1,s(e)}return T.useEffect(()=>{A&&window.requestAnimationFrame(()=>{_(!0)})},[]),T.createElement(Lo,{"data-vaul-drawer-direction":h,"data-vaul-drawer":"","data-vaul-delayed-snap-points":w?"true":"false","data-vaul-snap-points":p&&A?"true":"false","data-vaul-custom-container":g?"true":"false","data-vaul-animate":(null==v?void 0:v.current)?"true":"false",...r,ref:x,style:c&&c.length>0?{"--snap-point-height":`${c[null!=d?d:0]}px`,...t}:t,onPointerDown:e=>{y||(null==r.onPointerDown||r.onPointerDown.call(r,e),E.current={x:e.pageX,y:e.pageY},a(e))},onOpenAutoFocus:e=>{null==n||n(e),b||e.preventDefault()},onPointerDownOutside:t=>{null==e||e(t),f&&!t.defaultPrevented?u.current&&(u.current=!1):t.preventDefault()},onFocusOutside:e=>{f||e.preventDefault()},onPointerMove:e=>{if(S.current=e,y)return;if(null==r.onPointerMove||r.onPointerMove.call(r,e),!E.current)return;const t=e.pageY-E.current.y,n=e.pageX-E.current.x,i="touch"===e.pointerType?10:2,o=((e,t,n=0)=>{if(C.current)return!0;const r=Math.abs(e.y),i=Math.abs(e.x),o=i>r,a=["bottom","right"].includes(t)?1:-1;if("left"===t||"right"===t){if(!(e.x*a<0)&&i>=0&&i<=n)return o}else if(!(e.y*a<0)&&r>=0&&r<=n)return!o;return C.current=!0,!0})({x:n,y:t},h,i);o?l(e):(Math.abs(n)>i||Math.abs(t)>i)&&(E.current=null)},onPointerUp:e=>{null==r.onPointerUp||r.onPointerUp.call(r,e),E.current=null,C.current=!1,s(e)},onPointerOut:e=>{null==r.onPointerOut||r.onPointerOut.call(r,e),I(S.current)},onContextMenu:e=>{null==r.onContextMenu||r.onContextMenu.call(r,e),S.current&&I(S.current)}})});Nd.displayName="Drawer.Content";const Dd=T.forwardRef(function({preventCycle:e=!1,children:t,...n},r){const{closeDrawer:i,isDragging:o,snapPoints:a,activeSnapPoint:s,setActiveSnapPoint:l,dismissible:u,handleOnly:c,isOpen:d,onPress:f,onDrag:p}=Td(),h=T.useRef(null),m=T.useRef(!1);function g(){h.current&&window.clearTimeout(h.current),m.current=!1}return T.createElement("div",{onClick:function(){m.current?g():window.setTimeout(()=>{!function(){if(o||e||m.current)return void g();if(g(),!a||0===a.length)return void(u||i());if(s===a[a.length-1]&&u)return void i();const t=a.findIndex(e=>e===s);if(-1===t)return;const n=a[t+1];l(n)}()},120)},onPointerCancel:g,onPointerDown:e=>{c&&f(e),h.current=window.setTimeout(()=>{m.current=!0},250)},onPointerMove:e=>{c&&p(e)},ref:r,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},T.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});Dd.displayName="Drawer.Handle";var Rd="DropdownMenu",[Md]=A(Rd,[$u]),Pd=$u(),[Fd,Ld]=Md(Rd),jd=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:a,modal:s=!0}=e,l=Pd(t),u=k.useRef(null),[c,d]=q({prop:i,defaultProp:o??!1,onChange:a,caller:Rd});return w.jsx(Fd,{scope:t,triggerId:ie(),triggerRef:u,contentId:ie(),open:c,onOpenChange:d,onOpenToggle:k.useCallback(()=>d(e=>!e),[d]),modal:s,children:w.jsx(Fc,{...l,open:c,onOpenChange:d,dir:r,modal:s,children:n})})};jd.displayName=Rd;var Bd="DropdownMenuTrigger",$d=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,o=Ld(Bd,n),a=Pd(n);return w.jsx(Lc,{asChild:!0,...a,children:w.jsx(X.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:N(t,o.triggerRef),onPointerDown:$(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(o.onOpenToggle(),o.open||e.preventDefault())}),onKeyDown:$(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&o.onOpenToggle(),"ArrowDown"===e.key&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(e.key)&&e.preventDefault())})})})});$d.displayName=Bd;var zd=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Pd(t);return w.jsx(jc,{...r,...n})};zd.displayName="DropdownMenuPortal";var Ud="DropdownMenuContent",qd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Ld(Ud,n),o=Pd(n),a=k.useRef(!1);return w.jsx(Bc,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:t,onCloseAutoFocus:$(e.onCloseAutoFocus,e=>{var t;a.current||null==(t=i.triggerRef.current)||t.focus(),a.current=!1,e.preventDefault()}),onInteractOutside:$(e.onInteractOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey,r=2===t.button||n;i.modal&&!r||(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});qd.displayName=Ud;k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx($c,{...i,...r,ref:t})}).displayName="DropdownMenuGroup";var Hd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(zc,{...i,...r,ref:t})});Hd.displayName="DropdownMenuLabel";var Vd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Uc,{...i,...r,ref:t})});Vd.displayName="DropdownMenuItem";var Wd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(qc,{...i,...r,ref:t})});Wd.displayName="DropdownMenuCheckboxItem";k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Hc,{...i,...r,ref:t})}).displayName="DropdownMenuRadioGroup";var Gd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Vc,{...i,...r,ref:t})});Gd.displayName="DropdownMenuRadioItem";var Yd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Wc,{...i,...r,ref:t})});Yd.displayName="DropdownMenuItemIndicator";var Kd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Gc,{...i,...r,ref:t})});Kd.displayName="DropdownMenuSeparator";k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Yc,{...i,...r,ref:t})}).displayName="DropdownMenuArrow";var Zd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Kc,{...i,...r,ref:t})});Zd.displayName="DropdownMenuSubTrigger";var Qd=k.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Pd(n);return w.jsx(Zc,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Qd.displayName="DropdownMenuSubContent";var Xd=zd,Jd=qd,ef=Hd,tf=Vd,nf=Wd,rf=Gd,of=Yd,af=Kd,sf=Zd,lf=Qd;const uf=jd,cf=$d;k.forwardRef(({className:e,inset:t,children:n,...r},i)=>w.jsxs(sf,{ref:i,className:zn("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,w.jsx(lt,{className:"ml-auto"})]})).displayName=sf.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(lf,{ref:n,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-lg",e),...t})).displayName=lf.displayName;const df=k.forwardRef(({className:e,sideOffset:t=4,...n},r)=>w.jsx(Xd,{children:w.jsx(Jd,{ref:r,sideOffset:t,className:zn("bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));df.displayName=Jd.displayName;const ff=k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(tf,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));ff.displayName=tf.displayName;k.forwardRef(({className:e,children:t,checked:n,...r},i)=>w.jsxs(nf,{ref:i,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(of,{children:w.jsx(at,{className:"h-4 w-4"})})}),t]})).displayName=nf.displayName;k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(rf,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(of,{children:w.jsx(dt,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=rf.displayName;k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(ef,{ref:r,className:zn("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n})).displayName=ef.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(af,{ref:n,className:zn("bg-muted -mx-1 my-1 h-px",e),...t})).displayName=af.displayName;const pf=k.forwardRef(({className:e,type:t,...n},r)=>w.jsx("input",{type:t,className:zn("border-input file:text-foreground placeholder:text-muted-foreground focus-visible:ring-ring flex h-9 w-full rounded-md border bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...n}));pf.displayName="Input";const hf=({className:e,isReadOnly:t=!1,defaultEditing:n=!1,minWidth:r=100,maxWidth:i=500,isEditing:o,placeholder:a,value:s,onChange:l,onEditingChange:u})=>{const[c,d]=k.useState(n),f=k.useRef(null),[p,h]=k.useState(s),m=k.useRef(p);m.current=p;const[g,y]=k.useState(r),v=k.useRef(null);k.useEffect(()=>{var e;y((null==(e=v.current)?void 0:e.offsetWidth)??0)},[p]);const b=k.useCallback(e=>{if(!t&&c)return h(e.target.value)},[c,t]),_=k.useCallback(e=>{t||(d(e),null==u||u(e))},[t,u]),x=k.useCallback(()=>{var e;_(!1),l(null==(e=m.current)?void 0:e.trim())},[_,l]),E=k.useCallback(()=>{c||_(!0)},[c,_]);return k.useEffect(()=>{s!==m.current&&h(s)},[s]),k.useEffect(()=>{void 0!==o&&o!==c&&(d(Boolean(o)),o&&setTimeout(()=>{var e,t;null==(e=f.current)||e.select(),null==(t=f.current)||t.focus()},200))},[c,_,o]),k.useEffect(()=>{const e=e=>{var t,n;switch(e.key){case"Escape":h(s),m.current=s,_(!1),null==(t=f.current)||t.blur();break;case"Enter":_(!1),l(m.current.trim()),null==(n=f.current)||n.blur()}};return c&&document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[c,l,_,s]),w.jsxs(w.Fragment,{children:[w.jsx("span",{ref:v,className:zn(e,"white-space-pre pointer-events-none invisible absolute left-0 top-0 px-1"),style:{minWidth:r,maxWidth:i},children:p}),w.jsx(pf,{ref:f,className:zn("disabled:opacity-1 rounded-sm border-transparent px-1 py-0 focus:border-blue-500 focus:outline-none focus:ring-blue-500 disabled:cursor-text",{"select-none bg-transparent":!c},e),style:{width:g+12,caretColor:c?void 0:"transparent"},value:p,onChange:b,onBlur:x,disabled:t,onClick:E,placeholder:c?void 0:a??"Click to edit"})]})},mf=k.forwardRef(({className:e,embed:t,title:n="Something went wrong",text:r="We are sorry, but something unexpected happened.",onRetry:i,actions:o=!1,onGoToStart:a,...s},l)=>w.jsx("div",{ref:l,className:zn("flex justify-center",e),...s,children:w.jsxs(Wn,{variant:"destructive",className:zn("flex min-h-[200px] max-w-[450px] flex-col items-center justify-center rounded-lg px-6 py-6 text-center",!t&&"min-w-[350px]"),children:[w.jsx("div",{className:"mb-4",children:w.jsx(Ut,{className:"text-destructive h-8 w-8"})}),w.jsx(Gn,{className:"text-foreground mb-1 text-xl",children:n}),w.jsxs(Yn,{className:"text-foreground mt-3 max-w-sm px-2",children:[w.jsx("p",{className:"mb-5 text-left",children:r}),o&&w.jsx("div",{className:"mb-3 mt-6",children:w.jsxs("div",{className:"flex justify-center gap-2",children:[i&&w.jsxs(er,{size:"sm",onClick:i,className:"inline-flex items-center",children:[w.jsx(Pt,{className:"mr-2 h-4 w-4"}),"Retry"]}),!t&&a&&w.jsx(er,{size:"sm",onClick:a,children:"Go to start page"})]})})]})]})}));mf.displayName="ErrorPane";class gf extends k.Component{constructor(){super(...arguments),u(this,"state",{hasError:!1,error:null}),u(this,"handleRetry",()=>{this.props.onRetry&&this.props.onRetry()})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?w.jsx(mf,{error:this.state.error,onRetry:this.props.onRetry?this.handleRetry:void 0,actions:!!this.props.onRetry}):this.props.children}}var yf=e=>"checkbox"===e.type,vf=e=>e instanceof Date,bf=e=>null==e;const wf=e=>"object"==typeof e;var _f=e=>!bf(e)&&!Array.isArray(e)&&wf(e)&&!vf(e),xf=e=>_f(e)&&e.target?yf(e.target)?e.target.checked:e.target.value:e,Ef=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),Sf="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function kf(e){let t;const n=Array.isArray(e),r="undefined"!=typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(Sf&&(e instanceof Blob||r)||!n&&!_f(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return _f(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=kf(e[n]));else t=e}return t}var Tf=e=>/^\w*$/.test(e),Cf=e=>void 0===e,Af=e=>Array.isArray(e)?e.filter(Boolean):[],If=e=>Af(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Of=(e,t,n)=>{if(!t||!_f(e))return n;const r=(Tf(t)?[t]:If(t)).reduce((e,t)=>bf(e)?e:e[t],e);return Cf(r)||r===e?Cf(e[t])?n:e[t]:r},Nf=e=>"boolean"==typeof e,Df=(e,t,n)=>{let r=-1;const i=Tf(t)?[t]:If(t),o=i.length,a=o-1;for(;++r<o;){const t=i[r];let o=n;if(r!==a){const n=e[t];o=_f(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=o,e=e[t]}};const Rf="blur",Mf="focusout",Pf="change",Ff="onBlur",Lf="onChange",jf="onSubmit",Bf="onTouched",$f="all",zf="max",Uf="min",qf="maxLength",Hf="minLength",Vf="pattern",Wf="required",Gf="validate",Yf=T.createContext(null);Yf.displayName="HookFormContext";const Kf=()=>T.useContext(Yf);var Zf=(e,t,n,r=!0)=>{const i={defaultValues:t._defaultValues};for(const o in e)Object.defineProperty(i,o,{get:()=>{const i=o;return t._proxyFormState[i]!==$f&&(t._proxyFormState[i]=!r||$f),n&&(n[i]=!0),e[i]}});return i};const Qf="undefined"!=typeof window?T.useLayoutEffect:T.useEffect;var Xf=e=>"string"==typeof e,Jf=(e,t,n,r,i)=>Xf(e)?(r&&t.watch.add(e),Of(n,e,i)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),Of(n,e))):(r&&(t.watchAll=!0),n),ep=e=>bf(e)||!wf(e);function tp(e,t,n=new WeakSet){if(ep(e)||ep(t))return e===t;if(vf(e)&&vf(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const o of r){const r=e[o];if(!i.includes(o))return!1;if("ref"!==o){const e=t[o];if(vf(r)&&vf(e)||_f(r)&&_f(e)||Array.isArray(r)&&Array.isArray(e)?!tp(r,e,n):r!==e)return!1}}return!0}function np(e){const t=Kf(),{name:n,disabled:r,control:i=t.control,shouldUnregister:o,defaultValue:a}=e,s=Ef(i._names.array,n),l=T.useMemo(()=>Of(i._formValues,n,Of(i._defaultValues,n,a)),[i,n,a]),u=function(e){const t=Kf(),{control:n=t.control,name:r,defaultValue:i,disabled:o,exact:a,compute:s}=e||{},l=T.useRef(i),u=T.useRef(s),c=T.useRef(void 0);u.current=s;const d=T.useMemo(()=>n._getWatch(r,l.current),[n,r]),[f,p]=T.useState(u.current?u.current(d):d);return Qf(()=>n._subscribe({name:r,formState:{values:!0},exact:a,callback:e=>{if(!o){const t=Jf(r,n._names,e.values||n._formValues,!1,l.current);if(u.current){const e=u.current(t);tp(e,c.current)||(p(e),c.current=e)}else p(t)}}}),[n,o,r,a]),T.useEffect(()=>n._removeUnmounted()),f}({control:i,name:n,defaultValue:l,exact:!0}),c=function(e){const t=Kf(),{control:n=t.control,disabled:r,name:i,exact:o}=e||{},[a,s]=T.useState(n._formState),l=T.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Qf(()=>n._subscribe({name:i,formState:l.current,exact:o,callback:e=>{!r&&s({...n._formState,...e})}}),[i,r,o]),T.useEffect(()=>{l.current.isValid&&n._setValid(!0)},[n]),T.useMemo(()=>Zf(a,n,l.current,!1),[a,n])}({control:i,name:n,exact:!0}),d=T.useRef(e),f=T.useRef(void 0),p=T.useRef(i.register(n,{...e.rules,value:u,...Nf(e.disabled)?{disabled:e.disabled}:{}}));d.current=e;const h=T.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Of(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Of(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Of(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Of(c.validatingFields,n)},error:{enumerable:!0,get:()=>Of(c.errors,n)}}),[c,n]),m=T.useCallback(e=>p.current.onChange({target:{value:xf(e),name:n},type:Pf}),[n]),g=T.useCallback(()=>p.current.onBlur({target:{value:Of(i._formValues,n),name:n},type:Rf}),[n,i._formValues]),y=T.useCallback(e=>{const t=Of(i._fields,n);t&&e&&(t._f.ref={focus:()=>e.focus&&e.focus(),select:()=>e.select&&e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()})},[i._fields,n]),v=T.useMemo(()=>({name:n,value:u,...Nf(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:m,onBlur:g,ref:y}),[n,r,c.disabled,m,g,y,u]);return T.useEffect(()=>{const e=i._options.shouldUnregister||o,t=f.current;t&&t!==n&&!s&&i.unregister(t),i.register(n,{...d.current.rules,...Nf(d.current.disabled)?{disabled:d.current.disabled}:{}});const r=(e,t)=>{const n=Of(i._fields,e);n&&n._f&&(n._f.mount=t)};if(r(n,!0),e){const e=kf(Of(i._options.defaultValues,n));Df(i._defaultValues,n,e),Cf(Of(i._formValues,n))&&Df(i._formValues,n,e)}return!s&&i.register(n),f.current=n,()=>{(s?e&&!i._state.action:e)?i.unregister(n):r(n,!1)}},[n,i,s,o]),T.useEffect(()=>{i._setDisabledField({disabled:r,name:n})},[r,n,i]),T.useMemo(()=>({field:v,formState:c,fieldState:h}),[v,c,h])}const rp=e=>e.render(np(e));var ip=(e,t,n,r,i)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:i||!0}}:{},op=e=>Array.isArray(e)?e:[e],ap=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}};function sp(e,t){const n={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r],o=t[r];if(i&&_f(i)&&o){const e=sp(i,o);_f(e)&&(n[r]=e)}else e[r]&&(n[r]=o)}return n}var lp=e=>_f(e)&&!Object.keys(e).length,up=e=>"file"===e.type,cp=e=>"function"==typeof e,dp=e=>{if(!Sf)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},fp=e=>"select-multiple"===e.type,pp=e=>"radio"===e.type,hp=e=>dp(e)&&e.isConnected;function mp(e,t){const n=Array.isArray(t)?t:Tf(t)?[t]:If(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Cf(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,o=n[i];return r&&delete r[o],0!==i&&(_f(r)&&lp(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Cf(e[t]))return!1;return!0}(r))&&mp(e,n.slice(0,-1)),e}function gp(e){return Array.isArray(e)||_f(e)&&!(e=>{for(const t in e)if(cp(e[t]))return!0;return!1})(e)}function yp(e,t={}){for(const n in e)gp(e[n])?(t[n]=Array.isArray(e[n])?[]:{},yp(e[n],t[n])):bf(e[n])||(t[n]=!0);return t}function vp(e,t,n){n||(n=yp(t));for(const r in e)gp(e[r])?Cf(t)||ep(n[r])?n[r]=yp(e[r],Array.isArray(e[r])?[]:{}):vp(e[r],bf(t)?{}:t[r],n[r]):n[r]=!tp(e[r],t[r]);return n}const bp={value:!1,isValid:!1},wp={value:!0,isValid:!0};var _p=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Cf(e[0].attributes.value)?Cf(e[0].value)||""===e[0].value?wp:{value:e[0].value,isValid:!0}:wp:bp}return bp},xp=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>Cf(e)?e:t?""===e?NaN:e?+e:e:n&&Xf(e)?new Date(e):r?r(e):e;const Ep={isValid:!1,value:null};var Sp=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ep):Ep;function kp(e){const t=e.ref;return up(t)?t.files:pp(t)?Sp(e.refs).value:fp(t)?[...t.selectedOptions].map(({value:e})=>e):yf(t)?_p(e.refs).value:xp(Cf(t.value)?e.ref.value:t.value,e)}var Tp=e=>e instanceof RegExp,Cp=e=>Cf(e)?e:Tp(e)?e.source:_f(e)?Tp(e.value)?e.value.source:e.value:e,Ap=e=>({isOnSubmit:!e||e===jf,isOnBlur:e===Ff,isOnChange:e===Lf,isOnAll:e===$f,isOnTouch:e===Bf});const Ip="AsyncFunction";var Op=e=>!!e&&!!e.validate&&!!(cp(e.validate)&&e.validate.constructor.name===Ip||_f(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Ip)),Np=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Dp=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=Of(e,i);if(n){const{_f:e,...o}=n;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Dp(o,t))break}else if(_f(o)&&Dp(o,t))break}}};function Rp(e,t,n){const r=Of(e,n);if(r||Tf(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),o=Of(t,r),a=Of(e,r);if(o&&!Array.isArray(o)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:`${r}.root`,error:a.root};i.pop()}return{name:n}}var Mp=(e,t,n)=>{const r=op(Of(e,n));return Df(r,"root",t[n]),Df(e,n,r),e};function Pp(e,t,n="validate"){if(Xf(e)||Array.isArray(e)&&e.every(Xf)||Nf(e)&&!e)return{type:n,message:Xf(e)?e:"",ref:t}}var Fp=e=>_f(e)&&!Tp(e)?e:{value:e,message:""},Lp=async(e,t,n,r,i,o)=>{const{ref:a,refs:s,required:l,maxLength:u,minLength:c,min:d,max:f,pattern:p,validate:h,name:m,valueAsNumber:g,mount:y}=e._f,v=Of(n,m);if(!y||t.has(m))return{};const b=s?s[0]:a,w=e=>{i&&b.reportValidity&&(b.setCustomValidity(Nf(e)?"":e||""),b.reportValidity())},_={},x=pp(a),E=yf(a),S=x||E,k=(g||up(a))&&Cf(a.value)&&Cf(v)||dp(a)&&""===a.value||""===v||Array.isArray(v)&&!v.length,T=ip.bind(null,m,r,_),C=(e,t,n,r=qf,i=Hf)=>{const o=e?t:n;_[m]={type:e?r:i,message:o,ref:a,...T(e?r:i,o)}};if(o?!Array.isArray(v)||!v.length:l&&(!S&&(k||bf(v))||Nf(v)&&!v||E&&!_p(s).isValid||x&&!Sp(s).isValid)){const{value:e,message:t}=Xf(l)?{value:!!l,message:l}:Fp(l);if(e&&(_[m]={type:Wf,message:t,ref:b,...T(Wf,t)},!r))return w(t),_}if(!(k||bf(d)&&bf(f))){let e,t;const n=Fp(f),i=Fp(d);if(bf(v)||isNaN(v)){const r=a.valueAsDate||new Date(v),o=e=>new Date((new Date).toDateString()+" "+e),s="time"==a.type,l="week"==a.type;Xf(n.value)&&v&&(e=s?o(v)>o(n.value):l?v>n.value:r>new Date(n.value)),Xf(i.value)&&v&&(t=s?o(v)<o(i.value):l?v<i.value:r<new Date(i.value))}else{const r=a.valueAsNumber||(v?+v:v);bf(n.value)||(e=r>n.value),bf(i.value)||(t=r<i.value)}if((e||t)&&(C(!!e,n.message,i.message,zf,Uf),!r))return w(_[m].message),_}if((u||c)&&!k&&(Xf(v)||o&&Array.isArray(v))){const e=Fp(u),t=Fp(c),n=!bf(e.value)&&v.length>+e.value,i=!bf(t.value)&&v.length<+t.value;if((n||i)&&(C(n,e.message,t.message),!r))return w(_[m].message),_}if(p&&!k&&Xf(v)){const{value:e,message:t}=Fp(p);if(Tp(e)&&!v.match(e)&&(_[m]={type:Vf,message:t,ref:a,...T(Vf,t)},!r))return w(t),_}if(h)if(cp(h)){const e=Pp(await h(v,n),b);if(e&&(_[m]={...e,...T(Gf,e.message)},!r))return w(e.message),_}else if(_f(h)){let e={};for(const t in h){if(!lp(e)&&!r)break;const i=Pp(await h[t](v,n),b,t);i&&(e={...i,...T(t,i.message)},w(i.message),r&&(_[m]=e))}if(!lp(e)&&(_[m]={ref:b,...e},!r))return _}return w(!0),_};const jp={mode:jf,reValidateMode:Lf,shouldFocusError:!0};function Bp(e={}){let t,n={...jp,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:cp(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},o=(_f(n.defaultValues)||_f(n.values))&&kf(n.defaultValues||n.values)||{},a=n.shouldUnregister?{}:kf(o),s={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u=0;const c={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let d={...c};const f={array:ap(),state:ap()},p=n.criteriaMode===$f,h=async e=>{if(!n.disabled&&(c.isValid||d.isValid||e)){const e=n.resolver?lp((await b()).errors):await w(i,!0);e!==r.isValid&&f.state.next({isValid:e})}},m=(e,t)=>{!n.disabled&&(c.isValidating||c.validatingFields||d.isValidating||d.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?Df(r.validatingFields,e,t):mp(r.validatingFields,e))}),f.state.next({validatingFields:r.validatingFields,isValidating:!lp(r.validatingFields)}))},g=(e,t,n,r)=>{const l=Of(i,e);if(l){const i=Of(a,e,Cf(n)?Of(o,e):n);Cf(i)||r&&r.defaultChecked||t?Df(a,e,t?i:kp(l._f)):E(e,i),s.mount&&h()}},y=(e,t,i,a,s)=>{let l=!1,u=!1;const p={name:e};if(!n.disabled){if(!i||a){(c.isDirty||d.isDirty)&&(u=r.isDirty,r.isDirty=p.isDirty=_(),l=u!==p.isDirty);const n=tp(Of(o,e),t);u=!!Of(r.dirtyFields,e),n?mp(r.dirtyFields,e):Df(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,l=l||(c.dirtyFields||d.dirtyFields)&&u!==!n}if(i){const t=Of(r.touchedFields,e);t||(Df(r.touchedFields,e,i),p.touchedFields=r.touchedFields,l=l||(c.touchedFields||d.touchedFields)&&t!==i)}l&&s&&f.state.next(p)}return l?p:{}},v=(e,i,o,a)=>{const s=Of(r.errors,e),l=(c.isValid||d.isValid)&&Nf(i)&&r.isValid!==i;var p;if(n.delayError&&o?(p=()=>((e,t)=>{Df(r.errors,e,t),f.state.next({errors:r.errors})})(e,o),t=e=>{clearTimeout(u),u=setTimeout(p,e)},t(n.delayError)):(clearTimeout(u),t=null,o?Df(r.errors,e,o):mp(r.errors,e)),(o?!tp(s,o):s)||!lp(a)||l){const t={...a,...l&&Nf(i)?{isValid:i}:{},errors:r.errors,name:e};r={...r,...t},f.state.next(t)}},b=async e=>{m(e,!0);const t=await n.resolver(a,n.context,((e,t,n,r)=>{const i={};for(const o of e){const e=Of(t,o);e&&Df(i,o,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return m(e),t},w=async(e,t,i={valid:!0})=>{for(const o in e){const s=e[o];if(s){const{_f:e,...o}=s;if(e){const o=l.array.has(e.name),u=s._f&&Op(s._f);u&&c.validatingFields&&m([e.name],!0);const d=await Lp(s,l.disabled,a,p,n.shouldUseNativeValidation&&!t,o);if(u&&c.validatingFields&&m([e.name]),d[e.name]&&(i.valid=!1,t))break;!t&&(Of(d,e.name)?o?Mp(r.errors,d,e.name):Df(r.errors,e.name,d[e.name]):mp(r.errors,e.name))}!lp(o)&&await w(o,t,i)}}return i.valid},_=(e,t)=>!n.disabled&&(e&&t&&Df(a,e,t),!tp(I(),o)),x=(e,t,n)=>Jf(e,l,{...s.mount?a:Cf(t)?o:Xf(e)?{[e]:t}:t},n,t),E=(e,t,n={})=>{const r=Of(i,e);let o=t;if(r){const n=r._f;n&&(!n.disabled&&Df(a,e,xp(t,n)),o=dp(n.ref)&&bf(t)?"":t,fp(n.ref)?[...n.ref.options].forEach(e=>e.selected=o.includes(e.value)):n.refs?yf(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(o)?e.checked=!!o.find(t=>t===e.value):e.checked=o===e.value||!!o)}):n.refs.forEach(e=>e.checked=e.value===o):up(n.ref)?n.ref.value="":(n.ref.value=o,n.ref.type||f.state.next({name:e,values:kf(a)})))}(n.shouldDirty||n.shouldTouch)&&y(e,o,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},S=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const o=t[r],a=e+"."+r,s=Of(i,a);(l.array.has(e)||_f(o)||s&&!s._f)&&!vf(o)?S(a,o,n):E(a,o,n)}},k=(e,t,n={})=>{const u=Of(i,e),p=l.array.has(e),h=kf(t);Df(a,e,h),p?(f.array.next({name:e,values:kf(a)}),(c.isDirty||c.dirtyFields||d.isDirty||d.dirtyFields)&&n.shouldDirty&&f.state.next({name:e,dirtyFields:vp(o,a),isDirty:_(e,h)})):!u||u._f||bf(h)?E(e,h,n):S(e,h,n),Np(e,l)&&f.state.next({...r,name:e}),f.state.next({name:s.mount?e:void 0,values:kf(a)})},T=async e=>{s.mount=!0;const o=e.target;let u=o.name,g=!0;const _=Of(i,u),x=e=>{g=Number.isNaN(e)||vf(e)&&isNaN(e.getTime())||tp(e,Of(a,u,e))},E=Ap(n.mode),S=Ap(n.reValidateMode);if(_){let s,k;const T=o.type?kp(_._f):xf(e),C=e.type===Rf||e.type===Mf,I=!(e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate))(_._f)&&!n.resolver&&!Of(r.errors,u)&&!_._f.deps||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(C,Of(r.touchedFields,u),r.isSubmitted,S,E),O=Np(u,l,C);Df(a,u,T),C?o&&o.readOnly||(_._f.onBlur&&_._f.onBlur(e),t&&t(0)):_._f.onChange&&_._f.onChange(e);const N=y(u,T,C),D=!lp(N)||O;if(!C&&f.state.next({name:u,type:e.type,values:kf(a)}),I)return(c.isValid||d.isValid)&&("onBlur"===n.mode?C&&h():C||h()),D&&f.state.next({name:u,...O?{}:N});if(!C&&O&&f.state.next({...r}),n.resolver){const{errors:e}=await b([u]);if(x(T),g){const t=Rp(r.errors,i,u),n=Rp(e,i,t.name||u);s=n.error,u=n.name,k=lp(e)}}else m([u],!0),s=(await Lp(_,l.disabled,a,p,n.shouldUseNativeValidation))[u],m([u]),x(T),g&&(s?k=!1:(c.isValid||d.isValid)&&(k=await w(i,!0)));g&&(_._f.deps&&(!Array.isArray(_._f.deps)||_._f.deps.length>0)&&A(_._f.deps),v(u,k,s,N))}},C=(e,t)=>{if(Of(r.errors,t)&&e.focus)return e.focus(),1},A=async(e,t={})=>{let o,a;const s=op(e);if(n.resolver){const t=await(async e=>{const{errors:t}=await b(e);if(e)for(const n of e){const e=Of(t,n);e?Df(r.errors,n,e):mp(r.errors,n)}else r.errors=t;return t})(Cf(e)?e:s);o=lp(t),a=e?!s.some(e=>Of(t,e)):o}else e?(a=(await Promise.all(s.map(async e=>{const t=Of(i,e);return await w(t&&t._f?{[e]:t}:t)}))).every(Boolean),(a||r.isValid)&&h()):a=o=await w(i);return f.state.next({...!Xf(e)||(c.isValid||d.isValid)&&o!==r.isValid?{}:{name:e},...n.resolver||!e?{isValid:o}:{},errors:r.errors}),t.shouldFocus&&!a&&Dp(i,C,e?s:l.mount),a},I=(e,t)=>{let n={...s.mount?a:o};return t&&(n=sp(t.dirtyFields?r.dirtyFields:r.touchedFields,n)),Cf(e)?n:Xf(e)?Of(n,e):e.map(e=>Of(n,e))},O=(e,t)=>({invalid:!!Of((t||r).errors,e),isDirty:!!Of((t||r).dirtyFields,e),error:Of((t||r).errors,e),isValidating:!!Of(r.validatingFields,e),isTouched:!!Of((t||r).touchedFields,e)}),N=(e,t,n)=>{const o=(Of(i,e,{_f:{}})._f||{}).ref,a=Of(r.errors,e)||{},{ref:s,message:l,type:u,...c}=a;Df(r.errors,e,{...c,...t,ref:o}),f.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&o&&o.focus&&o.focus()},D=e=>f.state.subscribe({next:t=>{var n,i,s;n=e.name,i=t.name,s=e.exact,n&&i&&n!==i&&!op(n).some(e=>e&&(s?e===i:e.startsWith(i)||i.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:i,...o}=e;return lp(o)||Object.keys(o).length>=Object.keys(t).length||Object.keys(o).find(e=>t[e]===(!r||$f))})(t,e.formState||c,$,e.reRenderRoot)||e.callback({values:{...a},...r,...t,defaultValues:o})}}).unsubscribe,R=(e,t={})=>{for(const s of e?op(e):l.mount)l.mount.delete(s),l.array.delete(s),t.keepValue||(mp(i,s),mp(a,s)),!t.keepError&&mp(r.errors,s),!t.keepDirty&&mp(r.dirtyFields,s),!t.keepTouched&&mp(r.touchedFields,s),!t.keepIsValidating&&mp(r.validatingFields,s),!n.shouldUnregister&&!t.keepDefaultValue&&mp(o,s);f.state.next({values:kf(a)}),f.state.next({...r,...t.keepDirty?{isDirty:_()}:{}}),!t.keepIsValid&&h()},M=({disabled:e,name:t})=>{(Nf(e)&&s.mount||e||l.disabled.has(t))&&(e?l.disabled.add(t):l.disabled.delete(t))},P=(e,t={})=>{let r=Of(i,e);const a=Nf(t.disabled)||Nf(n.disabled);return Df(i,e,{...r||{},_f:{...r&&r._f?r._f:{ref:{name:e}},name:e,mount:!0,...t}}),l.mount.add(e),r?M({disabled:Nf(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),{...a?{disabled:t.disabled||n.disabled}:{},...n.progressive?{required:!!t.required,min:Cp(t.min),max:Cp(t.max),minLength:Cp(t.minLength),maxLength:Cp(t.maxLength),pattern:Cp(t.pattern)}:{},name:e,onChange:T,onBlur:T,ref:a=>{if(a){P(e,t),r=Of(i,e);const n=Cf(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,s=(e=>pp(e)||yf(e))(n),l=r._f.refs||[];if(s?l.find(e=>e===n):n===r._f.ref)return;Df(i,e,{_f:{...r._f,...s?{refs:[...l.filter(hp),n,...Array.isArray(Of(o,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n}}}),g(e,!1,void 0,n)}else r=Of(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Ef(l.array,e)||!s.action)&&l.unMount.add(e)}}},F=()=>n.shouldFocusError&&Dp(i,C,l.mount),L=(e,t)=>async o=>{let s;o&&(o.preventDefault&&o.preventDefault(),o.persist&&o.persist());let u=kf(a);if(f.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await b();r.errors=e,u=kf(t)}else await w(i);if(l.disabled.size)for(const e of l.disabled)mp(u,e);if(mp(r.errors,"root"),lp(r.errors)){f.state.next({errors:{}});try{await e(u,o)}catch(c){s=c}}else t&&await t({...r.errors},o),F(),setTimeout(F);if(f.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:lp(r.errors)&&!s,submitCount:r.submitCount+1,errors:r.errors}),s)throw s},j=(e,t={})=>{const u=e?kf(e):o,d=kf(u),p=lp(e),h=p?o:d;if(t.keepDefaultValues||(o=u),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(vp(o,a))]);for(const t of Array.from(e))Of(r.dirtyFields,t)?Df(h,t,Of(a,t)):k(t,Of(h,t))}else{if(Sf&&Cf(e))for(const e of l.mount){const t=Of(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(dp(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)k(e,Of(h,e));else i={}}a=n.shouldUnregister?t.keepDefaultValues?kf(o):{}:kf(h),f.array.next({values:{...h}}),f.state.next({values:{...h}})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},s.mount=!c.isValid||!!t.keepIsValid||!!t.keepDirtyValues,s.watch=!!n.shouldUnregister,f.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||tp(e,o))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&a?vp(o,a):r.dirtyFields:t.keepDefaultValues&&e?vp(o,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:o})},B=(e,t)=>j(cp(e)?e(a):e,t),$=e=>{r={...r,...e}},z={control:{register:P,unregister:R,getFieldState:O,handleSubmit:L,setError:N,_subscribe:D,_runSchema:b,_focusError:F,_getWatch:x,_getDirty:_,_setValid:h,_setFieldArray:(e,t=[],l,u,p=!0,h=!0)=>{if(u&&l&&!n.disabled){if(s.action=!0,h&&Array.isArray(Of(i,e))){const t=l(Of(i,e),u.argA,u.argB);p&&Df(i,e,t)}if(h&&Array.isArray(Of(r.errors,e))){const t=l(Of(r.errors,e),u.argA,u.argB);p&&Df(r.errors,e,t),((e,t)=>{!Af(Of(e,t)).length&&mp(e,t)})(r.errors,e)}if((c.touchedFields||d.touchedFields)&&h&&Array.isArray(Of(r.touchedFields,e))){const t=l(Of(r.touchedFields,e),u.argA,u.argB);p&&Df(r.touchedFields,e,t)}(c.dirtyFields||d.dirtyFields)&&(r.dirtyFields=vp(o,a)),f.state.next({name:e,isDirty:_(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Df(a,e,t)},_setDisabledField:M,_setErrors:e=>{r.errors=e,f.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Af(Of(s.mount?a:o,e,n.shouldUnregister?Of(o,e,[]):[])),_reset:j,_resetDefaultValues:()=>cp(n.defaultValues)&&n.defaultValues().then(e=>{B(e,n.resetOptions),f.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=Of(i,e);t&&(t._f.refs?t._f.refs.every(e=>!hp(e)):!hp(t._f.ref))&&R(e)}l.unMount=new Set},_disableForm:e=>{Nf(e)&&(f.state.next({disabled:e}),Dp(i,(t,n)=>{const r=Of(i,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:f,_proxyFormState:c,get _fields(){return i},get _formValues(){return a},get _state(){return s},set _state(e){s=e},get _defaultValues(){return o},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n={...n,...e}}},subscribe:e=>(s.mount=!0,d={...d,...e.formState},D({...e,formState:d})),trigger:A,register:P,handleSubmit:L,watch:(e,t)=>cp(e)?f.state.subscribe({next:n=>"values"in n&&e(x(void 0,t),n)}):x(e,t,!0),setValue:k,getValues:I,reset:B,resetField:(e,t={})=>{Of(i,e)&&(Cf(t.defaultValue)?k(e,kf(Of(o,e))):(k(e,t.defaultValue),Df(o,e,kf(t.defaultValue))),t.keepTouched||mp(r.touchedFields,e),t.keepDirty||(mp(r.dirtyFields,e),r.isDirty=t.defaultValue?_(e,kf(Of(o,e))):_()),t.keepError||(mp(r.errors,e),c.isValid&&h()),f.state.next({...r}))},clearErrors:e=>{e&&op(e).forEach(e=>mp(r.errors,e)),f.state.next({errors:e?r.errors:{}})},unregister:R,setError:N,setFocus:(e,t={})=>{const n=Of(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&cp(e.select)&&e.select())}},getFieldState:O};return{...z,formControl:z}}function $p(e={}){const t=T.useRef(void 0),n=T.useRef(void 0),[r,i]=T.useState({isDirty:!1,isValidating:!1,isLoading:cp(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:cp(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:r},e.defaultValues&&!cp(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:n,...i}=Bp(e);t.current={...i,formState:r}}const o=t.current.control;return o._options=e,Qf(()=>{const e=o._subscribe({formState:o._proxyFormState,callback:()=>i({...o._formState}),reRenderRoot:!0});return i(e=>({...e,isReady:!0})),o._formState.isReady=!0,e},[o]),T.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),T.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),T.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),T.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),T.useEffect(()=>{if(o._proxyFormState.isDirty){const e=o._getDirty();e!==r.isDirty&&o._subjects.state.next({isDirty:e})}},[o,r.isDirty]),T.useEffect(()=>{e.values&&!tp(e.values,n.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),n.current=e.values,i(e=>({...e}))):o._resetDefaultValues()},[o,e.values]),T.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),t.current.formState=Zf(r,o),t.current}var zp=k.forwardRef((e,t)=>w.jsx(X.label,{...e,ref:t,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||(null==(n=e.onMouseDown)||n.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));zp.displayName="Label";var Up=zp;const qp=Hn("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Hp=k.forwardRef(({className:e,...t},n)=>w.jsx(Up,{ref:n,className:zn(qp(),e),...t}));Hp.displayName=Up.displayName;const Vp=e=>{const{children:t,...n}=e;return T.createElement(Yf.Provider,{value:n},t)},Wp=k.createContext({}),Gp=({...e})=>w.jsx(Wp.Provider,{value:{name:e.name},children:w.jsx(rp,{...e})}),Yp=()=>{const e=k.useContext(Wp),t=k.useContext(Kp),{getFieldState:n,formState:r}=Kf(),i=n(e.name,r);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=t;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...i}},Kp=k.createContext({}),Zp=k.forwardRef(({className:e,...t},n)=>{const r=k.useId();return w.jsx(Kp.Provider,{value:{id:r},children:w.jsx("div",{ref:n,className:zn("space-y-2",e),...t})})});Zp.displayName="FormItem";const Qp=k.forwardRef(({className:e,...t},n)=>{const{error:r,formItemId:i}=Yp();return w.jsx(Hp,{ref:n,className:zn(r&&"text-destructive",e),htmlFor:i,...t})});Qp.displayName="FormLabel";const Xp=k.forwardRef(({...e},t)=>{const{error:n,formItemId:r,formDescriptionId:i,formMessageId:o}=Yp();return w.jsx(M,{ref:t,id:r,"aria-describedby":n?`${i} ${o}`:`${i}`,"aria-invalid":!!n,...e})});Xp.displayName="FormControl";k.forwardRef(({className:e,...t},n)=>{const{formDescriptionId:r}=Yp();return w.jsx("p",{ref:n,id:r,className:zn("text-muted-foreground text-[0.8rem]",e),...t})}).displayName="FormDescription";const Jp=k.forwardRef(({className:e,children:t,...n},r)=>{const{error:i,formMessageId:o}=Yp(),a=i?String(null==i?void 0:i.message):t;return a?w.jsx("p",{ref:r,id:o,className:zn("text-destructive text-[0.8rem] font-medium",e),...n,children:a}):null});Jp.displayName="FormMessage";var eh="Menubar",[th,nh,rh]=B(eh),[ih]=A(eh,[rh,bu]),oh=$u(),ah=bu(),[sh,lh]=ih(eh),uh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,value:r,onValueChange:i,defaultValue:o,loop:a=!0,dir:s,...l}=e,u=_e(s),c=ah(n),[d,f]=q({prop:r,onChange:i,defaultProp:o??"",caller:eh}),[p,h]=k.useState(null);return w.jsx(sh,{scope:n,value:d,onMenuOpen:k.useCallback(e=>{f(e),h(e)},[f]),onMenuClose:k.useCallback(()=>f(""),[f]),onMenuToggle:k.useCallback(e=>{f(t=>t?"":e),h(e)},[f]),dir:u,loop:a,children:w.jsx(th.Provider,{scope:n,children:w.jsx(th.Slot,{scope:n,children:w.jsx(Au,{asChild:!0,...c,orientation:"horizontal",loop:a,dir:u,currentTabStopId:p,onCurrentTabStopIdChange:h,children:w.jsx(X.div,{role:"menubar",...l,ref:t})})})})})});uh.displayName=eh;var[ch,dh]=ih("MenubarMenu"),fh="MenubarTrigger",ph=k.forwardRef((e,t)=>{const{__scopeMenubar:n,disabled:r=!1,...i}=e,o=ah(n),a=oh(n),s=lh(fh,n),l=dh(fh,n),u=k.useRef(null),c=D(t,u,l.triggerRef),[d,f]=k.useState(!1),p=s.value===l.value;return w.jsx(th.ItemSlot,{scope:n,value:l.value,disabled:r,children:w.jsx(Iu,{asChild:!0,...o,focusable:!r,tabStopId:l.value,children:w.jsx(Lc,{asChild:!0,...a,children:w.jsx(X.button,{type:"button",role:"menuitem",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":p,"aria-controls":p?l.contentId:void 0,"data-highlighted":d?"":void 0,"data-state":p?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:c,onPointerDown:$(e.onPointerDown,e=>{r||0!==e.button||!1!==e.ctrlKey||(s.onMenuOpen(l.value),p||e.preventDefault())}),onPointerEnter:$(e.onPointerEnter,()=>{var e;Boolean(s.value)&&!p&&(s.onMenuOpen(l.value),null==(e=u.current)||e.focus())}),onKeyDown:$(e.onKeyDown,e=>{r||(["Enter"," "].includes(e.key)&&s.onMenuToggle(l.value),"ArrowDown"===e.key&&s.onMenuOpen(l.value),["Enter"," ","ArrowDown"].includes(e.key)&&(l.wasKeyboardTriggerOpenRef.current=!0,e.preventDefault()))}),onFocus:$(e.onFocus,()=>f(!0)),onBlur:$(e.onBlur,()=>f(!1))})})})})});ph.displayName=fh;var hh=e=>{const{__scopeMenubar:t,...n}=e,r=oh(t);return w.jsx(jc,{...r,...n})};hh.displayName="MenubarPortal";var mh="MenubarContent",gh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,align:r="start",...i}=e,o=oh(n),a=lh(mh,n),s=dh(mh,n),l=nh(n),u=k.useRef(!1);return w.jsx(Bc,{id:s.contentId,"aria-labelledby":s.triggerId,"data-radix-menubar-content":"",...o,...i,ref:t,align:r,onCloseAutoFocus:$(e.onCloseAutoFocus,e=>{var t;Boolean(a.value)||u.current||null==(t=s.triggerRef.current)||t.focus(),u.current=!1,e.preventDefault()}),onFocusOutside:$(e.onFocusOutside,e=>{const t=e.target;l().some(e=>{var n;return null==(n=e.ref.current)?void 0:n.contains(t)})&&e.preventDefault()}),onInteractOutside:$(e.onInteractOutside,()=>{u.current=!0}),onEntryFocus:e=>{s.wasKeyboardTriggerOpenRef.current||e.preventDefault()},onKeyDown:$(e.onKeyDown,e=>{if(["ArrowRight","ArrowLeft"].includes(e.key)){const r=e.target,i=r.hasAttribute("data-radix-menubar-subtrigger"),o=r.closest("[data-radix-menubar-content]")!==e.currentTarget,u=("rtl"===a.dir?"ArrowRight":"ArrowLeft")===e.key;if(!u&&i)return;if(o&&u)return;let c=l().filter(e=>!e.disabled).map(e=>e.value);u&&c.reverse();const d=c.indexOf(s.value);c=a.loop?(n=d+1,(t=c).map((e,r)=>t[(n+r)%t.length])):c.slice(d+1);const[f]=c;f&&a.onMenuOpen(f)}var t,n},{checkForDefaultPrevented:!1}),style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});gh.displayName=mh;k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx($c,{...i,...r,ref:t})}).displayName="MenubarGroup";var yh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(zc,{...i,...r,ref:t})});yh.displayName="MenubarLabel";var vh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Uc,{...i,...r,ref:t})});vh.displayName="MenubarItem";var bh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(qc,{...i,...r,ref:t})});bh.displayName="MenubarCheckboxItem";k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Hc,{...i,...r,ref:t})}).displayName="MenubarRadioGroup";var wh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Vc,{...i,...r,ref:t})});wh.displayName="MenubarRadioItem";var _h=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Wc,{...i,...r,ref:t})});_h.displayName="MenubarItemIndicator";var xh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Gc,{...i,...r,ref:t})});xh.displayName="MenubarSeparator";k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Yc,{...i,...r,ref:t})}).displayName="MenubarArrow";var Eh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Kc,{"data-radix-menubar-subtrigger":"",...i,...r,ref:t})});Eh.displayName="MenubarSubTrigger";var Sh=k.forwardRef((e,t)=>{const{__scopeMenubar:n,...r}=e,i=oh(n);return w.jsx(Zc,{...i,"data-radix-menubar-content":"",...r,ref:t,style:{...e.style,"--radix-menubar-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-menubar-content-available-width":"var(--radix-popper-available-width)","--radix-menubar-content-available-height":"var(--radix-popper-available-height)","--radix-menubar-trigger-width":"var(--radix-popper-anchor-width)","--radix-menubar-trigger-height":"var(--radix-popper-anchor-height)"}})});Sh.displayName="MenubarSubContent";var kh=uh,Th=ph,Ch=hh,Ah=gh,Ih=yh,Oh=vh,Nh=bh,Dh=wh,Rh=_h,Mh=xh,Ph=Eh,Fh=Sh;k.forwardRef(({className:e,...t},n)=>w.jsx(kh,{ref:n,className:zn("bg-background flex h-9 items-center space-x-1 rounded-md border p-1 shadow-sm",e),...t})).displayName=kh.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(Th,{ref:n,className:zn("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default select-none items-center rounded-sm px-3 py-1 text-sm font-medium outline-none",e),...t})).displayName=Th.displayName;k.forwardRef(({className:e,inset:t,children:n,...r},i)=>w.jsxs(Ph,{ref:i,className:zn("focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none",t&&"pl-8",e),...r,children:[n,w.jsx(lt,{className:"ml-auto h-4 w-4"})]})).displayName=Ph.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(Fh,{ref:n,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-[--radix-menubar-content-transform-origin] overflow-hidden rounded-md border p-1 shadow-lg",e),...t})).displayName=Fh.displayName;k.forwardRef(({className:e,align:t="start",alignOffset:n=-4,sideOffset:r=8,...i},o)=>w.jsx(Ch,{children:w.jsx(Ah,{ref:o,align:t,alignOffset:n,sideOffset:r,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[12rem] origin-[--radix-menubar-content-transform-origin] overflow-hidden rounded-md border p-1 shadow-md",e),...i})})).displayName=Ah.displayName;k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(Oh,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...n})).displayName=Oh.displayName;k.forwardRef(({className:e,children:t,checked:n,...r},i)=>w.jsxs(Nh,{ref:i,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(Rh,{children:w.jsx(at,{className:"h-4 w-4"})})}),t]})).displayName=Nh.displayName;k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(Dh,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[w.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(Rh,{children:w.jsx(dt,{className:"h-4 w-4 fill-current"})})}),t]})).displayName=Dh.displayName;k.forwardRef(({className:e,inset:t,...n},r)=>w.jsx(Ih,{ref:r,className:zn("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n})).displayName=Ih.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(Mh,{ref:n,className:zn("bg-muted -mx-1 my-1 h-px",e),...t})).displayName=Mh.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx("ul",{ref:n,className:zn("flex flex-row items-center gap-1",e),...t})).displayName="PaginationContent";k.forwardRef(({className:e,...t},n)=>w.jsx("li",{ref:n,className:zn("",e),...t})).displayName="PaginationItem";var Lh="Progress",[jh]=A(Lh),[Bh,$h]=jh(Lh),zh=k.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=Hh,...a}=e;(i||0===i)&&Gh(i);const s=Gh(i)?i:100;null!==r&&Yh(r,s);const l=Yh(r,s)?r:null,u=Wh(l)?o(l,s):void 0;return w.jsx(Bh,{scope:n,value:l,max:s,children:w.jsx(X.div,{"aria-valuemax":s,"aria-valuemin":0,"aria-valuenow":Wh(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":Vh(l,s),"data-value":l??void 0,"data-max":s,...a,ref:t})})});zh.displayName=Lh;var Uh="ProgressIndicator",qh=k.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,i=$h(Uh,n);return w.jsx(X.div,{"data-state":Vh(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:t})});function Hh(e,t){return`${Math.round(e/t*100)}%`}function Vh(e,t){return null==e?"indeterminate":e===t?"complete":"loading"}function Wh(e){return"number"==typeof e}function Gh(e){return Wh(e)&&!isNaN(e)&&e>0}function Yh(e,t){return Wh(e)&&!isNaN(e)&&e<=t&&e>=0}qh.displayName=Uh;var Kh=zh,Zh=qh;const Qh=k.forwardRef(({className:e,value:t,indeterminate:n=!1,...r},i)=>w.jsx(Kh,{ref:i,className:zn("bg-secondary relative h-4 w-full overflow-hidden rounded-full",e),...r,children:w.jsx(Zh,{className:zn("bg-primary h-full w-full flex-1 transition-all",n&&"animate-sqlrooms-progress origin-left"),style:{transform:`translateX(-${100-(t||0)}%)`}})}));Qh.displayName=Kh.displayName;const Xh=e=>{const{className:t,isOpen:n,title:r,loadingStage:i,progress:o,indeterminate:a}=e;return w.jsx(ba,{open:n,onOpenChange:()=>{},children:w.jsxs(xa,{className:zn("rounded-md border-none focus:outline-none sm:max-w-[425px]",t),showCloseButton:!1,children:[w.jsx(Ea,{children:w.jsx(ka,{children:r??""})}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx(Qh,{value:o,className:"h-2 w-full",indeterminate:a}),w.jsxs(Ta,{className:"text-muted-foreground flex justify-between text-sm",children:[w.jsx("span",{className:"text-sm",children:i??""}),o?w.jsxs("span",{children:[o,"%"]}):null]})]})]})})};var Jh="Radio",[em,tm]=A(Jh),[nm,rm]=em(Jh),im=k.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:i=!1,required:o,disabled:a,value:s="on",onCheck:l,form:u,...c}=e,[d,f]=k.useState(null),p=D(t,e=>f(e)),h=k.useRef(!1),m=!d||(u||!!d.closest("form"));return w.jsxs(nm,{scope:n,checked:i,disabled:a,children:[w.jsx(X.button,{type:"button",role:"radio","aria-checked":i,"data-state":lm(i),"data-disabled":a?"":void 0,disabled:a,value:s,...c,ref:p,onClick:$(e.onClick,e=>{i||null==l||l(),m&&(h.current=e.isPropagationStopped(),h.current||e.stopPropagation())})}),m&&w.jsx(sm,{control:d,bubbles:!h.current,name:r,value:s,checked:i,required:o,disabled:a,form:u,style:{transform:"translateX(-100%)"}})]})});im.displayName=Jh;var om="RadioIndicator",am=k.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...i}=e,o=rm(om,n);return w.jsx(ee,{present:r||o.checked,children:w.jsx(X.span,{"data-state":lm(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})})});am.displayName=om;var sm=k.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...i},o)=>{const a=k.useRef(null),s=D(a,o),l=or(n),u=ar(t);return k.useEffect(()=>{const e=a.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&i){const t=new Event("click",{bubbles:r});i.call(e,n),e.dispatchEvent(t)}},[l,n,r]),w.jsx(X.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function lm(e){return e?"checked":"unchecked"}sm.displayName="RadioBubbleInput";var um=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],cm="RadioGroup",[dm]=A(cm,[bu,tm]),fm=bu(),pm=tm(),[hm,mm]=dm(cm),gm=k.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:i,value:o,required:a=!1,disabled:s=!1,orientation:l,dir:u,loop:c=!0,onValueChange:d,...f}=e,p=fm(n),h=_e(u),[m,g]=q({prop:o,defaultProp:i??null,onChange:d,caller:cm});return w.jsx(hm,{scope:n,name:r,required:a,disabled:s,value:m,onValueChange:g,children:w.jsx(Au,{asChild:!0,...p,orientation:l,dir:h,loop:c,children:w.jsx(X.div,{role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":s?"":void 0,dir:h,...f,ref:t})})})});gm.displayName=cm;var ym="RadioGroupItem",vm=k.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...i}=e,o=mm(ym,n),a=o.disabled||r,s=fm(n),l=pm(n),u=k.useRef(null),c=D(t,u),d=o.value===i.value,f=k.useRef(!1);return k.useEffect(()=>{const e=e=>{um.includes(e.key)&&(f.current=!0)},t=()=>f.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),w.jsx(Iu,{asChild:!0,...s,focusable:!a,active:d,children:w.jsx(im,{disabled:a,required:o.required,checked:d,...l,...i,name:o.name,ref:c,onCheck:()=>o.onValueChange(i.value),onKeyDown:$(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:$(i.onFocus,()=>{var e;f.current&&(null==(e=u.current)||e.click())})})})});vm.displayName=ym;var bm=k.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,i=pm(n);return w.jsx(am,{...i,...r,ref:t})});bm.displayName="RadioGroupIndicator";var wm=gm,_m=vm,xm=bm;k.forwardRef(({className:e,...t},n)=>w.jsx(wm,{className:zn("grid gap-2",e),...t,ref:n})).displayName=wm.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(_m,{ref:n,className:zn("border-primary text-primary focus-visible:ring-ring aspect-square h-4 w-4 rounded-full border shadow focus:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:w.jsx(xm,{className:"flex items-center justify-center",children:w.jsx(dt,{className:"fill-primary h-3.5 w-3.5"})})})).displayName=_m.displayName;const Em=k.createContext(null);Em.displayName="PanelGroupContext";const Sm="data-panel-group",km="data-panel-group-direction",Tm="data-panel-group-id",Cm="data-panel",Am="data-panel-collapsible",Im="data-panel-id",Om="data-panel-size",Nm="data-resize-handle",Dm="data-resize-handle-active",Rm="data-panel-resize-handle-enabled",Mm="data-panel-resize-handle-id",Pm="data-resize-handle-state",Fm=k.useLayoutEffect,Lm=C["useId".toString()],jm="function"==typeof Lm?Lm:()=>null;let Bm=0;function $m(e=null){const t=jm(),n=k.useRef(e||t||null);return null===n.current&&(n.current=""+Bm++),null!=e?e:n.current}function zm({children:e,className:t="",collapsedSize:n,collapsible:r,defaultSize:i,forwardedRef:o,id:a,maxSize:s,minSize:l,onCollapse:u,onExpand:c,onResize:d,order:f,style:p,tagName:h="div",...m}){const g=k.useContext(Em);if(null===g)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:y,expandPanel:v,getPanelSize:b,getPanelStyle:w,groupId:_,isPanelCollapsed:x,reevaluatePanelConstraints:E,registerPanel:S,resizePanel:T,unregisterPanel:C}=g,A=$m(a),I=k.useRef({callbacks:{onCollapse:u,onExpand:c,onResize:d},constraints:{collapsedSize:n,collapsible:r,defaultSize:i,maxSize:s,minSize:l},id:A,idIsFromProps:void 0!==a,order:f});k.useRef({didLogMissingDefaultSizeWarning:!1}),Fm(()=>{const{callbacks:e,constraints:t}=I.current,o={...t};I.current.id=A,I.current.idIsFromProps=void 0!==a,I.current.order=f,e.onCollapse=u,e.onExpand=c,e.onResize=d,t.collapsedSize=n,t.collapsible=r,t.defaultSize=i,t.maxSize=s,t.minSize=l,o.collapsedSize===t.collapsedSize&&o.collapsible===t.collapsible&&o.maxSize===t.maxSize&&o.minSize===t.minSize||E(I.current,o)}),Fm(()=>{const e=I.current;return S(e),()=>{C(e)}},[f,A,S,C]),k.useImperativeHandle(o,()=>({collapse:()=>{y(I.current)},expand:e=>{v(I.current,e)},getId:()=>A,getSize:()=>b(I.current),isCollapsed:()=>x(I.current),isExpanded:()=>!x(I.current),resize:e=>{T(I.current,e)}}),[y,v,b,x,A,T]);const O=w(I.current,i);return k.createElement(h,{...m,children:e,className:t,id:A,style:{...O,...p},[Tm]:_,[Cm]:"",[Am]:r||void 0,[Im]:A,[Om]:parseFloat(""+O.flexGrow).toFixed(1)})}const Um=k.forwardRef((e,t)=>k.createElement(zm,{...e,forwardedRef:t}));zm.displayName="Panel",Um.displayName="forwardRef(Panel)";let qm=null,Hm=-1,Vm=null;function Wm(e,t){var n,r;const i=function(e,t){if(t){const e=0!==(t&ag),n=0!==(t&sg);if(0!==(t&ig))return e?"se-resize":n?"ne-resize":"e-resize";if(0!==(t&og))return e?"sw-resize":n?"nw-resize":"w-resize";if(e)return"s-resize";if(n)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}(e,t);if(qm!==i){var o;if(qm=i,null===Vm&&(Vm=document.createElement("style"),document.head.appendChild(Vm)),Hm>=0)null===(o=Vm.sheet)||void 0===o||o.removeRule(Hm);Hm=null!==(n=null===(r=Vm.sheet)||void 0===r?void 0:r.insertRule(`*{cursor: ${i} !important;}`))&&void 0!==n?n:-1}}function Gm(e){return"keydown"===e.type}function Ym(e){return e.type.startsWith("pointer")}function Km(e){return e.type.startsWith("mouse")}function Zm(e){if(Ym(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Km(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Qm(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}const Xm=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function Jm(e){const t=getComputedStyle(e);return"fixed"===t.position||(!("auto"===t.zIndex||"static"===t.position&&!function(e){var t;const n=getComputedStyle(null!==(t=rg(e))&&void 0!==t?t:e).display;return"flex"===n||"inline-flex"===n}(e))||(+t.opacity<1||("transform"in t&&"none"!==t.transform||("webkitTransform"in t&&"none"!==t.webkitTransform||("mixBlendMode"in t&&"normal"!==t.mixBlendMode||("filter"in t&&"none"!==t.filter||("webkitFilter"in t&&"none"!==t.webkitFilter||("isolation"in t&&"isolate"===t.isolation||(!!Xm.test(t.willChange)||"touch"===t.webkitOverflowScrolling)))))))))}function eg(e){let t=e.length;for(;t--;){const n=e[t];if(Sg(n,"Missing node"),Jm(n))return n}return null}function tg(e){return e&&Number(getComputedStyle(e).zIndex)||0}function ng(e){const t=[];for(;e;)t.push(e),e=rg(e);return t}function rg(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const ig=1,og=2,ag=4,sg=8,lg="coarse"===function(){if("function"==typeof matchMedia)return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}();let ug=[],cg=!1,dg=new Map,fg=new Map;const pg=new Set;function hg(e){const{target:t}=e,{x:n,y:r}=Zm(e);cg=!0,vg({target:t,x:n,y:r}),xg(),ug.length>0&&(Eg("down",e),e.preventDefault(),yg(t)||e.stopImmediatePropagation())}function mg(e){const{x:t,y:n}=Zm(e);if(cg&&0===e.buttons&&(cg=!1,Eg("up",e)),!cg){const{target:r}=e;vg({target:r,x:t,y:n})}Eg("move",e),wg(),ug.length>0&&e.preventDefault()}function gg(e){const{target:t}=e,{x:n,y:r}=Zm(e);fg.clear(),cg=!1,ug.length>0&&(e.preventDefault(),yg(t)||e.stopImmediatePropagation()),Eg("up",e),vg({target:t,x:n,y:r}),wg(),xg()}function yg(e){let t=e;for(;t;){if(t.hasAttribute(Nm))return!0;t=t.parentElement}return!1}function vg({target:e,x:t,y:n}){ug.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),pg.forEach(e=>{const{element:i,hitAreaMargins:o}=e,a=i.getBoundingClientRect(),{bottom:s,left:l,right:u,top:c}=a,d=lg?o.coarse:o.fine;if(t>=l-d&&t<=u+d&&n>=c-d&&n<=s+d){if(null!==r&&document.contains(r)&&i!==r&&!i.contains(r)&&!r.contains(i)&&function(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:ng(e),b:ng(t)};let r;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),r=e;Sg(r,"Stacking order can only be calculated for elements with a common ancestor");const i=tg(eg(n.a)),o=tg(eg(n.b));if(i===o){const e=r.childNodes,t={a:n.a.at(-1),b:n.b.at(-1)};let i=e.length;for(;i--;){const n=e[i];if(n===t.a)return 1;if(n===t.b)return-1}}return Math.sign(i-o)}(r,i)>0){let e=r,t=!1;for(;e&&!e.contains(i);){if(Qm(e.getBoundingClientRect(),a)){t=!0;break}e=e.parentElement}if(t)return}ug.push(e)}})}function bg(e,t){fg.set(e,t)}function wg(){let e=!1,t=!1;ug.forEach(n=>{const{direction:r}=n;"horizontal"===r?e=!0:t=!0});let n=0;fg.forEach(e=>{n|=e}),e&&t?Wm("intersection",n):e?Wm("horizontal",n):t?Wm("vertical",n):null!==Vm&&(document.head.removeChild(Vm),qm=null,Vm=null,Hm=-1)}let _g=new AbortController;function xg(){_g.abort(),_g=new AbortController;const e={capture:!0,signal:_g.signal};pg.size&&(cg?(ug.length>0&&dg.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("contextmenu",gg,e),r.addEventListener("pointerleave",mg,e),r.addEventListener("pointermove",mg,e))}),window.addEventListener("pointerup",gg,e),window.addEventListener("pointercancel",gg,e)):dg.forEach((t,n)=>{const{body:r}=n;t>0&&(r.addEventListener("pointerdown",hg,e),r.addEventListener("pointermove",mg,e))}))}function Eg(e,t){pg.forEach(n=>{const{setResizeHandlerState:r}=n,i=ug.includes(n);r(e,i,t)})}function Sg(e,t){if(!e)throw Error(t)}function kg(e,t,n=10){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function Tg(e,t,n=10){return 0===kg(e,t,n)}function Cg(e,t,n){return 0===kg(e,t,n)}function Ag({panelConstraints:e,panelIndex:t,size:n}){const r=e[t];Sg(null!=r,`Panel constraints not found for index ${t}`);let{collapsedSize:i=0,collapsible:o,maxSize:a=100,minSize:s=0}=r;if(kg(n,s)<0)if(o){n=kg(n,(i+s)/2)<0?i:s}else n=s;return n=Math.min(a,n),n=parseFloat(n.toFixed(10))}function Ig({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:r,prevLayout:i,trigger:o}){if(Cg(e,0))return t;const a=[...t],[s,l]=r;Sg(null!=s,"Invalid first pivot index"),Sg(null!=l,"Invalid second pivot index");let u=0;if("keyboard"===o){{const r=e<0?l:s,i=n[r];Sg(i,`Panel constraints not found for index ${r}`);const{collapsedSize:o=0,collapsible:a,minSize:u=0}=i;if(a){const n=t[r];if(Sg(null!=n,`Previous layout not found for panel index ${r}`),Cg(n,o)){const t=u-n;kg(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}{const r=e<0?s:l,i=n[r];Sg(i,`No panel constraints found for index ${r}`);const{collapsedSize:o=0,collapsible:a,minSize:u=0}=i;if(a){const n=t[r];if(Sg(null!=n,`Previous layout not found for panel index ${r}`),Cg(n,u)){const t=n-o;kg(t,Math.abs(e))>0&&(e=e<0?0-t:t)}}}}{const r=e<0?1:-1;let i=e<0?l:s,o=0;for(;;){const e=t[i];Sg(null!=e,`Previous layout not found for panel index ${i}`);if(o+=Ag({panelConstraints:n,panelIndex:i,size:100})-e,i+=r,i<0||i>=n.length)break}const a=Math.min(Math.abs(e),Math.abs(o));e=e<0?0-a:a}{let r=e<0?s:l;for(;r>=0&&r<n.length;){const i=Math.abs(e)-Math.abs(u),o=t[r];Sg(null!=o,`Previous layout not found for panel index ${r}`);const s=Ag({panelConstraints:n,panelIndex:r,size:o-i});if(!Cg(o,s)&&(u+=o-s,a[r]=s,u.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?r--:r++}}if(function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Cg(e[r],t[r],n))return!1;return!0}(i,a))return i;{const r=e<0?l:s,i=t[r];Sg(null!=i,`Previous layout not found for panel index ${r}`);const o=i+u,c=Ag({panelConstraints:n,panelIndex:r,size:o});if(a[r]=c,!Cg(c,o)){let t=o-c;let r=e<0?l:s;for(;r>=0&&r<n.length;){const i=a[r];Sg(null!=i,`Previous layout not found for panel index ${r}`);const o=Ag({panelConstraints:n,panelIndex:r,size:i+t});if(Cg(i,o)||(t-=o-i,a[r]=o),Cg(t,0))break;e>0?r--:r++}}}return Cg(a.reduce((e,t)=>t+e,0),100)?a:i}function Og({layout:e,panelsArray:t,pivotIndices:n}){let r=0,i=100,o=0,a=0;const s=n[0];Sg(null!=s,"No pivot index found"),t.forEach((e,t)=>{const{constraints:n}=e,{maxSize:l=100,minSize:u=0}=n;t===s?(r=u,i=l):(o+=u,a+=l)});return{valueMax:Math.min(i,100-o),valueMin:Math.max(r,100-a),valueNow:e[s]}}function Ng(e,t=document){return Array.from(t.querySelectorAll(`[${Mm}][data-panel-group-id="${e}"]`))}function Dg(e,t,n=document){const r=Ng(e,n).findIndex(e=>e.getAttribute(Mm)===t);return null!=r?r:null}function Rg(e,t,n){const r=Dg(e,t,n);return null!=r?[r,r+1]:[-1,-1]}function Mg(e,t=document){var n;if(t instanceof HTMLElement&&(null==t||null===(n=t.dataset)||void 0===n?void 0:n.panelGroupId)==e)return t;const r=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function Pg(e,t=document){const n=t.querySelector(`[${Mm}="${e}"]`);return n||null}function Fg({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:r,panelDataArray:i,panelGroupElement:o,setLayout:a}){k.useRef({didWarnAboutMissingResizeHandle:!1}),Fm(()=>{if(!o)return;const e=Ng(n,o);for(let t=0;t<i.length-1;t++){const{valueMax:n,valueMin:o,valueNow:a}=Og({layout:r,panelsArray:i,pivotIndices:[t,t+1]}),s=e[t];if(null==s);else{const e=i[t];Sg(e,`No panel data found for index "${t}"`),s.setAttribute("aria-controls",e.id),s.setAttribute("aria-valuemax",""+Math.round(n)),s.setAttribute("aria-valuemin",""+Math.round(o)),s.setAttribute("aria-valuenow",null!=a?""+Math.round(a):"")}}return()=>{e.forEach((e,t)=>{e.removeAttribute("aria-controls"),e.removeAttribute("aria-valuemax"),e.removeAttribute("aria-valuemin"),e.removeAttribute("aria-valuenow")})}},[n,r,i,o]),k.useEffect(()=>{if(!o)return;const e=t.current;Sg(e,"Eager values not found");const{panelDataArray:i}=e;Sg(null!=Mg(n,o),`No group found for id "${n}"`);const s=Ng(n,o);Sg(s,`No resize handles found for group id "${n}"`);const l=s.map(e=>{const t=e.getAttribute(Mm);Sg(t,"Resize handle element has no handle id attribute");const[s,l]=function(e,t,n,r=document){var i,o,a,s;const l=Pg(t,r),u=Ng(e,r),c=l?u.indexOf(l):-1;return[null!==(i=null===(o=n[c])||void 0===o?void 0:o.id)&&void 0!==i?i:null,null!==(a=null===(s=n[c+1])||void 0===s?void 0:s.id)&&void 0!==a?a:null]}(n,t,i,o);if(null==s||null==l)return()=>{};const u=e=>{if(!e.defaultPrevented)switch(e.key){case"Enter":{e.preventDefault();const l=i.findIndex(e=>e.id===s);if(l>=0){const e=i[l];Sg(e,`No panel data found for index ${l}`);const s=r[l],{collapsedSize:u=0,collapsible:c,minSize:d=0}=e.constraints;if(null!=s&&c){const e=Ig({delta:Cg(s,u)?d-u:u-s,initialLayout:r,panelConstraints:i.map(e=>e.constraints),pivotIndices:Rg(n,t,o),prevLayout:r,trigger:"keyboard"});r!==e&&a(e)}}break}}};return e.addEventListener("keydown",u),()=>{e.removeEventListener("keydown",u)}});return()=>{l.forEach(e=>e())}},[o,e,t,n,r,i,a])}function Lg(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function jg(e,t){const n="horizontal"===e,{x:r,y:i}=Zm(t);return n?r:i}function Bg(e,t,n,r,i,o){if(Gm(e)){const t="horizontal"===n;let r=0;r=e.shiftKey?100:null!=i?i:10;let o=0;switch(e.key){case"ArrowDown":o=t?0:r;break;case"ArrowLeft":o=t?-r:0;break;case"ArrowRight":o=t?r:0;break;case"ArrowUp":o=t?0:-r;break;case"End":o=100;break;case"Home":o=-100}return o}return null==r?0:function(e,t,n,r,i){const o="horizontal"===n,a=Pg(t,i);Sg(a,`No resize handle element found for id "${t}"`);const s=a.getAttribute(Tm);Sg(s,"Resize handle element has no group id attribute");let{initialCursorPosition:l}=r;const u=jg(n,e),c=Mg(s,i);Sg(c,`No group element found for id "${s}"`);const d=c.getBoundingClientRect();return(u-l)/(o?d.width:d.height)*100}(e,t,n,r,o)}function $g(e,t,n){t.forEach((t,r)=>{const i=e[r];Sg(i,`Panel data not found for index ${r}`);const{callbacks:o,constraints:a,id:s}=i,{collapsedSize:l=0,collapsible:u}=a,c=n[s];if(null==c||t!==c){n[s]=t;const{onCollapse:e,onExpand:r,onResize:i}=o;i&&i(t,c),u&&(e||r)&&(!r||null!=c&&!Tg(c,l)||Tg(t,l)||r(),!e||null!=c&&Tg(c,l)||!Tg(t,l)||e())}})}function zg(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ug(e){try{if("undefined"==typeof localStorage)throw new Error("localStorage not supported in this environment");e.getItem=e=>localStorage.getItem(e),e.setItem=(e,t)=>{localStorage.setItem(e,t)}}catch(t){e.getItem=()=>null,e.setItem=()=>{}}}function qg(e){return`react-resizable-panels:${e}`}function Hg(e){return e.map(e=>{const{constraints:t,id:n,idIsFromProps:r,order:i}=e;return r?n:i?`${i}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((e,t)=>e.localeCompare(t)).join(",")}function Vg(e,t){try{const n=qg(e),r=t.getItem(n);if(r){const e=JSON.parse(r);if("object"==typeof e&&null!=e)return e}}catch(n){}return null}function Wg(e,t,n,r,i){var o;const a=qg(e),s=Hg(t),l=null!==(o=Vg(e,i))&&void 0!==o?o:{};l[s]={expandToSizes:Object.fromEntries(n.entries()),layout:r};try{i.setItem(a,JSON.stringify(l))}catch(u){}}function Gg({layout:e,panelConstraints:t}){const n=[...e],r=n.reduce((e,t)=>e+t,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(e=>`${e}%`).join(", ")}`);if(!Cg(r,100)&&n.length>0)for(let o=0;o<t.length;o++){const e=n[o];Sg(null!=e,`No layout data found for index ${o}`);const t=100/r*e;n[o]=t}let i=0;for(let o=0;o<t.length;o++){const e=n[o];Sg(null!=e,`No layout data found for index ${o}`);const r=Ag({panelConstraints:t,panelIndex:o,size:e});e!=r&&(i+=e-r,n[o]=r)}if(!Cg(i,0))for(let o=0;o<t.length;o++){const e=n[o];Sg(null!=e,`No layout data found for index ${o}`);const r=Ag({panelConstraints:t,panelIndex:o,size:e+i});if(e!==r&&(i-=r-e,n[o]=r,Cg(i,0)))break}return n}const Yg={getItem:e=>(Ug(Yg),Yg.getItem(e)),setItem:(e,t)=>{Ug(Yg),Yg.setItem(e,t)}},Kg={};function Zg({autoSaveId:e=null,children:t,className:n="",direction:r,forwardedRef:i,id:o=null,onLayout:a=null,keyboardResizeBy:s=null,storage:l=Yg,style:u,tagName:c="div",...d}){const f=$m(o),p=k.useRef(null),[h,m]=k.useState(null),[g,y]=k.useState([]),v=function(){const[e,t]=k.useState(0);return k.useCallback(()=>t(e=>e+1),[])}(),b=k.useRef({}),w=k.useRef(new Map),_=k.useRef(0),x=k.useRef({autoSaveId:e,direction:r,dragState:h,id:f,keyboardResizeBy:s,onLayout:a,storage:l}),E=k.useRef({layout:g,panelDataArray:[],panelDataArrayChanged:!1});k.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),k.useImperativeHandle(i,()=>({getId:()=>x.current.id,getLayout:()=>{const{layout:e}=E.current;return e},setLayout:e=>{const{onLayout:t}=x.current,{layout:n,panelDataArray:r}=E.current,i=Gg({layout:e,panelConstraints:r.map(e=>e.constraints)});Lg(n,i)||(y(i),E.current.layout=i,t&&t(i),$g(r,i,b.current))}}),[]),Fm(()=>{x.current.autoSaveId=e,x.current.direction=r,x.current.dragState=h,x.current.id=f,x.current.onLayout=a,x.current.storage=l}),Fg({committedValuesRef:x,eagerValuesRef:E,groupId:f,layout:g,panelDataArray:E.current.panelDataArray,setLayout:y,panelGroupElement:p.current}),k.useEffect(()=>{const{panelDataArray:t}=E.current;if(e){if(0===g.length||g.length!==t.length)return;let n=Kg[e];null==n&&(n=function(e,t=10){let n=null;return(...r)=>{null!==n&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}(Wg,100),Kg[e]=n);const r=[...t],i=new Map(w.current);n(e,r,i,g,l)}},[e,g,l]),k.useEffect(()=>{});const S=k.useCallback(e=>{const{onLayout:t}=x.current,{layout:n,panelDataArray:r}=E.current;if(e.constraints.collapsible){const i=r.map(e=>e.constraints),{collapsedSize:o=0,panelSize:a,pivotIndices:s}=Jg(r,e,n);if(Sg(null!=a,`Panel size not found for panel "${e.id}"`),!Tg(a,o)){w.current.set(e.id,a);const l=Ig({delta:Xg(r,e)===r.length-1?a-o:o-a,initialLayout:n,panelConstraints:i,pivotIndices:s,prevLayout:n,trigger:"imperative-api"});zg(n,l)||(y(l),E.current.layout=l,t&&t(l),$g(r,l,b.current))}}},[]),T=k.useCallback((e,t)=>{const{onLayout:n}=x.current,{layout:r,panelDataArray:i}=E.current;if(e.constraints.collapsible){const o=i.map(e=>e.constraints),{collapsedSize:a=0,panelSize:s=0,minSize:l=0,pivotIndices:u}=Jg(i,e,r),c=null!=t?t:l;if(Tg(s,a)){const t=w.current.get(e.id),a=null!=t&&t>=c?t:c,l=Ig({delta:Xg(i,e)===i.length-1?s-a:a-s,initialLayout:r,panelConstraints:o,pivotIndices:u,prevLayout:r,trigger:"imperative-api"});zg(r,l)||(y(l),E.current.layout=l,n&&n(l),$g(i,l,b.current))}}},[]),C=k.useCallback(e=>{const{layout:t,panelDataArray:n}=E.current,{panelSize:r}=Jg(n,e,t);return Sg(null!=r,`Panel size not found for panel "${e.id}"`),r},[]),A=k.useCallback((e,t)=>{const{panelDataArray:n}=E.current,r=Xg(n,e);return function({defaultSize:e,dragState:t,layout:n,panelData:r,panelIndex:i,precision:o=3}){const a=n[i];let s;return s=null==a?null!=e?e.toPrecision(o):"1":1===r.length?"1":a.toPrecision(o),{flexBasis:0,flexGrow:s,flexShrink:1,overflow:"hidden",pointerEvents:null!==t?"none":void 0}}({defaultSize:t,dragState:h,layout:g,panelData:n,panelIndex:r})},[h,g]),I=k.useCallback(e=>{const{layout:t,panelDataArray:n}=E.current,{collapsedSize:r=0,collapsible:i,panelSize:o}=Jg(n,e,t);return Sg(null!=o,`Panel size not found for panel "${e.id}"`),!0===i&&Tg(o,r)},[]),O=k.useCallback(e=>{const{layout:t,panelDataArray:n}=E.current,{collapsedSize:r=0,collapsible:i,panelSize:o}=Jg(n,e,t);return Sg(null!=o,`Panel size not found for panel "${e.id}"`),!i||kg(o,r)>0},[]),N=k.useCallback(e=>{const{panelDataArray:t}=E.current;t.push(e),t.sort((e,t)=>{const n=e.order,r=t.order;return null==n&&null==r?0:null==n?-1:null==r?1:n-r}),E.current.panelDataArrayChanged=!0,v()},[v]);Fm(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:e,onLayout:t,storage:n}=x.current,{layout:r,panelDataArray:i}=E.current;let o=null;if(e){const t=function(e,t,n){var r,i;return null!==(i=(null!==(r=Vg(e,n))&&void 0!==r?r:{})[Hg(t)])&&void 0!==i?i:null}(e,i,n);t&&(w.current=new Map(Object.entries(t.expandToSizes)),o=t.layout)}null==o&&(o=function({panelDataArray:e}){const t=Array(e.length),n=e.map(e=>e.constraints);let r=0,i=100;for(let o=0;o<e.length;o++){const e=n[o];Sg(e,`Panel constraints not found for index ${o}`);const{defaultSize:a}=e;null!=a&&(r++,t[o]=a,i-=a)}for(let o=0;o<e.length;o++){const a=n[o];Sg(a,`Panel constraints not found for index ${o}`);const{defaultSize:s}=a;if(null!=s)continue;const l=i/(e.length-r);r++,t[o]=l,i-=l}return t}({panelDataArray:i}));const a=Gg({layout:o,panelConstraints:i.map(e=>e.constraints)});Lg(r,a)||(y(a),E.current.layout=a,t&&t(a),$g(i,a,b.current))}}),Fm(()=>{const e=E.current;return()=>{e.layout=[]}},[]);const D=k.useCallback(e=>{let t=!1;const n=p.current;if(n){"rtl"===window.getComputedStyle(n,null).getPropertyValue("direction")&&(t=!0)}return function(n){n.preventDefault();const r=p.current;if(!r)return()=>null;const{direction:i,dragState:o,id:a,keyboardResizeBy:s,onLayout:l}=x.current,{layout:u,panelDataArray:c}=E.current,{initialLayout:d}=null!=o?o:{},f=Rg(a,e,r);let h=Bg(n,e,i,o,s,r);const m="horizontal"===i;m&&t&&(h=-h);const g=Ig({delta:h,initialLayout:null!=d?d:u,panelConstraints:c.map(e=>e.constraints),pivotIndices:f,prevLayout:u,trigger:Gm(n)?"keyboard":"mouse-or-touch"}),v=!zg(u,g);(Ym(n)||Km(n))&&_.current!=h&&(_.current=h,bg(e,v||0===h?0:m?h<0?ig:og:h<0?ag:sg)),v&&(y(g),E.current.layout=g,l&&l(g),$g(c,g,b.current))}},[]),R=k.useCallback((e,t)=>{const{onLayout:n}=x.current,{layout:r,panelDataArray:i}=E.current,o=i.map(e=>e.constraints),{panelSize:a,pivotIndices:s}=Jg(i,e,r);Sg(null!=a,`Panel size not found for panel "${e.id}"`);const l=Ig({delta:Xg(i,e)===i.length-1?a-t:t-a,initialLayout:r,panelConstraints:o,pivotIndices:s,prevLayout:r,trigger:"imperative-api"});zg(r,l)||(y(l),E.current.layout=l,n&&n(l),$g(i,l,b.current))},[]),M=k.useCallback((e,t)=>{const{layout:n,panelDataArray:r}=E.current,{collapsedSize:i=0,collapsible:o}=t,{collapsedSize:a=0,collapsible:s,maxSize:l=100,minSize:u=0}=e.constraints,{panelSize:c}=Jg(r,e,n);null!=c&&(o&&s&&Tg(c,i)?Tg(i,a)||R(e,a):c<u?R(e,u):c>l&&R(e,l))},[R]),P=k.useCallback((e,t)=>{const{direction:n}=x.current,{layout:r}=E.current;if(!p.current)return;const i=Pg(e,p.current);Sg(i,`Drag handle element not found for id "${e}"`);const o=jg(n,t);m({dragHandleId:e,dragHandleRect:i.getBoundingClientRect(),initialCursorPosition:o,initialLayout:r})},[]),F=k.useCallback(()=>{m(null)},[]),L=k.useCallback(e=>{const{panelDataArray:t}=E.current,n=Xg(t,e);n>=0&&(t.splice(n,1),delete b.current[e.id],E.current.panelDataArrayChanged=!0,v())},[v]),j=k.useMemo(()=>({collapsePanel:S,direction:r,dragState:h,expandPanel:T,getPanelSize:C,getPanelStyle:A,groupId:f,isPanelCollapsed:I,isPanelExpanded:O,reevaluatePanelConstraints:M,registerPanel:N,registerResizeHandle:D,resizePanel:R,startDragging:P,stopDragging:F,unregisterPanel:L,panelGroupElement:p.current}),[S,h,r,T,C,A,f,I,O,M,N,D,R,P,F,L]),B={display:"flex",flexDirection:"horizontal"===r?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return k.createElement(Em.Provider,{value:j},k.createElement(c,{...d,children:t,className:n,id:o,ref:p,style:{...B,...u},[Sm]:"",[km]:r,[Tm]:f}))}const Qg=k.forwardRef((e,t)=>k.createElement(Zg,{...e,forwardedRef:t}));function Xg(e,t){return e.findIndex(e=>e===t||e.id===t.id)}function Jg(e,t,n){const r=Xg(e,t),i=r===e.length-1?[r-1,r]:[r,r+1],o=n[r];return{...t.constraints,panelSize:o,pivotIndices:i}}function ey({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:r,id:i,onBlur:o,onClick:a,onDragging:s,onFocus:l,onPointerDown:u,onPointerUp:c,style:d={},tabIndex:f=0,tagName:p="div",...h}){var m,g;const y=k.useRef(null),v=k.useRef({onClick:a,onDragging:s,onPointerDown:u,onPointerUp:c});k.useEffect(()=>{v.current.onClick=a,v.current.onDragging=s,v.current.onPointerDown=u,v.current.onPointerUp=c});const b=k.useContext(Em);if(null===b)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:w,groupId:_,registerResizeHandle:x,startDragging:E,stopDragging:S,panelGroupElement:T}=b,C=$m(i),[A,I]=k.useState("inactive"),[O,N]=k.useState(!1),[D,R]=k.useState(null),M=k.useRef({state:A});Fm(()=>{M.current.state=A}),k.useEffect(()=>{if(n)R(null);else{const e=x(C);R(()=>e)}},[n,C,x]);const P=null!==(m=null==r?void 0:r.coarse)&&void 0!==m?m:15,F=null!==(g=null==r?void 0:r.fine)&&void 0!==g?g:5;k.useEffect(()=>{if(n||null==D)return;const e=y.current;Sg(e,"Element ref not attached");let t=!1;return function(e,t,n,r,i){var o;const{ownerDocument:a}=t,s={direction:n,element:t,hitAreaMargins:r,setResizeHandlerState:i},l=null!==(o=dg.get(a))&&void 0!==o?o:0;return dg.set(a,l+1),pg.add(s),xg(),function(){var t;fg.delete(e),pg.delete(s);const n=null!==(t=dg.get(a))&&void 0!==t?t:1;if(dg.set(a,n-1),xg(),1===n&&dg.delete(a),ug.includes(s)){const e=ug.indexOf(s);e>=0&&ug.splice(e,1),wg(),i("up",!0,null)}}}(C,e,w,{coarse:P,fine:F},(e,n,r)=>{if(n)switch(e){case"down":{I("drag"),t=!1,Sg(r,'Expected event to be defined for "down" action'),E(C,r);const{onDragging:e,onPointerDown:n}=v.current;null==e||e(!0),null==n||n();break}case"move":{const{state:e}=M.current;t=!0,"drag"!==e&&I("hover"),Sg(r,'Expected event to be defined for "move" action'),D(r);break}case"up":{I("hover"),S();const{onClick:e,onDragging:n,onPointerUp:r}=v.current;null==n||n(!1),null==r||r(),t||null==e||e();break}}else I("inactive")})},[P,w,n,F,x,C,D,E,S]),function({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:r}){k.useEffect(()=>{if(e||null==n||null==r)return;const i=Pg(t,r);if(null==i)return;const o=e=>{if(!e.defaultPrevented)switch(e.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":e.preventDefault(),n(e);break;case"F6":{e.preventDefault();const n=i.getAttribute(Tm);Sg(n,`No group element found for id "${n}"`);const o=Ng(n,r),a=Dg(n,t,r);Sg(null!==a,`No resize element found for id "${t}"`),o[e.shiftKey?a>0?a-1:o.length-1:a+1<o.length?a+1:0].focus();break}}};return i.addEventListener("keydown",o),()=>{i.removeEventListener("keydown",o)}},[r,e,t,n])}({disabled:n,handleId:C,resizeHandler:D,panelGroupElement:T});return k.createElement(p,{...h,children:e,className:t,id:i,onBlur:()=>{N(!1),null==o||o()},onFocus:()=>{N(!0),null==l||l()},ref:y,role:"separator",style:{touchAction:"none",userSelect:"none",...d},tabIndex:f,[km]:w,[Tm]:_,[Nm]:"",[Dm]:"drag"===A?"pointer":O?"keyboard":void 0,[Rm]:!n,[Mm]:C,[Pm]:A})}Zg.displayName="PanelGroup",Qg.displayName="forwardRef(PanelGroup)",ey.displayName="PanelResizeHandle";const ty=({className:e,...t})=>w.jsx(Qg,{className:zn("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",e),...t}),ny=Um,ry=({withHandle:e,className:t,...n})=>w.jsx(ey,{className:zn("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",t),...n,children:e&&w.jsx("div",{className:"bg-border z-20 flex h-4 w-3 items-center justify-center rounded-sm border",children:w.jsx(xt,{className:"h-2.5 w-2.5"})})});function iy(e,[t,n]){return Math.min(n,Math.max(t,e))}var oy=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ay=k.forwardRef((e,t)=>w.jsx(X.span,{...e,ref:t,style:{...oy,...e.style}}));ay.displayName="VisuallyHidden";var sy=ay,ly=[" ","Enter","ArrowUp","ArrowDown"],uy=[" ","Enter"],cy="Select",[dy,fy,py]=B(cy),[hy]=A(cy,[py,wl]),my=wl(),[gy,yy]=hy(cy),[vy,by]=hy(cy),wy=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:l,dir:u,name:c,autoComplete:d,disabled:f,required:p,form:h}=e,m=my(t),[g,y]=k.useState(null),[v,b]=k.useState(null),[_,x]=k.useState(!1),E=_e(u),[S,T]=q({prop:r,defaultProp:i??!1,onChange:o,caller:cy}),[C,A]=q({prop:a,defaultProp:s,onChange:l,caller:cy}),I=k.useRef(null),O=!g||(h||!!g.closest("form")),[N,D]=k.useState(new Set),R=Array.from(N).map(e=>e.props.value).join(";");return w.jsx(Fl,{...m,children:w.jsxs(gy,{required:p,scope:t,trigger:g,onTriggerChange:y,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:_,onValueNodeHasChildrenChange:x,contentId:ie(),value:C,onValueChange:A,open:S,onOpenChange:T,dir:E,triggerPointerDownPosRef:I,disabled:f,children:[w.jsx(dy.Provider,{scope:t,children:w.jsx(vy,{scope:e.__scopeSelect,onNativeOptionAdd:k.useCallback(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:k.useCallback(e=>{D(t=>{const n=new Set(t);return n.delete(e),n})},[]),children:n})}),O?w.jsxs(sv,{"aria-hidden":!0,required:p,tabIndex:-1,name:c,autoComplete:d,value:C,onChange:e=>A(e.target.value),disabled:f,form:h,children:[void 0===C?w.jsx("option",{value:""}):null,Array.from(N)]},R):null]})})};wy.displayName=cy;var _y="SelectTrigger",xy=k.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...i}=e,o=my(n),a=yy(_y,n),s=a.disabled||r,l=D(t,a.onTriggerChange),u=fy(n),c=k.useRef("touch"),[d,f,p]=uv(e=>{const t=u().filter(e=>!e.disabled),n=t.find(e=>e.value===a.value),r=cv(t,e,n);void 0!==r&&a.onValueChange(r.value)}),h=e=>{s||(a.onOpenChange(!0),p()),e&&(a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return w.jsx(Ll,{asChild:!0,...o,children:w.jsx(X.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":lv(a.value)?"":void 0,...i,ref:l,onClick:$(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==c.current&&h(e)}),onPointerDown:$(i.onPointerDown,e=>{c.current=e.pointerType;const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(h(e),e.preventDefault())}),onKeyDown:$(i.onKeyDown,e=>{const t=""!==d.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||f(e.key),t&&" "===e.key||ly.includes(e.key)&&(h(),e.preventDefault())})})})});xy.displayName=_y;var Ey="SelectValue",Sy=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:a="",...s}=e,l=yy(Ey,n),{onValueNodeHasChildrenChange:u}=l,c=void 0!==o,d=D(t,l.onValueNodeChange);return z(()=>{u(c)},[u,c]),w.jsx(X.span,{...s,ref:d,style:{pointerEvents:"none"},children:lv(l.value)?w.jsx(w.Fragment,{children:a}):o})});Sy.displayName=Ey;var ky=k.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...i}=e;return w.jsx(X.span,{"aria-hidden":!0,...i,ref:t,children:r||"▼"})});ky.displayName="SelectIcon";var Ty=e=>w.jsx(Xr,{asChild:!0,...e});Ty.displayName="SelectPortal";var Cy="SelectContent",Ay=k.forwardRef((e,t)=>{const n=yy(Cy,e.__scopeSelect),[r,i]=k.useState();if(z(()=>{i(new DocumentFragment)},[]),!n.open){const t=r;return t?Z.createPortal(w.jsx(Oy,{scope:e.__scopeSelect,children:w.jsx(dy.Slot,{scope:e.__scopeSelect,children:w.jsx("div",{children:e.children})})}),t):null}return w.jsx(Ry,{...e,ref:t})});Ay.displayName=Cy;var Iy=10,[Oy,Ny]=hy(Cy),Dy=R("SelectContent.RemoveScroll"),Ry=k.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:h,hideWhenDetached:m,avoidCollisions:g,...y}=e,v=yy(Cy,n),[b,_]=k.useState(null),[x,E]=k.useState(null),S=D(t,e=>_(e)),[T,C]=k.useState(null),[A,I]=k.useState(null),O=fy(n),[N,R]=k.useState(!1),M=k.useRef(!1);k.useEffect(()=>{if(b)return to(b)},[b]),ei();const P=k.useCallback(e=>{const[t,...n]=O().map(e=>e.ref.current),[r]=n.slice(-1),i=document.activeElement;for(const o of e){if(o===i)return;if(null==o||o.scrollIntoView({block:"nearest"}),o===t&&x&&(x.scrollTop=0),o===r&&x&&(x.scrollTop=x.scrollHeight),null==o||o.focus(),document.activeElement!==i)return}},[O,x]),F=k.useCallback(()=>P([T,b]),[P,T,b]);k.useEffect(()=>{N&&F()},[N,F]);const{onOpenChange:L,triggerPointerDownPosRef:j}=v;k.useEffect(()=>{if(b){let e={x:0,y:0};const t=t=>{var n,r;e={x:Math.abs(Math.round(t.pageX)-((null==(n=j.current)?void 0:n.x)??0)),y:Math.abs(Math.round(t.pageY)-((null==(r=j.current)?void 0:r.y)??0))}},n=n=>{e.x<=10&&e.y<=10?n.preventDefault():b.contains(n.target)||L(!1),document.removeEventListener("pointermove",t),j.current=null};return null!==j.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",n,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",n,{capture:!0})}}},[b,L,j]),k.useEffect(()=>{const e=()=>L(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[L]);const[B,z]=uv(e=>{const t=O().filter(e=>!e.disabled),n=t.find(e=>e.ref.current===document.activeElement),r=cv(t,e,n);r&&setTimeout(()=>r.ref.current.focus())}),U=k.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==v.value&&v.value===t||r)&&(C(e),r&&(M.current=!0))},[v.value]),q=k.useCallback(()=>null==b?void 0:b.focus(),[b]),H=k.useCallback((e,t,n)=>{const r=!M.current&&!n;(void 0!==v.value&&v.value===t||r)&&I(e)},[v.value]),V="popper"===r?Py:My,W=V===Py?{side:s,sideOffset:l,align:u,alignOffset:c,arrowPadding:d,collisionBoundary:f,collisionPadding:p,sticky:h,hideWhenDetached:m,avoidCollisions:g}:{};return w.jsx(Oy,{scope:n,content:b,viewport:x,onViewportChange:E,itemRefCallback:U,selectedItem:T,onItemLeave:q,itemTextRefCallback:H,focusSelectedItem:F,selectedItemText:A,position:r,isPositioned:N,searchRef:B,children:w.jsx(Yi,{as:Dy,allowPinchZoom:!0,children:w.jsx(Vr,{asChild:!0,trapped:v.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:$(i,e=>{var t;null==(t=v.trigger)||t.focus({preventScroll:!0}),e.preventDefault()}),children:w.jsx(Fr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>v.onOpenChange(!1),children:w.jsx(V,{role:"listbox",id:v.contentId,"data-state":v.open?"open":"closed",dir:v.dir,onContextMenu:e=>e.preventDefault(),...y,...W,onPlaced:()=>R(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:$(y.onKeyDown,e=>{const t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||z(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=O().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){const n=e.target,r=t.indexOf(n);t=t.slice(r+1)}setTimeout(()=>P(t)),e.preventDefault()}})})})})})})});Ry.displayName="SelectContentImpl";var My=k.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...i}=e,o=yy(Cy,n),a=Ny(Cy,n),[s,l]=k.useState(null),[u,c]=k.useState(null),d=D(t,e=>c(e)),f=fy(n),p=k.useRef(!1),h=k.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:y,focusSelectedItem:v}=a,b=k.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&u&&m&&g&&y){const e=o.trigger.getBoundingClientRect(),t=u.getBoundingClientRect(),n=o.valueNode.getBoundingClientRect(),i=y.getBoundingClientRect();if("rtl"!==o.dir){const r=i.left-t.left,o=n.left-r,a=e.left-o,l=e.width+a,u=Math.max(l,t.width),c=window.innerWidth-Iy,d=iy(o,[Iy,Math.max(Iy,c-u)]);s.style.minWidth=l+"px",s.style.left=d+"px"}else{const r=t.right-i.right,o=window.innerWidth-n.right-r,a=window.innerWidth-e.right-o,l=e.width+a,u=Math.max(l,t.width),c=window.innerWidth-Iy,d=iy(o,[Iy,Math.max(Iy,c-u)]);s.style.minWidth=l+"px",s.style.right=d+"px"}const a=f(),l=window.innerHeight-2*Iy,c=m.scrollHeight,d=window.getComputedStyle(u),h=parseInt(d.borderTopWidth,10),v=parseInt(d.paddingTop,10),b=parseInt(d.borderBottomWidth,10),w=h+v+c+parseInt(d.paddingBottom,10)+b,_=Math.min(5*g.offsetHeight,w),x=window.getComputedStyle(m),E=parseInt(x.paddingTop,10),S=parseInt(x.paddingBottom,10),k=e.top+e.height/2-Iy,T=l-k,C=g.offsetHeight/2,A=h+v+(g.offsetTop+C),I=w-A;if(A<=k){const e=a.length>0&&g===a[a.length-1].ref.current;s.style.bottom="0px";const t=u.clientHeight-m.offsetTop-m.offsetHeight,n=A+Math.max(T,C+(e?S:0)+t+b);s.style.height=n+"px"}else{const e=a.length>0&&g===a[0].ref.current;s.style.top="0px";const t=Math.max(k,h+m.offsetTop+(e?E:0)+C)+I;s.style.height=t+"px",m.scrollTop=A-k+m.offsetTop}s.style.margin=`${Iy}px 0`,s.style.minHeight=_+"px",s.style.maxHeight=l+"px",null==r||r(),requestAnimationFrame(()=>p.current=!0)}},[f,o.trigger,o.valueNode,s,u,m,g,y,o.dir,r]);z(()=>b(),[b]);const[_,x]=k.useState();z(()=>{u&&x(window.getComputedStyle(u).zIndex)},[u]);const E=k.useCallback(e=>{e&&!0===h.current&&(b(),null==v||v(),h.current=!1)},[b,v]);return w.jsx(Fy,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:p,onScrollButtonChange:E,children:w.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_},children:w.jsx(X.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});My.displayName="SelectItemAlignedPosition";var Py=k.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Iy,...o}=e,a=my(n);return w.jsx(jl,{...a,...o,ref:t,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Py.displayName="SelectPopperPosition";var[Fy,Ly]=hy(Cy,{}),jy="SelectViewport",By=k.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...i}=e,o=Ny(jy,n),a=Ly(jy,n),s=D(t,o.onViewportChange),l=k.useRef(0);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),w.jsx(dy.Slot,{scope:n,children:w.jsx(X.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:$(i.onScroll,e=>{const t=e.currentTarget,{contentWrapper:n,shouldExpandOnScrollRef:r}=a;if((null==r?void 0:r.current)&&n){const e=Math.abs(l.current-t.scrollTop);if(e>0){const r=window.innerHeight-2*Iy,i=parseFloat(n.style.minHeight),o=parseFloat(n.style.height),a=Math.max(i,o);if(a<r){const i=a+e,o=Math.min(r,i),s=i-o;n.style.height=o+"px","0px"===n.style.bottom&&(t.scrollTop=s>0?s:0,n.style.justifyContent="flex-end")}}}l.current=t.scrollTop})})})]})});By.displayName=jy;var $y="SelectGroup",[zy,Uy]=hy($y),qy=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=ie();return w.jsx(zy,{scope:n,id:i,children:w.jsx(X.div,{role:"group","aria-labelledby":i,...r,ref:t})})});qy.displayName=$y;var Hy="SelectLabel",Vy=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=Uy(Hy,n);return w.jsx(X.div,{id:i.id,...r,ref:t})});Vy.displayName=Hy;var Wy="SelectItem",[Gy,Yy]=hy(Wy),Ky=k.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...a}=e,s=yy(Wy,n),l=Ny(Wy,n),u=s.value===r,[c,d]=k.useState(o??""),[f,p]=k.useState(!1),h=D(t,e=>{var t;return null==(t=l.itemRefCallback)?void 0:t.call(l,e,r,i)}),m=ie(),g=k.useRef("touch"),y=()=>{i||(s.onValueChange(r),s.onOpenChange(!1))};if(""===r)throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return w.jsx(Gy,{scope:n,value:r,disabled:i,textId:m,isSelected:u,onItemTextChange:k.useCallback(e=>{d(t=>t||((null==e?void 0:e.textContent)??"").trim())},[]),children:w.jsx(dy.ItemSlot,{scope:n,value:r,disabled:i,textValue:c,children:w.jsx(X.div,{role:"option","aria-labelledby":m,"data-highlighted":f?"":void 0,"aria-selected":u&&f,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:h,onFocus:$(a.onFocus,()=>p(!0)),onBlur:$(a.onBlur,()=>p(!1)),onClick:$(a.onClick,()=>{"mouse"!==g.current&&y()}),onPointerUp:$(a.onPointerUp,()=>{"mouse"===g.current&&y()}),onPointerDown:$(a.onPointerDown,e=>{g.current=e.pointerType}),onPointerMove:$(a.onPointerMove,e=>{var t;g.current=e.pointerType,i?null==(t=l.onItemLeave)||t.call(l):"mouse"===g.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$(a.onPointerLeave,e=>{var t;e.currentTarget===document.activeElement&&(null==(t=l.onItemLeave)||t.call(l))}),onKeyDown:$(a.onKeyDown,e=>{var t;""!==(null==(t=l.searchRef)?void 0:t.current)&&" "===e.key||(uy.includes(e.key)&&y()," "===e.key&&e.preventDefault())})})})})});Ky.displayName=Wy;var Zy="SelectItemText",Qy=k.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:i,...o}=e,a=yy(Zy,n),s=Ny(Zy,n),l=Yy(Zy,n),u=by(Zy,n),[c,d]=k.useState(null),f=D(t,e=>d(e),l.onItemTextChange,e=>{var t;return null==(t=s.itemTextRefCallback)?void 0:t.call(s,e,l.value,l.disabled)}),p=null==c?void 0:c.textContent,h=k.useMemo(()=>w.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=u;return z(()=>(m(h),()=>g(h)),[m,g,h]),w.jsxs(w.Fragment,{children:[w.jsx(X.span,{id:l.textId,...o,ref:f}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?Z.createPortal(o.children,a.valueNode):null]})});Qy.displayName=Zy;var Xy="SelectItemIndicator",Jy=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Yy(Xy,n).isSelected?w.jsx(X.span,{"aria-hidden":!0,...r,ref:t}):null});Jy.displayName=Xy;var ev="SelectScrollUpButton",tv=k.forwardRef((e,t)=>{const n=Ny(ev,e.__scopeSelect),r=Ly(ev,e.__scopeSelect),[i,o]=k.useState(!1),a=D(t,r.onScrollButtonChange);return z(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollTop>0;o(e)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?w.jsx(iv,{...e,ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});tv.displayName=ev;var nv="SelectScrollDownButton",rv=k.forwardRef((e,t)=>{const n=Ny(nv,e.__scopeSelect),r=Ly(nv,e.__scopeSelect),[i,o]=k.useState(!1),a=D(t,r.onScrollButtonChange);return z(()=>{if(n.viewport&&n.isPositioned){let e=function(){const e=t.scrollHeight-t.clientHeight,n=Math.ceil(t.scrollTop)<e;o(n)};const t=n.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[n.viewport,n.isPositioned]),i?w.jsx(iv,{...e,ref:a,onAutoScroll:()=>{const{viewport:e,selectedItem:t}=n;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});rv.displayName=nv;var iv=k.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=e,o=Ny("SelectScrollButton",n),a=k.useRef(null),s=fy(n),l=k.useCallback(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return k.useEffect(()=>()=>l(),[l]),z(()=>{var e;const t=s().find(e=>e.ref.current===document.activeElement);null==(e=null==t?void 0:t.ref.current)||e.scrollIntoView({block:"nearest"})},[s]),w.jsx(X.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:$(i.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(r,50))}),onPointerMove:$(i.onPointerMove,()=>{var e;null==(e=o.onItemLeave)||e.call(o),null===a.current&&(a.current=window.setInterval(r,50))}),onPointerLeave:$(i.onPointerLeave,()=>{l()})})}),ov=k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return w.jsx(X.div,{"aria-hidden":!0,...r,ref:t})});ov.displayName="SelectSeparator";var av="SelectArrow";k.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,i=my(n),o=yy(av,n),a=Ny(av,n);return o.open&&"popper"===a.position?w.jsx(Bl,{...i,...r,ref:t}):null}).displayName=av;var sv=k.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const i=k.useRef(null),o=D(r,i),a=or(t);return k.useEffect(()=>{const e=i.current;if(!e)return;const n=window.HTMLSelectElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(a!==t&&r){const n=new Event("change",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[a,t]),w.jsx(X.select,{...n,style:{...oy,...n.style},ref:o,defaultValue:t})});function lv(e){return""===e||void 0===e}function uv(e){const t=Or(e),n=k.useRef(""),r=k.useRef(0),i=k.useCallback(e=>{const i=n.current+e;t(i),function e(t){n.current=t,window.clearTimeout(r.current),""!==t&&(r.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),o=k.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function cv(e,t,n){const r=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=(a=e,s=Math.max(i,0),a.map((e,t)=>a[(s+t)%a.length]));var a,s;1===r.length&&(o=o.filter(e=>e!==n));const l=o.find(e=>e.textValue.toLowerCase().startsWith(r.toLowerCase()));return l!==n?l:void 0}sv.displayName="SelectBubbleInput";var dv=xy,fv=ky,pv=Ty,hv=Ay,mv=By,gv=Vy,yv=Ky,vv=Qy,bv=Jy,wv=tv,_v=rv,xv=ov;const Ev=wy,Sv=qy,kv=Sy,Tv=k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(dv,{ref:r,className:zn("border-input ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...n,children:[t,w.jsx(fv,{asChild:!0,children:w.jsx(st,{className:"h-4 w-4 opacity-50"})})]}));Tv.displayName=dv.displayName;const Cv=k.forwardRef(({className:e,...t},n)=>w.jsx(wv,{ref:n,className:zn("flex cursor-default items-center justify-center py-1",e),...t,children:w.jsx(ut,{className:"h-4 w-4"})}));Cv.displayName=wv.displayName;const Av=k.forwardRef(({className:e,...t},n)=>w.jsx(_v,{ref:n,className:zn("flex cursor-default items-center justify-center py-1",e),...t,children:w.jsx(st,{className:"h-4 w-4"})}));Av.displayName=_v.displayName;const Iv=k.forwardRef(({className:e,children:t,position:n="popper",...r},i)=>w.jsx(pv,{children:w.jsxs(hv,{ref:i,className:zn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[w.jsx(Cv,{}),w.jsx(mv,{className:zn("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),w.jsx(Av,{})]})}));Iv.displayName=hv.displayName;const Ov=k.forwardRef(({className:e,...t},n)=>w.jsx(gv,{ref:n,className:zn("px-2 py-1.5 text-sm font-semibold",e),...t}));Ov.displayName=gv.displayName;const Nv=k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(yv,{ref:r,className:zn("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[w.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:w.jsx(bv,{children:w.jsx(at,{className:"h-4 w-4"})})}),w.jsx(vv,{children:t})]}));Nv.displayName=yv.displayName;const Dv=k.forwardRef(({className:e,...t},n)=>w.jsx(xv,{ref:n,className:zn("bg-muted -mx-1 my-1 h-px",e),...t}));Dv.displayName=xv.displayName;var Rv="ScrollArea",[Mv]=A(Rv),[Pv,Fv]=Mv(Rv),Lv=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:i,scrollHideDelay:o=600,...a}=e,[s,l]=k.useState(null),[u,c]=k.useState(null),[d,f]=k.useState(null),[p,h]=k.useState(null),[m,g]=k.useState(null),[y,v]=k.useState(0),[b,_]=k.useState(0),[x,E]=k.useState(!1),[S,T]=k.useState(!1),C=D(t,e=>l(e)),A=_e(i);return w.jsx(Pv,{scope:n,type:r,dir:A,scrollHideDelay:o,scrollArea:s,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:p,onScrollbarXChange:h,scrollbarXEnabled:x,onScrollbarXEnabledChange:E,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:T,onCornerWidthChange:v,onCornerHeightChange:_,children:w.jsx(X.div,{dir:A,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":b+"px",...e.style}})})});Lv.displayName=Rv;var jv="ScrollAreaViewport",Bv=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:i,...o}=e,a=Fv(jv,n),s=D(t,k.useRef(null),a.onViewportChange);return w.jsxs(w.Fragment,{children:[w.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),w.jsx(X.div,{"data-radix-scroll-area-viewport":"",...o,ref:s,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...e.style},children:w.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Bv.displayName=jv;var $v="ScrollAreaScrollbar",zv=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fv($v,e.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=i,s="horizontal"===e.orientation;return k.useEffect(()=>(s?o(!0):a(!0),()=>{s?o(!1):a(!1)}),[s,o,a]),"hover"===i.type?w.jsx(Uv,{...r,ref:t,forceMount:n}):"scroll"===i.type?w.jsx(qv,{...r,ref:t,forceMount:n}):"auto"===i.type?w.jsx(Hv,{...r,ref:t,forceMount:n}):"always"===i.type?w.jsx(Vv,{...r,ref:t}):null});zv.displayName=$v;var Uv=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fv($v,e.__scopeScrollArea),[o,a]=k.useState(!1);return k.useEffect(()=>{const e=i.scrollArea;let t=0;if(e){const n=()=>{window.clearTimeout(t),a(!0)},r=()=>{t=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return e.addEventListener("pointerenter",n),e.addEventListener("pointerleave",r),()=>{window.clearTimeout(t),e.removeEventListener("pointerenter",n),e.removeEventListener("pointerleave",r)}}},[i.scrollArea,i.scrollHideDelay]),w.jsx(ee,{present:n||o,children:w.jsx(Hv,{"data-state":o?"visible":"hidden",...r,ref:t})})}),qv=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fv($v,e.__scopeScrollArea),o="horizontal"===e.orientation,a=cb(()=>l("SCROLL_END"),100),[s,l]=(u="hidden",c={hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}},k.useReducer((e,t)=>c[e][t]??e,u));var u,c;return k.useEffect(()=>{if("idle"===s){const e=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(e)}},[s,i.scrollHideDelay,l]),k.useEffect(()=>{const e=i.viewport,t=o?"scrollLeft":"scrollTop";if(e){let n=e[t];const r=()=>{const r=e[t];n!==r&&(l("SCROLL"),a()),n=r};return e.addEventListener("scroll",r),()=>e.removeEventListener("scroll",r)}},[i.viewport,o,l,a]),w.jsx(ee,{present:n||"hidden"!==s,children:w.jsx(Vv,{"data-state":"hidden"===s?"hidden":"visible",...r,ref:t,onPointerEnter:$(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:$(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),Hv=k.forwardRef((e,t)=>{const n=Fv($v,e.__scopeScrollArea),{forceMount:r,...i}=e,[o,a]=k.useState(!1),s="horizontal"===e.orientation,l=cb(()=>{if(n.viewport){const e=n.viewport.offsetWidth<n.viewport.scrollWidth,t=n.viewport.offsetHeight<n.viewport.scrollHeight;a(s?e:t)}},10);return db(n.viewport,l),db(n.content,l),w.jsx(ee,{present:r||o,children:w.jsx(Vv,{"data-state":o?"visible":"hidden",...i,ref:t})})}),Vv=k.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,i=Fv($v,e.__scopeScrollArea),o=k.useRef(null),a=k.useRef(0),[s,l]=k.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=ib(s.viewport,s.content),c={...r,sizes:s,onSizesChange:l,hasThumb:Boolean(u>0&&u<1),onThumbChange:e=>o.current=e,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:e=>a.current=e};function d(e,t){return function(e,t,n,r="ltr"){const i=ob(n),o=i/2,a=t||o,s=i-a,l=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-s,c=n.content-n.viewport,d="ltr"===r?[0,c]:[-1*c,0];return sb([l,u],d)(e)}(e,a.current,s,t)}return"horizontal"===n?w.jsx(Wv,{...c,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const e=ab(i.viewport.scrollLeft,s,i.dir);o.current.style.transform=`translate3d(${e}px, 0, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollLeft=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollLeft=d(e,i.dir))}}):"vertical"===n?w.jsx(Gv,{...c,ref:t,onThumbPositionChange:()=>{if(i.viewport&&o.current){const e=ab(i.viewport.scrollTop,s);o.current.style.transform=`translate3d(0, ${e}px, 0)`}},onWheelScroll:e=>{i.viewport&&(i.viewport.scrollTop=e)},onDragScroll:e=>{i.viewport&&(i.viewport.scrollTop=d(e))}}):null}),Wv=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Fv($v,e.__scopeScrollArea),[a,s]=k.useState(),l=k.useRef(null),u=D(t,l,o.onScrollbarXChange);return k.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),w.jsx(Zv,{"data-orientation":"horizontal",...i,ref:u,sizes:n,style:{bottom:0,left:"rtl"===o.dir?"var(--radix-scroll-area-corner-width)":0,right:"ltr"===o.dir?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":ob(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.x),onDragScroll:t=>e.onDragScroll(t.x),onWheelScroll:(t,n)=>{if(o.viewport){const r=o.viewport.scrollLeft+t.deltaX;e.onWheelScroll(r),lb(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:rb(a.paddingLeft),paddingEnd:rb(a.paddingRight)}})}})}),Gv=k.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...i}=e,o=Fv($v,e.__scopeScrollArea),[a,s]=k.useState(),l=k.useRef(null),u=D(t,l,o.onScrollbarYChange);return k.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),w.jsx(Zv,{"data-orientation":"vertical",...i,ref:u,sizes:n,style:{top:0,right:"ltr"===o.dir?0:void 0,left:"rtl"===o.dir?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":ob(n)+"px",...e.style},onThumbPointerDown:t=>e.onThumbPointerDown(t.y),onDragScroll:t=>e.onDragScroll(t.y),onWheelScroll:(t,n)=>{if(o.viewport){const r=o.viewport.scrollTop+t.deltaY;e.onWheelScroll(r),lb(r,n)&&t.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:rb(a.paddingTop),paddingEnd:rb(a.paddingBottom)}})}})}),[Yv,Kv]=Mv($v),Zv=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:i,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:c,onResize:d,...f}=e,p=Fv($v,n),[h,m]=k.useState(null),g=D(t,e=>m(e)),y=k.useRef(null),v=k.useRef(""),b=p.viewport,_=r.content-r.viewport,x=Or(c),E=Or(l),S=cb(d,10);function T(e){if(y.current){const t=e.clientX-y.current.left,n=e.clientY-y.current.top;u({x:t,y:n})}}return k.useEffect(()=>{const e=e=>{const t=e.target;(null==h?void 0:h.contains(t))&&x(e,_)};return document.addEventListener("wheel",e,{passive:!1}),()=>document.removeEventListener("wheel",e,{passive:!1})},[b,h,_,x]),k.useEffect(E,[r,E]),db(h,S),db(p.content,S),w.jsx(Yv,{scope:n,scrollbar:h,hasThumb:i,onThumbChange:Or(o),onThumbPointerUp:Or(a),onThumbPositionChange:E,onThumbPointerDown:Or(s),children:w.jsx(X.div,{...f,ref:g,style:{position:"absolute",...f.style},onPointerDown:$(e.onPointerDown,e=>{if(0===e.button){e.target.setPointerCapture(e.pointerId),y.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),T(e)}}),onPointerMove:$(e.onPointerMove,T),onPointerUp:$(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),document.body.style.webkitUserSelect=v.current,p.viewport&&(p.viewport.style.scrollBehavior=""),y.current=null})})})}),Qv="ScrollAreaThumb",Xv=k.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Kv(Qv,e.__scopeScrollArea);return w.jsx(ee,{present:n||i.hasThumb,children:w.jsx(Jv,{ref:t,...r})})}),Jv=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...i}=e,o=Fv(Qv,n),a=Kv(Qv,n),{onThumbPositionChange:s}=a,l=D(t,e=>a.onThumbChange(e)),u=k.useRef(void 0),c=cb(()=>{u.current&&(u.current(),u.current=void 0)},100);return k.useEffect(()=>{const e=o.viewport;if(e){const t=()=>{if(c(),!u.current){const t=ub(e,s);u.current=t,s()}};return s(),e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}},[o.viewport,c,s]),w.jsx(X.div,{"data-state":a.hasThumb?"visible":"hidden",...i,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:$(e.onPointerDownCapture,e=>{const t=e.target.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;a.onThumbPointerDown({x:n,y:r})}),onPointerUp:$(e.onPointerUp,a.onThumbPointerUp)})});Xv.displayName=Qv;var eb="ScrollAreaCorner",tb=k.forwardRef((e,t)=>{const n=Fv(eb,e.__scopeScrollArea),r=Boolean(n.scrollbarX&&n.scrollbarY);return"scroll"!==n.type&&r?w.jsx(nb,{...e,ref:t}):null});tb.displayName=eb;var nb=k.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,i=Fv(eb,n),[o,a]=k.useState(0),[s,l]=k.useState(0),u=Boolean(o&&s);return db(i.scrollbarX,()=>{var e;const t=(null==(e=i.scrollbarX)?void 0:e.offsetHeight)||0;i.onCornerHeightChange(t),l(t)}),db(i.scrollbarY,()=>{var e;const t=(null==(e=i.scrollbarY)?void 0:e.offsetWidth)||0;i.onCornerWidthChange(t),a(t)}),u?w.jsx(X.div,{...r,ref:t,style:{width:o,height:s,position:"absolute",right:"ltr"===i.dir?0:void 0,left:"rtl"===i.dir?0:void 0,bottom:0,...e.style}}):null});function rb(e){return e?parseInt(e,10):0}function ib(e,t){const n=e/t;return isNaN(n)?0:n}function ob(e){const t=ib(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ab(e,t,n="ltr"){const r=ob(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=t.scrollbar.size-i,a=t.content-t.viewport,s=o-r,l=iy(e,"ltr"===n?[0,a]:[-1*a,0]);return sb([0,a],[0,s])(l)}function sb(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lb(e,t){return e>0&&e<t}var ub=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const o={left:e.scrollLeft,top:e.scrollTop},a=n.left!==o.left,s=n.top!==o.top;(a||s)&&t(),n=o,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)};function cb(e,t){const n=Or(e),r=k.useRef(0);return k.useEffect(()=>()=>window.clearTimeout(r.current),[]),k.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function db(e,t){const n=Or(t);z(()=>{let t=0;if(e){const r=new ResizeObserver(()=>{cancelAnimationFrame(t),t=window.requestAnimationFrame(n)});return r.observe(e),()=>{window.cancelAnimationFrame(t),r.unobserve(e)}}},[e,n])}var fb=Lv,pb=Bv,hb=tb;const mb=k.forwardRef(({className:e,children:t,...n},r)=>w.jsxs(fb,{ref:r,className:zn("relative overflow-hidden",e),...n,children:[w.jsx(pb,{className:"h-full w-full rounded-[inherit]",children:t}),w.jsx(gb,{}),w.jsx(hb,{})]}));mb.displayName=fb.displayName;const gb=k.forwardRef(({className:e,orientation:t="vertical",...n},r)=>w.jsx(zv,{ref:r,orientation:t,className:zn("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...n,children:w.jsx(Xv,{className:"bg-border relative flex-1 rounded-full"})}));gb.displayName=zv.displayName;var yb="horizontal",vb=["horizontal","vertical"],bb=k.forwardRef((e,t)=>{const{decorative:n,orientation:r=yb,...i}=e,o=function(e){return vb.includes(e)}(r)?r:yb,a=n?{role:"none"}:{"aria-orientation":"vertical"===o?o:void 0,role:"separator"};return w.jsx(X.div,{"data-orientation":o,...a,...i,ref:t})});bb.displayName="Separator";var wb=bb;k.forwardRef(({className:e,orientation:t="horizontal",decorative:n=!0,...r},i)=>w.jsx(wb,{ref:i,decorative:n,orientation:t,className:zn("bg-border shrink-0","horizontal"===t?"h-[1px] w-full":"h-full w-[1px]",e),...r})).displayName=wb.displayName;const _b=Po,xb=k.forwardRef(({className:e,...t},n)=>w.jsx(Fo,{className:zn("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",e),...t,ref:n}));xb.displayName=Fo.displayName;const Eb=Hn("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}});k.forwardRef(({side:e="right",className:t,children:n,...r},i)=>w.jsxs(_b,{children:[w.jsx(xb,{}),w.jsxs(Lo,{ref:i,className:zn(Eb({side:e}),t),...r,children:[w.jsxs($o,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:[w.jsx(Vt,{className:"h-4 w-4"}),w.jsx("span",{className:"sr-only",children:"Close"})]}),n]})]})).displayName=Lo.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(jo,{ref:n,className:zn("text-foreground text-lg font-semibold",e),...t})).displayName=jo.displayName;function Sb({className:e,...t}){return w.jsx("div",{className:zn("bg-primary/10 animate-pulse rounded-md",e),...t})}k.forwardRef(({className:e,...t},n)=>w.jsx(Bo,{ref:n,className:zn("text-muted-foreground text-sm",e),...t})).displayName=Bo.displayName;const kb=({n:e=3,staggeringDelay:t=200,rowHeight:n="20px",className:r})=>{const[i,o]=k.useState(0);return k.useEffect(()=>{if(i>=e)return;const n=setTimeout(()=>{o(i+1)},t);return()=>clearTimeout(n)},[i,e,t]),w.jsx("div",{className:zn("flex w-full flex-col justify-center",r),children:w.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:e}).map((e,t)=>t<i?w.jsx(Sb,{className:"w-full",style:{height:n}},t):w.jsx("div",{style:{height:n}},t))})})};var Tb=["PageUp","PageDown"],Cb=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ab={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ib="Slider",[Ob,Nb,Db]=B(Ib),[Rb]=A(Ib,[Db]),[Mb,Pb]=Rb(Ib),Fb=k.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:a="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:c,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:p=!1,form:h,...m}=e,g=k.useRef(new Set),y=k.useRef(0),v="horizontal"===a?Bb:$b,[b=[],_]=q({prop:c,defaultProp:u,onChange:e=>{var t;null==(t=[...g.current][y.current])||t.focus(),d(e)}}),x=k.useRef(b);function E(e,t,{commit:n}={commit:!1}){const a=function(e){return(String(e).split(".")[1]||"").length}(o),s=function(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}(Math.round((e-r)/o)*o+r,a),u=iy(s,[r,i]);_((e=[])=>{const r=function(e=[],t,n){const r=[...e];return r[n]=t,r.sort((e,t)=>e-t)}(e,u,t);if(function(e,t){if(t>0){const n=function(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}(e);return Math.min(...n)>=t}return!0}(r,l*o)){y.current=r.indexOf(u);const t=String(r)!==String(e);return t&&n&&f(r),t?r:e}return e})}return w.jsx(Mb,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:i,valueIndexToChangeRef:y,thumbs:g.current,values:b,orientation:a,form:h,children:w.jsx(Ob.Provider,{scope:e.__scopeSlider,children:w.jsx(Ob.Slot,{scope:e.__scopeSlider,children:w.jsx(v,{"aria-disabled":s,"data-disabled":s?"":void 0,...m,ref:t,onPointerDown:$(m.onPointerDown,()=>{s||(x.current=b)}),min:r,max:i,inverted:p,onSlideStart:s?void 0:function(e){const t=function(e,t){if(1===e.length)return 0;const n=e.map(e=>Math.abs(e-t)),r=Math.min(...n);return n.indexOf(r)}(b,e);E(e,t)},onSlideMove:s?void 0:function(e){E(e,y.current)},onSlideEnd:s?void 0:function(){const e=x.current[y.current];b[y.current]!==e&&f(b)},onHomeKeyDown:()=>!s&&E(r,0,{commit:!0}),onEndKeyDown:()=>!s&&E(i,b.length-1,{commit:!0}),onStepKeyDown:({event:e,direction:t})=>{if(!s){const n=Tb.includes(e.key)||e.shiftKey&&Cb.includes(e.key)?10:1,r=y.current;E(b[r]+o*n*t,r,{commit:!0})}}})})})})});Fb.displayName=Ib;var[Lb,jb]=Rb(Ib,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Bb=k.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:a,onSlideMove:s,onSlideEnd:l,onStepKeyDown:u,...c}=e,[d,f]=k.useState(null),p=D(t,e=>f(e)),h=k.useRef(void 0),m=_e(i),g="ltr"===m,y=g&&!o||!g&&o;function v(e){const t=h.current||d.getBoundingClientRect(),i=Qb([0,t.width],y?[n,r]:[r,n]);return h.current=t,i(e-t.left)}return w.jsx(Lb,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:w.jsx(zb,{dir:m,"data-orientation":"horizontal",...c,ref:p,style:{...c.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:e=>{const t=v(e.clientX);null==a||a(t)},onSlideMove:e=>{const t=v(e.clientX);null==s||s(t)},onSlideEnd:()=>{h.current=void 0,null==l||l()},onStepKeyDown:e=>{const t=Ab[y?"from-left":"from-right"].includes(e.key);null==u||u({event:e,direction:t?-1:1})}})})}),$b=k.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:a,onSlideEnd:s,onStepKeyDown:l,...u}=e,c=k.useRef(null),d=D(t,c),f=k.useRef(void 0),p=!i;function h(e){const t=f.current||c.current.getBoundingClientRect(),i=Qb([0,t.height],p?[r,n]:[n,r]);return f.current=t,i(e-t.top)}return w.jsx(Lb,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:w.jsx(zb,{"data-orientation":"vertical",...u,ref:d,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:e=>{const t=h(e.clientY);null==o||o(t)},onSlideMove:e=>{const t=h(e.clientY);null==a||a(t)},onSlideEnd:()=>{f.current=void 0,null==s||s()},onStepKeyDown:e=>{const t=Ab[p?"from-bottom":"from-top"].includes(e.key);null==l||l({event:e,direction:t?-1:1})}})})}),zb=k.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:s,onStepKeyDown:l,...u}=e,c=Pb(Ib,n);return w.jsx(X.span,{...u,ref:t,onKeyDown:$(e.onKeyDown,e=>{"Home"===e.key?(a(e),e.preventDefault()):"End"===e.key?(s(e),e.preventDefault()):Tb.concat(Cb).includes(e.key)&&(l(e),e.preventDefault())}),onPointerDown:$(e.onPointerDown,e=>{const t=e.target;t.setPointerCapture(e.pointerId),e.preventDefault(),c.thumbs.has(t)?t.focus():r(e)}),onPointerMove:$(e.onPointerMove,e=>{e.target.hasPointerCapture(e.pointerId)&&i(e)}),onPointerUp:$(e.onPointerUp,e=>{const t=e.target;t.hasPointerCapture(e.pointerId)&&(t.releasePointerCapture(e.pointerId),o(e))})})}),Ub="SliderTrack",qb=k.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=Pb(Ub,n);return w.jsx(X.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});qb.displayName=Ub;var Hb="SliderRange",Vb=k.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=Pb(Hb,n),o=jb(Hb,n),a=D(t,k.useRef(null)),s=i.values.length,l=i.values.map(e=>Zb(e,i.min,i.max)),u=s>1?Math.min(...l):0,c=100-Math.max(...l);return w.jsx(X.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:c+"%"}})});Vb.displayName=Hb;var Wb="SliderThumb",Gb=k.forwardRef((e,t)=>{const n=Nb(e.__scopeSlider),[r,i]=k.useState(null),o=D(t,e=>i(e)),a=k.useMemo(()=>r?n().findIndex(e=>e.ref.current===r):-1,[n,r]);return w.jsx(Yb,{...e,ref:o,index:a})}),Yb=k.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...o}=e,a=Pb(Wb,n),s=jb(Wb,n),[l,u]=k.useState(null),c=D(t,e=>u(e)),d=!l||(a.form||!!l.closest("form")),f=ar(l),p=a.values[r],h=void 0===p?0:Zb(p,a.min,a.max),m=function(e,t){return t>2?`Value ${e+1} of ${t}`:2===t?["Minimum","Maximum"][e]:void 0}(r,a.values.length),g=null==f?void 0:f[s.size],y=g?function(e,t,n){const r=e/2,i=Qb([0,50],[0,r]);return(r-i(t)*n)*n}(g,h,s.direction):0;return k.useEffect(()=>{if(l)return a.thumbs.add(l),()=>{a.thumbs.delete(l)}},[l,a.thumbs]),w.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${h}% + ${y}px)`},children:[w.jsx(Ob.ItemSlot,{scope:e.__scopeSlider,children:w.jsx(X.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":a.min,"aria-valuenow":p,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:c,style:void 0===p?{display:"none"}:e.style,onFocus:$(e.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),d&&w.jsx(Kb,{name:i??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:p},r)]})});Gb.displayName=Wb;var Kb=k.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=k.useRef(null),o=D(i,r),a=or(t);return k.useEffect(()=>{const e=i.current;if(!e)return;const n=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(a!==t&&r){const n=new Event("input",{bubbles:!0});r.call(e,t),e.dispatchEvent(n)}},[a,t]),w.jsx(X.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});function Zb(e,t,n){return iy(100/(n-t)*(e-t),[0,100])}function Qb(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}Kb.displayName="RadioBubbleInput";var Xb=Fb,Jb=qb,ew=Vb,tw=Gb;k.forwardRef(({className:e,...t},n)=>w.jsxs(Xb,{ref:n,className:zn("relative flex w-full touch-none select-none items-center",e),...t,children:[w.jsx(Jb,{className:"bg-primary/20 relative h-1.5 w-full grow overflow-hidden rounded-full",children:w.jsx(ew,{className:"bg-primary absolute h-full"})}),w.jsx(tw,{className:"border-primary/50 bg-background focus-visible:ring-ring block h-4 w-4 rounded-full border shadow transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50"})]})).displayName=Xb.displayName;const nw=({className:e})=>w.jsx(Tt,{className:zn("text-brand-primary animate-spin",e),size:17}),rw=e=>{const{h:t,delayed:n,children:r,className:i,...o}=e,[a,s]=T.useState(!n);return T.useEffect(()=>{if(!a&&n){const e=setTimeout(()=>s(!0),500);return()=>clearTimeout(e)}},[a,n]),w.jsx("div",{className:zn("mx-auto flex min-h-[inherit] items-center justify-center",i),style:{minHeight:t},...o,children:a?w.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r,w.jsx(nw,{className:"text-muted-foreground"})]}):null})};var iw="Switch",[ow]=A(iw),[aw,sw]=ow(iw),lw=k.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:i,defaultChecked:o,required:a,disabled:s,value:l="on",onCheckedChange:u,form:c,...d}=e,[f,p]=k.useState(null),h=D(t,e=>p(e)),m=k.useRef(!1),g=!f||(c||!!f.closest("form")),[y,v]=q({prop:i,defaultProp:o??!1,onChange:u,caller:iw});return w.jsxs(aw,{scope:n,checked:y,disabled:s,children:[w.jsx(X.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":fw(y),"data-disabled":s?"":void 0,disabled:s,value:l,...d,ref:h,onClick:$(e.onClick,e=>{v(e=>!e),g&&(m.current=e.isPropagationStopped(),m.current||e.stopPropagation())})}),g&&w.jsx(dw,{control:f,bubbles:!m.current,name:r,value:l,checked:y,required:a,disabled:s,form:c,style:{transform:"translateX(-100%)"}})]})});lw.displayName=iw;var uw="SwitchThumb",cw=k.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,i=sw(uw,n);return w.jsx(X.span,{"data-state":fw(i.checked),"data-disabled":i.disabled?"":void 0,...r,ref:t})});cw.displayName=uw;var dw=k.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...i},o)=>{const a=k.useRef(null),s=D(a,o),l=or(n),u=ar(t);return k.useEffect(()=>{const e=a.current;if(!e)return;const t=window.HTMLInputElement.prototype,i=Object.getOwnPropertyDescriptor(t,"checked").set;if(l!==n&&i){const t=new Event("click",{bubbles:r});i.call(e,n),e.dispatchEvent(t)}},[l,n,r]),w.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...i,tabIndex:-1,ref:s,style:{...i.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function fw(e){return e?"checked":"unchecked"}dw.displayName="SwitchBubbleInput";var pw=lw,hw=cw;k.forwardRef(({className:e,...t},n)=>w.jsx(pw,{className:zn("focus-visible:ring-ring focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,ref:n,children:w.jsx(hw,{className:zn("bg-background pointer-events-none block h-4 w-4 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})).displayName=pw.displayName;const mw=k.forwardRef(({className:e,disableWrapper:t,...n},r)=>t?w.jsx("table",{ref:r,className:zn("w-full caption-bottom text-sm",e),...n}):w.jsx("div",{className:"relative w-full overflow-auto",children:w.jsx("table",{ref:r,className:zn("w-full caption-bottom text-sm",e),...n})}));mw.displayName="Table";const gw=k.forwardRef(({className:e,...t},n)=>w.jsx("thead",{ref:n,className:zn("[&_tr]:border-b",e),...t}));gw.displayName="TableHeader";const yw=k.forwardRef(({className:e,...t},n)=>w.jsx("tbody",{ref:n,className:zn("[&_tr:last-child]:border-0",e),...t}));yw.displayName="TableBody";k.forwardRef(({className:e,...t},n)=>w.jsx("tfoot",{ref:n,className:zn("bg-muted/50 border-t font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";const vw=k.forwardRef(({className:e,...t},n)=>w.jsx("tr",{ref:n,className:zn("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t}));vw.displayName="TableRow";const bw=k.forwardRef(({className:e,...t},n)=>w.jsx("th",{ref:n,className:zn("text-muted-foreground h-10 px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));bw.displayName="TableHead";const ww=k.forwardRef(({className:e,...t},n)=>w.jsx("td",{ref:n,className:zn("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t}));ww.displayName="TableCell";k.forwardRef(({className:e,...t},n)=>w.jsx("caption",{ref:n,className:zn("text-muted-foreground mt-4 text-sm",e),...t})).displayName="TableCaption";var _w="Tabs",[xw]=A(_w,[bu]),Ew=bu(),[Sw,kw]=xw(_w),Tw=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:a="horizontal",dir:s,activationMode:l="automatic",...u}=e,c=_e(s),[d,f]=q({prop:r,onChange:i,defaultProp:o??"",caller:_w});return w.jsx(Sw,{scope:n,baseId:ie(),value:d,onValueChange:f,orientation:a,dir:c,activationMode:l,children:w.jsx(X.div,{dir:c,"data-orientation":a,...u,ref:t})})});Tw.displayName=_w;var Cw="TabsList",Aw=k.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...i}=e,o=kw(Cw,n),a=Ew(n);return w.jsx(Au,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:w.jsx(X.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:t})})});Aw.displayName=Cw;var Iw="TabsTrigger",Ow=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=e,a=kw(Iw,n),s=Ew(n),l=Rw(a.baseId,r),u=Mw(a.baseId,r),c=r===a.value;return w.jsx(Iu,{asChild:!0,...s,focusable:!i,active:c,children:w.jsx(X.button,{type:"button",role:"tab","aria-selected":c,"aria-controls":u,"data-state":c?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:t,onMouseDown:$(e.onMouseDown,e=>{i||0!==e.button||!1!==e.ctrlKey?e.preventDefault():a.onValueChange(r)}),onKeyDown:$(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&a.onValueChange(r)}),onFocus:$(e.onFocus,()=>{const e="manual"!==a.activationMode;c||i||!e||a.onValueChange(r)})})})});Ow.displayName=Iw;var Nw="TabsContent",Dw=k.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...a}=e,s=kw(Nw,n),l=Rw(s.baseId,r),u=Mw(s.baseId,r),c=r===s.value,d=k.useRef(c);return k.useEffect(()=>{const e=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(e)},[]),w.jsx(ee,{present:i||c,children:({present:n})=>w.jsx(X.div,{"data-state":c?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!n,id:u,tabIndex:0,...a,ref:t,style:{...e.style,animationDuration:d.current?"0s":void 0},children:n&&o})})});function Rw(e,t){return`${e}-trigger-${t}`}function Mw(e,t){return`${e}-content-${t}`}Dw.displayName=Nw;var Pw=Aw,Fw=Ow,Lw=Dw;const jw=Tw,Bw=k.forwardRef(({className:e,...t},n)=>w.jsx(Pw,{ref:n,className:zn("bg-muted text-muted-foreground inline-flex h-9 items-center justify-center rounded-lg p-1",e),...t}));Bw.displayName=Pw.displayName;const $w=k.forwardRef(({className:e,...t},n)=>w.jsx(Fw,{ref:n,className:zn("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow",e),...t}));$w.displayName=Fw.displayName;const zw=k.forwardRef(({className:e,...t},n)=>w.jsx(Lw,{ref:n,className:zn("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",e),...t}));zw.displayName=Lw.displayName;const Uw=k.forwardRef(({className:e,autoResize:t=!1,onInput:n,value:r,defaultValue:i,...o},a)=>{const s=k.useRef(null);k.useImperativeHandle(a,()=>s.current);const l=k.useCallback(()=>{const e=s.current;e&&t&&(e.style.height="auto",e.style.height=`${e.scrollHeight}px`)},[t]);k.useEffect(()=>{l()},[l,r,i]);return w.jsx("textarea",{className:zn("border-input placeholder:text-muted-foreground focus-visible:ring-ring flex min-h-[60px] w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-sm focus-visible:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t?"overflow-y-hidden":void 0,e),ref:s,onInput:e=>{t&&l(),n&&n(e)},value:r,defaultValue:i,...o})});Uw.displayName="Textarea";const qw=k.createContext({theme:"system",setTheme:()=>null});function Hw({children:e,defaultTheme:t="system",storageKey:n="sqlrooms-ui-theme",...r}){const[i,o]=k.useState(()=>localStorage.getItem(n)||t);k.useEffect(()=>{const e=window.document.documentElement;if(e.classList.remove("light","dark"),"system"===i){const t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";return void e.classList.add(t)}e.classList.add(i)},[i]);const a={theme:i,setTheme:e=>{localStorage.setItem(n,e),o(e)}};return w.jsx(qw.Provider,{...r,value:a,children:e})}var Vw="ToastProvider",[Ww,Gw,Yw]=B("Toast"),[Kw]=A("Toast",[Yw]),[Zw,Qw]=Kw(Vw),Xw=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=e,[s,l]=k.useState(null),[u,c]=k.useState(0),d=k.useRef(!1),f=k.useRef(!1);return n.trim(),w.jsx(Ww.Provider,{scope:t,children:w.jsx(Zw,{scope:t,label:n,duration:r,swipeDirection:i,swipeThreshold:o,toastCount:u,viewport:s,onViewportChange:l,onToastAdd:k.useCallback(()=>c(e=>e+1),[]),onToastRemove:k.useCallback(()=>c(e=>e-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:f,children:a})})};Xw.displayName=Vw;var Jw="ToastViewport",e_=["F8"],t_="toast.viewportPause",n_="toast.viewportResume",r_=k.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=e_,label:i="Notifications ({hotkey})",...o}=e,a=Qw(Jw,n),s=Gw(n),l=k.useRef(null),u=k.useRef(null),c=k.useRef(null),d=k.useRef(null),f=D(t,d,a.onViewportChange),p=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),h=a.toastCount>0;k.useEffect(()=>{const e=e=>{var t;0!==r.length&&r.every(t=>e[t]||e.code===t)&&(null==(t=d.current)||t.focus())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),k.useEffect(()=>{const e=l.current,t=d.current;if(h&&e&&t){const n=()=>{if(!a.isClosePausedRef.current){const e=new CustomEvent(t_);t.dispatchEvent(e),a.isClosePausedRef.current=!0}},r=()=>{if(a.isClosePausedRef.current){const e=new CustomEvent(n_);t.dispatchEvent(e),a.isClosePausedRef.current=!1}},i=t=>{!e.contains(t.relatedTarget)&&r()},o=()=>{e.contains(document.activeElement)||r()};return e.addEventListener("focusin",n),e.addEventListener("focusout",i),e.addEventListener("pointermove",n),e.addEventListener("pointerleave",o),window.addEventListener("blur",n),window.addEventListener("focus",r),()=>{e.removeEventListener("focusin",n),e.removeEventListener("focusout",i),e.removeEventListener("pointermove",n),e.removeEventListener("pointerleave",o),window.removeEventListener("blur",n),window.removeEventListener("focus",r)}}},[h,a.isClosePausedRef]);const m=k.useCallback(({tabbingDirection:e})=>{const t=s().map(t=>{const n=t.ref.current,r=[n,...__(n)];return"forwards"===e?r:r.reverse()});return("forwards"===e?t.reverse():t).flat()},[s]);return k.useEffect(()=>{const e=d.current;if(e){const t=t=>{var n,r,i;const o=t.altKey||t.ctrlKey||t.metaKey;if("Tab"===t.key&&!o){const o=document.activeElement,a=t.shiftKey;if(t.target===e&&a)return void(null==(n=u.current)||n.focus());const s=m({tabbingDirection:a?"backwards":"forwards"}),l=s.findIndex(e=>e===o);x_(s.slice(l+1))?t.preventDefault():a?null==(r=u.current)||r.focus():null==(i=c.current)||i.focus()}};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}},[s,m]),w.jsxs(zr,{ref:l,role:"region","aria-label":i.replace("{hotkey}",p),tabIndex:-1,style:{pointerEvents:h?void 0:"none"},children:[h&&w.jsx(o_,{ref:u,onFocusFromOutsideViewport:()=>{x_(m({tabbingDirection:"forwards"}))}}),w.jsx(Ww.Slot,{scope:n,children:w.jsx(X.ol,{tabIndex:-1,...o,ref:f})}),h&&w.jsx(o_,{ref:c,onFocusFromOutsideViewport:()=>{x_(m({tabbingDirection:"backwards"}))}})]})});r_.displayName=Jw;var i_="ToastFocusProxy",o_=k.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...i}=e,o=Qw(i_,n);return w.jsx(ay,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:e=>{var t;const n=e.relatedTarget;!(null==(t=o.viewport)?void 0:t.contains(n))&&r()}})});o_.displayName=i_;var a_="Toast",s_=k.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:i,onOpenChange:o,...a}=e,[s,l]=q({prop:r,defaultProp:i??!0,onChange:o,caller:a_});return w.jsx(ee,{present:n||s,children:w.jsx(c_,{open:s,...a,ref:t,onClose:()=>l(!1),onPause:Or(e.onPause),onResume:Or(e.onResume),onSwipeStart:$(e.onSwipeStart,e=>{e.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:$(e.onSwipeMove,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","move"),e.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${n}px`)}),onSwipeCancel:$(e.onSwipeCancel,e=>{e.currentTarget.setAttribute("data-swipe","cancel"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:$(e.onSwipeEnd,e=>{const{x:t,y:n}=e.detail.delta;e.currentTarget.setAttribute("data-swipe","end"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),e.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),e.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${t}px`),e.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${n}px`),l(!1)})})})});s_.displayName=a_;var[l_,u_]=Kw(a_,{onClose(){}}),c_=k.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:l,onResume:u,onSwipeStart:c,onSwipeMove:d,onSwipeCancel:f,onSwipeEnd:p,...h}=e,m=Qw(a_,n),[g,y]=k.useState(null),v=D(t,e=>y(e)),b=k.useRef(null),_=k.useRef(null),x=i||m.duration,E=k.useRef(0),S=k.useRef(x),T=k.useRef(0),{onToastAdd:C,onToastRemove:A}=m,I=Or(()=>{var e;(null==g?void 0:g.contains(document.activeElement))&&(null==(e=m.viewport)||e.focus()),a()}),O=k.useCallback(e=>{e&&e!==1/0&&(window.clearTimeout(T.current),E.current=(new Date).getTime(),T.current=window.setTimeout(I,e))},[I]);k.useEffect(()=>{const e=m.viewport;if(e){const t=()=>{O(S.current),null==u||u()},n=()=>{const e=(new Date).getTime()-E.current;S.current=S.current-e,window.clearTimeout(T.current),null==l||l()};return e.addEventListener(t_,n),e.addEventListener(n_,t),()=>{e.removeEventListener(t_,n),e.removeEventListener(n_,t)}}},[m.viewport,x,l,u,O]),k.useEffect(()=>{o&&!m.isClosePausedRef.current&&O(x)},[o,x,m.isClosePausedRef,O]),k.useEffect(()=>(C(),()=>A()),[C,A]);const N=k.useMemo(()=>g?v_(g):null,[g]);return m.viewport?w.jsxs(w.Fragment,{children:[N&&w.jsx(d_,{__scopeToast:n,role:"status","aria-live":"foreground"===r?"assertive":"polite",children:N}),w.jsx(l_,{scope:n,onClose:I,children:Z.createPortal(w.jsx(Ww.ItemSlot,{scope:n,children:w.jsx($r,{asChild:!0,onEscapeKeyDown:$(s,()=>{m.isFocusedToastEscapeKeyDownRef.current||I(),m.isFocusedToastEscapeKeyDownRef.current=!1}),children:w.jsx(X.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":m.swipeDirection,...h,ref:v,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:$(e.onKeyDown,e=>{"Escape"===e.key&&(null==s||s(e.nativeEvent),e.nativeEvent.defaultPrevented||(m.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:$(e.onPointerDown,e=>{0===e.button&&(b.current={x:e.clientX,y:e.clientY})}),onPointerMove:$(e.onPointerMove,e=>{if(!b.current)return;const t=e.clientX-b.current.x,n=e.clientY-b.current.y,r=Boolean(_.current),i=["left","right"].includes(m.swipeDirection),o=["left","up"].includes(m.swipeDirection)?Math.min:Math.max,a=i?o(0,t):0,s=i?0:o(0,n),l="touch"===e.pointerType?10:2,u={x:a,y:s},f={originalEvent:e,delta:u};r?(_.current=u,b_("toast.swipeMove",d,f,{discrete:!1})):w_(u,m.swipeDirection,l)?(_.current=u,b_("toast.swipeStart",c,f,{discrete:!1}),e.target.setPointerCapture(e.pointerId)):(Math.abs(t)>l||Math.abs(n)>l)&&(b.current=null)}),onPointerUp:$(e.onPointerUp,e=>{const t=_.current,n=e.target;if(n.hasPointerCapture(e.pointerId)&&n.releasePointerCapture(e.pointerId),_.current=null,b.current=null,t){const n=e.currentTarget,r={originalEvent:e,delta:t};w_(t,m.swipeDirection,m.swipeThreshold)?b_("toast.swipeEnd",p,r,{discrete:!0}):b_("toast.swipeCancel",f,r,{discrete:!0}),n.addEventListener("click",e=>e.preventDefault(),{once:!0})}})})})}),m.viewport)})]}):null}),d_=e=>{const{__scopeToast:t,children:n,...r}=e,i=Qw(a_,t),[o,a]=k.useState(!1),[s,l]=k.useState(!1);return function(e=()=>{}){const t=Or(e);z(()=>{let e=0,n=0;return e=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(e),window.cancelAnimationFrame(n)}},[t])}(()=>a(!0)),k.useEffect(()=>{const e=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(e)},[]),s?null:w.jsx(Xr,{asChild:!0,children:w.jsx(ay,{...r,children:o&&w.jsxs(w.Fragment,{children:[i.label," ",n]})})})},f_=k.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return w.jsx(X.div,{...r,ref:t})});f_.displayName="ToastTitle";var p_=k.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return w.jsx(X.div,{...r,ref:t})});p_.displayName="ToastDescription";var h_=k.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?w.jsx(y_,{altText:n,asChild:!0,children:w.jsx(g_,{...r,ref:t})}):null});h_.displayName="ToastAction";var m_="ToastClose",g_=k.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,i=u_(m_,n);return w.jsx(y_,{asChild:!0,children:w.jsx(X.button,{type:"button",...r,ref:t,onClick:$(e.onClick,i.onClose)})})});g_.displayName=m_;var y_=k.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...i}=e;return w.jsx(X.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...i,ref:t})});function v_(e){const t=[];return Array.from(e.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&t.push(e.textContent),function(e){return e.nodeType===e.ELEMENT_NODE}(e)){const n=e.ariaHidden||e.hidden||"none"===e.style.display,r=""===e.dataset.radixToastAnnounceExclude;if(!n)if(r){const n=e.dataset.radixToastAnnounceAlt;n&&t.push(n)}else t.push(...v_(e))}}),t}function b_(e,t,n,{discrete:r}){const i=n.originalEvent.currentTarget,o=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?J(i,o):i.dispatchEvent(o)}var w_=(e,t,n=0)=>{const r=Math.abs(e.x),i=Math.abs(e.y),o=r>i;return"left"===t||"right"===t?o&&r>n:!o&&i>n};function __(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function x_(e){const t=document.activeElement;return e.some(e=>e===t||(e.focus(),document.activeElement!==t))}var E_=r_,S_=s_,k_=f_,T_=p_,C_=h_,A_=g_;const I_=Xw,O_=k.forwardRef(({className:e,...t},n)=>w.jsx(E_,{ref:n,className:zn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));O_.displayName=E_.displayName;const N_=Hn("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),D_=k.forwardRef(({className:e,variant:t,...n},r)=>w.jsx(S_,{ref:r,className:zn(N_({variant:t}),e),...n}));D_.displayName=S_.displayName;k.forwardRef(({className:e,...t},n)=>w.jsx(C_,{ref:n,className:zn("hover:bg-secondary focus:ring-ring group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50",e),...t})).displayName=C_.displayName;const R_=k.forwardRef(({className:e,...t},n)=>w.jsx(A_,{ref:n,className:zn("text-foreground/50 hover:text-foreground absolute right-1 top-1 rounded-md p-1 opacity-0 transition-opacity focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:w.jsx(Vt,{className:"h-4 w-4"})}));R_.displayName=A_.displayName;const M_=k.forwardRef(({className:e,...t},n)=>w.jsx(k_,{ref:n,className:zn("text-sm font-semibold [&+div]:text-xs",e),...t}));M_.displayName=k_.displayName;const P_=k.forwardRef(({className:e,...t},n)=>w.jsx(T_,{ref:n,className:zn("text-sm opacity-90",e),...t}));P_.displayName=T_.displayName;let F_=0;const L_=new Map,j_=e=>{if(L_.has(e))return;const t=setTimeout(()=>{L_.delete(e),U_({type:"REMOVE_TOAST",toastId:e})},1e6);L_.set(e,t)},B_=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{const{toastId:n}=t;return n?j_(n):e.toasts.forEach(e=>{j_(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},$_=[];let z_={toasts:[]};function U_(e){z_=B_(z_,e),$_.forEach(e=>{e(z_)})}function q_({...e}){const t=(F_=(F_+1)%Number.MAX_SAFE_INTEGER,F_.toString()),n=()=>U_({type:"DISMISS_TOAST",toastId:t});return U_({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||n()}}}),{id:t,dismiss:n,update:e=>U_({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function H_(){const[e,t]=k.useState(z_);return k.useEffect(()=>($_.push(t),()=>{const e=$_.indexOf(t);e>-1&&$_.splice(e,1)}),[e]),{...e,toast:q_,dismiss:e=>U_({type:"DISMISS_TOAST",toastId:e})}}function V_(){const{toasts:e}=H_();return w.jsxs(I_,{children:[e.map(function({id:e,title:t,description:n,action:r,...i}){return w.jsxs(D_,{...i,children:[w.jsxs("div",{className:"grid gap-1",children:[t&&w.jsx(M_,{children:t}),n&&w.jsx(P_,{children:n})]}),r,w.jsx(R_,{})]},e)}),w.jsx(O_,{})]})}var W_="Toggle",G_=k.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:i,...o}=e,[a,s]=q({prop:n,onChange:i,defaultProp:r??!1,caller:W_});return w.jsx(X.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":e.disabled?"":void 0,...o,ref:t,onClick:$(e.onClick,()=>{e.disabled||s(!a)})})});G_.displayName=W_;var Y_=G_,K_="ToggleGroup",[Z_]=A(K_,[bu]),Q_=bu(),X_=T.forwardRef((e,t)=>{const{type:n,...r}=e;if("single"===n){const e=r;return w.jsx(tx,{...e,ref:t})}if("multiple"===n){const e=r;return w.jsx(nx,{...e,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${K_}\``)});X_.displayName=K_;var[J_,ex]=Z_(K_),tx=T.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[a,s]=q({prop:n,defaultProp:r??"",onChange:i,caller:K_});return w.jsx(J_,{scope:e.__scopeToggleGroup,type:"single",value:T.useMemo(()=>a?[a]:[],[a]),onItemActivate:s,onItemDeactivate:T.useCallback(()=>s(""),[s]),children:w.jsx(ox,{...o,ref:t})})}),nx=T.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=e,[a,s]=q({prop:n,defaultProp:r??[],onChange:i,caller:K_}),l=T.useCallback(e=>s((t=[])=>[...t,e]),[s]),u=T.useCallback(e=>s((t=[])=>t.filter(t=>t!==e)),[s]);return w.jsx(J_,{scope:e.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:l,onItemDeactivate:u,children:w.jsx(ox,{...o,ref:t})})});X_.displayName=K_;var[rx,ix]=Z_(K_),ox=T.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:i=!0,orientation:o,dir:a,loop:s=!0,...l}=e,u=Q_(n),c=_e(a),d={role:"group",dir:c,...l};return w.jsx(rx,{scope:n,rovingFocus:i,disabled:r,children:i?w.jsx(Au,{asChild:!0,...u,orientation:o,dir:c,loop:s,children:w.jsx(X.div,{...d,ref:t})}):w.jsx(X.div,{...d,ref:t})})}),ax="ToggleGroupItem",sx=T.forwardRef((e,t)=>{const n=ex(ax,e.__scopeToggleGroup),r=ix(ax,e.__scopeToggleGroup),i=Q_(e.__scopeToggleGroup),o=n.value.includes(e.value),a=r.disabled||e.disabled,s={...e,pressed:o,disabled:a},l=T.useRef(null);return r.rovingFocus?w.jsx(Iu,{asChild:!0,...i,focusable:!a,active:o,ref:l,children:w.jsx(lx,{...s,ref:t})}):w.jsx(lx,{...s,ref:t})});sx.displayName=ax;var lx=T.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...i}=e,o=ex(ax,n),a={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},s="single"===o.type?a:void 0;return w.jsx(G_,{...s,...i,ref:t,onPressedChange:e=>{e?o.onItemActivate(r):o.onItemDeactivate(r)}})}),ux=X_,cx=sx;const dx=Hn("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});k.forwardRef(({className:e,variant:t,size:n,...r},i)=>w.jsx(Y_,{ref:i,className:zn(dx({variant:t,size:n,className:e})),...r})).displayName=Y_.displayName;const fx=k.createContext({size:"default",variant:"default"});k.forwardRef(({className:e,variant:t,size:n,children:r,...i},o)=>w.jsx(ux,{ref:o,className:zn("flex items-center justify-center gap-1",e),...i,children:w.jsx(fx.Provider,{value:{variant:t,size:n},children:r})})).displayName=ux.displayName;k.forwardRef(({className:e,children:t,variant:n,size:r,...i},o)=>{const a=k.useContext(fx);return w.jsx(cx,{ref:o,className:zn(dx({variant:a.variant||n,size:a.size||r}),e),...i,children:t})}).displayName=cx.displayName;const px=({text:e,variant:t="ghost",size:n="icon",className:r,ariaLabel:i="Copy to clipboard",durationMs:o=1500,disabled:a=!1,onCopied:s})=>{const[l,u]=k.useState(!1),c=k.useRef(null);k.useEffect(()=>()=>{null!==c.current&&window.clearTimeout(c.current)},[]);return w.jsx(er,{variant:t,size:n,className:r,"aria-label":i,type:"button",disabled:a,onClick:async()=>{try{await navigator.clipboard.writeText(e),u(!0),"function"==typeof s&&s(),c.current=window.setTimeout(()=>u(!1),o)}catch(F0){}},children:w.jsx("span",{className:zn("inline-flex items-center justify-center transition-all duration-150",l?"scale-110 opacity-100":"opacity-90"),children:l?w.jsx(at,{className:"h-4 w-4 text-green-500"}):w.jsx(ft,{className:"h-4 w-4"})})})};var[hx]=A("Tooltip",[wl]),mx=wl(),gx="TooltipProvider",yx=700,vx="tooltip.open",[bx,wx]=hx(gx),_x=e=>{const{__scopeTooltip:t,delayDuration:n=yx,skipDelayDuration:r=300,disableHoverableContent:i=!1,children:o}=e,a=k.useRef(!0),s=k.useRef(!1),l=k.useRef(0);return k.useEffect(()=>{const e=l.current;return()=>window.clearTimeout(e)},[]),w.jsx(bx,{scope:t,isOpenDelayedRef:a,delayDuration:n,onOpen:k.useCallback(()=>{window.clearTimeout(l.current),a.current=!1},[]),onClose:k.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:k.useCallback(e=>{s.current=e},[]),disableHoverableContent:i,children:o})};_x.displayName=gx;var xx="Tooltip",[Ex,Sx]=hx(xx),kx=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:i,onOpenChange:o,disableHoverableContent:a,delayDuration:s}=e,l=wx(xx,e.__scopeTooltip),u=mx(t),[c,d]=k.useState(null),f=ie(),p=k.useRef(0),h=a??l.disableHoverableContent,m=s??l.delayDuration,g=k.useRef(!1),[y,v]=q({prop:r,defaultProp:i??!1,onChange:e=>{e?(l.onOpen(),document.dispatchEvent(new CustomEvent(vx))):l.onClose(),null==o||o(e)},caller:xx}),b=k.useMemo(()=>y?g.current?"delayed-open":"instant-open":"closed",[y]),_=k.useCallback(()=>{window.clearTimeout(p.current),p.current=0,g.current=!1,v(!0)},[v]),x=k.useCallback(()=>{window.clearTimeout(p.current),p.current=0,v(!1)},[v]),E=k.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{g.current=!0,v(!0),p.current=0},m)},[m,v]);return k.useEffect(()=>()=>{p.current&&(window.clearTimeout(p.current),p.current=0)},[]),w.jsx(Fl,{...u,children:w.jsx(Ex,{scope:t,contentId:f,open:y,stateAttribute:b,trigger:c,onTriggerChange:d,onTriggerEnter:k.useCallback(()=>{l.isOpenDelayedRef.current?E():_()},[l.isOpenDelayedRef,E,_]),onTriggerLeave:k.useCallback(()=>{h?x():(window.clearTimeout(p.current),p.current=0)},[x,h]),onOpen:_,onClose:x,disableHoverableContent:h,children:n})})};kx.displayName=xx;var Tx="TooltipTrigger",Cx=k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=Sx(Tx,n),o=wx(Tx,n),a=mx(n),s=D(t,k.useRef(null),i.onTriggerChange),l=k.useRef(!1),u=k.useRef(!1),c=k.useCallback(()=>l.current=!1,[]);return k.useEffect(()=>()=>document.removeEventListener("pointerup",c),[c]),w.jsx(Ll,{asChild:!0,...a,children:w.jsx(X.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...r,ref:s,onPointerMove:$(e.onPointerMove,e=>{"touch"!==e.pointerType&&(u.current||o.isPointerInTransitRef.current||(i.onTriggerEnter(),u.current=!0))}),onPointerLeave:$(e.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:$(e.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",c,{once:!0})}),onFocus:$(e.onFocus,()=>{l.current||i.onOpen()}),onBlur:$(e.onBlur,i.onClose),onClick:$(e.onClick,i.onClose)})})});Cx.displayName=Tx;var Ax="TooltipPortal",[Ix,Ox]=hx(Ax,{forceMount:void 0}),Nx=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:i}=e,o=Sx(Ax,t);return w.jsx(Ix,{scope:t,forceMount:n,children:w.jsx(ee,{present:n||o.open,children:w.jsx(Xr,{asChild:!0,container:i,children:r})})})};Nx.displayName=Ax;var Dx="TooltipContent",Rx=k.forwardRef((e,t)=>{const n=Ox(Dx,e.__scopeTooltip),{forceMount:r=n.forceMount,side:i="top",...o}=e,a=Sx(Dx,e.__scopeTooltip);return w.jsx(ee,{present:r||a.open,children:a.disableHoverableContent?w.jsx(jx,{side:i,...o,ref:t}):w.jsx(Mx,{side:i,...o,ref:t})})}),Mx=k.forwardRef((e,t)=>{const n=Sx(Dx,e.__scopeTooltip),r=wx(Dx,e.__scopeTooltip),i=k.useRef(null),o=D(t,i),[a,s]=k.useState(null),{trigger:l,onClose:u}=n,c=i.current,{onPointerInTransitChange:d}=r,f=k.useCallback(()=>{s(null),d(!1)},[d]),p=k.useCallback((e,t)=>{const n=e.currentTarget,r={x:e.clientX,y:e.clientY},i=function(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return r}(r,function(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),o=Math.abs(t.left-e.x);switch(Math.min(n,r,i,o)){case o:return"left";case i:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}(r,n.getBoundingClientRect())),o=function(e){const t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const n=e[r];for(;t.length>=2;){const e=t[t.length-1],r=t[t.length-2];if(!((e.x-r.x)*(n.y-r.y)>=(e.y-r.y)*(n.x-r.x)))break;t.pop()}t.push(n)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const t=e[r];for(;n.length>=2;){const e=n[n.length-1],r=n[n.length-2];if(!((e.x-r.x)*(t.y-r.y)>=(e.y-r.y)*(t.x-r.x)))break;n.pop()}n.push(t)}return n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}(t)}([...i,...function(e){const{top:t,right:n,bottom:r,left:i}=e;return[{x:i,y:t},{x:n,y:t},{x:n,y:r},{x:i,y:r}]}(t.getBoundingClientRect())]);s(o),d(!0)},[d]);return k.useEffect(()=>()=>f(),[f]),k.useEffect(()=>{if(l&&c){const e=e=>p(e,c),t=e=>p(e,l);return l.addEventListener("pointerleave",e),c.addEventListener("pointerleave",t),()=>{l.removeEventListener("pointerleave",e),c.removeEventListener("pointerleave",t)}}},[l,c,p,f]),k.useEffect(()=>{if(a){const e=e=>{const t=e.target,n={x:e.clientX,y:e.clientY},r=(null==l?void 0:l.contains(t))||(null==c?void 0:c.contains(t)),i=!function(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,a=t.length-1;o<t.length;a=o++){const e=t[o],s=t[a],l=e.x,u=e.y,c=s.x,d=s.y;u>r!=d>r&&n<(c-l)*(r-u)/(d-u)+l&&(i=!i)}return i}(n,a);r?f():i&&(f(),u())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[l,c,a,u,f]),w.jsx(jx,{...e,ref:o})}),[Px,Fx]=hx(xx,{isInside:!1}),Lx=L("TooltipContent"),jx=k.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=e,l=Sx(Dx,n),u=mx(n),{onClose:c}=l;return k.useEffect(()=>(document.addEventListener(vx,c),()=>document.removeEventListener(vx,c)),[c]),k.useEffect(()=>{if(l.trigger){const e=e=>{const t=e.target;(null==t?void 0:t.contains(l.trigger))&&c()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[l.trigger,c]),w.jsx(Fr,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:c,children:w.jsxs(jl,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[w.jsx(Lx,{children:r}),w.jsx(Px,{scope:n,isInside:!0,children:w.jsx(sy,{id:l.contentId,role:"tooltip",children:i||r})})]})})});Rx.displayName=Dx;var Bx="TooltipArrow";k.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,i=mx(n);return Fx(Bx,n).isInside?null:w.jsx(Bl,{...i,...r,ref:t})}).displayName=Bx;var $x=Nx,zx=Rx;const Ux=_x,qx=kx,Hx=Cx,Vx=k.forwardRef(({className:e,sideOffset:t=4,...n},r)=>w.jsx($x,{children:w.jsx(zx,{ref:r,sideOffset:t,className:zn("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 overflow-hidden rounded-md px-3 py-1.5 text-xs",e),...n})}));function Wx(e){const{className:t,treeData:n,renderNode:r}=e;return w.jsx("div",{className:zn("flex flex-col",t),children:w.jsx(Gx,{treeData:n,renderNode:r})})}function Gx(e){const{treeData:t,renderNode:n}=e,{children:r}=t,[i,o]=k.useState(Boolean(t.isInitialOpen));return k.useEffect(()=>{o(Boolean(t.isInitialOpen))},[t.isInitialOpen]),r?w.jsxs(ce,{open:i,onOpenChange:o,children:[w.jsx(fe,{className:"w-full",asChild:!0,children:w.jsxs("div",{className:"flex w-full cursor-pointer items-center space-x-1",children:[w.jsx(lt,{className:zn("flex-shrink-0 text-gray-500",{"rotate-90 transform":i}),size:"18px"}),n(t,i)]})}),w.jsx(he,{className:"pl-4",children:i?r.map(e=>w.jsx(Gx,{treeData:e,renderNode:n},e.key)):null})]}):w.jsx(w.Fragment,{children:n(t,i)})}var Yx,Kx;Vx.displayName=zx.displayName,function(){if(Kx)return Yx;Kx=1;var e=/^\s+|\s+$/g,t=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,r=/^0o[0-7]+$/i,i=parseInt,o="object"==typeof d&&d&&d.Object===Object&&d,a="object"==typeof self&&self&&self.Object===Object&&self,s=o||a||Function("return this")(),l=Object.prototype.toString,u=Math.max,c=Math.min,f=function(){return s.Date.now()};function p(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(o){if("number"==typeof o)return o;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==l.call(e)}(o))return NaN;if(p(o)){var a="function"==typeof o.valueOf?o.valueOf():o;o=p(a)?a+"":a}if("string"!=typeof o)return 0===o?o:+o;o=o.replace(e,"");var s=n.test(o);return s||r.test(o)?i(o.slice(2),s?2:8):t.test(o)?NaN:+o}Yx=function(e,t,n){var r,i,o,a,s,l,d=0,m=!1,g=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function v(t){var n=r,o=i;return r=i=void 0,d=t,a=e.apply(o,n)}function b(e){var n=e-l;return void 0===l||n>=t||n<0||g&&e-d>=o}function w(){var e=f();if(b(e))return _(e);s=setTimeout(w,function(e){var n=t-(e-l);return g?c(n,o-(e-d)):n}(e))}function _(e){return s=void 0,y&&r?v(e):(r=i=void 0,a)}function x(){var e=f(),n=b(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return d=e,s=setTimeout(w,t),m?v(e):a}(l);if(g)return s=setTimeout(w,t),v(l)}return void 0===s&&(s=setTimeout(w,t)),a}return t=h(t)||0,p(n)&&(m=!!n.leading,o=(g="maxWait"in n)?u(h(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),x.cancel=function(){void 0!==s&&clearTimeout(s),d=0,r=l=i=s=void 0},x.flush=function(){return void 0===s?a:_(f())},x}}();var Zx={width:void 0,height:void 0};function Qx(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:i},o]=k.useState(Zx),a=function(){const e=k.useRef(!1);return k.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),k.useCallback(()=>e.current,[])}(),s=k.useRef({...Zx}),l=k.useRef(void 0);return l.current=e.onResize,k.useEffect(()=>{if(!t.current)return;if("undefined"==typeof window||!("ResizeObserver"in window))return;const e=new ResizeObserver(([e])=>{const t="border-box"===n?"borderBoxSize":"device-pixel-content-box"===n?"devicePixelContentBoxSize":"contentBoxSize",r=Xx(e,t,"inlineSize"),i=Xx(e,t,"blockSize");if(s.current.width!==r||s.current.height!==i){const e={width:r,height:i};s.current.width=r,s.current.height=i,l.current?l.current(e):a()&&o(e)}});return e.observe(t.current,{box:n}),()=>{e.disconnect()}},[n,t,a]),{width:r,height:i}}function Xx(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:"contentBoxSize"===t?e.contentRect["inlineSize"===n?"width":"height"]:void 0}function Jx(e=!1){const[t,n]=k.useState(e);return{isOpen:t,onOpen:k.useCallback(()=>{n(!0)},[]),onClose:k.useCallback(()=>{n(!1)},[]),onToggle:k.useCallback(()=>{n(e=>!e)},[])}}var eE,tE,nE,rE,iE,oE,aE={},sE={};function lE(){return tE||(tE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}});const t=n((eE||(eE=1,function(e){function t(e,t){return{handler:e,config:t}}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n}}),t.withOptions=function(e,t=()=>({})){const n=function(n){return{__options:n,handler:e(n),config:t(n)}};return n.__isOptionsFunction=!0,n.__pluginFunction=e,n.__configFunction=t,n};const n=t}(sE)),sE));function n(e){return e&&e.__esModule?e:{default:e}}const r=t.default}(aE)),aE}function uE(){if(rE)return nE;rE=1;let e=lE();return nE=(e.__esModule?e:{default:e}).default}!function(){if(oE)return iE;oE=1;const e=uE();function t(e){return Object.fromEntries(Object.entries(e).filter(([e])=>"DEFAULT"!==e))}iE=e(({addUtilities:e,matchUtilities:n,theme:r})=>{e({"@keyframes enter":r("keyframes.enter"),"@keyframes exit":r("keyframes.exit"),".animate-in":{animationName:"enter",animationDuration:r("animationDuration.DEFAULT"),"--tw-enter-opacity":"initial","--tw-enter-scale":"initial","--tw-enter-rotate":"initial","--tw-enter-translate-x":"initial","--tw-enter-translate-y":"initial"},".animate-out":{animationName:"exit",animationDuration:r("animationDuration.DEFAULT"),"--tw-exit-opacity":"initial","--tw-exit-scale":"initial","--tw-exit-rotate":"initial","--tw-exit-translate-x":"initial","--tw-exit-translate-y":"initial"}}),n({"fade-in":e=>({"--tw-enter-opacity":e}),"fade-out":e=>({"--tw-exit-opacity":e})},{values:r("animationOpacity")}),n({"zoom-in":e=>({"--tw-enter-scale":e}),"zoom-out":e=>({"--tw-exit-scale":e})},{values:r("animationScale")}),n({"spin-in":e=>({"--tw-enter-rotate":e}),"spin-out":e=>({"--tw-exit-rotate":e})},{values:r("animationRotate")}),n({"slide-in-from-top":e=>({"--tw-enter-translate-y":`-${e}`}),"slide-in-from-bottom":e=>({"--tw-enter-translate-y":e}),"slide-in-from-left":e=>({"--tw-enter-translate-x":`-${e}`}),"slide-in-from-right":e=>({"--tw-enter-translate-x":e}),"slide-out-to-top":e=>({"--tw-exit-translate-y":`-${e}`}),"slide-out-to-bottom":e=>({"--tw-exit-translate-y":e}),"slide-out-to-left":e=>({"--tw-exit-translate-x":`-${e}`}),"slide-out-to-right":e=>({"--tw-exit-translate-x":e})},{values:r("animationTranslate")}),n({duration:e=>({animationDuration:e})},{values:t(r("animationDuration"))}),n({delay:e=>({animationDelay:e})},{values:r("animationDelay")}),n({ease:e=>({animationTimingFunction:e})},{values:t(r("animationTimingFunction"))}),e({".running":{animationPlayState:"running"},".paused":{animationPlayState:"paused"}}),n({"fill-mode":e=>({animationFillMode:e})},{values:r("animationFillMode")}),n({direction:e=>({animationDirection:e})},{values:r("animationDirection")}),n({repeat:e=>({animationIterationCount:e})},{values:r("animationRepeat")})},{theme:{extend:{animationDelay:({theme:e})=>({...e("transitionDelay")}),animationDuration:({theme:e})=>({0:"0ms",...e("transitionDuration")}),animationTimingFunction:({theme:e})=>({...e("transitionTimingFunction")}),animationFillMode:{none:"none",forwards:"forwards",backwards:"backwards",both:"both"},animationDirection:{normal:"normal",reverse:"reverse",alternate:"alternate","alternate-reverse":"alternate-reverse"},animationOpacity:({theme:e})=>({DEFAULT:0,...e("opacity")}),animationTranslate:({theme:e})=>({DEFAULT:"100%",...e("translate")}),animationScale:({theme:e})=>({DEFAULT:0,...e("scale")}),animationRotate:({theme:e})=>({DEFAULT:"30deg",...e("rotate")}),animationRepeat:{0:"0",1:"1",infinite:"infinite"},keyframes:{enter:{from:{opacity:"var(--tw-enter-opacity, 1)",transform:"translate3d(var(--tw-enter-translate-x, 0), var(--tw-enter-translate-y, 0), 0) scale3d(var(--tw-enter-scale, 1), var(--tw-enter-scale, 1), var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))"}},exit:{to:{opacity:"var(--tw-exit-opacity, 1)",transform:"translate3d(var(--tw-exit-translate-x, 0), var(--tw-exit-translate-y, 0), 0) scale3d(var(--tw-exit-scale, 1), var(--tw-exit-scale, 1), var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))"}}}}}})}();var cE,dE,fE,pE,hE,mE,gE,yE={},vE={},bE={exports:{}};function wE(){if(cE)return bE.exports;cE=1;var e=String,t=function(){return{isColorSupported:!1,reset:e,bold:e,dim:e,italic:e,underline:e,inverse:e,hidden:e,strikethrough:e,black:e,red:e,green:e,yellow:e,blue:e,magenta:e,cyan:e,white:e,gray:e,bgBlack:e,bgRed:e,bgGreen:e,bgYellow:e,bgBlue:e,bgMagenta:e,bgCyan:e,bgWhite:e,blackBright:e,redBright:e,greenBright:e,yellowBright:e,blueBright:e,magentaBright:e,cyanBright:e,whiteBright:e,bgBlackBright:e,bgRedBright:e,bgGreenBright:e,bgYellowBright:e,bgBlueBright:e,bgMagentaBright:e,bgCyanBright:e,bgWhiteBright:e}};return bE.exports=t(),bE.exports.createColors=t,bE.exports}function _E(){return fE||(fE=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i}});const t=n((dE||(dE=1,function(e){var t={};Object.defineProperty(e,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(e,{dim:function(){return a},default:function(){return s}});const n=r(wE());function r(e){return e&&e.__esModule?e:{default:e}}let i=new Set;function o(e,n,r){"undefined"!=typeof process&&t.JEST_WORKER_ID||r&&i.has(r)||(r&&i.add(r),n.forEach(e=>{}))}function a(e){return n.default.dim(e)}const s={info(e,t){o(n.default.bold(n.default.cyan("info")),...Array.isArray(e)?[e]:[t,e])},warn(e,t){o(n.default.bold(n.default.yellow("warn")),...Array.isArray(e)?[e]:[t,e])},risk(e,t){o(n.default.bold(n.default.magenta("risk")),...Array.isArray(e)?[e]:[t,e])}}}(vE)),vE));function n(e){return e&&e.__esModule?e:{default:e}}function r({version:e,from:n,to:r}){t.default.warn(`${n}-color-renamed`,[`As of Tailwind CSS ${e}, \`${n}\` has been renamed to \`${r}\`.`,"Update your configuration file to silence this warning."])}const i={inherit:"inherit",current:"currentColor",transparent:"transparent",black:"#000",white:"#fff",slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"},red:{50:"#fef2f2",100:"#fee2e2",200:"#fecaca",300:"#fca5a5",400:"#f87171",500:"#ef4444",600:"#dc2626",700:"#b91c1c",800:"#991b1b",900:"#7f1d1d",950:"#450a0a"},orange:{50:"#fff7ed",100:"#ffedd5",200:"#fed7aa",300:"#fdba74",400:"#fb923c",500:"#f97316",600:"#ea580c",700:"#c2410c",800:"#9a3412",900:"#7c2d12",950:"#431407"},amber:{50:"#fffbeb",100:"#fef3c7",200:"#fde68a",300:"#fcd34d",400:"#fbbf24",500:"#f59e0b",600:"#d97706",700:"#b45309",800:"#92400e",900:"#78350f",950:"#451a03"},yellow:{50:"#fefce8",100:"#fef9c3",200:"#fef08a",300:"#fde047",400:"#facc15",500:"#eab308",600:"#ca8a04",700:"#a16207",800:"#854d0e",900:"#713f12",950:"#422006"},lime:{50:"#f7fee7",100:"#ecfccb",200:"#d9f99d",300:"#bef264",400:"#a3e635",500:"#84cc16",600:"#65a30d",700:"#4d7c0f",800:"#3f6212",900:"#365314",950:"#1a2e05"},green:{50:"#f0fdf4",100:"#dcfce7",200:"#bbf7d0",300:"#86efac",400:"#4ade80",500:"#22c55e",600:"#16a34a",700:"#15803d",800:"#166534",900:"#14532d",950:"#052e16"},emerald:{50:"#ecfdf5",100:"#d1fae5",200:"#a7f3d0",300:"#6ee7b7",400:"#34d399",500:"#10b981",600:"#059669",700:"#047857",800:"#065f46",900:"#064e3b",950:"#022c22"},teal:{50:"#f0fdfa",100:"#ccfbf1",200:"#99f6e4",300:"#5eead4",400:"#2dd4bf",500:"#14b8a6",600:"#0d9488",700:"#0f766e",800:"#115e59",900:"#134e4a",950:"#042f2e"},cyan:{50:"#ecfeff",100:"#cffafe",200:"#a5f3fc",300:"#67e8f9",400:"#22d3ee",500:"#06b6d4",600:"#0891b2",700:"#0e7490",800:"#155e75",900:"#164e63",950:"#083344"},sky:{50:"#f0f9ff",100:"#e0f2fe",200:"#bae6fd",300:"#7dd3fc",400:"#38bdf8",500:"#0ea5e9",600:"#0284c7",700:"#0369a1",800:"#075985",900:"#0c4a6e",950:"#082f49"},blue:{50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a",950:"#172554"},indigo:{50:"#eef2ff",100:"#e0e7ff",200:"#c7d2fe",300:"#a5b4fc",400:"#818cf8",500:"#6366f1",600:"#4f46e5",700:"#4338ca",800:"#3730a3",900:"#312e81",950:"#1e1b4b"},violet:{50:"#f5f3ff",100:"#ede9fe",200:"#ddd6fe",300:"#c4b5fd",400:"#a78bfa",500:"#8b5cf6",600:"#7c3aed",700:"#6d28d9",800:"#5b21b6",900:"#4c1d95",950:"#2e1065"},purple:{50:"#faf5ff",100:"#f3e8ff",200:"#e9d5ff",300:"#d8b4fe",400:"#c084fc",500:"#a855f7",600:"#9333ea",700:"#7e22ce",800:"#6b21a8",900:"#581c87",950:"#3b0764"},fuchsia:{50:"#fdf4ff",100:"#fae8ff",200:"#f5d0fe",300:"#f0abfc",400:"#e879f9",500:"#d946ef",600:"#c026d3",700:"#a21caf",800:"#86198f",900:"#701a75",950:"#4a044e"},pink:{50:"#fdf2f8",100:"#fce7f3",200:"#fbcfe8",300:"#f9a8d4",400:"#f472b6",500:"#ec4899",600:"#db2777",700:"#be185d",800:"#9d174d",900:"#831843",950:"#500724"},rose:{50:"#fff1f2",100:"#ffe4e6",200:"#fecdd3",300:"#fda4af",400:"#fb7185",500:"#f43f5e",600:"#e11d48",700:"#be123c",800:"#9f1239",900:"#881337",950:"#4c0519"},get lightBlue(){return r({version:"v2.2",from:"lightBlue",to:"sky"}),this.sky},get warmGray(){return r({version:"v3.0",from:"warmGray",to:"stone"}),this.stone},get trueGray(){return r({version:"v3.0",from:"trueGray",to:"neutral"}),this.neutral},get coolGray(){return r({version:"v3.0",from:"coolGray",to:"gray"}),this.gray},get blueGray(){return r({version:"v3.0",from:"blueGray",to:"slate"}),this.slate}}}(yE)),yE}function xE(){if(gE)return mE;gE=1;const e=function(){if(hE)return pE;hE=1;let e=_E();return pE=(e.__esModule?e:{default:e}).default}(),t=e=>e.toFixed(7).replace(/(\.[0-9]+?)0+$/,"$1").replace(/\.0$/,""),n=e=>`${t(e/16)}rem`,r=(e,n)=>`${t(e/n)}em`,i=(e,t)=>{let n=e.replace("#","");n=3===n.length?n.replace(/./g,"$&$&"):n;const r=parseInt(n.substring(0,2),16),i=parseInt(n.substring(2,4),16),o=parseInt(n.substring(4,6),16);return Number.isNaN(r)||Number.isNaN(i)||Number.isNaN(o)?`color-mix(in oklab, ${e} ${t}, transparent)`:`rgb(${r}, ${i}, ${o} / ${t})`};let o={sm:{css:[{fontSize:n(14),lineHeight:t(24/14),p:{marginTop:r(16,14),marginBottom:r(16,14)},'[class~="lead"]':{fontSize:r(18,14),lineHeight:t(28/18),marginTop:r(16,18),marginBottom:r(16,18)},blockquote:{marginTop:r(24,18),marginBottom:r(24,18),paddingInlineStart:r(20,18)},h1:{fontSize:r(30,14),marginTop:"0",marginBottom:r(24,30),lineHeight:t(1.2)},h2:{fontSize:r(20,14),marginTop:r(32,20),marginBottom:r(16,20),lineHeight:t(1.4)},h3:{fontSize:r(18,14),marginTop:r(28,18),marginBottom:r(8,18),lineHeight:t(28/18)},h4:{marginTop:r(20,14),marginBottom:r(8,14),lineHeight:t(20/14)},img:{marginTop:r(24,14),marginBottom:r(24,14)},picture:{marginTop:r(24,14),marginBottom:r(24,14)},"picture > img":{marginTop:"0",marginBottom:"0"},video:{marginTop:r(24,14),marginBottom:r(24,14)},kbd:{fontSize:r(12,14),borderRadius:n(5),paddingTop:r(2,14),paddingInlineEnd:r(5,14),paddingBottom:r(2,14),paddingInlineStart:r(5,14)},code:{fontSize:r(12,14)},"h2 code":{fontSize:r(18,20)},"h3 code":{fontSize:r(16,18)},pre:{fontSize:r(12,14),lineHeight:t(20/12),marginTop:r(20,12),marginBottom:r(20,12),borderRadius:n(4),paddingTop:r(8,12),paddingInlineEnd:r(12,12),paddingBottom:r(8,12),paddingInlineStart:r(12,12)},ol:{marginTop:r(16,14),marginBottom:r(16,14),paddingInlineStart:r(22,14)},ul:{marginTop:r(16,14),marginBottom:r(16,14),paddingInlineStart:r(22,14)},li:{marginTop:r(4,14),marginBottom:r(4,14)},"ol > li":{paddingInlineStart:r(6,14)},"ul > li":{paddingInlineStart:r(6,14)},"> ul > li p":{marginTop:r(8,14),marginBottom:r(8,14)},"> ul > li > p:first-child":{marginTop:r(16,14)},"> ul > li > p:last-child":{marginBottom:r(16,14)},"> ol > li > p:first-child":{marginTop:r(16,14)},"> ol > li > p:last-child":{marginBottom:r(16,14)},"ul ul, ul ol, ol ul, ol ol":{marginTop:r(8,14),marginBottom:r(8,14)},dl:{marginTop:r(16,14),marginBottom:r(16,14)},dt:{marginTop:r(16,14)},dd:{marginTop:r(4,14),paddingInlineStart:r(22,14)},hr:{marginTop:r(40,14),marginBottom:r(40,14)},"hr + *":{marginTop:"0"},"h2 + *":{marginTop:"0"},"h3 + *":{marginTop:"0"},"h4 + *":{marginTop:"0"},table:{fontSize:r(12,14),lineHeight:t(1.5)},"thead th":{paddingInlineEnd:r(12,12),paddingBottom:r(8,12),paddingInlineStart:r(12,12)},"thead th:first-child":{paddingInlineStart:"0"},"thead th:last-child":{paddingInlineEnd:"0"},"tbody td, tfoot td":{paddingTop:r(8,12),paddingInlineEnd:r(12,12),paddingBottom:r(8,12),paddingInlineStart:r(12,12)},"tbody td:first-child, tfoot td:first-child":{paddingInlineStart:"0"},"tbody td:last-child, tfoot td:last-child":{paddingInlineEnd:"0"},figure:{marginTop:r(24,14),marginBottom:r(24,14)},"figure > *":{marginTop:"0",marginBottom:"0"},figcaption:{fontSize:r(12,14),lineHeight:t(16/12),marginTop:r(8,12)}},{"> :first-child":{marginTop:"0"},"> :last-child":{marginBottom:"0"}}]},base:{css:[{fontSize:n(16),lineHeight:t(1.75),p:{marginTop:r(20,16),marginBottom:r(20,16)},'[class~="lead"]':{fontSize:r(20,16),lineHeight:t(1.6),marginTop:r(24,20),marginBottom:r(24,20)},blockquote:{marginTop:r(32,20),marginBottom:r(32,20),paddingInlineStart:r(20,20)},h1:{fontSize:r(36,16),marginTop:"0",marginBottom:r(32,36),lineHeight:t(40/36)},h2:{fontSize:r(24,16),marginTop:r(48,24),marginBottom:r(24,24),lineHeight:t(32/24)},h3:{fontSize:r(20,16),marginTop:r(32,20),marginBottom:r(12,20),lineHeight:t(1.6)},h4:{marginTop:r(24,16),marginBottom:r(8,16),lineHeight:t(1.5)},img:{marginTop:r(32,16),marginBottom:r(32,16)},picture:{marginTop:r(32,16),marginBottom:r(32,16)},"picture > img":{marginTop:"0",marginBottom:"0"},video:{marginTop:r(32,16),marginBottom:r(32,16)},kbd:{fontSize:r(14,16),borderRadius:n(5),paddingTop:r(3,16),paddingInlineEnd:r(6,16),paddingBottom:r(3,16),paddingInlineStart:r(6,16)},code:{fontSize:r(14,16)},"h2 code":{fontSize:r(21,24)},"h3 code":{fontSize:r(18,20)},pre:{fontSize:r(14,16),lineHeight:t(24/14),marginTop:r(24,14),marginBottom:r(24,14),borderRadius:n(6),paddingTop:r(12,14),paddingInlineEnd:r(16,14),paddingBottom:r(12,14),paddingInlineStart:r(16,14)},ol:{marginTop:r(20,16),marginBottom:r(20,16),paddingInlineStart:r(26,16)},ul:{marginTop:r(20,16),marginBottom:r(20,16),paddingInlineStart:r(26,16)},li:{marginTop:r(8,16),marginBottom:r(8,16)},"ol > li":{paddingInlineStart:r(6,16)},"ul > li":{paddingInlineStart:r(6,16)},"> ul > li p":{marginTop:r(12,16),marginBottom:r(12,16)},"> ul > li > p:first-child":{marginTop:r(20,16)},"> ul > li > p:last-child":{marginBottom:r(20,16)},"> ol > li > p:first-child":{marginTop:r(20,16)},"> ol > li > p:last-child":{marginBottom:r(20,16)},"ul ul, ul ol, ol ul, ol ol":{marginTop:r(12,16),marginBottom:r(12,16)},dl:{marginTop:r(20,16),marginBottom:r(20,16)},dt:{marginTop:r(20,16)},dd:{marginTop:r(8,16),paddingInlineStart:r(26,16)},hr:{marginTop:r(48,16),marginBottom:r(48,16)},"hr + *":{marginTop:"0"},"h2 + *":{marginTop:"0"},"h3 + *":{marginTop:"0"},"h4 + *":{marginTop:"0"},table:{fontSize:r(14,16),lineHeight:t(24/14)},"thead th":{paddingInlineEnd:r(8,14),paddingBottom:r(8,14),paddingInlineStart:r(8,14)},"thead th:first-child":{paddingInlineStart:"0"},"thead th:last-child":{paddingInlineEnd:"0"},"tbody td, tfoot td":{paddingTop:r(8,14),paddingInlineEnd:r(8,14),paddingBottom:r(8,14),paddingInlineStart:r(8,14)},"tbody td:first-child, tfoot td:first-child":{paddingInlineStart:"0"},"tbody td:last-child, tfoot td:last-child":{paddingInlineEnd:"0"},figure:{marginTop:r(32,16),marginBottom:r(32,16)},"figure > *":{marginTop:"0",marginBottom:"0"},figcaption:{fontSize:r(14,16),lineHeight:t(20/14),marginTop:r(12,14)}},{"> :first-child":{marginTop:"0"},"> :last-child":{marginBottom:"0"}}]},lg:{css:[{fontSize:n(18),lineHeight:t(32/18),p:{marginTop:r(24,18),marginBottom:r(24,18)},'[class~="lead"]':{fontSize:r(22,18),lineHeight:t(32/22),marginTop:r(24,22),marginBottom:r(24,22)},blockquote:{marginTop:r(40,24),marginBottom:r(40,24),paddingInlineStart:r(24,24)},h1:{fontSize:r(48,18),marginTop:"0",marginBottom:r(40,48),lineHeight:t(1)},h2:{fontSize:r(30,18),marginTop:r(56,30),marginBottom:r(32,30),lineHeight:t(40/30)},h3:{fontSize:r(24,18),marginTop:r(40,24),marginBottom:r(16,24),lineHeight:t(1.5)},h4:{marginTop:r(32,18),marginBottom:r(8,18),lineHeight:t(28/18)},img:{marginTop:r(32,18),marginBottom:r(32,18)},picture:{marginTop:r(32,18),marginBottom:r(32,18)},"picture > img":{marginTop:"0",marginBottom:"0"},video:{marginTop:r(32,18),marginBottom:r(32,18)},kbd:{fontSize:r(16,18),borderRadius:n(5),paddingTop:r(4,18),paddingInlineEnd:r(8,18),paddingBottom:r(4,18),paddingInlineStart:r(8,18)},code:{fontSize:r(16,18)},"h2 code":{fontSize:r(26,30)},"h3 code":{fontSize:r(21,24)},pre:{fontSize:r(16,18),lineHeight:t(1.75),marginTop:r(32,16),marginBottom:r(32,16),borderRadius:n(6),paddingTop:r(16,16),paddingInlineEnd:r(24,16),paddingBottom:r(16,16),paddingInlineStart:r(24,16)},ol:{marginTop:r(24,18),marginBottom:r(24,18),paddingInlineStart:r(28,18)},ul:{marginTop:r(24,18),marginBottom:r(24,18),paddingInlineStart:r(28,18)},li:{marginTop:r(12,18),marginBottom:r(12,18)},"ol > li":{paddingInlineStart:r(8,18)},"ul > li":{paddingInlineStart:r(8,18)},"> ul > li p":{marginTop:r(16,18),marginBottom:r(16,18)},"> ul > li > p:first-child":{marginTop:r(24,18)},"> ul > li > p:last-child":{marginBottom:r(24,18)},"> ol > li > p:first-child":{marginTop:r(24,18)},"> ol > li > p:last-child":{marginBottom:r(24,18)},"ul ul, ul ol, ol ul, ol ol":{marginTop:r(16,18),marginBottom:r(16,18)},dl:{marginTop:r(24,18),marginBottom:r(24,18)},dt:{marginTop:r(24,18)},dd:{marginTop:r(12,18),paddingInlineStart:r(28,18)},hr:{marginTop:r(56,18),marginBottom:r(56,18)},"hr + *":{marginTop:"0"},"h2 + *":{marginTop:"0"},"h3 + *":{marginTop:"0"},"h4 + *":{marginTop:"0"},table:{fontSize:r(16,18),lineHeight:t(1.5)},"thead th":{paddingInlineEnd:r(12,16),paddingBottom:r(12,16),paddingInlineStart:r(12,16)},"thead th:first-child":{paddingInlineStart:"0"},"thead th:last-child":{paddingInlineEnd:"0"},"tbody td, tfoot td":{paddingTop:r(12,16),paddingInlineEnd:r(12,16),paddingBottom:r(12,16),paddingInlineStart:r(12,16)},"tbody td:first-child, tfoot td:first-child":{paddingInlineStart:"0"},"tbody td:last-child, tfoot td:last-child":{paddingInlineEnd:"0"},figure:{marginTop:r(32,18),marginBottom:r(32,18)},"figure > *":{marginTop:"0",marginBottom:"0"},figcaption:{fontSize:r(16,18),lineHeight:t(1.5),marginTop:r(16,16)}},{"> :first-child":{marginTop:"0"},"> :last-child":{marginBottom:"0"}}]},xl:{css:[{fontSize:n(20),lineHeight:t(1.8),p:{marginTop:r(24,20),marginBottom:r(24,20)},'[class~="lead"]':{fontSize:r(24,20),lineHeight:t(1.5),marginTop:r(24,24),marginBottom:r(24,24)},blockquote:{marginTop:r(48,30),marginBottom:r(48,30),paddingInlineStart:r(32,30)},h1:{fontSize:r(56,20),marginTop:"0",marginBottom:r(48,56),lineHeight:t(1)},h2:{fontSize:r(36,20),marginTop:r(56,36),marginBottom:r(32,36),lineHeight:t(40/36)},h3:{fontSize:r(30,20),marginTop:r(48,30),marginBottom:r(20,30),lineHeight:t(40/30)},h4:{marginTop:r(36,20),marginBottom:r(12,20),lineHeight:t(1.6)},img:{marginTop:r(40,20),marginBottom:r(40,20)},picture:{marginTop:r(40,20),marginBottom:r(40,20)},"picture > img":{marginTop:"0",marginBottom:"0"},video:{marginTop:r(40,20),marginBottom:r(40,20)},kbd:{fontSize:r(18,20),borderRadius:n(5),paddingTop:r(5,20),paddingInlineEnd:r(8,20),paddingBottom:r(5,20),paddingInlineStart:r(8,20)},code:{fontSize:r(18,20)},"h2 code":{fontSize:r(31,36)},"h3 code":{fontSize:r(27,30)},pre:{fontSize:r(18,20),lineHeight:t(32/18),marginTop:r(36,18),marginBottom:r(36,18),borderRadius:n(8),paddingTop:r(20,18),paddingInlineEnd:r(24,18),paddingBottom:r(20,18),paddingInlineStart:r(24,18)},ol:{marginTop:r(24,20),marginBottom:r(24,20),paddingInlineStart:r(32,20)},ul:{marginTop:r(24,20),marginBottom:r(24,20),paddingInlineStart:r(32,20)},li:{marginTop:r(12,20),marginBottom:r(12,20)},"ol > li":{paddingInlineStart:r(8,20)},"ul > li":{paddingInlineStart:r(8,20)},"> ul > li p":{marginTop:r(16,20),marginBottom:r(16,20)},"> ul > li > p:first-child":{marginTop:r(24,20)},"> ul > li > p:last-child":{marginBottom:r(24,20)},"> ol > li > p:first-child":{marginTop:r(24,20)},"> ol > li > p:last-child":{marginBottom:r(24,20)},"ul ul, ul ol, ol ul, ol ol":{marginTop:r(16,20),marginBottom:r(16,20)},dl:{marginTop:r(24,20),marginBottom:r(24,20)},dt:{marginTop:r(24,20)},dd:{marginTop:r(12,20),paddingInlineStart:r(32,20)},hr:{marginTop:r(56,20),marginBottom:r(56,20)},"hr + *":{marginTop:"0"},"h2 + *":{marginTop:"0"},"h3 + *":{marginTop:"0"},"h4 + *":{marginTop:"0"},table:{fontSize:r(18,20),lineHeight:t(28/18)},"thead th":{paddingInlineEnd:r(12,18),paddingBottom:r(16,18),paddingInlineStart:r(12,18)},"thead th:first-child":{paddingInlineStart:"0"},"thead th:last-child":{paddingInlineEnd:"0"},"tbody td, tfoot td":{paddingTop:r(16,18),paddingInlineEnd:r(12,18),paddingBottom:r(16,18),paddingInlineStart:r(12,18)},"tbody td:first-child, tfoot td:first-child":{paddingInlineStart:"0"},"tbody td:last-child, tfoot td:last-child":{paddingInlineEnd:"0"},figure:{marginTop:r(40,20),marginBottom:r(40,20)},"figure > *":{marginTop:"0",marginBottom:"0"},figcaption:{fontSize:r(18,20),lineHeight:t(28/18),marginTop:r(18,18)}},{"> :first-child":{marginTop:"0"},"> :last-child":{marginBottom:"0"}}]},"2xl":{css:[{fontSize:n(24),lineHeight:t(40/24),p:{marginTop:r(32,24),marginBottom:r(32,24)},'[class~="lead"]':{fontSize:r(30,24),lineHeight:t(44/30),marginTop:r(32,30),marginBottom:r(32,30)},blockquote:{marginTop:r(64,36),marginBottom:r(64,36),paddingInlineStart:r(40,36)},h1:{fontSize:r(64,24),marginTop:"0",marginBottom:r(56,64),lineHeight:t(1)},h2:{fontSize:r(48,24),marginTop:r(72,48),marginBottom:r(40,48),lineHeight:t(52/48)},h3:{fontSize:r(36,24),marginTop:r(56,36),marginBottom:r(24,36),lineHeight:t(44/36)},h4:{marginTop:r(40,24),marginBottom:r(16,24),lineHeight:t(1.5)},img:{marginTop:r(48,24),marginBottom:r(48,24)},picture:{marginTop:r(48,24),marginBottom:r(48,24)},"picture > img":{marginTop:"0",marginBottom:"0"},video:{marginTop:r(48,24),marginBottom:r(48,24)},kbd:{fontSize:r(20,24),borderRadius:n(6),paddingTop:r(6,24),paddingInlineEnd:r(8,24),paddingBottom:r(6,24),paddingInlineStart:r(8,24)},code:{fontSize:r(20,24)},"h2 code":{fontSize:r(42,48)},"h3 code":{fontSize:r(32,36)},pre:{fontSize:r(20,24),lineHeight:t(1.8),marginTop:r(40,20),marginBottom:r(40,20),borderRadius:n(8),paddingTop:r(24,20),paddingInlineEnd:r(32,20),paddingBottom:r(24,20),paddingInlineStart:r(32,20)},ol:{marginTop:r(32,24),marginBottom:r(32,24),paddingInlineStart:r(38,24)},ul:{marginTop:r(32,24),marginBottom:r(32,24),paddingInlineStart:r(38,24)},li:{marginTop:r(12,24),marginBottom:r(12,24)},"ol > li":{paddingInlineStart:r(10,24)},"ul > li":{paddingInlineStart:r(10,24)},"> ul > li p":{marginTop:r(20,24),marginBottom:r(20,24)},"> ul > li > p:first-child":{marginTop:r(32,24)},"> ul > li > p:last-child":{marginBottom:r(32,24)},"> ol > li > p:first-child":{marginTop:r(32,24)},"> ol > li > p:last-child":{marginBottom:r(32,24)},"ul ul, ul ol, ol ul, ol ol":{marginTop:r(16,24),marginBottom:r(16,24)},dl:{marginTop:r(32,24),marginBottom:r(32,24)},dt:{marginTop:r(32,24)},dd:{marginTop:r(12,24),paddingInlineStart:r(38,24)},hr:{marginTop:r(72,24),marginBottom:r(72,24)},"hr + *":{marginTop:"0"},"h2 + *":{marginTop:"0"},"h3 + *":{marginTop:"0"},"h4 + *":{marginTop:"0"},table:{fontSize:r(20,24),lineHeight:t(1.4)},"thead th":{paddingInlineEnd:r(12,20),paddingBottom:r(16,20),paddingInlineStart:r(12,20)},"thead th:first-child":{paddingInlineStart:"0"},"thead th:last-child":{paddingInlineEnd:"0"},"tbody td, tfoot td":{paddingTop:r(16,20),paddingInlineEnd:r(12,20),paddingBottom:r(16,20),paddingInlineStart:r(12,20)},"tbody td:first-child, tfoot td:first-child":{paddingInlineStart:"0"},"tbody td:last-child, tfoot td:last-child":{paddingInlineEnd:"0"},figure:{marginTop:r(48,24),marginBottom:r(48,24)},"figure > *":{marginTop:"0",marginBottom:"0"},figcaption:{fontSize:r(20,24),lineHeight:t(1.6),marginTop:r(20,20)}},{"> :first-child":{marginTop:"0"},"> :last-child":{marginBottom:"0"}}]},slate:{css:{"--tw-prose-body":e.slate[700],"--tw-prose-headings":e.slate[900],"--tw-prose-lead":e.slate[600],"--tw-prose-links":e.slate[900],"--tw-prose-bold":e.slate[900],"--tw-prose-counters":e.slate[500],"--tw-prose-bullets":e.slate[300],"--tw-prose-hr":e.slate[200],"--tw-prose-quotes":e.slate[900],"--tw-prose-quote-borders":e.slate[200],"--tw-prose-captions":e.slate[500],"--tw-prose-kbd":e.slate[900],"--tw-prose-kbd-shadows":i(e.slate[900],"10%"),"--tw-prose-code":e.slate[900],"--tw-prose-pre-code":e.slate[200],"--tw-prose-pre-bg":e.slate[800],"--tw-prose-th-borders":e.slate[300],"--tw-prose-td-borders":e.slate[200],"--tw-prose-invert-body":e.slate[300],"--tw-prose-invert-headings":e.white,"--tw-prose-invert-lead":e.slate[400],"--tw-prose-invert-links":e.white,"--tw-prose-invert-bold":e.white,"--tw-prose-invert-counters":e.slate[400],"--tw-prose-invert-bullets":e.slate[600],"--tw-prose-invert-hr":e.slate[700],"--tw-prose-invert-quotes":e.slate[100],"--tw-prose-invert-quote-borders":e.slate[700],"--tw-prose-invert-captions":e.slate[400],"--tw-prose-invert-kbd":e.white,"--tw-prose-invert-kbd-shadows":i(e.white,"10%"),"--tw-prose-invert-code":e.white,"--tw-prose-invert-pre-code":e.slate[300],"--tw-prose-invert-pre-bg":"rgb(0 0 0 / 50%)","--tw-prose-invert-th-borders":e.slate[600],"--tw-prose-invert-td-borders":e.slate[700]}},gray:{css:{"--tw-prose-body":e.gray[700],"--tw-prose-headings":e.gray[900],"--tw-prose-lead":e.gray[600],"--tw-prose-links":e.gray[900],"--tw-prose-bold":e.gray[900],"--tw-prose-counters":e.gray[500],"--tw-prose-bullets":e.gray[300],"--tw-prose-hr":e.gray[200],"--tw-prose-quotes":e.gray[900],"--tw-prose-quote-borders":e.gray[200],"--tw-prose-captions":e.gray[500],"--tw-prose-kbd":e.gray[900],"--tw-prose-kbd-shadows":i(e.gray[900],"10%"),"--tw-prose-code":e.gray[900],"--tw-prose-pre-code":e.gray[200],"--tw-prose-pre-bg":e.gray[800],"--tw-prose-th-borders":e.gray[300],"--tw-prose-td-borders":e.gray[200],"--tw-prose-invert-body":e.gray[300],"--tw-prose-invert-headings":e.white,"--tw-prose-invert-lead":e.gray[400],"--tw-prose-invert-links":e.white,"--tw-prose-invert-bold":e.white,"--tw-prose-invert-counters":e.gray[400],"--tw-prose-invert-bullets":e.gray[600],"--tw-prose-invert-hr":e.gray[700],"--tw-prose-invert-quotes":e.gray[100],"--tw-prose-invert-quote-borders":e.gray[700],"--tw-prose-invert-captions":e.gray[400],"--tw-prose-invert-kbd":e.white,"--tw-prose-invert-kbd-shadows":i(e.white,"10%"),"--tw-prose-invert-code":e.white,"--tw-prose-invert-pre-code":e.gray[300],"--tw-prose-invert-pre-bg":"rgb(0 0 0 / 50%)","--tw-prose-invert-th-borders":e.gray[600],"--tw-prose-invert-td-borders":e.gray[700]}},zinc:{css:{"--tw-prose-body":e.zinc[700],"--tw-prose-headings":e.zinc[900],"--tw-prose-lead":e.zinc[600],"--tw-prose-links":e.zinc[900],"--tw-prose-bold":e.zinc[900],"--tw-prose-counters":e.zinc[500],"--tw-prose-bullets":e.zinc[300],"--tw-prose-hr":e.zinc[200],"--tw-prose-quotes":e.zinc[900],"--tw-prose-quote-borders":e.zinc[200],"--tw-prose-captions":e.zinc[500],"--tw-prose-kbd":e.zinc[900],"--tw-prose-kbd-shadows":i(e.zinc[900],"10%"),"--tw-prose-code":e.zinc[900],"--tw-prose-pre-code":e.zinc[200],"--tw-prose-pre-bg":e.zinc[800],"--tw-prose-th-borders":e.zinc[300],"--tw-prose-td-borders":e.zinc[200],"--tw-prose-invert-body":e.zinc[300],"--tw-prose-invert-headings":e.white,"--tw-prose-invert-lead":e.zinc[400],"--tw-prose-invert-links":e.white,"--tw-prose-invert-bold":e.white,"--tw-prose-invert-counters":e.zinc[400],"--tw-prose-invert-bullets":e.zinc[600],"--tw-prose-invert-hr":e.zinc[700],"--tw-prose-invert-quotes":e.zinc[100],"--tw-prose-invert-quote-borders":e.zinc[700],"--tw-prose-invert-captions":e.zinc[400],"--tw-prose-invert-kbd":e.white,"--tw-prose-invert-kbd-shadows":i(e.white,"10%"),"--tw-prose-invert-code":e.white,"--tw-prose-invert-pre-code":e.zinc[300],"--tw-prose-invert-pre-bg":"rgb(0 0 0 / 50%)","--tw-prose-invert-th-borders":e.zinc[600],"--tw-prose-invert-td-borders":e.zinc[700]}},neutral:{css:{"--tw-prose-body":e.neutral[700],"--tw-prose-headings":e.neutral[900],"--tw-prose-lead":e.neutral[600],"--tw-prose-links":e.neutral[900],"--tw-prose-bold":e.neutral[900],"--tw-prose-counters":e.neutral[500],"--tw-prose-bullets":e.neutral[300],"--tw-prose-hr":e.neutral[200],"--tw-prose-quotes":e.neutral[900],"--tw-prose-quote-borders":e.neutral[200],"--tw-prose-captions":e.neutral[500],"--tw-prose-kbd":e.neutral[900],"--tw-prose-kbd-shadows":i(e.neutral[900],"10%"),"--tw-prose-code":e.neutral[900],"--tw-prose-pre-code":e.neutral[200],"--tw-prose-pre-bg":e.neutral[800],"--tw-prose-th-borders":e.neutral[300],"--tw-prose-td-borders":e.neutral[200],"--tw-prose-invert-body":e.neutral[300],"--tw-prose-invert-headings":e.white,"--tw-prose-invert-lead":e.neutral[400],"--tw-prose-invert-links":e.white,"--tw-prose-invert-bold":e.white,"--tw-prose-invert-counters":e.neutral[400],"--tw-prose-invert-bullets":e.neutral[600],"--tw-prose-invert-hr":e.neutral[700],"--tw-prose-invert-quotes":e.neutral[100],"--tw-prose-invert-quote-borders":e.neutral[700],"--tw-prose-invert-captions":e.neutral[400],"--tw-prose-invert-kbd":e.white,"--tw-prose-invert-kbd-shadows":i(e.white,"10%"),"--tw-prose-invert-code":e.white,"--tw-prose-invert-pre-code":e.neutral[300],"--tw-prose-invert-pre-bg":"rgb(0 0 0 / 50%)","--tw-prose-invert-th-borders":e.neutral[600],"--tw-prose-invert-td-borders":e.neutral[700]}},stone:{css:{"--tw-prose-body":e.stone[700],"--tw-prose-headings":e.stone[900],"--tw-prose-lead":e.stone[600],"--tw-prose-links":e.stone[900],"--tw-prose-bold":e.stone[900],"--tw-prose-counters":e.stone[500],"--tw-prose-bullets":e.stone[300],"--tw-prose-hr":e.stone[200],"--tw-prose-quotes":e.stone[900],"--tw-prose-quote-borders":e.stone[200],"--tw-prose-captions":e.stone[500],"--tw-prose-kbd":e.stone[900],"--tw-prose-kbd-shadows":i(e.stone[900],"10%"),"--tw-prose-code":e.stone[900],"--tw-prose-pre-code":e.stone[200],"--tw-prose-pre-bg":e.stone[800],"--tw-prose-th-borders":e.stone[300],"--tw-prose-td-borders":e.stone[200],"--tw-prose-invert-body":e.stone[300],"--tw-prose-invert-headings":e.white,"--tw-prose-invert-lead":e.stone[400],"--tw-prose-invert-links":e.white,"--tw-prose-invert-bold":e.white,"--tw-prose-invert-counters":e.stone[400],"--tw-prose-invert-bullets":e.stone[600],"--tw-prose-invert-hr":e.stone[700],"--tw-prose-invert-quotes":e.stone[100],"--tw-prose-invert-quote-borders":e.stone[700],"--tw-prose-invert-captions":e.stone[400],"--tw-prose-invert-kbd":e.white,"--tw-prose-invert-kbd-shadows":i(e.white,"10%"),"--tw-prose-invert-code":e.white,"--tw-prose-invert-pre-code":e.stone[300],"--tw-prose-invert-pre-bg":"rgb(0 0 0 / 50%)","--tw-prose-invert-th-borders":e.stone[600],"--tw-prose-invert-td-borders":e.stone[700]}},red:{css:{"--tw-prose-links":e.red[600],"--tw-prose-invert-links":e.red[500]}},orange:{css:{"--tw-prose-links":e.orange[600],"--tw-prose-invert-links":e.orange[500]}},amber:{css:{"--tw-prose-links":e.amber[600],"--tw-prose-invert-links":e.amber[500]}},yellow:{css:{"--tw-prose-links":e.yellow[600],"--tw-prose-invert-links":e.yellow[500]}},lime:{css:{"--tw-prose-links":e.lime[600],"--tw-prose-invert-links":e.lime[500]}},green:{css:{"--tw-prose-links":e.green[600],"--tw-prose-invert-links":e.green[500]}},emerald:{css:{"--tw-prose-links":e.emerald[600],"--tw-prose-invert-links":e.emerald[500]}},teal:{css:{"--tw-prose-links":e.teal[600],"--tw-prose-invert-links":e.teal[500]}},cyan:{css:{"--tw-prose-links":e.cyan[600],"--tw-prose-invert-links":e.cyan[500]}},sky:{css:{"--tw-prose-links":e.sky[600],"--tw-prose-invert-links":e.sky[500]}},blue:{css:{"--tw-prose-links":e.blue[600],"--tw-prose-invert-links":e.blue[500]}},indigo:{css:{"--tw-prose-links":e.indigo[600],"--tw-prose-invert-links":e.indigo[500]}},violet:{css:{"--tw-prose-links":e.violet[600],"--tw-prose-invert-links":e.violet[500]}},purple:{css:{"--tw-prose-links":e.purple[600],"--tw-prose-invert-links":e.purple[500]}},fuchsia:{css:{"--tw-prose-links":e.fuchsia[600],"--tw-prose-invert-links":e.fuchsia[500]}},pink:{css:{"--tw-prose-links":e.pink[600],"--tw-prose-invert-links":e.pink[500]}},rose:{css:{"--tw-prose-links":e.rose[600],"--tw-prose-invert-links":e.rose[500]}},invert:{css:{"--tw-prose-body":"var(--tw-prose-invert-body)","--tw-prose-headings":"var(--tw-prose-invert-headings)","--tw-prose-lead":"var(--tw-prose-invert-lead)","--tw-prose-links":"var(--tw-prose-invert-links)","--tw-prose-bold":"var(--tw-prose-invert-bold)","--tw-prose-counters":"var(--tw-prose-invert-counters)","--tw-prose-bullets":"var(--tw-prose-invert-bullets)","--tw-prose-hr":"var(--tw-prose-invert-hr)","--tw-prose-quotes":"var(--tw-prose-invert-quotes)","--tw-prose-quote-borders":"var(--tw-prose-invert-quote-borders)","--tw-prose-captions":"var(--tw-prose-invert-captions)","--tw-prose-kbd":"var(--tw-prose-invert-kbd)","--tw-prose-kbd-shadows":"var(--tw-prose-invert-kbd-shadows)","--tw-prose-code":"var(--tw-prose-invert-code)","--tw-prose-pre-code":"var(--tw-prose-invert-pre-code)","--tw-prose-pre-bg":"var(--tw-prose-invert-pre-bg)","--tw-prose-th-borders":"var(--tw-prose-invert-th-borders)","--tw-prose-td-borders":"var(--tw-prose-invert-td-borders)"}}};return mE={DEFAULT:{css:[{color:"var(--tw-prose-body)",maxWidth:"65ch",p:{},'[class~="lead"]':{color:"var(--tw-prose-lead)"},a:{color:"var(--tw-prose-links)",textDecoration:"underline",fontWeight:"500"},strong:{color:"var(--tw-prose-bold)",fontWeight:"600"},"a strong":{color:"inherit"},"blockquote strong":{color:"inherit"},"thead th strong":{color:"inherit"},ol:{listStyleType:"decimal"},'ol[type="A"]':{listStyleType:"upper-alpha"},'ol[type="a"]':{listStyleType:"lower-alpha"},'ol[type="A" s]':{listStyleType:"upper-alpha"},'ol[type="a" s]':{listStyleType:"lower-alpha"},'ol[type="I"]':{listStyleType:"upper-roman"},'ol[type="i"]':{listStyleType:"lower-roman"},'ol[type="I" s]':{listStyleType:"upper-roman"},'ol[type="i" s]':{listStyleType:"lower-roman"},'ol[type="1"]':{listStyleType:"decimal"},ul:{listStyleType:"disc"},"ol > li::marker":{fontWeight:"400",color:"var(--tw-prose-counters)"},"ul > li::marker":{color:"var(--tw-prose-bullets)"},dt:{color:"var(--tw-prose-headings)",fontWeight:"600"},hr:{borderColor:"var(--tw-prose-hr)",borderTopWidth:"1px"},blockquote:{fontWeight:"500",fontStyle:"italic",color:"var(--tw-prose-quotes)",borderInlineStartWidth:"0.25rem",borderInlineStartColor:"var(--tw-prose-quote-borders)",quotes:'"\\201C""\\201D""\\2018""\\2019"'},"blockquote p:first-of-type::before":{content:"open-quote"},"blockquote p:last-of-type::after":{content:"close-quote"},h1:{color:"var(--tw-prose-headings)",fontWeight:"800"},"h1 strong":{fontWeight:"900",color:"inherit"},h2:{color:"var(--tw-prose-headings)",fontWeight:"700"},"h2 strong":{fontWeight:"800",color:"inherit"},h3:{color:"var(--tw-prose-headings)",fontWeight:"600"},"h3 strong":{fontWeight:"700",color:"inherit"},h4:{color:"var(--tw-prose-headings)",fontWeight:"600"},"h4 strong":{fontWeight:"700",color:"inherit"},img:{},picture:{display:"block"},video:{},kbd:{fontWeight:"500",fontFamily:"inherit",color:"var(--tw-prose-kbd)",boxShadow:"0 0 0 1px var(--tw-prose-kbd-shadows), 0 3px 0 var(--tw-prose-kbd-shadows)"},code:{color:"var(--tw-prose-code)",fontWeight:"600"},"code::before":{content:'"`"'},"code::after":{content:'"`"'},"a code":{color:"inherit"},"h1 code":{color:"inherit"},"h2 code":{color:"inherit"},"h3 code":{color:"inherit"},"h4 code":{color:"inherit"},"blockquote code":{color:"inherit"},"thead th code":{color:"inherit"},pre:{color:"var(--tw-prose-pre-code)",backgroundColor:"var(--tw-prose-pre-bg)",overflowX:"auto",fontWeight:"400"},"pre code":{backgroundColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0",fontWeight:"inherit",color:"inherit",fontSize:"inherit",fontFamily:"inherit",lineHeight:"inherit"},"pre code::before":{content:"none"},"pre code::after":{content:"none"},table:{width:"100%",tableLayout:"auto",marginTop:r(32,16),marginBottom:r(32,16)},thead:{borderBottomWidth:"1px",borderBottomColor:"var(--tw-prose-th-borders)"},"thead th":{color:"var(--tw-prose-headings)",fontWeight:"600",verticalAlign:"bottom"},"tbody tr":{borderBottomWidth:"1px",borderBottomColor:"var(--tw-prose-td-borders)"},"tbody tr:last-child":{borderBottomWidth:"0"},"tbody td":{verticalAlign:"baseline"},tfoot:{borderTopWidth:"1px",borderTopColor:"var(--tw-prose-th-borders)"},"tfoot td":{verticalAlign:"top"},"th, td":{textAlign:"start"},"figure > *":{},figcaption:{color:"var(--tw-prose-captions)"}},o.gray.css,...o.base.css]},...o}}var EE,SE={exports:{}},kE={exports:{}},TE={exports:{}},CE={exports:{}},AE={exports:{}},IE={exports:{}},OE={},NE={exports:{}};function DE(){return EE||(EE=1,function(e,t){function n(e){for(var t=e.toLowerCase(),n="",r=!1,i=0;i<6&&void 0!==t[i];i++){var o=t.charCodeAt(i);if(r=32===o,!(o>=97&&o<=102||o>=48&&o<=57))break;n+=t[i]}if(0!==n.length){var a=parseInt(n,16);return a>=55296&&a<=57343||0===a||a>1114111?["�",n.length+(r?1:0)]:[String.fromCodePoint(a),n.length+(r?1:0)]}}t.__esModule=!0,t.default=function(e){if(!r.test(e))return e;for(var t="",i=0;i<e.length;i++)if("\\"!==e[i])t+=e[i];else{var o=n(e.slice(i+1,i+7));if(void 0!==o){t+=o[0],i+=o[1];continue}if("\\"===e[i+1]){t+="\\",i++;continue}e.length===i+1&&(t+=e[i])}return t};var r=/\\/;e.exports=t.default}(NE,NE.exports)),NE.exports}var RE,ME={exports:{}};var PE,FE={exports:{}};var LE,jE,BE,$E={exports:{}};function zE(){if(jE)return OE;jE=1,OE.__esModule=!0,OE.stripComments=OE.ensureObject=OE.getProp=OE.unesc=void 0;var e=a(DE());OE.unesc=e.default;var t,n,r=a((RE||(RE=1,t=ME,(n=ME.exports).__esModule=!0,n.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(;n.length>0;){var i=n.shift();if(!e[i])return;e=e[i]}return e},t.exports=n.default),ME.exports));OE.getProp=r.default;var i=a(function(){return PE||(PE=1,e=FE,(t=FE.exports).__esModule=!0,t.default=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(;n.length>0;){var i=n.shift();e[i]||(e[i]={}),e=e[i]}},e.exports=t.default),FE.exports;var e,t}());OE.ensureObject=i.default;var o=a(function(){return LE||(LE=1,e=$E,(t=$E.exports).__esModule=!0,t.default=function(e){for(var t="",n=e.indexOf("/*"),r=0;n>=0;){t+=e.slice(r,n);var i=e.indexOf("*/",n+2);if(i<0)return t;r=i+2,n=e.indexOf("/*",r)}return t+e.slice(r)},e.exports=t.default),$E.exports;var e,t}());function a(e){return e&&e.__esModule?e:{default:e}}return OE.stripComments=o.default,OE}function UE(){return BE||(BE=1,function(e,t){t.__esModule=!0,t.default=void 0;var n=zE();function r(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}var i=function e(t,n){if("object"!=typeof t||null===t)return t;var r=new t.constructor;for(var i in t)if(t.hasOwnProperty(i)){var o=t[i];"parent"===i&&"object"===typeof o?n&&(r[i]=n):r[i]=o instanceof Array?o.map(function(t){return e(t,r)}):e(o,r)}return r},o=function(){function e(e){void 0===e&&(e={}),Object.assign(this,e),this.spaces=this.spaces||{},this.spaces.before=this.spaces.before||"",this.spaces.after=this.spaces.after||""}var t=e.prototype;return t.remove=function(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this},t.replaceWith=function(){if(this.parent){for(var e in arguments)this.parent.insertBefore(this,arguments[e]);this.remove()}return this},t.next=function(){return this.parent.at(this.parent.index(this)+1)},t.prev=function(){return this.parent.at(this.parent.index(this)-1)},t.clone=function(e){void 0===e&&(e={});var t=i(this);for(var n in e)t[n]=e[n];return t},t.appendToPropertyAndEscape=function(e,t,n){this.raws||(this.raws={});var r=this[e],i=this.raws[e];this[e]=r+t,i||n!==t?this.raws[e]=(i||r)+n:delete this.raws[e]},t.setPropertyAndEscape=function(e,t,n){this.raws||(this.raws={}),this[e]=t,this.raws[e]=n},t.setPropertyWithoutEscape=function(e,t){this[e]=t,this.raws&&delete this.raws[e]},t.isAtPosition=function(e,t){if(this.source&&this.source.start&&this.source.end)return!(this.source.start.line>e)&&(!(this.source.end.line<e)&&(!(this.source.start.line===e&&this.source.start.column>t)&&!(this.source.end.line===e&&this.source.end.column<t)))},t.stringifyProperty=function(e){return this.raws&&this.raws[e]||this[e]},t.valueToString=function(){return String(this.stringifyProperty("value"))},t.toString=function(){return[this.rawSpaceBefore,this.valueToString(),this.rawSpaceAfter].join("")},r(e,[{key:"rawSpaceBefore",get:function(){var e=this.raws&&this.raws.spaces&&this.raws.spaces.before;return void 0===e&&(e=this.spaces&&this.spaces.before),e||""},set:function(e){(0,n.ensureObject)(this,"raws","spaces"),this.raws.spaces.before=e}},{key:"rawSpaceAfter",get:function(){var e=this.raws&&this.raws.spaces&&this.raws.spaces.after;return void 0===e&&(e=this.spaces.after),e||""},set:function(e){(0,n.ensureObject)(this,"raws","spaces"),this.raws.spaces.after=e}}]),e}();t.default=o,e.exports=t.default}(IE,IE.exports)),IE.exports}var qE,HE,VE,WE={};function GE(){if(qE)return WE;qE=1,WE.__esModule=!0,WE.UNIVERSAL=WE.ATTRIBUTE=WE.CLASS=WE.COMBINATOR=WE.COMMENT=WE.ID=WE.NESTING=WE.PSEUDO=WE.ROOT=WE.SELECTOR=WE.STRING=WE.TAG=void 0;WE.TAG="tag";WE.STRING="string";WE.SELECTOR="selector";WE.ROOT="root";WE.PSEUDO="pseudo";WE.NESTING="nesting";WE.ID="id";WE.COMMENT="comment";WE.COMBINATOR="combinator";WE.CLASS="class";WE.ATTRIBUTE="attribute";return WE.UNIVERSAL="universal",WE}function YE(){return HE||(HE=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(GE());function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).nodes||(n.nodes=[]),n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,u(t,n);var o=r.prototype;return o.append=function(e){return e.parent=this,this.nodes.push(e),this},o.prepend=function(e){return e.parent=this,this.nodes.unshift(e),this},o.at=function(e){return this.nodes[e]},o.index=function(e){return"number"==typeof e?e:this.nodes.indexOf(e)},o.removeChild=function(e){var t;for(var n in e=this.index(e),this.at(e).parent=void 0,this.nodes.splice(e,1),this.indexes)(t=this.indexes[n])>=e&&(this.indexes[n]=t-1);return this},o.removeAll=function(){for(var e,t=a(this.nodes);!(e=t()).done;){e.value.parent=void 0}return this.nodes=[],this},o.empty=function(){return this.removeAll()},o.insertAfter=function(e,t){t.parent=this;var n,r=this.index(e);for(var i in this.nodes.splice(r+1,0,t),t.parent=this,this.indexes)r<=(n=this.indexes[i])&&(this.indexes[i]=n+1);return this},o.insertBefore=function(e,t){t.parent=this;var n,r=this.index(e);for(var i in this.nodes.splice(r,0,t),t.parent=this,this.indexes)(n=this.indexes[i])<=r&&(this.indexes[i]=n+1);return this},o._findChildAtPosition=function(e,t){var n=void 0;return this.each(function(r){if(r.atPosition){var i=r.atPosition(e,t);if(i)return n=i,!1}else if(r.isAtPosition(e,t))return n=r,!1}),n},o.atPosition=function(e,t){return this.isAtPosition(e,t)?this._findChildAtPosition(e,t)||this:void 0},o._inferEndPosition=function(){this.last&&this.last.source&&this.last.source.end&&(this.source=this.source||{},this.source.end=this.source.end||{},Object.assign(this.source.end,this.last.source.end))},o.each=function(e){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach++;var t=this.lastEach;if(this.indexes[t]=0,this.length){for(var n,r;this.indexes[t]<this.length&&(n=this.indexes[t],!1!==(r=e(this.at(n),n)));)this.indexes[t]+=1;return delete this.indexes[t],!1!==r&&void 0}},o.walk=function(e){return this.each(function(t,n){var r=e(t,n);if(!1!==r&&t.length&&(r=t.walk(e)),!1===r)return!1})},o.walkAttributes=function(e){var t=this;return this.walk(function(n){if(n.type===i.ATTRIBUTE)return e.call(t,n)})},o.walkClasses=function(e){var t=this;return this.walk(function(n){if(n.type===i.CLASS)return e.call(t,n)})},o.walkCombinators=function(e){var t=this;return this.walk(function(n){if(n.type===i.COMBINATOR)return e.call(t,n)})},o.walkComments=function(e){var t=this;return this.walk(function(n){if(n.type===i.COMMENT)return e.call(t,n)})},o.walkIds=function(e){var t=this;return this.walk(function(n){if(n.type===i.ID)return e.call(t,n)})},o.walkNesting=function(e){var t=this;return this.walk(function(n){if(n.type===i.NESTING)return e.call(t,n)})},o.walkPseudos=function(e){var t=this;return this.walk(function(n){if(n.type===i.PSEUDO)return e.call(t,n)})},o.walkTags=function(e){var t=this;return this.walk(function(n){if(n.type===i.TAG)return e.call(t,n)})},o.walkUniversals=function(e){var t=this;return this.walk(function(n){if(n.type===i.UNIVERSAL)return e.call(t,n)})},o.split=function(e){var t=this,n=[];return this.reduce(function(r,i,o){var a=e.call(t,i);return n.push(i),a?(r.push(n),n=[]):o===t.length-1&&r.push(n),r},[])},o.map=function(e){return this.nodes.map(e)},o.reduce=function(e,t){return this.nodes.reduce(e,t)},o.every=function(e){return this.nodes.every(e)},o.some=function(e){return this.nodes.some(e)},o.filter=function(e){return this.nodes.filter(e)},o.sort=function(e){return this.nodes.sort(e)},o.toString=function(){return this.map(String).join("")},l(r,[{key:"first",get:function(){return this.at(0)}},{key:"last",get:function(){return this.at(this.length-1)}},{key:"length",get:function(){return this.nodes.length}}]),r}(r.default);t.default=c,e.exports=t.default}(AE,AE.exports)),AE.exports}function KE(){return VE||(VE=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=YE())&&n.__esModule?n:{default:n},i=GE();function o(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.ROOT,n}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,a(t,n);var s=r.prototype;return s.toString=function(){var e=this.reduce(function(e,t){return e.push(String(t)),e},[]).join(",");return this.trailingComma?e+",":e},s.error=function(e,t){return this._error?this._error(e,t):new Error(e)},o(r,[{key:"errorGenerator",set:function(e){this._error=e}}]),r}(r.default);t.default=s,e.exports=t.default}(CE,CE.exports)),CE.exports}var ZE,QE={exports:{}};function XE(){return ZE||(ZE=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=YE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.SELECTOR,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(QE,QE.exports)),QE.exports}var JE,eS,tS,nS={exports:{}};
/*! https://mths.be/cssesc v3.0.0 by @mathias */function rS(){if(eS)return JE;eS=1;var e={}.hasOwnProperty,t=/[ -,\.\/:-@\[-\^`\{-~]/,n=/[ -,\.\/:-@\[\]\^`\{-~]/,r=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,i=function i(o,a){"single"!=(a=function(t,n){if(!t)return n;var r={};for(var i in n)r[i]=e.call(t,i)?t[i]:n[i];return r}(a,i.options)).quotes&&"double"!=a.quotes&&(a.quotes="single");for(var s="double"==a.quotes?'"':"'",l=a.isIdentifier,u=o.charAt(0),c="",d=0,f=o.length;d<f;){var p=o.charAt(d++),h=p.charCodeAt(),m=void 0;if(h<32||h>126){if(h>=55296&&h<=56319&&d<f){var g=o.charCodeAt(d++);56320==(64512&g)?h=((1023&h)<<10)+(1023&g)+65536:d--}m="\\"+h.toString(16).toUpperCase()+" "}else m=a.escapeEverything?t.test(p)?"\\"+p:"\\"+h.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(p)?"\\"+h.toString(16).toUpperCase()+" ":"\\"==p||!l&&('"'==p&&s==p||"'"==p&&s==p)||l&&n.test(p)?"\\"+p:p;c+=m}return l&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(u)&&(c="\\3"+u+" "+c.slice(1))),c=c.replace(r,function(e,t,n){return t&&t.length%2?e:(t||"")+n}),!l&&a.wrap?s+c+s:c};return i.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},i.version="3.0.0",JE=i}function iS(){return tS||(tS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n=a(rS()),r=zE(),i=a(UE()),o=GE();function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){var t,i;function a(t){var n;return(n=e.call(this,t)||this).type=o.CLASS,n._constructed=!0,n}return i=e,(t=a).prototype=Object.create(i.prototype),t.prototype.constructor=t,l(t,i),a.prototype.valueToString=function(){return"."+e.prototype.valueToString.call(this)},s(a,[{key:"value",get:function(){return this._value},set:function(e){if(this._constructed){var t=(0,n.default)(e,{isIdentifier:!0});t!==e?((0,r.ensureObject)(this,"raws"),this.raws.value=t):this.raws&&delete this.raws.value}this._value=e}}]),a}(i.default);t.default=u,e.exports=t.default}(nS,nS.exports)),nS.exports}var oS,aS={exports:{}};function sS(){return oS||(oS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.COMMENT,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(aS,aS.exports)),aS.exports}var lS,uS={exports:{}};function cS(){return lS||(lS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.ID,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r.prototype.valueToString=function(){return"#"+e.prototype.valueToString.call(this)},r}(r.default);t.default=a,e.exports=t.default}(uS,uS.exports)),uS.exports}var dS,fS,pS={exports:{}},hS={exports:{}};function mS(){return dS||(dS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n=i(rS()),r=zE();function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=function(e){var t,i;function s(){return e.apply(this,arguments)||this}i=e,(t=s).prototype=Object.create(i.prototype),t.prototype.constructor=t,a(t,i);var l=s.prototype;return l.qualifiedName=function(e){return this.namespace?this.namespaceString+"|"+e:e},l.valueToString=function(){return this.qualifiedName(e.prototype.valueToString.call(this))},o(s,[{key:"namespace",get:function(){return this._namespace},set:function(e){if(!0===e||"*"===e||"&"===e)return this._namespace=e,void(this.raws&&delete this.raws.namespace);var t=(0,n.default)(e,{isIdentifier:!0});this._namespace=e,t!==e?((0,r.ensureObject)(this,"raws"),this.raws.namespace=t):this.raws&&delete this.raws.namespace}},{key:"ns",get:function(){return this._namespace},set:function(e){this.namespace=e}},{key:"namespaceString",get:function(){if(this.namespace){var e=this.stringifyProperty("namespace");return!0===e?"":e}return""}}]),s}(i(UE()).default);t.default=s,e.exports=t.default}(hS,hS.exports)),hS.exports}function gS(){return fS||(fS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=mS())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.TAG,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(pS,pS.exports)),pS.exports}var yS,vS={exports:{}};function bS(){return yS||(yS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.STRING,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(vS,vS.exports)),vS.exports}var wS,_S={exports:{}};function xS(){return wS||(wS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=YE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.PSEUDO,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r.prototype.toString=function(){var e=this.length?"("+this.map(String).join(",")+")":"";return[this.rawSpaceBefore,this.stringifyProperty("value"),e,this.rawSpaceAfter].join("")},r}(r.default);t.default=a,e.exports=t.default}(_S,_S.exports)),_S.exports}var ES,SS,kS,TS={};function CS(){return kS||(kS=1,function(e){e.__esModule=!0,e.unescapeValue=m,e.default=void 0;var t,n=a(rS()),r=a(DE()),i=a(mS()),o=GE();function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(){if(SS)return ES;function e(e){try{if(!d.localStorage)return!1}catch(n){return!1}var t=d.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}return SS=1,ES=function(t,n){if(e("noDeprecation"))return t;var r=!1;return function(){if(!r){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation"),r=!0}return t.apply(this,arguments)}},ES}(),c=/^('|")([^]*)\1$/,f=u(function(){},"Assigning an attribute a value containing characters that might need to be escaped is deprecated. Call attribute.setValue() instead."),p=u(function(){},"Assigning attr.quoted is deprecated and has no effect. Assign to attr.quoteMark instead."),h=u(function(){},"Constructing an Attribute selector with a value without specifying quoteMark is deprecated. Note: The value should be unescaped now.");function m(e){var t=!1,n=null,i=e,o=i.match(c);return o&&(n=o[1],i=o[2]),(i=(0,r.default)(i))!==e&&(t=!0),{deprecatedUsage:t,unescaped:i,quoteMark:n}}var g=function(e){var t,r;function i(t){var n;return void 0===t&&(t={}),n=e.call(this,function(e){if(void 0!==e.quoteMark)return e;if(void 0===e.value)return e;h();var t=m(e.value),n=t.quoteMark,r=t.unescaped;return e.raws||(e.raws={}),void 0===e.raws.value&&(e.raws.value=e.value),e.value=r,e.quoteMark=n,e}(t))||this,n.type=o.ATTRIBUTE,n.raws=n.raws||{},Object.defineProperty(n.raws,"unquoted",{get:u(function(){return n.value},"attr.raws.unquoted is deprecated. Call attr.value instead."),set:u(function(){return n.value},"Setting attr.raws.unquoted is deprecated and has no effect. attr.value is unescaped by default now.")}),n._constructed=!0,n}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,l(t,r);var a=i.prototype;return a.getQuotedValue=function(e){void 0===e&&(e={});var t=this._determineQuoteMark(e),r=y[t];return(0,n.default)(this._value,r)},a._determineQuoteMark=function(e){return e.smart?this.smartQuoteMark(e):this.preferredQuoteMark(e)},a.setValue=function(e,t){void 0===t&&(t={}),this._value=e,this._quoteMark=this._determineQuoteMark(t),this._syncRawValue()},a.smartQuoteMark=function(e){var t=this.value,r=t.replace(/[^']/g,"").length,o=t.replace(/[^"]/g,"").length;if(r+o===0){var a=(0,n.default)(t,{isIdentifier:!0});if(a===t)return i.NO_QUOTE;var s=this.preferredQuoteMark(e);if(s===i.NO_QUOTE){var l=this.quoteMark||e.quoteMark||i.DOUBLE_QUOTE,u=y[l];if((0,n.default)(t,u).length<a.length)return l}return s}return o===r?this.preferredQuoteMark(e):o<r?i.DOUBLE_QUOTE:i.SINGLE_QUOTE},a.preferredQuoteMark=function(e){var t=e.preferCurrentQuoteMark?this.quoteMark:e.quoteMark;return void 0===t&&(t=e.preferCurrentQuoteMark?e.quoteMark:this.quoteMark),void 0===t&&(t=i.DOUBLE_QUOTE),t},a._syncRawValue=function(){var e=(0,n.default)(this._value,y[this.quoteMark]);e===this._value?this.raws&&delete this.raws.value:this.raws.value=e},a._handleEscapes=function(e,t){if(this._constructed){var r=(0,n.default)(t,{isIdentifier:!0});r!==t?this.raws[e]=r:delete this.raws[e]}},a._spacesFor=function(e){var t=this.spaces[e]||{},n=this.raws.spaces&&this.raws.spaces[e]||{};return Object.assign({before:"",after:""},t,n)},a._stringFor=function(e,t,n){void 0===t&&(t=e),void 0===n&&(n=v);var r=this._spacesFor(t);return n(this.stringifyProperty(e),r)},a.offsetOf=function(e){var t=1,n=this._spacesFor("attribute");if(t+=n.before.length,"namespace"===e||"ns"===e)return this.namespace?t:-1;if("attributeNS"===e)return t;if(t+=this.namespaceString.length,this.namespace&&(t+=1),"attribute"===e)return t;t+=this.stringifyProperty("attribute").length,t+=n.after.length;var r=this._spacesFor("operator");t+=r.before.length;var i=this.stringifyProperty("operator");if("operator"===e)return i?t:-1;t+=i.length,t+=r.after.length;var o=this._spacesFor("value");t+=o.before.length;var a=this.stringifyProperty("value");return"value"===e?a?t:-1:(t+=a.length,t+=o.after.length,t+=this._spacesFor("insensitive").before.length,"insensitive"===e&&this.insensitive?t:-1)},a.toString=function(){var e=this,t=[this.rawSpaceBefore,"["];return t.push(this._stringFor("qualifiedAttribute","attribute")),this.operator&&(this.value||""===this.value)&&(t.push(this._stringFor("operator")),t.push(this._stringFor("value")),t.push(this._stringFor("insensitiveFlag","insensitive",function(t,n){return!(t.length>0)||e.quoted||0!==n.before.length||e.spaces.value&&e.spaces.value.after||(n.before=" "),v(t,n)}))),t.push("]"),t.push(this.rawSpaceAfter),t.join("")},s(i,[{key:"quoted",get:function(){var e=this.quoteMark;return"'"===e||'"'===e},set:function(e){p()}},{key:"quoteMark",get:function(){return this._quoteMark},set:function(e){this._constructed?this._quoteMark!==e&&(this._quoteMark=e,this._syncRawValue()):this._quoteMark=e}},{key:"qualifiedAttribute",get:function(){return this.qualifiedName(this.raws.attribute||this.attribute)}},{key:"insensitiveFlag",get:function(){return this.insensitive?"i":""}},{key:"value",get:function(){return this._value},set:function(e){if(this._constructed){var t=m(e),n=t.deprecatedUsage,r=t.unescaped,i=t.quoteMark;if(n&&f(),r===this._value&&i===this._quoteMark)return;this._value=r,this._quoteMark=i,this._syncRawValue()}else this._value=e}},{key:"attribute",get:function(){return this._attribute},set:function(e){this._handleEscapes("attribute",e),this._attribute=e}}]),i}(i.default);e.default=g,g.NO_QUOTE=null,g.SINGLE_QUOTE="'",g.DOUBLE_QUOTE='"';var y=((t={"'":{quotes:"single",wrap:!0},'"':{quotes:"double",wrap:!0}}).null={isIdentifier:!0},t);function v(e,t){return""+t.before+e+t.after}}(TS)),TS}var AS,IS={exports:{}};function OS(){return AS||(AS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=mS())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.UNIVERSAL,n.value="*",n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(IS,IS.exports)),IS.exports}var NS,DS={exports:{}};function RS(){return NS||(NS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.COMBINATOR,n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(DS,DS.exports)),DS.exports}var MS,PS={exports:{}};function FS(){return MS||(MS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=UE())&&n.__esModule?n:{default:n},i=GE();function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var a=function(e){var t,n;function r(t){var n;return(n=e.call(this,t)||this).type=i.NESTING,n.value="&",n}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n),r}(r.default);t.default=a,e.exports=t.default}(PS,PS.exports)),PS.exports}var LS,jS={exports:{}};var BS,$S,zS,US,qS={},HS={};function VS(){if(BS)return HS;BS=1,HS.__esModule=!0,HS.combinator=HS.word=HS.comment=HS.str=HS.tab=HS.newline=HS.feed=HS.cr=HS.backslash=HS.bang=HS.slash=HS.doubleQuote=HS.singleQuote=HS.space=HS.greaterThan=HS.pipe=HS.equals=HS.plus=HS.caret=HS.tilde=HS.dollar=HS.closeSquare=HS.openSquare=HS.closeParenthesis=HS.openParenthesis=HS.semicolon=HS.colon=HS.comma=HS.at=HS.asterisk=HS.ampersand=void 0;HS.ampersand=38;HS.asterisk=42;HS.at=64;HS.comma=44;HS.colon=58;HS.semicolon=59;HS.openParenthesis=40;HS.closeParenthesis=41;HS.openSquare=91;HS.closeSquare=93;HS.dollar=36;HS.tilde=126;HS.caret=94;HS.plus=43;HS.equals=61;HS.pipe=124;HS.greaterThan=62;HS.space=32;HS.singleQuote=39;HS.doubleQuote=34;HS.slash=47;HS.bang=33;HS.backslash=92;HS.cr=13;HS.feed=12;HS.newline=10;HS.tab=9;HS.str=39;HS.comment=-1;HS.word=-2;return HS.combinator=-3,HS}function WS(){return zS||(zS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r,i=E(KE()),o=E(XE()),a=E(iS()),s=E(sS()),l=E(cS()),u=E(gS()),c=E(bS()),d=E(xS()),f=x(CS()),p=E(OS()),h=E(RS()),m=E(FS()),g=E(function(){return LS||(LS=1,e=jS,(t=jS.exports).__esModule=!0,t.default=function(e){return e.sort(function(e,t){return e-t})},e.exports=t.default),jS.exports;var e,t}()),y=x(($S||($S=1,function(e){e.__esModule=!0,e.default=function(e){var t,n,i,o,a,s,l,u,d,f,p,h,m=[],g=e.css.valueOf(),y=g.length,v=-1,b=1,w=0,_=0;function x(t,n){if(!e.safe)throw e.error("Unclosed "+t,b,w-v,w);u=(g+=n).length-1}for(;w<y;){switch((t=g.charCodeAt(w))===r.newline&&(v=w,b+=1),t){case r.space:case r.tab:case r.newline:case r.cr:case r.feed:u=w;do{u+=1,(t=g.charCodeAt(u))===r.newline&&(v=u,b+=1)}while(t===r.space||t===r.newline||t===r.tab||t===r.cr||t===r.feed);h=r.space,i=b,n=u-v-1,_=u;break;case r.plus:case r.greaterThan:case r.tilde:case r.pipe:u=w;do{u+=1,t=g.charCodeAt(u)}while(t===r.plus||t===r.greaterThan||t===r.tilde||t===r.pipe);h=r.combinator,i=b,n=w-v,_=u;break;case r.asterisk:case r.ampersand:case r.bang:case r.comma:case r.equals:case r.dollar:case r.caret:case r.openSquare:case r.closeSquare:case r.colon:case r.semicolon:case r.openParenthesis:case r.closeParenthesis:h=t,i=b,n=w-v,_=(u=w)+1;break;case r.singleQuote:case r.doubleQuote:p=t===r.singleQuote?"'":'"',u=w;do{for(o=!1,-1===(u=g.indexOf(p,u+1))&&x("quote",p),a=u;g.charCodeAt(a-1)===r.backslash;)a-=1,o=!o}while(o);h=r.str,i=b,n=w-v,_=u+1;break;default:t===r.slash&&g.charCodeAt(w+1)===r.asterisk?(0===(u=g.indexOf("*/",w+2)+1)&&x("comment","*/"),(s=(l=g.slice(w,u+1).split("\n")).length-1)>0?(d=b+s,f=u-l[s].length):(d=b,f=v),h=r.comment,b=d,i=d,n=u-f):t===r.slash?(h=t,i=b,n=w-v,_=(u=w)+1):(u=c(g,w),h=r.word,i=b,n=u-v),_=u+1}m.push([h,b,w-v,i,n,w,_]),f&&(v=f,f=null),w=_}return m},e.FIELDS=void 0;var t,n,r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}(VS());function i(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}for(var o=((t={})[r.tab]=!0,t[r.newline]=!0,t[r.cr]=!0,t[r.feed]=!0,t),a=((n={})[r.space]=!0,n[r.tab]=!0,n[r.newline]=!0,n[r.cr]=!0,n[r.feed]=!0,n[r.ampersand]=!0,n[r.asterisk]=!0,n[r.bang]=!0,n[r.comma]=!0,n[r.colon]=!0,n[r.semicolon]=!0,n[r.openParenthesis]=!0,n[r.closeParenthesis]=!0,n[r.openSquare]=!0,n[r.closeSquare]=!0,n[r.singleQuote]=!0,n[r.doubleQuote]=!0,n[r.plus]=!0,n[r.pipe]=!0,n[r.tilde]=!0,n[r.greaterThan]=!0,n[r.equals]=!0,n[r.dollar]=!0,n[r.caret]=!0,n[r.slash]=!0,n),s={},l="0123456789abcdefABCDEF",u=0;u<22;u++)s[l.charCodeAt(u)]=!0;function c(e,t){var n,i=t;do{if(n=e.charCodeAt(i),a[n])return i-1;n===r.backslash?i=d(e,i)+1:i++}while(i<e.length);return i-1}function d(e,t){var n=t,i=e.charCodeAt(n+1);if(o[i]);else if(s[i]){var a=0;do{n++,a++,i=e.charCodeAt(n+1)}while(s[i]&&a<6);a<6&&i===r.space&&n++}else n++;return n}e.FIELDS={TYPE:0,START_LINE:1,START_COL:2,END_LINE:3,END_COL:4,START_POS:5,END_POS:6}}(qS)),qS)),v=x(VS()),b=x(GE()),w=zE();function _(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return _=function(){return e},e}function x(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=_();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}return n.default=e,t&&t.set(e,n),n}function E(e){return e&&e.__esModule?e:{default:e}}function S(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}var k=((n={})[v.space]=!0,n[v.cr]=!0,n[v.feed]=!0,n[v.newline]=!0,n[v.tab]=!0,n),T=Object.assign({},k,((r={})[v.comment]=!0,r));function C(e){return{line:e[y.FIELDS.START_LINE],column:e[y.FIELDS.START_COL]}}function A(e){return{line:e[y.FIELDS.END_LINE],column:e[y.FIELDS.END_COL]}}function I(e,t,n,r){return{start:{line:e,column:t},end:{line:n,column:r}}}function O(e){return I(e[y.FIELDS.START_LINE],e[y.FIELDS.START_COL],e[y.FIELDS.END_LINE],e[y.FIELDS.END_COL])}function N(e,t){if(e)return I(e[y.FIELDS.START_LINE],e[y.FIELDS.START_COL],t[y.FIELDS.END_LINE],t[y.FIELDS.END_COL])}function D(e,t){var n=e[t];if("string"==typeof n)return-1!==n.indexOf("\\")&&((0,w.ensureObject)(e,"raws"),e[t]=(0,w.unesc)(n),void 0===e.raws[t]&&(e.raws[t]=n)),e}function R(e,t){for(var n=-1,r=[];-1!==(n=e.indexOf(t,n+1));)r.push(n);return r}var M=function(){function e(e,t){void 0===t&&(t={}),this.rule=e,this.options=Object.assign({lossy:!1,safe:!1},t),this.position=0,this.css="string"==typeof this.rule?this.rule:this.rule.selector,this.tokens=(0,y.default)({css:this.css,error:this._errorGenerator(),safe:this.options.safe});var n=N(this.tokens[0],this.tokens[this.tokens.length-1]);this.root=new i.default({source:n}),this.root.errorGenerator=this._errorGenerator();var r=new o.default({source:{start:{line:1,column:1}}});this.root.append(r),this.current=r,this.loop()}var t=e.prototype;return t._errorGenerator=function(){var e=this;return function(t,n){return"string"==typeof e.rule?new Error(t):e.rule.error(t,n)}},t.attribute=function(){var e=[],t=this.currToken;for(this.position++;this.position<this.tokens.length&&this.currToken[y.FIELDS.TYPE]!==v.closeSquare;)e.push(this.currToken),this.position++;if(this.currToken[y.FIELDS.TYPE]!==v.closeSquare)return this.expected("closing square bracket",this.currToken[y.FIELDS.START_POS]);var n=e.length,r={source:I(t[1],t[2],this.currToken[3],this.currToken[4]),sourceIndex:t[y.FIELDS.START_POS]};if(1===n&&!~[v.word].indexOf(e[0][y.FIELDS.TYPE]))return this.expected("attribute",e[0][y.FIELDS.START_POS]);for(var i=0,o="",a="",s=null,l=!1;i<n;){var u=e[i],c=this.content(u),d=e[i+1];switch(u[y.FIELDS.TYPE]){case v.space:if(l=!0,this.options.lossy)break;if(s){(0,w.ensureObject)(r,"spaces",s);var p=r.spaces[s].after||"";r.spaces[s].after=p+c;var h=(0,w.getProp)(r,"raws","spaces",s,"after")||null;h&&(r.raws.spaces[s].after=h+c)}else o+=c,a+=c;break;case v.asterisk:if(d[y.FIELDS.TYPE]===v.equals)r.operator=c,s="operator";else if((!r.namespace||"namespace"===s&&!l)&&d){o&&((0,w.ensureObject)(r,"spaces","attribute"),r.spaces.attribute.before=o,o=""),a&&((0,w.ensureObject)(r,"raws","spaces","attribute"),r.raws.spaces.attribute.before=o,a=""),r.namespace=(r.namespace||"")+c,((0,w.getProp)(r,"raws","namespace")||null)&&(r.raws.namespace+=c),s="namespace"}l=!1;break;case v.dollar:if("value"===s){var m=(0,w.getProp)(r,"raws","value");r.value+="$",m&&(r.raws.value=m+"$");break}case v.caret:d[y.FIELDS.TYPE]===v.equals&&(r.operator=c,s="operator"),l=!1;break;case v.combinator:if("~"===c&&d[y.FIELDS.TYPE]===v.equals&&(r.operator=c,s="operator"),"|"!==c){l=!1;break}d[y.FIELDS.TYPE]===v.equals?(r.operator=c,s="operator"):r.namespace||r.attribute||(r.namespace=!0),l=!1;break;case v.word:if(d&&"|"===this.content(d)&&e[i+2]&&e[i+2][y.FIELDS.TYPE]!==v.equals&&!r.operator&&!r.namespace)r.namespace=c,s="namespace";else if(!r.attribute||"attribute"===s&&!l){o&&((0,w.ensureObject)(r,"spaces","attribute"),r.spaces.attribute.before=o,o=""),a&&((0,w.ensureObject)(r,"raws","spaces","attribute"),r.raws.spaces.attribute.before=a,a=""),r.attribute=(r.attribute||"")+c,((0,w.getProp)(r,"raws","attribute")||null)&&(r.raws.attribute+=c),s="attribute"}else if(!r.value&&""!==r.value||"value"===s&&!l){var g=(0,w.unesc)(c),b=(0,w.getProp)(r,"raws","value")||"",_=r.value||"";r.value=_+g,r.quoteMark=null,(g!==c||b)&&((0,w.ensureObject)(r,"raws"),r.raws.value=(b||_)+c),s="value"}else{var x="i"===c||"I"===c;!r.value&&""!==r.value||!r.quoteMark&&!l?(r.value||""===r.value)&&(s="value",r.value+=c,r.raws.value&&(r.raws.value+=c)):(r.insensitive=x,x&&"I"!==c||((0,w.ensureObject)(r,"raws"),r.raws.insensitiveFlag=c),s="insensitive",o&&((0,w.ensureObject)(r,"spaces","insensitive"),r.spaces.insensitive.before=o,o=""),a&&((0,w.ensureObject)(r,"raws","spaces","insensitive"),r.raws.spaces.insensitive.before=a,a=""))}l=!1;break;case v.str:if(!r.attribute||!r.operator)return this.error("Expected an attribute followed by an operator preceding the string.",{index:u[y.FIELDS.START_POS]});var E=(0,f.unescapeValue)(c),S=E.unescaped,k=E.quoteMark;r.value=S,r.quoteMark=k,s="value",(0,w.ensureObject)(r,"raws"),r.raws.value=c,l=!1;break;case v.equals:if(!r.attribute)return this.expected("attribute",u[y.FIELDS.START_POS],c);if(r.value)return this.error('Unexpected "=" found; an operator was already defined.',{index:u[y.FIELDS.START_POS]});r.operator=r.operator?r.operator+c:c,s="operator",l=!1;break;case v.comment:if(s)if(l||d&&d[y.FIELDS.TYPE]===v.space||"insensitive"===s){var T=(0,w.getProp)(r,"spaces",s,"after")||"",C=(0,w.getProp)(r,"raws","spaces",s,"after")||T;(0,w.ensureObject)(r,"raws","spaces",s),r.raws.spaces[s].after=C+c}else{var A=r[s]||"",O=(0,w.getProp)(r,"raws",s)||A;(0,w.ensureObject)(r,"raws"),r.raws[s]=O+c}else a+=c;break;default:return this.error('Unexpected "'+c+'" found.',{index:u[y.FIELDS.START_POS]})}i++}D(r,"attribute"),D(r,"namespace"),this.newNode(new f.default(r)),this.position++},t.parseWhitespaceEquivalentTokens=function(e){e<0&&(e=this.tokens.length);var t=this.position,n=[],r="",i=void 0;do{if(k[this.currToken[y.FIELDS.TYPE]])this.options.lossy||(r+=this.content());else if(this.currToken[y.FIELDS.TYPE]===v.comment){var o={};r&&(o.before=r,r=""),i=new s.default({value:this.content(),source:O(this.currToken),sourceIndex:this.currToken[y.FIELDS.START_POS],spaces:o}),n.push(i)}}while(++this.position<e);if(r)if(i)i.spaces.after=r;else if(!this.options.lossy){var a=this.tokens[t],l=this.tokens[this.position-1];n.push(new c.default({value:"",source:I(a[y.FIELDS.START_LINE],a[y.FIELDS.START_COL],l[y.FIELDS.END_LINE],l[y.FIELDS.END_COL]),sourceIndex:a[y.FIELDS.START_POS],spaces:{before:r,after:""}}))}return n},t.convertWhitespaceNodesToSpace=function(e,t){var n=this;void 0===t&&(t=!1);var r="",i="";return e.forEach(function(e){var o=n.lossySpace(e.spaces.before,t),a=n.lossySpace(e.rawSpaceBefore,t);r+=o+n.lossySpace(e.spaces.after,t&&0===o.length),i+=o+e.value+n.lossySpace(e.rawSpaceAfter,t&&0===a.length)}),i===r&&(i=void 0),{space:r,rawSpace:i}},t.isNamedCombinator=function(e){return void 0===e&&(e=this.position),this.tokens[e+0]&&this.tokens[e+0][y.FIELDS.TYPE]===v.slash&&this.tokens[e+1]&&this.tokens[e+1][y.FIELDS.TYPE]===v.word&&this.tokens[e+2]&&this.tokens[e+2][y.FIELDS.TYPE]===v.slash},t.namedCombinator=function(){if(this.isNamedCombinator()){var e=this.content(this.tokens[this.position+1]),t=(0,w.unesc)(e).toLowerCase(),n={};t!==e&&(n.value="/"+e+"/");var r=new h.default({value:"/"+t+"/",source:I(this.currToken[y.FIELDS.START_LINE],this.currToken[y.FIELDS.START_COL],this.tokens[this.position+2][y.FIELDS.END_LINE],this.tokens[this.position+2][y.FIELDS.END_COL]),sourceIndex:this.currToken[y.FIELDS.START_POS],raws:n});return this.position=this.position+3,r}this.unexpected()},t.combinator=function(){var e=this;if("|"===this.content())return this.namespace();var t=this.locateNextMeaningfulToken(this.position);if(!(t<0||this.tokens[t][y.FIELDS.TYPE]===v.comma)){var n,r=this.currToken,i=void 0;if(t>this.position&&(i=this.parseWhitespaceEquivalentTokens(t)),this.isNamedCombinator()?n=this.namedCombinator():this.currToken[y.FIELDS.TYPE]===v.combinator?(n=new h.default({value:this.content(),source:O(this.currToken),sourceIndex:this.currToken[y.FIELDS.START_POS]}),this.position++):k[this.currToken[y.FIELDS.TYPE]]||i||this.unexpected(),n){if(i){var o=this.convertWhitespaceNodesToSpace(i),a=o.space,s=o.rawSpace;n.spaces.before=a,n.rawSpaceBefore=s}}else{var l=this.convertWhitespaceNodesToSpace(i,!0),u=l.space,c=l.rawSpace;c||(c=u);var d={},f={spaces:{}};u.endsWith(" ")&&c.endsWith(" ")?(d.before=u.slice(0,u.length-1),f.spaces.before=c.slice(0,c.length-1)):u.startsWith(" ")&&c.startsWith(" ")?(d.after=u.slice(1),f.spaces.after=c.slice(1)):f.value=c,n=new h.default({value:" ",source:N(r,this.tokens[this.position-1]),sourceIndex:r[y.FIELDS.START_POS],spaces:d,raws:f})}return this.currToken&&this.currToken[y.FIELDS.TYPE]===v.space&&(n.spaces.after=this.optionalSpace(this.content()),this.position++),this.newNode(n)}var p=this.parseWhitespaceEquivalentTokens(t);if(p.length>0){var m=this.current.last;if(m){var g=this.convertWhitespaceNodesToSpace(p),b=g.space,w=g.rawSpace;void 0!==w&&(m.rawSpaceAfter+=w),m.spaces.after+=b}else p.forEach(function(t){return e.newNode(t)})}},t.comma=function(){if(this.position===this.tokens.length-1)return this.root.trailingComma=!0,void this.position++;this.current._inferEndPosition();var e=new o.default({source:{start:C(this.tokens[this.position+1])}});this.current.parent.append(e),this.current=e,this.position++},t.comment=function(){var e=this.currToken;this.newNode(new s.default({value:this.content(),source:O(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},t.error=function(e,t){throw this.root.error(e,t)},t.missingBackslash=function(){return this.error("Expected a backslash preceding the semicolon.",{index:this.currToken[y.FIELDS.START_POS]})},t.missingParenthesis=function(){return this.expected("opening parenthesis",this.currToken[y.FIELDS.START_POS])},t.missingSquareBracket=function(){return this.expected("opening square bracket",this.currToken[y.FIELDS.START_POS])},t.unexpected=function(){return this.error("Unexpected '"+this.content()+"'. Escaping special characters with \\ may help.",this.currToken[y.FIELDS.START_POS])},t.namespace=function(){var e=this.prevToken&&this.content(this.prevToken)||!0;return this.nextToken[y.FIELDS.TYPE]===v.word?(this.position++,this.word(e)):this.nextToken[y.FIELDS.TYPE]===v.asterisk?(this.position++,this.universal(e)):void 0},t.nesting=function(){if(this.nextToken&&"|"===this.content(this.nextToken))return void this.position++;var e=this.currToken;this.newNode(new m.default({value:this.content(),source:O(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},t.parentheses=function(){var e=this.current.last,t=1;if(this.position++,e&&e.type===b.PSEUDO){var n=new o.default({source:{start:C(this.tokens[this.position-1])}}),r=this.current;for(e.append(n),this.current=n;this.position<this.tokens.length&&t;)this.currToken[y.FIELDS.TYPE]===v.openParenthesis&&t++,this.currToken[y.FIELDS.TYPE]===v.closeParenthesis&&t--,t?this.parse():(this.current.source.end=A(this.currToken),this.current.parent.source.end=A(this.currToken),this.position++);this.current=r}else{for(var i,a=this.currToken,s="(";this.position<this.tokens.length&&t;)this.currToken[y.FIELDS.TYPE]===v.openParenthesis&&t++,this.currToken[y.FIELDS.TYPE]===v.closeParenthesis&&t--,i=this.currToken,s+=this.parseParenthesisToken(this.currToken),this.position++;e?e.appendToPropertyAndEscape("value",s,s):this.newNode(new c.default({value:s,source:I(a[y.FIELDS.START_LINE],a[y.FIELDS.START_COL],i[y.FIELDS.END_LINE],i[y.FIELDS.END_COL]),sourceIndex:a[y.FIELDS.START_POS]}))}if(t)return this.expected("closing parenthesis",this.currToken[y.FIELDS.START_POS])},t.pseudo=function(){for(var e=this,t="",n=this.currToken;this.currToken&&this.currToken[y.FIELDS.TYPE]===v.colon;)t+=this.content(),this.position++;return this.currToken?this.currToken[y.FIELDS.TYPE]!==v.word?this.expected(["pseudo-class","pseudo-element"],this.currToken[y.FIELDS.START_POS]):void this.splitWord(!1,function(r,i){t+=r,e.newNode(new d.default({value:t,source:N(n,e.currToken),sourceIndex:n[y.FIELDS.START_POS]})),i>1&&e.nextToken&&e.nextToken[y.FIELDS.TYPE]===v.openParenthesis&&e.error("Misplaced parenthesis.",{index:e.nextToken[y.FIELDS.START_POS]})}):this.expected(["pseudo-class","pseudo-element"],this.position-1)},t.space=function(){var e=this.content();0===this.position||this.prevToken[y.FIELDS.TYPE]===v.comma||this.prevToken[y.FIELDS.TYPE]===v.openParenthesis||this.current.nodes.every(function(e){return"comment"===e.type})?(this.spaces=this.optionalSpace(e),this.position++):this.position===this.tokens.length-1||this.nextToken[y.FIELDS.TYPE]===v.comma||this.nextToken[y.FIELDS.TYPE]===v.closeParenthesis?(this.current.last.spaces.after=this.optionalSpace(e),this.position++):this.combinator()},t.string=function(){var e=this.currToken;this.newNode(new c.default({value:this.content(),source:O(e),sourceIndex:e[y.FIELDS.START_POS]})),this.position++},t.universal=function(e){var t=this.nextToken;if(t&&"|"===this.content(t))return this.position++,this.namespace();var n=this.currToken;this.newNode(new p.default({value:this.content(),source:O(n),sourceIndex:n[y.FIELDS.START_POS]}),e),this.position++},t.splitWord=function(e,t){for(var n=this,r=this.nextToken,i=this.content();r&&~[v.dollar,v.caret,v.equals,v.word].indexOf(r[y.FIELDS.TYPE]);){this.position++;var o=this.content();if(i+=o,o.lastIndexOf("\\")===o.length-1){var s=this.nextToken;s&&s[y.FIELDS.TYPE]===v.space&&(i+=this.requiredSpace(this.content(s)),this.position++)}r=this.nextToken}var c=R(i,".").filter(function(e){var t="\\"===i[e-1],n=/^\d+\.\d+%$/.test(i);return!t&&!n}),d=R(i,"#").filter(function(e){return"\\"!==i[e-1]}),f=R(i,"#{");f.length&&(d=d.filter(function(e){return!~f.indexOf(e)}));var p=(0,g.default)(function(){var e=Array.prototype.concat.apply([],arguments);return e.filter(function(t,n){return n===e.indexOf(t)})}([0].concat(c,d)));p.forEach(function(r,o){var s,f=p[o+1]||i.length,h=i.slice(r,f);if(0===o&&t)return t.call(n,h,p.length);var m=n.currToken,g=m[y.FIELDS.START_POS]+p[o],v=I(m[1],m[2]+r,m[3],m[2]+(f-1));if(~c.indexOf(r)){var b={value:h.slice(1),source:v,sourceIndex:g};s=new a.default(D(b,"value"))}else if(~d.indexOf(r)){var w={value:h.slice(1),source:v,sourceIndex:g};s=new l.default(D(w,"value"))}else{var _={value:h,source:v,sourceIndex:g};D(_,"value"),s=new u.default(_)}n.newNode(s,e),e=null}),this.position++},t.word=function(e){var t=this.nextToken;return t&&"|"===this.content(t)?(this.position++,this.namespace()):this.splitWord(e)},t.loop=function(){for(;this.position<this.tokens.length;)this.parse(!0);return this.current._inferEndPosition(),this.root},t.parse=function(e){switch(this.currToken[y.FIELDS.TYPE]){case v.space:this.space();break;case v.comment:this.comment();break;case v.openParenthesis:this.parentheses();break;case v.closeParenthesis:e&&this.missingParenthesis();break;case v.openSquare:this.attribute();break;case v.dollar:case v.caret:case v.equals:case v.word:this.word();break;case v.colon:this.pseudo();break;case v.comma:this.comma();break;case v.asterisk:this.universal();break;case v.ampersand:this.nesting();break;case v.slash:case v.combinator:this.combinator();break;case v.str:this.string();break;case v.closeSquare:this.missingSquareBracket();case v.semicolon:this.missingBackslash();default:this.unexpected()}},t.expected=function(e,t,n){if(Array.isArray(e)){var r=e.pop();e=e.join(", ")+" or "+r}var i=/^[aeiou]/.test(e[0])?"an":"a";return n?this.error("Expected "+i+" "+e+', found "'+n+'" instead.',{index:t}):this.error("Expected "+i+" "+e+".",{index:t})},t.requiredSpace=function(e){return this.options.lossy?" ":e},t.optionalSpace=function(e){return this.options.lossy?"":e},t.lossySpace=function(e,t){return this.options.lossy?t?" ":"":e},t.parseParenthesisToken=function(e){var t=this.content(e);return e[y.FIELDS.TYPE]===v.space?this.requiredSpace(t):t},t.newNode=function(e,t){return t&&(/^ +$/.test(t)&&(this.options.lossy||(this.spaces=(this.spaces||"")+t),t=!0),e.namespace=t,D(e,"namespace")),this.spaces&&(e.spaces.before=this.spaces,this.spaces=""),this.current.append(e)},t.content=function(e){return void 0===e&&(e=this.currToken),this.css.slice(e[y.FIELDS.START_POS],e[y.FIELDS.END_POS])},t.locateNextMeaningfulToken=function(e){void 0===e&&(e=this.position+1);for(var t=e;t<this.tokens.length;){if(!T[this.tokens[t][y.FIELDS.TYPE]])return t;t++}return-1},S(e,[{key:"currToken",get:function(){return this.tokens[this.position]}},{key:"nextToken",get:function(){return this.tokens[this.position+1]}},{key:"prevToken",get:function(){return this.tokens[this.position-1]}}]),e}();t.default=M,e.exports=t.default}(TE,TE.exports)),TE.exports}var GS,YS={},KS={};var ZS,QS,XS,JS,ek,tk,nk,rk={};function ik(){return QS||(QS=1,function(e){e.__esModule=!0;var t=GE();Object.keys(t).forEach(function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||(e[n]=t[n]))});var n=function(){if(GS)return KS;GS=1,KS.__esModule=!0,KS.universal=KS.tag=KS.string=KS.selector=KS.root=KS.pseudo=KS.nesting=KS.id=KS.comment=KS.combinator=KS.className=KS.attribute=void 0;var e=f(CS()),t=f(iS()),n=f(RS()),r=f(sS()),i=f(cS()),o=f(FS()),a=f(xS()),s=f(KE()),l=f(XE()),u=f(bS()),c=f(gS()),d=f(OS());function f(e){return e&&e.__esModule?e:{default:e}}return KS.attribute=function(t){return new e.default(t)},KS.className=function(e){return new t.default(e)},KS.combinator=function(e){return new n.default(e)},KS.comment=function(e){return new r.default(e)},KS.id=function(e){return new i.default(e)},KS.nesting=function(e){return new o.default(e)},KS.pseudo=function(e){return new a.default(e)},KS.root=function(e){return new s.default(e)},KS.selector=function(e){return new l.default(e)},KS.string=function(e){return new u.default(e)},KS.tag=function(e){return new c.default(e)},KS.universal=function(e){return new d.default(e)},KS}();Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||(e[t]=n[t]))});var r=function(){if(ZS)return rk;ZS=1,rk.__esModule=!0,rk.isNode=r,rk.isPseudoElement=y,rk.isPseudoClass=function(e){return d(e)&&!y(e)},rk.isContainer=function(e){return!(!r(e)||!e.walk)},rk.isNamespace=function(e){return o(e)||m(e)},rk.isUniversal=rk.isTag=rk.isString=rk.isSelector=rk.isRoot=rk.isPseudo=rk.isNesting=rk.isIdentifier=rk.isComment=rk.isCombinator=rk.isClassName=rk.isAttribute=void 0;var e,t=GE(),n=((e={})[t.ATTRIBUTE]=!0,e[t.CLASS]=!0,e[t.COMBINATOR]=!0,e[t.COMMENT]=!0,e[t.ID]=!0,e[t.NESTING]=!0,e[t.PSEUDO]=!0,e[t.ROOT]=!0,e[t.SELECTOR]=!0,e[t.STRING]=!0,e[t.TAG]=!0,e[t.UNIVERSAL]=!0,e);function r(e){return"object"==typeof e&&n[e.type]}function i(e,t){return r(t)&&t.type===e}var o=i.bind(null,t.ATTRIBUTE);rk.isAttribute=o;var a=i.bind(null,t.CLASS);rk.isClassName=a;var s=i.bind(null,t.COMBINATOR);rk.isCombinator=s;var l=i.bind(null,t.COMMENT);rk.isComment=l;var u=i.bind(null,t.ID);rk.isIdentifier=u;var c=i.bind(null,t.NESTING);rk.isNesting=c;var d=i.bind(null,t.PSEUDO);rk.isPseudo=d;var f=i.bind(null,t.ROOT);rk.isRoot=f;var p=i.bind(null,t.SELECTOR);rk.isSelector=p;var h=i.bind(null,t.STRING);rk.isString=h;var m=i.bind(null,t.TAG);rk.isTag=m;var g=i.bind(null,t.UNIVERSAL);function y(e){return d(e)&&e.value&&(e.value.startsWith("::")||":before"===e.value.toLowerCase()||":after"===e.value.toLowerCase()||":first-letter"===e.value.toLowerCase()||":first-line"===e.value.toLowerCase())}return rk.isUniversal=g,rk}();Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===r[t]||(e[t]=r[t]))})}(YS)),YS}function ok(){return XS||(XS=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(US||(US=1,function(e,t){t.__esModule=!0,t.default=void 0;var n,r=(n=WS())&&n.__esModule?n:{default:n},i=function(){function e(e,t){this.func=e||function(){},this.funcRes=null,this.options=t}var t=e.prototype;return t._shouldUpdateSelector=function(e,t){return void 0===t&&(t={}),!1!==Object.assign({},this.options,t).updateSelector&&"string"!=typeof e},t._isLossy=function(e){return void 0===e&&(e={}),!1===Object.assign({},this.options,e).lossless},t._root=function(e,t){return void 0===t&&(t={}),new r.default(e,this._parseOptions(t)).root},t._parseOptions=function(e){return{lossy:this._isLossy(e)}},t._run=function(e,t){var n=this;return void 0===t&&(t={}),new Promise(function(r,i){try{var o=n._root(e,t);Promise.resolve(n.func(o)).then(function(r){var i=void 0;return n._shouldUpdateSelector(e,t)&&(i=o.toString(),e.selector=i),{transform:r,root:o,string:i}}).then(r,i)}catch(F0){return void i(F0)}})},t._runSync=function(e,t){void 0===t&&(t={});var n=this._root(e,t),r=this.func(n);if(r&&"function"==typeof r.then)throw new Error("Selector processor returned a promise to a synchronous call.");var i=void 0;return t.updateSelector&&"string"!=typeof e&&(i=n.toString(),e.selector=i),{transform:r,root:n,string:i}},t.ast=function(e,t){return this._run(e,t).then(function(e){return e.root})},t.astSync=function(e,t){return this._runSync(e,t).root},t.transform=function(e,t){return this._run(e,t).then(function(e){return e.transform})},t.transformSync=function(e,t){return this._runSync(e,t).transform},t.process=function(e,t){return this._run(e,t).then(function(e){return e.string||e.root.toString()})},t.processSync=function(e,t){var n=this._runSync(e,t);return n.string||n.root.toString()},e}();t.default=i,e.exports=t.default}(kE,kE.exports)),(n=kE.exports)&&n.__esModule?n:{default:n}),i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(ik());function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}var a=function(e){return new r.default(e)};Object.assign(a,i),delete a.__esModule;var s=a;t.default=s,e.exports=t.default}(SE,SE.exports)),SE.exports}!function(){if(nk)return tk;nk=1;const e=uE(),t=xE(),{commonTrailingPseudos:n,isObject:r,isPlainObject:i,merge:o,castArray:a}=function(){if(ek)return JS;ek=1;const e=ok(),t=e();function n(e){return"object"==typeof e&&null!==e}function r(e){if("object"!=typeof e||null===e)return!1;if("[object Object]"!==Object.prototype.toString.call(e))return!1;if(null===Object.getPrototypeOf(e))return!0;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}return JS={isObject:n,isPlainObject:r,merge:function e(t,...i){if(!i.length)return t;const o=i.shift();if(n(t)&&n(o))for(const n in o)Array.isArray(o[n])?(t[n]||(t[n]=[]),o[n].forEach((i,o)=>{r(i)&&r(t[n][o])?t[n][o]=e(t[n][o],i):t[n][o]=i})):r(o[n])?(t[n]||(t[n]={}),e(t[n],o[n])):t[n]=o[n];return e(t,...i)},castArray:function(e){return Array.isArray(e)?e:[e]},isUsableColor:(e,t)=>r(t)&&"gray"!==e&&t[600],commonTrailingPseudos(n){let r=t.astSync(n),i=[];for(let[e,t]of r.nodes.entries())for(const[n,r]of[...t.nodes].reverse().entries()){if("pseudo"!==r.type||!r.value.startsWith("::"))break;i[n]=i[n]||[],i[n][e]=r}let o=e.selector();for(const e of i)if(e){if(new Set(e.map(e=>e.value)).size>1)break;e.forEach(e=>e.remove()),o.prepend(e[0])}return o.nodes.length?[o.toString(),r.toString()]:[null,n]}},JS}(),s={};function l(e,{className:t,modifier:r,prefix:i}){let o=i(`.not-${t}`).slice(1),a=e.startsWith(">")?("DEFAULT"===r?`.${t}`:`.${t}-${r}`)+" ":"",[s,l]=n(e);return s?`:where(${a}${l}):not(:where([class~="${o}"],[class~="${o}"] *))${s}`:`:where(${a}${e}):not(:where([class~="${o}"],[class~="${o}"] *))`}function u(e={},{target:t,className:n,modifier:i,prefix:u}){function c(e,o){if("legacy"===t)return[e,o];if(Array.isArray(o))return[e,o];if(r(o)){return Object.values(o).some(r)?[l(e,{className:n,modifier:i,prefix:u}),o,Object.fromEntries(Object.entries(o).map(([e,t])=>c(e,t)))]:[l(e,{className:n,modifier:i,prefix:u}),o]}return[e,o]}return Object.fromEntries(Object.entries(o({},...Object.keys(e).filter(e=>s[e]).map(t=>s[t](e[t])),...a(e.css||{}))).map(([e,t])=>c(e,t)))}tk=e.withOptions(({className:e="prose",target:t="modern"}={})=>function({addVariant:n,addComponents:r,theme:i,prefix:o}){let a=i("typography"),s={className:e,prefix:o};for(let[u,...c]of[["headings","h1","h2","h3","h4","h5","h6","th"],["h1"],["h2"],["h3"],["h4"],["h5"],["h6"],["p"],["a"],["blockquote"],["figure"],["figcaption"],["strong"],["em"],["kbd"],["code"],["pre"],["ol"],["ul"],["li"],["dl"],["dt"],["dd"],["table"],["thead"],["tr"],["th"],["td"],["img"],["picture"],["video"],["hr"],["lead",'[class~="lead"]']]){c=0===c.length?[u]:c;let r="legacy"===t?c.map(e=>`& ${e}`):c.join(", ");n(`${e}-${u}`,"legacy"===t?r:`& :is(${l(r,s)})`)}r(Object.keys(a).map(n=>({["DEFAULT"===n?`.${e}`:`.${e}-${n}`]:u(a[n],{target:t,className:e,modifier:n,prefix:o})})))},()=>({theme:{typography:t}}))}();var ak,sk,lk,uk,ck={exports:{}},dk={},fk={exports:{}},pk={};function hk(){return sk||(sk=1,fk.exports=(ak||(ak=1,function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<o&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,f=3,p=!1,h=!1,m=!1,g=!1,y="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function w(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function _(e){if(m=!1,w(e),!h)if(null!==n(l))h=!0,E||(E=!0,x());else{var t=n(u);null!==t&&N(_,t.startTime-e)}}var x,E=!1,S=-1,k=5,T=-1;function C(){return!(!g&&e.unstable_now()-T<k)}function A(){if(g=!1,E){var t=e.unstable_now();T=t;var i=!0;try{e:{h=!1,m&&(m=!1,v(S),S=-1),p=!0;var o=f;try{t:{for(w(t),d=n(l);null!==d&&!(d.expirationTime>t&&C());){var a=d.callback;if("function"==typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof s){d.callback=s,w(t),i=!0;break t}d===n(l)&&r(l),w(t)}else r(l);d=n(l)}if(null!==d)i=!0;else{var c=n(u);null!==c&&N(_,c.startTime-t),i=!1}}break e}finally{d=null,f=o,p=!1}i=void 0}}finally{i?x():E=!1}}}if("function"==typeof b)x=function(){b(A)};else if("undefined"!=typeof MessageChannel){var I=new MessageChannel,O=I.port2;I.port1.onmessage=A,x=function(){O.postMessage(null)}}else x=function(){y(A,0)};function N(t,n){S=y(function(){t(e.unstable_now())},n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(k=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_scheduleCallback=function(r,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(r.sortIndex=o,t(u,r),null===n(l)&&r===n(u)&&(m?(v(S),S=-1):m=!0,N(_,o-a))):(r.sortIndex=s,t(l,r),h||p||(h=!0,E||(E=!0,x()))),r},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}}(pk)),pk)),fk.exports}
/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function mk(){if(lk)return dk;lk=1;var e=hk(),t=S(),n=K();function r(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function o(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function a(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function s(e){if(o(e)!==e)throw Error(r(188))}function l(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=l(e)))return t;e=e.sibling}return null}var u=Object.assign,c=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.consumer"),v=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function A(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=C&&e[C]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function O(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case p:return"Fragment";case m:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case _:return"SuspenseList";case k:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case f:return"Portal";case v:return(e.displayName||"Context")+".Provider";case y:return(e._context.displayName||"Context")+".Consumer";case b:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:O(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return O(e(t))}catch(t2e){}}return null}var N=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},P=[],F=-1;function L(e){return{current:e}}function j(e){0>F||(e.current=P[F],P[F]=null,F--)}function B(e,t){F++,P[F]=e.current,e.current=t}var $=L(null),z=L(null),U=L(null),q=L(null);function H(e,t){switch(B(U,t),B(z,e),B($,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=rd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j($),B($,e)}function V(){j($),j(z),j(U)}function W(e){null!==e.memoizedState&&B(q,e);var t=$.current,n=id(t,e.type);t!==n&&(B(z,e),B($,n))}function G(e){z.current===e&&(j($),j(z)),q.current===e&&(j(q),Gd._currentValue=M)}var Y=Object.prototype.hasOwnProperty,Z=e.unstable_scheduleCallback,Q=e.unstable_cancelCallback,X=e.unstable_shouldYield,J=e.unstable_requestPaint,ee=e.unstable_now,te=e.unstable_getCurrentPriorityLevel,ne=e.unstable_ImmediatePriority,re=e.unstable_UserBlockingPriority,ie=e.unstable_NormalPriority,oe=e.unstable_LowPriority,ae=e.unstable_IdlePriority,se=e.log,le=e.unstable_setDisableYieldValue,ue=null,ce=null;function de(e){if("function"==typeof se&&le(e),ce&&"function"==typeof ce.setStrictMode)try{ce.setStrictMode(ue,e)}catch(HOt){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/he|0)|0},pe=Math.log,he=Math.LN2;var me=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?i=ye(r):0!==(a&=s)?i=ye(a):n||0!==(n=s&~e)&&(i=ye(n)):0!==(s=r&~o)?i=ye(s):0!==a?i=ye(a):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&o)&&((o=i&-i)>=(n=t&-t)||32===o&&4194048&n)?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=me;return!(4194048&(me<<=1))&&(me=256),e}function xe(){var e=ge;return!(62914560&(ge<<=1))&&(ge=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function ke(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ae(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Ie(){var e=R.p;return 0!==e?e:void 0===(e=window.event)?32:uf(e.type)}var Oe=Math.random().toString(36).slice(2),Ne="__reactFiber$"+Oe,De="__reactProps$"+Oe,Re="__reactContainer$"+Oe,Me="__reactEvents$"+Oe,Pe="__reactListeners$"+Oe,Fe="__reactHandles$"+Oe,Le="__reactResources$"+Oe,je="__reactMarker$"+Oe;function Be(e){delete e[Ne],delete e[De],delete e[Me],delete e[Pe],delete e[Fe]}function $e(e){var t=e[Ne];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[Ne]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=vd(e);null!==e;){if(n=e[Ne])return n;e=vd(e)}return t}n=(e=n).parentNode}return null}function ze(e){if(e=e[Ne]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ue(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(r(33))}function qe(e){var t=e[Le];return t||(t=e[Le]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[je]=!0}var Ve=new Set,We={};function Ge(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(We[e]=t,e=0;e<t.length;e++)Ve.add(t[e])}var Ke,Ze,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xe={},Je={};function et(e,t,n){if(i=t,Y.call(Je,i)||!Y.call(Xe,i)&&(Qe.test(i)?Je[i]=!0:(Xe[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function tt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function nt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function rt(e){if(void 0===Ke)try{throw Error()}catch(t2e){var t=t2e.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Ze=-1<t2e.stack.indexOf("\n    at")?" (<anonymous>)":-1<t2e.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ke+e+Ze}var it=!1;function ot(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(t2e){var r=t2e}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"==typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"==typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?rt(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return rt(e.type);case 16:return rt("Lazy");case 13:return rt("Suspense");case 19:return rt("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return rt("Activity");default:return""}}function st(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(t2e){return"\nError generating stack: "+t2e.message+"\n"+t2e.stack}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ct(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(F0){return e.body}}var pt=/[\n"\\]/g;function ht(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function mt(e,t,n,r,i,o,a,s){e.name="",null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?yt(e,a,lt(t)):null!=n?yt(e,a,lt(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=o&&(e.defaultChecked=!!o),null!=i&&(e.checked=i&&"function"!=typeof i&&"symbol"!=typeof i),null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&"boolean"!=typeof s?e.name=""+lt(s):e.removeAttribute("name")}function gt(e,t,n,r,i,o,a,s){if(null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o&&(e.type=o),null!=t||null!=n){if(("submit"===o||"reset"===o)&&null==t)return;n=null!=n?""+lt(n):"",t=null!=t?""+lt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!=typeof(r=null!=r?r:i)&&"symbol"!=typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.name=a)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+lt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,i){if(null==t){if(null!=i){if(null!=n)throw Error(r(92));if(N(i)){if(1<i.length)throw Error(r(93));i=i[0]}n=i}null==n&&(n=""),t=n}n=lt(t),e.defaultValue=n,(i=e.textContent)===n&&""!==i&&null!==i&&(e.value=i)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var xt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"==typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!=typeof n||0===n||xt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!=typeof t)throw Error(r(62));if(e=e.style,null!=n){for(var i in n)!n.hasOwnProperty(i)||null!=t&&t.hasOwnProperty(i)||(0===i.indexOf("--")?e.setProperty(i,""):"float"===i?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&Et(e,o,i)}else for(var a in t)t.hasOwnProperty(a)&&Et(e,a,t[a])}function kt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function At(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var It=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Dt=null;function Rt(e){var t=ze(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ht(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[De]||null;if(!o)throw Error(r(90));mt(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(i=n[t]).form===e.form&&dt(i)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&vt(e,!!n.multiple,t,!1)}}}var Mt=!1;function Pt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Nt||null!==Dt)&&($u(),Nt&&(t=Nt,e=Dt,Dt=Nt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ft(e,t){var n=e.stateNode;if(null===n)return null;var i=n[De]||null;if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(r(231,t,typeof n));return n}var Lt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),jt=!1;if(Lt)try{var Bt={};Object.defineProperty(Bt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Bt,Bt),window.removeEventListener("test",Bt,Bt)}catch(F0){jt=!1}var $t=null,zt=null,Ut=null;function qt(){if(Ut)return Ut;var e,t,n=zt,r=n.length,i="value"in $t?$t.value:$t.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Ut=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Vt(){return!0}function Wt(){return!1}function Gt(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Vt:Wt,this.isPropagationStopped=Wt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Vt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Vt)},persist:function(){},isPersistent:Vt}),t}var Yt,Kt,Zt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Gt(Qt),Jt=u({},Qt,{view:0,detail:0}),en=Gt(Jt),tn=u({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zt&&(Zt&&"mousemove"===e.type?(Yt=e.screenX-Zt.screenX,Kt=e.screenY-Zt.screenY):Kt=Yt=0,Zt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),nn=Gt(tn),rn=Gt(u({},tn,{dataTransfer:0})),on=Gt(u({},Jt,{relatedTarget:0})),an=Gt(u({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),sn=Gt(u({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ln=Gt(u({},Qt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var hn=Gt(u({},Jt,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mn=Gt(u({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Gt(u({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Gt(u({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Gt(u({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Gt(u({},Qt,{newState:0,oldState:0})),wn=[9,13,27,32],_n=Lt&&"CompositionEvent"in window,xn=null;Lt&&"documentMode"in document&&(xn=document.documentMode);var En=Lt&&"TextEvent"in window&&!xn,Sn=Lt&&(!_n||xn&&8<xn&&11>=xn),kn=String.fromCharCode(32),Tn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function An(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var In=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Dn(e,t,n,r){Nt?Dt?Dt.push(r):Dt=[r]:Nt=r,0<(t=qc(t,"onChange")).length&&(n=new Xt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Mn=null;function Pn(e){Pc(e,0)}function Fn(e){if(dt(Ue(e)))return e}function Ln(e,t){if("change"===e)return t}var jn=!1;if(Lt){var Bn;if(Lt){var $n="oninput"in document;if(!$n){var zn=document.createElement("div");zn.setAttribute("oninput","return;"),$n="function"==typeof zn.oninput}Bn=$n}else Bn=!1;jn=Bn&&(!document.documentMode||9<document.documentMode)}function Un(){Rn&&(Rn.detachEvent("onpropertychange",qn),Mn=Rn=null)}function qn(e){if("value"===e.propertyName&&Fn(Mn)){var t=[];Dn(t,Mn,e,Ot(e)),Pt(Pn,t)}}function Hn(e,t,n){"focusin"===e?(Un(),Mn=n,(Rn=t).attachEvent("onpropertychange",qn)):"focusout"===e&&Un()}function Vn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fn(Mn)}function Wn(e,t){if("click"===e)return Fn(t)}function Gn(e,t){if("input"===e||"change"===e)return Fn(t)}var Yn="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function Kn(e,t){if(Yn(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Yn(e[i],t[i]))return!1}return!0}function Zn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Zn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Zn(r)}}function Xn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Jn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(HOt){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tr=Lt&&"documentMode"in document&&11>=document.documentMode,nr=null,rr=null,ir=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==nr||nr!==ft(r)||("selectionStart"in(r=nr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Kn(ir,r)||(ir=r,0<(r=qc(rr,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=nr)))}function sr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},ur={},cr={};function dr(e){if(ur[e])return ur[e];if(!lr[e])return e;var t,n=lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in cr)return ur[e]=n[t];return e}Lt&&(cr=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),hr=dr("animationstart"),mr=dr("transitionrun"),gr=dr("transitionstart"),yr=dr("transitioncancel"),vr=dr("transitionend"),br=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){br.set(e,t),Ge(t,[e])}wr.push("scrollEnd");var xr=new WeakMap;function Er(e,t){if("object"==typeof e&&null!==e){var n=xr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:st(t)},xr.set(e,t),t)}return{value:e,source:t,stack:st(t)}}var Sr=[],kr=0,Tr=0;function Cr(){for(var e=kr,t=Tr=kr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var o=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var a=r.pending;null===a?i.next=i:(i.next=a.next,a.next=i),r.pending=i}0!==o&&Nr(n,i,o)}}function Ar(e,t,n,r){Sr[kr++]=e,Sr[kr++]=t,Sr[kr++]=n,Sr[kr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,n,r){return Ar(e,t,n,r),Dr(e)}function Or(e,t){return Ar(e,null,null,t),Dr(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,o=e.return;null!==o;)o.childLanes|=n,null!==(r=o.alternate)&&(r.childLanes|=n),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(i=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=o.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),o):null}function Dr(e){if(50<Nu)throw Nu=0,Du=null,Error(r(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(e,t,n,r){return new Mr(e,t,n,r)}function Fr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Lr(e,t){var n=e.alternate;return null===n?((n=Pr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function jr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,i,o,a){var s=0;if(i=e,"function"==typeof e)Fr(e)&&(s=1);else if("string"==typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,n,$.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case k:return(e=Pr(31,n,t,o)).elementType=k,e.lanes=a,e;case p:return $r(n.children,o,a,t);case h:s=8,o|=24;break;case m:return(e=Pr(12,n,t,2|o)).elementType=m,e.lanes=a,e;case w:return(e=Pr(13,n,t,o)).elementType=w,e.lanes=a,e;case _:return(e=Pr(19,n,t,o)).elementType=_,e.lanes=a,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case g:case v:s=10;break e;case y:s=9;break e;case b:s=11;break e;case x:s=14;break e;case E:s=16,i=null;break e}s=29,n=Error(r(130,null===e?"null":typeof e,"")),i=null}return(t=Pr(s,n,t,o)).elementType=e,t.type=i,t.lanes=a,t}function $r(e,t,n,r){return(e=Pr(7,e,r,t)).lanes=n,e}function zr(e,t,n){return(e=Pr(6,e,null,t)).lanes=n,e}function Ur(e,t,n){return(t=Pr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var qr=[],Hr=0,Vr=null,Wr=0,Gr=[],Yr=0,Kr=null,Zr=1,Qr="";function Xr(e,t){qr[Hr++]=Wr,qr[Hr++]=Vr,Vr=e,Wr=t}function Jr(e,t,n){Gr[Yr++]=Zr,Gr[Yr++]=Qr,Gr[Yr++]=Kr,Kr=e;var r=Zr;e=Qr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var o=32-fe(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zr=1<<32-fe(t)+i|n<<i|r,Qr=o+e}else Zr=1<<o|n<<i|r,Qr=e}function ei(e){null!==e.return&&(Xr(e,1),Jr(e,1,0))}function ti(e){for(;e===Vr;)Vr=qr[--Hr],qr[Hr]=null,Wr=qr[--Hr],qr[Hr]=null;for(;e===Kr;)Kr=Gr[--Yr],Gr[Yr]=null,Qr=Gr[--Yr],Gr[Yr]=null,Zr=Gr[--Yr],Gr[Yr]=null}var ni=null,ri=null,ii=!1,oi=null,ai=!1,si=Error(r(519));function li(e){throw hi(Er(Error(r(418,"")),e)),si}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ne]=e,t[De]=r,n){case"dialog":Fc("cancel",t),Fc("close",t);break;case"iframe":case"object":case"embed":Fc("load",t);break;case"video":case"audio":for(n=0;n<Rc.length;n++)Fc(Rc[n],t);break;case"source":Fc("error",t);break;case"img":case"image":case"link":Fc("error",t),Fc("load",t);break;case"details":Fc("toggle",t);break;case"input":Fc("invalid",t),gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ct(t);break;case"select":Fc("invalid",t);break;case"textarea":Fc("invalid",t),wt(t,r.value,r.defaultValue,r.children),ct(t)}"string"!=typeof(n=r.children)&&"number"!=typeof n&&"bigint"!=typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Kc(t.textContent,n)?(null!=r.popover&&(Fc("beforetoggle",t),Fc("toggle",t)),null!=r.onScroll&&Fc("scroll",t),null!=r.onScrollEnd&&Fc("scrollend",t),null!=r.onClick&&(t.onclick=Zc),t=!0):t=!1,t||li(e)}function ci(e){for(ni=e.return;ni;)switch(ni.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ni=ni.return}}function di(e){if(e!==ni)return!1;if(!ii)return ci(e),ii=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ri&&li(e),ci(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ri=gd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ri=null}}else 27===n?(n=ri,fd(e.type)?(e=yd,yd=null,ri=e):ri=n):ri=ni?gd(e.stateNode.nextSibling):null;return!0}function fi(){ri=ni=null,ii=!1}function pi(){var e=oi;return null!==e&&(null===vu?vu=e:vu.push.apply(vu,e),oi=null),e}function hi(e){null===oi?oi=[e]:oi.push(e)}var mi=L(null),gi=null,yi=null;function vi(e,t,n){B(mi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=mi.current,j(mi)}function wi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _i(e,t,n,i){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var a=o.dependencies;if(null!==a){var s=o.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=o;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),wi(a.return,n,e),i||(s=null);break e}a=l.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(r(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),wi(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function xi(e,t,n,i){e=null;for(var o=t,a=!1;null!==o;){if(!a)if(524288&o.flags)a=!0;else if(262144&o.flags)break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(r(387));if(null!==(s=s.memoizedProps)){var l=o.type;Yn(o.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(o===q.current){if(null===(s=o.alternate))throw Error(r(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(Gd):e=[Gd])}o=o.return}null!==e&&_i(t,e,n,i),t.flags|=262144}function Ei(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){gi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function ki(e){return Ci(gi,e)}function Ti(e,t){return null===gi&&Si(e),Ci(e,t)}function Ci(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(r(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ai="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ii=e.unstable_scheduleCallback,Oi=e.unstable_NormalPriority,Ni={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Ai,data:new Map,refCount:0}}function Ri(e){e.refCount--,0===e.refCount&&Ii(Oi,function(){e.controller.abort()})}var Mi=null,Pi=0,Fi=0,Li=null;function ji(){if(0===--Pi&&null!==Mi){null!==Li&&(Li.status="fulfilled");var e=Mi;Mi=null,Fi=0,Li=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Bi=D.S;D.S=function(e,t){"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Pi=0,Fi=Ac(),Li={status:"pending",value:void 0,then:function(e){n.push(e)}}}Pi++,t.then(ji,ji)}(0,t),null!==Bi&&Bi(e,t)};var $i=L(null);function zi(){var e=$i.current;return null!==e?e:nu.pooledCache}function Ui(e,t){B($i,null===t?$i.current:t.pool)}function qi(){var e=zi();return null===e?null:{parent:Ni._currentValue,pool:e}}var Hi=Error(r(460)),Vi=Error(r(474)),Wi=Error(r(542)),Gi={then:function(){}};function Yi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ki(){}function Zi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ki,Ki),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw Ji(e=t.reason),e;default:if("string"==typeof t.status)t.then(Ki,Ki);else{if(null!==(e=nu)&&100<e.shellSuspendCounter)throw Error(r(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw Ji(e=t.reason),e}throw Qi=t,Hi}}var Qi=null;function Xi(){if(null===Qi)throw Error(r(459));var e=Qi;return Qi=null,e}function Ji(e){if(e===Hi||e===Wi)throw Error(r(483))}var eo=!1;function to(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function no(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ro(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function io(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&tu){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Nr(e,null,n),t}return Ar(e,r,t,n),Dr(e)}function oo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function ao(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var so=!1;function lo(){if(so){if(null!==Li)throw Li}}function uo(e,t,n,r){so=!1;var i=e.updateQueue;eo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var d=e.alternate;null!==d&&((s=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===s?d.firstBaseUpdate=c:s.next=c,d.lastBaseUpdate=l))}if(null!==o){var f=i.baseState;for(a=0,d=c=l=null,s=o;;){var p=-536870913&s.lane,h=p!==s.lane;if(h?(iu&p)===p:(r&p)===p){0!==p&&p===Fi&&(so=!0),null!==d&&(d=d.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var y=n;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){f=m.call(y,f,p);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(y,f,p):m))break e;f=u({},f,p);break e;case 2:eo=!0}}null!==(p=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=i.callbacks)?i.callbacks=[p]:h.push(p))}else h={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===d?(c=d=h,l=f):d=d.next=h,a|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}null===d&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null===o&&(i.shared.lanes=0),fu|=a,e.lanes=a,e.memoizedState=f}}function co(e,t){if("function"!=typeof e)throw Error(r(191,e));e.call(t)}function fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)co(n[e],t)}var po=L(null),ho=L(0);function mo(e,t){B(ho,e=cu),B(po,t),cu=e|t.baseLanes}function go(){B(ho,cu),B(po,po.current)}function yo(){cu=ho.current,j(po),j(ho)}var vo=0,bo=null,wo=null,_o=null,xo=!1,Eo=!1,So=!1,ko=0,To=0,Co=null,Ao=0;function Io(){throw Error(r(321))}function Oo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function No(e,t,n,r,i,o){return vo=o,bo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Va:Wa,So=!1,o=n(r,i),So=!1,Eo&&(o=Ro(t,n,r,i)),Do(e),o}function Do(e){D.H=Ha;var t=null!==wo&&null!==wo.next;if(vo=0,_o=wo=bo=null,xo=!1,To=0,Co=null,t)throw Error(r(300));null===e||Ts||null!==(e=e.dependencies)&&Ei(e)&&(Ts=!0)}function Ro(e,t,n,i){bo=e;var o=0;do{if(Eo&&(Co=null),To=0,Eo=!1,25<=o)throw Error(r(301));if(o+=1,_o=wo=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}D.H=Ga,a=t(n,i)}while(Eo);return a}function Mo(){var e=D.H,t=e.useState()[0];return t="function"==typeof t.then?$o(t):t,e=e.useState()[0],(null!==wo?wo.memoizedState:null)!==e&&(bo.flags|=1024),t}function Po(){var e=0!==ko;return ko=0,e}function Fo(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Lo(e){if(xo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xo=!1}vo=0,_o=wo=bo=null,Eo=!1,To=ko=0,Co=null}function jo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_o?bo.memoizedState=_o=e:_o=_o.next=e,_o}function Bo(){if(null===wo){var e=bo.alternate;e=null!==e?e.memoizedState:null}else e=wo.next;var t=null===_o?bo.memoizedState:_o.next;if(null!==t)_o=t,wo=e;else{if(null===e){if(null===bo.alternate)throw Error(r(467));throw Error(r(310))}e={memoizedState:(wo=e).memoizedState,baseState:wo.baseState,baseQueue:wo.baseQueue,queue:wo.queue,next:null},null===_o?bo.memoizedState=_o=e:_o=_o.next=e}return _o}function $o(e){var t=To;return To+=1,null===Co&&(Co=[]),e=Zi(Co,e,t),t=bo,null===(null===_o?t.memoizedState:_o.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Va:Wa),e}function zo(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return $o(e);if(e.$$typeof===v)return ki(e)}throw Error(r(438,String(e)))}function Uo(e){var t=null,n=bo.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function qo(e,t){return"function"==typeof t?t(e):t}function Ho(e){return Vo(Bo(),wo,e)}function Vo(e,t,n){var i=e.queue;if(null===i)throw Error(r(311));i.lastRenderedReducer=n;var o=e.baseQueue,a=i.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}t.baseQueue=o=a,i.pending=null}if(a=e.baseState,null===o)e.memoizedState=a;else{var l=s=null,u=null,c=t=o.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(iu&f)===f:(vo&f)===f){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Fi&&(d=!0);else{if((vo&p)===p){c=c.next,p===Fi&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=a):u=u.next=f,bo.lanes|=p,fu|=p}f=c.action,So&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else p={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=a):u=u.next=p,bo.lanes|=f,fu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?s=a:u.next=l,!Yn(a,e.memoizedState)&&(Ts=!0,d&&null!==(n=Li)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=u,i.lastRenderedState=a}return null===o&&(i.lanes=0),[e.memoizedState,i.dispatch]}function Wo(e){var t=Bo(),n=t.queue;if(null===n)throw Error(r(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);Yn(a,t.memoizedState)||(Ts=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Go(e,t,n){var i=bo,o=Bo(),a=ii;if(a){if(void 0===n)throw Error(r(407));n=n()}else n=t();var s=!Yn((wo||o).memoizedState,n);if(s&&(o.memoizedState=n,Ts=!0),o=o.queue,ga(2048,8,Zo.bind(null,i,o,e),[e]),o.getSnapshot!==t||s||null!==_o&&1&_o.memoizedState.tag){if(i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ko.bind(null,i,o,n,t),null),null===nu)throw Error(r(349));a||124&vo||Yo(i,t,n)}return n}function Yo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ko(e,t,n,r){t.value=n,t.getSnapshot=r,Qo(t)&&Xo(e)}function Zo(e,t,n){return n(function(){Qo(t)&&Xo(e)})}function Qo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Xo(e){var t=Or(e,2);null!==t&&Pu(t,e,2)}function Jo(e){var t=jo();if("function"==typeof e){var n=e;if(e=n(),So){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:e},t}function ea(e,t,n,r){return e.baseState=n,Vo(e,wo,"function"==typeof r?r:qo)}function ta(e,t,n,i,o){if(za(e))throw Error(r(485));if(null!==(e=t.action)){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==D.T?n(!0):a.isTransition=!1,i(a),null===(n=t.pending)?(a.next=t.pending=a,na(t,a)):(a.next=n.next,t.pending=n.next=a)}}function na(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var o=D.T,a={};D.T=a;try{var s=n(i,r),l=D.S;null!==l&&l(a,s),ra(e,t,s)}catch(u){oa(e,t,u)}finally{D.T=o}}else try{ra(e,t,o=n(i,r))}catch(c){oa(e,t,c)}}function ra(e,t,n){null!==n&&"object"==typeof n&&"function"==typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return oa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,aa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,na(e,n)))}function oa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,aa(t),t=t.next}while(t!==r)}e.action=null}function aa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function sa(e,t){return t}function la(e,t){if(ii){var n=nu.formState;if(null!==n){e:{var r=bo;if(ii){if(ri){t:{for(var i=ri,o=ai;8!==i.nodeType;){if(!o){i=null;break t}if(null===(i=gd(i.nextSibling))){i=null;break t}}i="F!"===(o=i.data)||"F"===o?i:null}if(i){ri=gd(i.nextSibling),r="F!"===i.data;break e}}li(r)}r=!1}r&&(t=n[0])}}return(n=jo()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t},n.queue=r,n=ja.bind(null,bo,r),r.dispatch=n,r=Jo(!1),o=$a.bind(null,bo,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=jo()).queue=i,n=ta.bind(null,bo,i,o,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return ca(Bo(),wo,e)}function ca(e,t,n){if(t=Vo(e,t,sa)[0],e=Ho(qo)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var r=$o(t)}catch(t2e){if(t2e===Hi)throw Wi;throw t2e}else r=t;var i=(t=Bo()).queue,o=i.dispatch;return n!==t.memoizedState&&(bo.flags|=2048,pa(9,{destroy:void 0,resource:void 0},da.bind(null,i,n),null)),[r,o,e]}function da(e,t){e.action=t}function fa(e){var t=Bo(),n=wo;if(null!==n)return ca(t,n,e);Bo(),t=t.memoizedState;var r=(n=Bo()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function pa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bo.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ha(){return Bo().memoizedState}function ma(e,t,n,r){var i=jo();r=void 0===r?null:r,bo.flags|=e,i.memoizedState=pa(1|t,{destroy:void 0,resource:void 0},n,r)}function ga(e,t,n,r){var i=Bo();r=void 0===r?null:r;var o=i.memoizedState.inst;null!==wo&&null!==r&&Oo(r,wo.memoizedState.deps)?i.memoizedState=pa(t,o,n,r):(bo.flags|=e,i.memoizedState=pa(1|t,o,n,r))}function ya(e,t){ma(8390656,8,e,t)}function va(e,t){ga(2048,8,e,t)}function ba(e,t){return ga(4,2,e,t)}function wa(e,t){return ga(4,4,e,t)}function _a(e,t){if("function"==typeof t){e=e();var n=t(e);return function(){"function"==typeof n?n():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function xa(e,t,n){n=null!=n?n.concat([e]):null,ga(4,4,_a.bind(null,t,e),n)}function Ea(){}function Sa(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Oo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ka(e,t){var n=Bo();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Oo(t,r[1]))return r[0];if(r=e(),So){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Ta(e,t,n){return void 0===n||1073741824&vo?e.memoizedState=t:(e.memoizedState=n,e=Mu(),bo.lanes|=e,fu|=e,n)}function Ca(e,t,n,r){return Yn(n,t)?n:null!==po.current?(e=Ta(e,n,r),Yn(e,t)||(Ts=!0),e):42&vo?(e=Mu(),bo.lanes|=e,fu|=e,t):(Ts=!0,e.memoizedState=n)}function Aa(e,t,n,r,i){var o=R.p;R.p=0!==o&&8>o?o:8;var a,s,l,u=D.T,c={};D.T=c,$a(e,!1,t,n);try{var d=i(),f=D.S;if(null!==f&&f(c,d),null!==d&&"object"==typeof d&&"function"==typeof d.then){var p=(a=r,s=[],l={status:"pending",value:null,reason:null,then:function(e){s.push(e)}},d.then(function(){l.status="fulfilled",l.value=a;for(var e=0;e<s.length;e++)(0,s[e])(a)},function(e){for(l.status="rejected",l.reason=e,e=0;e<s.length;e++)(0,s[e])(void 0)}),l);Ba(e,t,p,Ru())}else Ba(e,t,r,Ru())}catch(h){Ba(e,t,{then:function(){},status:"rejected",reason:h},Ru())}finally{R.p=o,D.T=u}}function Ia(){}function Oa(e,t,n,i){if(5!==e.tag)throw Error(r(476));var o=Na(e).queue;Aa(e,o,t,M,null===n?Ia:function(){return Da(e),n(i)})}function Na(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Da(e){Ba(e,Na(e).next.queue,{},Ru())}function Ra(){return ki(Gd)}function Ma(){return Bo().memoizedState}function Pa(){return Bo().memoizedState}function Fa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Ru(),r=io(t,e=ro(n),n);return null!==r&&(Pu(r,t,n),oo(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function La(e,t,n){var r=Ru();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},za(e)?Ua(t,n):null!==(n=Ir(e,t,n,r))&&(Pu(n,e,r),qa(n,t,r))}function ja(e,t,n){Ba(e,t,n,Ru())}function Ba(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(za(e))Ua(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Yn(s,a))return Ar(e,t,i,0),null===nu&&Cr(),!1}catch(l){}if(null!==(n=Ir(e,t,i,r)))return Pu(n,e,r),qa(n,t,r),!0}return!1}function $a(e,t,n,i){if(i={lane:2,revertLane:Ac(),action:i,hasEagerState:!1,eagerState:null,next:null},za(e)){if(t)throw Error(r(479))}else null!==(t=Ir(e,n,i,2))&&Pu(t,e,2)}function za(e){var t=e.alternate;return e===bo||null!==t&&t===bo}function Ua(e,t){Eo=xo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function qa(e,t,n){if(4194048&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Ha={readContext:ki,use:zo,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useLayoutEffect:Io,useInsertionEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useSyncExternalStore:Io,useId:Io,useHostTransitionStatus:Io,useFormState:Io,useActionState:Io,useOptimistic:Io,useMemoCache:Io,useCacheRefresh:Io},Va={readContext:ki,use:zo,useCallback:function(e,t){return jo().memoizedState=[e,void 0===t?null:t],e},useContext:ki,useEffect:ya,useImperativeHandle:function(e,t,n){n=null!=n?n.concat([e]):null,ma(4194308,4,_a.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ma(4194308,4,e,t)},useInsertionEffect:function(e,t){ma(4,2,e,t)},useMemo:function(e,t){var n=jo();t=void 0===t?null:t;var r=e();if(So){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=jo();if(void 0!==n){var i=n(t);if(So){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=La.bind(null,bo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},jo().memoizedState=e},useState:function(e){var t=(e=Jo(e)).queue,n=ja.bind(null,bo,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Ta(jo(),e,t)},useTransition:function(){var e=Jo(!1);return e=Aa.bind(null,bo,e.queue,!0,!1),jo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=bo,o=jo();if(ii){if(void 0===n)throw Error(r(407));n=n()}else{if(n=t(),null===nu)throw Error(r(349));124&iu||Yo(i,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,ya(Zo.bind(null,i,a,e),[e]),i.flags|=2048,pa(9,{destroy:void 0,resource:void 0},Ko.bind(null,i,a,n,t),null),n},useId:function(){var e=jo(),t=nu.identifierPrefix;if(ii){var n=Qr;t="«"+t+"R"+(n=(Zr&~(1<<32-fe(Zr)-1)).toString(32)+n),0<(n=ko++)&&(t+="H"+n.toString(32)),t+="»"}else t="«"+t+"r"+(n=Ao++).toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Ra,useFormState:la,useActionState:la,useOptimistic:function(e){var t=jo();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=$a.bind(null,bo,!0,n),n.dispatch=t,[e,t]},useMemoCache:Uo,useCacheRefresh:function(){return jo().memoizedState=Fa.bind(null,bo)}},Wa={readContext:ki,use:zo,useCallback:Sa,useContext:ki,useEffect:va,useImperativeHandle:xa,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:ka,useReducer:Ho,useRef:ha,useState:function(){return Ho(qo)},useDebugValue:Ea,useDeferredValue:function(e,t){return Ca(Bo(),wo.memoizedState,e,t)},useTransition:function(){var e=Ho(qo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:$o(e),t]},useSyncExternalStore:Go,useId:Ma,useHostTransitionStatus:Ra,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ea(Bo(),0,e,t)},useMemoCache:Uo,useCacheRefresh:Pa},Ga={readContext:ki,use:zo,useCallback:Sa,useContext:ki,useEffect:va,useImperativeHandle:xa,useInsertionEffect:ba,useLayoutEffect:wa,useMemo:ka,useReducer:Wo,useRef:ha,useState:function(){return Wo(qo)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Bo();return null===wo?Ta(n,e,t):Ca(n,wo.memoizedState,e,t)},useTransition:function(){var e=Wo(qo)[0],t=Bo().memoizedState;return["boolean"==typeof e?e:$o(e),t]},useSyncExternalStore:Go,useId:Ma,useHostTransitionStatus:Ra,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Bo();return null!==wo?ea(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Uo,useCacheRefresh:Pa},Ya=null,Ka=0;function Za(e){var t=Ka;return Ka+=1,null===Ya&&(Ya=[]),Zi(Ya,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Xa(e,t){if(t.$$typeof===c)throw Error(r(525));throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ja(e){return(0,e._init)(e._payload)}function es(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Lr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=zr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function u(e,t,n,r){var i=n.type;return i===p?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"==typeof i&&null!==i&&i.$$typeof===E&&Ja(i)===t.type)?(Qa(t=o(t,n.props),n),t.return=e,t):(Qa(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ur(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=$r(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function m(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=zr(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case d:return Qa(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Ur(t,e.mode,n)).return=e,t;case E:return m(e,t=(0,t._init)(t._payload),n)}if(N(t)||A(t))return(t=$r(t,e.mode,n,null)).return=e,t;if("function"==typeof t.then)return m(e,Za(t),n);if(t.$$typeof===v)return m(e,Ti(e,t),n);Xa(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return null!==i?null:l(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case d:return n.key===i?u(e,t,n,r):null;case f:return n.key===i?c(e,t,n,r):null;case E:return g(e,t,n=(i=n._init)(n._payload),r)}if(N(n)||A(n))return null!==i?null:h(e,t,n,r,null);if("function"==typeof n.then)return g(e,t,Za(n),r);if(n.$$typeof===v)return g(e,t,Ti(e,n),r);Xa(e,n)}return null}function y(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case d:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case f:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(N(r)||A(r))return h(t,e=e.get(n)||null,r,i,null);if("function"==typeof r.then)return y(e,t,n,Za(r),i);if(r.$$typeof===v)return y(e,t,n,Ti(t,r),i);Xa(t,r)}return null}function b(l,u,c,h){if("object"==typeof c&&null!==c&&c.type===p&&null===c.key&&(c=c.props.children),"object"==typeof c&&null!==c){switch(c.$$typeof){case d:e:{for(var w=c.key;null!==u;){if(u.key===w){if((w=c.type)===p){if(7===u.tag){n(l,u.sibling),(h=o(u,c.props.children)).return=l,l=h;break e}}else if(u.elementType===w||"object"==typeof w&&null!==w&&w.$$typeof===E&&Ja(w)===u.type){n(l,u.sibling),Qa(h=o(u,c.props),c),h.return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===p?((h=$r(c.props.children,l.mode,h,c.key)).return=l,l=h):(Qa(h=Br(c.type,c.key,c.props,null,l.mode,h),c),h.return=l,l=h)}return s(l);case f:e:{for(w=c.key;null!==u;){if(u.key===w){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(h=o(u,c.children||[])).return=l,l=h;break e}n(l,u);break}t(l,u),u=u.sibling}(h=Ur(c,l.mode,h)).return=l,l=h}return s(l);case E:return b(l,u,c=(w=c._init)(c._payload),h)}if(N(c))return function(r,o,s,l){for(var u=null,c=null,d=o,f=o=0,p=null;null!==d&&f<s.length;f++){d.index>f?(p=d,d=null):p=d.sibling;var h=g(r,d,s[f],l);if(null===h){null===d&&(d=p);break}e&&d&&null===h.alternate&&t(r,d),o=a(h,o,f),null===c?u=h:c.sibling=h,c=h,d=p}if(f===s.length)return n(r,d),ii&&Xr(r,f),u;if(null===d){for(;f<s.length;f++)null!==(d=m(r,s[f],l))&&(o=a(d,o,f),null===c?u=d:c.sibling=d,c=d);return ii&&Xr(r,f),u}for(d=i(d);f<s.length;f++)null!==(p=y(d,r,f,s[f],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?f:p.key),o=a(p,o,f),null===c?u=p:c.sibling=p,c=p);return e&&d.forEach(function(e){return t(r,e)}),ii&&Xr(r,f),u}(l,u,c,h);if(A(c)){if("function"!=typeof(w=A(c)))throw Error(r(150));return function(o,s,l,u){if(null==l)throw Error(r(151));for(var c=null,d=null,f=s,p=s=0,h=null,v=l.next();null!==f&&!v.done;p++,v=l.next()){f.index>p?(h=f,f=null):h=f.sibling;var b=g(o,f,v.value,u);if(null===b){null===f&&(f=h);break}e&&f&&null===b.alternate&&t(o,f),s=a(b,s,p),null===d?c=b:d.sibling=b,d=b,f=h}if(v.done)return n(o,f),ii&&Xr(o,p),c;if(null===f){for(;!v.done;p++,v=l.next())null!==(v=m(o,v.value,u))&&(s=a(v,s,p),null===d?c=v:d.sibling=v,d=v);return ii&&Xr(o,p),c}for(f=i(f);!v.done;p++,v=l.next())null!==(v=y(f,o,p,v.value,u))&&(e&&null!==v.alternate&&f.delete(null===v.key?p:v.key),s=a(v,s,p),null===d?c=v:d.sibling=v,d=v);return e&&f.forEach(function(e){return t(o,e)}),ii&&Xr(o,p),c}(l,u,c=w.call(c),h)}if("function"==typeof c.then)return b(l,u,Za(c),h);if(c.$$typeof===v)return b(l,u,Ti(l,c),h);Xa(l,c)}return"string"==typeof c&&""!==c||"number"==typeof c||"bigint"==typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(h=o(u,c)).return=l,l=h):(n(l,u),(h=zr(c,l.mode,h)).return=l,l=h),s(l)):n(l,u)}return function(e,t,n,r){try{Ka=0;var i=b(e,t,n,r);return Ya=null,i}catch(t2e){if(t2e===Hi||t2e===Wi)throw t2e;var o=Pr(29,t2e,null,e.mode);return o.lanes=r,o.return=e,o}}}var ts=es(!0),ns=es(!1),rs=L(null),is=null;function os(e){var t=e.alternate;B(us,1&us.current),B(rs,e),null===is&&(null===t||null!==po.current||null!==t.memoizedState)&&(is=e)}function as(e){if(22===e.tag){if(B(us,us.current),B(rs,e),null===is){var t=e.alternate;null!==t&&null!==t.memoizedState&&(is=e)}}else ss()}function ss(){B(us,us.current),B(rs,rs.current)}function ls(e){j(rs),is===e&&(is=null),j(us)}var us=L(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||md(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ds(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:u({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fs={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=ro(r);i.payload=t,null!=n&&(i.callback=n),null!==(t=io(e,i,r))&&(Pu(t,e,r),oo(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ru(),i=ro(r);i.tag=1,i.payload=t,null!=n&&(i.callback=n),null!==(t=io(e,i,r))&&(Pu(t,e,r),oo(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ru(),r=ro(n);r.tag=2,null!=t&&(r.callback=t),null!==(t=io(e,r,n))&&(Pu(t,e,n),oo(t,e,n))}};function ps(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Kn(n,r)||!Kn(i,o))}function hs(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fs.enqueueReplaceState(t,t.state,null)}function ms(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=u({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var gs="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)};function ys(e){gs(e)}function vs(e){}function bs(e){gs(e)}function ws(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function _s(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=ro(n)).tag=3,n.payload={element:null},n.callback=function(){ws(e,t)},n}function Es(e){return(e=ro(e)).tag=3,e}function Ss(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"==typeof i){var o=r.value;e.payload=function(){return i(o)},e.callback=function(){_s(t,n,r)}}var a=n.stateNode;null!==a&&"function"==typeof a.componentDidCatch&&(e.callback=function(){_s(t,n,r),"function"!=typeof i&&(null===Eu?Eu=new Set([this]):Eu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var ks=Error(r(461)),Ts=!1;function Cs(e,t,n,r){t.child=null===e?ns(t,null,n,r):ts(t,e.child,n,r)}function As(e,t,n,r,i){n=n.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Si(t),r=No(e,t,n,a,o,i),s=Po(),null===e||Ts?(ii&&s&&ei(t),t.flags|=1,Cs(e,t,r,i),t.child):(Fo(e,t,i),Ys(e,t,i))}function Is(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Fr(o)||void 0!==o.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Os(e,t,o,r,i))}if(o=e.child,!Ks(e,i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Kn)(a,r)&&e.ref===t.ref)return Ys(e,t,i)}return t.flags|=1,(e=Lr(o,r)).ref=t.ref,e.return=t,t.child=e}function Os(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(Kn(o,r)&&e.ref===t.ref){if(Ts=!1,t.pendingProps=r=o,!Ks(e,i))return t.lanes=e.lanes,Ys(e,t,i);131072&e.flags&&(Ts=!0)}}return Ms(e,t,n,r,i)}function Ns(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(128&t.flags){if(r=null!==o?o.baseLanes|n:n,null!==e){for(i=t.child=e.child,o=0;null!==i;)o=o|i.lanes|i.childLanes,i=i.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Ds(e,t,r,n)}if(!(536870912&n))return t.lanes=t.childLanes=536870912,Ds(e,t,null!==o?o.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ui(0,null!==o?o.cachePool:null),null!==o?mo(t,o):go(),as(t)}else null!==o?(Ui(0,o.cachePool),mo(t,o),ss(),t.memoizedState=null):(null!==e&&Ui(0,null),go(),ss());return Cs(e,t,i,n),t.child}function Ds(e,t,n,r){var i=zi();return i=null===i?null:{parent:Ni._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Ui(0,null),go(),as(t),null!==e&&xi(e,t,r,!0),null}function Rs(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof n&&"object"!=typeof n)throw Error(r(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ms(e,t,n,r,i){return Si(t),n=No(e,t,n,r,void 0,i),r=Po(),null===e||Ts?(ii&&r&&ei(t),t.flags|=1,Cs(e,t,n,i),t.child):(Fo(e,t,i),Ys(e,t,i))}function Ps(e,t,n,r,i,o){return Si(t),t.updateQueue=null,n=Ro(t,r,n,i),Do(e),r=Po(),null===e||Ts?(ii&&r&&ei(t),t.flags|=1,Cs(e,t,n,o),t.child):(Fo(e,t,o),Ys(e,t,o))}function Fs(e,t,n,r,i){if(Si(t),null===t.stateNode){var o=Rr,a=n.contextType;"object"==typeof a&&null!==a&&(o=ki(a)),o=new n(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=fs,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},to(t),a=n.contextType,o.context="object"==typeof a&&null!==a?ki(a):Rr,o.state=t.memoizedState,"function"==typeof(a=n.getDerivedStateFromProps)&&(ds(t,n,a,r),o.state=t.memoizedState),"function"==typeof n.getDerivedStateFromProps||"function"==typeof o.getSnapshotBeforeUpdate||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||(a=o.state,"function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&fs.enqueueReplaceState(o,o.state,null),uo(t,r,o,i),lo(),o.state=t.memoizedState),"function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=ms(n,s);o.props=l;var u=o.context,c=n.contextType;a=Rr,"object"==typeof c&&null!==c&&(a=ki(c));var d=n.getDerivedStateFromProps;c="function"==typeof d||"function"==typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(s||u!==a)&&hs(t,o,r,a),eo=!1;var f=t.memoizedState;o.state=f,uo(t,r,o,i),lo(),u=t.memoizedState,s||f!==u||eo?("function"==typeof d&&(ds(t,n,d,r),u=t.memoizedState),(l=eo||ps(t,n,l,r,f,u,a))?(c||"function"!=typeof o.UNSAFE_componentWillMount&&"function"!=typeof o.componentWillMount||("function"==typeof o.componentWillMount&&o.componentWillMount(),"function"==typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"==typeof o.componentDidMount&&(t.flags|=4194308)):("function"==typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=a,r=l):("function"==typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,no(e,t),c=ms(n,a=t.memoizedProps),o.props=c,d=t.pendingProps,f=o.context,u=n.contextType,l=Rr,"object"==typeof u&&null!==u&&(l=ki(u)),(u="function"==typeof(s=n.getDerivedStateFromProps)||"function"==typeof o.getSnapshotBeforeUpdate)||"function"!=typeof o.UNSAFE_componentWillReceiveProps&&"function"!=typeof o.componentWillReceiveProps||(a!==d||f!==l)&&hs(t,o,r,l),eo=!1,f=t.memoizedState,o.state=f,uo(t,r,o,i),lo();var p=t.memoizedState;a!==d||f!==p||eo||null!==e&&null!==e.dependencies&&Ei(e.dependencies)?("function"==typeof s&&(ds(t,n,s,r),p=t.memoizedState),(c=eo||ps(t,n,c,r,f,p,l)||null!==e&&null!==e.dependencies&&Ei(e.dependencies))?(u||"function"!=typeof o.UNSAFE_componentWillUpdate&&"function"!=typeof o.componentWillUpdate||("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"==typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"==typeof o.componentDidUpdate&&(t.flags|=4),"function"==typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!=typeof o.componentDidUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!=typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Rs(e,t),r=!!(128&t.flags),o||r?(o=t.stateNode,n=r&&"function"!=typeof n.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=ts(t,e.child,null,i),t.child=ts(t,null,n,i)):Cs(e,t,n,i),t.memoizedState=o.state,e=t.child):e=Ys(e,t,i),e}function Ls(e,t,n,r){return fi(),t.flags|=256,Cs(e,t,n,r),t.child}var js={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Bs(e){return{baseLanes:e,cachePool:qi()}}function $s(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=mu),e}function zs(e,t,n){var i,o=t.pendingProps,a=!1,s=!!(128&t.flags);if((i=s)||(i=(null===e||null!==e.memoizedState)&&!!(2&us.current)),i&&(a=!0,t.flags&=-129),i=!!(32&t.flags),t.flags&=-33,null===e){if(ii){if(a?os(t):ss(),ii){var l,u=ri;if(l=u){e:{for(l=u,u=ai;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=gd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Kr?{id:Zr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(l=Pr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ni=t,ri=null,l=!0):l=!1}l||li(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return md(u)?t.lanes=32:t.lanes=536870912,null;ls(t)}return u=o.children,o=o.fallback,a?(ss(),u=qs({mode:"hidden",children:u},a=t.mode),o=$r(o,a,n,null),u.return=t,o.return=t,u.sibling=o,t.child=u,(a=t.child).memoizedState=Bs(n),a.childLanes=$s(e,i,n),t.memoizedState=js,o):(os(t),Us(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(os(t),t.flags&=-257,t=Hs(e,t,n)):null!==t.memoizedState?(ss(),t.child=e.child,t.flags|=128,t=null):(ss(),a=o.fallback,u=t.mode,o=qs({mode:"visible",children:o.children},u),(a=$r(a,u,n,null)).flags|=2,o.return=t,a.return=t,o.sibling=a,t.child=o,ts(t,e.child,null,n),(o=t.child).memoizedState=Bs(n),o.childLanes=$s(e,i,n),t.memoizedState=js,t=a);else if(os(t),md(u)){if(i=u.nextSibling&&u.nextSibling.dataset)var c=i.dgst;i=c,(o=Error(r(419))).stack="",o.digest=i,hi({value:o,source:null,stack:null}),t=Hs(e,t,n)}else if(Ts||xi(e,t,n,!1),i=0!==(n&e.childLanes),Ts||i){if(null!==(i=nu)&&(0!==(o=0!==((o=42&(o=n&-n)?1:Ce(o))&(i.suspendedLanes|n))?0:o)&&o!==l.retryLane))throw l.retryLane=o,Or(e,o),Pu(i,e,o),ks;"$?"===u.data||Wu(),t=Hs(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ri=gd(u.nextSibling),ni=t,ii=!0,oi=null,ai=!1,null!==e&&(Gr[Yr++]=Zr,Gr[Yr++]=Qr,Gr[Yr++]=Kr,Zr=e.id,Qr=e.overflow,Kr=t),(t=Us(t,o.children)).flags|=4096);return t}return a?(ss(),a=o.fallback,u=t.mode,c=(l=e.child).sibling,(o=Lr(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Lr(c,a):(a=$r(a,u,n,null)).flags|=2,a.return=t,o.return=t,o.sibling=a,t.child=o,o=a,a=t.child,null===(u=e.child.memoizedState)?u=Bs(n):(null!==(l=u.cachePool)?(c=Ni._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=qi(),u={baseLanes:u.baseLanes|n,cachePool:l}),a.memoizedState=u,a.childLanes=$s(e,i,n),t.memoizedState=js,o):(os(t),e=(n=e.child).sibling,(n=Lr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n)}function Us(e,t){return(t=qs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function qs(e,t){return(e=Pr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Hs(e,t,n){return ts(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wi(e.return,t,n)}function Ws(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Cs(e,t,r.children,n),2&(r=us.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(B(us,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,o);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(xi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(n=Lr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Lr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ei(e))}function Zs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ts=!0;else{if(!(Ks(e,n)||128&t.flags))return Ts=!1,function(e,t,n){switch(t.tag){case 3:H(t,t.stateNode.containerInfo),vi(0,Ni,e.memoizedState.cache),fi();break;case 27:case 5:W(t);break;case 4:H(t,t.stateNode.containerInfo);break;case 10:vi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(os(t),t.flags|=128,null):0!==(n&t.child.childLanes)?zs(e,t,n):(os(t),null!==(e=Ys(e,t,n))?e.sibling:null);os(t);break;case 19:var i=!!(128&e.flags);if((r=0!==(n&t.childLanes))||(xi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),B(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ns(e,t,n);case 24:vi(0,Ni,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);Ts=!!(131072&e.flags)}else Ts=!1,ii&&1048576&t.flags&&Jr(t,Wr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,o=i._init;if(i=o(i._payload),t.type=i,"function"!=typeof i){if(null!=i){if((o=i.$$typeof)===b){t.tag=11,t=As(null,t,i,e,n);break e}if(o===x){t.tag=14,t=Is(null,t,i,e,n);break e}}throw t=O(i)||i,Error(r(306,t,""))}Fr(i)?(e=ms(i,e),t.tag=1,t=Fs(null,t,i,e,n)):(t.tag=0,t=Ms(null,t,i,e,n))}return t;case 0:return Ms(e,t,t.type,t.pendingProps,n);case 1:return Fs(e,t,i=t.type,o=ms(i,t.pendingProps),n);case 3:e:{if(H(t,t.stateNode.containerInfo),null===e)throw Error(r(387));i=t.pendingProps;var a=t.memoizedState;o=a.element,no(e,t),uo(t,i,null,n);var s=t.memoizedState;if(i=s.cache,vi(0,Ni,i),i!==a.cache&&_i(t,[Ni],n,!0),lo(),i=s.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ls(e,t,i,n);break e}if(i!==o){hi(o=Er(Error(r(424)),t)),t=Ls(e,t,i,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ri=gd(e.firstChild),ni=t,ii=!0,oi=null,ai=!0,n=ns(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),i===o){t=Ys(e,t,n);break e}Cs(e,t,i,n)}t=t.child}return t;case 26:return Rs(e,t),null===e?(n=Cd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ii||(n=t.type,e=t.pendingProps,(i=nd(U.current).createElement(n))[Ne]=t,i[De]=e,Jc(i,n,e),He(i),t.stateNode=i):t.memoizedState=Cd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return W(t),null===e&&ii&&(i=t.stateNode=bd(t.type,t.pendingProps,U.current),ni=t,ai=!0,o=ri,fd(t.type)?(yd=o,ri=gd(i.firstChild)):ri=o),Cs(e,t,t.pendingProps.children,n),Rs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ii&&((o=i=ri)&&(null!==(i=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===o)return e}if(null===(e=gd(e.nextSibling)))break}return null}(i,t.type,t.pendingProps,ai))?(t.stateNode=i,ni=t,ri=gd(i.firstChild),ai=!1,o=!0):o=!1),o||li(t)),W(t),o=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,i=a.children,od(o,a)?i=null:null!==s&&od(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=No(e,t,Mo,null,null,n),Gd._currentValue=o),Rs(e,t),Cs(e,t,i,n),t.child;case 6:return null===e&&ii&&((e=n=ri)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=gd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ni=t,ri=null,e=!0):e=!1),e||li(t)),null;case 13:return zs(e,t,n);case 4:return H(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ts(t,null,i,n):Cs(e,t,i,n),t.child;case 11:return As(e,t,t.type,t.pendingProps,n);case 7:return Cs(e,t,t.pendingProps,n),t.child;case 8:case 12:return Cs(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,vi(0,t.type,i.value),Cs(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,Si(t),i=i(o=ki(o)),t.flags|=1,Cs(e,t,i,n),t.child;case 14:return Is(e,t,t.type,t.pendingProps,n);case 15:return Os(e,t,t.type,t.pendingProps,n);case 19:return Gs(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},null===e?((n=qs(i,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Lr(e.child,i)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ns(e,t,n);case 24:return Si(t),i=ki(Ni),null===e?(null===(o=zi())&&(o=nu,a=Di(),o.pooledCache=a,a.refCount++,null!==a&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:i,cache:o},to(t),vi(0,Ni,o)):(0!==(e.lanes&n)&&(no(e,t),uo(t,null,null,n),lo()),o=e.memoizedState,a=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),vi(0,Ni,i)):(i=a.cache,vi(0,Ni,i),i!==o.cache&&_i(t,[Ni],n,!0))),Cs(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(r(156,t.tag))}function Qs(e){e.flags|=4}function Xs(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!$d(t)){if(null!==(t=rs.current)&&((4194048&iu)===iu?null!==is:(62914560&iu)!==iu&&!(536870912&iu)||t!==is))throw Qi=Gi,Vi;e.flags|=8192}}function Js(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?xe():536870912,e.lanes|=t,gu|=t)}function el(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function tl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nl(e,t,n){var i=t.pendingProps;switch(ti(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return tl(t),null;case 3:return n=t.stateNode,i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),bi(Ni),V(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Qs(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,pi())),tl(t),null;case 26:return n=t.memoizedState,null===e?(Qs(t),null!==n?(tl(t),Xs(t,n)):(tl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qs(t),tl(t),Xs(t,n)):(tl(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qs(t),tl(t),t.flags&=-16777217),null;case 27:G(t),n=U.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return tl(t),null}e=$.current,di(t)?ui(t):(e=bd(o,i,n),t.stateNode=e,Qs(t))}return tl(t),null;case 5:if(G(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if(!i){if(null===t.stateNode)throw Error(r(166));return tl(t),null}if(e=$.current,di(t))ui(t);else{switch(o=nd(U.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"==typeof i.is?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e="string"==typeof i.is?o.createElement(n,{is:i.is}):o.createElement(n)}}e[Ne]=t,e[De]=i;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Jc(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qs(t)}}return tl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==i&&Qs(t);else{if("string"!=typeof i&&null===t.stateNode)throw Error(r(166));if(e=U.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,null!==(o=ni))switch(o.tag){case 27:case 5:i=o.memoizedProps}e[Ne]=t,(e=!!(e.nodeValue===n||null!==i&&!0===i.suppressHydrationWarning||Kc(e.nodeValue,n)))||li(t)}else(e=nd(e).createTextNode(i))[Ne]=t,t.stateNode=e}return tl(t),null;case 13:if(i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=di(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(r(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(r(317));o[Ne]=t}else fi(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;tl(t),o=!1}else o=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(ls(t),t):(ls(t),null)}if(ls(t),128&t.flags)return t.lanes=n,t;if(n=null!==i,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(o=i.alternate.memoizedState.cachePool.pool);var a=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(a=i.memoizedState.cachePool.pool),a!==o&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Js(t,t.updateQueue),tl(t),null;case 4:return V(),null===e&&Bc(t.stateNode.containerInfo),tl(t),null;case 10:return bi(t.type),tl(t),null;case 19:if(j(us),null===(o=t.memoizedState))return tl(t),null;if(i=!!(128&t.flags),null===(a=o.rendering))if(i)el(o,!1);else{if(0!==du||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=cs(e))){for(t.flags|=128,el(o,!1),e=a.updateQueue,t.updateQueue=e,Js(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)jr(n,e),n=n.sibling;return B(us,1&us.current|2),t.child}e=e.sibling}null!==o.tail&&ee()>_u&&(t.flags|=128,i=!0,el(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=cs(a))){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,Js(t,e),el(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!ii)return tl(t),null}else 2*ee()-o.renderingStartTime>_u&&536870912!==n&&(t.flags|=128,i=!0,el(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=o.last)?e.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ee(),t.sibling=null,e=us.current,B(us,i?1&e|2:1&e),t):(tl(t),null);case 22:case 23:return ls(t),yo(),i=null!==t.memoizedState,null!==e?null!==e.memoizedState!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?!!(536870912&n)&&!(128&t.flags)&&(tl(t),6&t.subtreeFlags&&(t.flags|=8192)):tl(t),null!==(n=t.updateQueue)&&Js(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),i=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),null!==e&&j($i),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Ni),tl(t),null;case 25:case 30:return null}throw Error(r(156,t.tag))}function rl(e,t){switch(ti(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Ni),V(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return G(t),null;case 13:if(ls(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(us),null;case 4:return V(),null;case 10:return bi(t.type),null;case 22:case 23:return ls(t),yo(),null!==e&&j($i),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Ni),null;default:return null}}function il(e,t){switch(ti(t),t.tag){case 3:bi(Ni),V();break;case 26:case 27:case 5:G(t);break;case 4:V();break;case 13:ls(t);break;case 19:j(us);break;case 10:bi(t.type);break;case 22:case 23:ls(t),yo(),null!==e&&j($i);break;case 24:bi(Ni)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var o=n.create,a=n.inst;r=o(),a.destroy=r}n=n.next}while(n!==i)}}catch(s){uc(t,t.return,s)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var o=i.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(c){uc(i,l,c)}}}r=r.next}while(r!==o)}}catch(c){uc(t,t.return,c)}}function sl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{fo(t,n)}catch(r){uc(e,e.return,r)}}}function ll(e,t,n){n.props=ms(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uc(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"==typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uc(e,t,i)}}function cl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"==typeof r)try{r()}catch(i){uc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof n)try{n(null)}catch(o){uc(e,t,o)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uc(e,e.return,i)}}function fl(e,t,n){try{var i=e.stateNode;!function(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,s=null,l=null,u=null,c=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&null!=f)switch(h){case"checked":case"value":break;case"defaultValue":u=f;default:i.hasOwnProperty(h)||Qc(e,t,h,null,i,f)}}for(var p in i){var h=i[p];if(f=n[p],i.hasOwnProperty(p)&&(null!=h||null!=f))switch(p){case"type":a=h;break;case"name":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(r(137,t));break;default:h!==f&&Qc(e,t,p,h,i,f)}}return void mt(e,s,l,u,c,d,a,o);case"select":for(a in h=s=l=p=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":h=u;default:i.hasOwnProperty(a)||Qc(e,t,a,null,i,u)}for(o in i)if(a=i[o],u=n[o],i.hasOwnProperty(o)&&(null!=a||null!=u))switch(o){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&Qc(e,t,o,a,i,u)}return t=l,n=s,i=h,void(null!=p?vt(e,!!n,p,!1):!!i!=!!n&&(null!=t?vt(e,!!n,t,!0):vt(e,!!n,n?[]:"",!1)));case"textarea":for(l in h=p=null,n)if(o=n[l],n.hasOwnProperty(l)&&null!=o&&!i.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qc(e,t,l,null,i,o)}for(s in i)if(o=i[s],a=n[s],i.hasOwnProperty(s)&&(null!=o||null!=a))switch(s){case"value":p=o;break;case"defaultValue":h=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(r(91));break;default:o!==a&&Qc(e,t,s,o,i,a)}return void bt(e,p,h);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!i.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Qc(e,t,m,null,i,p);for(u in i)if(p=i[u],h=n[u],i.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))if("selected"===u)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else Qc(e,t,u,p,i,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!i.hasOwnProperty(g)&&Qc(e,t,g,null,i,p);for(c in i)if(p=i[c],h=n[c],i.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(r(137,t));break;default:Qc(e,t,c,p,i,h)}return;default:if(kt(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!i.hasOwnProperty(y)&&Xc(e,t,y,void 0,i,p);for(d in i)p=i[d],h=n[d],!i.hasOwnProperty(d)||p===h||void 0===p&&void 0===h||Xc(e,t,d,p,i,h);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!i.hasOwnProperty(v)&&Qc(e,t,v,null,i,p);for(f in i)p=i[f],h=n[f],!i.hasOwnProperty(f)||p===h||null==p&&null==h||Qc(e,t,f,p,i,h)}(i,e.type,n,t),i[De]=t}catch(o){uc(e,e.return,o)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ml(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Zc));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(ml(e,t,n),e=e.sibling;null!==e;)ml(e,t,n),e=e.sibling}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Jc(t,r,n),t[Ne]=e,t[De]=n}catch(o){uc(e,e.return,o)}}var vl=!1,bl=!1,wl=!1,_l="function"==typeof WeakSet?WeakSet:Set,xl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){uc(n,n.return,a)}else{var i=ms(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uc(n,n.return,s)}}64&r&&sl(n),512&r&&ul(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{fo(e,t)}catch(a){uc(n,n.return,a)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Il(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||vl)){t=null!==t&&null!==t.memoizedState||bl,i=vl;var o=bl;vl=r,(bl=t)&&!o?jl(e,n,!!(8772&n.subtreeFlags)):Fl(e,n),vl=i,bl=o}break;case 30:break;default:Fl(e,n)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Be(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var kl=null,Tl=!1;function Cl(e,t,n){for(n=n.child;null!==n;)Al(e,t,n),n=n.sibling}function Al(e,t,n){if(ce&&"function"==typeof ce.onCommitFiberUnmount)try{ce.onCommitFiberUnmount(ue,n)}catch(HOt){}switch(n.tag){case 26:bl||cl(n,t),Cl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||cl(n,t);var r=kl,i=Tl;fd(n.type)&&(kl=n.stateNode,Tl=!1),Cl(e,t,n),wd(n.stateNode),kl=r,Tl=i;break;case 5:bl||cl(n,t);case 6:if(r=kl,i=Tl,kl=null,Cl(e,t,n),Tl=i,null!==(kl=r))if(Tl)try{(9===kl.nodeType?kl.body:"HTML"===kl.nodeName?kl.ownerDocument.body:kl).removeChild(n.stateNode)}catch(o){uc(n,t,o)}else try{kl.removeChild(n.stateNode)}catch(o){uc(n,t,o)}break;case 18:null!==kl&&(Tl?(pd(9===(e=kl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Cf(e)):pd(kl,n.stateNode));break;case 4:r=kl,i=Tl,kl=n.stateNode.containerInfo,Tl=!0,Cl(e,t,n),kl=r,Tl=i;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),Cl(e,t,n);break;case 1:bl||(cl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount&&ll(n,t,r)),Cl(e,t,n);break;case 21:Cl(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Cl(e,t,n),bl=r;break;default:Cl(e,t,n)}}function Il(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Cf(e)}catch(n){uc(t,t.return,n)}}function Ol(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new _l),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new _l),t;default:throw Error(r(435,e.tag))}}(e);t.forEach(function(t){var r=hc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Nl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var o=n[i],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){kl=l.stateNode,Tl=!1;break e}break;case 5:kl=l.stateNode,Tl=!1;break e;case 3:case 4:kl=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===kl)throw Error(r(160));Al(a,s,o),kl=null,Tl=!1,null!==(a=o.alternate)&&(a.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Dl=null;function Rl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nl(t,e),Ml(e),4&i&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Nl(t,e),Ml(e),512&i&&(bl||null===n||cl(n,n.return)),64&i&&vl&&(null!==(e=e.updateQueue)&&(null!==(i=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?i:n.concat(i))));break;case 26:var o=Dl;if(Nl(t,e),Ml(e),512&i&&(bl||null===n||cl(n,n.return)),4&i){var a=null!==n?n.memoizedState:null;if(i=e.memoizedState,null===n)if(null===i)if(null===e.stateNode){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":(!(a=o.getElementsByTagName("title")[0])||a[je]||a[Ne]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=o.createElement(i),o.head.insertBefore(a,o.querySelector("head > title"))),Jc(a,i,n),a[Ne]=e,He(a),i=a;break e;case"link":var s=jd("link","href",o).get(i+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}Jc(a=o.createElement(i),i,n),o.head.appendChild(a);break;case"meta":if(s=jd("meta","content",o).get(i+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}Jc(a=o.createElement(i),i,n),o.head.appendChild(a);break;default:throw Error(r(468,i))}a[Ne]=e,He(a),i=a}e.stateNode=i}else Bd(o,e.type,e.stateNode);else e.stateNode=Rd(o,i,e.memoizedProps);else a!==i?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===i?Bd(o,e.type,e.stateNode):Rd(o,i,e.memoizedProps)):null===i&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Nl(t,e),Ml(e),512&i&&(bl||null===n||cl(n,n.return)),null!==n&&4&i&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Nl(t,e),Ml(e),512&i&&(bl||null===n||cl(n,n.return)),32&e.flags){o=e.stateNode;try{_t(o,"")}catch(h){uc(e,e.return,h)}}4&i&&null!=e.stateNode&&fl(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&i&&(wl=!0);break;case 6:if(Nl(t,e),Ml(e),4&i){if(null===e.stateNode)throw Error(r(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(h){uc(e,e.return,h)}}break;case 3:if(Ld=null,o=Dl,Dl=Ed(t.containerInfo),Nl(t,e),Dl=o,Ml(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Cf(t.containerInfo)}catch(h){uc(e,e.return,h)}wl&&(wl=!1,Pl(e));break;case 4:i=Dl,Dl=Ed(e.stateNode.containerInfo),Nl(t,e),Ml(e),Dl=i;break;case 12:default:Nl(t,e),Ml(e);break;case 13:Nl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==n&&null!==n.memoizedState)&&(wu=ee()),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ol(e,i)));break;case 22:o=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=vl,d=bl;if(vl=c||o,bl=d||u,Nl(t,e),bl=d,vl=c,Ml(e),8192&i)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||u||vl||bl||Ll(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,o)"function"==typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,p=null!=f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(h){uc(u,u.return,h)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=o?"":u.memoizedProps}catch(h){uc(u,u.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&i&&(null!==(i=e.updateQueue)&&(null!==(n=i.retryQueue)&&(i.retryQueue=null,Ol(e,n))));break;case 19:Nl(t,e),Ml(e),4&i&&(null!==(i=e.updateQueue)&&(e.updateQueue=null,Ol(e,i)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,i=e.return;null!==i;){if(pl(i)){n=i;break}i=i.return}if(null==n)throw Error(r(160));switch(n.tag){case 27:var o=n.stateNode;gl(e,hl(e),o);break;case 5:var a=n.stateNode;32&n.flags&&(_t(a,""),n.flags&=-33),gl(e,hl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;ml(e,hl(e),s);break;default:throw Error(r(161))}}catch(l){uc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Pl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Pl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Ll(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Ll(t);break;case 1:cl(t,t.return);var n=t.stateNode;"function"==typeof n.componentWillUnmount&&ll(t,t.return,n),Ll(t);break;case 27:wd(t.stateNode);case 26:case 5:cl(t,t.return),Ll(t);break;case 22:null===t.memoizedState&&Ll(t);break;default:Ll(t)}e=e.sibling}}function jl(e,t,n){for(n=n&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:jl(i,o,n),ol(4,o);break;case 1:if(jl(i,o,n),"function"==typeof(i=(r=o).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){uc(r,r.return,u)}if(null!==(i=(r=o).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)co(l[i],s)}catch(u){uc(r,r.return,u)}}n&&64&a&&sl(o),ul(o,o.return);break;case 27:yl(o);case 26:case 5:jl(i,o,n),n&&null===r&&4&a&&dl(o),ul(o,o.return);break;case 12:jl(i,o,n);break;case 13:jl(i,o,n),n&&4&a&&Il(i,o);break;case 22:null===o.memoizedState&&jl(i,o,n),ul(o,o.return);break;case 30:break;default:jl(i,o,n)}t=t.sibling}}function Bl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ri(n))}function $l(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e))}function zl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Ul(e,t,n,r),t=t.sibling}function Ul(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:zl(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:zl(e,t,n,r);break;case 3:zl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e)));break;case 12:if(2048&i){zl(e,t,n,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"==typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uc(t,t.return,l)}}else zl(e,t,n,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?zl(e,t,n,r):Hl(e,t):2&o._visibility?zl(e,t,n,r):(o._visibility|=2,ql(e,t,n,r,!!(10256&t.subtreeFlags))),2048&i&&Bl(a,t);break;case 24:zl(e,t,n,r),2048&i&&$l(t.alternate,t)}}function ql(e,t,n,r,i){for(i=i&&!!(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=n,l=r,u=a.flags;switch(a.tag){case 0:case 11:case 15:ql(o,a,s,l,i),ol(8,a);break;case 23:break;case 22:var c=a.stateNode;null!==a.memoizedState?2&c._visibility?ql(o,a,s,l,i):Hl(o,a):(c._visibility|=2,ql(o,a,s,l,i)),i&&2048&u&&Bl(a.alternate,a);break;case 24:ql(o,a,s,l,i),i&&2048&u&&$l(a.alternate,a);break;default:ql(o,a,s,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&Bl(r.alternate,r);break;case 24:Hl(n,r),2048&i&&$l(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Vl=8192;function Wl(e){if(e.subtreeFlags&Vl)for(e=e.child;null!==e;)Gl(e),e=e.sibling}function Gl(e){switch(e.tag){case 26:Wl(e),e.flags&Vl&&null!==e.memoizedState&&function(e,t,n){if(null===zd)throw Error(r(475));var i=zd;if(!("stylesheet"!==t.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&t.state.loading)){if(null===t.instance){var o=Ad(n.href),a=e.querySelector(Id(o));if(a)return null!==(e=a._p)&&"object"==typeof e&&"function"==typeof e.then&&(i.count++,i=qd.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,void He(a);a=e.ownerDocument||e,n=Od(n),(o=_d.get(o))&&Pd(n,o),He(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Jc(a,"link",n),t.instance=a}null===i.stylesheets&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(3&t.state.loading)&&(i.count++,t=qd.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Wl(e);break;case 3:case 4:var t=Dl;Dl=Ed(e.stateNode.containerInfo),Wl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Vl,Vl=16777216,Wl(e),Vl=t):Wl(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Kl(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,Xl(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Kl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Kl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Kl(e)}}function Ql(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,Xl(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Ql(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function Xl(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ri(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,o=r.return;if(Sl(r),r===n){xl=null;break e}if(null!==i){i.return=o,xl=i;break e}xl=o}}}var Jl={getCacheForType:function(e){var t=ki(Ni),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},eu="function"==typeof WeakMap?WeakMap:Map,tu=0,nu=null,ru=null,iu=0,ou=0,au=null,su=!1,lu=!1,uu=!1,cu=0,du=0,fu=0,pu=0,hu=0,mu=0,gu=0,yu=null,vu=null,bu=!1,wu=0,_u=1/0,xu=null,Eu=null,Su=0,ku=null,Tu=null,Cu=0,Au=0,Iu=null,Ou=null,Nu=0,Du=null;function Ru(){if(2&tu&&0!==iu)return iu&-iu;if(null!==D.T){return 0!==Fi?Fi:Ac()}return Ie()}function Mu(){0===mu&&(mu=536870912&iu&&!ii?536870912:_e());var e=rs.current;return null!==e&&(e.flags|=32),mu}function Pu(e,t,n){(e!==nu||2!==ou&&9!==ou)&&null===e.cancelPendingCommit||(Uu(e,0),Bu(e,iu,mu,!1)),Se(e,n),2&tu&&e===nu||(e===nu&&(!(2&tu)&&(pu|=n),4===du&&Bu(e,iu,mu,!1)),_c(e))}function Fu(e,t,n){if(6&tu)throw Error(r(327));for(var i=!n&&!(124&t)&&0===(t&e.expiredLanes)||be(e,t),o=i?function(e,t){var n=tu;tu|=2;var i=Hu(),o=Vu();nu!==e||iu!==t?(xu=null,_u=ee()+500,Uu(e,t)):lu=be(e,t);e:for(;;)try{if(0!==ou&&null!==ru){t=ru;var a=au;t:switch(ou){case 1:ou=0,au=null,Xu(e,t,a,1);break;case 2:case 9:if(Yi(a)){ou=0,au=null,Qu(t);break}t=function(){2!==ou&&9!==ou||nu!==e||(ou=7),_c(e)},a.then(t,t);break e;case 3:ou=7;break e;case 4:ou=5;break e;case 7:Yi(a)?(ou=0,au=null,Qu(t)):(ou=0,au=null,Xu(e,t,a,7));break;case 5:var s=null;switch(ru.tag){case 26:s=ru.memoizedState;case 5:case 27:var l=ru;if(!s||$d(s)){ou=0,au=null;var u=l.sibling;if(null!==u)ru=u;else{var c=l.return;null!==c?(ru=c,Ju(c)):ru=null}break t}}ou=0,au=null,Xu(e,t,a,5);break;case 6:ou=0,au=null,Xu(e,t,a,6);break;case 8:zu(),du=6;break e;default:throw Error(r(462))}}Ku();break}catch(d){qu(e,d)}return yi=gi=null,D.H=i,D.A=o,tu=n,null!==ru?0:(nu=null,iu=0,Cr(),du)}(e,t):Gu(e,t,!0),a=i;;){if(0===o){lu&&!i&&Bu(e,t,0,!1);break}if(n=e.current.alternate,!a||ju(n)){if(2===o){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;o=yu;var u=l.current.memoizedState.isDehydrated;if(u&&(Uu(l,s).flags|=256),2!==(s=Gu(l,s,!1))){if(uu&&!u){l.errorRecoveryDisabledLanes|=a,pu|=a,o=4;break e}a=vu,vu=o,null!==a&&(null===vu?vu=a:vu.push.apply(vu,a))}o=s}if(a=!1,2!==o)continue}}if(1===o){Uu(e,0),Bu(e,t,0,!0);break}e:{switch(i=e,a=o){case 0:case 1:throw Error(r(345));case 4:if((4194048&t)!==t)break;case 6:Bu(i,t,mu,!su);break e;case 2:vu=null;break;case 3:case 5:break;default:throw Error(r(329))}if((62914560&t)===t&&10<(o=wu+300-ee())){if(Bu(i,t,mu,!su),0!==ve(i,0,!0))break e;i.timeoutHandle=sd(Lu.bind(null,i,n,vu,xu,bu,t,mu,pu,gu,su,a,2,-0,0),o)}else Lu(i,n,vu,xu,bu,t,mu,pu,gu,su,a,0,-0,0)}break}o=Gu(e,t,!1),a=!1}_c(e)}function Lu(e,t,n,i,o,a,s,l,u,c,d,f,p,h){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||!(16785408&~f))&&(zd={stylesheets:null,count:0,unsuspend:Ud},Gl(t),null!==(f=function(){if(null===zd)throw Error(r(475));var e=zd;return e.stylesheets&&0===e.count&&Vd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Vd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(tc.bind(null,e,t,a,n,i,o,s,l,u,d,1,p,h)),void Bu(e,a,s,!c);tc(e,t,a,n,i,o,s,l,u)}function ju(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yn(o(),i))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bu(e,t,n,r){t&=~hu,t&=~pu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var o=31-fe(i),a=1<<o;r[o]=-1,i&=~a}0!==n&&ke(e,n,t)}function $u(){return!!(6&tu)||(xc(0),!1)}function zu(){if(null!==ru){if(0===ou)var e=ru.return;else yi=gi=null,Lo(e=ru),Ya=null,Ka=0,e=ru;for(;null!==e;)il(e.alternate,e),e=e.return;ru=null}}function Uu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ld(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zu(),nu=e,ru=n=Lr(e.current,null),iu=t,ou=0,au=null,su=!1,lu=be(e,t),uu=!1,gu=mu=hu=pu=fu=du=0,vu=yu=null,bu=!1,8&t&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),o=1<<i;t|=e[i],r&=~o}return cu=t,Cr(),n}function qu(e,t){bo=null,D.H=Ha,t===Hi||t===Wi?(t=Xi(),ou=3):t===Vi?(t=Xi(),ou=4):ou=t===ks?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,au=t,null===ru&&(du=1,ws(e,Er(t,e.current)))}function Hu(){var e=D.H;return D.H=Ha,null===e?Ha:e}function Vu(){var e=D.A;return D.A=Jl,e}function Wu(){du=4,su||(4194048&iu)!==iu&&null!==rs.current||(lu=!0),!(134217727&fu)&&!(134217727&pu)||null===nu||Bu(nu,iu,mu,!1)}function Gu(e,t,n){var r=tu;tu|=2;var i=Hu(),o=Vu();nu===e&&iu===t||(xu=null,Uu(e,t)),t=!1;var a=du;e:for(;;)try{if(0!==ou&&null!==ru){var s=ru,l=au;switch(ou){case 8:zu(),a=6;break e;case 3:case 2:case 9:case 6:null===rs.current&&(t=!0);var u=ou;if(ou=0,au=null,Xu(e,s,l,u),n&&lu){a=0;break e}break;default:u=ou,ou=0,au=null,Xu(e,s,l,u)}}Yu(),a=du;break}catch(c){qu(e,c)}return t&&e.shellSuspendCounter++,yi=gi=null,tu=r,D.H=i,D.A=o,null===ru&&(nu=null,iu=0,Cr()),a}function Yu(){for(;null!==ru;)Zu(ru)}function Ku(){for(;null!==ru&&!X();)Zu(ru)}function Zu(e){var t=Zs(e.alternate,e,cu);e.memoizedProps=e.pendingProps,null===t?Ju(e):ru=t}function Qu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ps(n,t,t.pendingProps,t.type,void 0,iu);break;case 11:t=Ps(n,t,t.pendingProps,t.type.render,t.ref,iu);break;case 5:Lo(t);default:il(n,t),t=Zs(n,t=ru=jr(t,cu),cu)}e.memoizedProps=e.pendingProps,null===t?Ju(e):ru=t}function Xu(e,t,n,i){yi=gi=null,Lo(t),Ya=null,Ka=0;var o=t.return;try{if(function(e,t,n,i,o){if(n.flags|=32768,null!==i&&"object"==typeof i&&"function"==typeof i.then){if(null!==(t=n.alternate)&&xi(t,n,o,!0),null!==(n=rs.current)){switch(n.tag){case 13:return null===is?Wu():null===n.alternate&&0===du&&(du=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===Gi?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([i]):t.add(i),cc(e,i,o)),!1;case 22:return n.flags|=65536,i===Gi?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([i]):n.add(i),cc(e,i,o)),!1}throw Error(r(435,n.tag))}return cc(e,i,o),Wu(),!1}if(ii)return null!==(t=rs.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==si&&hi(Er(e=Error(r(422),{cause:i}),n))):(i!==si&&hi(Er(t=Error(r(423),{cause:i}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,i=Er(i,n),ao(e,o=xs(e.stateNode,i,o)),4!==du&&(du=2)),!1;var a=Error(r(520),{cause:i});if(a=Er(a,n),null===yu?yu=[a]:yu.push(a),4!==du&&(du=2),null===t)return!0;i=Er(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,ao(n,e=xs(n.stateNode,i,e)),!1;case 1:if(t=n.type,a=n.stateNode,!(128&n.flags||"function"!=typeof t.getDerivedStateFromError&&(null===a||"function"!=typeof a.componentDidCatch||null!==Eu&&Eu.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,Ss(o=Es(o),e,n,i),ao(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,iu))return du=1,ws(e,Er(n,e.current)),void(ru=null)}catch(a){if(null!==o)throw ru=o,a;return du=1,ws(e,Er(n,e.current)),void(ru=null)}32768&t.flags?(ii||1===i?e=!0:lu||536870912&iu?e=!1:(su=e=!0,(2===i||9===i||3===i||6===i)&&(null!==(i=rs.current)&&13===i.tag&&(i.flags|=16384))),ec(t,e)):Ju(t)}function Ju(e){var t=e;do{if(32768&t.flags)return void ec(t,su);e=t.return;var n=nl(t.alternate,t,cu);if(null!==n)return void(ru=n);if(null!==(t=t.sibling))return void(ru=t);ru=t=e}while(null!==t);0===du&&(du=5)}function ec(e,t){do{var n=rl(e.alternate,e);if(null!==n)return n.flags&=32767,void(ru=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ru=e);ru=e=n}while(null!==e);du=6,ru=null}function tc(e,t,n,i,o,a,s,l,u){e.cancelPendingCommit=null;do{ac()}while(0!==Su);if(6&tu)throw Error(r(327));if(null!==t){if(t===e.current)throw Error(r(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,o){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=a&~n;0<n;){var c=31-fe(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var p=f[c];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&ke(e,r,0),0!==o&&0===i&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,n,a|=Tr,s,l,u),e===nu&&(ru=nu=null,iu=0),Tu=t,ku=e,Cu=n,Au=a,Iu=o,Ou=i,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,Z(ie,function(){return sc(),null})):(e.callbackNode=null,e.callbackPriority=0),i=!!(13878&t.flags),13878&t.subtreeFlags||i){i=D.T,D.T=null,o=R.p,R.p=2,s=tu,tu|=4;try{!function(e,t){if(e=e.containerInfo,ed=tf,er(e=Jn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var o=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(g){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==o&&3!==f.nodeType||(l=s+o),f!==a||0!==i&&3!==f.nodeType||(u=s+i),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++c===o&&(l=s),p===a&&++d===i&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(td={focusedElem:e,selectionRange:n},tf=!1,xl=t;null!==xl;)if(e=(t=xl).child,1024&t.subtreeFlags&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(a=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==a){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var m=ms(n.type,o,(n.elementType,n.type));e=i.getSnapshotBeforeUpdate(m,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(y){uc(n,n.return,y)}}break;case 3:if(1024&e)if(9===(n=(e=t.stateNode.containerInfo).nodeType))hd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(r(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{tu=s,R.p=o,D.T=i}}Su=1,nc(),rc(),ic()}}function nc(){if(1===Su){Su=0;var e=ku,t=Tu,n=!!(13878&t.flags);if(13878&t.subtreeFlags||n){n=D.T,D.T=null;var r=R.p;R.p=2;var i=tu;tu|=4;try{Rl(t,e);var o=td,a=Jn(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Xn(s.ownerDocument.documentElement,s)){if(null!==l&&er(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),g=void 0===l.end?m:Math.min(l.end,h);!p.extend&&m>g&&(a=g,g=m,m=a);var y=Qn(s,m),v=Qn(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}tf=!!ed,td=ed=null}finally{tu=i,R.p=r,D.T=n}}e.current=t,Su=2}}function rc(){if(2===Su){Su=0;var e=ku,t=Tu,n=!!(8772&t.flags);if(8772&t.subtreeFlags||n){n=D.T,D.T=null;var r=R.p;R.p=2;var i=tu;tu|=4;try{El(e,t.alternate,t)}finally{tu=i,R.p=r,D.T=n}}Su=3}}function ic(){if(4===Su||3===Su){Su=0,J();var e=ku,t=Tu,n=Cu,r=Ou;10256&t.subtreeFlags||10256&t.flags?Su=5:(Su=0,Tu=ku=null,oc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Eu=null),Ae(n),t=t.stateNode,ce&&"function"==typeof ce.onCommitFiberRoot)try{ce.onCommitFiberRoot(ue,t,void 0,!(128&~t.current.flags))}catch(HOt){}if(null!==r){t=D.T,i=R.p,R.p=2,D.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{D.T=t,R.p=i}}3&Cu&&ac(),_c(e),i=e.pendingLanes,4194090&n&&42&i?e===Du?Nu++:(Nu=0,Du=e):Nu=0,xc(0)}}function oc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ri(t)))}function ac(e){return nc(),rc(),ic(),sc()}function sc(){if(5!==Su)return!1;var e=ku,t=Au;Au=0;var n=Ae(Cu),i=D.T,o=R.p;try{R.p=32>n?32:n,D.T=null,n=Iu,Iu=null;var a=ku,s=Cu;if(Su=0,Tu=ku=null,Cu=0,6&tu)throw Error(r(331));var l=tu;if(tu|=4,Zl(a.current),Ul(a,a.current,s,n),tu=l,xc(0,!1),ce&&"function"==typeof ce.onPostCommitFiberRoot)try{ce.onPostCommitFiberRoot(ue,a)}catch(HOt){}return!0}finally{R.p=o,D.T=i,oc(e,t)}}function lc(e,t,n){t=Er(n,t),null!==(e=io(e,t=xs(e.stateNode,t,2),2))&&(Se(e,2),_c(e))}function uc(e,t,n){if(3===e.tag)lc(e,e,n);else for(;null!==t;){if(3===t.tag){lc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Eu||!Eu.has(r))){e=Er(n,e),null!==(r=io(t,n=Es(2),2))&&(Ss(n,r,t,e),Se(r,2),_c(r));break}}t=t.return}}function cc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new eu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uu=!0,i.add(n),e=dc.bind(null,e,t,n),t.then(e,e))}function dc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,nu===e&&(iu&n)===n&&(4===du||3===du&&(62914560&iu)===iu&&300>ee()-wu?!(2&tu)&&Uu(e,0):hu|=n,gu===iu&&(gu=0)),_c(e)}function fc(e,t){0===t&&(t=xe()),null!==(e=Or(e,t))&&(Se(e,t),_c(e))}function pc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fc(e,n)}function hc(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(r(314))}null!==i&&i.delete(t),fc(e,n)}var mc=null,gc=null,yc=!1,vc=!1,bc=!1,wc=0;function _c(e){e!==gc&&null===e.next&&(null===gc?mc=gc=e:gc=gc.next=e),vc=!0,yc||(yc=!0,cd(function(){6&tu?Z(ne,Ec):Sc()}))}function xc(e,t){if(!bc&&vc){bc=!0;do{for(var n=!1,r=mc;null!==r;){if(0!==e){var i=r.pendingLanes;if(0===i)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-fe(42|e)+1)-1,o=201326741&(o&=i&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(n=!0,Cc(r,o))}else o=iu,!(3&(o=ve(r,r===nu?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,o)||(n=!0,Cc(r,o));r=r.next}}while(n);bc=!1}}function Ec(){Sc()}function Sc(){vc=yc=!1;var e=0;0!==wc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=wc),wc=0);for(var t=ee(),n=null,r=mc;null!==r;){var i=r.next,o=kc(r,t);0===o?(r.next=null,null===n?mc=i:n.next=i,null===i&&(gc=n)):(n=r,(0!==e||3&o)&&(vc=!0)),r=i}xc(e)}function kc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-fe(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=we(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(n=iu,n=ve(e,e===(t=nu)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===ou||9===ou)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(!(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Q(r),Ae(n)){case 2:case 8:n=re;break;case 32:default:n=ie;break;case 268435456:n=ae}return r=Tc.bind(null,e),n=Z(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Tc(e,t){if(0!==Su&&5!==Su)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(ac()&&e.callbackNode!==n)return null;var r=iu;return 0===(r=ve(e,e===nu?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fu(e,r,t),kc(e,ee()),null!=e.callbackNode&&e.callbackNode===n?Tc.bind(null,e):null)}function Cc(e,t){if(ac())return null;Fu(e,t,!0)}function Ac(){return 0===wc&&(wc=_e()),wc}function Ic(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:At(""+e)}function Oc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Nc=0;Nc<wr.length;Nc++){var Dc=wr[Nc];_r(Dc.toLowerCase(),"on"+(Dc[0].toUpperCase()+Dc.slice(1)))}_r(fr,"onAnimationEnd"),_r(pr,"onAnimationIteration"),_r(hr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(mr,"onTransitionRun"),_r(gr,"onTransitionStart"),_r(yr,"onTransitionCancel"),_r(vr,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Ge("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ge("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ge("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ge("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ge("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Rc));function Pc(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){gs(c)}i.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;o=s,i.currentTarget=u;try{o(i)}catch(c){gs(c)}i.currentTarget=null,o=l}}}}function Fc(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var r=e+"__bubble";n.has(r)||($c(t,e,2,!1),n.add(r))}function Lc(e,t,n){var r=0;t&&(r|=4),$c(n,e,r,t)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Bc(e){if(!e[jc]){e[jc]=!0,Ve.forEach(function(t){"selectionchange"!==t&&(Mc.has(t)||Lc(t,!1,e),Lc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jc]||(t[jc]=!0,Lc("selectionchange",!1,t))}}function $c(e,t,n,r){switch(uf(t)){case 2:var i=nf;break;case 8:i=rf;break;default:i=of}n=i.bind(null,t,n,e),i=void 0,!jt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function zc(e,t,n,r,i){var a=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var l=r.stateNode.containerInfo;if(l===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&s.stateNode.containerInfo===i)return;s=s.return}for(;null!==l;){if(null===(s=$e(l)))return;if(5===(u=s.tag)||6===u||26===u||27===u){r=a=s;continue e}l=l.parentNode}}r=r.return}Pt(function(){var r=a,i=Ot(n),s=[];e:{var l=br.get(e);if(void 0!==l){var u=Xt,c=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":u=hn;break;case"focusin":c="focus",u=on;break;case"focusout":c="blur",u=on;break;case"beforeblur":case"afterblur":u=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=gn;break;case fr:case pr:case hr:u=an;break;case vr:u=yn;break;case"scroll":case"scrollend":u=en;break;case"wheel":u=vn;break;case"copy":case"cut":case"paste":u=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=mn;break;case"toggle":case"beforetoggle":u=bn}var d=!!(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var h,m=r;null!==m;){var g=m;if(h=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===h||null===p||null!=(g=Ft(m,p))&&d.push(Uc(m,g,h)),f)break;m=m.return}0<d.length&&(l=new u(l,c,null,n,i),s.push({event:l,listeners:d}))}}if(!(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===It||!(c=n.relatedTarget||n.fromElement)||!$e(c)&&!c[Re])&&(u||l)&&(l=i.window===i?i:(l=i.ownerDocument)?l.defaultView||l.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?$e(c):null)&&(f=o(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=nn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=mn,g="onPointerLeave",p="onPointerEnter",m="pointer"),f=null==u?l:Ue(u),h=null==c?l:Ue(c),(l=new d(g,m+"leave",u,n,i)).target=f,l.relatedTarget=h,g=null,$e(i)===r&&((d=new d(p,m+"enter",c,n,i)).target=h,d.relatedTarget=f,g=d),f=g,u&&c)e:{for(p=c,m=0,h=d=u;h;h=Hc(h))m++;for(h=0,g=p;g;g=Hc(g))h++;for(;0<m-h;)d=Hc(d),m--;for(;0<h-m;)p=Hc(p),h--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Hc(d),p=Hc(p)}d=null}else d=null;null!==u&&Vc(s,l,u,d,!1),null!==c&&null!==f&&Vc(s,f,c,d,!0)}if("select"===(u=(l=r?Ue(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===u&&"file"===l.type)var y=Ln;else if(Nn(l))if(jn)y=Gn;else{y=Vn;var v=Hn}else!(u=l.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?r&&kt(r.elementType)&&(y=Ln):y=Wn;switch(y&&(y=y(e,r))?Dn(s,y,n,i):(v&&v(e,l,r),"focusout"===e&&r&&"number"===l.type&&null!=r.memoizedProps.value&&yt(l,"number",l.value)),v=r?Ue(r):window,e){case"focusin":(Nn(v)||"true"===v.contentEditable)&&(nr=v,rr=r,ir=null);break;case"focusout":ir=rr=nr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(s,n,i);break;case"selectionchange":if(tr)break;case"keydown":case"keyup":ar(s,n,i)}var b;if(_n)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else In?Cn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Sn&&"ko"!==n.locale&&(In||"onCompositionStart"!==w?"onCompositionEnd"===w&&In&&(b=qt()):(zt="value"in($t=i)?$t.value:$t.textContent,In=!0)),0<(v=qc(r,w)).length&&(w=new ln(w,e,null,n,i),s.push({event:w,listeners:v}),b?w.data=b:null!==(b=An(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return An(t);case"keypress":return 32!==t.which?null:(Tn=!0,kn);case"textInput":return(e=t.data)===kn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(In)return"compositionend"===e||!_n&&Cn(e,t)?(e=qt(),Ut=zt=$t=null,In=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=qc(r,"onBeforeInput")).length&&(v=new ln("onBeforeInput","beforeinput",null,n,i),s.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var o=Ic((i[De]||null).action),a=r.submitter;a&&null!==(t=(t=a[De]||null)?Ic(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new Xt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wc){var e=a?Oc(i,a):new FormData(i);Oa(n,{pending:!0,data:e,method:i.method,action:o},null,e)}}else"function"==typeof o&&(s.preventDefault(),e=a?Oc(i,a):new FormData(i),Oa(n,{pending:!0,data:e,method:i.method,action:o},o,e))},currentTarget:i}]})}}(s,e,r,n,i)}Pc(s,t)})}function Uc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===o||(null!=(i=Ft(e,n))&&r.unshift(Uc(e,i,o)),null!=(i=Ft(e,t))&&r.push(Uc(e,i,o))),3===e.tag)return r;e=e.return}return[]}function Hc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Vc(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Ft(n,o))&&a.unshift(Uc(n,u,l)):i||null!=(u=Ft(n,o))&&a.push(Uc(n,u,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Wc=/\r\n?/g,Gc=/\u0000|\uFFFD/g;function Yc(e){return("string"==typeof e?e:""+e).replace(Wc,"\n").replace(Gc,"")}function Kc(e,t){return t=Yc(t),Yc(e)===t}function Zc(){}function Qc(e,t,n,i,o,a){switch(n){case"children":"string"==typeof i?"body"===t||"textarea"===t&&""===i||_t(e,i):("number"==typeof i||"bigint"==typeof i)&&"body"!==t&&_t(e,""+i);break;case"className":tt(e,"class",i);break;case"tabIndex":tt(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":tt(e,n,i);break;case"style":St(e,i,a);break;case"data":if("object"!==t){tt(e,"data",i);break}case"src":case"href":if(""===i&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==i||"function"==typeof i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if("function"==typeof i){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof a&&("formAction"===n?("input"!==t&&Qc(e,t,"name",o.name,o,null),Qc(e,t,"formEncType",o.formEncType,o,null),Qc(e,t,"formMethod",o.formMethod,o,null),Qc(e,t,"formTarget",o.formTarget,o,null)):(Qc(e,t,"encType",o.encType,o,null),Qc(e,t,"method",o.method,o,null),Qc(e,t,"target",o.target,o,null))),null==i||"symbol"==typeof i||"boolean"==typeof i){e.removeAttribute(n);break}i=At(""+i),e.setAttribute(n,i);break;case"onClick":null!=i&&(e.onclick=Zc);break;case"onScroll":null!=i&&Fc("scroll",e);break;case"onScrollEnd":null!=i&&Fc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"muted":e.muted=i&&"function"!=typeof i&&"symbol"!=typeof i;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==i||"function"==typeof i||"boolean"==typeof i||"symbol"==typeof i){e.removeAttribute("xlink:href");break}n=At(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===i?e.setAttribute(n,""):!1!==i&&null!=i&&"function"!=typeof i&&"symbol"!=typeof i?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":null==i||"function"==typeof i||"symbol"==typeof i||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":Fc("beforetoggle",e),Fc("toggle",e),et(e,"popover",i);break;case"xlinkActuate":nt(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":nt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":nt(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":nt(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":nt(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":nt(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":nt(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":nt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":nt(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":et(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&et(e,n=Tt.get(n)||n,i)}}function Xc(e,t,n,i,o,a){switch(n){case"style":St(e,i,a);break;case"dangerouslySetInnerHTML":if(null!=i){if("object"!=typeof i||!("__html"in i))throw Error(r(61));if(null!=(n=i.__html)){if(null!=o.children)throw Error(r(60));e.innerHTML=n}}break;case"children":"string"==typeof i?_t(e,i):("number"==typeof i||"bigint"==typeof i)&&_t(e,""+i);break;case"onScroll":null!=i&&Fc("scroll",e);break;case"onScrollEnd":null!=i&&Fc("scrollend",e);break;case"onClick":null!=i&&(e.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:We.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"==typeof(a=null!=(a=e[De]||null)?a[n]:null)&&e.removeEventListener(t,a,o),"function"!=typeof i)?n in e?e[n]=i:!0===i?e.setAttribute(n,""):et(e,n,i):("function"!=typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o)))}}function Jc(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fc("error",e),Fc("load",e);var i,o=!1,a=!1;for(i in n)if(n.hasOwnProperty(i)){var s=n[i];if(null!=s)switch(i){case"src":o=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Qc(e,t,i,s,n,null)}}return a&&Qc(e,t,"srcSet",n.srcSet,n,null),void(o&&Qc(e,t,"src",n.src,n,null));case"input":Fc("invalid",e);var l=i=s=a=null,u=null,c=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":a=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":i=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(r(137,t));break;default:Qc(e,t,o,d,n,null)}}return gt(e,i,l,u,c,s,a,!1),void ct(e);case"select":for(a in Fc("invalid",e),o=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"multiple":o=l;default:Qc(e,t,a,l,n,null)}return t=i,n=s,e.multiple=!!o,void(null!=t?vt(e,!!o,t,!1):null!=n&&vt(e,!!o,n,!0));case"textarea":for(s in Fc("invalid",e),i=a=o=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":o=l;break;case"defaultValue":a=l;break;case"children":i=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(r(91));break;default:Qc(e,t,s,l,n,null)}return wt(e,o,a,i),void ct(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))if("selected"===u)e.selected=o&&"function"!=typeof o&&"symbol"!=typeof o;else Qc(e,t,u,o,n,null);return;case"dialog":Fc("beforetoggle",e),Fc("toggle",e),Fc("cancel",e),Fc("close",e);break;case"iframe":case"object":Fc("load",e);break;case"video":case"audio":for(o=0;o<Rc.length;o++)Fc(Rc[o],e);break;case"image":Fc("error",e),Fc("load",e);break;case"details":Fc("toggle",e);break;case"embed":case"source":case"link":Fc("error",e),Fc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(o=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,t));default:Qc(e,t,c,o,n,null)}return;default:if(kt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&Xc(e,t,d,o,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(o=n[l])&&Qc(e,t,l,o,n,null))}var ed=null,td=null;function nd(e){return 9===e.nodeType?e:e.ownerDocument}function rd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var sd="function"==typeof setTimeout?setTimeout:void 0,ld="function"==typeof clearTimeout?clearTimeout:void 0,ud="function"==typeof Promise?Promise:void 0,cd="function"==typeof queueMicrotask?queueMicrotask:void 0!==ud?function(e){return ud.resolve(null).then(e).catch(dd)}:sd;function dd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&wd(a.documentElement),2&n&&wd(a.body),4&n)for(wd(n=a.head),a=n.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[je]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=s}}if(0===i)return e.removeChild(o),void Cf(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=o}while(n);Cf(t)}function hd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":hd(n),Be(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function md(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function gd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yd=null;function vd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bd(e,t,n){switch(t=nd(n),e){case"html":if(!(e=t.documentElement))throw Error(r(452));return e;case"head":if(!(e=t.head))throw Error(r(453));return e;case"body":if(!(e=t.body))throw Error(r(454));return e;default:throw Error(r(451))}}function wd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Be(e)}var _d=new Map,xd=new Set;function Ed(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Sd=R.d;R.d={f:function(){var e=Sd.f(),t=$u();return e||t},r:function(e){var t=ze(e);null!==t&&5===t.tag&&"form"===t.type?Da(t):Sd.r(e)},D:function(e){Sd.D(e),Td("dns-prefetch",e,null)},C:function(e,t){Sd.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){Sd.L(e,t,n);var r=kd;if(r&&e&&t){var i='link[rel="preload"][as="'+ht(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+ht(n.imageSrcSet)+'"]',"string"==typeof n.imageSizes&&(i+='[imagesizes="'+ht(n.imageSizes)+'"]')):i+='[href="'+ht(e)+'"]';var o=i;switch(t){case"style":o=Ad(e);break;case"script":o=Nd(e)}_d.has(o)||(e=u({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),_d.set(o,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Id(o))||"script"===t&&r.querySelector(Dd(o))||(Jc(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Sd.m(e,t);var n=kd;if(n&&e){var r=t&&"string"==typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+ht(r)+'"][href="'+ht(e)+'"]',o=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Nd(e)}if(!_d.has(o)&&(e=u({rel:"modulepreload",href:e},t),_d.set(o,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(o)))return}Jc(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Sd.X(e,t);var n=kd;if(n&&e){var r=qe(n).hoistableScripts,i=Nd(e),o=r.get(i);o||((o=n.querySelector(Dd(i)))||(e=u({src:e,async:!0},t),(t=_d.get(i))&&Fd(e,t),He(o=n.createElement("script")),Jc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}},S:function(e,t,n){Sd.S(e,t,n);var r=kd;if(r&&e){var i=qe(r).hoistableStyles,o=Ad(e);t=t||"default";var a=i.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Id(o)))s.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},n),(n=_d.get(o))&&Pd(e,n);var l=a=r.createElement("link");He(l),Jc(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Md(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},i.set(o,a)}}},M:function(e,t){Sd.M(e,t);var n=kd;if(n&&e){var r=qe(n).hoistableScripts,i=Nd(e),o=r.get(i);o||((o=n.querySelector(Dd(i)))||(e=u({src:e,async:!0,type:"module"},t),(t=_d.get(i))&&Fd(e,t),He(o=n.createElement("script")),Jc(o,"link",e),n.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(i,o))}}};var kd="undefined"==typeof document?null:document;function Td(e,t,n){var r=kd;if(r&&"string"==typeof t&&t){var i=ht(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"==typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(Jc(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function Cd(e,t,n,i){var o,a,s,l,u=(u=U.current)?Ed(u):null;if(!u)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof n.precedence&&"string"==typeof n.href?(t=Ad(n.href),(i=(n=qe(u).hoistableStyles).get(t))||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"==typeof n.href&&"string"==typeof n.precedence){e=Ad(n.href);var c=qe(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Id(e)))&&!c._p&&(d.instance=c,d.state.loading=5),_d.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},_d.set(e,n),c||(o=u,a=e,s=n,l=d.state,o.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=o.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),Jc(a,"link",s),He(a),o.head.appendChild(a))))),t&&null===i)throw Error(r(528,""));return d}if(t&&null!==i)throw Error(r(529,""));return null;case"script":return t=n.async,"string"==typeof(n=n.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Nd(n),(i=(n=qe(u).hoistableScripts).get(t))||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function Ad(e){return'href="'+ht(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function Od(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Nd(e){return'[src="'+ht(e)+'"]'}function Dd(e){return"script[async]"+e}function Rd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ht(n.href)+'"]');if(i)return t.instance=i,He(i),i;var o=u({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(i=(e.ownerDocument||e).createElement("style")),Jc(i,"style",o),Md(i,n.precedence,e),t.instance=i;case"stylesheet":o=Ad(n.href);var a=e.querySelector(Id(o));if(a)return t.state.loading|=4,t.instance=a,He(a),a;i=Od(n),(o=_d.get(o))&&Pd(i,o),He(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),Jc(a,"link",i),t.state.loading|=4,Md(a,n.precedence,e),t.instance=a;case"script":return a=Nd(n.src),(o=e.querySelector(Dd(a)))?(t.instance=o,He(o),o):(i=n,(o=_d.get(a))&&Fd(i=u({},n),o),He(o=(e=e.ownerDocument||e).createElement("script")),Jc(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(r(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(i=t.instance,t.state.loading|=4,Md(i,n.precedence,e));return t.instance}function Md(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,o=i,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==i)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Pd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ld=null;function jd(e,t,n){if(null===Ld){var r=new Map,i=Ld=new Map;i.set(n,r)}else(r=(i=Ld).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var o=n[i];if(!(o[je]||o[Ne]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Bd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function $d(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var zd=null;function Ud(){}function qd(){if(this.count--,0===this.count)if(this.stylesheets)Vd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function Vd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Wd,e),Hd=null,qd.call(e))}function Wd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<i.length;o++){var a=i[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(i=t.instance).getAttribute("data-precedence"),(o=n.get(a)||r)===r&&n.set(null,i),n.set(a,i),this.count++,r=qd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),o?o.parentNode.insertBefore(i,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Gd={$$typeof:v,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Yd(e,t,n,r,i,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Kd(e,t,n,r,i,o,a,s,l,u,c,d){return e=new Yd(e,t,n,a,s,l,u,d),t=1,!0===o&&(t|=24),o=Pr(3,null,null,t),e.current=o,o.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:n,cache:t},to(o),e}function Zd(e){return e?e=Rr:Rr}function Qd(e,t,n,r,i,o){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=ro(t)).payload={element:n},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(n=io(e,r,t))&&(Pu(n,0,t),oo(n,e,t))}function Xd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jd(e,t){Xd(e,t),(e=e.alternate)&&Xd(e,t)}function ef(e){if(13===e.tag){var t=Or(e,67108864);null!==t&&Pu(t,0,67108864),Jd(e,67108864)}}var tf=!0;function nf(e,t,n,r){var i=D.T;D.T=null;var o=R.p;try{R.p=2,of(e,t,n,r)}finally{R.p=o,D.T=i}}function rf(e,t,n,r){var i=D.T;D.T=null;var o=R.p;try{R.p=8,of(e,t,n,r)}finally{R.p=o,D.T=i}}function of(e,t,n,r){if(tf){var i=af(r);if(null===i)zc(e,t,r,sf,n),vf(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return df=bf(df,e,t,n,r,i),!0;case"dragenter":return ff=bf(ff,e,t,n,r,i),!0;case"mouseover":return pf=bf(pf,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return hf.set(o,bf(hf.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,mf.set(o,bf(mf.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(vf(e,r),4&t&&-1<yf.indexOf(e)){for(;null!==i;){var o=ze(i);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=ye(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-fe(a);s.entanglements[1]|=l,a&=~l}_c(o),!(6&tu)&&(_u=ee()+500,xc(0))}}break;case 13:null!==(s=Or(o,2))&&Pu(s,0,2),$u(),Jd(o,2)}if(null===(o=af(r))&&zc(e,t,r,sf,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else zc(e,t,r,null,n)}}function af(e){return lf(e=Ot(e))}var sf=null;function lf(e){if(sf=null,null!==(e=$e(e))){var t=o(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=a(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sf=e,null}function uf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case ne:return 2;case re:return 8;case ie:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var cf=!1,df=null,ff=null,pf=null,hf=new Map,mf=new Map,gf=[],yf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vf(e,t){switch(e){case"focusin":case"focusout":df=null;break;case"dragenter":case"dragleave":ff=null;break;case"mouseover":case"mouseout":pf=null;break;case"pointerover":case"pointerout":hf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mf.delete(t.pointerId)}}function bf(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=ze(t))&&ef(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wf(e){var t=$e(e.target);if(null!==t){var n=o(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=a(n)))return e.blockedOn=t,void function(e,t){var n=R.p;try{return R.p=e,t()}finally{R.p=n}}(e.priority,function(){if(13===n.tag){var e=Ru();e=Ce(e);var t=Or(n,e);null!==t&&Pu(t,0,e),Jd(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function _f(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=af(e.nativeEvent);if(null!==n)return null!==(t=ze(n))&&ef(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);It=r,n.target.dispatchEvent(r),It=null,t.shift()}return!0}function xf(e,t,n){_f(e)&&n.delete(t)}function Ef(){cf=!1,null!==df&&_f(df)&&(df=null),null!==ff&&_f(ff)&&(ff=null),null!==pf&&_f(pf)&&(pf=null),hf.forEach(xf),mf.forEach(xf)}function Sf(t,n){t.blockedOn===n&&(t.blockedOn=null,cf||(cf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ef)))}var kf=null;function Tf(t){kf!==t&&(kf=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){kf===t&&(kf=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],i=t[e+2];if("function"!=typeof r){if(null===lf(r||n))continue;break}var o=ze(n);null!==o&&(t.splice(e,3),e-=3,Oa(o,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Cf(e){function t(t){return Sf(t,e)}null!==df&&Sf(df,e),null!==ff&&Sf(ff,e),null!==pf&&Sf(pf,e),hf.forEach(t),mf.forEach(t);for(var n=0;n<gf.length;n++){var r=gf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gf.length&&null===(n=gf[0]).blockedOn;)wf(n),null===n.blockedOn&&gf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],o=n[r+1],a=i[De]||null;if("function"==typeof o)a||Tf(n);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(i=o,a=o[De]||null)s=a.formAction;else if(null!==lf(i))continue}else s=a.action;"function"==typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Tf(n)}}}function Af(e){this._internalRoot=e}function If(e){this._internalRoot=e}If.prototype.render=Af.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Qd(t.current,Ru(),e,t,null,null)},If.prototype.unmount=Af.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qd(e.current,2,null,e,null,null),$u(),t[Re]=null}},If.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ie();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gf.length&&0!==t&&t<gf[n].priority;n++);gf.splice(n,0,e),0===n&&wf(e)}};var Of=t.version;if("19.1.1"!==Of)throw Error(r(527,Of,"19.1.1"));R.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=o(e)))throw Error(r(188));return t!==e?null:e}for(var n=e,i=t;;){var a=n.return;if(null===a)break;var l=a.alternate;if(null===l){if(null!==(i=a.return)){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return s(a),e;if(l===i)return s(a),t;l=l.sibling}throw Error(r(188))}if(n.return!==i.return)n=a,i=l;else{for(var u=!1,c=a.child;c;){if(c===n){u=!0,n=a,i=l;break}if(c===i){u=!0,i=a,n=l;break}c=c.sibling}if(!u){for(c=l.child;c;){if(c===n){u=!0,n=l,i=a;break}if(c===i){u=!0,i=l,n=a;break}c=c.sibling}if(!u)throw Error(r(189))}}if(n.alternate!==i)throw Error(r(190))}if(3!==n.tag)throw Error(r(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?l(e):null)?null:e.stateNode};var Nf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Df=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Df.isDisabled&&Df.supportsFiber)try{ue=Df.inject(Nf),ce=Df}catch(HOt){}}return dk.createRoot=function(e,t){if(!i(e))throw Error(r(299));var n=!1,o="",a=ys,s=vs,l=bs;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onUncaughtError&&(a=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Kd(e,1,!1,null,0,n,o,a,s,l,0,null),e[Re]=t.current,Bc(e),new Af(t)},dk.hydrateRoot=function(e,t,n){if(!i(e))throw Error(r(299));var o=!1,a="",s=ys,l=vs,u=bs,c=null;return null!=n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Kd(e,1,!0,t,0,o,a,s,l,u,0,c)).context=Zd(null),n=t.current,(a=ro(o=Ce(o=Ru()))).callback=null,io(n,a,o),n=o,t.current.lanes=n,Se(t,n),_c(t),e[Re]=t.current,Bc(e),new If(t)},dk.version="19.1.1",dk}var gk=(uk||(uk=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(HOt){}}(),ck.exports=mk()),ck.exports);const yk=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"==typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},t,i),n.forEach(n=>n(t,e))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e))},a=t=e(r,i,o);return o},vk=e=>e;function bk(e,t=vk){const n=T.useSyncExternalStore(e.subscribe,T.useCallback(()=>t(e.getState()),[e,t]),T.useCallback(()=>t(e.getInitialState()),[e,t]));return T.useDebugValue(n),n}const wk=k.createContext(null);function _k({children:e,roomStore:t}){return w.jsx(wk.Provider,{value:t,children:e})}function xk(e){const t=k.useContext(wk);if(!t)throw new Error("Missing RoomStateProvider in the tree");return bk(t,e)}var Ek=Symbol.for("immer-nothing"),Sk=Symbol.for("immer-draftable"),kk=Symbol.for("immer-state");function Tk(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Ck=Object.getPrototypeOf;function Ak(e){return!!e&&!!e[kk]}function Ik(e){var t;return!!e&&(Nk(e)||Array.isArray(e)||!!e[Sk]||!!(null==(t=e.constructor)?void 0:t[Sk])||Fk(e)||Lk(e))}var Ok=Object.prototype.constructor.toString();function Nk(e){if(!e||"object"!=typeof e)return!1;const t=Ck(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ok}function Dk(e,t){0===Rk(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Rk(e){const t=e[kk];return t?t.type_:Array.isArray(e)?1:Fk(e)?2:Lk(e)?3:0}function Mk(e,t){return 2===Rk(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Pk(e,t,n){const r=Rk(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Fk(e){return e instanceof Map}function Lk(e){return e instanceof Set}function jk(e){return e.copy_||e.base_}function Bk(e,t){if(Fk(e))return new Map(e);if(Lk(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Nk(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[kk];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Ck(e),t)}{const t=Ck(e);if(null!==t&&n)return{...e};const r=Object.create(t);return Object.assign(r,e)}}function $k(e,t=!1){return Uk(e)||Ak(e)||!Ik(e)||(Rk(e)>1&&Object.defineProperties(e,{set:{value:zk},add:{value:zk},clear:{value:zk},delete:{value:zk}}),Object.freeze(e),t&&Object.values(e).forEach(e=>$k(e,!0))),e}function zk(){Tk(2)}function Uk(e){return Object.isFrozen(e)}var qk,Hk={};function Vk(e){const t=Hk[e];return t||Tk(0),t}function Wk(){return qk}function Gk(e,t){t&&(Vk("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Yk(e){Kk(e),e.drafts_.forEach(Qk),e.drafts_=null}function Kk(e){e===qk&&(qk=e.parent_)}function Zk(e){return qk={drafts_:[],parent_:qk,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Qk(e){const t=e[kk];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Xk(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[kk].modified_&&(Yk(t),Tk(4)),Ik(e)&&(e=Jk(t,e),t.parent_||tT(t,e)),t.patches_&&Vk("Patches").generateReplacementPatches_(n[kk].base_,e,t.patches_,t.inversePatches_)):e=Jk(t,n,[]),Yk(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ek?e:void 0}function Jk(e,t,n){if(Uk(t))return t;const r=t[kk];if(!r)return Dk(t,(i,o)=>eT(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return tT(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,o=!1;3===r.type_&&(i=new Set(t),t.clear(),o=!0),Dk(i,(i,a)=>eT(e,r,t,i,a,n,o)),tT(e,t,!1),n&&e.patches_&&Vk("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function eT(e,t,n,r,i,o,a){if(Ak(i)){const a=Jk(e,i,o&&t&&3!==t.type_&&!Mk(t.assigned_,r)?o.concat(r):void 0);if(Pk(n,r,a),!Ak(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(Ik(i)&&!Uk(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jk(e,i),t&&t.scope_.parent_||"symbol"==typeof r||!(Fk(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||tT(e,i)}}function tT(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&$k(t,n)}var nT={get(e,t){if(t===kk)return e;const n=jk(e);if(!Mk(n,t))return function(e,t,n){var r;const i=oT(t,n);return i?"value"in i?i.value:null==(r=i.get)?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Ik(r)?r:r===iT(e.base_,t)?(sT(e),e.copy_[t]=lT(r,e)):r},has:(e,t)=>t in jk(e),ownKeys:e=>Reflect.ownKeys(jk(e)),set(e,t,n){const r=oT(jk(e),t);if(null==r?void 0:r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=iT(jk(e),t),a=null==r?void 0:r[kk];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((i=n)===(o=r)?0!==i||1/i==1/o:i!=i&&o!=o)&&(void 0!==n||Mk(e.base_,t)))return!0;sT(e),aT(e)}var i,o;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==iT(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,sT(e),aT(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=jk(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Tk(11)},getPrototypeOf:e=>Ck(e.base_),setPrototypeOf(){Tk(12)}},rT={};function iT(e,t){const n=e[kk];return(n?jk(n):e)[t]}function oT(e,t){if(!(t in e))return;let n=Ck(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Ck(n)}}function aT(e){e.modified_||(e.modified_=!0,e.parent_&&aT(e.parent_))}function sT(e){e.copy_||(e.copy_=Bk(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Dk(nT,(e,t)=>{rT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),rT.deleteProperty=function(e,t){return rT.set.call(this,e,t,void 0)},rT.set=function(e,t,n){return nT.set.call(this,e[0],t,n,e[0])};function lT(e,t){const n=Fk(e)?Vk("MapSet").proxyMap_(e,t):Lk(e)?Vk("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Wk(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=nT;n&&(i=[r],o=rT);const{revoke:a,proxy:s}=Proxy.revocable(i,o);return r.draft_=s,r.revoke_=a,s}(e,t);return(t?t.scope_:Wk()).drafts_.push(n),n}function uT(e){if(!Ik(e)||Uk(e))return e;const t=e[kk];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Bk(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Bk(e,!0);return Dk(n,(e,t)=>{Pk(n,e,uT(t))}),t&&(t.finalized_=!1),n}var cT,dT,fT,pT=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const r=this;return function(e=n,...i){return r.produce(e,e=>t.call(this,e,...i))}}let r;if("function"!=typeof t&&Tk(6),void 0!==n&&"function"!=typeof n&&Tk(7),Ik(e)){const i=Zk(this),o=lT(e,void 0);let a=!0;try{r=t(o),a=!1}finally{a?Yk(i):Kk(i)}return Gk(i,n),Xk(r,i)}if(!e||"object"!=typeof e){if(r=t(e),void 0===r&&(r=e),r===Ek&&(r=void 0),this.autoFreeze_&&$k(r,!0),n){const t=[],i=[];Vk("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Tk(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,r;return[this.produce(e,t,(e,t)=>{n=e,r=t}),n,r]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ik(e)||Tk(8),Ak(e)&&(e=function(e){Ak(e)||Tk(10);return uT(e)}(e));const t=Zk(this),n=lT(e,void 0);return n[kk].isManual_=!0,Kk(t),n}finishDraft(e,t){const n=e&&e[kk];n&&n.isManual_||Tk(9);const{scope_:r}=n;return Gk(r,t),Xk(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Vk("Patches").applyPatches_;return Ak(e)?r(e,t):this.produce(e,e=>r(e,t))}},hT=pT.produce;function mT(e){return(t,n,r)=>e(t,n,r)}function gT(e){return"object"==typeof e&&null!==e&&"initialize"in e&&"function"==typeof e.initialize}(dT=cT||(cT={})).assertEqual=e=>{},dT.assertIs=function(e){},dT.assertNever=function(e){throw new Error},dT.arrayToEnum=e=>{const t={};for(const n of e)t[n]=n;return t},dT.getValidEnumValues=e=>{const t=dT.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),n={};for(const r of t)n[r]=e[r];return dT.objectValues(n)},dT.objectValues=e=>dT.objectKeys(e).map(function(t){return e[t]}),dT.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},dT.find=(e,t)=>{for(const n of e)if(t(n))return n},dT.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,dT.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},dT.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(fT||(fT={})).mergeShapes=(e,t)=>({...e,...t});const yT=cT.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),vT=e=>{switch(typeof e){case"undefined":return yT.undefined;case"string":return yT.string;case"number":return Number.isNaN(e)?yT.nan:yT.number;case"boolean":return yT.boolean;case"function":return yT.function;case"bigint":return yT.bigint;case"symbol":return yT.symbol;case"object":return Array.isArray(e)?yT.array:null===e?yT.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?yT.promise:"undefined"!=typeof Map&&e instanceof Map?yT.map:"undefined"!=typeof Set&&e instanceof Set?yT.set:"undefined"!=typeof Date&&e instanceof Date?yT.date:yT.object;default:return yT.unknown}},bT=cT.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wT extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){const n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(e){if(!(e instanceof wT))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,cT.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},n=[];for(const r of this.issues)if(r.path.length>0){const n=r.path[0];t[n]=t[n]||[],t[n].push(e(r))}else n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}wT.create=e=>new wT(e);const _T=(e,t)=>{let n;switch(e.code){case bT.invalid_type:n=e.received===yT.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case bT.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,cT.jsonStringifyReplacer)}`;break;case bT.unrecognized_keys:n=`Unrecognized key(s) in object: ${cT.joinValues(e.keys,", ")}`;break;case bT.invalid_union:n="Invalid input";break;case bT.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${cT.joinValues(e.options)}`;break;case bT.invalid_enum_value:n=`Invalid enum value. Expected ${cT.joinValues(e.options)}, received '${e.received}'`;break;case bT.invalid_arguments:n="Invalid function arguments";break;case bT.invalid_return_type:n="Invalid function return type";break;case bT.invalid_date:n="Invalid date";break;case bT.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:cT.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case bT.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case bT.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case bT.custom:n="Invalid input";break;case bT.invalid_intersection_types:n="Intersection results could not be merged";break;case bT.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case bT.not_finite:n="Number must be finite";break;default:n=t.defaultError,cT.assertNever(e)}return{message:n}};let xT=_T;function ET(e,t){const n=xT,r=(e=>{const{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],a={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let s="";const l=r.filter(e=>!!e).slice().reverse();for(const u of l)s=u(a,{data:t,defaultError:s}).message;return{...i,path:o,message:s}})({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===_T?void 0:_T].filter(e=>!!e)});e.common.issues.push(r)}class ST{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const r of t){if("aborted"===r.status)return kT;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const r of t){const e=await r.key,t=await r.value;n.push({key:e,value:t})}return ST.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const r of t){const{key:t,value:i}=r;if("aborted"===t.status)return kT;if("aborted"===i.status)return kT;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!r.alwaysSet||(n[t.value]=i.value)}return{status:e.value,value:n}}}const kT=Object.freeze({status:"aborted"}),TT=e=>({status:"dirty",value:e}),CT=e=>({status:"valid",value:e}),AT=e=>"aborted"===e.status,IT=e=>"dirty"===e.status,OT=e=>"valid"===e.status,NT=e=>"undefined"!=typeof Promise&&e instanceof Promise;var DT,RT;(RT=DT||(DT={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},RT.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class MT{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const PT=(e,t)=>{if(OT(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new wT(e.common.issues);return this._error=t,this._error}}};function FT(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:i};return{errorMap:(t,i)=>{const{message:o}=e;return"invalid_enum_value"===t.code?{message:o??i.defaultError}:void 0===i.data?{message:o??r??i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:o??n??i.defaultError}},description:i}}class LT{get description(){return this._def.description}_getType(e){return vT(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:vT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ST,ctx:{common:e.parent.common,data:e.data,parsedType:vT(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(NT(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:(null==t?void 0:t.async)??!1,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vT(e)},r=this._parseSync({data:e,path:n.path,parent:n});return PT(n,r)}"~validate"(e){var t,n;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vT(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:r});return OT(t)?{value:t.value}:{issues:r.common.issues}}catch(HOt){(null==(n=null==(t=null==HOt?void 0:HOt.message)?void 0:t.toLowerCase())?void 0:n.includes("encountered"))&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>OT(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:vT(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(NT(r)?r:Promise.resolve(r));return PT(n,i)}refine(e,t){const n=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{const i=e(t),o=()=>r.addIssue({code:bT.custom,...n(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then(e=>!!e||(o(),!1)):!!i||(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new jC({schema:this,typeName:KC.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return BC.create(this,this._def)}nullable(){return $C.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wC.create(this)}promise(){return LC.create(this,this._def)}or(e){return EC.create([this,e],this._def)}and(e){return CC.create(this,e,this._def)}transform(e){return new jC({...FT(this._def),schema:this,typeName:KC.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new zC({...FT(this._def),innerType:this,defaultValue:t,typeName:KC.ZodDefault})}brand(){return new HC({typeName:KC.ZodBranded,type:this,...FT(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new UC({...FT(this._def),innerType:this,catchValue:t,typeName:KC.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return VC.create(this,e)}readonly(){return WC.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const jT=/^c[^\s-]{8,}$/i,BT=/^[0-9a-z]+$/,$T=/^[0-9A-HJKMNP-TV-Z]{26}$/i,zT=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,UT=/^[a-z0-9_-]{21}$/i,qT=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,HT=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,VT=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let WT;const GT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,YT=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,KT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ZT=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,QT=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,XT=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JT="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",eC=new RegExp(`^${JT}$`);function tC(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function nC(e){return new RegExp(`^${tC(e)}$`)}function rC(e){let t=`${JT}T${tC(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function iC(e,t){return!("v4"!==t&&t||!GT.test(e))||!("v6"!==t&&t||!KT.test(e))}function oC(e,t){if(!qT.test(e))return!1;try{const[n]=e.split(".");if(!n)return!1;const r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return"object"==typeof i&&null!==i&&((!("typ"in i)||"JWT"===(null==i?void 0:i.typ))&&(!!i.alg&&(!t||i.alg===t)))}catch{return!1}}function aC(e,t){return!("v4"!==t&&t||!YT.test(e))||!("v6"!==t&&t||!ZT.test(e))}class sC extends LT{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==yT.string){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.string,received:t.parsedType}),kT}const t=new ST;let n;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const i=e.data.length>r.value,o=e.data.length<r.value;(i||o)&&(n=this._getOrReturnCtx(e,n),i?ET(n,{code:bT.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&ET(n,{code:bT.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)VT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"email",code:bT.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)WT||(WT=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),WT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"emoji",code:bT.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)zT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"uuid",code:bT.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)UT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"nanoid",code:bT.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)jT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"cuid",code:bT.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)BT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"cuid2",code:bT.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)$T.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"ulid",code:bT.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),ET(n,{validation:"url",code:bT.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"regex",code:bT.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){rC(r).test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){eC.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){nC(r).test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?HT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"duration",code:bT.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?iC(e.data,r.version)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"ip",code:bT.invalid_string,message:r.message}),t.dirty()):"jwt"===r.kind?oC(e.data,r.alg)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"jwt",code:bT.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?aC(e.data,r.version)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"cidr",code:bT.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?QT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"base64",code:bT.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?XT.test(e.data)||(n=this._getOrReturnCtx(e,n),ET(n,{validation:"base64url",code:bT.invalid_string,message:r.message}),t.dirty()):cT.assertNever(r);return{status:t.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:bT.invalid_string,...DT.errToObj(n)})}_addCheck(e){return new sC({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...DT.errToObj(e)})}url(e){return this._addCheck({kind:"url",...DT.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...DT.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...DT.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...DT.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...DT.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...DT.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...DT.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...DT.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...DT.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...DT.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...DT.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...DT.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:(null==e?void 0:e.offset)??!1,local:(null==e?void 0:e.local)??!1,...DT.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...DT.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...DT.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...DT.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...DT.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...DT.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...DT.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...DT.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...DT.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...DT.errToObj(t)})}nonempty(e){return this.min(1,DT.errToObj(e))}trim(){return new sC({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new sC({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new sC({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function lC(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return Number.parseInt(e.toFixed(i).replace(".",""))%Number.parseInt(t.toFixed(i).replace(".",""))/10**i}sC.create=e=>new sC({checks:[],typeName:KC.ZodString,coerce:(null==e?void 0:e.coerce)??!1,...FT(e)});class uC extends LT{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==yT.number){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.number,received:t.parsedType}),kT}let t;const n=new ST;for(const r of this._def.checks)if("int"===r.kind)cT.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty());else if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty())}else"multipleOf"===r.kind?0!==lC(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.not_finite,message:r.message}),n.dirty()):cT.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,DT.toString(t))}gt(e,t){return this.setLimit("min",e,!1,DT.toString(t))}lte(e,t){return this.setLimit("max",e,!0,DT.toString(t))}lt(e,t){return this.setLimit("max",e,!1,DT.toString(t))}setLimit(e,t,n,r){return new uC({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:DT.toString(r)}]})}_addCheck(e){return new uC({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:DT.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:DT.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:DT.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:DT.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:DT.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:DT.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:DT.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:DT.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:DT.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&cT.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}uC.create=e=>new uC({checks:[],typeName:KC.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...FT(e)});class cC extends LT{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==yT.bigint)return this._getInvalidInput(e);let t;const n=new ST;for(const r of this._def.checks)if("min"===r.kind){(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else if("max"===r.kind){(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty())}else"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),ET(t,{code:bT.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):cT.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.bigint,received:t.parsedType}),kT}gte(e,t){return this.setLimit("min",e,!0,DT.toString(t))}gt(e,t){return this.setLimit("min",e,!1,DT.toString(t))}lte(e,t){return this.setLimit("max",e,!0,DT.toString(t))}lt(e,t){return this.setLimit("max",e,!1,DT.toString(t))}setLimit(e,t,n,r){return new cC({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:DT.toString(r)}]})}_addCheck(e){return new cC({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:DT.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:DT.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:DT.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:DT.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:DT.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}cC.create=e=>new cC({checks:[],typeName:KC.ZodBigInt,coerce:(null==e?void 0:e.coerce)??!1,...FT(e)});class dC extends LT{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==yT.boolean){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.boolean,received:t.parsedType}),kT}return CT(e.data)}}dC.create=e=>new dC({typeName:KC.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...FT(e)});class fC extends LT{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==yT.date){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.date,received:t.parsedType}),kT}if(Number.isNaN(e.data.getTime())){return ET(this._getOrReturnCtx(e),{code:bT.invalid_date}),kT}const t=new ST;let n;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),t.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(n=this._getOrReturnCtx(e,n),ET(n,{code:bT.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),t.dirty()):cT.assertNever(r);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new fC({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:DT.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:DT.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}fC.create=e=>new fC({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:KC.ZodDate,...FT(e)});class pC extends LT{_parse(e){if(this._getType(e)!==yT.symbol){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.symbol,received:t.parsedType}),kT}return CT(e.data)}}pC.create=e=>new pC({typeName:KC.ZodSymbol,...FT(e)});class hC extends LT{_parse(e){if(this._getType(e)!==yT.undefined){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.undefined,received:t.parsedType}),kT}return CT(e.data)}}hC.create=e=>new hC({typeName:KC.ZodUndefined,...FT(e)});class mC extends LT{_parse(e){if(this._getType(e)!==yT.null){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.null,received:t.parsedType}),kT}return CT(e.data)}}mC.create=e=>new mC({typeName:KC.ZodNull,...FT(e)});class gC extends LT{constructor(){super(...arguments),this._any=!0}_parse(e){return CT(e.data)}}gC.create=e=>new gC({typeName:KC.ZodAny,...FT(e)});class yC extends LT{constructor(){super(...arguments),this._unknown=!0}_parse(e){return CT(e.data)}}yC.create=e=>new yC({typeName:KC.ZodUnknown,...FT(e)});class vC extends LT{_parse(e){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.never,received:t.parsedType}),kT}}vC.create=e=>new vC({typeName:KC.ZodNever,...FT(e)});class bC extends LT{_parse(e){if(this._getType(e)!==yT.undefined){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.void,received:t.parsedType}),kT}return CT(e.data)}}bC.create=e=>new bC({typeName:KC.ZodVoid,...FT(e)});class wC extends LT{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==yT.array)return ET(t,{code:bT.invalid_type,expected:yT.array,received:t.parsedType}),kT;if(null!==r.exactLength){const e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(ET(t,{code:e?bT.too_big:bT.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(ET(t,{code:bT.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(ET(t,{code:bT.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new MT(t,e,t.path,n)))).then(e=>ST.mergeArray(n,e));const i=[...t.data].map((e,n)=>r.type._parseSync(new MT(t,e,t.path,n)));return ST.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new wC({...this._def,minLength:{value:e,message:DT.toString(t)}})}max(e,t){return new wC({...this._def,maxLength:{value:e,message:DT.toString(t)}})}length(e,t){return new wC({...this._def,exactLength:{value:e,message:DT.toString(t)}})}nonempty(e){return this.min(1,e)}}function _C(e){if(e instanceof xC){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=BC.create(_C(r))}return new xC({...e._def,shape:()=>t})}return e instanceof wC?new wC({...e._def,type:_C(e.element)}):e instanceof BC?BC.create(_C(e.unwrap())):e instanceof $C?$C.create(_C(e.unwrap())):e instanceof AC?AC.create(e.items.map(e=>_C(e))):e}wC.create=(e,t)=>new wC({type:e,minLength:null,maxLength:null,exactLength:null,typeName:KC.ZodArray,...FT(t)});class xC extends LT{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=cT.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==yT.object){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.object,received:t.parsedType}),kT}const{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof vC&&"strip"===this._def.unknownKeys))for(const s in n.data)i.includes(s)||o.push(s);const a=[];for(const s of i){const e=r[s],t=n.data[s];a.push({key:{status:"valid",value:s},value:e._parse(new MT(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof vC){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of o)a.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(ET(n,{code:bT.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of o){const r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new MT(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of a){const n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>ST.mergeObjectSync(t,e)):ST.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(e){return DT.errToObj,new xC({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,n)=>{var r,i;const o=(null==(i=(r=this._def).errorMap)?void 0:i.call(r,t,n).message)??n.defaultError;return"unrecognized_keys"===t.code?{message:DT.errToObj(e).message??o}:{message:o}}}:{}})}strip(){return new xC({...this._def,unknownKeys:"strip"})}passthrough(){return new xC({...this._def,unknownKeys:"passthrough"})}extend(e){return new xC({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new xC({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:KC.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new xC({...this._def,catchall:e})}pick(e){const t={};for(const n of cT.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new xC({...this._def,shape:()=>t})}omit(e){const t={};for(const n of cT.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new xC({...this._def,shape:()=>t})}deepPartial(){return _C(this)}partial(e){const t={};for(const n of cT.objectKeys(this.shape)){const r=this.shape[n];e&&!e[n]?t[n]=r:t[n]=r.optional()}return new xC({...this._def,shape:()=>t})}required(e){const t={};for(const n of cT.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let e=this.shape[n];for(;e instanceof BC;)e=e._def.innerType;t[n]=e}return new xC({...this._def,shape:()=>t})}keyof(){return MC(cT.objectKeys(this.shape))}}xC.create=(e,t)=>new xC({shape:()=>e,unknownKeys:"strip",catchall:vC.create(),typeName:KC.ZodObject,...FT(t)}),xC.strictCreate=(e,t)=>new xC({shape:()=>e,unknownKeys:"strict",catchall:vC.create(),typeName:KC.ZodObject,...FT(t)}),xC.lazycreate=(e,t)=>new xC({shape:e,unknownKeys:"strip",catchall:vC.create(),typeName:KC.ZodObject,...FT(t)});class EC extends LT{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{const n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const n=e.map(e=>new wT(e.ctx.common.issues));return ET(t,{code:bT.invalid_union,unionErrors:n}),kT});{let e;const r=[];for(const o of n){const n={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=r.map(e=>new wT(e));return ET(t,{code:bT.invalid_union,unionErrors:i}),kT}}get options(){return this._def.options}}EC.create=(e,t)=>new EC({options:e,typeName:KC.ZodUnion,...FT(t)});const SC=e=>e instanceof DC?SC(e.schema):e instanceof jC?SC(e.innerType()):e instanceof RC?[e.value]:e instanceof PC?e.options:e instanceof FC?cT.objectValues(e.enum):e instanceof zC?SC(e._def.innerType):e instanceof hC?[void 0]:e instanceof mC?[null]:e instanceof BC?[void 0,...SC(e.unwrap())]:e instanceof $C?[null,...SC(e.unwrap())]:e instanceof HC||e instanceof WC?SC(e.unwrap()):e instanceof UC?SC(e._def.innerType):[];class kC extends LT{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==yT.object)return ET(t,{code:bT.invalid_type,expected:yT.object,received:t.parsedType}),kT;const n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(ET(t,{code:bT.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),kT)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){const r=new Map;for(const i of t){const t=SC(i.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(r.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);r.set(n,i)}}return new kC({typeName:KC.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...FT(n)})}}function TC(e,t){const n=vT(e),r=vT(t);if(e===t)return{valid:!0,data:e};if(n===yT.object&&r===yT.object){const n=cT.objectKeys(t),r=cT.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(const o of r){const n=TC(e[o],t[o]);if(!n.valid)return{valid:!1};i[o]=n.data}return{valid:!0,data:i}}if(n===yT.array&&r===yT.array){if(e.length!==t.length)return{valid:!1};const n=[];for(let r=0;r<e.length;r++){const i=TC(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===yT.date&&r===yT.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class CC extends LT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(AT(e)||AT(r))return kT;const i=TC(e.value,r.value);return i.valid?((IT(e)||IT(r))&&t.dirty(),{status:t.value,value:i.data}):(ET(n,{code:bT.invalid_intersection_types}),kT)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}CC.create=(e,t,n)=>new CC({left:e,right:t,typeName:KC.ZodIntersection,...FT(n)});class AC extends LT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==yT.array)return ET(n,{code:bT.invalid_type,expected:yT.array,received:n.parsedType}),kT;if(n.data.length<this._def.items.length)return ET(n,{code:bT.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kT;!this._def.rest&&n.data.length>this._def.items.length&&(ET(n,{code:bT.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const r=[...n.data].map((e,t)=>{const r=this._def.items[t]||this._def.rest;return r?r._parse(new MT(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>ST.mergeArray(t,e)):ST.mergeArray(t,r)}get items(){return this._def.items}rest(e){return new AC({...this._def,rest:e})}}AC.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new AC({items:e,typeName:KC.ZodTuple,rest:null,...FT(t)})};class IC extends LT{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==yT.object)return ET(n,{code:bT.invalid_type,expected:yT.object,received:n.parsedType}),kT;const r=[],i=this._def.keyType,o=this._def.valueType;for(const a in n.data)r.push({key:i._parse(new MT(n,a,n.path,a)),value:o._parse(new MT(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?ST.mergeObjectAsync(t,r):ST.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(e,t,n){return new IC(t instanceof LT?{keyType:e,valueType:t,typeName:KC.ZodRecord,...FT(n)}:{keyType:sC.create(),valueType:e,typeName:KC.ZodRecord,...FT(t)})}}class OC extends LT{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==yT.map)return ET(n,{code:bT.invalid_type,expected:yT.map,received:n.parsedType}),kT;const r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([e,t],o)=>({key:r._parse(new MT(n,e,n.path,[o,"key"])),value:i._parse(new MT(n,t,n.path,[o,"value"]))}));if(n.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const n of o){const r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return kT;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{const e=new Map;for(const n of o){const r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return kT;"dirty"!==r.status&&"dirty"!==i.status||t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}}OC.create=(e,t,n)=>new OC({valueType:t,keyType:e,typeName:KC.ZodMap,...FT(n)});class NC extends LT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==yT.set)return ET(n,{code:bT.invalid_type,expected:yT.set,received:n.parsedType}),kT;const r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(ET(n,{code:bT.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(ET(n,{code:bT.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());const i=this._def.valueType;function o(e){const n=new Set;for(const r of e){if("aborted"===r.status)return kT;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}const a=[...n.data.values()].map((e,t)=>i._parse(new MT(n,e,n.path,t)));return n.common.async?Promise.all(a).then(e=>o(e)):o(a)}min(e,t){return new NC({...this._def,minSize:{value:e,message:DT.toString(t)}})}max(e,t){return new NC({...this._def,maxSize:{value:e,message:DT.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}NC.create=(e,t)=>new NC({valueType:e,minSize:null,maxSize:null,typeName:KC.ZodSet,...FT(t)});class DC extends LT{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}DC.create=(e,t)=>new DC({getter:e,typeName:KC.ZodLazy,...FT(t)});class RC extends LT{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return ET(t,{received:t.data,code:bT.invalid_literal,expected:this._def.value}),kT}return{status:"valid",value:e.data}}get value(){return this._def.value}}function MC(e,t){return new PC({values:e,typeName:KC.ZodEnum,...FT(t)})}RC.create=(e,t)=>new RC({value:e,typeName:KC.ZodLiteral,...FT(t)});class PC extends LT{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),n=this._def.values;return ET(t,{expected:cT.joinValues(n),received:t.parsedType,code:bT.invalid_type}),kT}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return ET(t,{received:t.data,code:bT.invalid_enum_value,options:n}),kT}return CT(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return PC.create(e,{...this._def,...t})}exclude(e,t=this._def){return PC.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}PC.create=MC;class FC extends LT{_parse(e){const t=cT.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==yT.string&&n.parsedType!==yT.number){const e=cT.objectValues(t);return ET(n,{expected:cT.joinValues(e),received:n.parsedType,code:bT.invalid_type}),kT}if(this._cache||(this._cache=new Set(cT.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=cT.objectValues(t);return ET(n,{received:n.data,code:bT.invalid_enum_value,options:e}),kT}return CT(e.data)}get enum(){return this._def.values}}FC.create=(e,t)=>new FC({values:e,typeName:KC.ZodNativeEnum,...FT(t)});class LC extends LT{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==yT.promise&&!1===t.common.async)return ET(t,{code:bT.invalid_type,expected:yT.promise,received:t.parsedType}),kT;const n=t.parsedType===yT.promise?t.data:Promise.resolve(t.data);return CT(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}LC.create=(e,t)=>new LC({type:e,typeName:KC.ZodPromise,...FT(t)});class jC extends LT{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===KC.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{ET(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){const e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return kT;const r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?kT:"dirty"===r.status||"dirty"===t.value?TT(r.value):r});{if("aborted"===t.value)return kT;const r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?kT:"dirty"===r.status||"dirty"===t.value?TT(r.value):r}}if("refinement"===r.type){const e=e=>{const t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){const r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?kT:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?kT:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){const e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!OT(e))return kT;const o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>OT(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):kT)}cT.assertNever(r)}}jC.create=(e,t,n)=>new jC({schema:e,typeName:KC.ZodEffects,effect:t,...FT(n)}),jC.createWithPreprocess=(e,t,n)=>new jC({schema:t,effect:{type:"preprocess",transform:e},typeName:KC.ZodEffects,...FT(n)});class BC extends LT{_parse(e){return this._getType(e)===yT.undefined?CT(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}BC.create=(e,t)=>new BC({innerType:e,typeName:KC.ZodOptional,...FT(t)});class $C extends LT{_parse(e){return this._getType(e)===yT.null?CT(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}$C.create=(e,t)=>new $C({innerType:e,typeName:KC.ZodNullable,...FT(t)});class zC extends LT{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===yT.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}zC.create=(e,t)=>new zC({innerType:e,typeName:KC.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...FT(t)});class UC extends LT{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return NT(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new wT(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new wT(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}UC.create=(e,t)=>new UC({innerType:e,typeName:KC.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...FT(t)});class qC extends LT{_parse(e){if(this._getType(e)!==yT.nan){const t=this._getOrReturnCtx(e);return ET(t,{code:bT.invalid_type,expected:yT.nan,received:t.parsedType}),kT}return{status:"valid",value:e.data}}}qC.create=e=>new qC({typeName:KC.ZodNaN,...FT(e)});class HC extends LT{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class VC extends LT{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?kT:"dirty"===e.status?(t.dirty(),TT(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})()}{const e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?kT:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(e,t){return new VC({in:e,out:t,typeName:KC.ZodPipeline})}}class WC extends LT{_parse(e){const t=this._def.innerType._parse(e),n=e=>(OT(e)&&(e.value=Object.freeze(e.value)),e);return NT(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}}function GC(e,t){const n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function YC(e,t={},n){return e?gC.create().superRefine((r,i)=>{const o=e(r);if(o instanceof Promise)return o.then(e=>{if(!e){const e=GC(t,r),o=e.fatal??n??!0;i.addIssue({code:"custom",...e,fatal:o})}});if(!o){const e=GC(t,r),o=e.fatal??n??!0;i.addIssue({code:"custom",...e,fatal:o})}}):gC.create()}var KC,ZC;WC.create=(e,t)=>new WC({innerType:e,typeName:KC.ZodReadonly,...FT(t)}),(ZC=KC||(KC={})).ZodString="ZodString",ZC.ZodNumber="ZodNumber",ZC.ZodNaN="ZodNaN",ZC.ZodBigInt="ZodBigInt",ZC.ZodBoolean="ZodBoolean",ZC.ZodDate="ZodDate",ZC.ZodSymbol="ZodSymbol",ZC.ZodUndefined="ZodUndefined",ZC.ZodNull="ZodNull",ZC.ZodAny="ZodAny",ZC.ZodUnknown="ZodUnknown",ZC.ZodNever="ZodNever",ZC.ZodVoid="ZodVoid",ZC.ZodArray="ZodArray",ZC.ZodObject="ZodObject",ZC.ZodUnion="ZodUnion",ZC.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ZC.ZodIntersection="ZodIntersection",ZC.ZodTuple="ZodTuple",ZC.ZodRecord="ZodRecord",ZC.ZodMap="ZodMap",ZC.ZodSet="ZodSet",ZC.ZodFunction="ZodFunction",ZC.ZodLazy="ZodLazy",ZC.ZodLiteral="ZodLiteral",ZC.ZodEnum="ZodEnum",ZC.ZodEffects="ZodEffects",ZC.ZodNativeEnum="ZodNativeEnum",ZC.ZodOptional="ZodOptional",ZC.ZodNullable="ZodNullable",ZC.ZodDefault="ZodDefault",ZC.ZodCatch="ZodCatch",ZC.ZodPromise="ZodPromise",ZC.ZodBranded="ZodBranded",ZC.ZodPipeline="ZodPipeline",ZC.ZodReadonly="ZodReadonly";const QC=(e,t={message:`Input not instance of ${e.name}`})=>YC(t=>t instanceof e,t),XC=sC.create,JC=uC.create;cC.create;const eA=dC.create;fC.create;const tA=mC.create,nA=gC.create,rA=yC.create;vC.create;const iA=wC.create,oA=xC.create,aA=EC.create,sA=kC.create;CC.create;const lA=AC.create,uA=IC.create,cA=DC.create,dA=RC.create,fA=PC.create;LC.create;const pA=BC.create;$C.create;const hA=jC.createWithPreprocess,mA=e=>fC.create({...e,coerce:!0}),gA=fA(["read_json","read_ndjson","read_parquet","read_csv","auto","st_read"]),yA=oA({schema:XC().optional(),select:iA(XC()).optional(),where:XC().optional(),view:eA().optional(),temp:eA().optional(),replace:eA().optional()}).catchall(rA()),vA=yA.extend({options:aA([iA(XC()),XC(),uA(rA())]).optional()}).extend({method:dA("st_read")}),bA=e=>"st_read"===e.method,wA=yA.extend({method:gA.exclude(["st_read"])}),_A=sA("method",[wA,vA]),xA=fA(["file","url","sql"]),EA=oA({type:xA,tableName:XC().describe("Unique table name used to store the data loaded from the data source.")}),SA=EA.extend({type:dA(xA.enum.file),fileName:XC().describe("Currently only CSV and Parquet files are supported."),loadOptions:_A.optional()}),kA=EA.extend({type:dA(xA.enum.url),url:XC().describe("URL to fetch data from. Currently only CSV and Parquet files are supported."),loadOptions:_A.optional().describe("Options for loading the file."),httpMethod:XC().optional().describe("HTTP method to use for the request."),headers:uA(XC(),XC()).optional().describe("Headers to include in the request.")}),TA=EA.extend({type:dA(xA.enum.sql),sqlQuery:XC().describe("SQL query to execute.")}),CA=sA("type",[SA,kA,TA]).describe("Data source specification."),AA="main",IA=fA(["mosaic"]),OA={type:IA.enum.mosaic,nodes:AA},NA=fA(["row","column"]),DA=oA({direction:NA,splitPercentage:JC().optional()}).extend({first:cA(()=>PA),second:cA(()=>PA)});function RA(e){return"string"!=typeof e}const MA=XC(),PA=aA([MA,DA]),FA=oA({type:dA(IA.enum.mosaic),nodes:PA.nullable(),pinned:iA(MA).optional(),fixed:iA(MA).optional()}),LA=sA("type",[FA]),jA=oA({title:XC().default("Untitled room").describe("Room title."),description:XC().nullable().optional().describe("Room description."),layout:LA.default(OA).describe("Layout specifies how views are arranged on the screen."),dataSources:iA(CA).default([]).describe("Data sources. Each data source must have a unique tableName.")}).describe("Room configuration.");var BA,$A,zA,UA,qA,HA,VA,WA,GA,YA,KA,ZA,QA,XA,JA,eI,tI,nI,rI,iI,oI,aI,sI,lI,uI,cI,dI,fI,pI,hI,mI,gI,yI,vI,bI,wI,_I,xI,EI,SI,kI,TI,CI,AI,II,OI,NI,DI,RI,MI={},PI={},FI={exports:{}};function LI(){return BA||(BA=1,e=FI,function(){var t={}.hasOwnProperty;function n(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=i(e,r(n)))}return e}function r(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return n.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var r="";for(var o in e)t.call(e,o)&&e[o]&&(r=i(r,o));return r}function i(e,t){return t?e?e+" "+t:e+t:e}e.exports?(n.default=n,e.exports=n):window.classNames=n}()),FI.exports;var e}function jI(){if(zA)return $A;zA=1;var e="object"==typeof d&&d&&d.Object===Object&&d;return $A=e}function BI(){if(qA)return UA;qA=1;var e=jI(),t="object"==typeof self&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return UA=n}function $I(){if(VA)return HA;VA=1;var e=BI().Symbol;return HA=e}function zI(){if(QA)return ZA;QA=1;var e=$I(),t=function(){if(GA)return WA;GA=1;var e=$I(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;return WA=function(e){var t=n.call(e,i),o=e[i];try{e[i]=void 0;var a=!0}catch(F0){}var s=r.call(e);return a&&(t?e[i]=o:delete e[i]),s}}(),n=function(){if(KA)return YA;KA=1;var e=Object.prototype.toString;return YA=function(t){return e.call(t)}}(),r=e?e.toStringTag:void 0;return ZA=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?t(e):n(e)}}function UI(){if(JA)return XA;return JA=1,XA=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}}function qI(){if(tI)return eI;tI=1;var e=zI(),t=UI();return eI=function(n){if(!t(n))return!1;var r=e(n);return"[object Function]"==r||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}}function HI(){if(oI)return iI;oI=1;var e,t=function(){if(rI)return nI;rI=1;var e=BI()["__core-js_shared__"];return nI=e}(),n=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return iI=function(e){return!!n&&n in e}}function VI(){if(sI)return aI;sI=1;var e=Function.prototype.toString;return aI=function(t){if(null!=t){try{return e.call(t)}catch(F0){}try{return t+""}catch(F0){}}return""}}function WI(){if(pI)return fI;pI=1;var e=function(){if(uI)return lI;uI=1;var e=qI(),t=HI(),n=UI(),r=VI(),i=/^\[object .+?Constructor\]$/,o=Function.prototype,a=Object.prototype,s=o.toString,l=a.hasOwnProperty,u=RegExp("^"+s.call(l).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return lI=function(o){return!(!n(o)||t(o))&&(e(o)?u:i).test(r(o))}}(),t=dI?cI:(dI=1,cI=function(e,t){return null==e?void 0:e[t]});return fI=function(n,r){var i=t(n,r);return e(i)?i:void 0}}function GI(){if(mI)return hI;mI=1;var e=WI(),t=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(F0){}}();return hI=t}function YI(){if(yI)return gI;yI=1;var e=GI();return gI=function(t,n,r){"__proto__"==n&&e?e(t,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[n]=r}}function KI(){if(EI)return xI;EI=1;var e=(_I?wI:(_I=1,wI=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}))();return xI=e}function ZI(){if(CI)return TI;return CI=1,TI=function(e){return null!=e&&"object"==typeof e}}function QI(){if(NI)return OI;NI=1;var e=function(){if(II)return AI;II=1;var e=zI(),t=ZI();return AI=function(n){return t(n)&&"[object Arguments]"==e(n)}}(),t=ZI(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,o=e(function(){return arguments}())?e:function(e){return t(e)&&r.call(e,"callee")&&!i.call(e,"callee")};return OI=o}function XI(){if(RI)return DI;RI=1;var e=Array.isArray;return DI=e}var JI,eO,tO,nO,rO,iO,oO,aO,sO,lO,uO,cO={exports:{}};function dO(){return tO||(tO=1,e=cO,t=cO.exports,n=BI(),r=eO?JI:(eO=1,JI=function(){return!1}),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=(a?a.isBuffer:void 0)||r,e.exports=s),cO.exports;var e,t,n,r,i,o,a,s}function fO(){if(rO)return nO;rO=1;var e=/^(?:0|[1-9]\d*)$/;return nO=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}}function pO(){if(oO)return iO;oO=1;return iO=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}}function hO(){if(uO)return lO;return uO=1,lO=function(e){return function(t){return e(t)}}}var mO,gO,yO,vO,bO,wO,_O,xO,EO,SO,kO,TO,CO,AO,IO,OO,NO,DO,RO,MO,PO,FO,LO,jO,BO,$O,zO,UO,qO,HO,VO,WO,GO,YO,KO,ZO,QO,XO,JO,eN,tN,nN,rN,iN,oN,aN,sN,lN,uN,cN,dN,fN,pN,hN,mN,gN,yN,vN,bN,wN,_N,xN,EN,SN,kN,TN,CN,AN,IN,ON,NN,DN,RN,MN,PN,FN,LN,jN,BN,$N,zN,UN,qN,HN,VN,WN,GN,YN,KN,ZN,QN,XN,JN,eD,tD,nD,rD,iD,oD,aD,sD,lD,uD,cD,dD,fD,pD,hD,mD,gD,yD,vD,bD,wD,_D,xD,ED,SD,kD,TD,CD,AD,ID,OD,ND,DD,RD,MD,PD,FD,LD,jD,BD,$D,zD,UD,qD,HD,VD,WD,GD,YD,KD,ZD,QD,XD,JD,eR,tR,nR,rR,iR,oR,aR,sR,lR,uR,cR,dR,fR,pR,hR,mR,gR,yR,vR,bR,wR,_R,xR,ER,SR,kR,TR,CR,AR,IR,OR,NR,DR,RR,MR,PR,FR,LR,jR,BR,$R,zR,UR,qR,HR,VR,WR,GR,YR,KR,ZR,QR,XR,JR,eM,tM,nM,rM,iM,oM,aM,sM,lM={exports:{}};function uM(){return mO||(mO=1,e=lM,t=lM.exports,n=jI(),r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(F0){}}(),e.exports=a),lM.exports;var e,t,n,r,i,o,a}function cM(){if(yO)return gO;yO=1;var e=function(){if(sO)return aO;sO=1;var e=zI(),t=pO(),n=ZI(),r={};return r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,aO=function(i){return n(i)&&t(i.length)&&!!r[e(i)]}}(),t=hO(),n=uM(),r=n&&n.isTypedArray,i=r?t(r):e;return gO=i}function dM(){if(bO)return vO;bO=1;var e=kI?SI:(kI=1,SI=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}),t=QI(),n=XI(),r=dO(),i=fO(),o=cM(),a=Object.prototype.hasOwnProperty;return vO=function(s,l){var u=n(s),c=!u&&t(s),d=!u&&!c&&r(s),f=!u&&!c&&!d&&o(s),p=u||c||d||f,h=p?e(s.length,String):[],m=h.length;for(var g in s)!l&&!a.call(s,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||i(g,m))||h.push(g);return h}}function fM(){if(_O)return wO;_O=1;var e=Object.prototype;return wO=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}}function pM(){if(EO)return xO;return EO=1,xO=function(e,t){return function(n){return e(t(n))}}}function hM(){if(CO)return TO;CO=1;var e=fM(),t=function(){if(kO)return SO;kO=1;var e=pM()(Object.keys,Object);return SO=e}(),n=Object.prototype.hasOwnProperty;return TO=function(r){if(!e(r))return t(r);var i=[];for(var o in Object(r))n.call(r,o)&&"constructor"!=o&&i.push(o);return i}}function mM(){if(IO)return AO;IO=1;var e=qI(),t=pO();return AO=function(n){return null!=n&&t(n.length)&&!e(n)}}function gM(){if(NO)return OO;NO=1;var e=dM(),t=hM(),n=mM();return OO=function(r){return n(r)?e(r):t(r)}}function yM(){if(LO)return FO;LO=1;var e=function(){if(RO)return DO;RO=1;var e=KI(),t=gM();return DO=function(n,r){return n&&e(n,r,t)}}(),t=function(){if(PO)return MO;PO=1;var e=mM();return MO=function(t,n){return function(r,i){if(null==r)return r;if(!e(r))return t(r,i);for(var o=r.length,a=n?o:-1,s=Object(r);(n?a--:++a<o)&&!1!==i(s[a],a,s););return r}}}()(e);return FO=t}function vM(){if(qO)return UO;return qO=1,UO=function(e,t){return e===t||e!=e&&t!=t}}function bM(){if(VO)return HO;VO=1;var e=vM();return HO=function(t,n){for(var r=t.length;r--;)if(e(t[r][0],n))return r;return-1}}function wM(){if(tN)return eN;tN=1;var e=zO?$O:(zO=1,$O=function(){this.__data__=[],this.size=0}),t=function(){if(GO)return WO;GO=1;var e=bM(),t=Array.prototype.splice;return WO=function(n){var r=this.__data__,i=e(r,n);return!(i<0||(i==r.length-1?r.pop():t.call(r,i,1),--this.size,0))}}(),n=function(){if(KO)return YO;KO=1;var e=bM();return YO=function(t){var n=this.__data__,r=e(n,t);return r<0?void 0:n[r][1]}}(),r=function(){if(QO)return ZO;QO=1;var e=bM();return ZO=function(t){return e(this.__data__,t)>-1}}(),i=function(){if(JO)return XO;JO=1;var e=bM();return XO=function(t,n){var r=this.__data__,i=e(r,t);return i<0?(++this.size,r.push([t,n])):r[i][1]=n,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,eN=o}function _M(){if(dN)return cN;dN=1;var e=WI()(BI(),"Map");return cN=e}function xM(){if(pN)return fN;pN=1;var e=WI()(Object,"create");return fN=e}function EM(){if(kN)return SN;kN=1;var e=function(){if(mN)return hN;mN=1;var e=xM();return hN=function(){this.__data__=e?e(null):{},this.size=0}}(),t=yN?gN:(yN=1,gN=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}),n=function(){if(bN)return vN;bN=1;var e=xM(),t=Object.prototype.hasOwnProperty;return vN=function(n){var r=this.__data__;if(e){var i=r[n];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(r,n)?r[n]:void 0}}(),r=function(){if(_N)return wN;_N=1;var e=xM(),t=Object.prototype.hasOwnProperty;return wN=function(n){var r=this.__data__;return e?void 0!==r[n]:t.call(r,n)}}(),i=function(){if(EN)return xN;EN=1;var e=xM();return xN=function(t,n){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=e&&void 0===n?"__lodash_hash_undefined__":n,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,SN=o}function SM(){if(NN)return ON;NN=1;var e=IN?AN:(IN=1,AN=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return ON=function(t,n){var r=t.__data__;return e(n)?r["string"==typeof n?"string":"hash"]:r.map}}function kM(){if(zN)return $N;zN=1;var e=function(){if(CN)return TN;CN=1;var e=EM(),t=wM(),n=_M();return TN=function(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}}(),t=function(){if(RN)return DN;RN=1;var e=SM();return DN=function(t){var n=e(this,t).delete(t);return this.size-=n?1:0,n}}(),n=function(){if(PN)return MN;PN=1;var e=SM();return MN=function(t){return e(this,t).get(t)}}(),r=function(){if(LN)return FN;LN=1;var e=SM();return FN=function(t){return e(this,t).has(t)}}(),i=function(){if(BN)return jN;BN=1;var e=SM();return jN=function(t,n){var r=e(this,t),i=r.size;return r.set(t,n),this.size+=r.size==i?0:1,this}}();function o(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=n,o.prototype.has=r,o.prototype.set=i,$N=o}function TM(){if(VN)return HN;VN=1;var e=wM(),t=function(){if(rN)return nN;rN=1;var e=wM();return nN=function(){this.__data__=new e,this.size=0}}(),n=oN?iN:(oN=1,iN=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}),r=sN?aN:(sN=1,aN=function(e){return this.__data__.get(e)}),i=uN?lN:(uN=1,lN=function(e){return this.__data__.has(e)}),o=function(){if(qN)return UN;qN=1;var e=wM(),t=_M(),n=kM();return UN=function(r,i){var o=this.__data__;if(o instanceof e){var a=o.__data__;if(!t||a.length<199)return a.push([r,i]),this.size=++o.size,this;o=this.__data__=new n(a)}return o.set(r,i),this.size=o.size,this}}();function a(t){var n=this.__data__=new e(t);this.size=n.size}return a.prototype.clear=t,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,HN=a}function CM(){if(QN)return ZN;QN=1;var e=kM(),t=GN?WN:(GN=1,WN=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}),n=KN?YN:(KN=1,YN=function(e){return this.__data__.has(e)});function r(t){var n=-1,r=null==t?0:t.length;for(this.__data__=new e;++n<r;)this.add(t[n])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ZN=r}function AM(){if(rD)return nD;rD=1;var e=CM(),t=JN?XN:(JN=1,XN=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}),n=tD?eD:(tD=1,eD=function(e,t){return e.has(t)});return nD=function(r,i,o,a,s,l){var u=1&o,c=r.length,d=i.length;if(c!=d&&!(u&&d>c))return!1;var f=l.get(r),p=l.get(i);if(f&&p)return f==i&&p==r;var h=-1,m=!0,g=2&o?new e:void 0;for(l.set(r,i),l.set(i,r);++h<c;){var y=r[h],v=i[h];if(a)var b=u?a(v,y,h,i,r,l):a(y,v,h,r,i,l);if(void 0!==b){if(b)continue;m=!1;break}if(g){if(!t(i,function(e,t){if(!n(g,t)&&(y===e||s(y,e,o,a,l)))return g.push(t)})){m=!1;break}}else if(y!==v&&!s(y,v,o,a,l)){m=!1;break}}return l.delete(r),l.delete(i),m}}function IM(){if(oD)return iD;oD=1;var e=BI().Uint8Array;return iD=e}function OM(){if(dD)return cD;dD=1;var e=$I(),t=IM(),n=vM(),r=AM(),i=sD?aD:(sD=1,aD=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}),o=uD?lD:(uD=1,lD=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}),a=e?e.prototype:void 0,s=a?a.valueOf:void 0;return cD=function(e,a,l,u,c,d,f){switch(l){case"[object DataView]":if(e.byteLength!=a.byteLength||e.byteOffset!=a.byteOffset)return!1;e=e.buffer,a=a.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=a.byteLength||!d(new t(e),new t(a)));case"[object Boolean]":case"[object Date]":case"[object Number]":return n(+e,+a);case"[object Error]":return e.name==a.name&&e.message==a.message;case"[object RegExp]":case"[object String]":return e==a+"";case"[object Map]":var p=i;case"[object Set]":var h=1&u;if(p||(p=o),e.size!=a.size&&!h)return!1;var m=f.get(e);if(m)return m==a;u|=2,f.set(e,a);var g=r(p(e),p(a),u,c,d,f);return f.delete(e),g;case"[object Symbol]":if(s)return s.call(e)==s.call(a)}return!1}}function NM(){if(pD)return fD;return pD=1,fD=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}}function DM(){if(mD)return hD;mD=1;var e=NM(),t=XI();return hD=function(n,r,i){var o=r(n);return t(n)?o:e(o,i(n))}}function RM(){if(bD)return vD;return bD=1,vD=function(){return[]}}function MM(){if(_D)return wD;_D=1;var e=yD?gD:(yD=1,gD=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}),t=RM(),n=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols;return wD=r?function(t){return null==t?[]:(t=Object(t),e(r(t),function(e){return n.call(t,e)}))}:t}function PM(){if(ED)return xD;ED=1;var e=DM(),t=MM(),n=gM();return xD=function(r){return e(r,n,t)}}function FM(){if(PD)return MD;PD=1;var e=function(){if(CD)return TD;CD=1;var e=WI()(BI(),"DataView");return TD=e}(),t=_M(),n=function(){if(ID)return AD;ID=1;var e=WI()(BI(),"Promise");return AD=e}(),r=function(){if(ND)return OD;ND=1;var e=WI()(BI(),"Set");return OD=e}(),i=function(){if(RD)return DD;RD=1;var e=WI()(BI(),"WeakMap");return DD=e}(),o=zI(),a=VI(),s="[object Map]",l="[object Promise]",u="[object Set]",c="[object WeakMap]",d="[object DataView]",f=a(e),p=a(t),h=a(n),m=a(r),g=a(i),y=o;return(e&&y(new e(new ArrayBuffer(1)))!=d||t&&y(new t)!=s||n&&y(n.resolve())!=l||r&&y(new r)!=u||i&&y(new i)!=c)&&(y=function(e){var t=o(e),n="[object Object]"==t?e.constructor:void 0,r=n?a(n):"";if(r)switch(r){case f:return d;case p:return s;case h:return l;case m:return u;case g:return c}return t}),MD=y}function LM(){if(LD)return FD;LD=1;var e=TM(),t=AM(),n=OM(),r=function(){if(kD)return SD;kD=1;var e=PM(),t=Object.prototype.hasOwnProperty;return SD=function(n,r,i,o,a,s){var l=1&i,u=e(n),c=u.length;if(c!=e(r).length&&!l)return!1;for(var d=c;d--;){var f=u[d];if(!(l?f in r:t.call(r,f)))return!1}var p=s.get(n),h=s.get(r);if(p&&h)return p==r&&h==n;var m=!0;s.set(n,r),s.set(r,n);for(var g=l;++d<c;){var y=n[f=u[d]],v=r[f];if(o)var b=l?o(v,y,f,r,n,s):o(y,v,f,n,r,s);if(!(void 0===b?y===v||a(y,v,i,o,s):b)){m=!1;break}g||(g="constructor"==f)}if(m&&!g){var w=n.constructor,_=r.constructor;w==_||!("constructor"in n)||!("constructor"in r)||"function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _||(m=!1)}return s.delete(n),s.delete(r),m}}(),i=FM(),o=XI(),a=dO(),s=cM(),l="[object Arguments]",u="[object Array]",c="[object Object]",d=Object.prototype.hasOwnProperty;return FD=function(f,p,h,m,g,y){var v=o(f),b=o(p),w=v?u:i(f),_=b?u:i(p),x=(w=w==l?c:w)==c,E=(_=_==l?c:_)==c,S=w==_;if(S&&a(f)){if(!a(p))return!1;v=!0,x=!1}if(S&&!x)return y||(y=new e),v||s(f)?t(f,p,h,m,g,y):n(f,p,w,h,m,g,y);if(!(1&h)){var k=x&&d.call(f,"__wrapped__"),T=E&&d.call(p,"__wrapped__");if(k||T){var C=k?f.value():f,A=T?p.value():p;return y||(y=new e),g(C,A,h,m,y)}}return!!S&&(y||(y=new e),r(f,p,h,m,g,y))}}function jM(){if(BD)return jD;BD=1;var e=LM(),t=ZI();return jD=function n(r,i,o,a,s){return r===i||(null==r||null==i||!t(r)&&!t(i)?r!=r&&i!=i:e(r,i,o,a,n,s))},jD}function BM(){if(qD)return UD;qD=1;var e=UI();return UD=function(t){return t==t&&!e(t)}}function $M(){if(GD)return WD;return GD=1,WD=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}}function zM(){if(KD)return YD;KD=1;var e=function(){if(zD)return $D;zD=1;var e=TM(),t=jM();return $D=function(n,r,i,o){var a=i.length,s=a,l=!o;if(null==n)return!s;for(n=Object(n);a--;){var u=i[a];if(l&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++a<s;){var c=(u=i[a])[0],d=n[c],f=u[1];if(l&&u[2]){if(void 0===d&&!(c in n))return!1}else{var p=new e;if(o)var h=o(d,f,c,n,r,p);if(!(void 0===h?t(f,d,3,o,p):h))return!1}}return!0}}(),t=function(){if(VD)return HD;VD=1;var e=BM(),t=gM();return HD=function(n){for(var r=t(n),i=r.length;i--;){var o=r[i],a=n[o];r[i]=[o,a,e(a)]}return r}}(),n=$M();return YD=function(r){var i=t(r);return 1==i.length&&i[0][2]?n(i[0][0],i[0][1]):function(t){return t===r||e(t,r,i)}}}function UM(){if(QD)return ZD;QD=1;var e=zI(),t=ZI();return ZD=function(n){return"symbol"==typeof n||t(n)&&"[object Symbol]"==e(n)}}function qM(){if(JD)return XD;JD=1;var e=XI(),t=UM(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;return XD=function(i,o){if(e(i))return!1;var a=typeof i;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=i&&!t(i))||(r.test(i)||!n.test(i)||null!=o&&i in Object(o))}}function HM(){if(rR)return nR;rR=1;var e=function(){if(tR)return eR;tR=1;var e=kM();function t(n,r){if("function"!=typeof n||null!=r&&"function"!=typeof r)throw new TypeError("Expected a function");var i=function(){var e=arguments,t=r?r.apply(this,e):e[0],o=i.cache;if(o.has(t))return o.get(t);var a=n.apply(this,e);return i.cache=o.set(t,a)||o,a};return i.cache=new(t.Cache||e),i}return t.Cache=e,eR=t}();return nR=function(t){var n=e(t,function(e){return 500===r.size&&r.clear(),e}),r=n.cache;return n}}function VM(){if(sR)return aR;return sR=1,aR=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}}function WM(){if(dR)return cR;dR=1;var e=function(){if(uR)return lR;uR=1;var e=$I(),t=VM(),n=XI(),r=UM(),i=e?e.prototype:void 0,o=i?i.toString:void 0;return lR=function e(i){if("string"==typeof i)return i;if(n(i))return t(i,e)+"";if(r(i))return o?o.call(i):"";var a=i+"";return"0"==a&&1/i==-1/0?"-0":a},lR}();return cR=function(t){return null==t?"":e(t)}}function GM(){if(pR)return fR;pR=1;var e=XI(),t=qM(),n=function(){if(oR)return iR;oR=1;var e=HM(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(e){var r=[];return 46===e.charCodeAt(0)&&r.push(""),e.replace(t,function(e,t,i,o){r.push(i?o.replace(n,"$1"):t||e)}),r});return iR=r}(),r=WM();return fR=function(i,o){return e(i)?i:t(i,o)?[i]:n(r(i))}}function YM(){if(mR)return hR;mR=1;var e=UM();return hR=function(t){if("string"==typeof t||e(t))return t;var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}}function KM(){if(yR)return gR;yR=1;var e=GM(),t=YM();return gR=function(n,r){for(var i=0,o=(r=e(r,n)).length;null!=n&&i<o;)n=n[t(r[i++])];return i&&i==o?n:void 0}}function ZM(){if(bR)return vR;bR=1;var e=KM();return vR=function(t,n,r){var i=null==t?void 0:e(t,n);return void 0===i?r:i}}function QM(){if(kR)return SR;kR=1;var e=_R?wR:(_R=1,wR=function(e,t){return null!=e&&t in Object(e)}),t=function(){if(ER)return xR;ER=1;var e=GM(),t=QI(),n=XI(),r=fO(),i=pO(),o=YM();return xR=function(a,s,l){for(var u=-1,c=(s=e(s,a)).length,d=!1;++u<c;){var f=o(s[u]);if(!(d=null!=a&&l(a,f)))break;a=a[f]}return d||++u!=c?d:!!(c=null==a?0:a.length)&&i(c)&&r(f,c)&&(n(a)||t(a))}}();return SR=function(n,r){return null!=n&&t(n,r,e)}}function XM(){if(IR)return AR;return IR=1,AR=function(e){return e}}function JM(){if(PR)return MR;PR=1;var e=NR?OR:(NR=1,OR=function(e){return function(t){return null==t?void 0:t[e]}}),t=function(){if(RR)return DR;RR=1;var e=KM();return DR=function(t){return function(n){return e(n,t)}}}(),n=qM(),r=YM();return MR=function(i){return n(i)?e(r(i)):t(i)}}function eP(){if(LR)return FR;LR=1;var e=zM(),t=function(){if(CR)return TR;CR=1;var e=jM(),t=ZM(),n=QM(),r=qM(),i=BM(),o=$M(),a=YM();return TR=function(s,l){return r(s)&&i(l)?o(a(s),l):function(r){var i=t(r,s);return void 0===i&&i===l?n(r,s):e(l,i,3)}}}(),n=XM(),r=XI(),i=JM();return FR=function(o){return"function"==typeof o?o:null==o?n:"object"==typeof o?r(o)?t(o[0],o[1]):e(o):i(o)}}function tP(){if(BR)return jR;BR=1;var e=bI?vI:(bI=1,vI=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}),t=function(){if(BO)return jO;BO=1;var e=yM();return jO=function(t,n,r,i){return e(t,function(e,t,o){n(i,e,r(e),o)}),i}}(),n=eP(),r=XI();return jR=function(i,o){return function(a,s){var l=r(a)?e:t,u=o?o():{};return l(a,i,n(s,2),u)}}}function nP(){if(qR)return UR;qR=1;var e=YI(),t=vM(),n=Object.prototype.hasOwnProperty;return UR=function(r,i,o){var a=r[i];n.call(r,i)&&t(a,o)&&(void 0!==o||i in r)||e(r,i,o)}}function rP(){if(VR)return HR;VR=1;var e=nP(),t=GM(),n=fO(),r=UI(),i=YM();return HR=function(o,a,s,l){if(!r(o))return o;for(var u=-1,c=(a=t(a,o)).length,d=c-1,f=o;null!=f&&++u<c;){var p=i(a[u]),h=s;if("__proto__"===p||"constructor"===p||"prototype"===p)return o;if(u!=d){var m=f[p];void 0===(h=l?l(m,p,f):void 0)&&(h=r(m)?m:n(a[u+1])?[]:{})}e(f,p,h),f=f[p]}return o}}function iP(){if(KR)return YR;KR=1;var e=pM()(Object.getPrototypeOf,Object);return YR=e}function oP(){if(QR)return ZR;QR=1;var e=NM(),t=iP(),n=MM(),r=RM(),i=Object.getOwnPropertySymbols;return ZR=i?function(r){for(var i=[];r;)e(i,n(r)),r=t(r);return i}:r}function aP(){if(tM)return eM;tM=1;var e=UI(),t=fM(),n=JR?XR:(JR=1,XR=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}),r=Object.prototype.hasOwnProperty;return eM=function(i){if(!e(i))return n(i);var o=t(i),a=[];for(var s in i)("constructor"!=s||!o&&r.call(i,s))&&a.push(s);return a}}function sP(){if(rM)return nM;rM=1;var e=dM(),t=aP(),n=mM();return nM=function(r){return n(r)?e(r,!0):t(r)}}function lP(){if(oM)return iM;oM=1;var e=DM(),t=oP(),n=sP();return iM=function(r){return e(r,n,t)}}function uP(){if(sM)return aM;sM=1;var e=VM(),t=eP(),n=function(){if(GR)return WR;GR=1;var e=KM(),t=rP(),n=GM();return WR=function(r,i,o){for(var a=-1,s=i.length,l={};++a<s;){var u=i[a],c=e(r,u);o(c,u)&&t(l,n(u,r),c)}return l}}(),r=lP();return aM=function(i,o){if(null==i)return{};var a=e(r(i),function(e){return[e]});return o=t(o),n(i,a,function(e,t){return o(e,t[0])})}}var cP,dP,fP=k.createContext({dragDropManager:void 0});function pP(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e){var o;if(void 0===t)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;(o=new Error(t.replace(/%s/g,function(){return r[a++]}))).name="Invariant Violation"}throw o.framesToPop=1,o}}(dP=cP||(cP={})).SOURCE="SOURCE",dP.TARGET="TARGET";var hP="dnd-core/INIT_COORDS",mP="dnd-core/BEGIN_DRAG",gP="dnd-core/PUBLISH_DRAG_SOURCE",yP="dnd-core/HOVER",vP="dnd-core/DROP",bP="dnd-core/END_DRAG";function wP(e,t){return{type:hP,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function _P(e){return(_P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xP(e){return"object"===_P(e)}var EP={type:hP,payload:{clientOffset:null,sourceClientOffset:null}};function SP(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,o=n.clientOffset,a=n.getSourceClientOffset,s=e.getMonitor(),l=e.getRegistry();e.dispatch(wP(o)),function(e,t,n){pP(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(e){pP(n.getSource(e),"Expected sourceIds to be registered.")})}(t,s,l);var u=function(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,s);if(null!==u){var c=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");!function(e){pP("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(a),c=a(u)}e.dispatch(wP(o,c));var d=l.getSource(u).beginDrag(s,u);if(null!=d){!function(e){pP(xP(e),"Item must be an object.")}(d),l.pinSource(u);var f=l.getSourceType(u);return{type:mP,payload:{itemType:f,item:d,sourceId:u,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}}else e.dispatch(EP)}}function kP(e){return function(){if(e.getMonitor().isDragging())return{type:gP}}}function TP(e,t){return null===t?null===e:Array.isArray(e)?e.some(function(e){return e===t}):e===t}function CP(e){return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function(e){pP(Array.isArray(e),"Expected targetIds to be an array.")}(t);var r=t.slice(0),i=e.getMonitor(),o=e.getRegistry();return function(e,t,n){pP(t.isDragging(),"Cannot call hover while not dragging."),pP(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];pP(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array."),pP(n.getTarget(i),"Expected targetIds to be registered.")}}(r,i,o),function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];TP(t.getTargetType(i),n)||e.splice(r,1)}}(r,o,i.getItemType()),function(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}(r,i,o),{type:yP,payload:{targetIds:r,clientOffset:n||null}}}}function AP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function IP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AP(Object(n),!0).forEach(function(t){OP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function OP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NP(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();!function(e){pP(e.isDragging(),"Cannot call drop while not dragging."),pP(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);var i=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach(function(i,o){var a=function(e,t,n,r){var i=n.getTarget(e),o=i?i.drop(r,e):void 0;(function(e){pP(void 0===e||xP(e),"Drop result must either be an object or undefined.")})(o),void 0===o&&(o=0===t?{}:r.getDropResult());return o}(i,o,r,n),s={type:vP,payload:{dropResult:IP(IP({},t),a)}};e.dispatch(s)})}}function DP(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){pP(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:bP}}}function RP(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function MP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PP=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),MP(this,"store",void 0),MP(this,"monitor",void 0),MP(this,"backend",void 0),MP(this,"isSetUp",!1),MP(this,"handleRefCountChange",function(){var e=r.store.getState().refCount>0;r.backend&&(e&&!r.isSetUp?(r.backend.setup(),r.isSetUp=!0):!e&&r.isSetUp&&(r.backend.teardown(),r.isSetUp=!1))}),this.store=t,this.monitor=n,t.subscribe(this.handleRefCountChange)}return RP(e,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;var n=function(e){return{beginDrag:SP(e),publishDragSource:kP(e),hover:CP(e),drop:NP(e),endDrag:DP(e)}}(this);return Object.keys(n).reduce(function(r,i){var o,a=n[i];return r[i]=(o=a,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=o.apply(e,r);void 0!==a&&t(a)}),r},{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),e}();function FP(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var LP="function"==typeof Symbol&&Symbol.observable||"@@observable",jP=function(){return Math.random().toString(36).substring(7).split("").join(".")},BP={INIT:"@@redux/INIT"+jP(),REPLACE:"@@redux/REPLACE"+jP()};function $P(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(FP(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(FP(1));return n($P)(e,t)}if("function"!=typeof e)throw new Error(FP(2));var i=e,o=t,a=[],s=a,l=!1;function u(){s===a&&(s=a.slice())}function c(){if(l)throw new Error(FP(3));return o}function d(e){if("function"!=typeof e)throw new Error(FP(4));if(l)throw new Error(FP(5));var t=!0;return u(),s.push(e),function(){if(t){if(l)throw new Error(FP(6));t=!1,u();var n=s.indexOf(e);s.splice(n,1),a=null}}}function f(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(FP(7));if(void 0===e.type)throw new Error(FP(8));if(l)throw new Error(FP(9));try{l=!0,o=i(o,e)}finally{l=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:BP.INIT}),(r={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!=typeof e)throw new Error(FP(10));i=e,f({type:BP.REPLACE})}})[LP]=function(){var e,t=d;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(FP(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[LP]=function(){return this},e},r}var zP=function(e,t){return e===t};function UP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UP(Object(n),!0).forEach(function(t){HP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function HP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var VP={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function WP(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:VP,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case hP:case mP:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case yP:return e=n.clientOffset,t=i.clientOffset,!e&&!t||e&&t&&e.x===t.x&&e.y===t.y?n:qP(qP({},n),{},{clientOffset:i.clientOffset});case bP:case vP:return VP;default:return n}}var GP="dnd-core/ADD_SOURCE",YP="dnd-core/ADD_TARGET",KP="dnd-core/REMOVE_SOURCE",ZP="dnd-core/REMOVE_TARGET";function QP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function XP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QP(Object(n),!0).forEach(function(t){JP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function JP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eF={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function tF(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eF,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case mP:return XP(XP({},n),{},{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case gP:return XP(XP({},n),{},{isSourcePublic:!0});case yP:return XP(XP({},n),{},{targetIds:i.targetIds});case ZP:return-1===n.targetIds.indexOf(i.targetId)?n:XP(XP({},n),{},{targetIds:(e=n.targetIds,t=i.targetId,e.filter(function(e){return e!==t}))});case vP:return XP(XP({},n),{},{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case bP:return XP(XP({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function nF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case GP:case YP:return e+1;case KP:case ZP:return e-1;default:return e}}var rF=[],iF=[];function oF(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case yP:break;case GP:case YP:case ZP:case KP:return rF;default:return iF}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,o=void 0===i?[]:i,a=function(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach(function(e,t){1===e&&i.push(t)}),i}(r,o),s=a.length>0||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zP;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(r,o);if(!s)return rF;var l=o[o.length-1],u=r[r.length-1];return l!==u&&(l&&a.push(l),u&&a.push(u)),a}function aF(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function sF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sF(Object(n),!0).forEach(function(t){uF(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sF(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cF(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:oF(r.dirtyHandlerIds,{type:i.type,payload:lF(lF({},i.payload),{},{prevTargetIds:(e=r,t="dragOperation.targetIds",n=[],t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:n||null},e))})}),dragOffset:WP(r.dragOffset,i),refCount:nF(r.refCount,i),dragOperation:tF(r.dragOperation,i),stateId:aF(r.stateId)}}function dF(e,t){return{x:e.x-t.x,y:e.y-t.y}}function fF(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function pF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}rF.__IS_NONE__=!0,iF.__IS_ALL__=!0;var hF=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pF(this,"store",void 0),pF(this,"registry",void 0),this.store=t,this.registry=n}return fF(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;pP("function"==typeof e,"listener must be a function."),pP(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe(function(){var i=t.store.getState(),o=i.stateId;try{var a=o===r||o===r+1&&!function(e,t){return e!==rF&&(e===iF||void 0===t||(n=e,t.filter(function(e){return n.indexOf(e)>-1})).length>0);var n}(i.dirtyHandlerIds,n);a||e()}finally{r=o}})}},{key:"subscribeToOffsetChange",value:function(e){var t=this;pP("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe(function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())})}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return pP(t,"Expected to find a valid source. sourceId=".concat(e)),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return pP(t,"Expected to find a valid target. targetId=".concat(e)),!(!this.isDragging()||this.didDrop())&&(TP(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e))}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return pP(t,"Expected to find a valid source. sourceId=".concat(e)),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){if(!e)return!1;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(r&&!TP(n,r))return!1;var i=this.getTargetIds();if(!i.length)return!1;var o=i.indexOf(e);return t?o===i.length-1:o>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,i=e.initialClientOffset,o=e.initialSourceClientOffset,r&&i&&o?dF((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),i):null;var e,t,n,r,i,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?dF(t,n):null;var e,t,n}}]),e}(),mF=0;function gF(e){return(gF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yF(e,t){t&&Array.isArray(e)?e.forEach(function(e){return yF(e,!1)}):pP("string"==typeof e||"symbol"===gF(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}const vF="undefined"!=typeof global?global:self,bF=vF.MutationObserver||vF.WebKitMutationObserver;function wF(e){return function(){const t=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(t),clearInterval(n),e()}}}const _F="function"==typeof bF?function(e){let t=1;const n=new bF(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}:wF;class xF{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}const EF=new class{enqueueTask(e){const{queue:t,requestFlush:n}=this;t.length||(n(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,n=e.length-this.index;t<n;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=_F(this.flush),this.requestErrorThrow=wF(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}},SF=new class{create(e){const t=this.freeTasks,n=t.length?t.pop():new xF(this.onError,e=>t[t.length]=e);return n.task=e,n}constructor(e){this.onError=e,this.freeTasks=[]}}(EF.registerPendingError);function kF(e){EF.enqueueTask(SF.create(e))}function TF(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function CF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function AF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return IF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function OF(e){var t=(mF++).toString();switch(e){case cP.SOURCE:return"S".concat(t);case cP.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function NF(e){switch(e[0]){case"S":return cP.SOURCE;case"T":return cP.TARGET;default:pP(!1,"Cannot parse handler ID: ".concat(e))}}function DF(e,t){var n=e.entries(),r=!1;do{var i=n.next(),o=i.done;if(AF(i.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var RF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),CF(this,"types",new Map),CF(this,"dragSources",new Map),CF(this,"dropTargets",new Map),CF(this,"pinnedSourceId",null),CF(this,"pinnedSource",null),CF(this,"store",void 0),this.store=t}return TF(e,[{key:"addSource",value:function(e,t){yF(e),function(e){pP("function"==typeof e.canDrag,"Expected canDrag to be a function."),pP("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),pP("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(cP.SOURCE,e,t);return this.store.dispatch(function(e){return{type:GP,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){yF(e,!0),function(e){pP("function"==typeof e.canDrop,"Expected canDrop to be a function."),pP("function"==typeof e.hover,"Expected hover to be a function."),pP("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(cP.TARGET,e,t);return this.store.dispatch(function(e){return{type:YP,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return DF(this.dragSources,e)||DF(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pP(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}},{key:"getTarget",value:function(e){return pP(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return pP(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return pP(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return NF(e)===cP.SOURCE}},{key:"isTargetId",value:function(e){return NF(e)===cP.TARGET}},{key:"removeSource",value:function(e){var t=this;pP(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:KP,payload:{sourceId:e}}}(e)),kF(function(){t.dragSources.delete(e),t.types.delete(e)})}},{key:"removeTarget",value:function(e){pP(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:ZP,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);pP(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){pP(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=OF(e);return this.types.set(r,t),e===cP.SOURCE?this.dragSources.set(r,n):e===cP.TARGET&&this.dropTargets.set(r,n),r}}]),e}();function MF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return $P(cF,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(arguments.length>3&&void 0!==arguments[3]&&arguments[3]),i=new hF(r,new RF(r)),o=new PP(r,i),a=e(o,t,n);return o.receiveBackend(a),o}var PF=["children"];function FF(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return LF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return LF(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LF(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jF(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var BF=0,$F=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),zF=k.memo(function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:UF(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[$F]||(i[$F]={dragDropManager:MF(e,t,n,r)});return i[$F]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(jF(e,PF)),r=FF(n,2),i=r[0],o=r[1];return k.useEffect(function(){if(o){var e=UF();return++BF,function(){0===--BF&&(e[$F]=null)}}},[]),w.jsx(fP.Provider,Object.assign({value:i},{children:t}),void 0)});function UF(){return"undefined"!=typeof global?global:window}var qF=k.memo(function(e){var t=e.connect,n=e.src;return k.useEffect(function(){if("undefined"!=typeof Image){var e=!1,r=new Image;return r.src=n,r.onload=function(){t(r),e=!0},function(){e&&t(null)}}}),null});function HF(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function VF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var WF=!1,GF=!1,YF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),VF(this,"internalMonitor",void 0),VF(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return HF(e,[{key:"receiveHandlerId",value:function(e){this.sourceId=e}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){pP(!WF,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return WF=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{WF=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;pP(!GF,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return GF=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{GF=!1}}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"isDraggingSource",value:function(e){return this.internalMonitor.isDraggingSource(e)}},{key:"isOverTarget",value:function(e,t){return this.internalMonitor.isOverTarget(e,t)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(e){return this.internalMonitor.subscribeToOffsetChange(e)}},{key:"canDragSource",value:function(e){return this.internalMonitor.canDragSource(e)}},{key:"canDropOnTarget",value:function(e){return this.internalMonitor.canDropOnTarget(e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function KF(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function ZF(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var QF=!1,XF=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ZF(this,"internalMonitor",void 0),ZF(this,"targetId",null),this.internalMonitor=t.getMonitor()}return KF(e,[{key:"receiveHandlerId",value:function(e){this.targetId=e}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;pP(!QF,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return QF=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{QF=!1}}},{key:"isOver",value:function(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function JF(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!k.isValidElement(t)){var r=t;return e(r,n),r}var i=t;return function(e){if("string"!=typeof e.type){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}(i),function(e,t){var n=e.ref;return pP("string"!=typeof n,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?k.cloneElement(e,{ref:function(e){tL(n,e),tL(t,e)}}):k.cloneElement(e,{ref:t})}(i,n?function(t){return e(t,n)}:e)}}function eL(e){var t={};return Object.keys(e).forEach(function(n){var r=e[n];if(n.endsWith("Ref"))t[n]=e[n];else{var i=JF(r);t[n]=function(){return i}}}),t}function tL(e,t){"function"==typeof e?e(t):e.current=t}function nL(e){return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rL(e){return null!==e&&"object"===nL(e)&&Object.prototype.hasOwnProperty.call(e,"current")}function iL(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var u=o[l];if(!s(u))return!1;var c=e[u],d=t[u];if(!1===(i=n?n.call(r,c,d,u):void 0)||void 0===i&&c!==d)return!1}return!0}function oL(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function aL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sL=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),aL(this,"hooks",eL({dragSource:function(e,t){n.clearDragSource(),n.dragSourceOptions=t||null,rL(e)?n.dragSourceRef=e:n.dragSourceNode=e,n.reconnectDragSource()},dragPreview:function(e,t){n.clearDragPreview(),n.dragPreviewOptions=t||null,rL(e)?n.dragPreviewRef=e:n.dragPreviewNode=e,n.reconnectDragPreview()}})),aL(this,"handlerId",null),aL(this,"dragSourceRef",null),aL(this,"dragSourceNode",void 0),aL(this,"dragSourceOptionsInternal",null),aL(this,"dragSourceUnsubscribe",void 0),aL(this,"dragPreviewRef",null),aL(this,"dragPreviewNode",void 0),aL(this,"dragPreviewOptionsInternal",null),aL(this,"dragPreviewUnsubscribe",void 0),aL(this,"lastConnectedHandlerId",null),aL(this,"lastConnectedDragSource",null),aL(this,"lastConnectedDragSourceOptions",null),aL(this,"lastConnectedDragPreview",null),aL(this,"lastConnectedDragPreviewOptions",null),aL(this,"backend",void 0),this.backend=t}return oL(e,[{key:"receiveHandlerId",value:function(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(e){this.dragSourceOptionsInternal=e}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(e){this.dragPreviewOptionsInternal=e}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e)}},{key:"reconnectDragPreview",value:function(){var e=this.dragPreview,t=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();t&&this.disconnectDragPreview(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=e,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,e,this.dragPreviewOptions)):this.lastConnectedDragPreview=e)}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!iL(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!iL(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();function lL(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function uL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cL=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uL(this,"hooks",eL({dropTarget:function(e,t){n.clearDropTarget(),n.dropTargetOptions=t,rL(e)?n.dropTargetRef=e:n.dropTargetNode=e,n.reconnect()}})),uL(this,"handlerId",null),uL(this,"dropTargetRef",null),uL(this,"dropTargetNode",void 0),uL(this,"dropTargetOptionsInternal",null),uL(this,"unsubscribeDropTarget",void 0),uL(this,"lastConnectedHandlerId",null),uL(this,"lastConnectedDropTarget",null),uL(this,"lastConnectedDropTargetOptions",null),uL(this,"backend",void 0),this.backend=t}return lL(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();var t=this.dropTarget;this.handlerId&&(t?e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions)):this.lastConnectedDropTarget=t)}},{key:"receiveHandlerId",value:function(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(e){this.dropTargetOptionsInternal=e}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!iL(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();function dL(e,t,n){var r=n.getRegistry(),i=r.addTarget(e,t);return[i,function(){return r.removeTarget(i)}]}function fL(e,t,n){var r=n.getRegistry(),i=r.addSource(e,t);return[i,function(){return r.removeSource(i)}]}function pL(e){return(pL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hL(e){var t=e.current;return null==t?null:t.decoratedRef?t.decoratedRef.current:t}function mL(e){return(t=e)&&t.prototype&&"function"==typeof t.prototype.render||function(e){var t,n=e;return"Symbol(react.forward_ref)"===(null==n||null===(t=n.$$typeof)||void 0===t?void 0:t.toString())}(e);var t}function gL(e){return"function"==typeof e}function yL(){}function vL(e){if(!function(e){return"object"===pL(e)&&null!==e}(e))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bL(e,t){return"string"==typeof e||"symbol"===pL(e)||!!t&&Array.isArray(e)&&e.every(function(e){return bL(e,!1)})}function wL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xL(e,t,n){return t&&_L(e.prototype,t),n&&_L(e,n),e}function EL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SL=function(){function e(t){wL(this,e),EL(this,"isDisposed",!1),EL(this,"action",void 0),this.action=gL(t)?t:yL}return xL(e,[{key:"dispose",value:function(){this.isDisposed||(this.action(),this.isDisposed=!0)}}],[{key:"isDisposable",value:function(e){return Boolean(e&&gL(e.dispose))}},{key:"_fixup",value:function(t){return e.isDisposable(t)?t:e.empty}},{key:"create",value:function(t){return new e(t)}}]),e}();EL(SL,"empty",{dispose:yL});var kL,TL,CL,AL,IL=function(){function e(){wL(this,e),EL(this,"isDisposed",!1),EL(this,"disposables",void 0);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this.disposables=n}return xL(e,[{key:"add",value:function(e){this.isDisposed?e.dispose():this.disposables.push(e)}},{key:"remove",value:function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),e.dispose())}return t}},{key:"clear",value:function(){if(!this.isDisposed){for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;for(var e=this.disposables.length,t=new Array(e),n=0;n<e;n++)t[n]=this.disposables[n];this.disposables=[];for(var r=0;r<e;r++)t[r].dispose()}}}]),e}(),OL=function(){function e(){wL(this,e),EL(this,"isDisposed",!1),EL(this,"current",void 0)}return xL(e,[{key:"getDisposable",value:function(){return this.current}},{key:"setDisposable",value:function(e){var t=this.isDisposed;if(!t){var n=this.current;this.current=e,n&&n.dispose()}t&&e&&e.dispose()}},{key:"dispose",value:function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.current;this.current=void 0,e&&e.dispose()}}}]),e}(),NL={exports:{}},DL={};function RL(){return TL||(TL=1,NL.exports=function(){if(kL)return DL;kL=1;var e="function"==typeof Symbol&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,s=e?Symbol.for("react.context"):60110,l=e?Symbol.for("react.async_mode"):60111,u=e?Symbol.for("react.concurrent_mode"):60111,c=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,f=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,h=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,g=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,v=e?Symbol.for("react.scope"):60119;function b(e){if("object"==typeof e&&null!==e){var f=e.$$typeof;switch(f){case t:switch(e=e.type){case l:case u:case r:case o:case i:case d:return e;default:switch(e=e&&e.$$typeof){case s:case c:case h:case p:case a:return e;default:return f}}case n:return f}}}function w(e){return b(e)===u}return DL.AsyncMode=l,DL.ConcurrentMode=u,DL.ContextConsumer=s,DL.ContextProvider=a,DL.Element=t,DL.ForwardRef=c,DL.Fragment=r,DL.Lazy=h,DL.Memo=p,DL.Portal=n,DL.Profiler=o,DL.StrictMode=i,DL.Suspense=d,DL.isAsyncMode=function(e){return w(e)||b(e)===l},DL.isConcurrentMode=w,DL.isContextConsumer=function(e){return b(e)===s},DL.isContextProvider=function(e){return b(e)===a},DL.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===t},DL.isForwardRef=function(e){return b(e)===c},DL.isFragment=function(e){return b(e)===r},DL.isLazy=function(e){return b(e)===h},DL.isMemo=function(e){return b(e)===p},DL.isPortal=function(e){return b(e)===n},DL.isProfiler=function(e){return b(e)===o},DL.isStrictMode=function(e){return b(e)===i},DL.isSuspense=function(e){return b(e)===d},DL.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===r||e===u||e===o||e===i||e===d||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===p||e.$$typeof===a||e.$$typeof===s||e.$$typeof===c||e.$$typeof===g||e.$$typeof===y||e.$$typeof===v||e.$$typeof===m)},DL.typeOf=b,DL}()),NL.exports}var ML=function(){if(AL)return CL;AL=1;var e=RL(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function o(n){return e.isMemo(n)?r:i[n.$$typeof]||t}i[e.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[e.Memo]=r;var a=Object.defineProperty,s=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,c=Object.getPrototypeOf,d=Object.prototype;return CL=function e(t,r,i){if("string"!=typeof r){if(d){var f=c(r);f&&f!==d&&e(t,f,i)}var p=s(r);l&&(p=p.concat(l(r)));for(var h=o(t),m=o(r),g=0;g<p.length;++g){var y=p[g];if(!(n[y]||i&&i[y]||m&&m[y]||h&&h[y])){var v=u(r,y);try{a(t,y,v)}catch(F0){}}}}return t},CL}();const PL=f(ML);function FL(e){return(FL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jL(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jL(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jL(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function BL(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function $L(e,t){return($L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zL(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F0){return!1}}();return function(){var n,r=qL(e);if(t){var i=qL(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===FL(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return UL(e)}(this,n)}}function UL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qL(e){return(qL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function VL(e){var t=e.DecoratedComponent,n=e.createHandler,r=e.createMonitor,i=e.createConnector,o=e.registerHandler,a=e.containerDisplayName,s=e.getType,l=e.collect,u=e.options.arePropsEqual,c=void 0===u?iL:u,d=t,f=t.displayName||t.name||"Component",p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$L(e,t)}(t,k.Component);var e=zL(t);function t(n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),HL(UL(r=e.call(this,n)),"decoratedRef",k.createRef()),HL(UL(r),"handlerId",void 0),HL(UL(r),"manager",void 0),HL(UL(r),"handlerMonitor",void 0),HL(UL(r),"handlerConnector",void 0),HL(UL(r),"handler",void 0),HL(UL(r),"disposable",void 0),HL(UL(r),"currentType",void 0),HL(UL(r),"handleChange",function(){var e=r.getCurrentState();iL(e,r.state)||r.setState(e)}),r.disposable=new OL,r.receiveProps(n),r.dispose(),r}return BL(t,[{key:"getHandlerId",value:function(){return this.handlerId}},{key:"getDecoratedComponentInstance",value:function(){return pP(this.decoratedRef.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.decoratedRef.current}},{key:"shouldComponentUpdate",value:function(e,t){return!c(e,this.props)||!iL(t,this.state)}},{key:"componentDidMount",value:function(){this.disposable=new OL,this.currentType=void 0,this.receiveProps(this.props),this.handleChange()}},{key:"componentDidUpdate",value:function(e){c(this.props,e)||(this.receiveProps(this.props),this.handleChange())}},{key:"componentWillUnmount",value:function(){this.dispose()}},{key:"receiveProps",value:function(e){this.handler&&(this.handler.receiveProps(e),this.receiveType(s(e)))}},{key:"receiveType",value:function(e){if(this.handlerMonitor&&this.manager&&this.handlerConnector&&e!==this.currentType){this.currentType=e;var t=LL(o(e,this.handler,this.manager),2),n=t[0],r=t[1];this.handlerId=n,this.handlerMonitor.receiveHandlerId(n),this.handlerConnector.receiveHandlerId(n);var i=this.manager.getMonitor().subscribeToStateChange(this.handleChange,{handlerIds:[n]});this.disposable.setDisposable(new IL(new SL(i),new SL(r)))}}},{key:"dispose",value:function(){this.disposable.dispose(),this.handlerConnector&&this.handlerConnector.receiveHandlerId(null)}},{key:"getCurrentState",value:function(){return this.handlerConnector?l(this.handlerConnector.hooks,this.handlerMonitor,this.props):{}}},{key:"render",value:function(){var e=this;return w.jsx(fP.Consumer,{children:function(t){var n=t.dragDropManager;return e.receiveDragDropManager(n),"undefined"!=typeof requestAnimationFrame&&requestAnimationFrame(function(){var t;return null===(t=e.handlerConnector)||void 0===t?void 0:t.reconnect()}),w.jsx(d,Object.assign({},e.props,e.getCurrentState(),{ref:mL(d)?e.decoratedRef:null}),void 0)}},void 0)}},{key:"receiveDragDropManager",value:function(e){void 0===this.manager&&(pP(void 0!==e,"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",f,f),void 0!==e&&(this.manager=e,this.handlerMonitor=r(e),this.handlerConnector=i(e.getBackend()),this.handler=n(this.handlerMonitor,this.decoratedRef)))}}]),t}();return HL(p,"DecoratedComponent",t),HL(p,"displayName","".concat(a,"(").concat(f,")")),PL(p,t)}function WL(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function GL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var YL=["canDrag","beginDrag","isDragging","endDrag"],KL=["beginDrag"],ZL=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),GL(this,"props",null),GL(this,"spec",void 0),GL(this,"monitor",void 0),GL(this,"ref",void 0),GL(this,"beginDrag",function(){if(i.props)return i.spec.beginDrag(i.props,i.monitor,i.ref.current)}),this.spec=t,this.monitor=n,this.ref=r}return WL(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"canDrag",value:function(){return!!this.props&&(!this.spec.canDrag||this.spec.canDrag(this.props,this.monitor))}},{key:"isDragging",value:function(e,t){return!!this.props&&(this.spec.isDragging?this.spec.isDragging(this.props,this.monitor):t===e.getSourceId())}},{key:"endDrag",value:function(){this.props&&this.spec.endDrag&&this.spec.endDrag(this.props,this.monitor,hL(this.ref))}}]),e}();function QL(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function XL(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var JL=["canDrop","hover","drop"],ej=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),XL(this,"props",null),XL(this,"spec",void 0),XL(this,"monitor",void 0),XL(this,"ref",void 0),this.spec=t,this.monitor=n,this.ref=r}return QL(e,[{key:"receiveProps",value:function(e){this.props=e}},{key:"receiveMonitor",value:function(e){this.monitor=e}},{key:"canDrop",value:function(){return!this.spec.canDrop||this.spec.canDrop(this.props,this.monitor)}},{key:"hover",value:function(){this.spec.hover&&this.props&&this.spec.hover(this.props,this.monitor,hL(this.ref))}},{key:"drop",value:function(){if(this.spec.drop)return this.spec.drop(this.props,this.monitor,this.ref.current)}}]),e}();function tj(e){return(tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nj(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function rj(e,t){return(rj=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ij(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(F0){return!1}}();return function(){var n,r=aj(e);if(t){var i=aj(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===tj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return oj(e)}(this,n)}}function oj(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aj(e){return(aj=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lj="undefined"!=typeof window?k.useLayoutEffect:k.useEffect;function uj(e){return(uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cj(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function dj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fj,pj,hj=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dj(this,"spec",void 0),dj(this,"monitor",void 0),dj(this,"connector",void 0),this.spec=t,this.monitor=n,this.connector=r}return cj(e,[{key:"beginDrag",value:function(){var e,t=this.spec,n=this.monitor;return null!==(e="object"===uj(t.item)?t.item:"function"==typeof t.item?t.item(n):{})&&void 0!==e?e:null}},{key:"canDrag",value:function(){var e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}},{key:"isDragging",value:function(e,t){var n=this.spec,r=this.monitor,i=n.isDragging;return i?i(r):t===e.getSourceId()}},{key:"endDrag",value:function(){var e=this.spec,t=this.monitor,n=this.connector,r=e.end;r&&r(t.getItem(),t),n.reconnect()}}]),e}();function mj(){var e=k.useContext(fP).dragDropManager;return pP(null!=e,"Expected drag drop context"),e}function gj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vj(e,t,n){var r=mj(),i=function(e,t,n){var r=k.useMemo(function(){return new hj(e,t,n)},[t,n]);return k.useEffect(function(){r.spec=e},[e]),r}(e,t,n),o=function(e){return k.useMemo(function(){var t=e.type;return pP(null!=t,"spec.type must be defined"),t},[e])}(e);lj(function(){if(null!=o){var e=gj(fL(o,i,r),2),a=e[0],s=e[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),s}},[r,t,n,i,o])}function bj(e){return function(e){if(Array.isArray(e))return wj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _j(e,t){var n=bj(t||[]);return null==t&&"function"!=typeof e&&n.push(e),k.useMemo(function(){return"function"==typeof e?e():e},n)}var xj=(pj||(pj=1,fj=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n}),fj);const Ej=f(xj);function Sj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tj(e,t,n){var r=Sj(k.useState(function(){return t(e)}),2),i=r[0],o=r[1],a=k.useCallback(function(){var r=t(e);Ej(i,r)||(o(r),n&&n())},[i,e,n]);return lj(a),[i,a]}function Cj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Aj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Aj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ij(e,t,n){return function(e,t,n){var r=Cj(Tj(e,t,n),2),i=r[0],o=r[1];return lj(function(){var t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(o,{handlerIds:[t]})},[e,o]),i}(t,e||function(){return{}},function(){return n.reconnect()})}function Oj(e){return k.useMemo(function(){return e.hooks.dragSource()},[e])}function Nj(e){return k.useMemo(function(){return e.hooks.dragPreview()},[e])}function Dj(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Rj(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mj=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rj(this,"spec",void 0),Rj(this,"monitor",void 0),this.spec=t,this.monitor=n}return Dj(e,[{key:"canDrop",value:function(){var e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}},{key:"hover",value:function(){var e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}},{key:"drop",value:function(){var e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}}]),e}();function Pj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fj(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lj(e,t,n){var r=mj(),i=function(e,t){var n=k.useMemo(function(){return new Mj(e,t)},[t]);return k.useEffect(function(){n.spec=e},[e]),n}(e,t),o=function(e){var t=e.accept;return k.useMemo(function(){return pP(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}(e);lj(function(){var e=Pj(dL(o,i,r),2),a=e[0],s=e[1];return t.receiveHandlerId(a),n.receiveHandlerId(a),s},[r,t,i,n,o.map(function(e){return e.toString()}).join("|")])}function jj(e){return k.useMemo(function(){return e.hooks.dropTarget()},[e])}function Bj(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const zj=Object.freeze(Object.defineProperty({__proto__:null,DndContext:fP,DndProvider:zF,DragLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pP("function"==typeof e,'Expected "collect" provided as the first argument to DragLayer to be a function that collects props to inject into the component. ',"Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer",e),pP(vL(t),'Expected "options" provided as the second argument to DragLayer to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-layer',t),function(n){var r=n,i=t.arePropsEqual,o=void 0===i?iL:i,a=r.displayName||r.name||"Component",s=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rj(e,t)}(n,k.Component);var t=ij(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return sj(oj(e=t.call.apply(t,[this].concat(i))),"manager",void 0),sj(oj(e),"isCurrentlyMounted",!1),sj(oj(e),"unsubscribeFromOffsetChange",void 0),sj(oj(e),"unsubscribeFromStateChange",void 0),sj(oj(e),"ref",k.createRef()),sj(oj(e),"handleChange",function(){if(e.isCurrentlyMounted){var t=e.getCurrentState();iL(t,e.state)||e.setState(t)}}),e}return nj(n,[{key:"getDecoratedComponentInstance",value:function(){return pP(this.ref.current,"In order to access an instance of the decorated component, it must either be a class component or use React.forwardRef()"),this.ref.current}},{key:"shouldComponentUpdate",value:function(e,t){return!o(e,this.props)||!iL(t,this.state)}},{key:"componentDidMount",value:function(){this.isCurrentlyMounted=!0,this.handleChange()}},{key:"componentWillUnmount",value:function(){this.isCurrentlyMounted=!1,this.unsubscribeFromOffsetChange&&(this.unsubscribeFromOffsetChange(),this.unsubscribeFromOffsetChange=void 0),this.unsubscribeFromStateChange&&(this.unsubscribeFromStateChange(),this.unsubscribeFromStateChange=void 0)}},{key:"render",value:function(){var e=this;return w.jsx(fP.Consumer,{children:function(t){var n=t.dragDropManager;return void 0===n?null:(e.receiveDragDropManager(n),e.isCurrentlyMounted?w.jsx(r,Object.assign({},e.props,e.state,{ref:mL(r)?e.ref:null}),void 0):null)}},void 0)}},{key:"receiveDragDropManager",value:function(e){if(void 0===this.manager){this.manager=e,pP("object"===tj(e),"Could not find the drag and drop manager in the context of %s. Make sure to render a DndProvider component in your top-level component. Read more: http://react-dnd.github.io/react-dnd/docs/troubleshooting#could-not-find-the-drag-and-drop-manager-in-the-context",a,a);var t=this.manager.getMonitor();this.unsubscribeFromOffsetChange=t.subscribeToOffsetChange(this.handleChange),this.unsubscribeFromStateChange=t.subscribeToStateChange(this.handleChange)}}},{key:"getCurrentState",value:function(){if(!this.manager)return{};var t=this.manager.getMonitor();return e(t,this.props)}}]),n}();return sj(s,"displayName","DragLayer(".concat(a,")")),sj(s,"DecoratedComponent",n),PL(s,n)}},DragPreviewImage:qF,DragSource:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e;"function"!=typeof e&&(pP(bL(e),'Expected "type" provided as the first argument to DragSource to be a string, or a function that returns a string given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',e),i=function(){return e}),pP(vL(t),'Expected "spec" provided as the second argument to DragSource to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',t);var o=function(e){return Object.keys(e).forEach(function(t){pP(YL.indexOf(t)>-1,'Expected the drag source specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',YL.join(", "),t),pP("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),KL.forEach(function(t){pP("function"==typeof e[t],"Expected %s in the drag source specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source",t,t,e[t])}),function(t,n){return new ZL(e,t,n)}}(t);return pP("function"==typeof n,'Expected "collect" provided as the third argument to DragSource to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),pP(vL(r),'Expected "options" provided as the fourth argument to DragSource to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source',n),function(e){return VL({containerDisplayName:"DragSource",createHandler:o,registerHandler:fL,createConnector:function(e){return new sL(e)},createMonitor:function(e){return new YF(e)},DecoratedComponent:e,getType:i,collect:n,options:r})}},DropTarget:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=e;"function"!=typeof e&&(pP(bL(e,!0),'Expected "type" provided as the first argument to DropTarget to be a string, an array of strings, or a function that returns either given the current props. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',e),i=function(){return e}),pP(vL(t),'Expected "spec" provided as the second argument to DropTarget to be a plain object. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',t);var o=function(e){return Object.keys(e).forEach(function(t){pP(JL.indexOf(t)>-1,'Expected the drop target specification to only have some of the following keys: %s. Instead received a specification with an unexpected "%s" key. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',JL.join(", "),t),pP("function"==typeof e[t],"Expected %s in the drop target specification to be a function. Instead received a specification with %s: %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target",t,t,e[t])}),function(t,n){return new ej(e,t,n)}}(t);return pP("function"==typeof n,'Expected "collect" provided as the third argument to DropTarget to be a function that returns a plain object of props to inject. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),pP(vL(r),'Expected "options" provided as the fourth argument to DropTarget to be a plain object when specified. Instead, received %s. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target',n),function(e){return VL({containerDisplayName:"DropTarget",createHandler:o,registerHandler:dL,createMonitor:function(e){return new XF(e)},createConnector:function(e){return new cL(e)},DecoratedComponent:e,getType:i,collect:n,options:r})}},useDrag:function(e,t){var n=_j(e,t);pP(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var r,i=(r=mj(),k.useMemo(function(){return new YF(r)},[r])),o=function(e,t){var n=mj(),r=k.useMemo(function(){return new sL(n.getBackend())},[n]);return lj(function(){return r.dragSourceOptions=e||null,r.reconnect(),function(){return r.disconnectDragSource()}},[r,e]),lj(function(){return r.dragPreviewOptions=t||null,r.reconnect(),function(){return r.disconnectDragPreview()}},[r,t]),r}(n.options,n.previewOptions);return vj(n,i,o),[Ij(n.collect,i,o),Oj(o),Nj(o)]},useDragDropManager:mj,useDragLayer:function(e){var t=mj().getMonitor(),n=Bj(Tj(t,e),2),r=n[0],i=n[1];return k.useEffect(function(){return t.subscribeToOffsetChange(i)}),k.useEffect(function(){return t.subscribeToStateChange(i)}),r},useDrop:function(e,t){var n,r=_j(e,t),i=(n=mj(),k.useMemo(function(){return new XF(n)},[n])),o=function(e){var t=mj(),n=k.useMemo(function(){return new cL(t.getBackend())},[t]);return lj(function(){return n.dropTargetOptions=e||null,n.reconnect(),function(){return n.disconnectDropTarget()}},[e]),n}(r.options);return Lj(r,i,o),[Ij(r.collect,i,o),jj(o)]}},Symbol.toStringTag,{value:"Module"})),Uj=p(zj),qj=function(e,t){return{_isMBTransition:!0,event:e,check:t}};var Hj=qj("touchstart",function(e){return null!=e.touches}),Vj=qj("dragstart",function(e){return!!e.type&&(-1!==e.type.indexOf("drag")||-1!==e.type.indexOf("drop"))}),Wj=qj("mousedown",function(e){return!!e.type&&(-1===e.type.indexOf("touch")&&-1!==e.type.indexOf("mouse"))});function Gj(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return Yj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yj(e,t)}(e))){var t=0,n=function(){};return{s:n,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function Yj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Kj=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.register=function(e){t.previews.push(e)},this.unregister=function(e){for(var n;-1!==(n=t.previews.indexOf(e));)t.previews.splice(n,1)},this.backendChanged=function(e){var n,r=Gj(t.previews);try{for(r.s();!(n=r.n()).done;){n.value.backendChanged(e)}}catch(HOt){r.e(HOt)}finally{r.f()}},this.previews=[]};function Zj(e){return function(e){if(Array.isArray(e))return Qj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qj(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qj(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xj=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setup=function(){if("undefined"!=typeof window){if(i.constructor.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");i.constructor.isSetUp=!0,i.addEventListeners(window),i.backends[i.current].instance.setup()}},this.teardown=function(){"undefined"!=typeof window&&(i.constructor.isSetUp=!1,i.removeEventListeners(window),i.backends[i.current].instance.teardown())},this.connectDragSource=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.connectBackend("connectDragSource",t)},this.connectDragPreview=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.connectBackend("connectDragPreview",t)},this.connectDropTarget=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.connectBackend("connectDropTarget",t)},this.previewEnabled=function(){return i.backends[i.current].preview},this.addEventListeners=function(e){i.backends.forEach(function(t){t.transition&&e.addEventListener(t.transition.event,i.backendSwitcher,!0)})},this.removeEventListeners=function(e){i.backends.forEach(function(t){t.transition&&e.removeEventListener(t.transition.event,i.backendSwitcher,!0)})},this.backendSwitcher=function(e){var t=i.current,n=0;if(i.backends.some(function(t){return n!==i.current&&t.transition&&t.transition.check(e)?(i.current=n,!0):(n+=1,!1)}),i.current!==t){i.backends[t].instance.teardown(),Object.keys(i.nodes).forEach(function(e){var t=i.nodes[e];t.handler(),t.handler=i.callBackend(t.func,t.args)}),i.previews.backendChanged(i);var r=i.backends[i.current];if(r.instance.setup(),r.skipDispatchOnTransition)return;var o=null;try{o=new e.constructor(e.type,e)}catch(a){(o=document.createEvent("Event")).initEvent(e.type,e.bubbles,e.cancelable)}e.target.dispatchEvent(o)}},this.callBackend=function(e,t){var n;return(n=i.backends[i.current].instance)[e].apply(n,Zj(t))},this.connectBackend=function(e,t){var n="".concat(e,"_").concat(t[0]),r=i.callBackend(e,t);return i.nodes[n]={func:e,args:t,handler:r},function(){var e,t=(e=i.nodes[n]).handler.apply(e,arguments);return delete i.nodes[n],t}};var o=Object.assign({backends:[]},r||{});if(o.backends.length<1)throw new Error("You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)\n        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx");this.current=0,this.previews=new Kj,this.backends=[],o.backends.forEach(function(e){if(!e.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(e));var r=e.transition;if(r&&!r._isMBTransition)throw new Error("You must specify a valid 'transition' property (either undefined or the return of 'createTransition') in your Backend entry: ".concat(e));i.backends.push({instance:e.backend(t,n,e.options),preview:e.preview||!1,transition:r,skipDispatchOnTransition:Boolean(e.skipDispatchOnTransition)})}),this.nodes={}};const Jj=function(e,t,n){return new Xj(e,t,n)},eB=Object.freeze(Object.defineProperty({__proto__:null,HTML5DragTransition:Vj,MouseTransition:Wj,MultiBackend:Xj,PreviewList:Kj,TouchTransition:Hj,createTransition:qj,default:Jj},Symbol.toStringTag,{value:"Module"}));var tB,nB,rB,iB,oB,aB={exports:{}};function sB(){if(nB)return tB;nB=1;return tB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function lB(){if(iB)return rB;iB=1;var e=sB();function t(){}function n(){}return n.resetWarningCache=t,rB=function(){function r(t,n,r,i,o,a){if(a!==e){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function i(){return r}r.isRequired=r;var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}function uB(){return oB||(oB=1,aB.exports=lB()()),aB.exports}const cB=f(uB());var dB;!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(dB||(dB={}));var fB="dnd-core/INIT_COORDS",pB="dnd-core/BEGIN_DRAG",hB="dnd-core/PUBLISH_DRAG_SOURCE",mB="dnd-core/HOVER",gB="dnd-core/DROP",yB="dnd-core/END_DRAG";function vB(e,t){return{type:fB,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function bB(e){return(bB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wB(e){return"object"===bB(e)}var _B={type:fB,payload:{clientOffset:null,sourceClientOffset:null}};function xB(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{publishSource:!0},r=n.publishSource,i=void 0===r||r,o=n.clientOffset,a=n.getSourceClientOffset,s=e.getMonitor(),l=e.getRegistry();e.dispatch(vB(o)),function(e,t,n){pP(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(e){pP(n.getSource(e),"Expected sourceIds to be registered.")})}(t,s,l);var u=function(e,t){for(var n=null,r=e.length-1;r>=0;r--)if(t.canDragSource(e[r])){n=e[r];break}return n}(t,s);if(null!==u){var c=null;if(o){if(!a)throw new Error("getSourceClientOffset must be defined");!function(e){pP("function"==typeof e,"When clientOffset is provided, getSourceClientOffset must be a function.")}(a),c=a(u)}e.dispatch(vB(o,c));var d=l.getSource(u).beginDrag(s,u);!function(e){pP(wB(e),"Item must be an object.")}(d),l.pinSource(u);var f=l.getSourceType(u);return{type:pB,payload:{itemType:f,item:d,sourceId:u,clientOffset:o||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}e.dispatch(_B)}}function EB(e){return function(){if(e.getMonitor().isDragging())return{type:hB}}}function SB(e,t){return null===t?null===e:Array.isArray(e)?e.some(function(e){return e===t}):e===t}function kB(e){return function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).clientOffset;!function(e){pP(Array.isArray(e),"Expected targetIds to be an array.")}(t);var r=t.slice(0),i=e.getMonitor(),o=e.getRegistry();return function(e,t,n){pP(t.isDragging(),"Cannot call hover while not dragging."),pP(!t.didDrop(),"Cannot call hover after drop.");for(var r=0;r<e.length;r++){var i=e[r];pP(e.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array."),pP(n.getTarget(i),"Expected targetIds to be registered.")}}(r,i,o),function(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r];SB(t.getTargetType(i),n)||e.splice(r,1)}}(r,o,i.getItemType()),function(e,t,n){e.forEach(function(e){n.getTarget(e).hover(t,e)})}(r,i,o),{type:mB,payload:{targetIds:r,clientOffset:n||null}}}}function TB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function CB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?TB(Object(n),!0).forEach(function(t){AB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):TB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function AB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IB(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.getMonitor(),r=e.getRegistry();!function(e){pP(e.isDragging(),"Cannot call drop while not dragging."),pP(!e.didDrop(),"Cannot call drop twice during one drag operation.")}(n);var i=function(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}(n);i.forEach(function(i,o){var a=function(e,t,n,r){var i=n.getTarget(e),o=i?i.drop(r,e):void 0;(function(e){pP(void 0===e||wB(e),"Drop result must either be an object or undefined.")})(o),void 0===o&&(o=0===t?{}:r.getDropResult());return o}(i,o,r,n),s={type:gB,payload:{dropResult:CB(CB({},t),a)}};e.dispatch(s)})}}function OB(e){return function(){var t=e.getMonitor(),n=e.getRegistry();!function(e){pP(e.isDragging(),"Cannot call endDrag while not dragging.")}(t);var r=t.getSourceId();null!=r&&(n.getSource(r,!0).endDrag(t,r),n.unpinSource());return{type:yB}}}var NB=function(e,t){return e===t};function DB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function RB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DB(Object(n),!0).forEach(function(t){MB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function MB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var PB={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function FB(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PB,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case fB:case pB:return{initialSourceClientOffset:i.sourceClientOffset,initialClientOffset:i.clientOffset,clientOffset:i.clientOffset};case mB:return e=n.clientOffset,t=i.clientOffset,!e&&!t||e&&t&&e.x===t.x&&e.y===t.y?n:RB(RB({},n),{},{clientOffset:i.clientOffset});case yB:case gB:return PB;default:return n}}var LB="dnd-core/ADD_SOURCE",jB="dnd-core/ADD_TARGET",BB="dnd-core/REMOVE_SOURCE",$B="dnd-core/REMOVE_TARGET";function zB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function UB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zB(Object(n),!0).forEach(function(t){qB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HB={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function VB(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:HB,r=arguments.length>1?arguments[1]:void 0,i=r.payload;switch(r.type){case pB:return UB(UB({},n),{},{itemType:i.itemType,item:i.item,sourceId:i.sourceId,isSourcePublic:i.isSourcePublic,dropResult:null,didDrop:!1});case hB:return UB(UB({},n),{},{isSourcePublic:!0});case mB:return UB(UB({},n),{},{targetIds:i.targetIds});case $B:return-1===n.targetIds.indexOf(i.targetId)?n:UB(UB({},n),{},{targetIds:(e=n.targetIds,t=i.targetId,e.filter(function(e){return e!==t}))});case gB:return UB(UB({},n),{},{dropResult:i.dropResult,didDrop:!0,targetIds:[]});case yB:return UB(UB({},n),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function WB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case LB:case jB:return e+1;case BB:case $B:return e-1;default:return e}}var GB=[],YB=[];function KB(){var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case mB:break;case LB:case jB:case $B:case BB:return GB;default:return YB}var t=e.payload,n=t.targetIds,r=void 0===n?[]:n,i=t.prevTargetIds,o=void 0===i?[]:i,a=function(e,t){var n=new Map,r=function(e){n.set(e,n.has(e)?n.get(e)+1:1)};e.forEach(r),t.forEach(r);var i=[];return n.forEach(function(e,t){1===e&&i.push(t)}),i}(r,o),s=a.length>0||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NB;if(e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!n(e[r],t[r]))return!1;return!0}(r,o);if(!s)return GB;var l=o[o.length-1],u=r[r.length-1];return l!==u&&(l&&a.push(l),u&&a.push(u)),a}function ZB(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1}function QB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function XB(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QB(Object(n),!0).forEach(function(t){JB(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QB(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function JB(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function e$(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:KB(r.dirtyHandlerIds,{type:i.type,payload:XB(XB({},i.payload),{},{prevTargetIds:(e=r,t="dragOperation.targetIds",n=[],t.split(".").reduce(function(e,t){return e&&e[t]?e[t]:n||null},e))})}),dragOffset:FB(r.dragOffset,i),refCount:WB(r.refCount,i),dragOperation:VB(r.dragOperation,i),stateId:ZB(r.stateId)}}function t$(e,t){return{x:e.x-t.x,y:e.y-t.y}}function n$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}GB.__IS_NONE__=!0,YB.__IS_ALL__=!0;var r$=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.registry=n}return n$(e,[{key:"subscribeToStateChange",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{handlerIds:void 0}).handlerIds;pP("function"==typeof e,"listener must be a function."),pP(void 0===n||Array.isArray(n),"handlerIds, when specified, must be an array of strings.");var r=this.store.getState().stateId;return this.store.subscribe(function(){var i=t.store.getState(),o=i.stateId;try{var a=o===r||o===r+1&&!function(e,t){return e!==GB&&(e===YB||void 0===t||(n=e,t.filter(function(e){return n.indexOf(e)>-1})).length>0);var n}(i.dirtyHandlerIds,n);a||e()}finally{r=o}})}},{key:"subscribeToOffsetChange",value:function(e){var t=this;pP("function"==typeof e,"listener must be a function.");var n=this.store.getState().dragOffset;return this.store.subscribe(function(){var r=t.store.getState().dragOffset;r!==n&&(n=r,e())})}},{key:"canDragSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e);return pP(t,"Expected to find a valid source."),!this.isDragging()&&t.canDrag(this,e)}},{key:"canDropOnTarget",value:function(e){if(!e)return!1;var t=this.registry.getTarget(e);return pP(t,"Expected to find a valid target."),!(!this.isDragging()||this.didDrop())&&(SB(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e))}},{key:"isDragging",value:function(){return Boolean(this.getItemType())}},{key:"isDraggingSource",value:function(e){if(!e)return!1;var t=this.registry.getSource(e,!0);return pP(t,"Expected to find a valid source."),!(!this.isDragging()||!this.isSourcePublic())&&(this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e))}},{key:"isOverTarget",value:function(e){if(!e)return!1;var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shallow:!1}).shallow;if(!this.isDragging())return!1;var n=this.registry.getTargetType(e),r=this.getItemType();if(r&&!SB(n,r))return!1;var i=this.getTargetIds();if(!i.length)return!1;var o=i.indexOf(e);return t?o===i.length-1:o>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return e=this.store.getState().dragOffset,r=e.clientOffset,i=e.initialClientOffset,o=e.initialSourceClientOffset,r&&i&&o?t$((n=o,{x:(t=r).x+n.x,y:t.y+n.y}),i):null;var e,t,n,r,i,o}},{key:"getDifferenceFromInitialOffset",value:function(){return e=this.store.getState().dragOffset,t=e.clientOffset,n=e.initialClientOffset,t&&n?t$(t,n):null;var e,t,n}}]),e}(),i$=0;function o$(e){return(o$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a$(e,t){t&&Array.isArray(e)?e.forEach(function(e){return a$(e,!1)}):pP("string"==typeof e||"symbol"===o$(e),t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}function s$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function l$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c$(e){var t=(i$++).toString();switch(e){case dB.SOURCE:return"S".concat(t);case dB.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e))}}function d$(e){switch(e[0]){case"S":return dB.SOURCE;case"T":return dB.TARGET;default:pP(!1,"Cannot parse handler ID: ".concat(e))}}function f$(e,t){var n=e.entries(),r=!1;do{var i=n.next(),o=i.done;if(l$(i.value,2)[1]===t)return!0;r=!!o}while(!r);return!1}var p$=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=t}return s$(e,[{key:"addSource",value:function(e,t){a$(e),function(e){pP("function"==typeof e.canDrag,"Expected canDrag to be a function."),pP("function"==typeof e.beginDrag,"Expected beginDrag to be a function."),pP("function"==typeof e.endDrag,"Expected endDrag to be a function.")}(t);var n=this.addHandler(dB.SOURCE,e,t);return this.store.dispatch(function(e){return{type:LB,payload:{sourceId:e}}}(n)),n}},{key:"addTarget",value:function(e,t){a$(e,!0),function(e){pP("function"==typeof e.canDrop,"Expected canDrop to be a function."),pP("function"==typeof e.hover,"Expected hover to be a function."),pP("function"==typeof e.drop,"Expected beginDrag to be a function.")}(t);var n=this.addHandler(dB.TARGET,e,t);return this.store.dispatch(function(e){return{type:jB,payload:{targetId:e}}}(n)),n}},{key:"containsHandler",value:function(e){return f$(this.dragSources,e)||f$(this.dropTargets,e)}},{key:"getSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return pP(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}},{key:"getTarget",value:function(e){return pP(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}},{key:"getSourceType",value:function(e){return pP(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}},{key:"getTargetType",value:function(e){return pP(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}},{key:"isSourceId",value:function(e){return d$(e)===dB.SOURCE}},{key:"isTargetId",value:function(e){return d$(e)===dB.TARGET}},{key:"removeSource",value:function(e){var t=this;pP(this.getSource(e),"Expected an existing source."),this.store.dispatch(function(e){return{type:BB,payload:{sourceId:e}}}(e)),kF(function(){t.dragSources.delete(e),t.types.delete(e)})}},{key:"removeTarget",value:function(e){pP(this.getTarget(e),"Expected an existing target."),this.store.dispatch(function(e){return{type:$B,payload:{targetId:e}}}(e)),this.dropTargets.delete(e),this.types.delete(e)}},{key:"pinSource",value:function(e){var t=this.getSource(e);pP(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}},{key:"unpinSource",value:function(){pP(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(e,t,n){var r=c$(e);return this.types.set(r,t),e===dB.SOURCE?this.dragSources.set(r,n):e===dB.TARGET&&this.dropTargets.set(r,n),r}}]),e}();function h$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}var m$=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isSetUp=!1,this.handleRefCountChange=function(){var e=t.store.getState().refCount>0;t.backend&&(e&&!t.isSetUp?(t.backend.setup(),t.isSetUp=!0):!e&&t.isSetUp&&(t.backend.teardown(),t.isSetUp=!1))};var r=function(e){var t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return $P(e$,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n);this.store=r,this.monitor=new r$(r,new p$(r)),r.subscribe(this.handleRefCountChange)}return h$(e,[{key:"receiveBackend",value:function(e){this.backend=e}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var e=this,t=this.store.dispatch;var n=function(e){return{beginDrag:xB(e),publishDragSource:EB(e),hover:kB(e),drop:IB(e),endDrag:OB(e)}}(this);return Object.keys(n).reduce(function(r,i){var o,a=n[i];return r[i]=(o=a,function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=o.apply(e,r);void 0!==a&&t(a)}),r},{})}},{key:"dispatch",value:function(e){this.store.dispatch(e)}}]),e}();function g$(e,t,n,r){var i=new m$(r),o=e(i,t,n);return i.receiveBackend(o),i}var y$=k.createContext({dragDropManager:void 0});function v$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w$(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _$=0,x$=k.memo(function(e){var t=e.children,n=function(e){if("manager"in e){return[{dragDropManager:e.manager},!1]}var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S$(),n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=t;i[E$]||(i[E$]=function(e,t,n,r){return{dragDropManager:g$(e,t,n,r)}}(e,t,n,r));return i[E$]}(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[t,n]}(w$(e,["children"])),r=v$(n,2),i=r[0],o=r[1];return k.useEffect(function(){return o&&_$++,function(){o&&(0===--_$&&(S$()[E$]=null))}},[]),k.createElement(y$.Provider,{value:i},t)});x$.displayName="DndProvider";var E$=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");function S$(){return"undefined"!=typeof global?global:window}var k$="undefined"!=typeof window?k.useLayoutEffect:k.useEffect;function T$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O$(e){var t=function(){var e=k.useContext(y$).dragDropManager;return pP(null!=e,"Expected drag drop context"),e}().getMonitor(),n=function(e,t,n){var r=T$(k.useState(function(){return t(e)}),2),i=r[0],o=r[1],a=k.useCallback(function(){var n=t(e);iL(i,n)||o(n)},[i,e,n]);return k$(a,[]),[i,a]}(t,e),r=A$(n,2),i=r[0],o=r[1];return k.useEffect(function(){return t.subscribeToOffsetChange(o)}),k.useEffect(function(){return t.subscribeToStateChange(o)}),i}function N$(){return N$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N$.apply(this,arguments)}var D$=T.createContext(null),R$=function(e){var t=k.useRef();return T.createElement(D$.Provider,{value:t.current},T.createElement(x$,N$({backend:Jj},e)),T.createElement("div",{ref:t}))};R$.propTypes={manager:cB.any,context:cB.any,options:cB.any,debugMode:cB.bool};var M$=function(){var e,t,n=O$(function(e){return{currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging(),itemType:e.getItemType(),item:e.getItem()}});return n.isDragging&&null!==n.currentOffset?{display:!0,itemType:n.itemType,item:n.item,style:(e=n.currentOffset,t="translate(".concat(e.x,"px, ").concat(e.y,"px)"),{pointerEvents:"none",position:"fixed",top:0,left:0,transform:t,WebkitTransform:t})}:{display:!1}},P$=T.createContext();function F$(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var L$=function(e){var t,n=M$(),r=n.display,i=F$(n,["display"]);return r?(t=e.children&&"function"==typeof e.children?e.children(i):e.children?e.children:e.generator(i),T.createElement(P$.Provider,{value:i},t)):null};function j$(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B$(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B$(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}L$.propTypes={generator:cB.func,children:cB.oneOfType([cB.node,cB.func])};var $$=function(){var e=j$(k.useState(!1),2),t=e[0],n=e[1],r=k.useContext(y$);return k.useEffect(function(){var e=r.dragDropManager.getBackend(),t={backendChanged:function(e){n(e.previewEnabled())}};return n(e.previewEnabled()),e.previews.register(t),function(){e.previews.unregister(t)}},[r,n]),t},z$=function(e){var t=$$(),n=k.useContext(D$);if(!t)return null;var r=T.createElement(L$,e);return n?Q.createPortal(r,n):r};z$.Context=P$,z$.propTypes=L$.propTypes;const U$=p(Object.freeze(Object.defineProperty({__proto__:null,DndProvider:R$,HTML5DragTransition:Vj,MouseTransition:Wj,Preview:z$,PreviewContext:P$,TouchTransition:Hj,createTransition:qj,default:Jj,usePreview:function(){var e=$$(),t=M$();return e?t:{display:!1}}},Symbol.toStringTag,{value:"Module"})));var q$={};function H$(e){var t=null;return function(){return null==t&&(t=e()),t}}function V$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function W$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G$=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),W$(this,"entered",[]),W$(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return V$(e,[{key:"enter",value:function(e){var t=this,n=this.entered.length;return this.entered=function(e,t){var n=new Set,r=function(e){return n.add(e)};e.forEach(r),t.forEach(r);var i=[];return n.forEach(function(e){return i.push(e)}),i}(this.entered.filter(function(n){return t.isNodeInDocument(n)&&(!n.contains||n.contains(e))}),[e]),0===n&&this.entered.length>0}},{key:"leave",value:function(e){var t,n,r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),n=e,t.filter(function(e){return e!==n})),r>0&&0===this.entered.length}},{key:"reset",value:function(){this.entered=[]}}]),e}(),Y$=H$(function(){return/firefox/i.test(navigator.userAgent)}),K$=H$(function(){return Boolean(window.safari)});function Z$(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Q$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X$=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Q$(this,"xs",void 0),Q$(this,"ys",void 0),Q$(this,"c1s",void 0),Q$(this,"c2s",void 0),Q$(this,"c3s",void 0);for(var r=t.length,i=[],o=0;o<r;o++)i.push(o);i.sort(function(e,n){return t[e]<t[n]?-1:1});for(var a,s,l=[],u=[],c=0;c<r-1;c++)a=t[c+1]-t[c],s=n[c+1]-n[c],l.push(a),u.push(s/a);for(var d=[u[0]],f=0;f<l.length-1;f++){var p=u[f],h=u[f+1];if(p*h<=0)d.push(0);else{a=l[f];var m=l[f+1],g=a+m;d.push(3*g/((g+m)/p+(g+a)/h))}}d.push(u[u.length-1]);for(var y,v=[],b=[],w=0;w<d.length-1;w++){y=u[w];var _=d[w],x=1/l[w],E=_+d[w+1]-y-y;v.push((y-_-E)*x),b.push(E*x*x)}this.xs=t,this.ys=n,this.c1s=d,this.c2s=v,this.c3s=b}return Z$(e,[{key:"interpolate",value:function(e){var t=this.xs,n=this.ys,r=this.c1s,i=this.c2s,o=this.c3s,a=t.length-1;if(e===t[a])return n[a];for(var s,l=0,u=o.length-1;l<=u;){var c=t[s=Math.floor(.5*(l+u))];if(c<e)l=s+1;else{if(!(c>e))return n[s];u=s-1}}var d=e-t[a=Math.max(0,u)],f=d*d;return n[a]+r[a]*d+i[a]*f+o[a]*d*f}}]),e}();function J$(e){var t=1===e.nodeType?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}function ez(e){return{x:e.clientX,y:e.clientY}}function tz(e,t,n,r,i){var o,a,s,l="IMG"===(o=t).nodeName&&(Y$()||!(null!==(a=document.documentElement)&&void 0!==a&&a.contains(o))),u=J$(l?e:t),c={x:n.x-u.x,y:n.y-u.y},d=e.offsetWidth,f=e.offsetHeight,p=r.anchorX,h=r.anchorY,m=function(e,t,n,r){var i=e?t.width:n,o=e?t.height:r;return K$()&&e&&(o/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:o}}(l,t,d,f),g=m.dragPreviewWidth,y=m.dragPreviewHeight,v=i.offsetX,b=i.offsetY,w=0===b||b;return{x:0===v||v?v:new X$([0,.5,1],[c.x,c.x/d*g,c.x+g-d]).interpolate(p),y:w?b:(s=new X$([0,.5,1],[c.y,c.y/f*y,c.y+y-f]).interpolate(h),K$()&&l&&(s+=(window.devicePixelRatio-1)*y),s)}}var nz="__NATIVE_FILE__",rz="__NATIVE_URL__",iz="__NATIVE_TEXT__",oz="__NATIVE_HTML__";const az=Object.freeze(Object.defineProperty({__proto__:null,FILE:nz,HTML:oz,TEXT:iz,URL:rz},Symbol.toStringTag,{value:"Module"}));function sz(e,t,n){var r=t.reduce(function(t,n){return t||e.getData(n)},"");return null!=r?r:n}var lz;function uz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var cz=(uz(lz={},nz,{exposeProperties:{files:function(e){return Array.prototype.slice.call(e.files)},items:function(e){return e.items},dataTransfer:function(e){return e}},matchesTypes:["Files"]}),uz(lz,oz,{exposeProperties:{html:function(e,t){return sz(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Html","text/html"]}),uz(lz,rz,{exposeProperties:{urls:function(e,t){return sz(e,t,"").split("\n")},dataTransfer:function(e){return e}},matchesTypes:["Url","text/uri-list"]}),uz(lz,iz,{exposeProperties:{text:function(e,t){return sz(e,t,"")},dataTransfer:function(e){return e}},matchesTypes:["Text","text/plain"]}),lz);function dz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function fz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pz=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fz(this,"item",void 0),fz(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return dz(e,[{key:"initializeExposedProperties",value:function(){var e=this;Object.keys(this.config.exposeProperties).forEach(function(t){Object.defineProperty(e.item,t,{configurable:!0,enumerable:!0,get:function(){return null}})})}},{key:"loadDataTransfer",value:function(e){var t=this;if(e){var n={};Object.keys(this.config.exposeProperties).forEach(function(r){n[r]={value:t.config.exposeProperties[r](e,t.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,n)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(e,t){return t===e.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function hz(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(cz).filter(function(e){return cz[e].matchesTypes.some(function(e){return t.indexOf(e)>-1})})[0]||null}function mz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function gz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var yz=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gz(this,"ownerDocument",null),gz(this,"globalContext",void 0),gz(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=n}return mz(e,[{key:"window",get:function(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){var e;return null!==(e=this.globalContext)&&void 0!==e&&e.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var e;return(null===(e=this.optionsArgs)||void 0===e?void 0:e.rootElement)||this.window}}]),e}();function vz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bz(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(n),!0).forEach(function(t){_z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vz(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function _z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xz,Ez=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_z(this,"options",void 0),_z(this,"actions",void 0),_z(this,"monitor",void 0),_z(this,"registry",void 0),_z(this,"enterLeaveCounter",void 0),_z(this,"sourcePreviewNodes",new Map),_z(this,"sourcePreviewNodeOptions",new Map),_z(this,"sourceNodes",new Map),_z(this,"sourceNodeOptions",new Map),_z(this,"dragStartSourceIds",null),_z(this,"dropTargetIds",[]),_z(this,"dragEnterTargetIds",[]),_z(this,"currentNativeSource",null),_z(this,"currentNativeHandle",null),_z(this,"currentDragSourceNode",null),_z(this,"altKeyPressed",!1),_z(this,"mouseMoveTimeoutTimer",null),_z(this,"asyncEndDragFrameId",null),_z(this,"dragOverTargetIds",null),_z(this,"lastClientOffset",null),_z(this,"hoverRafId",null),_z(this,"getSourceClientOffset",function(e){var t=i.sourceNodes.get(e);return t&&J$(t)||null}),_z(this,"endDragNativeItem",function(){i.isDraggingNativeItem()&&(i.actions.endDrag(),i.currentNativeHandle&&i.registry.removeSource(i.currentNativeHandle),i.currentNativeHandle=null,i.currentNativeSource=null)}),_z(this,"isNodeInDocument",function(e){return Boolean(e&&i.document&&i.document.body&&i.document.body.contains(e))}),_z(this,"endDragIfSourceWasRemovedFromDOM",function(){var e=i.currentDragSourceNode;null==e||i.isNodeInDocument(e)||i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),_z(this,"handleTopDragStartCapture",function(){i.clearCurrentDragSourceNode(),i.dragStartSourceIds=[]}),_z(this,"handleTopDragStart",function(e){if(!e.defaultPrevented){var t=i.dragStartSourceIds;i.dragStartSourceIds=null;var n=ez(e);i.monitor.isDragging()&&i.actions.endDrag(),i.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:i.getSourceClientOffset,clientOffset:n});var r=e.dataTransfer,o=hz(r);if(i.monitor.isDragging()){if(r&&"function"==typeof r.setDragImage){var a=i.monitor.getSourceId(),s=i.sourceNodes.get(a),l=i.sourcePreviewNodes.get(a)||s;if(l){var u=i.getCurrentSourcePreviewNodeOptions(),c=tz(s,l,n,{anchorX:u.anchorX,anchorY:u.anchorY},{offsetX:u.offsetX,offsetY:u.offsetY});r.setDragImage(l,c.x,c.y)}}try{null==r||r.setData("application/json",{})}catch(HOt){}i.setCurrentDragSourceNode(e.target),i.getCurrentSourcePreviewNodeOptions().captureDraggingState?i.actions.publishDragSource():setTimeout(function(){return i.actions.publishDragSource()},0)}else if(o)i.beginDragNativeItem(o);else{if(r&&!r.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}}}),_z(this,"handleTopDragEndCapture",function(){i.clearCurrentDragSourceNode()&&i.monitor.isDragging()&&i.actions.endDrag()}),_z(this,"handleTopDragEnterCapture",function(e){if(i.dragEnterTargetIds=[],i.enterLeaveCounter.enter(e.target)&&!i.monitor.isDragging()){var t=e.dataTransfer,n=hz(t);n&&i.beginDragNativeItem(n,t)}}),_z(this,"handleTopDragEnter",function(e){var t=i.dragEnterTargetIds;(i.dragEnterTargetIds=[],i.monitor.isDragging())&&(i.altKeyPressed=e.altKey,t.length>0&&i.actions.hover(t,{clientOffset:ez(e)}),t.some(function(e){return i.monitor.canDropOnTarget(e)})&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())))}),_z(this,"handleTopDragOverCapture",function(){i.dragOverTargetIds=[]}),_z(this,"handleTopDragOver",function(e){var t=i.dragOverTargetIds;if(i.dragOverTargetIds=[],!i.monitor.isDragging())return e.preventDefault(),void(e.dataTransfer&&(e.dataTransfer.dropEffect="none"));i.altKeyPressed=e.altKey,i.lastClientOffset=ez(e),null===i.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(i.hoverRafId=requestAnimationFrame(function(){i.monitor.isDragging()&&i.actions.hover(t||[],{clientOffset:i.lastClientOffset}),i.hoverRafId=null})),(t||[]).some(function(e){return i.monitor.canDropOnTarget(e)})?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=i.getCurrentDropEffect())):i.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))}),_z(this,"handleTopDragLeaveCapture",function(e){i.isDraggingNativeItem()&&e.preventDefault(),i.enterLeaveCounter.leave(e.target)&&i.isDraggingNativeItem()&&setTimeout(function(){return i.endDragNativeItem()},0)}),_z(this,"handleTopDropCapture",function(e){var t;(i.dropTargetIds=[],i.isDraggingNativeItem())?(e.preventDefault(),null===(t=i.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer)):hz(e.dataTransfer)&&e.preventDefault();i.enterLeaveCounter.reset()}),_z(this,"handleTopDrop",function(e){var t=i.dropTargetIds;i.dropTargetIds=[],i.actions.hover(t,{clientOffset:ez(e)}),i.actions.drop({dropEffect:i.getCurrentDropEffect()}),i.isDraggingNativeItem()?i.endDragNativeItem():i.monitor.isDragging()&&i.actions.endDrag()}),_z(this,"handleSelectStart",function(e){var t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))}),this.options=new yz(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new G$(this.isNodeInDocument)}return wz(e,[{key:"profile",value:function(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null===(e=this.dragStartSourceIds)||void 0===e?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null===(t=this.dragOverTargetIds)||void 0===t?void 0:t.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}},{key:"teardown",value:function(){var e,t=this.rootElement;void 0!==t&&(t.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId&&(null===(e=this.window)||void 0===e||e.cancelAnimationFrame(this.asyncEndDragFrameId)))}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDragSource",value:function(e,t,n){var r=this;this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,n);var i=function(t){return r.handleDragStart(t,e)},o=function(e){return r.handleSelectStart(e)};return t.setAttribute("draggable","true"),t.addEventListener("dragstart",i),t.addEventListener("selectstart",o),function(){r.sourceNodes.delete(e),r.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",i),t.removeEventListener("selectstart",o),t.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=function(t){return n.handleDragEnter(t,e)},i=function(t){return n.handleDragOver(t,e)},o=function(t){return n.handleDrop(t,e)};return t.addEventListener("dragenter",r),t.addEventListener("dragover",i),t.addEventListener("drop",o),function(){t.removeEventListener("dragenter",r),t.removeEventListener("dragover",i),t.removeEventListener("drop",o)}}},{key:"addEventListeners",value:function(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return bz({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var e=this.monitor.getSourceId();return bz({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}},{key:"isDraggingNativeItem",value:function(){var e=this.monitor.getItemType();return Object.keys(az).some(function(t){return az[t]===e})}},{key:"beginDragNativeItem",value:function(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){var n=new pz(cz[e]);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(e){var t=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;this.mouseMoveTimeoutTimer=setTimeout(function(){var e;return null===(e=t.rootElement)||void 0===e?void 0:e.addEventListener("mousemove",t.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){var e;if(this.currentDragSourceNode=null,this.rootElement)null===(e=this.window)||void 0===e||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0);return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}},{key:"handleDragEnter",value:function(e,t){this.dragEnterTargetIds.unshift(t)}},{key:"handleDragOver",value:function(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}},{key:"handleDrop",value:function(e,t){this.dropTargetIds.unshift(t)}}]),e}();const Sz=Object.freeze(Object.defineProperty({__proto__:null,HTML5Backend:function(e,t,n){return new Ez(e,t,n)},NativeTypes:az,getEmptyImage:function(){return xz||((xz=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),xz}},Symbol.toStringTag,{value:"Module"})),kz=p(Sz);var Tz,Cz;(Cz=Tz||(Tz={})).mouse="mouse",Cz.touch="touch",Cz.keyboard="keyboard";var Az=1,Iz=0;function Oz(e){return void 0===e.button||e.button===Iz}function Nz(e){return!!e.targetTouches}function Dz(e,t){return Nz(e)?function(e,t){return 1===e.targetTouches.length?Dz(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?Dz(e.touches[0]):void 0}(e,t):{x:e.clientX,y:e.clientY}}var Rz=function(){var e=!1;try{addEventListener("test",function(){},Object.defineProperty({},"passive",{get:function(){return e=!0,!0}}))}catch(F0){}return e}();function Mz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Pz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fz,Lz=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Pz(this,"args",void 0),Pz(this,"context",void 0),this.args=t,this.context=n}return Mz(e,[{key:"delay",get:function(){var e;return null!==(e=this.args.delay)&&void 0!==e?e:0}},{key:"scrollAngleRanges",get:function(){return this.args.scrollAngleRanges}},{key:"getDropTargetElementsAtPoint",get:function(){return this.args.getDropTargetElementsAtPoint}},{key:"ignoreContextMenu",get:function(){var e;return null!==(e=this.args.ignoreContextMenu)&&void 0!==e&&e}},{key:"enableHoverOutsideTarget",get:function(){var e;return null!==(e=this.args.enableHoverOutsideTarget)&&void 0!==e&&e}},{key:"enableKeyboardEvents",get:function(){var e;return null!==(e=this.args.enableKeyboardEvents)&&void 0!==e&&e}},{key:"enableMouseEvents",get:function(){var e;return null!==(e=this.args.enableMouseEvents)&&void 0!==e&&e}},{key:"enableTouchEvents",get:function(){var e;return null===(e=this.args.enableTouchEvents)||void 0===e||e}},{key:"touchSlop",get:function(){return this.args.touchSlop||0}},{key:"delayTouchStart",get:function(){var e,t,n,r;return null!==(e=null!==(t=null===(n=this.args)||void 0===n?void 0:n.delayTouchStart)&&void 0!==t?t:null===(r=this.args)||void 0===r?void 0:r.delay)&&void 0!==e?e:0}},{key:"delayMouseStart",get:function(){var e,t,n,r;return null!==(e=null!==(t=null===(n=this.args)||void 0===n?void 0:n.delayMouseStart)&&void 0!==t?t:null===(r=this.args)||void 0===r?void 0:r.delay)&&void 0!==e?e:0}},{key:"window",get:function(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}},{key:"document",get:function(){var e;return null!==(e=this.context)&&void 0!==e&&e.document?this.context.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var e;return(null===(e=this.args)||void 0===e?void 0:e.rootElement)||this.document}}]),e}();function jz(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}function Bz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $z=(Bz(Fz={},Tz.mouse,{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"}),Bz(Fz,Tz.touch,{start:"touchstart",move:"touchmove",end:"touchend"}),Bz(Fz,Tz.keyboard,{keydown:"keydown"}),Fz),zz=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Bz(this,"options",void 0),Bz(this,"actions",void 0),Bz(this,"monitor",void 0),Bz(this,"sourceNodes",void 0),Bz(this,"sourcePreviewNodes",void 0),Bz(this,"sourcePreviewNodeOptions",void 0),Bz(this,"targetNodes",void 0),Bz(this,"_mouseClientOffset",void 0),Bz(this,"_isScrolling",void 0),Bz(this,"listenerTypes",void 0),Bz(this,"moveStartSourceIds",void 0),Bz(this,"waitingForDelay",void 0),Bz(this,"timeout",void 0),Bz(this,"dragOverTargetIds",void 0),Bz(this,"draggedSourceNode",void 0),Bz(this,"draggedSourceNodeRemovalObserver",void 0),Bz(this,"lastTargetTouchFallback",void 0),Bz(this,"getSourceClientOffset",function(e){var t=i.sourceNodes.get(e);return t&&function(e){var t=1===e.nodeType?e:e.parentElement;if(t){var n=t.getBoundingClientRect(),r=n.top;return{x:n.left,y:r}}}(t)}),Bz(this,"handleTopMoveStartCapture",function(e){Oz(e)&&(i.moveStartSourceIds=[])}),Bz(this,"handleMoveStart",function(e){Array.isArray(i.moveStartSourceIds)&&i.moveStartSourceIds.unshift(e)}),Bz(this,"handleTopMoveStart",function(e){if(Oz(e)){var t=Dz(e);t&&(Nz(e)&&(i.lastTargetTouchFallback=e.targetTouches[0]),i._mouseClientOffset=t),i.waitingForDelay=!1}}),Bz(this,"handleTopMoveStartDelay",function(e){if(Oz(e)){var t=e.type===$z.touch.start?i.options.delayTouchStart:i.options.delayMouseStart;i.timeout=setTimeout(i.handleTopMoveStart.bind(i,e),t),i.waitingForDelay=!0}}),Bz(this,"handleTopMoveCapture",function(){i.dragOverTargetIds=[]}),Bz(this,"handleMove",function(e,t){i.dragOverTargetIds&&i.dragOverTargetIds.unshift(t)}),Bz(this,"handleTopMove",function(e){if(i.timeout&&clearTimeout(i.timeout),i.document&&!i.waitingForDelay){var t,n,r,o,a=i.moveStartSourceIds,s=i.dragOverTargetIds,l=i.options.enableHoverOutsideTarget,u=Dz(e,i.lastTargetTouchFallback);if(u)if(i._isScrolling||!i.monitor.isDragging()&&function(e,t,n,r,i){if(!i)return!1;for(var o=180*Math.atan2(r-t,n-e)/Math.PI+180,a=0;a<i.length;++a)if((null==i[a].start||o>=i[a].start)&&(null==i[a].end||o<=i[a].end))return!0;return!1}(i._mouseClientOffset.x||0,i._mouseClientOffset.y||0,u.x,u.y,i.options.scrollAngleRanges))i._isScrolling=!0;else if(!i.monitor.isDragging()&&i._mouseClientOffset.hasOwnProperty("x")&&a&&(t=i._mouseClientOffset.x||0,n=i._mouseClientOffset.y||0,r=u.x,o=u.y,Math.sqrt(Math.pow(Math.abs(r-t),2)+Math.pow(Math.abs(o-n),2))>(i.options.touchSlop?i.options.touchSlop:0))&&(i.moveStartSourceIds=void 0,i.actions.beginDrag(a,{clientOffset:i._mouseClientOffset,getSourceClientOffset:i.getSourceClientOffset,publishSource:!1})),i.monitor.isDragging()){var c=i.sourceNodes.get(i.monitor.getSourceId());i.installSourceNodeRemovalObserver(c),i.actions.publishDragSource(),e.cancelable&&e.preventDefault();var d=(s||[]).map(function(e){return i.targetNodes.get(e)}).filter(function(e){return!!e}),f=i.options.getDropTargetElementsAtPoint?i.options.getDropTargetElementsAtPoint(u.x,u.y,d):i.document.elementsFromPoint(u.x,u.y),p=[];for(var h in f)if(f.hasOwnProperty(h)){var m=f[h];for(p.push(m);m;)(m=m.parentElement)&&-1===p.indexOf(m)&&p.push(m)}var g=p.filter(function(e){return d.indexOf(e)>-1}).map(function(e){return i._getDropTargetId(e)}).filter(function(e){return!!e}).filter(function(e,t,n){return n.indexOf(e)===t});if(l)for(var y in i.targetNodes){var v=i.targetNodes.get(y);if(c&&v&&v.contains(c)&&-1===g.indexOf(y)){g.unshift(y);break}}g.reverse(),i.actions.hover(g,{clientOffset:u})}}}),Bz(this,"_getDropTargetId",function(e){for(var t=i.targetNodes.keys(),n=t.next();!1===n.done;){var r=n.value;if(e===i.targetNodes.get(r))return r;n=t.next()}}),Bz(this,"handleTopMoveEndCapture",function(e){i._isScrolling=!1,i.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||0===(e.buttons&Az)}(e)&&(i.monitor.isDragging()&&!i.monitor.didDrop()?(e.cancelable&&e.preventDefault(),i._mouseClientOffset={},i.uninstallSourceNodeRemovalObserver(),i.actions.drop(),i.actions.endDrag()):i.moveStartSourceIds=void 0)}),Bz(this,"handleCancelOnEscape",function(e){"Escape"===e.key&&i.monitor.isDragging()&&(i._mouseClientOffset={},i.uninstallSourceNodeRemovalObserver(),i.actions.endDrag())}),this.options=new Lz(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Tz.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Tz.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Tz.keyboard)}return jz(e,[{key:"profile",value:function(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null===(e=this.dragOverTargetIds)||void 0===e?void 0:e.length)||0}}},{key:"document",get:function(){return this.options.document}},{key:"setup",value:function(){var t=this.options.rootElement;t&&(pP(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){var t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(e,t,n,r){var i=Rz?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){var o=$z[r][t];o&&e.addEventListener(o,n,i)})}},{key:"removeEventListener",value:function(e,t,n,r){var i=Rz?{capture:r,passive:!1}:r;this.listenerTypes.forEach(function(r){var o=$z[r][t];o&&e.removeEventListener(o,n,i)})}},{key:"connectDragSource",value:function(e,t){var n=this,r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",r),function(){n.sourceNodes.delete(e),n.removeEventListener(t,"start",r)}}},{key:"connectDragPreview",value:function(e,t,n){var r=this;return this.sourcePreviewNodeOptions.set(e,n),this.sourcePreviewNodes.set(e,t),function(){r.sourcePreviewNodes.delete(e),r.sourcePreviewNodeOptions.delete(e)}}},{key:"connectDropTarget",value:function(e,t){var n=this,r=this.options.rootElement;if(!this.document||!r)return function(){};var i=function(i){if(n.document&&r&&n.monitor.isDragging()){var o;switch(i.type){case $z.mouse.move:o={x:i.clientX,y:i.clientY};break;case $z.touch.move:o={x:i.touches[0].clientX,y:i.touches[0].clientY}}var a=null!=o?n.document.elementFromPoint(o.x,o.y):void 0,s=a&&t.contains(a);return a===t||s?n.handleMove(i,e):void 0}};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,t),function(){n.document&&(n.targetNodes.delete(e),n.removeEventListener(n.document.body,"move",i))}}},{key:"getTopMoveStartHandler",value:function(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}},{key:"installSourceNodeRemovalObserver",value:function(e){var t=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(function(){e&&!e.parentElement&&(t.resurrectSourceNode(),t.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}}]),e}();Bz(zz,"isSetUp",void 0);const Uz=p(Object.freeze(Object.defineProperty({__proto__:null,get ListenerType(){return Tz},TouchBackend:function(e){return new zz(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})},TouchBackendImpl:zz},Symbol.toStringTag,{value:"Module"}))),qz=p(eB);var Hz;var Vz,Wz,Gz,Yz,Kz,Zz,Qz,Xz,Jz,eU={exports:{}};function tU(){if(Vz)return eU.exports;Vz=1;var e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(e){var t=new Uint8Array(16);eU.exports=function(){return e(t),t}}else{var n=new Array(16);eU.exports=function(){for(var e,t=0;t<16;t++)3&t||(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}return eU.exports}function nU(){if(Gz)return Wz;Gz=1;for(var e=[],t=0;t<256;++t)e[t]=(t+256).toString(16).substr(1);return Wz=function(t,n){var r=n||0,i=e;return[i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],"-",i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]],i[t[r++]]].join("")}}function rU(){if(Jz)return Xz;Jz=1;var e=function(){if(Kz)return Yz;Kz=1;var e,t,n=tU(),r=nU(),i=0,o=0;return Yz=function(a,s,l){var u=s&&l||0,c=s||[],d=(a=a||{}).node||e,f=void 0!==a.clockseq?a.clockseq:t;if(null==d||null==f){var p=n();null==d&&(d=e=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=t=16383&(p[6]<<8|p[7]))}var h=void 0!==a.msecs?a.msecs:(new Date).getTime(),m=void 0!==a.nsecs?a.nsecs:o+1,g=h-i+(m-o)/1e4;if(g<0&&void 0===a.clockseq&&(f=f+1&16383),(g<0||h>i)&&void 0===a.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");i=h,o=m,t=f;var y=(1e4*(268435455&(h+=122192928e5))+m)%4294967296;c[u++]=y>>>24&255,c[u++]=y>>>16&255,c[u++]=y>>>8&255,c[u++]=255&y;var v=h/4294967296*1e4&268435455;c[u++]=v>>>8&255,c[u++]=255&v,c[u++]=v>>>24&15|16,c[u++]=v>>>16&255,c[u++]=f>>>8|128,c[u++]=255&f;for(var b=0;b<6;++b)c[u+b]=d[b];return s||r(c)},Yz}(),t=function(){if(Qz)return Zz;Qz=1;var e=tU(),t=nU();return Zz=function(n,r,i){var o=r&&i||0;"string"==typeof n&&(r="binary"===n?new Array(16):null,n=null);var a=(n=n||{}).random||(n.rng||e)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,r)for(var s=0;s<16;++s)r[o+s]=a[s];return r||t(a)},Zz}(),n=t;return n.v1=e,n.v4=t,Xz=n}var iU,oU={};function aU(){if(iU)return oU;iU=1;var e=oU&&oU.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(oU,"__esModule",{value:!0}),oU.MosaicWindowContext=oU.MosaicContext=void 0;var t=e(S());return oU.MosaicContext=t.default.createContext(void 0),oU.MosaicWindowContext=t.default.createContext(void 0),oU}var sU,lU,uU,cU,dU,fU,pU={};function hU(){if(cU)return uU;cU=1;var e=NM(),t=function(){if(lU)return sU;lU=1;var e=$I(),t=QI(),n=XI(),r=e?e.isConcatSpreadable:void 0;return sU=function(e){return n(e)||t(e)||!!(r&&e&&e[r])}}();return uU=function n(r,i,o,a,s){var l=-1,u=r.length;for(o||(o=t),s||(s=[]);++l<u;){var c=r[l];i>0&&o(c)?i>1?n(c,i-1,o,a,s):e(s,c):a||(s[s.length]=c)}return s},uU}var mU,gU,yU,vU,bU,wU,_U,xU,EU,SU,kU,TU,CU,AU,IU,OU,NU={};function DU(){if(wU)return bU;wU=1;var e=function(){if(vU)return yU;vU=1;var e=/\s/;return yU=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}}(),t=/^\s+/;return bU=function(n){return n?n.slice(0,e(n)+1).replace(t,""):n}}function RU(){if(xU)return _U;xU=1;var e=DU(),t=UI(),n=UM(),r=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt;return _U=function(s){if("number"==typeof s)return s;if(n(s))return NaN;if(t(s)){var l="function"==typeof s.valueOf?s.valueOf():s;s=t(l)?l+"":l}if("string"!=typeof s)return 0===s?s:+s;s=e(s);var u=i.test(s);return u||o.test(s)?a(s.slice(2),u?2:8):r.test(s)?NaN:+s}}function MU(){if(SU)return EU;SU=1;var e=gU?mU:(gU=1,mU=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}),t=RU();return EU=function(n,r,i){return void 0===i&&(i=r,r=void 0),void 0!==i&&(i=(i=t(i))==i?i:0),void 0!==r&&(r=(r=t(r))==r?r:0),e(t(n),r,i)}}function PU(){if(AU)return CU;AU=1;var e=UI(),t=function(){if(TU)return kU;TU=1;var e=BI();return kU=function(){return e.Date.now()}}(),n=RU(),r=Math.max,i=Math.min;return CU=function(o,a,s){var l,u,c,d,f,p,h=0,m=!1,g=!1,y=!0;if("function"!=typeof o)throw new TypeError("Expected a function");function v(e){var t=l,n=u;return l=u=void 0,h=e,d=o.apply(n,t)}function b(e){var t=e-p;return void 0===p||t>=a||t<0||g&&e-h>=c}function w(){var e=t();if(b(e))return _(e);f=setTimeout(w,function(e){var t=a-(e-p);return g?i(t,c-(e-h)):t}(e))}function _(e){return f=void 0,y&&l?v(e):(l=u=void 0,d)}function x(){var e=t(),n=b(e);if(l=arguments,u=this,p=e,n){if(void 0===f)return function(e){return h=e,f=setTimeout(w,a),m?v(e):d}(p);if(g)return clearTimeout(f),f=setTimeout(w,a),v(p)}return void 0===f&&(f=setTimeout(w,a)),d}return a=n(a)||0,e(s)&&(m=!!s.leading,c=(g="maxWait"in s)?r(n(s.maxWait)||0,a):c,y="trailing"in s?!!s.trailing:y),x.cancel=function(){void 0!==f&&clearTimeout(f),h=0,l=p=u=f=void 0},x.flush=function(){return void 0===f?d:_(t())},x},CU}var FU,LU,jU,BU={},$U={};function zU(){if(FU)return $U;return FU=1,Object.defineProperty($U,"__esModule",{value:!0}),$U.assertNever=void 0,$U.assertNever=function(e){throw new Error("Unhandled case: "+JSON.stringify(e))},$U}function UU(){return LU||(LU=1,function(e){var t=BU&&BU.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.BoundingBox=void 0;var n=zU();!function(e){function r(e,t,r){var i=e.top,o=e.right,a=e.bottom,s=e.left;return"column"===r?(100-i-a)*t/100+i:"row"===r?(100-o-s)*t/100+s:(0,n.assertNever)(r)}e.empty=function(){return{top:0,right:0,bottom:0,left:0}},e.split=function(e,i,o){var a=r(e,i,o);return"column"===o?{first:t(t({},e),{bottom:100-a}),second:t(t({},e),{top:a})}:"row"===o?{first:t(t({},e),{right:100-a}),second:t(t({},e),{left:a})}:(0,n.assertNever)(o)},e.getAbsoluteSplitPercentage=r,e.getRelativeSplitPercentage=function(e,t,r){var i=e.top,o=e.right,a=e.bottom,s=e.left;return"column"===r?(t-i)/(100-i-a)*100:"row"===r?(t-s)/(100-o-s)*100:(0,n.assertNever)(r)},e.asStyles=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:"".concat(t,"%"),right:"".concat(n,"%"),bottom:"".concat(r,"%"),left:"".concat(i,"%")}}}(e.BoundingBox||(e.BoundingBox={}))}(BU)),BU}function qU(){if(jU)return NU;jU=1;var e=NU&&NU.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=NU&&NU.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=NU&&NU.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(NU,"__esModule",{value:!0}),NU.Split=void 0;var r=n(LI()),i=n(MU()),o=n(function(){if(OU)return IU;OU=1;var e=PU(),t=UI();return IU=function(n,r,i){var o=!0,a=!0;if("function"!=typeof n)throw new TypeError("Expected a function");return t(i)&&(o="leading"in i?!!i.leading:o,a="trailing"in i?!!i.trailing:a),e(n,r,{leading:o,maxWait:r,trailing:a})},IU}()),a=n(S()),s=UU(),l=1e3/30,u={capture:!0,passive:!1},c=function(n){function c(){var e=null!==n&&n.apply(this,arguments)||this;return e.rootElement=a.default.createRef(),e.listenersBound=!1,e.onMouseDown=function(t){(d(t)||0===t.button)&&(t.preventDefault(),e.bindListeners())},e.onMouseUp=function(t){e.unbindListeners();var n=e.calculateRelativePercentage(t);e.props.onRelease(n)},e.onMouseMove=function(t){t.preventDefault(),t.stopPropagation(),e.throttledUpdatePercentage(t)},e.throttledUpdatePercentage=(0,o.default)(function(t){var n=e.calculateRelativePercentage(t);n!==e.props.splitPercentage&&e.props.onChange(n)},l),e}return e(c,n),c.prototype.render=function(){var e=this.props.direction;return a.default.createElement("div",{className:(0,r.default)("mosaic-split",{"-row":"row"===e,"-column":"column"===e}),ref:this.rootElement,onMouseDown:this.onMouseDown,style:this.computeStyle()},a.default.createElement("div",{className:"mosaic-split-line"}))},c.prototype.componentDidMount=function(){this.rootElement.current.addEventListener("touchstart",this.onMouseDown,u)},c.prototype.componentWillUnmount=function(){this.unbindListeners(),this.rootElement.current&&this.rootElement.current.ownerDocument.removeEventListener("touchstart",this.onMouseDown,u)},c.prototype.bindListeners=function(){this.listenersBound||(this.rootElement.current.ownerDocument.addEventListener("mousemove",this.onMouseMove,!0),this.rootElement.current.ownerDocument.addEventListener("touchmove",this.onMouseMove,u),this.rootElement.current.ownerDocument.addEventListener("mouseup",this.onMouseUp,!0),this.rootElement.current.ownerDocument.addEventListener("touchend",this.onMouseUp,!0),this.listenersBound=!0)},c.prototype.unbindListeners=function(){this.rootElement.current&&(this.rootElement.current.ownerDocument.removeEventListener("mousemove",this.onMouseMove,!0),this.rootElement.current.ownerDocument.removeEventListener("touchmove",this.onMouseMove,u),this.rootElement.current.ownerDocument.removeEventListener("mouseup",this.onMouseUp,!0),this.rootElement.current.ownerDocument.removeEventListener("touchend",this.onMouseUp,!0),this.listenersBound=!1)},c.prototype.computeStyle=function(){var e,n=this.props,r=n.boundingBox,i=n.direction,o=n.splitPercentage,a="column"===i?"top":"left",l=s.BoundingBox.getAbsoluteSplitPercentage(r,o,i);return t(t({},s.BoundingBox.asStyles(r)),((e={})[a]="".concat(l,"%"),e))},c.prototype.calculateRelativePercentage=function(e){var t,n=this.props,r=n.minimumPaneSizePercentage,o=n.direction,a=n.boundingBox,l=this.rootElement.current.parentElement.getBoundingClientRect(),u=d(e)?e.changedTouches[0]:e;t="column"===o?(u.clientY-l.top)/l.height*100:(u.clientX-l.left)/l.width*100;var c=s.BoundingBox.getRelativeSplitPercentage(a,t,o);return(0,i.default)(c,r,100-r)},c.defaultProps={onChange:function(){},onRelease:function(){},minimumPaneSizePercentage:20},c}(a.default.PureComponent);function d(e){return null!=e.changedTouches}return NU.Split=c,NU}var HU,VU,WU,GU,YU,KU,ZU,QU,XU={};function JU(){if(GU)return WU;GU=1;var e=nP(),t=YI();return WU=function(n,r,i,o){var a=!i;i||(i={});for(var s=-1,l=r.length;++s<l;){var u=r[s],c=o?o(i[u],n[u],u,i,n):void 0;void 0===c&&(c=n[u]),a?t(i,u,c):e(i,u,c)}return i}}var eq,tq,nq,rq,iq,oq,aq,sq,lq,uq,cq,dq,fq,pq,hq,mq,gq,yq,vq,bq,wq,_q,xq,Eq,Sq,kq,Tq,Cq,Aq,Iq,Oq,Nq,Dq,Rq,Mq,Pq,Fq,Lq,jq,Bq={exports:{}};function $q(){if(cq)return uq;cq=1;var e=IM();return uq=function(t){var n=new t.constructor(t.byteLength);return new e(n).set(new e(t)),n}}function zq(){if(wq)return bq;wq=1;var e=$q(),t=function(){if(fq)return dq;fq=1;var e=$q();return dq=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}}(),n=function(){if(hq)return pq;hq=1;var e=/\w*$/;return pq=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}}(),r=function(){if(gq)return mq;gq=1;var e=$I(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;return mq=function(e){return n?Object(n.call(e)):{}}}(),i=function(){if(vq)return yq;vq=1;var e=$q();return yq=function(t,n){var r=n?e(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}}();return bq=function(o,a,s){var l=o.constructor;switch(a){case"[object ArrayBuffer]":return e(o);case"[object Boolean]":case"[object Date]":return new l(+o);case"[object DataView]":return t(o,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i(o,s);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(o);case"[object RegExp]":return n(o);case"[object Symbol]":return r(o)}}}function Uq(){if(Sq)return Eq;Sq=1;var e=function(){if(xq)return _q;xq=1;var e=UI(),t=Object.create;return _q=function(){function n(){}return function(r){if(!e(r))return{};if(t)return t(r);n.prototype=r;var i=new n;return n.prototype=void 0,i}}()}(),t=iP(),n=fM();return Eq=function(r){return"function"!=typeof r.constructor||n(r)?{}:e(t(r))}}function qq(){if(Aq)return Cq;Aq=1;var e=function(){if(Tq)return kq;Tq=1;var e=FM(),t=ZI();return kq=function(n){return t(n)&&"[object Map]"==e(n)}}(),t=hO(),n=uM(),r=n&&n.isMap,i=r?t(r):e;return Cq=i}function Hq(){if(Dq)return Nq;Dq=1;var e=function(){if(Oq)return Iq;Oq=1;var e=FM(),t=ZI();return Iq=function(n){return t(n)&&"[object Set]"==e(n)}}(),t=hO(),n=uM(),r=n&&n.isSet,i=r?t(r):e;return Nq=i}function Vq(){if(Mq)return Rq;Mq=1;var e,t,n,r,i,o,a,s=TM(),l=VU?HU:(VU=1,HU=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}),u=nP(),c=function(){if(KU)return YU;KU=1;var e=JU(),t=gM();return YU=function(n,r){return n&&e(r,t(r),n)}}(),d=function(){if(QU)return ZU;QU=1;var e=JU(),t=sP();return ZU=function(n,r){return n&&e(r,t(r),n)}}(),f=(eq||(eq=1,e=Bq,t=Bq.exports,n=BI(),r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r?n.Buffer:void 0,a=o?o.allocUnsafe:void 0,e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=a?a(n):new e.constructor(n);return e.copy(r),r}),Bq.exports),p=nq?tq:(nq=1,tq=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}),h=function(){if(iq)return rq;iq=1;var e=JU(),t=MM();return rq=function(n,r){return e(n,t(n),r)}}(),m=function(){if(aq)return oq;aq=1;var e=JU(),t=oP();return oq=function(n,r){return e(n,t(n),r)}}(),g=PM(),y=lP(),v=FM(),b=function(){if(lq)return sq;lq=1;var e=Object.prototype.hasOwnProperty;return sq=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}}(),w=zq(),_=Uq(),x=XI(),E=dO(),S=qq(),k=UI(),T=Hq(),C=gM(),A=sP(),I="[object Arguments]",O="[object Function]",N="[object Object]",D={};return D[I]=D["[object Array]"]=D["[object ArrayBuffer]"]=D["[object DataView]"]=D["[object Boolean]"]=D["[object Date]"]=D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Map]"]=D["[object Number]"]=D[N]=D["[object RegExp]"]=D["[object Set]"]=D["[object String]"]=D["[object Symbol]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D["[object Error]"]=D[O]=D["[object WeakMap]"]=!1,Rq=function e(t,n,r,i,o,a){var R,M=1&n,P=2&n,F=4&n;if(r&&(R=o?r(t,i,o,a):r(t)),void 0!==R)return R;if(!k(t))return t;var L=x(t);if(L){if(R=b(t),!M)return p(t,R)}else{var j=v(t),B=j==O||"[object GeneratorFunction]"==j;if(E(t))return f(t,M);if(j==N||j==I||B&&!o){if(R=P||B?{}:_(t),!M)return P?m(t,d(R,t)):h(t,c(R,t))}else{if(!D[j])return o?t:{};R=w(t,j,M)}}a||(a=new s);var $=a.get(t);if($)return $;a.set(t,R),T(t)?t.forEach(function(i){R.add(e(i,n,r,i,t,a))}):S(t)&&t.forEach(function(i,o){R.set(o,e(i,n,r,o,t,a))});var z=L?void 0:(F?P?y:g:P?A:C)(t);return l(z||t,function(i,o){z&&(i=t[o=i]),u(R,o,e(i,n,r,o,t,a))}),R},Rq}function Wq(){return Lq||(Lq=1,function(e){var t=XU&&XU.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.getAndAssertNodeAtPathExists=e.getNodeAtPath=e.getLeaves=e.getPathToCorner=e.getOtherDirection=e.getOtherBranch=e.createBalancedTreeFromLeaves=e.isParent=e.Corner=void 0;var n,r,i=t(function(){if(Fq)return Pq;Fq=1;var e=Vq();return Pq=function(t){return e(t,4)}}()),o=t(ZM());function a(e,t){if(void 0===t&&(t="row"),s(e)){var n=l(t);return{direction:t,first:a(e.first,n),second:a(e.second,n)}}return e}function s(e){return null!=e.direction}function l(e){return"row"===e?"column":"row"}function u(e,t){return t.length>0?(0,o.default)(e,t,null):e}(r=n=e.Corner||(e.Corner={}))[r.TOP_LEFT=1]="TOP_LEFT",r[r.TOP_RIGHT=2]="TOP_RIGHT",r[r.BOTTOM_LEFT=3]="BOTTOM_LEFT",r[r.BOTTOM_RIGHT=4]="BOTTOM_RIGHT",e.isParent=s,e.createBalancedTreeFromLeaves=function(e,t){if(void 0===t&&(t="row"),0===e.length)return null;for(var n=(0,i.default)(e),r=[];n.length>1;){for(;n.length>0;)n.length>1?r.push({direction:"row",first:n.shift(),second:n.shift()}):r.unshift(n.shift());n=r,r=[]}return a(n[0],t)},e.getOtherBranch=function(e){if("first"===e)return"second";if("second"===e)return"first";throw new Error("Branch '".concat(e,"' not a valid branch"))},e.getOtherDirection=l,e.getPathToCorner=function(e,t){for(var r=e,i=[];s(r);)("row"!==r.direction||t!==n.TOP_LEFT&&t!==n.BOTTOM_LEFT)&&("column"!==r.direction||t!==n.TOP_LEFT&&t!==n.TOP_RIGHT)?(i.push("second"),r=r.second):(i.push("first"),r=r.first);return i},e.getLeaves=function e(t){return null==t?[]:s(t)?e(t.first).concat(e(t.second)):[t]},e.getNodeAtPath=u,e.getAndAssertNodeAtPathExists=function(e,t){if(null==e)throw new Error("Root is empty, cannot fetch path");var n=u(e,t);if(null==n)throw new Error("Path [".concat(t.join(", "),"] did not resolve to a node"));return n}}(XU)),XU}function Gq(){if(jq)return pU;jq=1;var e=pU&&pU.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=pU&&pU.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=pU&&pU.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(pU,"__esModule",{value:!0}),pU.MosaicRoot=void 0;var r=n(function(){if(fU)return dU;fU=1;var e=hU();return dU=function(t){return null!=t&&t.length?e(t,1):[]}}()),i=n(S()),o=aU(),a=qU(),s=UU(),l=Wq(),u=function(n){function u(){var e=null!==n&&n.apply(this,arguments)||this;return e.onResize=function(t,n,r){e.context.mosaicActions.updateTree([{path:n,spec:{splitPercentage:{$set:t}}}],r)},e}return e(u,n),u.prototype.render=function(){var e=this.props.root;return i.default.createElement("div",{className:"mosaic-root"},this.renderRecursively(e,s.BoundingBox.empty(),[]))},u.prototype.renderRecursively=function(e,n,o){if((0,l.isParent)(e)){var a=null==e.splitPercentage?50:e.splitPercentage,u=s.BoundingBox.split(n,a,e.direction),d=u.first,f=u.second;return(0,r.default)([this.renderRecursively(e.first,d,o.concat("first")),this.renderSplit(e.direction,n,a,o),this.renderRecursively(e.second,f,o.concat("second"))].filter(c))}return i.default.createElement("div",{key:e,className:"mosaic-tile",style:t({},s.BoundingBox.asStyles(n))},this.props.renderTile(e,o))},u.prototype.renderSplit=function(e,n,r,o){var s=this,l=this.props.resize;return"DISABLED"!==l?i.default.createElement(a.Split,t({key:o.join(",")+"splitter"},l,{boundingBox:n,splitPercentage:r,direction:e,onChange:function(e){return s.onResize(e,o,!0)},onRelease:function(e){return s.onResize(e,o,!1)}})):null},u.contextType=o.MosaicContext,u}(i.default.PureComponent);function c(e){return null!==e}return pU.MosaicRoot=u,pU}var Yq,Kq,Zq={};function Qq(){if(Kq)return Yq;return Kq=1,Yq=function(){}}var Xq,Jq,eH,tH={},nH={exports:{}},rH=nH.exports;function iH(){return Xq||(Xq=1,e=nH,t=nH.exports,function(){var n,r="Expected a function",i="__lodash_hash_undefined__",o="__lodash_placeholder__",a=32,s=128,l=256,u=1/0,c=9007199254740991,f=NaN,p=4294967295,h=[["ary",s],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",a],["partialRight",64],["rearg",l]],m="[object Arguments]",g="[object Array]",y="[object Boolean]",v="[object Date]",b="[object Error]",w="[object Function]",_="[object GeneratorFunction]",x="[object Map]",E="[object Number]",S="[object Object]",k="[object Promise]",T="[object RegExp]",C="[object Set]",A="[object String]",I="[object Symbol]",O="[object WeakMap]",N="[object ArrayBuffer]",D="[object DataView]",R="[object Float32Array]",M="[object Float64Array]",P="[object Int8Array]",F="[object Int16Array]",L="[object Int32Array]",j="[object Uint8Array]",B="[object Uint8ClampedArray]",$="[object Uint16Array]",z="[object Uint32Array]",U=/\b__p \+= '';/g,q=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,W=/[&<>"']/g,G=RegExp(V.source),Y=RegExp(W.source),K=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,ee=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,te=/[\\^$.*+?()[\]{}|]/g,ne=RegExp(te.source),re=/^\s+/,ie=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ae=/\{\n\/\* \[wrapped with (.+)\] \*/,se=/,? & /,le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ue=/[()=,{}\[\]\/\s]/,ce=/\\(\\)?/g,de=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fe=/\w*$/,pe=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,ye=/^(?:0|[1-9]\d*)$/,ve=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,be=/($^)/,we=/['\n\r\u2028\u2029\\]/g,_e="\\ud800-\\udfff",xe="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ee="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",ke="A-Z\\xc0-\\xd6\\xd8-\\xde",Te="\\ufe0e\\ufe0f",Ce="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['’]",Ie="["+_e+"]",Oe="["+Ce+"]",Ne="["+xe+"]",De="\\d+",Re="["+Ee+"]",Me="["+Se+"]",Pe="[^"+_e+Ce+De+Ee+Se+ke+"]",Fe="\\ud83c[\\udffb-\\udfff]",Le="[^"+_e+"]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+ke+"]",ze="\\u200d",Ue="(?:"+Me+"|"+Pe+")",qe="(?:"+$e+"|"+Pe+")",He="(?:['’](?:d|ll|m|re|s|t|ve))?",Ve="(?:['’](?:D|LL|M|RE|S|T|VE))?",We="(?:"+Ne+"|"+Fe+")?",Ge="["+Te+"]?",Ye=Ge+We+"(?:"+ze+"(?:"+[Le,je,Be].join("|")+")"+Ge+We+")*",Ke="(?:"+[Re,je,Be].join("|")+")"+Ye,Ze="(?:"+[Le+Ne+"?",Ne,je,Be,Ie].join("|")+")",Qe=RegExp(Ae,"g"),Xe=RegExp(Ne,"g"),Je=RegExp(Fe+"(?="+Fe+")|"+Ze+Ye,"g"),et=RegExp([$e+"?"+Me+"+"+He+"(?="+[Oe,$e,"$"].join("|")+")",qe+"+"+Ve+"(?="+[Oe,$e+Ue,"$"].join("|")+")",$e+"?"+Ue+"+"+He,$e+"+"+Ve,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",De,Ke].join("|"),"g"),tt=RegExp("["+ze+_e+xe+Te+"]"),nt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],it=-1,ot={};ot[R]=ot[M]=ot[P]=ot[F]=ot[L]=ot[j]=ot[B]=ot[$]=ot[z]=!0,ot[m]=ot[g]=ot[N]=ot[y]=ot[D]=ot[v]=ot[b]=ot[w]=ot[x]=ot[E]=ot[S]=ot[T]=ot[C]=ot[A]=ot[O]=!1;var at={};at[m]=at[g]=at[N]=at[D]=at[y]=at[v]=at[R]=at[M]=at[P]=at[F]=at[L]=at[x]=at[E]=at[S]=at[T]=at[C]=at[A]=at[I]=at[j]=at[B]=at[$]=at[z]=!0,at[b]=at[w]=at[O]=!1;var st={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ut=parseInt,ct="object"==typeof d&&d&&d.Object===Object&&d,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ct||dt||Function("return this")(),pt=t&&!t.nodeType&&t,ht=pt&&e&&!e.nodeType&&e,mt=ht&&ht.exports===pt,gt=mt&&ct.process,yt=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(F0){}}(),vt=yt&&yt.isArrayBuffer,bt=yt&&yt.isDate,wt=yt&&yt.isMap,_t=yt&&yt.isRegExp,xt=yt&&yt.isSet,Et=yt&&yt.isTypedArray;function St(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function kt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function Tt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Ct(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function It(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ot(e,t){return!(null==e||!e.length)&&$t(e,t,0)>-1}function Nt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Rt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Mt(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function Pt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Ft(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Lt=Ht("length");function jt(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function Bt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function $t(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Bt(e,Ut,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Ut(e){return e!=e}function qt(e,t){var n=null==e?0:e.length;return n?Gt(e,t)/n:f}function Ht(e){return function(t){return null==t?n:t[e]}}function Vt(e){return function(t){return null==e?n:e[t]}}function Wt(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Gt(e,t){for(var r,i=-1,o=e.length;++i<o;){var a=t(e[i]);a!==n&&(r=r===n?a:r+a)}return r}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e?e.slice(0,fn(e)+1).replace(re,""):e}function Zt(e){return function(t){return e(t)}}function Qt(e,t){return Dt(t,function(t){return e[t]})}function Xt(e,t){return e.has(t)}function Jt(e,t){for(var n=-1,r=e.length;++n<r&&$t(t,e[n],0)>-1;);return n}function en(e,t){for(var n=e.length;n--&&$t(t,e[n],0)>-1;);return n}var tn=Vt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),nn=Vt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function rn(e){return"\\"+st[e]}function on(e){return tt.test(e)}function an(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function sn(e,t){return function(n){return e(t(n))}}function ln(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var s=e[n];s!==t&&s!==o||(e[n]=o,a[i++]=n)}return a}function un(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function cn(e){return on(e)?function(e){for(var t=Je.lastIndex=0;Je.test(e);)++t;return t}(e):Lt(e)}function dn(e){return on(e)?function(e){return e.match(Je)||[]}(e):function(e){return e.split("")}(e)}function fn(e){for(var t=e.length;t--&&ie.test(e.charAt(t)););return t}var pn=Vt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),hn=function e(t){var d,ie=(t=null==t?ft:hn.defaults(ft.Object(),t,hn.pick(ft,rt))).Array,_e=t.Date,xe=t.Error,Ee=t.Function,Se=t.Math,ke=t.Object,Te=t.RegExp,Ce=t.String,Ae=t.TypeError,Ie=ie.prototype,Oe=Ee.prototype,Ne=ke.prototype,De=t["__core-js_shared__"],Re=Oe.toString,Me=Ne.hasOwnProperty,Pe=0,Fe=(d=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",Le=Ne.toString,je=Re.call(ke),Be=ft._,$e=Te("^"+Re.call(Me).replace(te,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ze=mt?t.Buffer:n,Ue=t.Symbol,qe=t.Uint8Array,He=ze?ze.allocUnsafe:n,Ve=sn(ke.getPrototypeOf,ke),We=ke.create,Ge=Ne.propertyIsEnumerable,Ye=Ie.splice,Ke=Ue?Ue.isConcatSpreadable:n,Ze=Ue?Ue.iterator:n,Je=Ue?Ue.toStringTag:n,tt=function(){try{var e=uo(ke,"defineProperty");return e({},"",{}),e}catch(F0){}}(),st=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ct=_e&&_e.now!==ft.Date.now&&_e.now,dt=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=Se.ceil,ht=Se.floor,gt=ke.getOwnPropertySymbols,yt=ze?ze.isBuffer:n,Lt=t.isFinite,Vt=Ie.join,mn=sn(ke.keys,ke),gn=Se.max,yn=Se.min,vn=_e.now,bn=t.parseInt,wn=Se.random,_n=Ie.reverse,xn=uo(t,"DataView"),En=uo(t,"Map"),Sn=uo(t,"Promise"),kn=uo(t,"Set"),Tn=uo(t,"WeakMap"),Cn=uo(ke,"create"),An=Tn&&new Tn,In={},On=Bo(xn),Nn=Bo(En),Dn=Bo(Sn),Rn=Bo(kn),Mn=Bo(Tn),Pn=Ue?Ue.prototype:n,Fn=Pn?Pn.valueOf:n,Ln=Pn?Pn.toString:n;function jn(e){if(ns(e)&&!Va(e)&&!(e instanceof Un)){if(e instanceof zn)return e;if(Me.call(e,"__wrapped__"))return $o(e)}return new zn(e)}var Bn=function(){function e(){}return function(t){if(!ts(t))return{};if(We)return We(t);e.prototype=t;var r=new e;return e.prototype=n,r}}();function $n(){}function zn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=n}function Un(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Hn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Vn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Wn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Vn;++t<n;)this.add(e[t])}function Gn(e){var t=this.__data__=new Hn(e);this.size=t.size}function Yn(e,t){var n=Va(e),r=!n&&Ha(e),i=!n&&!r&&Ka(e),o=!n&&!r&&!i&&cs(e),a=n||r||i||o,s=a?Yt(e.length,Ce):[],l=s.length;for(var u in e)!t&&!Me.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||yo(u,l))||s.push(u);return s}function Kn(e){var t=e.length;return t?e[Wr(0,t-1)]:n}function Zn(e,t){return Ro(Ci(e),or(t,0,e.length))}function Qn(e){return Ro(Ci(e))}function Xn(e,t,r){(r!==n&&!za(e[t],r)||r===n&&!(t in e))&&rr(e,t,r)}function Jn(e,t,r){var i=e[t];Me.call(e,t)&&za(i,r)&&(r!==n||t in e)||rr(e,t,r)}function er(e,t){for(var n=e.length;n--;)if(za(e[n][0],t))return n;return-1}function tr(e,t,n,r){return cr(e,function(e,i,o){t(r,e,n(e),o)}),r}function nr(e,t){return e&&Ai(t,Ds(t),e)}function rr(e,t,n){"__proto__"==t&&tt?tt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ir(e,t){for(var r=-1,i=t.length,o=ie(i),a=null==e;++r<i;)o[r]=a?n:Cs(e,t[r]);return o}function or(e,t,r){return e==e&&(r!==n&&(e=e<=r?e:r),t!==n&&(e=e>=t?e:t)),e}function ar(e,t,r,i,o,a){var s,l=1&t,u=2&t,c=4&t;if(r&&(s=o?r(e,i,o,a):r(e)),s!==n)return s;if(!ts(e))return e;var d=Va(e);if(d){if(s=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Me.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!l)return Ci(e,s)}else{var f=po(e),p=f==w||f==_;if(Ka(e))return _i(e,l);if(f==S||f==m||p&&!o){if(s=u||p?{}:mo(e),!l)return u?function(e,t){return Ai(e,fo(e),t)}(e,function(e,t){return e&&Ai(t,Rs(t),e)}(s,e)):function(e,t){return Ai(e,co(e),t)}(e,nr(s,e))}else{if(!at[f])return o?e:{};s=function(e,t,n){var r,i=e.constructor;switch(t){case N:return xi(e);case y:case v:return new i(+e);case D:return function(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case R:case M:case P:case F:case L:case j:case B:case $:case z:return Ei(e,n);case x:return new i;case E:case A:return new i(e);case T:return function(e){var t=new e.constructor(e.source,fe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case C:return new i;case I:return r=e,Fn?ke(Fn.call(r)):{}}}(e,f,l)}}a||(a=new Gn);var h=a.get(e);if(h)return h;a.set(e,s),ss(e)?e.forEach(function(n){s.add(ar(n,t,r,n,e,a))}):rs(e)&&e.forEach(function(n,i){s.set(i,ar(n,t,r,i,e,a))});var g=d?n:(c?u?no:to:u?Rs:Ds)(e);return Tt(g||e,function(n,i){g&&(n=e[i=n]),Jn(s,i,ar(n,t,r,i,e,a))}),s}function sr(e,t,r){var i=r.length;if(null==e)return!i;for(e=ke(e);i--;){var o=r[i],a=t[o],s=e[o];if(s===n&&!(o in e)||!a(s))return!1}return!0}function lr(e,t,i){if("function"!=typeof e)throw new Ae(r);return Io(function(){e.apply(n,i)},t)}function ur(e,t,n,r){var i=-1,o=Ot,a=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=Dt(t,Zt(n))),r?(o=Nt,a=!1):t.length>=200&&(o=Xt,a=!1,t=new Wn(t));e:for(;++i<s;){var c=e[i],d=null==n?c:n(c);if(c=r||0!==c?c:0,a&&d==d){for(var f=u;f--;)if(t[f]===d)continue e;l.push(c)}else o(t,d,r)||l.push(c)}return l}jn.templateSettings={escape:K,evaluate:Z,interpolate:Q,variable:"",imports:{_:jn}},jn.prototype=$n.prototype,jn.prototype.constructor=jn,zn.prototype=Bn($n.prototype),zn.prototype.constructor=zn,Un.prototype=Bn($n.prototype),Un.prototype.constructor=Un,qn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},qn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},qn.prototype.get=function(e){var t=this.__data__;if(Cn){var r=t[e];return r===i?n:r}return Me.call(t,e)?t[e]:n},qn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==n:Me.call(t,e)},qn.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Cn&&t===n?i:t,this},Hn.prototype.clear=function(){this.__data__=[],this.size=0},Hn.prototype.delete=function(e){var t=this.__data__,n=er(t,e);return!(n<0||(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,0))},Hn.prototype.get=function(e){var t=this.__data__,r=er(t,e);return r<0?n:t[r][1]},Hn.prototype.has=function(e){return er(this.__data__,e)>-1},Hn.prototype.set=function(e,t){var n=this.__data__,r=er(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Vn.prototype.clear=function(){this.size=0,this.__data__={hash:new qn,map:new(En||Hn),string:new qn}},Vn.prototype.delete=function(e){var t=so(this,e).delete(e);return this.size-=t?1:0,t},Vn.prototype.get=function(e){return so(this,e).get(e)},Vn.prototype.has=function(e){return so(this,e).has(e)},Vn.prototype.set=function(e,t){var n=so(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Wn.prototype.add=Wn.prototype.push=function(e){return this.__data__.set(e,i),this},Wn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.clear=function(){this.__data__=new Hn,this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Gn.prototype.get=function(e){return this.__data__.get(e)},Gn.prototype.has=function(e){return this.__data__.has(e)},Gn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Hn){var r=n.__data__;if(!En||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Vn(r)}return n.set(e,t),this.size=n.size,this};var cr=Ni(vr),dr=Ni(br,!0);function fr(e,t){var n=!0;return cr(e,function(e,r,i){return n=!!t(e,r,i)}),n}function pr(e,t,r){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(l===n?s==s&&!us(s):r(s,l)))var l=s,u=a}return u}function hr(e,t){var n=[];return cr(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function mr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=go),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?mr(s,t-1,n,r,i):Rt(i,s):r||(i[i.length]=s)}return i}var gr=Di(),yr=Di(!0);function vr(e,t){return e&&gr(e,t,Ds)}function br(e,t){return e&&yr(e,t,Ds)}function wr(e,t){return It(t,function(t){return Xa(e[t])})}function _r(e,t){for(var r=0,i=(t=yi(t,e)).length;null!=e&&r<i;)e=e[jo(t[r++])];return r&&r==i?e:n}function xr(e,t,n){var r=t(e);return Va(e)?r:Rt(r,n(e))}function Er(e){return null==e?e===n?"[object Undefined]":"[object Null]":Je&&Je in ke(e)?function(e){var t=Me.call(e,Je),r=e[Je];try{e[Je]=n;var i=!0}catch(F0){}var o=Le.call(e);return i&&(t?e[Je]=r:delete e[Je]),o}(e):function(e){return Le.call(e)}(e)}function Sr(e,t){return e>t}function kr(e,t){return null!=e&&Me.call(e,t)}function Tr(e,t){return null!=e&&t in ke(e)}function Cr(e,t,r){for(var i=r?Nt:Ot,o=e[0].length,a=e.length,s=a,l=ie(a),u=1/0,c=[];s--;){var d=e[s];s&&t&&(d=Dt(d,Zt(t))),u=yn(d.length,u),l[s]=!r&&(t||o>=120&&d.length>=120)?new Wn(s&&d):n}d=e[0];var f=-1,p=l[0];e:for(;++f<o&&c.length<u;){var h=d[f],m=t?t(h):h;if(h=r||0!==h?h:0,!(p?Xt(p,m):i(c,m,r))){for(s=a;--s;){var g=l[s];if(!(g?Xt(g,m):i(e[s],m,r)))continue e}p&&p.push(m),c.push(h)}}return c}function Ar(e,t,r){var i=null==(e=To(e,t=yi(t,e)))?e:e[jo(Qo(t))];return null==i?n:St(i,e,r)}function Ir(e){return ns(e)&&Er(e)==m}function Or(e,t,r,i,o){return e===t||(null==e||null==t||!ns(e)&&!ns(t)?e!=e&&t!=t:function(e,t,r,i,o,a){var s=Va(e),l=Va(t),u=s?g:po(e),c=l?g:po(t),d=(u=u==m?S:u)==S,f=(c=c==m?S:c)==S,p=u==c;if(p&&Ka(e)){if(!Ka(t))return!1;s=!0,d=!1}if(p&&!d)return a||(a=new Gn),s||cs(e)?Ji(e,t,r,i,o,a):function(e,t,n,r,i,o,a){switch(n){case D:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case N:return!(e.byteLength!=t.byteLength||!o(new qe(e),new qe(t)));case y:case v:case E:return za(+e,+t);case b:return e.name==t.name&&e.message==t.message;case T:case A:return e==t+"";case x:var s=an;case C:var l=1&r;if(s||(s=un),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=Ji(s(e),s(t),r,i,o,a);return a.delete(e),c;case I:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,u,r,i,o,a);if(!(1&r)){var h=d&&Me.call(e,"__wrapped__"),w=f&&Me.call(t,"__wrapped__");if(h||w){var _=h?e.value():e,k=w?t.value():t;return a||(a=new Gn),o(_,k,r,i,a)}}return!!p&&(a||(a=new Gn),function(e,t,r,i,o,a){var s=1&r,l=to(e),u=l.length,c=to(t),d=c.length;if(u!=d&&!s)return!1;for(var f=u;f--;){var p=l[f];if(!(s?p in t:Me.call(t,p)))return!1}var h=a.get(e),m=a.get(t);if(h&&m)return h==t&&m==e;var g=!0;a.set(e,t),a.set(t,e);for(var y=s;++f<u;){var v=e[p=l[f]],b=t[p];if(i)var w=s?i(b,v,p,t,e,a):i(v,b,p,e,t,a);if(!(w===n?v===b||o(v,b,r,i,a):w)){g=!1;break}y||(y="constructor"==p)}if(g&&!y){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,r,i,o,a))}(e,t,r,i,Or,o))}function Nr(e,t,r,i){var o=r.length,a=o,s=!i;if(null==e)return!a;for(e=ke(e);o--;){var l=r[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var u=(l=r[o])[0],c=e[u],d=l[1];if(s&&l[2]){if(c===n&&!(u in e))return!1}else{var f=new Gn;if(i)var p=i(c,d,u,e,t,f);if(!(p===n?Or(d,c,3,i,f):p))return!1}}return!0}function Dr(e){return!(!ts(e)||(t=e,Fe&&Fe in t))&&(Xa(e)?$e:me).test(Bo(e));var t}function Rr(e){return"function"==typeof e?e:null==e?il:"object"==typeof e?Va(e)?Br(e[0],e[1]):jr(e):pl(e)}function Mr(e){if(!xo(e))return mn(e);var t=[];for(var n in ke(e))Me.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Pr(e){if(!ts(e))return function(e){var t=[];if(null!=e)for(var n in ke(e))t.push(n);return t}(e);var t=xo(e),n=[];for(var r in e)("constructor"!=r||!t&&Me.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function Lr(e,t){var n=-1,r=Ga(e)?ie(e.length):[];return cr(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function jr(e){var t=lo(e);return 1==t.length&&t[0][2]?So(t[0][0],t[0][1]):function(n){return n===e||Nr(n,e,t)}}function Br(e,t){return bo(e)&&Eo(t)?So(jo(e),t):function(r){var i=Cs(r,e);return i===n&&i===t?As(r,e):Or(t,i,3)}}function $r(e,t,r,i,o){e!==t&&gr(t,function(a,s){if(o||(o=new Gn),ts(a))!function(e,t,r,i,o,a,s){var l=Co(e,r),u=Co(t,r),c=s.get(u);if(c)Xn(e,r,c);else{var d=a?a(l,u,r+"",e,t,s):n,f=d===n;if(f){var p=Va(u),h=!p&&Ka(u),m=!p&&!h&&cs(u);d=u,p||h||m?Va(l)?d=l:Ya(l)?d=Ci(l):h?(f=!1,d=_i(u,!0)):m?(f=!1,d=Ei(u,!0)):d=[]:os(u)||Ha(u)?(d=l,Ha(l)?d=vs(l):ts(l)&&!Xa(l)||(d=mo(u))):f=!1}f&&(s.set(u,d),o(d,u,i,a,s),s.delete(u)),Xn(e,r,d)}}(e,t,s,r,$r,i,o);else{var l=i?i(Co(e,s),a,s+"",e,t,o):n;l===n&&(l=a),Xn(e,s,l)}},Rs)}function zr(e,t){var r=e.length;if(r)return yo(t+=t<0?r:0,r)?e[t]:n}function Ur(e,t,n){t=t.length?Dt(t,function(e){return Va(e)?function(t){return _r(t,1===e.length?e[0]:e)}:e}):[il];var r=-1;return t=Dt(t,Zt(ao())),function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(Lr(e,function(e,n,i){return{criteria:Dt(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=Si(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)})}function qr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=_r(e,a);n(s,a)&&Qr(o,yi(a,e),s)}return o}function Hr(e,t,n,r){var i=r?zt:$t,o=-1,a=t.length,s=e;for(e===t&&(t=Ci(t)),n&&(s=Dt(e,Zt(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Ye.call(s,l,1),Ye.call(e,l,1);return e}function Vr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;yo(i)?Ye.call(e,i,1):ui(e,i)}}return e}function Wr(e,t){return e+ht(wn()*(t-e+1))}function Gr(e,t){var n="";if(!e||t<1||t>c)return n;do{t%2&&(n+=e),(t=ht(t/2))&&(e+=e)}while(t);return n}function Yr(e,t){return Oo(ko(e,t,il),e+"")}function Kr(e){return Kn(zs(e))}function Zr(e,t){var n=zs(e);return Ro(n,or(t,0,n.length))}function Qr(e,t,r,i){if(!ts(e))return e;for(var o=-1,a=(t=yi(t,e)).length,s=a-1,l=e;null!=l&&++o<a;){var u=jo(t[o]),c=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=s){var d=l[u];(c=i?i(d,u,l):n)===n&&(c=ts(d)?d:yo(t[o+1])?[]:{})}Jn(l,u,c),l=l[u]}return e}var Xr=An?function(e,t){return An.set(e,t),e}:il,Jr=tt?function(e,t){return tt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:il;function ei(e){return Ro(zs(e))}function ti(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=ie(i);++r<i;)o[r]=e[r+t];return o}function ni(e,t){var n;return cr(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function ri(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!us(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ii(e,t,il,n)}function ii(e,t,r,i){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=r(t))!=t,l=null===t,u=us(t),c=t===n;o<a;){var d=ht((o+a)/2),f=r(e[d]),p=f!==n,h=null===f,m=f==f,g=us(f);if(s)var y=i||m;else y=c?m&&(i||p):l?m&&p&&(i||!h):u?m&&p&&!h&&(i||!g):!h&&!g&&(i?f<=t:f<t);y?o=d+1:a=d}return yn(a,4294967294)}function oi(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!za(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function ai(e){return"number"==typeof e?e:us(e)?f:+e}function si(e){if("string"==typeof e)return e;if(Va(e))return Dt(e,si)+"";if(us(e))return Ln?Ln.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function li(e,t,n){var r=-1,i=Ot,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=Nt;else if(o>=200){var u=t?null:Gi(e);if(u)return un(u);a=!1,i=Xt,l=new Wn}else l=t?[]:s;e:for(;++r<o;){var c=e[r],d=t?t(c):c;if(c=n||0!==c?c:0,a&&d==d){for(var f=l.length;f--;)if(l[f]===d)continue e;t&&l.push(d),s.push(c)}else i(l,d,n)||(l!==s&&l.push(d),s.push(c))}return s}function ui(e,t){return null==(e=To(e,t=yi(t,e)))||delete e[jo(Qo(t))]}function ci(e,t,n,r){return Qr(e,t,n(_r(e,t)),r)}function di(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?ti(e,r?0:o,r?o+1:i):ti(e,r?o+1:0,r?i:o)}function fi(e,t){var n=e;return n instanceof Un&&(n=n.value()),Mt(t,function(e,t){return t.func.apply(t.thisArg,Rt([e],t.args))},n)}function pi(e,t,n){var r=e.length;if(r<2)return r?li(e[0]):[];for(var i=-1,o=ie(r);++i<r;)for(var a=e[i],s=-1;++s<r;)s!=i&&(o[i]=ur(o[i]||a,e[s],t,n));return li(mr(o,1),t,n)}function hi(e,t,r){for(var i=-1,o=e.length,a=t.length,s={};++i<o;){var l=i<a?t[i]:n;r(s,e[i],l)}return s}function mi(e){return Ya(e)?e:[]}function gi(e){return"function"==typeof e?e:il}function yi(e,t){return Va(e)?e:bo(e,t)?[e]:Lo(bs(e))}var vi=Yr;function bi(e,t,r){var i=e.length;return r=r===n?i:r,!t&&r>=i?e:ti(e,t,r)}var wi=st||function(e){return ft.clearTimeout(e)};function _i(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function xi(e){var t=new e.constructor(e.byteLength);return new qe(t).set(new qe(e)),t}function Ei(e,t){var n=t?xi(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Si(e,t){if(e!==t){var r=e!==n,i=null===e,o=e==e,a=us(e),s=t!==n,l=null===t,u=t==t,c=us(t);if(!l&&!c&&!a&&e>t||a&&s&&u&&!l&&!c||i&&s&&u||!r&&u||!o)return 1;if(!i&&!a&&!c&&e<t||c&&r&&o&&!i&&!a||l&&r&&o||!s&&o||!u)return-1}return 0}function ki(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=gn(o-a,0),c=ie(l+u),d=!r;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Ti(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=gn(o-s,0),d=ie(c+u),f=!r;++i<c;)d[i]=e[i];for(var p=i;++l<u;)d[p+l]=t[l];for(;++a<s;)(f||i<o)&&(d[p+n[a]]=e[i++]);return d}function Ci(e,t){var n=-1,r=e.length;for(t||(t=ie(r));++n<r;)t[n]=e[n];return t}function Ai(e,t,r,i){var o=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var l=t[a],u=i?i(r[l],e[l],l,r,e):n;u===n&&(u=e[l]),o?rr(r,l,u):Jn(r,l,u)}return r}function Ii(e,t){return function(n,r){var i=Va(n)?kt:tr,o=t?t():{};return i(n,e,ao(r,2),o)}}function Oi(e){return Yr(function(t,r){var i=-1,o=r.length,a=o>1?r[o-1]:n,s=o>2?r[2]:n;for(a=e.length>3&&"function"==typeof a?(o--,a):n,s&&vo(r[0],r[1],s)&&(a=o<3?n:a,o=1),t=ke(t);++i<o;){var l=r[i];l&&e(t,l,i,a)}return t})}function Ni(e,t){return function(n,r){if(null==n)return n;if(!Ga(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=ke(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Di(e){return function(t,n,r){for(var i=-1,o=ke(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function Ri(e){return function(t){var r=on(t=bs(t))?dn(t):n,i=r?r[0]:t.charAt(0),o=r?bi(r,1).join(""):t.slice(1);return i[e]()+o}}function Mi(e){return function(t){return Mt(Xs(Hs(t).replace(Qe,"")),e,"")}}function Pi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Bn(e.prototype),r=e.apply(n,t);return ts(r)?r:n}}function Fi(e){return function(t,r,i){var o=ke(t);if(!Ga(t)){var a=ao(r,3);t=Ds(t),r=function(e){return a(o[e],e,o)}}var s=e(t,r,i);return s>-1?o[a?t[s]:s]:n}}function Li(e){return eo(function(t){var i=t.length,o=i,a=zn.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if("function"!=typeof s)throw new Ae(r);if(a&&!l&&"wrapper"==io(s))var l=new zn([],!0)}for(o=l?o:i;++o<i;){var u=io(s=t[o]),c="wrapper"==u?ro(s):n;l=c&&wo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?l[io(c[0])].apply(l,c[3]):1==s.length&&wo(s)?l[u]():l.thru(s)}return function(){var e=arguments,n=e[0];if(l&&1==e.length&&Va(n))return l.plant(n).value();for(var r=0,o=i?t[r].apply(this,e):n;++r<i;)o=t[r].call(this,o);return o}})}function ji(e,t,r,i,o,a,l,u,c,d){var f=t&s,p=1&t,h=2&t,m=24&t,g=512&t,y=h?n:Pi(e);return function s(){for(var v=arguments.length,b=ie(v),w=v;w--;)b[w]=arguments[w];if(m)var _=oo(s),x=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(b,_);if(i&&(b=ki(b,i,o,m)),a&&(b=Ti(b,a,l,m)),v-=x,m&&v<d){var E=ln(b,_);return Vi(e,t,ji,s.placeholder,r,b,E,u,c,d-v)}var S=p?r:this,k=h?S[e]:e;return v=b.length,u?b=function(e,t){for(var r=e.length,i=yn(t.length,r),o=Ci(e);i--;){var a=t[i];e[i]=yo(a,r)?o[a]:n}return e}(b,u):g&&v>1&&b.reverse(),f&&c<v&&(b.length=c),this&&this!==ft&&this instanceof s&&(k=y||Pi(k)),k.apply(S,b)}}function Bi(e,t){return function(n,r){return function(e,t,n,r){return vr(e,function(e,i,o){t(r,n(e),i,o)}),r}(n,e,t(r),{})}}function $i(e,t){return function(r,i){var o;if(r===n&&i===n)return t;if(r!==n&&(o=r),i!==n){if(o===n)return i;"string"==typeof r||"string"==typeof i?(r=si(r),i=si(i)):(r=ai(r),i=ai(i)),o=e(r,i)}return o}}function zi(e){return eo(function(t){return t=Dt(t,Zt(ao())),Yr(function(n){var r=this;return e(t,function(e){return St(e,r,n)})})})}function Ui(e,t){var r=(t=t===n?" ":si(t)).length;if(r<2)return r?Gr(t,e):t;var i=Gr(t,pt(e/cn(t)));return on(t)?bi(dn(i),0,e).join(""):i.slice(0,e)}function qi(e){return function(t,r,i){return i&&"number"!=typeof i&&vo(t,r,i)&&(r=i=n),t=hs(t),r===n?(r=t,t=0):r=hs(r),function(e,t,n,r){for(var i=-1,o=gn(pt((t-e)/(n||1)),0),a=ie(o);o--;)a[r?o:++i]=e,e+=n;return a}(t,r,i=i===n?t<r?1:-1:hs(i),e)}}function Hi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Vi(e,t,r,i,o,s,l,u,c,d){var f=8&t;t|=f?a:64,4&(t&=~(f?64:a))||(t&=-4);var p=[e,t,o,f?s:n,f?l:n,f?n:s,f?n:l,u,c,d],h=r.apply(n,p);return wo(e)&&Ao(h,p),h.placeholder=i,No(h,e,t)}function Wi(e){var t=Se[e];return function(e,n){if(e=ys(e),(n=null==n?0:yn(ms(n),292))&&Lt(e)){var r=(bs(e)+"e").split("e");return+((r=(bs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Gi=kn&&1/un(new kn([,-0]))[1]==u?function(e){return new kn(e)}:ul;function Yi(e){return function(t){var n=po(t);return n==x?an(t):n==C?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(t):function(e,t){return Dt(t,function(t){return[t,e[t]]})}(t,e(t))}}function Ki(e,t,i,u,c,d,f,p){var h=2&t;if(!h&&"function"!=typeof e)throw new Ae(r);var m=u?u.length:0;if(m||(t&=-97,u=c=n),f=f===n?f:gn(ms(f),0),p=p===n?p:ms(p),m-=c?c.length:0,64&t){var g=u,y=c;u=c=n}var v=h?n:ro(e),b=[e,t,i,u,c,g,y,d,f,p];if(v&&function(e,t){var n=e[1],r=t[1],i=n|r,a=i<131,u=r==s&&8==n||r==s&&n==l&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!a&&!u)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var d=e[3];e[3]=d?ki(d,c,t[4]):c,e[4]=d?ln(e[3],o):t[4]}(c=t[5])&&(d=e[5],e[5]=d?Ti(d,c,t[6]):c,e[6]=d?ln(e[5],o):t[6]),(c=t[7])&&(e[7]=c),r&s&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i}(b,v),e=b[0],t=b[1],i=b[2],u=b[3],c=b[4],!(p=b[9]=b[9]===n?h?0:e.length:gn(b[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||16==t?function(e,t,r){var i=Pi(e);return function o(){for(var a=arguments.length,s=ie(a),l=a,u=oo(o);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:ln(s,u);return(a-=c.length)<r?Vi(e,t,ji,o.placeholder,n,s,c,n,n,r-a):St(this&&this!==ft&&this instanceof o?i:e,this,s)}}(e,t,p):t!=a&&33!=t||c.length?ji.apply(n,b):function(e,t,n,r){var i=1&t,o=Pi(e);return function t(){for(var a=-1,s=arguments.length,l=-1,u=r.length,c=ie(u+s),d=this&&this!==ft&&this instanceof t?o:e;++l<u;)c[l]=r[l];for(;s--;)c[l++]=arguments[++a];return St(d,i?n:this,c)}}(e,t,i,u);else var w=function(e,t,n){var r=1&t,i=Pi(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,i);return No((v?Xr:Ao)(w,b),e,t)}function Zi(e,t,r,i){return e===n||za(e,Ne[r])&&!Me.call(i,r)?t:e}function Qi(e,t,r,i,o,a){return ts(e)&&ts(t)&&(a.set(t,e),$r(e,t,n,Qi,a),a.delete(t)),e}function Xi(e){return os(e)?n:e}function Ji(e,t,r,i,o,a){var s=1&r,l=e.length,u=t.length;if(l!=u&&!(s&&u>l))return!1;var c=a.get(e),d=a.get(t);if(c&&d)return c==t&&d==e;var f=-1,p=!0,h=2&r?new Wn:n;for(a.set(e,t),a.set(t,e);++f<l;){var m=e[f],g=t[f];if(i)var y=s?i(g,m,f,t,e,a):i(m,g,f,e,t,a);if(y!==n){if(y)continue;p=!1;break}if(h){if(!Ft(t,function(e,t){if(!Xt(h,t)&&(m===e||o(m,e,r,i,a)))return h.push(t)})){p=!1;break}}else if(m!==g&&!o(m,g,r,i,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function eo(e){return Oo(ko(e,n,Wo),e+"")}function to(e){return xr(e,Ds,co)}function no(e){return xr(e,Rs,fo)}var ro=An?function(e){return An.get(e)}:ul;function io(e){for(var t=e.name+"",n=In[t],r=Me.call(In,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function oo(e){return(Me.call(jn,"placeholder")?jn:e).placeholder}function ao(){var e=jn.iteratee||ol;return e=e===ol?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function so(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function lo(e){for(var t=Ds(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Eo(i)]}return t}function uo(e,t){var r=function(e,t){return null==e?n:e[t]}(e,t);return Dr(r)?r:n}var co=gt?function(e){return null==e?[]:(e=ke(e),It(gt(e),function(t){return Ge.call(e,t)}))}:gl,fo=gt?function(e){for(var t=[];e;)Rt(t,co(e)),e=Ve(e);return t}:gl,po=Er;function ho(e,t,n){for(var r=-1,i=(t=yi(t,e)).length,o=!1;++r<i;){var a=jo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&es(i)&&yo(a,i)&&(Va(e)||Ha(e))}function mo(e){return"function"!=typeof e.constructor||xo(e)?{}:Bn(Ve(e))}function go(e){return Va(e)||Ha(e)||!!(Ke&&e&&e[Ke])}function yo(e,t){var n=typeof e;return!!(t=null==t?c:t)&&("number"==n||"symbol"!=n&&ye.test(e))&&e>-1&&e%1==0&&e<t}function vo(e,t,n){if(!ts(n))return!1;var r=typeof t;return!!("number"==r?Ga(n)&&yo(t,n.length):"string"==r&&t in n)&&za(n[t],e)}function bo(e,t){if(Va(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!us(e))||J.test(e)||!X.test(e)||null!=t&&e in ke(t)}function wo(e){var t=io(e),n=jn[t];if("function"!=typeof n||!(t in Un.prototype))return!1;if(e===n)return!0;var r=ro(n);return!!r&&e===r[0]}(xn&&po(new xn(new ArrayBuffer(1)))!=D||En&&po(new En)!=x||Sn&&po(Sn.resolve())!=k||kn&&po(new kn)!=C||Tn&&po(new Tn)!=O)&&(po=function(e){var t=Er(e),r=t==S?e.constructor:n,i=r?Bo(r):"";if(i)switch(i){case On:return D;case Nn:return x;case Dn:return k;case Rn:return C;case Mn:return O}return t});var _o=De?Xa:yl;function xo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ne)}function Eo(e){return e==e&&!ts(e)}function So(e,t){return function(r){return null!=r&&r[e]===t&&(t!==n||e in ke(r))}}function ko(e,t,r){return t=gn(t===n?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=gn(n.length-t,0),a=ie(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=ie(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),St(e,this,s)}}function To(e,t){return t.length<2?e:_r(e,ti(t,0,-1))}function Co(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ao=Do(Xr),Io=dt||function(e,t){return ft.setTimeout(e,t)},Oo=Do(Jr);function No(e,t,n){var r=t+"";return Oo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return Tt(h,function(n){var r="_."+n[0];t&n[1]&&!Ot(e,r)&&e.push(r)}),e.sort()}(function(e){var t=e.match(ae);return t?t[1].split(se):[]}(r),n)))}function Do(e){var t=0,r=0;return function(){var i=vn(),o=16-(i-r);if(r=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(n,arguments)}}function Ro(e,t){var r=-1,i=e.length,o=i-1;for(t=t===n?i:t;++r<t;){var a=Wr(r,o),s=e[a];e[a]=e[r],e[r]=s}return e.length=t,e}var Mo,Po,Fo,Lo=(Mo=function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ee,function(e,n,r,i){t.push(r?i.replace(ce,"$1"):n||e)}),t},Po=Pa(Mo,function(e){return 500===Fo.size&&Fo.clear(),e}),Fo=Po.cache,Po);function jo(e){if("string"==typeof e||us(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return Re.call(e)}catch(F0){}try{return e+""}catch(F0){}}return""}function $o(e){if(e instanceof Un)return e.clone();var t=new zn(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var zo=Yr(function(e,t){return Ya(e)?ur(e,mr(t,1,Ya,!0)):[]}),Uo=Yr(function(e,t){var r=Qo(t);return Ya(r)&&(r=n),Ya(e)?ur(e,mr(t,1,Ya,!0),ao(r,2)):[]}),qo=Yr(function(e,t){var r=Qo(t);return Ya(r)&&(r=n),Ya(e)?ur(e,mr(t,1,Ya,!0),n,r):[]});function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=gn(r+i,0)),Bt(e,ao(t,3),i)}function Vo(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return r!==n&&(o=ms(r),o=r<0?gn(i+o,0):yn(o,i-1)),Bt(e,ao(t,3),o,!0)}function Wo(e){return null!=e&&e.length?mr(e,1):[]}function Go(e){return e&&e.length?e[0]:n}var Yo=Yr(function(e){var t=Dt(e,mi);return t.length&&t[0]===e[0]?Cr(t):[]}),Ko=Yr(function(e){var t=Qo(e),r=Dt(e,mi);return t===Qo(r)?t=n:r.pop(),r.length&&r[0]===e[0]?Cr(r,ao(t,2)):[]}),Zo=Yr(function(e){var t=Qo(e),r=Dt(e,mi);return(t="function"==typeof t?t:n)&&r.pop(),r.length&&r[0]===e[0]?Cr(r,n,t):[]});function Qo(e){var t=null==e?0:e.length;return t?e[t-1]:n}var Xo=Yr(Jo);function Jo(e,t){return e&&e.length&&t&&t.length?Hr(e,t):e}var ea=eo(function(e,t){var n=null==e?0:e.length,r=ir(e,t);return Vr(e,Dt(t,function(e){return yo(e,n)?+e:e}).sort(Si)),r});function ta(e){return null==e?e:_n.call(e)}var na=Yr(function(e){return li(mr(e,1,Ya,!0))}),ra=Yr(function(e){var t=Qo(e);return Ya(t)&&(t=n),li(mr(e,1,Ya,!0),ao(t,2))}),ia=Yr(function(e){var t=Qo(e);return t="function"==typeof t?t:n,li(mr(e,1,Ya,!0),n,t)});function oa(e){if(!e||!e.length)return[];var t=0;return e=It(e,function(e){if(Ya(e))return t=gn(e.length,t),!0}),Yt(t,function(t){return Dt(e,Ht(t))})}function aa(e,t){if(!e||!e.length)return[];var r=oa(e);return null==t?r:Dt(r,function(e){return St(t,n,e)})}var sa=Yr(function(e,t){return Ya(e)?ur(e,t):[]}),la=Yr(function(e){return pi(It(e,Ya))}),ua=Yr(function(e){var t=Qo(e);return Ya(t)&&(t=n),pi(It(e,Ya),ao(t,2))}),ca=Yr(function(e){var t=Qo(e);return t="function"==typeof t?t:n,pi(It(e,Ya),n,t)}),da=Yr(oa),fa=Yr(function(e){var t=e.length,r=t>1?e[t-1]:n;return r="function"==typeof r?(e.pop(),r):n,aa(e,r)});function pa(e){var t=jn(e);return t.__chain__=!0,t}function ha(e,t){return t(e)}var ma=eo(function(e){var t=e.length,r=t?e[0]:0,i=this.__wrapped__,o=function(t){return ir(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Un&&yo(r)?((i=i.slice(r,+r+(t?1:0))).__actions__.push({func:ha,args:[o],thisArg:n}),new zn(i,this.__chain__).thru(function(e){return t&&!e.length&&e.push(n),e})):this.thru(o)}),ga=Ii(function(e,t,n){Me.call(e,n)?++e[n]:rr(e,n,1)}),ya=Fi(Ho),va=Fi(Vo);function ba(e,t){return(Va(e)?Tt:cr)(e,ao(t,3))}function wa(e,t){return(Va(e)?Ct:dr)(e,ao(t,3))}var _a=Ii(function(e,t,n){Me.call(e,n)?e[n].push(t):rr(e,n,[t])}),xa=Yr(function(e,t,n){var r=-1,i="function"==typeof t,o=Ga(e)?ie(e.length):[];return cr(e,function(e){o[++r]=i?St(t,e,n):Ar(e,t,n)}),o}),Ea=Ii(function(e,t,n){rr(e,n,t)});function Sa(e,t){return(Va(e)?Dt:Lr)(e,ao(t,3))}var ka=Ii(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Ta=Yr(function(e,t){if(null==e)return[];var n=t.length;return n>1&&vo(e,t[0],t[1])?t=[]:n>2&&vo(t[0],t[1],t[2])&&(t=[t[0]]),Ur(e,mr(t,1),[])}),Ca=ct||function(){return ft.Date.now()};function Aa(e,t,r){return t=r?n:t,t=e&&null==t?e.length:t,Ki(e,s,n,n,n,n,t)}function Ia(e,t){var i;if("function"!=typeof t)throw new Ae(r);return e=ms(e),function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=n),i}}var Oa=Yr(function(e,t,n){var r=1;if(n.length){var i=ln(n,oo(Oa));r|=a}return Ki(e,r,t,n,i)}),Na=Yr(function(e,t,n){var r=3;if(n.length){var i=ln(n,oo(Na));r|=a}return Ki(t,r,e,n,i)});function Da(e,t,i){var o,a,s,l,u,c,d=0,f=!1,p=!1,h=!0;if("function"!=typeof e)throw new Ae(r);function m(t){var r=o,i=a;return o=a=n,d=t,l=e.apply(i,r)}function g(e){var r=e-c;return c===n||r>=t||r<0||p&&e-d>=s}function y(){var e=Ca();if(g(e))return v(e);u=Io(y,function(e){var n=t-(e-c);return p?yn(n,s-(e-d)):n}(e))}function v(e){return u=n,h&&o?m(e):(o=a=n,l)}function b(){var e=Ca(),r=g(e);if(o=arguments,a=this,c=e,r){if(u===n)return function(e){return d=e,u=Io(y,t),f?m(e):l}(c);if(p)return wi(u),u=Io(y,t),m(c)}return u===n&&(u=Io(y,t)),l}return t=ys(t)||0,ts(i)&&(f=!!i.leading,s=(p="maxWait"in i)?gn(ys(i.maxWait)||0,t):s,h="trailing"in i?!!i.trailing:h),b.cancel=function(){u!==n&&wi(u),d=0,o=c=a=u=n},b.flush=function(){return u===n?l:v(Ca())},b}var Ra=Yr(function(e,t){return lr(e,1,t)}),Ma=Yr(function(e,t,n){return lr(e,ys(t)||0,n)});function Pa(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Ae(r);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Pa.Cache||Vn),n}function Fa(e){if("function"!=typeof e)throw new Ae(r);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Pa.Cache=Vn;var La=vi(function(e,t){var n=(t=1==t.length&&Va(t[0])?Dt(t[0],Zt(ao())):Dt(mr(t,1),Zt(ao()))).length;return Yr(function(r){for(var i=-1,o=yn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return St(e,this,r)})}),ja=Yr(function(e,t){var r=ln(t,oo(ja));return Ki(e,a,n,t,r)}),Ba=Yr(function(e,t){var r=ln(t,oo(Ba));return Ki(e,64,n,t,r)}),$a=eo(function(e,t){return Ki(e,l,n,n,n,t)});function za(e,t){return e===t||e!=e&&t!=t}var Ua=Hi(Sr),qa=Hi(function(e,t){return e>=t}),Ha=Ir(function(){return arguments}())?Ir:function(e){return ns(e)&&Me.call(e,"callee")&&!Ge.call(e,"callee")},Va=ie.isArray,Wa=vt?Zt(vt):function(e){return ns(e)&&Er(e)==N};function Ga(e){return null!=e&&es(e.length)&&!Xa(e)}function Ya(e){return ns(e)&&Ga(e)}var Ka=yt||yl,Za=bt?Zt(bt):function(e){return ns(e)&&Er(e)==v};function Qa(e){if(!ns(e))return!1;var t=Er(e);return t==b||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!os(e)}function Xa(e){if(!ts(e))return!1;var t=Er(e);return t==w||t==_||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ja(e){return"number"==typeof e&&e==ms(e)}function es(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function ts(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ns(e){return null!=e&&"object"==typeof e}var rs=wt?Zt(wt):function(e){return ns(e)&&po(e)==x};function is(e){return"number"==typeof e||ns(e)&&Er(e)==E}function os(e){if(!ns(e)||Er(e)!=S)return!1;var t=Ve(e);if(null===t)return!0;var n=Me.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Re.call(n)==je}var as=_t?Zt(_t):function(e){return ns(e)&&Er(e)==T},ss=xt?Zt(xt):function(e){return ns(e)&&po(e)==C};function ls(e){return"string"==typeof e||!Va(e)&&ns(e)&&Er(e)==A}function us(e){return"symbol"==typeof e||ns(e)&&Er(e)==I}var cs=Et?Zt(Et):function(e){return ns(e)&&es(e.length)&&!!ot[Er(e)]},ds=Hi(Fr),fs=Hi(function(e,t){return e<=t});function ps(e){if(!e)return[];if(Ga(e))return ls(e)?dn(e):Ci(e);if(Ze&&e[Ze])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[Ze]());var t=po(e);return(t==x?an:t==C?un:zs)(e)}function hs(e){return e?(e=ys(e))===u||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ms(e){var t=hs(e),n=t%1;return t==t?n?t-n:t:0}function gs(e){return e?or(ms(e),0,p):0}function ys(e){if("number"==typeof e)return e;if(us(e))return f;if(ts(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ts(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=he.test(e);return n||ge.test(e)?ut(e.slice(2),n?2:8):pe.test(e)?f:+e}function vs(e){return Ai(e,Rs(e))}function bs(e){return null==e?"":si(e)}var ws=Oi(function(e,t){if(xo(t)||Ga(t))Ai(t,Ds(t),e);else for(var n in t)Me.call(t,n)&&Jn(e,n,t[n])}),_s=Oi(function(e,t){Ai(t,Rs(t),e)}),xs=Oi(function(e,t,n,r){Ai(t,Rs(t),e,r)}),Es=Oi(function(e,t,n,r){Ai(t,Ds(t),e,r)}),Ss=eo(ir),ks=Yr(function(e,t){e=ke(e);var r=-1,i=t.length,o=i>2?t[2]:n;for(o&&vo(t[0],t[1],o)&&(i=1);++r<i;)for(var a=t[r],s=Rs(a),l=-1,u=s.length;++l<u;){var c=s[l],d=e[c];(d===n||za(d,Ne[c])&&!Me.call(e,c))&&(e[c]=a[c])}return e}),Ts=Yr(function(e){return e.push(n,Qi),St(Ps,n,e)});function Cs(e,t,r){var i=null==e?n:_r(e,t);return i===n?r:i}function As(e,t){return null!=e&&ho(e,t,Tr)}var Is=Bi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),e[t]=n},tl(il)),Os=Bi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Le.call(t)),Me.call(e,t)?e[t].push(n):e[t]=[n]},ao),Ns=Yr(Ar);function Ds(e){return Ga(e)?Yn(e):Mr(e)}function Rs(e){return Ga(e)?Yn(e,!0):Pr(e)}var Ms=Oi(function(e,t,n){$r(e,t,n)}),Ps=Oi(function(e,t,n,r){$r(e,t,n,r)}),Fs=eo(function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,function(t){return t=yi(t,e),r||(r=t.length>1),t}),Ai(e,no(e),n),r&&(n=ar(n,7,Xi));for(var i=t.length;i--;)ui(n,t[i]);return n}),Ls=eo(function(e,t){return null==e?{}:function(e,t){return qr(e,t,function(t,n){return As(e,n)})}(e,t)});function js(e,t){if(null==e)return{};var n=Dt(no(e),function(e){return[e]});return t=ao(t),qr(e,n,function(e,n){return t(e,n[0])})}var Bs=Yi(Ds),$s=Yi(Rs);function zs(e){return null==e?[]:Qt(e,Ds(e))}var Us=Mi(function(e,t,n){return t=t.toLowerCase(),e+(n?qs(t):t)});function qs(e){return Qs(bs(e).toLowerCase())}function Hs(e){return(e=bs(e))&&e.replace(ve,tn).replace(Xe,"")}var Vs=Mi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ws=Mi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Gs=Ri("toLowerCase"),Ys=Mi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Ks=Mi(function(e,t,n){return e+(n?" ":"")+Qs(t)}),Zs=Mi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Qs=Ri("toUpperCase");function Xs(e,t,r){return e=bs(e),(t=r?n:t)===n?function(e){return nt.test(e)}(e)?function(e){return e.match(et)||[]}(e):function(e){return e.match(le)||[]}(e):e.match(t)||[]}var Js=Yr(function(e,t){try{return St(e,n,t)}catch(F0){return Qa(F0)?F0:new xe(F0)}}),el=eo(function(e,t){return Tt(t,function(t){t=jo(t),rr(e,t,Oa(e[t],e))}),e});function tl(e){return function(){return e}}var nl=Li(),rl=Li(!0);function il(e){return e}function ol(e){return Rr("function"==typeof e?e:ar(e,1))}var al=Yr(function(e,t){return function(n){return Ar(n,e,t)}}),sl=Yr(function(e,t){return function(n){return Ar(e,n,t)}});function ll(e,t,n){var r=Ds(t),i=wr(t,r);null!=n||ts(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Ds(t)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Xa(e);return Tt(i,function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Ci(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Rt([this.value()],arguments))})}),e}function ul(){}var cl=zi(Dt),dl=zi(At),fl=zi(Ft);function pl(e){return bo(e)?Ht(jo(e)):function(e){return function(t){return _r(t,e)}}(e)}var hl=qi(),ml=qi(!0);function gl(){return[]}function yl(){return!1}var vl,bl=$i(function(e,t){return e+t},0),wl=Wi("ceil"),_l=$i(function(e,t){return e/t},1),xl=Wi("floor"),El=$i(function(e,t){return e*t},1),Sl=Wi("round"),kl=$i(function(e,t){return e-t},0);return jn.after=function(e,t){if("function"!=typeof t)throw new Ae(r);return e=ms(e),function(){if(--e<1)return t.apply(this,arguments)}},jn.ary=Aa,jn.assign=ws,jn.assignIn=_s,jn.assignInWith=xs,jn.assignWith=Es,jn.at=Ss,jn.before=Ia,jn.bind=Oa,jn.bindAll=el,jn.bindKey=Na,jn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Va(e)?e:[e]},jn.chain=pa,jn.chunk=function(e,t,r){t=(r?vo(e,t,r):t===n)?1:gn(ms(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var o=0,a=0,s=ie(pt(i/t));o<i;)s[a++]=ti(e,o,o+=t);return s},jn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},jn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ie(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Rt(Va(n)?Ci(n):[n],mr(t,1))},jn.cond=function(e){var t=null==e?0:e.length,n=ao();return e=t?Dt(e,function(e){if("function"!=typeof e[1])throw new Ae(r);return[n(e[0]),e[1]]}):[],Yr(function(n){for(var r=-1;++r<t;){var i=e[r];if(St(i[0],this,n))return St(i[1],this,n)}})},jn.conforms=function(e){return function(e){var t=Ds(e);return function(n){return sr(n,e,t)}}(ar(e,1))},jn.constant=tl,jn.countBy=ga,jn.create=function(e,t){var n=Bn(e);return null==t?n:nr(n,t)},jn.curry=function e(t,r,i){var o=Ki(t,8,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},jn.curryRight=function e(t,r,i){var o=Ki(t,16,n,n,n,n,n,r=i?n:r);return o.placeholder=e.placeholder,o},jn.debounce=Da,jn.defaults=ks,jn.defaultsDeep=Ts,jn.defer=Ra,jn.delay=Ma,jn.difference=zo,jn.differenceBy=Uo,jn.differenceWith=qo,jn.drop=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=r||t===n?1:ms(t))<0?0:t,i):[]},jn.dropRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,0,(t=i-(t=r||t===n?1:ms(t)))<0?0:t):[]},jn.dropRightWhile=function(e,t){return e&&e.length?di(e,ao(t,3),!0,!0):[]},jn.dropWhile=function(e,t){return e&&e.length?di(e,ao(t,3),!0):[]},jn.fill=function(e,t,r,i){var o=null==e?0:e.length;return o?(r&&"number"!=typeof r&&vo(e,t,r)&&(r=0,i=o),function(e,t,r,i){var o=e.length;for((r=ms(r))<0&&(r=-r>o?0:o+r),(i=i===n||i>o?o:ms(i))<0&&(i+=o),i=r>i?0:gs(i);r<i;)e[r++]=t;return e}(e,t,r,i)):[]},jn.filter=function(e,t){return(Va(e)?It:hr)(e,ao(t,3))},jn.flatMap=function(e,t){return mr(Sa(e,t),1)},jn.flatMapDeep=function(e,t){return mr(Sa(e,t),u)},jn.flatMapDepth=function(e,t,r){return r=r===n?1:ms(r),mr(Sa(e,t),r)},jn.flatten=Wo,jn.flattenDeep=function(e){return null!=e&&e.length?mr(e,u):[]},jn.flattenDepth=function(e,t){return null!=e&&e.length?mr(e,t=t===n?1:ms(t)):[]},jn.flip=function(e){return Ki(e,512)},jn.flow=nl,jn.flowRight=rl,jn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},jn.functions=function(e){return null==e?[]:wr(e,Ds(e))},jn.functionsIn=function(e){return null==e?[]:wr(e,Rs(e))},jn.groupBy=_a,jn.initial=function(e){return null!=e&&e.length?ti(e,0,-1):[]},jn.intersection=Yo,jn.intersectionBy=Ko,jn.intersectionWith=Zo,jn.invert=Is,jn.invertBy=Os,jn.invokeMap=xa,jn.iteratee=ol,jn.keyBy=Ea,jn.keys=Ds,jn.keysIn=Rs,jn.map=Sa,jn.mapKeys=function(e,t){var n={};return t=ao(t,3),vr(e,function(e,r,i){rr(n,t(e,r,i),e)}),n},jn.mapValues=function(e,t){var n={};return t=ao(t,3),vr(e,function(e,r,i){rr(n,r,t(e,r,i))}),n},jn.matches=function(e){return jr(ar(e,1))},jn.matchesProperty=function(e,t){return Br(e,ar(t,1))},jn.memoize=Pa,jn.merge=Ms,jn.mergeWith=Ps,jn.method=al,jn.methodOf=sl,jn.mixin=ll,jn.negate=Fa,jn.nthArg=function(e){return e=ms(e),Yr(function(t){return zr(t,e)})},jn.omit=Fs,jn.omitBy=function(e,t){return js(e,Fa(ao(t)))},jn.once=function(e){return Ia(2,e)},jn.orderBy=function(e,t,r,i){return null==e?[]:(Va(t)||(t=null==t?[]:[t]),Va(r=i?n:r)||(r=null==r?[]:[r]),Ur(e,t,r))},jn.over=cl,jn.overArgs=La,jn.overEvery=dl,jn.overSome=fl,jn.partial=ja,jn.partialRight=Ba,jn.partition=ka,jn.pick=Ls,jn.pickBy=js,jn.property=pl,jn.propertyOf=function(e){return function(t){return null==e?n:_r(e,t)}},jn.pull=Xo,jn.pullAll=Jo,jn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Hr(e,t,ao(n,2)):e},jn.pullAllWith=function(e,t,r){return e&&e.length&&t&&t.length?Hr(e,t,n,r):e},jn.pullAt=ea,jn.range=hl,jn.rangeRight=ml,jn.rearg=$a,jn.reject=function(e,t){return(Va(e)?It:hr)(e,Fa(ao(t,3)))},jn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=ao(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Vr(e,i),n},jn.rest=function(e,t){if("function"!=typeof e)throw new Ae(r);return Yr(e,t=t===n?t:ms(t))},jn.reverse=ta,jn.sampleSize=function(e,t,r){return t=(r?vo(e,t,r):t===n)?1:ms(t),(Va(e)?Zn:Zr)(e,t)},jn.set=function(e,t,n){return null==e?e:Qr(e,t,n)},jn.setWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:Qr(e,t,r,i)},jn.shuffle=function(e){return(Va(e)?Qn:ei)(e)},jn.slice=function(e,t,r){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&vo(e,t,r)?(t=0,r=i):(t=null==t?0:ms(t),r=r===n?i:ms(r)),ti(e,t,r)):[]},jn.sortBy=Ta,jn.sortedUniq=function(e){return e&&e.length?oi(e):[]},jn.sortedUniqBy=function(e,t){return e&&e.length?oi(e,ao(t,2)):[]},jn.split=function(e,t,r){return r&&"number"!=typeof r&&vo(e,t,r)&&(t=r=n),(r=r===n?p:r>>>0)?(e=bs(e))&&("string"==typeof t||null!=t&&!as(t))&&!(t=si(t))&&on(e)?bi(dn(e),0,r):e.split(t,r):[]},jn.spread=function(e,t){if("function"!=typeof e)throw new Ae(r);return t=null==t?0:gn(ms(t),0),Yr(function(n){var r=n[t],i=bi(n,0,t);return r&&Rt(i,r),St(e,this,i)})},jn.tail=function(e){var t=null==e?0:e.length;return t?ti(e,1,t):[]},jn.take=function(e,t,r){return e&&e.length?ti(e,0,(t=r||t===n?1:ms(t))<0?0:t):[]},jn.takeRight=function(e,t,r){var i=null==e?0:e.length;return i?ti(e,(t=i-(t=r||t===n?1:ms(t)))<0?0:t,i):[]},jn.takeRightWhile=function(e,t){return e&&e.length?di(e,ao(t,3),!1,!0):[]},jn.takeWhile=function(e,t){return e&&e.length?di(e,ao(t,3)):[]},jn.tap=function(e,t){return t(e),e},jn.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new Ae(r);return ts(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Da(e,t,{leading:i,maxWait:t,trailing:o})},jn.thru=ha,jn.toArray=ps,jn.toPairs=Bs,jn.toPairsIn=$s,jn.toPath=function(e){return Va(e)?Dt(e,jo):us(e)?[e]:Ci(Lo(bs(e)))},jn.toPlainObject=vs,jn.transform=function(e,t,n){var r=Va(e),i=r||Ka(e)||cs(e);if(t=ao(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:ts(e)&&Xa(o)?Bn(Ve(e)):{}}return(i?Tt:vr)(e,function(e,r,i){return t(n,e,r,i)}),n},jn.unary=function(e){return Aa(e,1)},jn.union=na,jn.unionBy=ra,jn.unionWith=ia,jn.uniq=function(e){return e&&e.length?li(e):[]},jn.uniqBy=function(e,t){return e&&e.length?li(e,ao(t,2)):[]},jn.uniqWith=function(e,t){return t="function"==typeof t?t:n,e&&e.length?li(e,n,t):[]},jn.unset=function(e,t){return null==e||ui(e,t)},jn.unzip=oa,jn.unzipWith=aa,jn.update=function(e,t,n){return null==e?e:ci(e,t,gi(n))},jn.updateWith=function(e,t,r,i){return i="function"==typeof i?i:n,null==e?e:ci(e,t,gi(r),i)},jn.values=zs,jn.valuesIn=function(e){return null==e?[]:Qt(e,Rs(e))},jn.without=sa,jn.words=Xs,jn.wrap=function(e,t){return ja(gi(t),e)},jn.xor=la,jn.xorBy=ua,jn.xorWith=ca,jn.zip=da,jn.zipObject=function(e,t){return hi(e||[],t||[],Jn)},jn.zipObjectDeep=function(e,t){return hi(e||[],t||[],Qr)},jn.zipWith=fa,jn.entries=Bs,jn.entriesIn=$s,jn.extend=_s,jn.extendWith=xs,ll(jn,jn),jn.add=bl,jn.attempt=Js,jn.camelCase=Us,jn.capitalize=qs,jn.ceil=wl,jn.clamp=function(e,t,r){return r===n&&(r=t,t=n),r!==n&&(r=(r=ys(r))==r?r:0),t!==n&&(t=(t=ys(t))==t?t:0),or(ys(e),t,r)},jn.clone=function(e){return ar(e,4)},jn.cloneDeep=function(e){return ar(e,5)},jn.cloneDeepWith=function(e,t){return ar(e,5,t="function"==typeof t?t:n)},jn.cloneWith=function(e,t){return ar(e,4,t="function"==typeof t?t:n)},jn.conformsTo=function(e,t){return null==t||sr(e,t,Ds(t))},jn.deburr=Hs,jn.defaultTo=function(e,t){return null==e||e!=e?t:e},jn.divide=_l,jn.endsWith=function(e,t,r){e=bs(e),t=si(t);var i=e.length,o=r=r===n?i:or(ms(r),0,i);return(r-=t.length)>=0&&e.slice(r,o)==t},jn.eq=za,jn.escape=function(e){return(e=bs(e))&&Y.test(e)?e.replace(W,nn):e},jn.escapeRegExp=function(e){return(e=bs(e))&&ne.test(e)?e.replace(te,"\\$&"):e},jn.every=function(e,t,r){var i=Va(e)?At:fr;return r&&vo(e,t,r)&&(t=n),i(e,ao(t,3))},jn.find=ya,jn.findIndex=Ho,jn.findKey=function(e,t){return jt(e,ao(t,3),vr)},jn.findLast=va,jn.findLastIndex=Vo,jn.findLastKey=function(e,t){return jt(e,ao(t,3),br)},jn.floor=xl,jn.forEach=ba,jn.forEachRight=wa,jn.forIn=function(e,t){return null==e?e:gr(e,ao(t,3),Rs)},jn.forInRight=function(e,t){return null==e?e:yr(e,ao(t,3),Rs)},jn.forOwn=function(e,t){return e&&vr(e,ao(t,3))},jn.forOwnRight=function(e,t){return e&&br(e,ao(t,3))},jn.get=Cs,jn.gt=Ua,jn.gte=qa,jn.has=function(e,t){return null!=e&&ho(e,t,kr)},jn.hasIn=As,jn.head=Go,jn.identity=il,jn.includes=function(e,t,n,r){e=Ga(e)?e:zs(e),n=n&&!r?ms(n):0;var i=e.length;return n<0&&(n=gn(i+n,0)),ls(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&$t(e,t,n)>-1},jn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ms(n);return i<0&&(i=gn(r+i,0)),$t(e,t,i)},jn.inRange=function(e,t,r){return t=hs(t),r===n?(r=t,t=0):r=hs(r),function(e,t,n){return e>=yn(t,n)&&e<gn(t,n)}(e=ys(e),t,r)},jn.invoke=Ns,jn.isArguments=Ha,jn.isArray=Va,jn.isArrayBuffer=Wa,jn.isArrayLike=Ga,jn.isArrayLikeObject=Ya,jn.isBoolean=function(e){return!0===e||!1===e||ns(e)&&Er(e)==y},jn.isBuffer=Ka,jn.isDate=Za,jn.isElement=function(e){return ns(e)&&1===e.nodeType&&!os(e)},jn.isEmpty=function(e){if(null==e)return!0;if(Ga(e)&&(Va(e)||"string"==typeof e||"function"==typeof e.splice||Ka(e)||cs(e)||Ha(e)))return!e.length;var t=po(e);if(t==x||t==C)return!e.size;if(xo(e))return!Mr(e).length;for(var n in e)if(Me.call(e,n))return!1;return!0},jn.isEqual=function(e,t){return Or(e,t)},jn.isEqualWith=function(e,t,r){var i=(r="function"==typeof r?r:n)?r(e,t):n;return i===n?Or(e,t,n,r):!!i},jn.isError=Qa,jn.isFinite=function(e){return"number"==typeof e&&Lt(e)},jn.isFunction=Xa,jn.isInteger=Ja,jn.isLength=es,jn.isMap=rs,jn.isMatch=function(e,t){return e===t||Nr(e,t,lo(t))},jn.isMatchWith=function(e,t,r){return r="function"==typeof r?r:n,Nr(e,t,lo(t),r)},jn.isNaN=function(e){return is(e)&&e!=+e},jn.isNative=function(e){if(_o(e))throw new xe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Dr(e)},jn.isNil=function(e){return null==e},jn.isNull=function(e){return null===e},jn.isNumber=is,jn.isObject=ts,jn.isObjectLike=ns,jn.isPlainObject=os,jn.isRegExp=as,jn.isSafeInteger=function(e){return Ja(e)&&e>=-9007199254740991&&e<=c},jn.isSet=ss,jn.isString=ls,jn.isSymbol=us,jn.isTypedArray=cs,jn.isUndefined=function(e){return e===n},jn.isWeakMap=function(e){return ns(e)&&po(e)==O},jn.isWeakSet=function(e){return ns(e)&&"[object WeakSet]"==Er(e)},jn.join=function(e,t){return null==e?"":Vt.call(e,t)},jn.kebabCase=Vs,jn.last=Qo,jn.lastIndexOf=function(e,t,r){var i=null==e?0:e.length;if(!i)return-1;var o=i;return r!==n&&(o=(o=ms(r))<0?gn(i+o,0):yn(o,i-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Bt(e,Ut,o,!0)},jn.lowerCase=Ws,jn.lowerFirst=Gs,jn.lt=ds,jn.lte=fs,jn.max=function(e){return e&&e.length?pr(e,il,Sr):n},jn.maxBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Sr):n},jn.mean=function(e){return qt(e,il)},jn.meanBy=function(e,t){return qt(e,ao(t,2))},jn.min=function(e){return e&&e.length?pr(e,il,Fr):n},jn.minBy=function(e,t){return e&&e.length?pr(e,ao(t,2),Fr):n},jn.stubArray=gl,jn.stubFalse=yl,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=El,jn.nth=function(e,t){return e&&e.length?zr(e,ms(t)):n},jn.noConflict=function(){return ft._===this&&(ft._=Be),this},jn.noop=ul,jn.now=Ca,jn.pad=function(e,t,n){e=bs(e);var r=(t=ms(t))?cn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Ui(ht(i),n)+e+Ui(pt(i),n)},jn.padEnd=function(e,t,n){e=bs(e);var r=(t=ms(t))?cn(e):0;return t&&r<t?e+Ui(t-r,n):e},jn.padStart=function(e,t,n){e=bs(e);var r=(t=ms(t))?cn(e):0;return t&&r<t?Ui(t-r,n)+e:e},jn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),bn(bs(e).replace(re,""),t||0)},jn.random=function(e,t,r){if(r&&"boolean"!=typeof r&&vo(e,t,r)&&(t=r=n),r===n&&("boolean"==typeof t?(r=t,t=n):"boolean"==typeof e&&(r=e,e=n)),e===n&&t===n?(e=0,t=1):(e=hs(e),t===n?(t=e,e=0):t=hs(t)),e>t){var i=e;e=t,t=i}if(r||e%1||t%1){var o=wn();return yn(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Wr(e,t)},jn.reduce=function(e,t,n){var r=Va(e)?Mt:Wt,i=arguments.length<3;return r(e,ao(t,4),n,i,cr)},jn.reduceRight=function(e,t,n){var r=Va(e)?Pt:Wt,i=arguments.length<3;return r(e,ao(t,4),n,i,dr)},jn.repeat=function(e,t,r){return t=(r?vo(e,t,r):t===n)?1:ms(t),Gr(bs(e),t)},jn.replace=function(){var e=arguments,t=bs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},jn.result=function(e,t,r){var i=-1,o=(t=yi(t,e)).length;for(o||(o=1,e=n);++i<o;){var a=null==e?n:e[jo(t[i])];a===n&&(i=o,a=r),e=Xa(a)?a.call(e):a}return e},jn.round=Sl,jn.runInContext=e,jn.sample=function(e){return(Va(e)?Kn:Kr)(e)},jn.size=function(e){if(null==e)return 0;if(Ga(e))return ls(e)?cn(e):e.length;var t=po(e);return t==x||t==C?e.size:Mr(e).length},jn.snakeCase=Ys,jn.some=function(e,t,r){var i=Va(e)?Ft:ni;return r&&vo(e,t,r)&&(t=n),i(e,ao(t,3))},jn.sortedIndex=function(e,t){return ri(e,t)},jn.sortedIndexBy=function(e,t,n){return ii(e,t,ao(n,2))},jn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ri(e,t);if(r<n&&za(e[r],t))return r}return-1},jn.sortedLastIndex=function(e,t){return ri(e,t,!0)},jn.sortedLastIndexBy=function(e,t,n){return ii(e,t,ao(n,2),!0)},jn.sortedLastIndexOf=function(e,t){if(null!=e&&e.length){var n=ri(e,t,!0)-1;if(za(e[n],t))return n}return-1},jn.startCase=Ks,jn.startsWith=function(e,t,n){return e=bs(e),n=null==n?0:or(ms(n),0,e.length),t=si(t),e.slice(n,n+t.length)==t},jn.subtract=kl,jn.sum=function(e){return e&&e.length?Gt(e,il):0},jn.sumBy=function(e,t){return e&&e.length?Gt(e,ao(t,2)):0},jn.template=function(e,t,r){var i=jn.templateSettings;r&&vo(e,t,r)&&(t=n),e=bs(e),t=xs({},t,i,Zi);var o,a,s=xs({},t.imports,i.imports,Zi),l=Ds(s),u=Qt(s,l),c=0,d=t.interpolate||be,f="__p += '",p=Te((t.escape||be).source+"|"+d.source+"|"+(d===Q?de:be).source+"|"+(t.evaluate||be).source+"|$","g"),h="//# sourceURL="+(Me.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++it+"]")+"\n";e.replace(p,function(t,n,r,i,s,l){return r||(r=i),f+=e.slice(c,l).replace(we,rn),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),f+="';\n";var m=Me.call(t,"variable")&&t.variable;if(m){if(ue.test(m))throw new xe("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(U,""):f).replace(q,"$1").replace(H,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Js(function(){return Ee(l,h+"return "+f).apply(n,u)});if(g.source=f,Qa(g))throw g;return g},jn.times=function(e,t){if((e=ms(e))<1||e>c)return[];var n=p,r=yn(e,p);t=ao(t),e-=p;for(var i=Yt(r,t);++n<e;)t(n);return i},jn.toFinite=hs,jn.toInteger=ms,jn.toLength=gs,jn.toLower=function(e){return bs(e).toLowerCase()},jn.toNumber=ys,jn.toSafeInteger=function(e){return e?or(ms(e),-9007199254740991,c):0===e?e:0},jn.toString=bs,jn.toUpper=function(e){return bs(e).toUpperCase()},jn.trim=function(e,t,r){if((e=bs(e))&&(r||t===n))return Kt(e);if(!e||!(t=si(t)))return e;var i=dn(e),o=dn(t);return bi(i,Jt(i,o),en(i,o)+1).join("")},jn.trimEnd=function(e,t,r){if((e=bs(e))&&(r||t===n))return e.slice(0,fn(e)+1);if(!e||!(t=si(t)))return e;var i=dn(e);return bi(i,0,en(i,dn(t))+1).join("")},jn.trimStart=function(e,t,r){if((e=bs(e))&&(r||t===n))return e.replace(re,"");if(!e||!(t=si(t)))return e;var i=dn(e);return bi(i,Jt(i,dn(t))).join("")},jn.truncate=function(e,t){var r=30,i="...";if(ts(t)){var o="separator"in t?t.separator:o;r="length"in t?ms(t.length):r,i="omission"in t?si(t.omission):i}var a=(e=bs(e)).length;if(on(e)){var s=dn(e);a=s.length}if(r>=a)return e;var l=r-cn(i);if(l<1)return i;var u=s?bi(s,0,l).join(""):e.slice(0,l);if(o===n)return u+i;if(s&&(l+=u.length-l),as(o)){if(e.slice(l).search(o)){var c,d=u;for(o.global||(o=Te(o.source,bs(fe.exec(o))+"g")),o.lastIndex=0;c=o.exec(d);)var f=c.index;u=u.slice(0,f===n?l:f)}}else if(e.indexOf(si(o),l)!=l){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+i},jn.unescape=function(e){return(e=bs(e))&&G.test(e)?e.replace(V,pn):e},jn.uniqueId=function(e){var t=++Pe;return bs(e)+t},jn.upperCase=Zs,jn.upperFirst=Qs,jn.each=ba,jn.eachRight=wa,jn.first=Go,ll(jn,(vl={},vr(jn,function(e,t){Me.call(jn.prototype,t)||(vl[t]=e)}),vl),{chain:!1}),jn.VERSION="4.17.21",Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){jn[e].placeholder=jn}),Tt(["drop","take"],function(e,t){Un.prototype[e]=function(r){r=r===n?1:gn(ms(r),0);var i=this.__filtered__&&!t?new Un(this):this.clone();return i.__filtered__?i.__takeCount__=yn(r,i.__takeCount__):i.__views__.push({size:yn(r,p),type:e+(i.__dir__<0?"Right":"")}),i},Un.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),Tt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=1==n||3==n;Un.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ao(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),Tt(["head","last"],function(e,t){var n="take"+(t?"Right":"");Un.prototype[e]=function(){return this[n](1).value()[0]}}),Tt(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Un.prototype[e]=function(){return this.__filtered__?new Un(this):this[n](1)}}),Un.prototype.compact=function(){return this.filter(il)},Un.prototype.find=function(e){return this.filter(e).head()},Un.prototype.findLast=function(e){return this.reverse().find(e)},Un.prototype.invokeMap=Yr(function(e,t){return"function"==typeof e?new Un(this):this.map(function(n){return Ar(n,e,t)})}),Un.prototype.reject=function(e){return this.filter(Fa(ao(e)))},Un.prototype.slice=function(e,t){e=ms(e);var r=this;return r.__filtered__&&(e>0||t<0)?new Un(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),t!==n&&(r=(t=ms(t))<0?r.dropRight(-t):r.take(t-e)),r)},Un.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Un.prototype.toArray=function(){return this.take(p)},vr(Un.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=jn[i?"take"+("last"==t?"Right":""):t],a=i||/^find/.test(t);o&&(jn.prototype[t]=function(){var t=this.__wrapped__,s=i?[1]:arguments,l=t instanceof Un,u=s[0],c=l||Va(t),d=function(e){var t=o.apply(jn,Rt([e],s));return i&&f?t[0]:t};c&&r&&"function"==typeof u&&1!=u.length&&(l=c=!1);var f=this.__chain__,p=!!this.__actions__.length,h=a&&!f,m=l&&!p;if(!a&&c){t=m?t:new Un(this);var g=e.apply(t,s);return g.__actions__.push({func:ha,args:[d],thisArg:n}),new zn(g,f)}return h&&m?e.apply(this,s):(g=this.thru(d),h?i?g.value()[0]:g.value():g)})}),Tt(["pop","push","shift","sort","splice","unshift"],function(e){var t=Ie[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);jn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Va(i)?i:[],e)}return this[n](function(n){return t.apply(Va(n)?n:[],e)})}}),vr(Un.prototype,function(e,t){var n=jn[t];if(n){var r=n.name+"";Me.call(In,r)||(In[r]=[]),In[r].push({name:t,func:n})}}),In[ji(n,2).name]=[{name:"wrapper",func:n}],Un.prototype.clone=function(){var e=new Un(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Un.prototype.reverse=function(){if(this.__filtered__){var e=new Un(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Un.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Va(e),r=t<0,i=n?e.length:0,o=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=yn(t,e+a);break;case"takeRight":e=gn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,d=c.length,f=0,p=yn(l,this.__takeCount__);if(!n||!r&&i==l&&p==l)return fi(e,this.__actions__);var h=[];e:for(;l--&&f<p;){for(var m=-1,g=e[u+=t];++m<d;){var y=c[m],v=y.iteratee,b=y.type,w=v(g);if(2==b)g=w;else if(!w){if(1==b)continue e;break e}}h[f++]=g}return h},jn.prototype.at=ma,jn.prototype.chain=function(){return pa(this)},jn.prototype.commit=function(){return new zn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===n&&(this.__values__=ps(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?n:this.__values__[this.__index__++]}},jn.prototype.plant=function(e){for(var t,r=this;r instanceof $n;){var i=$o(r);i.__index__=0,i.__values__=n,t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t},jn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Un){var t=e;return this.__actions__.length&&(t=new Un(this)),(t=t.reverse()).__actions__.push({func:ha,args:[ta],thisArg:n}),new zn(t,this.__chain__)}return this.thru(ta)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return fi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,Ze&&(jn.prototype[Ze]=function(){return this}),jn}();ht?((ht.exports=hn)._=hn,pt._=hn):ft._=hn}.call(rH)),nH.exports;var e,t}function oH(){return Jq||(Jq=1,function(e){var t=tH&&tH.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=tH&&tH.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=tH&&tH.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(r,e,i);return n(r,e),r},i=tH&&tH.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalBlueprint=void 0;var o=i(LI()),a=i(iH()),s=r(S()),l=aU();!function(e){function t(e,t){return"".concat(e,"-icon-").concat(a.default.kebabCase(t))}e.Icon=function(e){var n=e.icon,r=e.className,i=e.size,a=void 0===i?"standard":i,u=s.useContext(l.MosaicContext).blueprintNamespace;return s.createElement("span",{className:(0,o.default)(r,t(u,n),"".concat(u,"-icon-").concat(a))})},e.getClasses=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return"".concat(e,"-").concat(a.default.kebabCase(t))}).join(" ")},e.getIconClass=t}(e.OptionalBlueprint||(e.OptionalBlueprint={}))}(tH)),tH}function aH(){if(eH)return Zq;eH=1;var e=Zq&&Zq.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=Zq&&Zq.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zq,"__esModule",{value:!0}),Zq.MosaicZeroState=void 0;var n=t(LI()),r=t(Qq()),i=t(S()),o=aU(),a=oH(),s=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.replace=function(){return Promise.resolve(e.props.createNode()).then(function(t){return e.context.mosaicActions.replaceWith([],t)}).catch(r.default)},e}return e(s,t),s.prototype.render=function(){return i.default.createElement("div",{className:(0,n.default)("mosaic-zero-state",a.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"NON_IDEAL_STATE"))},i.default.createElement("div",{className:a.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"NON_IDEAL_STATE_VISUAL")},i.default.createElement(a.OptionalBlueprint.Icon,{className:"default-zero-state-icon",size:"large",icon:"APPLICATIONS"})),i.default.createElement("h4",{className:a.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"HEADING")},"No Windows Present"),i.default.createElement("div",null,this.props.createNode&&i.default.createElement("button",{className:(0,n.default)(a.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"BUTTON"),a.OptionalBlueprint.getIconClass(this.context.blueprintNamespace,"ADD")),onClick:this.replace},"Add New Window")))},s.contextType=o.MosaicContext,s}(i.default.PureComponent);return Zq.MosaicZeroState=s,Zq}var sH,lH,uH,cH,dH={};function fH(){if(cH)return uH;cH=1;var e=function(){if(lH)return sH;lH=1;var e=VM();return sH=function(t,n){return e(n,function(e){return t[e]})}}(),t=gM();return uH=function(n){return null==n?[]:e(n,t(n))}}var pH,hH={};function mH(){return pH||(pH=1,Object.defineProperty(hH,"__esModule",{value:!0}),hH.MosaicDropTargetPosition=void 0,hH.MosaicDropTargetPosition={TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right"}),hH}var gH,yH,vH,bH={},wH={};function _H(){return gH||(gH=1,Object.defineProperty(wH,"__esModule",{value:!0}),wH.MosaicDragType=void 0,wH.MosaicDragType={WINDOW:"MosaicWindow"}),wH}function xH(){if(yH)return bH;yH=1;var e=bH&&bH.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=bH&&bH.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bH,"__esModule",{value:!0}),bH.MosaicDropTarget=void 0;var n=t(LI()),r=t(S()),i=Uj,o=aU(),a=_H(),s=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return e(i,t),i.prototype.render=function(){var e=this.props,t=e.position,i=e.isOver,o=e.connectDropTarget,a=e.draggedMosaicId;return o(r.default.createElement("div",{className:(0,n.default)("drop-target",t,{"drop-target-hover":i&&a===this.context.mosaicId})}))},i.contextType=o.MosaicContext,i}(r.default.PureComponent);return bH.MosaicDropTarget=(0,i.DropTarget)(a.MosaicDragType.WINDOW,{drop:function(e,t,n){return n.context.mosaicId===(t.getItem()||{}).mosaicId?{path:e.path,position:e.position}:{}}},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),draggedMosaicId:(t.getItem()||{}).mosaicId}})(s),bH}function EH(){if(vH)return dH;vH=1;var e=dH&&dH.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dH,"__esModule",{value:!0}),dH.RootDropTargets=void 0;var t=e(LI()),n=e(fH()),r=e(S()),i=Uj,o=mH(),a=xH(),s=_H(),l=r.default.memo(function(e){var i=function(e,t){var n=r.default.useRef(e),i=r.default.useState(0)[1],o=function(e){n.current=e,i(function(e){return e+1})};e||(n.current=!1);return r.default.useEffect(function(){if(n.current!==e&&e){var r=window.setTimeout(function(){return o(!0)},t);return function(){window.clearTimeout(r)}}},[e]),n.current}(e.isDragging,0);return r.default.createElement("div",{className:(0,t.default)("drop-target-container",{"-dragging":i})},(0,n.default)(o.MosaicDropTargetPosition).map(function(e){return r.default.createElement(a.MosaicDropTarget,{position:e,path:[],key:e})}))});l.displayName="RootDropTargetsComponent";return dH.RootDropTargets=(0,i.DropTarget)(s.MosaicDragType.WINDOW,{},function(e,t){return{isDragging:null!==t.getItem()&&t.getItemType()===s.MosaicDragType.WINDOW}})(l),dH}var SH,kH,TH,CH,AH,IH,OH,NH,DH,RH,MH,PH,FH,LH,jH,BH,$H,zH,UH,qH,HH,VH={},WH={exports:{}};function GH(){return SH||(SH=1,function(e,t){function n(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var r="object"==typeof process&&!0;function i(e,t){if(!e){if(r)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=i;var o=Object.prototype.hasOwnProperty,a=Array.prototype.splice,s=Object.prototype.toString;function l(e){return s.call(e).slice(8,-1)}var u=Object.assign||function(e,t){return c(t).forEach(function(n){o.call(t,n)&&(e[n]=t[n])}),e},c="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function d(e){return Array.isArray(e)?u(e.constructor(e.length),e):"Map"===l(e)?new Map(e):"Set"===l(e)?new Set(e):e&&"object"==typeof e?u(Object.create(Object.getPrototypeOf(e)),e):e}var f=function(){function e(){this.commands=u({},p),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var n=this,r="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(r)||i(!Array.isArray(r),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),i("object"==typeof r&&null!==r,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."});var a=e;return c(r).forEach(function(t){if(o.call(n.commands,t)){var i=e===a;a=n.commands[t](r[t],a,r,e),i&&n.isEquals(a,e)&&(a=e)}else{var s="Map"===l(e)?n.update(e.get(t),r[t]):n.update(e[t],r[t]),u="Map"===l(a)?a.get(t):a[t];n.isEquals(s,u)&&(void 0!==s||o.call(e,t))||(a===e&&(a=d(e)),"Map"===l(a)?a.set(t,s):a[t]=s)}}),a},e}();t.Context=f;var p={$push:function(e,t,n){return m(t,n,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,n){return m(t,n,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,r,o){return function(e,t){i(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+n(e)}),y(t.$splice)}(t,r),e.forEach(function(e){y(e),t===o&&e.length&&(t=d(o)),a.apply(t,e)}),t},$set:function(e,t,n){return function(e){i(1===Object.keys(e).length,function(){return"Cannot have more than one key in an object with $set"})}(n),e},$toggle:function(e,t){g(e,"$toggle");var n=e.length?d(t):t;return e.forEach(function(e){n[e]=!t[e]}),n},$unset:function(e,t,n,r){return g(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===r&&(t=d(r)),delete t[e])}),t},$add:function(e,t,n,r){return v(t,"$add"),g(e,"$add"),"Map"===l(t)?e.forEach(function(e){var n=e[0],i=e[1];t===r&&t.get(n)!==i&&(t=d(r)),t.set(n,i)}):e.forEach(function(e){t!==r||t.has(e)||(t=d(r)),t.add(e)}),t},$remove:function(e,t,n,r){return v(t,"$remove"),g(e,"$remove"),e.forEach(function(e){t===r&&t.has(e)&&(t=d(r)),t.delete(e)}),t},$merge:function(e,t,r,o){var a,s;return a=t,i((s=e)&&"object"==typeof s,function(){return"update(): $merge expects a spec of type 'object'; got "+n(s)}),i(a&&"object"==typeof a,function(){return"update(): $merge expects a target of type 'object'; got "+n(a)}),c(e).forEach(function(n){e[n]!==t[n]&&(t===o&&(t=d(o)),t[n]=e[n])}),t},$apply:function(e,t){var r;return i("function"==typeof(r=e),function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."}),e(t)}},h=new f;function m(e,t,r){i(Array.isArray(e),function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(e)+"."}),g(t[r],r)}function g(e,t){i(Array.isArray(e),function(){return"update(): expected spec of "+n(t)+" to be an array; got "+n(e)+". Did you forget to wrap your parameter in an array?"})}function y(e){i(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(e)+". Did you forget to wrap your parameters in an array?"})}function v(e,t){var r=l(e);i("Map"===r||"Set"===r,function(){return"update(): "+n(t)+" expects a target of type Set or Map; got "+n(r)})}t.isEquals=h.update.isEquals,t.extend=h.extend,t.default=h.update,t.default.default=e.exports=u(t.default,t)}(WH,WH.exports)),WH.exports}function YH(){if(TH)return kH;return TH=1,kH=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}}function KH(){if(OH)return IH;OH=1;var e=function(){if(AH)return CH;AH=1;var e=RU(),t=1/0;return CH=function(n){return n?(n=e(n))===t||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0}}();return IH=function(t){var n=e(t),r=n%1;return n==n?r?n-r:n:0}}function ZH(){if(MH)return RH;MH=1;var e=YH(),t=KH();return RH=function(n,r,i){var o=null==n?0:n.length;return o?(r=i||void 0===r?1:t(r),e(n,0,(r=o-r)<0?0:r)):[]}}function QH(){if(FH)return PH;FH=1;var e=jM();return PH=function(t,n){return e(t,n)}}function XH(){if(qH)return VH;qH=1;var e=VH&&VH.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(VH,"__esModule",{value:!0}),VH.createExpandUpdate=VH.createHideUpdate=VH.createDragToUpdates=VH.createRemoveUpdate=VH.updateTree=VH.buildSpecFromUpdate=void 0;var t=e(GH()),n=e(function(){if(DH)return NH;DH=1;var e=YH(),t=KH();return NH=function(n,r,i){var o=null==n?0:n.length;return o?(r=i||void 0===r?1:t(r),e(n,r<0?0:r,o)):[]}}()),r=e(ZH()),i=e(QH()),o=e(jH?LH:(jH=1,LH=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0})),a=e(function(){if($H)return BH;$H=1;var e=rP();return BH=function(t,n,r){return null==t?t:e(t,n,r)}}()),s=e(function(){if(UH)return zH;UH=1;var e=YH(),t=KH();return zH=function(n,r,i){return n&&n.length?(r=i||void 0===r?1:t(r),e(n,0,r<0?0:r)):[]}}()),l=mH(),u=Wq();function c(e){return e.path.length>0?(0,a.default)({},e.path,e.spec):e.spec}function d(e,n){var r=e;return n.forEach(function(e){r=(0,t.default)(r,c(e))}),r}function f(e,t){var n=(0,r.default)(t),i=(0,o.default)(t),a=n.concat((0,u.getOtherBranch)(i));return{path:n,spec:{$set:(0,u.getAndAssertNodeAtPathExists)(e,a)}}}function p(e,t,n){return(0,i.default)((0,s.default)(e,n),(0,s.default)(t,n))}return VH.buildSpecFromUpdate=c,VH.updateTree=d,VH.createRemoveUpdate=f,VH.createDragToUpdates=function(e,t,r,i){var o=(0,u.getAndAssertNodeAtPathExists)(e,r),a=[];p(t,r,r.length)?o=d(o,[f(o,(0,n.default)(t,r.length))]):(a.push(f(e,t)),p(t,r,t.length-1)&&r.splice(t.length-1,1));var s,c,h=(0,u.getAndAssertNodeAtPathExists)(e,t);i===l.MosaicDropTargetPosition.LEFT||i===l.MosaicDropTargetPosition.TOP?(s=h,c=o):(s=o,c=h);var m="column";return i!==l.MosaicDropTargetPosition.LEFT&&i!==l.MosaicDropTargetPosition.RIGHT||(m="row"),a.push({path:r,spec:{$set:{first:s,second:c,direction:m}}}),a},VH.createHideUpdate=function(e){return{path:(0,r.default)(e),spec:{splitPercentage:{$set:"first"===(0,o.default)(e)?0:100}}}},VH.createExpandUpdate=function(e,t){for(var n,r={},i=e.length-1;i>=0;i--){var o=e[i];(n={splitPercentage:{$set:"first"===o?t:100-t}})[o]=r,r=n}return{spec:r,path:[]}},VH}function JH(){if(HH)return PI;HH=1;var e=PI&&PI.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=PI&&PI.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},n=PI&&PI.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(PI,"__esModule",{value:!0}),PI.Mosaic=PI.MosaicWithoutDragDropContext=void 0;var r=n(LI());n(function(){if(zR)return $R;zR=1;var e=YI(),t=tP(),n=Object.prototype.hasOwnProperty,r=t(function(t,r,i){n.call(t,i)?++t[i]:e(t,i,1)});return $R=r}()),n(gM()),n(uP());var i=n(S()),o=Uj,a=n(U$),s=n(function(){if(Hz)return q$;Hz=1,Object.defineProperty(q$,"__esModule",{value:!0}),q$.default=void 0;var e=Uz,t=qz,n={backends:[{backend:kz.HTML5Backend,transition:t.MouseTransition},{backend:e.TouchBackend,options:{enableMouseEvents:!0},preview:!0,transition:t.TouchTransition}]};return q$.default=n,q$}()),l=rU(),u=aU(),c=Gq(),d=aH(),f=EH(),p=XH();function h(e){return null!=e.initialValue}var m=function(t){function n(){var e,n=this;return(n=t.apply(this,arguments)||this).state={currentNode:null,lastInitialValue:null,mosaicId:null!==(e=n.props.mosaicId)&&void 0!==e?e:(0,l.v4)()},n.updateRoot=function(e,t){void 0===t&&(t=!1);var r=n.getRoot()||{};n.replaceRoot((0,p.updateTree)(r,e),t)},n.replaceRoot=function(e,t){void 0===t&&(t=!1),n.props.onChange(e),!t&&n.props.onRelease&&n.props.onRelease(e),h(n.props)&&n.setState({currentNode:e})},n.actions={updateTree:n.updateRoot,remove:function(e){0===e.length?n.replaceRoot(null):n.updateRoot([(0,p.createRemoveUpdate)(n.getRoot(),e)])},expand:function(e,t){return void 0===t&&(t=70),n.updateRoot([(0,p.createExpandUpdate)(e,t)])},getRoot:function(){return n.getRoot()},hide:function(e){return n.updateRoot([(0,p.createHideUpdate)(e)])},replaceWith:function(e,t){return n.updateRoot([{path:e,spec:{$set:t}}])}},n.childContext={mosaicActions:n.actions,mosaicId:n.state.mosaicId,blueprintNamespace:n.props.blueprintNamespace},n}return e(n,t),n.getDerivedStateFromProps=function(e,t){return e.mosaicId&&(t.mosaicId,e.mosaicId),h(e)&&e.initialValue!==t.lastInitialValue?{lastInitialValue:e.initialValue,currentNode:e.initialValue}:null},n.prototype.render=function(){var e=this.props.className;return i.default.createElement(u.MosaicContext.Provider,{value:this.childContext},i.default.createElement("div",{className:(0,r.default)(e,"mosaic mosaic-drop-target")},this.renderTree(),i.default.createElement(f.RootDropTargets,null)))},n.prototype.getRoot=function(){return h(this.props)?this.state.currentNode:this.props.value},n.prototype.renderTree=function(){var e=this.getRoot();if(this.validateTree(e),null==e)return this.props.zeroStateView;var t=this.props,n=t.renderTile,r=t.resize;return i.default.createElement(c.MosaicRoot,{root:e,renderTile:n,resize:r})},n.prototype.validateTree=function(e){},n.defaultProps={onChange:function(){},zeroStateView:i.default.createElement(d.MosaicZeroState,null),className:"mosaic-blueprint-theme",blueprintNamespace:"bp3"},n}(i.default.PureComponent);PI.MosaicWithoutDragDropContext=m;var g=function(n){function r(){return null!==n&&n.apply(this,arguments)||this}return e(r,n),r.prototype.render=function(){return i.default.createElement(o.DndProvider,t({backend:a.default,options:s.default},this.props.dragAndDropManager&&{manager:this.props.dragAndDropManager}),i.default.createElement(m,t({},this.props)))},r}(i.default.PureComponent);return PI.Mosaic=g,PI}var eV,tV,nV,rV,iV,oV,aV,sV,lV,uV,cV,dV,fV,pV,hV,mV,gV,yV,vV,bV,wV={};function _V(){if(oV)return iV;oV=1;var e=rV?nV:(rV=1,nV=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}),t=Math.max;return iV=function(n,r,i){return r=t(void 0===r?n.length-1:r,0),function(){for(var o=arguments,a=-1,s=t(o.length-r,0),l=Array(s);++a<s;)l[a]=o[r+a];a=-1;for(var u=Array(r+1);++a<r;)u[a]=o[a];return u[r]=i(l),e(n,this,u)}},iV}function xV(){if(uV)return lV;uV=1;var e=sV?aV:(sV=1,aV=function(e){return function(){return e}}),t=GI(),n=XM();return lV=t?function(n,r){return t(n,"toString",{configurable:!0,enumerable:!1,value:e(r),writable:!0})}:n}function EV(){if(pV)return fV;pV=1;var e=xV(),t=function(){if(dV)return cV;dV=1;var e=Date.now;return cV=function(t){var n=0,r=0;return function(){var i=e(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}},cV}(),n=t(e);return fV=n}function SV(){if(yV)return gV;yV=1;var e=tV?eV:(tV=1,eV=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout(function(){e.apply(void 0,n)},t)}),t=function(){if(mV)return hV;mV=1;var e=XM(),t=_V(),n=EV();return hV=function(r,i){return n(t(r,i,e),r+"")}}()(function(t,n){return e(t,1,n)});return gV=t}var kV,TV,CV={},AV={},IV={};function OV(){return kV||(kV=1,function(e){var t=IV&&IV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultToolbarButton=e.DefaultToolbarButton=void 0;var n=t(LI()),r=t(S()),i=aU(),o=oH();e.DefaultToolbarButton=function(e){var t=e.title,a=e.className,s=e.onClick,l=e.text,u=r.default.useContext(i.MosaicContext).blueprintNamespace;return r.default.createElement("button",{title:t,onClick:s,className:(0,n.default)("mosaic-default-control",o.OptionalBlueprint.getClasses(u,"BUTTON","MINIMAL"),a)},l&&r.default.createElement("span",{className:"control-text"},l))};e.createDefaultToolbarButton=function(t,n,i,o){return r.default.createElement(e.DefaultToolbarButton,{title:t,className:n,onClick:i,text:o})}}(IV)),IV}function NV(){if(TV)return AV;TV=1;var e=AV&&AV.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=AV&&AV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(AV,"__esModule",{value:!0}),AV.ExpandButton=void 0;var n=t(LI()),r=t(S()),i=aU(),o=oH(),a=OV(),s=function(t){function s(){return null!==t&&t.apply(this,arguments)||this}return e(s,t),s.prototype.render=function(){var e=this;return r.default.createElement(i.MosaicContext.Consumer,null,function(t){var i=t.mosaicActions;return r.default.createElement(a.DefaultToolbarButton,{title:"Expand",className:(0,n.default)("expand-button",o.OptionalBlueprint.getIconClass(e.context.blueprintNamespace,"MAXIMIZE")),onClick:e.createExpand(i)})})},s.prototype.createExpand=function(e){var t=this;return function(){e.expand(t.context.mosaicWindowActions.getPath()),t.props.onClick&&t.props.onClick()}},s.contextType=i.MosaicWindowContext,s}(r.default.PureComponent);return AV.ExpandButton=s,AV}var DV,RV={};function MV(){if(DV)return RV;DV=1;var e=RV&&RV.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=RV&&RV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(RV,"__esModule",{value:!0}),RV.RemoveButton=void 0;var n=t(LI()),r=t(S()),i=aU(),o=oH(),a=OV(),s=function(t){function s(){return null!==t&&t.apply(this,arguments)||this}return e(s,t),s.prototype.render=function(){var e=this;return r.default.createElement(i.MosaicContext.Consumer,null,function(t){var i=t.mosaicActions,s=t.blueprintNamespace;return r.default.createElement(a.DefaultToolbarButton,{title:"Close Window",className:(0,n.default)("close-button",o.OptionalBlueprint.getIconClass(s,"CROSS")),onClick:e.createRemove(i)})})},s.prototype.createRemove=function(e){var t=this;return function(){e.remove(t.context.mosaicWindowActions.getPath()),t.props.onClick&&t.props.onClick()}},s.contextType=i.MosaicWindowContext,s}(r.default.PureComponent);return RV.RemoveButton=s,RV}var PV,FV={};function LV(){if(PV)return FV;PV=1;var e=FV&&FV.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=FV&&FV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(FV,"__esModule",{value:!0}),FV.ReplaceButton=void 0;var n=t(LI()),r=t(Qq()),i=t(S()),o=aU(),a=oH(),s=OV(),l=function(t){function l(){var e=null!==t&&t.apply(this,arguments)||this;return e.replace=function(){e.context.mosaicWindowActions.replaceWithNew().then(function(){e.props.onClick&&e.props.onClick()}).catch(r.default)},e}return e(l,t),l.prototype.render=function(){return i.default.createElement(s.DefaultToolbarButton,{title:"Replace Window",className:(0,n.default)("replace-button",a.OptionalBlueprint.getIconClass(this.context.blueprintNamespace,"EXCHANGE")),onClick:this.replace})},l.contextType=o.MosaicWindowContext,l}(i.default.PureComponent);return FV.ReplaceButton=l,FV}var jV,BV,$V={};function zV(){if(jV)return $V;jV=1;var e=$V&&$V.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=$V&&$V.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($V,"__esModule",{value:!0}),$V.SplitButton=void 0;var n=t(LI()),r=t(Qq()),i=t(S()),o=aU(),a=oH(),s=OV(),l=function(t){function l(){var e=null!==t&&t.apply(this,arguments)||this;return e.split=function(){e.context.mosaicWindowActions.split().then(function(){e.props.onClick&&e.props.onClick()}).catch(r.default)},e}return e(l,t),l.prototype.render=function(){return i.default.createElement(s.DefaultToolbarButton,{title:"Split Window",className:(0,n.default)("split-button",a.OptionalBlueprint.getIconClass(this.context.blueprintNamespace,"ADD_COLUMN_RIGHT")),onClick:this.split})},l.contextType=o.MosaicWindowContext,l}(i.default.PureComponent);return $V.SplitButton=l,$V}function UV(){if(BV)return CV;BV=1;var e=CV&&CV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(CV,"__esModule",{value:!0}),CV.DEFAULT_CONTROLS_WITHOUT_CREATION=CV.DEFAULT_CONTROLS_WITH_CREATION=void 0;var t=e(S()),n=NV(),r=MV(),i=LV(),o=zV();return CV.DEFAULT_CONTROLS_WITH_CREATION=t.default.Children.toArray([t.default.createElement(i.ReplaceButton,null),t.default.createElement(o.SplitButton,null),t.default.createElement(n.ExpandButton,null),t.default.createElement(r.RemoveButton,null)]),CV.DEFAULT_CONTROLS_WITHOUT_CREATION=t.default.Children.toArray([t.default.createElement(n.ExpandButton,null),t.default.createElement(r.RemoveButton,null)]),CV}var qV,HV,VV,WV={};function GV(){if(qV)return WV;qV=1;var e=WV&&WV.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=WV&&WV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(WV,"__esModule",{value:!0}),WV.Separator=void 0;var n=t(S()),r=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype.render=function(){return n.default.createElement("div",{className:"separator"})},r}(n.default.PureComponent);return WV.Separator=r,WV}function YV(){return HV||(HV=1,function(e){var t=wV&&wV.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),n=wV&&wV.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)},r=wV&&wV.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.MosaicWindow=e.SourceDropConnectedInternalMosaicWindow=e.SourceConnectedInternalMosaicWindow=e.InternalMosaicWindow=void 0;var i=r(LI()),o=r(SV()),a=r(ZH()),s=r(function(){if(bV)return vV;bV=1;var e=hM(),t=FM(),n=QI(),r=XI(),i=mM(),o=dO(),a=fM(),s=cM(),l=Object.prototype.hasOwnProperty;return vV=function(u){if(null==u)return!0;if(i(u)&&(r(u)||"string"==typeof u||"function"==typeof u.splice||o(u)||s(u)||n(u)))return!u.length;var c=t(u);if("[object Map]"==c||"[object Set]"==c)return!u.size;if(a(u))return!e(u).length;for(var d in u)if(l.call(u,d))return!1;return!0}}()),l=r(QH()),u=r(fH()),c=r(S()),d=Uj,f=UV(),p=GV(),h=aU(),m=mH(),g=xH(),y=_H(),v=XH(),b=Wq(),w=oH(),_=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={additionalControlsOpen:!1},t.rootElement=null,t.renderDropTarget=function(e){var n=t.props.path;return c.default.createElement(g.MosaicDropTarget,{position:e,path:n,key:e})},t.split=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.checkCreateNode();var r=t.props,i=r.createNode,o=r.path,a=t.context.mosaicActions,s=a.getRoot(),l=t.rootElement.offsetWidth>t.rootElement.offsetHeight?"row":"column";return Promise.resolve(i.apply(void 0,e)).then(function(e){return a.replaceWith(o,{direction:l,second:e,first:(0,b.getAndAssertNodeAtPathExists)(s,o)})})},t.swap=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.checkCreateNode();var r=t.context.mosaicActions,i=t.props,o=i.createNode,a=i.path;return Promise.resolve(o.apply(void 0,e)).then(function(e){return r.replaceWith(a,e)})},t.setAdditionalControlsOpen=function(e){var n,r;t.setState({additionalControlsOpen:e}),null===(r=(n=t.props).onAdditionalControlsToggle)||void 0===r||r.call(n,e)},t.getPath=function(){return t.props.path},t.connectDragSource=function(e){return(0,t.props.connectDragSource)(e)},t.childContext={blueprintNamespace:t.context.blueprintNamespace,mosaicWindowActions:{split:t.split,replaceWithNew:t.swap,setAdditionalControlsOpen:t.setAdditionalControlsOpen,getPath:t.getPath,connectDragSource:t.connectDragSource}},t}return t(n,e),n.prototype.render=function(){var e=this,t=this.props,n=t.className,r=t.isOver,o=t.renderPreview,a=t.additionalControls,s=t.connectDropTarget,l=t.connectDragPreview,d=t.draggedMosaicId;return c.default.createElement(h.MosaicWindowContext.Provider,{value:this.childContext},s(c.default.createElement("div",{className:(0,i.default)("mosaic-window mosaic-drop-target",n,{"drop-target-hover":r&&d===this.context.mosaicId,"additional-controls-open":this.state.additionalControlsOpen}),ref:function(t){return e.rootElement=t}},this.renderToolbar(),c.default.createElement("div",{className:"mosaic-window-body"},this.props.children),c.default.createElement("div",{className:"mosaic-window-body-overlay",onClick:function(){return e.setAdditionalControlsOpen(!1)}}),c.default.createElement("div",{className:"mosaic-window-additional-actions-bar"},a),l(o(this.props)),c.default.createElement("div",{className:"drop-target-container"},(0,u.default)(m.MosaicDropTargetPosition).map(this.renderDropTarget)))))},n.prototype.getToolbarControls=function(){var e=this.props,t=e.toolbarControls,n=e.createNode;return t||(n?f.DEFAULT_CONTROLS_WITH_CREATION:f.DEFAULT_CONTROLS_WITHOUT_CREATION)},n.prototype.renderToolbar=function(){var e,t=this,n=this.props,r=n.title,o=n.draggable,a=n.additionalControls,l=n.additionalControlButtonText,u=n.path,d=n.renderToolbar,f=this.state.additionalControlsOpen,h=this.getToolbarControls(),m=o&&u.length>0,g=m?this.props.connectDragSource:function(e){return e};if(d){var y=g(d(this.props,o));return c.default.createElement("div",{className:(0,i.default)("mosaic-window-toolbar",{draggable:m})},y)}var v=g(c.default.createElement("div",{title:r,className:"mosaic-window-title"},r)),b=!(0,s.default)(a);return c.default.createElement("div",{className:(0,i.default)("mosaic-window-toolbar",{draggable:m})},v,c.default.createElement("div",{className:(0,i.default)("mosaic-window-controls",w.OptionalBlueprint.getClasses("BUTTON_GROUP"))},b&&c.default.createElement("button",{onClick:function(){return t.setAdditionalControlsOpen(!f)},className:(0,i.default)(w.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"BUTTON","MINIMAL"),w.OptionalBlueprint.getIconClass(this.context.blueprintNamespace,"MORE"),(e={},e[w.OptionalBlueprint.getClasses(this.context.blueprintNamespace,"ACTIVE")]=f,e))},c.default.createElement("span",{className:"control-text"},l)),b&&c.default.createElement(p.Separator,null),h))},n.prototype.checkCreateNode=function(){if(null==this.props.createNode)throw new Error("Operation invalid unless `createNode` is defined")},n.defaultProps={additionalControlButtonText:"More",draggable:!0,renderPreview:function(e){var t=e.title;return c.default.createElement("div",{className:"mosaic-preview"},c.default.createElement("div",{className:"mosaic-window-toolbar"},c.default.createElement("div",{className:"mosaic-window-title"},t)),c.default.createElement("div",{className:"mosaic-window-body"},c.default.createElement("h4",null,t),c.default.createElement(w.OptionalBlueprint.Icon,{className:"default-preview-icon",size:"large",icon:"APPLICATION"})))},renderToolbar:null},n.contextType=h.MosaicContext,n}(c.default.Component);e.InternalMosaicWindow=_;var x={beginDrag:function(e,t,n){e.onDragStart&&e.onDragStart();var r=(0,o.default)(function(){return n.context.mosaicActions.hide(n.props.path)});return{mosaicId:n.context.mosaicId,hideTimer:r}},endDrag:function(e,t,n){var r=t.getItem().hideTimer;window.clearTimeout(r);var i=n.props.path,o=t.getDropResult()||{},s=n.context.mosaicActions,u=o.position,c=o.path;null==u||null==c||(0,l.default)(c,i)?(s.updateTree([{path:(0,a.default)(i),spec:{splitPercentage:{$set:null}}}]),e.onDragEnd&&e.onDragEnd("reset")):(s.updateTree((0,v.createDragToUpdates)(s.getRoot(),i,c,u)),e.onDragEnd&&e.onDragEnd("drop"))}};e.SourceConnectedInternalMosaicWindow=(0,d.DragSource)(y.MosaicDragType.WINDOW,x,function(e,t){return{connectDragSource:e.dragSource(),connectDragPreview:e.dragPreview()}})(_),e.SourceDropConnectedInternalMosaicWindow=(0,d.DropTarget)(y.MosaicDragType.WINDOW,{},function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),draggedMosaicId:(t.getItem()||{}).mosaicId}})(e.SourceConnectedInternalMosaicWindow);var E=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return t(i,r),i.prototype.render=function(){return c.default.createElement(e.SourceDropConnectedInternalMosaicWindow,n({},this.props))},i}(c.default.PureComponent);e.MosaicWindow=E}(wV)),wV}function KV(){return VV||(VV=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CONTROLS_WITHOUT_CREATION=e.DEFAULT_CONTROLS_WITH_CREATION=e.RemoveButton=e.SplitButton=e.ReplaceButton=e.ExpandButton=e.Separator=e.MosaicZeroState=e.DefaultToolbarButton=e.createDefaultToolbarButton=e.MosaicWindow=e.isParent=e.getPathToCorner=e.getOtherDirection=e.getOtherBranch=e.getNodeAtPath=e.getLeaves=e.getAndAssertNodeAtPathExists=e.Corner=e.createBalancedTreeFromLeaves=e.updateTree=e.createRemoveUpdate=e.createHideUpdate=e.createExpandUpdate=e.createDragToUpdates=e.buildSpecFromUpdate=e.MosaicWindowContext=e.MosaicContext=e.MosaicDragType=e.MosaicWithoutDragDropContext=e.Mosaic=void 0;
/**
     * @license
     * Copyright 2019 Kevin Verdieck, originally developed at Palantir Technologies, Inc.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     */
var t=JH();Object.defineProperty(e,"Mosaic",{enumerable:!0,get:function(){return t.Mosaic}}),Object.defineProperty(e,"MosaicWithoutDragDropContext",{enumerable:!0,get:function(){return t.MosaicWithoutDragDropContext}});var n=_H();Object.defineProperty(e,"MosaicDragType",{enumerable:!0,get:function(){return n.MosaicDragType}});var r=aU();Object.defineProperty(e,"MosaicContext",{enumerable:!0,get:function(){return r.MosaicContext}}),Object.defineProperty(e,"MosaicWindowContext",{enumerable:!0,get:function(){return r.MosaicWindowContext}});var i=XH();Object.defineProperty(e,"buildSpecFromUpdate",{enumerable:!0,get:function(){return i.buildSpecFromUpdate}}),Object.defineProperty(e,"createDragToUpdates",{enumerable:!0,get:function(){return i.createDragToUpdates}}),Object.defineProperty(e,"createExpandUpdate",{enumerable:!0,get:function(){return i.createExpandUpdate}}),Object.defineProperty(e,"createHideUpdate",{enumerable:!0,get:function(){return i.createHideUpdate}}),Object.defineProperty(e,"createRemoveUpdate",{enumerable:!0,get:function(){return i.createRemoveUpdate}}),Object.defineProperty(e,"updateTree",{enumerable:!0,get:function(){return i.updateTree}});var o=Wq();Object.defineProperty(e,"createBalancedTreeFromLeaves",{enumerable:!0,get:function(){return o.createBalancedTreeFromLeaves}}),Object.defineProperty(e,"Corner",{enumerable:!0,get:function(){return o.Corner}}),Object.defineProperty(e,"getAndAssertNodeAtPathExists",{enumerable:!0,get:function(){return o.getAndAssertNodeAtPathExists}}),Object.defineProperty(e,"getLeaves",{enumerable:!0,get:function(){return o.getLeaves}}),Object.defineProperty(e,"getNodeAtPath",{enumerable:!0,get:function(){return o.getNodeAtPath}}),Object.defineProperty(e,"getOtherBranch",{enumerable:!0,get:function(){return o.getOtherBranch}}),Object.defineProperty(e,"getOtherDirection",{enumerable:!0,get:function(){return o.getOtherDirection}}),Object.defineProperty(e,"getPathToCorner",{enumerable:!0,get:function(){return o.getPathToCorner}}),Object.defineProperty(e,"isParent",{enumerable:!0,get:function(){return o.isParent}});var a=YV();Object.defineProperty(e,"MosaicWindow",{enumerable:!0,get:function(){return a.MosaicWindow}});var s=OV();Object.defineProperty(e,"createDefaultToolbarButton",{enumerable:!0,get:function(){return s.createDefaultToolbarButton}}),Object.defineProperty(e,"DefaultToolbarButton",{enumerable:!0,get:function(){return s.DefaultToolbarButton}});var l=aH();Object.defineProperty(e,"MosaicZeroState",{enumerable:!0,get:function(){return l.MosaicZeroState}});var u=GV();Object.defineProperty(e,"Separator",{enumerable:!0,get:function(){return u.Separator}});var c=NV();Object.defineProperty(e,"ExpandButton",{enumerable:!0,get:function(){return c.ExpandButton}});var d=LV();Object.defineProperty(e,"ReplaceButton",{enumerable:!0,get:function(){return d.ReplaceButton}});var f=zV();Object.defineProperty(e,"SplitButton",{enumerable:!0,get:function(){return f.SplitButton}});var p=MV();Object.defineProperty(e,"RemoveButton",{enumerable:!0,get:function(){return p.RemoveButton}});var h=UV();Object.defineProperty(e,"DEFAULT_CONTROLS_WITH_CREATION",{enumerable:!0,get:function(){return h.DEFAULT_CONTROLS_WITH_CREATION}}),Object.defineProperty(e,"DEFAULT_CONTROLS_WITHOUT_CREATION",{enumerable:!0,get:function(){return h.DEFAULT_CONTROLS_WITHOUT_CREATION}})}(MI)),MI}var ZV=KV();function QV(e,t,n=[]){if(e){if(!RA(e))return t(e,n);if(e.direction){const r=QV(e.first,t,[...n,"first"])||QV(e.second,t,[...n,"second"]);if(r)return r}}}function XV(e,t){const n=function(e,t){return QV(e,(e,n)=>{if(e===t)return n})}(e,t);if(!e||!n)return{success:!1};try{return{success:!0,nextTree:ZV.updateTree(e,[ZV.createRemoveUpdate(e,n)])}}catch(HOt){return{success:!1}}}const JV=e=>{const{id:t,content:n,path:r,isDragging:i,className:o}=e;return w.jsx("div",{className:zn("h-full flex-1 flex-col overflow-hidden rounded-md p-2",o,i?"pointer-events-none":""),children:n})},eW=e=>{const{onChange:t,onRelease:n,renderTile:r,tileClassName:i}=e,[o,a]=T.useState(!1),s=k.useCallback(e=>{a(!0),null==t||t(e)},[t]),l=k.useCallback(e=>{a(!1),null==n||n(e)},[n]);return w.jsxs("div",{className:"bg relative h-full w-full",children:[w.jsx("style",{children:"\n  .mosaic-split {\n    background-color: hsl(var(--border) / 0.2);\n  }\n  .mosaic-split:hover {\n    background-color: hsl(var(--primary) / 0.4);\n  }\n"}),w.jsx(ZV.Mosaic,{...e,className:"",onChange:s,onRelease:l,renderTile:(e,t)=>w.jsx(JV,{id:e,className:zn("bg-secondary/10",i),path:t,isDragging:o,content:r(e,t)})})]})};function tW({panels:e={}}={}){return mT((t,n)=>({layout:{panels:e,setLayout:e=>t(t=>hT(t,t=>{t.config.layout=e})),togglePanel:(e,r)=>{var i,o;const{config:a}=n();if((null==(i=a.layout)?void 0:i.nodes)===e)return;const s=XV(null==(o=a.layout)?void 0:o.nodes,e);if(s.success){if(r||e===AA)return;t(t=>hT(t,t=>{var n;const r=t.config.layout;r.nodes=s.nextTree,(null==(n=r.pinned)?void 0:n.includes(e))&&(r.pinned=r.pinned.filter(t=>t!==e))}))}else{if(!1===r)return;t(t=>hT(t,t=>{var r,i,o,s;const l=t.config.layout,u=l.nodes,c=null==(r=n().layout.panels[e])?void 0:r.placement,d="sidebar"===c?"first":"second",f=RA(u)?u[d]:void 0;if(!f||!RA(u)||RA(f)||f===AA||(null==(i=l.fixed)?void 0:i.includes(f))||(null==(o=l.pinned)?void 0:o.includes(f))){const t={node:e,weight:1},n={node:null==(s=a.layout)?void 0:s.nodes,weight:3};l.nodes=function(e,t){var n,r,i;const o=t.filter(({node:e})=>null!==e);if(!(null==o?void 0:o.length))return null;if(1===o.length)return(null==(n=o[0])?void 0:n.node)??null;let a=null==(r=o[0])?void 0:r.node;if(!a)return null;let s=(null==(i=o[0])?void 0:i.weight)??0;for(let l=1;l<o.length;l++){const t=o[l];if(!t)continue;const{node:n,weight:r}=t,i=100*s/(s+r);s+=r,a={direction:e,first:a,second:n,splitPercentage:Math.round(i)}}return a}("sidebar-bottom"===c?"column":"row","first"===d?[t,n]:[n,t])}else u[d]=e}))}},togglePanelPin:e=>{t(t=>hT(t,t=>{const n=t.config.layout,r=n.pinned??[];r.includes(e)?n.pinned=r.filter(t=>t!==e):n.pinned=[...r,e]}))}}}))}oA({layout:nA().describe("Mosaic layout configuration.").default(OA)});const nW=new TextDecoder("utf-8"),rW=e=>nW.decode(e),iW=new TextEncoder,oW=e=>iW.encode(e),aW=e=>"boolean"==typeof e,sW=e=>"function"==typeof e,lW=e=>null!=e&&Object(e)===e,uW=e=>lW(e)&&sW(e.then),cW=e=>lW(e)&&sW(e[Symbol.iterator]),dW=e=>lW(e)&&sW(e[Symbol.asyncIterator]),fW=e=>lW(e)&&lW(e.schema),pW=e=>lW(e)&&"done"in e&&"value"in e,hW=e=>lW(e)&&sW(e.stat)&&(e=>"number"==typeof e)(e.fd),mW=e=>lW(e)&&yW(e.body),gW=e=>"_getDOMStream"in e&&"_getNodeStream"in e,yW=e=>lW(e)&&sW(e.cancel)&&sW(e.getReader)&&!gW(e),vW=e=>lW(e)&&sW(e.read)&&sW(e.pipe)&&aW(e.readable)&&!gW(e),bW="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function wW(e,t,n=0,r=t.byteLength){const i=e.byteLength,o=new Uint8Array(e.buffer,e.byteOffset,i),a=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return o.set(a,n),e}function _W(e,t){const n=function(e){const t=e[0]?[e[0]]:[];let n,r,i,o;for(let a,s,l=0,u=0,c=e.length;++l<c;)a=t[u],s=e[l],!a||!s||a.buffer!==s.buffer||s.byteOffset<a.byteOffset?s&&(t[++u]=s):(({byteOffset:n,byteLength:i}=a),({byteOffset:r,byteLength:o}=s),n+i<r||r+o<n?s&&(t[++u]=s):t[u]=new Uint8Array(a.buffer,n,r-n+o));return t}(e),r=n.reduce((e,t)=>e+t.byteLength,0);let i,o,a,s=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],o=i.subarray(0,Math.min(i.length,u-s)),u<=s+o.length){o.length<i.length?n[l]=i.subarray(o.length):o.length===i.length&&l++,a?wW(a,o,s):a=o;break}wW(a||(a=new Uint8Array(u)),o,s),s+=o.length}return[a||new Uint8Array(0),n.slice(l),r-(a?a.byteLength:0)]}function xW(e,t){let n=pW(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=oW(n)),n instanceof ArrayBuffer||n instanceof bW?new e(n):lW(r=n)&&sW(r.clear)&&sW(r.bytes)&&sW(r.position)&&sW(r.setPosition)&&sW(r.capacity)&&sW(r.getBufferIdentifier)&&sW(r.createLong)?xW(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0);var r}const EW=e=>xW(Int32Array,e),SW=e=>xW(BigInt64Array,e),kW=e=>xW(Uint8Array,e),TW=e=>(e.next(),e);const CW=e=>function*(e,t){const n=function*(e){yield e},r="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof bW?n(t):cW(t)?t:n(t);return yield*TW(function*(t){let n=null;do{n=t.next(yield xW(e,n))}while(!n.done)}(r[Symbol.iterator]())),new e}(Uint8Array,e);function AW(e,t){return si(this,arguments,function*(){if(uW(t))return yield ai(yield ai(yield*li(ui(AW(e,yield ai(t))))));const n=function(e){return si(this,arguments,function*(){yield yield ai(yield ai(e))})},r="string"==typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof bW?n(t):cW(t)?function(e){return si(this,arguments,function*(){yield ai(yield*li(ui(TW(function*(e){let t=null;do{t=e.next(yield null==t?void 0:t.value)}while(!t.done)}(e[Symbol.iterator]())))))})}(t):dW(t)?t:n(t);return yield ai(yield*li(ui(TW(function(t){return si(this,arguments,function*(){let n=null;do{n=yield ai(t.next(yield yield ai(xW(e,n))))}while(!n.done)})}(r[Symbol.asyncIterator]()))))),yield ai(new e)})}const IW=e=>AW(Uint8Array,e);function OW(e,t,n){if(0!==e)for(let r=-1,i=(n=n.slice(0,t)).length;++r<i;)n[r]+=e;return n.subarray(0,t)}const NW={fromIterable:e=>DW(function*(e){let t,n,r,i,o=!1,a=[],s=0;function l(){return"peek"===r?_W(a,i)[0]:([n,a,s]=_W(a,i),n)}({cmd:r,size:i}=(yield(()=>null)())||{cmd:"read",size:0});const u=CW(e)[Symbol.iterator]();try{do{if(({done:t,value:n}=Number.isNaN(i-s)?u.next():u.next(i-s)),!t&&n.byteLength>0&&(a.push(n),s+=n.byteLength),t||i<=s)do{({cmd:r,size:i}=yield l())}while(i<s)}while(!t)}catch(F0){(o=!0)&&"function"==typeof u.throw&&u.throw(F0)}finally{!1===o&&"function"==typeof u.return&&u.return(null)}return null}(e)),fromAsyncIterable:e=>DW(function(e){return si(this,arguments,function*(){let t,n,r,i,o=!1,a=[],s=0;function l(){return"peek"===r?_W(a,i)[0]:([n,a,s]=_W(a,i),n)}({cmd:r,size:i}=(yield yield ai((()=>null)()))||{cmd:"read",size:0});const u=IW(e)[Symbol.asyncIterator]();try{do{if(({done:t,value:n}=Number.isNaN(i-s)?yield ai(u.next()):yield ai(u.next(i-s))),!t&&n.byteLength>0&&(a.push(n),s+=n.byteLength),t||i<=s)do{({cmd:r,size:i}=yield yield ai(l()))}while(i<s)}while(!t)}catch(F0){(o=!0)&&"function"==typeof u.throw&&(yield ai(u.throw(F0)))}finally{!1===o&&"function"==typeof u.return&&(yield ai(u.return(new Uint8Array(0))))}return yield ai(null)})}(e)),fromDOMStream:e=>DW(function(e){return si(this,arguments,function*(){let t,n,r,i=!1,o=!1,a=[],s=0;function l(){return"peek"===n?_W(a,r)[0]:([t,a,s]=_W(a,r),t)}({cmd:n,size:r}=(yield yield ai((()=>null)()))||{cmd:"read",size:0});const u=new RW(e);try{do{if(({done:i,value:t}=Number.isNaN(r-s)?yield ai(u.read()):yield ai(u.read(r-s))),!i&&t.byteLength>0&&(a.push(kW(t)),s+=t.byteLength),i||r<=s)do{({cmd:n,size:r}=yield yield ai(l()))}while(r<s)}while(!i)}catch(F0){(o=!0)&&(yield ai(u.cancel(F0)))}finally{!1===o?yield ai(u.cancel()):e.locked&&u.releaseLock()}return yield ai(null)})}(e)),fromNodeStream:e=>DW(function(e){return si(this,arguments,function*(){const t=[];let n,r,i,o="error",a=!1,s=null,l=0,u=[];function c(){return"peek"===n?_W(u,r)[0]:([i,u,l]=_W(u,r),i)}if(({cmd:n,size:r}=(yield yield ai((()=>null)()))||{cmd:"read",size:0}),e.isTTY)return yield yield ai(new Uint8Array(0)),yield ai(null);try{t[0]=MW(e,"end"),t[1]=MW(e,"error");do{if(t[2]=MW(e,"readable"),[o,s]=yield ai(Promise.race(t.map(e=>e[2]))),"error"===o)break;if((a="end"===o)||(Number.isFinite(r-l)?(i=kW(e.read(r-l)),i.byteLength<r-l&&(i=kW(e.read()))):i=kW(e.read()),i.byteLength>0&&(u.push(i),l+=i.byteLength)),a||r<=l)do{({cmd:n,size:r}=yield yield ai(c()))}while(r<l)}while(!a)}finally{yield ai(d(t,"error"===o?s:null))}return yield ai(null);function d(t,n){return i=u=null,new Promise((r,i)=>{for(const[n,o]of t)e.off(n,o);try{const t=e.destroy;t&&t.call(e,n),n=void 0}catch(F0){n=F0||n}finally{null!=n?i(n):r()}})}})}(e)),toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},DW=e=>(e.next(),e);class RW{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ii(this,void 0,void 0,function*(){const{reader:t,source:n}=this;t&&(yield t.cancel(e).catch(()=>{})),n&&n.locked&&this.releaseLock()})}read(e){return ii(this,void 0,void 0,function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=kW(t)),t})}}const MW=(e,t)=>{const n=e=>r([t,e]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};var PW,FW,LW,jW,BW,$W,zW,UW,qW,HW,VW,WW;(FW=PW||(PW={}))[FW.V1=0]="V1",FW[FW.V2=1]="V2",FW[FW.V3=2]="V3",FW[FW.V4=3]="V4",FW[FW.V5=4]="V5",(jW=LW||(LW={}))[jW.Sparse=0]="Sparse",jW[jW.Dense=1]="Dense",($W=BW||(BW={}))[$W.HALF=0]="HALF",$W[$W.SINGLE=1]="SINGLE",$W[$W.DOUBLE=2]="DOUBLE",(UW=zW||(zW={}))[UW.DAY=0]="DAY",UW[UW.MILLISECOND=1]="MILLISECOND",(HW=qW||(qW={}))[HW.SECOND=0]="SECOND",HW[HW.MILLISECOND=1]="MILLISECOND",HW[HW.MICROSECOND=2]="MICROSECOND",HW[HW.NANOSECOND=3]="NANOSECOND",(WW=VW||(VW={}))[WW.YEAR_MONTH=0]="YEAR_MONTH",WW[WW.DAY_TIME=1]="DAY_TIME",WW[WW.MONTH_DAY_NANO=2]="MONTH_DAY_NANO";const GW=new Int32Array(2),YW=new Float32Array(GW.buffer),KW=new Float64Array(GW.buffer),ZW=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];var QW,XW;(XW=QW||(QW={}))[XW.UTF8_BYTES=1]="UTF8_BYTES",XW[XW.UTF16_STRING=2]="UTF16_STRING";let JW=class e{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new e(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return GW[0]=this.readInt32(e),YW[0]}readFloat64(e){return GW[ZW?0:1]=this.readInt32(e),GW[ZW?1:0]=this.readInt32(e+4),KW[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,Number(BigInt.asIntN(32,t))),this.writeInt32(e+4,Number(BigInt.asIntN(32,t>>BigInt(32))))}writeUint64(e,t){this.writeUint32(e,Number(BigInt.asUintN(32,t))),this.writeUint32(e+4,Number(BigInt.asUintN(32,t>>BigInt(32))))}writeFloat32(e,t){YW[0]=t,this.writeInt32(e,GW[0])}writeFloat64(e,t){KW[0]=t,this.writeInt32(e,GW[ZW?0:1]),this.writeInt32(e+4,GW[ZW?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){const n=e-this.readInt32(e);return t<this.readInt16(n)?this.readInt16(n+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const n=this.readInt32(e);e+=4;const r=this.bytes_.subarray(e,e+n);return t===QW.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,t){return"string"==typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createScalarList(e,t){const n=[];for(let r=0;r<t;++r){const t=e(r);null!==t&&n.push(t)}return n}createObjList(e,t){const n=[];for(let r=0;r<t;++r){const t=e(r);null!==t&&n.push(t.unpack())}return n}},eG=class e{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder,t=e||1024,this.bb=JW.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=1+~(this.bb.capacity()-this.space+n)&t-1;for(;this.space<r+t+n;){const t=this.bb.capacity();this.bb=e.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(r)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,n){(this.force_defaults||t!=n)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,n){(this.force_defaults||t!=n)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,n){(this.force_defaults||t!=n)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,n){(this.force_defaults||t!==n)&&(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,n){(this.force_defaults||t!=n)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,n){(this.force_defaults||t!=n)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,n){t!=n&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=t<<1,r=JW.allocate(n);return r.setPosition(n-t),r.bytes().set(e.bytes(),n-t),r}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const n=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const r=2*(n+2);this.addInt16(r);let i=0;const o=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(r==this.bb.readInt16(e)){for(let t=2;t<r;t+=2)if(this.bb.readInt16(o+t)!=this.bb.readInt16(e+t))continue e;i=this.vtables[t];break}}return i?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,i-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,n){const r=n?4:0;if(t){const e=t;if(this.prep(this.minalign,8+r),4!=e.length)throw new TypeError("FlatBuffers: file identifier must be length 4");for(let t=3;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,4+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const n=this.bb.capacity()-e,r=n-this.bb.readInt32(n);if(!(t<this.bb.readInt16(r)&&0!=this.bb.readInt16(r+t)))throw new TypeError("FlatBuffers: field "+t+" must be set")}startVector(e,t,n){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(n,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(null==e)return 0;let t;return t=e instanceof Uint8Array?e:this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length),this.bb.bytes().set(t,this.space),this.endVector()}createByteVector(e){return null==e?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return null===e?0:"string"==typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n];if(null===r)throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(r))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var tG,nG,rG,iG;(nG=tG||(tG={}))[nG.BUFFER=0]="BUFFER",(iG=rG||(rG={}))[iG.LZ4_FRAME=0]="LZ4_FRAME",iG[iG.ZSTD=1]="ZSTD";class oG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new oG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new oG).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):rG.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):tG.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,rG.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,tG.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,n){return oG.startBodyCompression(e),oG.addCodec(e,t),oG.addMethod(e,n),oG.endBodyCompression(e)}}let aG=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,n){return e.prep(8,16),e.writeInt64(BigInt(null!=n?n:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}},sG=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,n){return e.prep(8,16),e.writeInt64(BigInt(null!=n?n:0)),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}},lG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new sG).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new aG).__init(this.bb.__vector(this.bb_pos+n)+16*e,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new oG).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}},uG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new lG).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}};var cG,dG,fG,pG;(dG=cG||(cG={}))[dG.Little=0]="Little",dG[dG.Big=1]="Big",(pG=fG||(fG={}))[pG.DenseArray=0]="DenseArray";class hG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new hG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new hG).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,n){return hG.startInt(e),hG.addBitWidth(e,t),hG.addIsSigned(e,n),hG.endInt(e)}}class mG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new mG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new mG).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new hG).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):fG.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,BigInt("0"))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,fG.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class gG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new gG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new gG).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,n){return gG.startKeyValue(e),gG.addKey(e,t),gG.addValue(e,n),gG.endKeyValue(e)}}let yG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(t){return e.startBinary(t),e.endBinary(t)}},vG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(t){return e.startBool(t),e.endBool(t)}},bG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):zW.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,zW.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(t,n){return e.startDate(t),e.addUnit(t,n),e.endDate(t)}},wG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(t,n,r,i){return e.startDecimal(t),e.addPrecision(t,n),e.addScale(t,r),e.addBitWidth(t,i),e.endDecimal(t)}},_G=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDuration(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qW.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,qW.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(t,n){return e.startDuration(t),e.addUnit(t,n),e.endDuration(t)}},xG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(t,n){return e.startFixedSizeBinary(t),e.addByteWidth(t,n),e.endFixedSizeBinary(t)}},EG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(t,n){return e.startFixedSizeList(t),e.addListSize(t,n),e.endFixedSizeList(t)}};class SG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new SG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new SG).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):BW.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,BW.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return SG.startFloatingPoint(e),SG.addPrecision(e,t),SG.endFloatingPoint(e)}}class kG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new kG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new kG).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):VW.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,VW.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return kG.startInterval(e),kG.addUnit(e,t),kG.endInterval(e)}}let TG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeBinary(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(t){return e.startLargeBinary(t),e.endLargeBinary(t)}},CG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsLargeUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(t){return e.startLargeUtf8(t),e.endLargeUtf8(t)}},AG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(t){return e.startList(t),e.endList(t)}},IG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(t,n){return e.startMap(t),e.addKeysSorted(t,n),e.endMap(t)}},OG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(t){return e.startNull(t),e.endNull(t)}};class NG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new NG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new NG).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return NG.startStruct_(e),NG.endStruct_(e)}}let DG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qW.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,qW.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(t,n,r){return e.startTime(t),e.addUnit(t,n),e.addBitWidth(t,r),e.endTime(t)}};class RG{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new RG).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new RG).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):qW.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,qW.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,n){return RG.startTimestamp(e),RG.addUnit(e,t),RG.addTimezone(e,n),RG.endTimestamp(e)}}let MG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):LW.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,LW.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addInt32(t[n]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(t,n,r){return e.startUnion(t),e.addMode(t,n),e.addTypeIds(t,r),e.endUnion(t)}},PG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(t){return e.startUtf8(t),e.endUtf8(t)}};var FG,LG;(LG=FG||(FG={}))[LG.NONE=0]="NONE",LG[LG.Null=1]="Null",LG[LG.Int=2]="Int",LG[LG.FloatingPoint=3]="FloatingPoint",LG[LG.Binary=4]="Binary",LG[LG.Utf8=5]="Utf8",LG[LG.Bool=6]="Bool",LG[LG.Decimal=7]="Decimal",LG[LG.Date=8]="Date",LG[LG.Time=9]="Time",LG[LG.Timestamp=10]="Timestamp",LG[LG.Interval=11]="Interval",LG[LG.List=12]="List",LG[LG.Struct_=13]="Struct_",LG[LG.Union=14]="Union",LG[LG.FixedSizeBinary=15]="FixedSizeBinary",LG[LG.FixedSizeList=16]="FixedSizeList",LG[LG.Map=17]="Map",LG[LG.Duration=18]="Duration",LG[LG.LargeBinary=19]="LargeBinary",LG[LG.LargeUtf8=20]="LargeUtf8",LG[LG.LargeList=21]="LargeList",LG[LG.RunEndEncoded=22]="RunEndEncoded";let jG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):FG.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new mG).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new e).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,16);return n?(t||new gG).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,FG.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}},BG=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):cG.Little}fields(e,t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new jG).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new gG).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,cG.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let n=t.length-1;n>=0;n--)e.addInt64(t[n]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(t,n,r,i,o){return e.startSchema(t),e.addEndianness(t,n),e.addFields(t,r),e.addCustomMetadata(t,i),e.addFeatures(t,o),e.endSchema(t)}};var $G,zG,UG,qG,HG;(zG=$G||($G={}))[zG.NONE=0]="NONE",zG[zG.Schema=1]="Schema",zG[zG.DictionaryBatch=2]="DictionaryBatch",zG[zG.RecordBatch=3]="RecordBatch",zG[zG.Tensor=4]="Tensor",zG[zG.SparseTensor=5]="SparseTensor",function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"}(UG||(UG={})),(HG=qG||(qG={}))[HG.OFFSET=0]="OFFSET",HG[HG.DATA=1]="DATA",HG[HG.VALIDITY=2]="VALIDITY",HG[HG.TYPE=3]="TYPE";function VG(e){if(null===e)return"null";if(undefined===e)return"undefined";switch(typeof e){case"number":case"bigint":return`${e}`;case"string":return`"${e}"`}return"function"==typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(e=>VG(e))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(e,t)=>"bigint"==typeof t?`${t}`:t)}function WG(e){if("bigint"==typeof e&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}function GG(e,t){return WG(e/t)+WG(e%t)/WG(t)}const YG=Symbol.for("isArrowBigNum");function KG(e,...t){return 0===t.length?Object.setPrototypeOf(xW(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}function ZG(...e){return KG.apply(this,e)}function QG(...e){return KG.apply(this,e)}function XG(...e){return KG.apply(this,e)}KG.prototype[YG]=!0,KG.prototype.toJSON=function(){return`"${tY(this)}"`},KG.prototype.valueOf=function(e){return eY(this,e)},KG.prototype.toString=function(){return tY(this)},KG.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return eY(this);case"string":return tY(this);case"default":return function(e){if(8===e.byteLength){return new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}return tY(e)}(this)}return tY(this)},Object.setPrototypeOf(ZG.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(QG.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(XG.prototype,Object.create(Uint32Array.prototype)),Object.assign(ZG.prototype,KG.prototype,{constructor:ZG,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array}),Object.assign(QG.prototype,KG.prototype,{constructor:QG,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array}),Object.assign(XG.prototype,KG.prototype,{constructor:XG,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const JG=BigInt(4294967296)*BigInt(4294967296)-BigInt(1);function eY(e,t){const{buffer:n,byteOffset:r,byteLength:i,signed:o}=e,a=new BigUint64Array(n,r,i/8),s=o&&a.at(-1)&BigInt(1)<<BigInt(63);let l=BigInt(0),u=0;if(s){for(const e of a)l|=(e^JG)*(BigInt(1)<<BigInt(64*u++));l*=BigInt(-1),l-=BigInt(1)}else for(const c of a)l|=c*(BigInt(1)<<BigInt(64*u++));if("number"==typeof t){const e=BigInt(Math.pow(10,t)),n=l%e;return WG(l/e)+WG(n)/WG(e)}return WG(l)}function tY(e){if(8===e.byteLength){return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`}if(!e.signed)return nY(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return nY(e);t=t.slice();let n=1;for(let r=0;r<t.length;r++){const e=t[r],i=~e+n;t[r]=i,n&=0===e?1:0}return`-${nY(t)}`}function nY(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let o=-1;const a=r.length-1;do{for(n[0]=r[o=0];o<a;)r[o++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+r[o];r[o]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return null!=t?t:"0"}class rY{static new(e,t){switch(t){case!0:return new ZG(e);case!1:return new QG(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ZG(e)}return 16===e.byteLength?new XG(e):new QG(e)}static signed(e){return new ZG(e)}static unsigned(e){return new QG(e)}static decimal(e){return new XG(e)}constructor(e,t){return rY.new(e,t)}}var iY,oY,aY,sY,lY,uY,cY,dY,fY,pY,hY,mY,gY,yY,vY,bY,wY,_Y,xY,EY,SY,kY,TY;class CY{static isNull(e){return(null==e?void 0:e.typeId)===UG.Null}static isInt(e){return(null==e?void 0:e.typeId)===UG.Int}static isFloat(e){return(null==e?void 0:e.typeId)===UG.Float}static isBinary(e){return(null==e?void 0:e.typeId)===UG.Binary}static isLargeBinary(e){return(null==e?void 0:e.typeId)===UG.LargeBinary}static isUtf8(e){return(null==e?void 0:e.typeId)===UG.Utf8}static isLargeUtf8(e){return(null==e?void 0:e.typeId)===UG.LargeUtf8}static isBool(e){return(null==e?void 0:e.typeId)===UG.Bool}static isDecimal(e){return(null==e?void 0:e.typeId)===UG.Decimal}static isDate(e){return(null==e?void 0:e.typeId)===UG.Date}static isTime(e){return(null==e?void 0:e.typeId)===UG.Time}static isTimestamp(e){return(null==e?void 0:e.typeId)===UG.Timestamp}static isInterval(e){return(null==e?void 0:e.typeId)===UG.Interval}static isDuration(e){return(null==e?void 0:e.typeId)===UG.Duration}static isList(e){return(null==e?void 0:e.typeId)===UG.List}static isStruct(e){return(null==e?void 0:e.typeId)===UG.Struct}static isUnion(e){return(null==e?void 0:e.typeId)===UG.Union}static isFixedSizeBinary(e){return(null==e?void 0:e.typeId)===UG.FixedSizeBinary}static isFixedSizeList(e){return(null==e?void 0:e.typeId)===UG.FixedSizeList}static isMap(e){return(null==e?void 0:e.typeId)===UG.Map}static isDictionary(e){return(null==e?void 0:e.typeId)===UG.Dictionary}static isDenseUnion(e){return CY.isUnion(e)&&e.mode===LW.Dense}static isSparseUnion(e){return CY.isUnion(e)&&e.mode===LW.Sparse}constructor(e){this.typeId=e}}iY=Symbol.toStringTag,CY[iY]=((TY=CY.prototype).children=null,TY.ArrayType=Array,TY.OffsetArrayType=Int32Array,TY[Symbol.toStringTag]="DataType");class AY extends CY{constructor(){super(UG.Null)}toString(){return"Null"}}oY=Symbol.toStringTag,AY[oY]=AY.prototype[Symbol.toStringTag]="Null";class IY extends CY{constructor(e,t){super(UG.Int),this.isSigned=e,this.bitWidth=t}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}aY=Symbol.toStringTag,IY[aY]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(IY.prototype);class OY extends IY{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class NY extends IY{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class DY extends IY{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}let RY=class extends IY{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}};class MY extends IY{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class PY extends IY{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class FY extends IY{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}let LY=class extends IY{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}};Object.defineProperty(OY.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(NY.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(DY.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(RY.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(MY.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(PY.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(FY.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(LY.prototype,"ArrayType",{value:BigUint64Array});class jY extends CY{constructor(e){super(UG.Float),this.precision=e}get ArrayType(){switch(this.precision){case BW.HALF:return Uint16Array;case BW.SINGLE:return Float32Array;case BW.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sY=Symbol.toStringTag,jY[sY]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(jY.prototype);class BY extends jY{constructor(){super(BW.SINGLE)}}class $Y extends jY{constructor(){super(BW.DOUBLE)}}Object.defineProperty(BY.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty($Y.prototype,"ArrayType",{value:Float64Array});class zY extends CY{constructor(){super(UG.Binary)}toString(){return"Binary"}}lY=Symbol.toStringTag,zY[lY]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(zY.prototype);class UY extends CY{constructor(){super(UG.LargeBinary)}toString(){return"LargeBinary"}}uY=Symbol.toStringTag,UY[uY]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(UY.prototype);class qY extends CY{constructor(){super(UG.Utf8)}toString(){return"Utf8"}}cY=Symbol.toStringTag,qY[cY]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(qY.prototype);class HY extends CY{constructor(){super(UG.LargeUtf8)}toString(){return"LargeUtf8"}}dY=Symbol.toStringTag,HY[dY]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(HY.prototype);class VY extends CY{constructor(){super(UG.Bool)}toString(){return"Bool"}}fY=Symbol.toStringTag,VY[fY]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(VY.prototype);class WY extends CY{constructor(e,t,n=128){super(UG.Decimal),this.scale=e,this.precision=t,this.bitWidth=n}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}pY=Symbol.toStringTag,WY[pY]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(WY.prototype);class GY extends CY{constructor(e){super(UG.Date),this.unit=e}toString(){return`Date${32*(this.unit+1)}<${zW[this.unit]}>`}get ArrayType(){return this.unit===zW.DAY?Int32Array:BigInt64Array}}hY=Symbol.toStringTag,GY[hY]=(e=>(e.unit=null,e[Symbol.toStringTag]="Date"))(GY.prototype);class YY extends CY{constructor(e,t){super(UG.Time),this.unit=e,this.bitWidth=t}toString(){return`Time${this.bitWidth}<${qW[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}mY=Symbol.toStringTag,YY[mY]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(YY.prototype);class KY extends CY{constructor(e,t){super(UG.Timestamp),this.unit=e,this.timezone=t}toString(){return`Timestamp<${qW[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}gY=Symbol.toStringTag,KY[gY]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Timestamp"))(KY.prototype);class ZY extends KY{constructor(e){super(qW.MILLISECOND,e)}}class QY extends CY{constructor(e){super(UG.Interval),this.unit=e}toString(){return`Interval<${VW[this.unit]}>`}}yY=Symbol.toStringTag,QY[yY]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(QY.prototype);class XY extends CY{constructor(e){super(UG.Duration),this.unit=e}toString(){return`Duration<${qW[this.unit]}>`}}vY=Symbol.toStringTag,XY[vY]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(XY.prototype);class JY extends CY{constructor(e){super(UG.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}bY=Symbol.toStringTag,JY[bY]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(JY.prototype);class eK extends CY{constructor(e){super(UG.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}wY=Symbol.toStringTag,eK[wY]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(eK.prototype);class tK extends CY{constructor(e,t,n){super(UG.Union),this.mode=e,this.children=n,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce((e,t,n)=>(e[t]=n)&&e||e,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}_Y=Symbol.toStringTag,tK[_Y]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(tK.prototype);class nK extends CY{constructor(e){super(UG.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}xY=Symbol.toStringTag,nK[xY]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(nK.prototype);class rK extends CY{constructor(e,t){super(UG.FixedSizeList),this.listSize=e,this.children=[t]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}EY=Symbol.toStringTag,rK[EY]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(rK.prototype);class iK extends CY{constructor(e,t=!1){var n,r,i;if(super(UG.Map),this.children=[e],this.keysSorted=t,e&&(e.name="entries",null===(n=null==e?void 0:e.type)||void 0===n?void 0:n.children)){const t=null===(r=null==e?void 0:e.type)||void 0===r?void 0:r.children[0];t&&(t.name="key");const n=null===(i=null==e?void 0:e.type)||void 0===i?void 0:i.children[1];n&&(n.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}SY=Symbol.toStringTag,iK[SY]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(iK.prototype);const oK=(e=>()=>++e)(-1);class aK extends CY{constructor(e,t,n,r){super(UG.Dictionary),this.indices=t,this.dictionary=e,this.isOrdered=r||!1,this.id=null==n?oK():WG(n)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function sK(e){const t=e;switch(e.typeId){case UG.Decimal:return e.bitWidth/32;case UG.Interval:return 1+t.unit;case UG.FixedSizeList:return t.listSize;case UG.FixedSizeBinary:return t.byteWidth;default:return 1}}kY=Symbol.toStringTag,aK[kY]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(aK.prototype);class lK{visitMany(e,...t){return e.map((e,n)=>this.visit(e,...t.map(e=>e[n])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,t=!0){return function(e,t,n=!0){if("number"==typeof t)return uK(e,t,n);if("string"==typeof t&&t in UG)return uK(e,UG[t],n);if(t&&t instanceof CY)return uK(e,cK(t),n);if((null==t?void 0:t.type)&&t.type instanceof CY)return uK(e,cK(t.type),n);return uK(e,UG.NONE,n)}(this,e,t)}getVisitFnByTypeId(e,t=!0){return uK(this,e,t)}visitNull(e,...t){return null}visitBool(e,...t){return null}visitInt(e,...t){return null}visitFloat(e,...t){return null}visitUtf8(e,...t){return null}visitLargeUtf8(e,...t){return null}visitBinary(e,...t){return null}visitLargeBinary(e,...t){return null}visitFixedSizeBinary(e,...t){return null}visitDate(e,...t){return null}visitTimestamp(e,...t){return null}visitTime(e,...t){return null}visitDecimal(e,...t){return null}visitList(e,...t){return null}visitStruct(e,...t){return null}visitUnion(e,...t){return null}visitDictionary(e,...t){return null}visitInterval(e,...t){return null}visitDuration(e,...t){return null}visitFixedSizeList(e,...t){return null}visitMap(e,...t){return null}}function uK(e,t,n=!0){let r=null;switch(t){case UG.Null:r=e.visitNull;break;case UG.Bool:r=e.visitBool;break;case UG.Int:r=e.visitInt;break;case UG.Int8:r=e.visitInt8||e.visitInt;break;case UG.Int16:r=e.visitInt16||e.visitInt;break;case UG.Int32:r=e.visitInt32||e.visitInt;break;case UG.Int64:r=e.visitInt64||e.visitInt;break;case UG.Uint8:r=e.visitUint8||e.visitInt;break;case UG.Uint16:r=e.visitUint16||e.visitInt;break;case UG.Uint32:r=e.visitUint32||e.visitInt;break;case UG.Uint64:r=e.visitUint64||e.visitInt;break;case UG.Float:r=e.visitFloat;break;case UG.Float16:r=e.visitFloat16||e.visitFloat;break;case UG.Float32:r=e.visitFloat32||e.visitFloat;break;case UG.Float64:r=e.visitFloat64||e.visitFloat;break;case UG.Utf8:r=e.visitUtf8;break;case UG.LargeUtf8:r=e.visitLargeUtf8;break;case UG.Binary:r=e.visitBinary;break;case UG.LargeBinary:r=e.visitLargeBinary;break;case UG.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case UG.Date:r=e.visitDate;break;case UG.DateDay:r=e.visitDateDay||e.visitDate;break;case UG.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case UG.Timestamp:r=e.visitTimestamp;break;case UG.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case UG.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case UG.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case UG.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case UG.Time:r=e.visitTime;break;case UG.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case UG.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case UG.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case UG.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case UG.Decimal:r=e.visitDecimal;break;case UG.List:r=e.visitList;break;case UG.Struct:r=e.visitStruct;break;case UG.Union:r=e.visitUnion;break;case UG.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case UG.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case UG.Dictionary:r=e.visitDictionary;break;case UG.Interval:r=e.visitInterval;break;case UG.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case UG.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case UG.Duration:r=e.visitDuration;break;case UG.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case UG.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case UG.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case UG.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case UG.FixedSizeList:r=e.visitFixedSizeList;break;case UG.Map:r=e.visitMap}if("function"==typeof r)return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${UG[t]}'`)}function cK(e){switch(e.typeId){case UG.Null:return UG.Null;case UG.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?UG.Int8:UG.Uint8;case 16:return n?UG.Int16:UG.Uint16;case 32:return n?UG.Int32:UG.Uint32;case 64:return n?UG.Int64:UG.Uint64}return UG.Int}case UG.Float:switch(e.precision){case BW.HALF:return UG.Float16;case BW.SINGLE:return UG.Float32;case BW.DOUBLE:return UG.Float64}return UG.Float;case UG.Binary:return UG.Binary;case UG.LargeBinary:return UG.LargeBinary;case UG.Utf8:return UG.Utf8;case UG.LargeUtf8:return UG.LargeUtf8;case UG.Bool:return UG.Bool;case UG.Decimal:return UG.Decimal;case UG.Time:switch(e.unit){case qW.SECOND:return UG.TimeSecond;case qW.MILLISECOND:return UG.TimeMillisecond;case qW.MICROSECOND:return UG.TimeMicrosecond;case qW.NANOSECOND:return UG.TimeNanosecond}return UG.Time;case UG.Timestamp:switch(e.unit){case qW.SECOND:return UG.TimestampSecond;case qW.MILLISECOND:return UG.TimestampMillisecond;case qW.MICROSECOND:return UG.TimestampMicrosecond;case qW.NANOSECOND:return UG.TimestampNanosecond}return UG.Timestamp;case UG.Date:switch(e.unit){case zW.DAY:return UG.DateDay;case zW.MILLISECOND:return UG.DateMillisecond}return UG.Date;case UG.Interval:switch(e.unit){case VW.DAY_TIME:return UG.IntervalDayTime;case VW.YEAR_MONTH:return UG.IntervalYearMonth}return UG.Interval;case UG.Duration:switch(e.unit){case qW.SECOND:return UG.DurationSecond;case qW.MILLISECOND:return UG.DurationMillisecond;case qW.MICROSECOND:return UG.DurationMicrosecond;case qW.NANOSECOND:return UG.DurationNanosecond}return UG.Duration;case UG.Map:return UG.Map;case UG.List:return UG.List;case UG.Struct:return UG.Struct;case UG.Union:switch(e.mode){case LW.Dense:return UG.DenseUnion;case LW.Sparse:return UG.SparseUnion}return UG.Union;case UG.FixedSizeBinary:return UG.FixedSizeBinary;case UG.FixedSizeList:return UG.FixedSizeList;case UG.Dictionary:return UG.Dictionary}throw new Error(`Unrecognized type '${UG[e.typeId]}'`)}lK.prototype.visitInt8=null,lK.prototype.visitInt16=null,lK.prototype.visitInt32=null,lK.prototype.visitInt64=null,lK.prototype.visitUint8=null,lK.prototype.visitUint16=null,lK.prototype.visitUint32=null,lK.prototype.visitUint64=null,lK.prototype.visitFloat16=null,lK.prototype.visitFloat32=null,lK.prototype.visitFloat64=null,lK.prototype.visitDateDay=null,lK.prototype.visitDateMillisecond=null,lK.prototype.visitTimestampSecond=null,lK.prototype.visitTimestampMillisecond=null,lK.prototype.visitTimestampMicrosecond=null,lK.prototype.visitTimestampNanosecond=null,lK.prototype.visitTimeSecond=null,lK.prototype.visitTimeMillisecond=null,lK.prototype.visitTimeMicrosecond=null,lK.prototype.visitTimeNanosecond=null,lK.prototype.visitDenseUnion=null,lK.prototype.visitSparseUnion=null,lK.prototype.visitIntervalDayTime=null,lK.prototype.visitIntervalYearMonth=null,lK.prototype.visitDuration=null,lK.prototype.visitDurationSecond=null,lK.prototype.visitDurationMillisecond=null,lK.prototype.visitDurationMicrosecond=null,lK.prototype.visitDurationNanosecond=null;const dK=new Float64Array(1),fK=new Uint32Array(dK.buffer);function pK(e){const t=(31744&e)>>10,n=(1023&e)/1024,r=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function hK(e){if(e!=e)return 32256;dK[0]=e;const t=(2147483648&fK[1])>>16&65535;let n=2146435072&fK[1],r=0;return n>=1089470464?fK[0]>0?n=31744:(n=(2080374784&n)>>16,r=(1048575&fK[1])>>10):n<=1056964608?(r=1048576+(1048575&fK[1]),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=512+(1048575&fK[1])>>10),t|n|65535&r}class mK extends lK{}function gK(e){return(t,n,r)=>{if(t.setValid(n,null!=r))return e(t,n,r)}}const yK=(e,t,n,r)=>{if(n+1<t.length){const i=WG(t[n]),o=WG(t[n+1]);e.set(r.subarray(0,o-i),i)}},vK=({values:e},t,n)=>{e[t]=n},bK=({values:e},t,n)=>{e[t]=n},wK=({values:e},t,n)=>{e[t]=hK(n)},_K=({values:e},t,n)=>{((e,t,n)=>{e[t]=Math.floor(n/864e5)})(e,t,n.valueOf())},xK=({values:e},t,n)=>{e[t]=BigInt(n)},EK=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},SK=({values:e,valueOffsets:t},n,r)=>yK(e,t,n,r),kK=({values:e,valueOffsets:t},n,r)=>yK(e,t,n,oW(r)),TK=(e,t,n)=>{e.type.unit===zW.DAY?_K(e,t,n):xK(e,t,n)},CK=({values:e},t,n)=>{e[t]=BigInt(n/1e3)},AK=({values:e},t,n)=>{e[t]=BigInt(n)},IK=({values:e},t,n)=>{e[t]=BigInt(1e3*n)},OK=({values:e},t,n)=>{e[t]=BigInt(1e6*n)},NK=(e,t,n)=>{switch(e.type.unit){case qW.SECOND:return CK(e,t,n);case qW.MILLISECOND:return AK(e,t,n);case qW.MICROSECOND:return IK(e,t,n);case qW.NANOSECOND:return OK(e,t,n)}},DK=({values:e},t,n)=>{e[t]=n},RK=({values:e},t,n)=>{e[t]=n},MK=({values:e},t,n)=>{e[t]=n},PK=({values:e},t,n)=>{e[t]=n},FK=(e,t,n)=>{switch(e.type.unit){case qW.SECOND:return DK(e,t,n);case qW.MILLISECOND:return RK(e,t,n);case qW.MICROSECOND:return MK(e,t,n);case qW.NANOSECOND:return PK(e,t,n)}},LK=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},jK=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];YK.visit(i,e.valueOffsets[t],n)},BK=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];YK.visit(i,t,n)},$K=(e,t,n)=>{e.type.unit===VW.DAY_TIME?zK(e,t,n):UK(e,t,n)},zK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},UK=({values:e},t,n)=>{e[t]=12*n[0]+n[1]%12},qK=({values:e},t,n)=>{e[t]=n},HK=({values:e},t,n)=>{e[t]=n},VK=({values:e},t,n)=>{e[t]=n},WK=({values:e},t,n)=>{e[t]=n},GK=(e,t,n)=>{switch(e.type.unit){case qW.SECOND:return qK(e,t,n);case qW.MILLISECOND:return HK(e,t,n);case qW.MICROSECOND:return VK(e,t,n);case qW.NANOSECOND:return WK(e,t,n)}};mK.prototype.visitBool=gK(({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)}),mK.prototype.visitInt=gK(vK),mK.prototype.visitInt8=gK(vK),mK.prototype.visitInt16=gK(vK),mK.prototype.visitInt32=gK(vK),mK.prototype.visitInt64=gK(vK),mK.prototype.visitUint8=gK(vK),mK.prototype.visitUint16=gK(vK),mK.prototype.visitUint32=gK(vK),mK.prototype.visitUint64=gK(vK),mK.prototype.visitFloat=gK((e,t,n)=>{switch(e.type.precision){case BW.HALF:return wK(e,t,n);case BW.SINGLE:case BW.DOUBLE:return bK(e,t,n)}}),mK.prototype.visitFloat16=gK(wK),mK.prototype.visitFloat32=gK(bK),mK.prototype.visitFloat64=gK(bK),mK.prototype.visitUtf8=gK(kK),mK.prototype.visitLargeUtf8=gK(kK),mK.prototype.visitBinary=gK(SK),mK.prototype.visitLargeBinary=gK(SK),mK.prototype.visitFixedSizeBinary=gK(EK),mK.prototype.visitDate=gK(TK),mK.prototype.visitDateDay=gK(_K),mK.prototype.visitDateMillisecond=gK(xK),mK.prototype.visitTimestamp=gK(NK),mK.prototype.visitTimestampSecond=gK(CK),mK.prototype.visitTimestampMillisecond=gK(AK),mK.prototype.visitTimestampMicrosecond=gK(IK),mK.prototype.visitTimestampNanosecond=gK(OK),mK.prototype.visitTime=gK(FK),mK.prototype.visitTimeSecond=gK(DK),mK.prototype.visitTimeMillisecond=gK(RK),mK.prototype.visitTimeMicrosecond=gK(MK),mK.prototype.visitTimeNanosecond=gK(PK),mK.prototype.visitDecimal=gK(LK),mK.prototype.visitList=gK((e,t,n)=>{const r=e.children[0],i=e.valueOffsets,o=YK.getVisitFn(r);if(Array.isArray(n))for(let a=-1,s=i[t],l=i[t+1];s<l;)o(r,s++,n[++a]);else for(let a=-1,s=i[t],l=i[t+1];s<l;)o(r,s++,n.get(++a))}),mK.prototype.visitStruct=gK((e,t,n)=>{const r=e.type.children.map(e=>YK.getVisitFn(e.type)),i=n instanceof Map?(o=t,a=n,(e,t,n,r)=>t&&e(t,o,a.get(n.name))):n instanceof yQ?((e,t)=>(n,r,i,o)=>r&&n(r,e,t.get(o)))(t,n):Array.isArray(n)?((e,t)=>(n,r,i,o)=>r&&n(r,e,t[o]))(t,n):((e,t)=>(n,r,i,o)=>r&&n(r,e,t[i.name]))(t,n);var o,a;e.type.children.forEach((t,n)=>i(r[n],e.children[n],t,n))}),mK.prototype.visitUnion=gK((e,t,n)=>{e.type.mode===LW.Dense?jK(e,t,n):BK(e,t,n)}),mK.prototype.visitDenseUnion=gK(jK),mK.prototype.visitSparseUnion=gK(BK),mK.prototype.visitDictionary=gK((e,t,n)=>{var r;null===(r=e.dictionary)||void 0===r||r.set(e.values[t],n)}),mK.prototype.visitInterval=gK($K),mK.prototype.visitIntervalDayTime=gK(zK),mK.prototype.visitIntervalYearMonth=gK(UK),mK.prototype.visitDuration=gK(GK),mK.prototype.visitDurationSecond=gK(qK),mK.prototype.visitDurationMillisecond=gK(HK),mK.prototype.visitDurationMicrosecond=gK(VK),mK.prototype.visitDurationNanosecond=gK(WK),mK.prototype.visitFixedSizeList=gK((e,t,n)=>{const{stride:r}=e,i=e.children[0],o=YK.getVisitFn(i);if(Array.isArray(n))for(let a=-1,s=t*r;++a<r;)o(i,s+a,n[a]);else for(let a=-1,s=t*r;++a<r;)o(i,s+a,n.get(a))}),mK.prototype.visitMap=gK((e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,o=YK.getVisitFn(r);let{[t]:a,[t+1]:s}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(o(r,a,u),++a>=s)break});const YK=new mK,KK=Symbol.for("parent"),ZK=Symbol.for("rowIndex");class QK{constructor(e,t){return this[KK]=e,this[ZK]=t,new Proxy(this,new JK)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[ZK],t=this[KK],n=t.type.children,r={};for(let i=-1,o=n.length;++i<o;)r[n[i].name]=kZ.visit(t.children[i],e);return r}toString(){return`{${[...this].map(([e,t])=>`${VG(e)}: ${VG(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new XK(this[KK],this[ZK])}}class XK{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,kZ.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(QK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[KK]:{writable:!0,enumerable:!1,configurable:!1,value:null},[ZK]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class JK{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[KK].type.children.map(e=>e.name)}has(e,t){return-1!==e[KK].type.children.findIndex(e=>e.name===t)}getOwnPropertyDescriptor(e,t){if(-1!==e[KK].type.children.findIndex(e=>e.name===t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[KK].type.children.findIndex(e=>e.name===t);if(-1!==n){const r=kZ.visit(e[KK].children[n],e[ZK]);return Reflect.set(e,t,r),r}}set(e,t,n){const r=e[KK].type.children.findIndex(e=>e.name===t);return-1!==r?(YK.visit(e[KK].children[r],e[ZK],n),Reflect.set(e,t,n)):!(!Reflect.has(e,t)&&"symbol"!=typeof t)&&Reflect.set(e,t,n)}}class eZ extends lK{}function tZ(e){return(t,n)=>t.getValid(n)?e(t,n):null}const nZ=(e,t,n)=>{if(n+1>=t.length)return null;const r=WG(t[n]),i=WG(t[n+1]);return e.subarray(r,i)},rZ=({values:e},t)=>((e,t)=>864e5*e[t])(e,t),iZ=({values:e},t)=>WG(e[t]),oZ=({stride:e,values:t},n)=>t[e*n],aZ=({values:e},t)=>e[t],sZ=({values:e,valueOffsets:t},n)=>nZ(e,t,n),lZ=({values:e,valueOffsets:t},n)=>{const r=nZ(e,t,n);return null!==r?rW(r):null},uZ=({values:e},t)=>1e3*WG(e[t]),cZ=({values:e},t)=>WG(e[t]),dZ=({values:e},t)=>GG(e[t],BigInt(1e3)),fZ=({values:e},t)=>GG(e[t],BigInt(1e6)),pZ=({values:e},t)=>e[t],hZ=({values:e},t)=>e[t],mZ=({values:e},t)=>e[t],gZ=({values:e},t)=>e[t],yZ=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return kZ.visit(r,e.valueOffsets[t])},vZ=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return kZ.visit(r,t)},bZ=({values:e},t)=>e.subarray(2*t,2*(t+1)),wZ=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},_Z=({values:e},t)=>e[t],xZ=({values:e},t)=>e[t],EZ=({values:e},t)=>e[t],SZ=({values:e},t)=>e[t];eZ.prototype.visitNull=tZ((e,t)=>null),eZ.prototype.visitBool=tZ(({offset:e,values:t},n)=>{const r=e+n;return!!(t[r>>3]&1<<r%8)}),eZ.prototype.visitInt=tZ(({values:e},t)=>e[t]),eZ.prototype.visitInt8=tZ(oZ),eZ.prototype.visitInt16=tZ(oZ),eZ.prototype.visitInt32=tZ(oZ),eZ.prototype.visitInt64=tZ(aZ),eZ.prototype.visitUint8=tZ(oZ),eZ.prototype.visitUint16=tZ(oZ),eZ.prototype.visitUint32=tZ(oZ),eZ.prototype.visitUint64=tZ(aZ),eZ.prototype.visitFloat=tZ(({type:e,values:t},n)=>e.precision!==BW.HALF?t[n]:pK(t[n])),eZ.prototype.visitFloat16=tZ(({stride:e,values:t},n)=>pK(t[e*n])),eZ.prototype.visitFloat32=tZ(oZ),eZ.prototype.visitFloat64=tZ(oZ),eZ.prototype.visitUtf8=tZ(lZ),eZ.prototype.visitLargeUtf8=tZ(lZ),eZ.prototype.visitBinary=tZ(sZ),eZ.prototype.visitLargeBinary=tZ(sZ),eZ.prototype.visitFixedSizeBinary=tZ(({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1))),eZ.prototype.visitDate=tZ((e,t)=>e.type.unit===zW.DAY?rZ(e,t):iZ(e,t)),eZ.prototype.visitDateDay=tZ(rZ),eZ.prototype.visitDateMillisecond=tZ(iZ),eZ.prototype.visitTimestamp=tZ((e,t)=>{switch(e.type.unit){case qW.SECOND:return uZ(e,t);case qW.MILLISECOND:return cZ(e,t);case qW.MICROSECOND:return dZ(e,t);case qW.NANOSECOND:return fZ(e,t)}}),eZ.prototype.visitTimestampSecond=tZ(uZ),eZ.prototype.visitTimestampMillisecond=tZ(cZ),eZ.prototype.visitTimestampMicrosecond=tZ(dZ),eZ.prototype.visitTimestampNanosecond=tZ(fZ),eZ.prototype.visitTime=tZ((e,t)=>{switch(e.type.unit){case qW.SECOND:return pZ(e,t);case qW.MILLISECOND:return hZ(e,t);case qW.MICROSECOND:return mZ(e,t);case qW.NANOSECOND:return gZ(e,t)}}),eZ.prototype.visitTimeSecond=tZ(pZ),eZ.prototype.visitTimeMillisecond=tZ(hZ),eZ.prototype.visitTimeMicrosecond=tZ(mZ),eZ.prototype.visitTimeNanosecond=tZ(gZ),eZ.prototype.visitDecimal=tZ(({values:e,stride:t},n)=>rY.decimal(e.subarray(t*n,t*(n+1)))),eZ.prototype.visitList=tZ((e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:o,[t*r+1]:a}=n,s=i[0].slice(o,a-o);return new yQ([s])}),eZ.prototype.visitStruct=tZ((e,t)=>new QK(e,t)),eZ.prototype.visitUnion=tZ((e,t)=>e.type.mode===LW.Dense?yZ(e,t):vZ(e,t)),eZ.prototype.visitDenseUnion=tZ(yZ),eZ.prototype.visitSparseUnion=tZ(vZ),eZ.prototype.visitDictionary=tZ((e,t)=>{var n;return null===(n=e.dictionary)||void 0===n?void 0:n.get(e.values[t])}),eZ.prototype.visitInterval=tZ((e,t)=>e.type.unit===VW.DAY_TIME?bZ(e,t):wZ(e,t)),eZ.prototype.visitIntervalDayTime=tZ(bZ),eZ.prototype.visitIntervalYearMonth=tZ(wZ),eZ.prototype.visitDuration=tZ((e,t)=>{switch(e.type.unit){case qW.SECOND:return _Z(e,t);case qW.MILLISECOND:return xZ(e,t);case qW.MICROSECOND:return EZ(e,t);case qW.NANOSECOND:return SZ(e,t)}}),eZ.prototype.visitDurationSecond=tZ(_Z),eZ.prototype.visitDurationMillisecond=tZ(xZ),eZ.prototype.visitDurationMicrosecond=tZ(EZ),eZ.prototype.visitDurationNanosecond=tZ(SZ),eZ.prototype.visitFixedSizeList=tZ((e,t)=>{const{stride:n,children:r}=e,i=r[0].slice(t*n,n);return new yQ([i])}),eZ.prototype.visitMap=tZ((e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:o}=n,a=r[0];return new OZ(a.slice(i,o-i))});const kZ=new eZ,TZ=Symbol.for("keys"),CZ=Symbol.for("vals"),AZ=Symbol.for("kKeysAsStrings"),IZ=Symbol.for("_kKeysAsStrings");class OZ{constructor(e){return this[TZ]=new yQ([e.children[0]]).memoize(),this[CZ]=e.children[1],new Proxy(this,new DZ)}get[AZ](){return this[IZ]||(this[IZ]=Array.from(this[TZ].toArray(),String))}[Symbol.iterator](){return new NZ(this[TZ],this[CZ])}get size(){return this[TZ].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[TZ],t=this[CZ],n={};for(let r=-1,i=e.length;++r<i;)n[e.get(r)]=kZ.visit(t,r);return n}toString(){return`{${[...this].map(([e,t])=>`${VG(e)}: ${VG(t)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class NZ{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),kZ.visit(this.vals,e)]})}}class DZ{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[AZ]}has(e,t){return e[AZ].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[AZ].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const n=e[AZ].indexOf(t);if(-1!==n){const r=kZ.visit(Reflect.get(e,CZ),n);return Reflect.set(e,t,r),r}}set(e,t,n){const r=e[AZ].indexOf(t);return-1!==r?(YK.visit(Reflect.get(e,CZ),r,n),Reflect.set(e,t,n)):!!Reflect.has(e,t)&&Reflect.set(e,t,n)}}let RZ;function MZ(e,t,n,r){const{length:i=0}=e;let o="number"!=typeof t?0:t,a="number"!=typeof n?i:n;return o<0&&(o=(o%i+i)%i),a<0&&(a=(a%i+i)%i),a<o&&(RZ=o,o=a,a=RZ),a>i&&(a=i),r?r(e,o,a):[o,a]}Object.defineProperties(OZ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[TZ]:{writable:!0,enumerable:!1,configurable:!1,value:null},[CZ]:{writable:!0,enumerable:!1,configurable:!1,value:null},[IZ]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const PZ=(e,t)=>e<0?t+e:e,FZ=e=>e!=e;function LZ(e){if("object"!==typeof e||null===e)return FZ(e)?FZ:t=>t===e;if(e instanceof Date){const t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do{if(e[n]!==t[n])return!1}while(++n<r);return!0}(e,t):e instanceof Map?function(e){let t=-1;const n=[];for(const r of e.values())n[++t]=LZ(r);return jZ(n)}(e):Array.isArray(e)?function(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=LZ(e[n]);return jZ(t)}(e):e instanceof yQ?function(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=LZ(e.get(n));return jZ(t)}(e):function(e,t=!1){const n=Object.keys(e);if(!t&&0===n.length)return()=>!1;const r=[];for(let i=-1,o=n.length;++i<o;)r[i]=LZ(e[n[i]]);return jZ(r,n)}(e,!0)}function jZ(e,t){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}(e,n);case Map:return BZ(e,n,n.keys());case OZ:case QK:case Object:case void 0:return BZ(e,n,t||Object.keys(n))}return n instanceof yQ&&function(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}(e,n)}}function BZ(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),o=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let a=0;const s=e.length;let l=o.next(),u=r.next(),c=i.next();for(;a<s&&!u.done&&!c.done&&!l.done&&(u.value===c.value&&e[a](l.value));++a,u=r.next(),c=i.next(),l=o.next());return!!(a===s&&u.done&&c.done&&l.done)||(r.return&&r.return(),i.return&&i.return(),o.return&&o.return(),!1)}function $Z(e,t,n,r){return!!(n&1<<r)}function zZ(e,t,n,r){return(n&1<<r)>>r}function UZ(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8==0?n.subarray(e>>3):qZ(new HZ(n,e,t,null,$Z)).subarray(0,r)),i}return n}function qZ(e){const t=[];let n=0,r=0,i=0;for(const a of e)a&&(i|=1<<r),8===++r&&(t[n++]=i,i=r=0);(0===n||r>0)&&(t[n++]=i);const o=new Uint8Array(t.length+7&-8);return o.set(t),o}class HZ{constructor(e,t,n,r,i){this.bytes=e,this.length=n,this.context=r,this.get=i,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function VZ(e,t,n){if(n-t<=0)return 0;if(n-t<8){let r=0;for(const i of new HZ(e,t,n-t,e,zZ))r+=i;return r}const r=n>>3<<3,i=t+(t%8==0?0:8-t%8);return VZ(e,t,i)+VZ(e,r,n)+function(e,t,n){let r=0,i=Math.trunc(t);const o=new DataView(e.buffer,e.byteOffset,e.byteLength),a=void 0===n?e.byteLength:i+n;for(;a-i>=4;)r+=WZ(o.getUint32(i)),i+=4;for(;a-i>=2;)r+=WZ(o.getUint16(i)),i+=2;for(;a-i>=1;)r+=WZ(o.getUint8(i)),i+=1;return r}(e,i>>3,r-i>>3)}function WZ(e){let t=Math.trunc(e);return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24}class GZ{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(0!==this._nullCount){const{type:e}=this;return CY.isSparseUnion(e)||CY.isDenseUnion(e)?this.children.some(e=>e.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:t,values:n,nullBitmap:r,typeIds:i}=this;return t&&(e+=t.byteLength),n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),this.children.reduce((e,t)=>e+t.byteLength,e)}get nullCount(){if(CY.isUnion(this.type))return this.children.reduce((e,t)=>e+t.nullCount,0);let e,t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=0===e.length?0:this.length-VZ(e,this.offset,this.offset+this.length)),t}constructor(e,t,n,r,i,o=[],a){let s;this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1)),i instanceof GZ?(this.stride=i.stride,this.values=i.values,this.typeIds=i.typeIds,this.nullBitmap=i.nullBitmap,this.valueOffsets=i.valueOffsets):(this.stride=sK(e),i&&((s=i[0])&&(this.valueOffsets=s),(s=i[1])&&(this.values=s),(s=i[2])&&(this.nullBitmap=s),(s=i[3])&&(this.typeIds=s)))}getValid(e){const{type:t}=this;if(CY.isUnion(t)){const n=t,r=this.children[n.typeIdToChildIndex[this.typeIds[e]]],i=n.mode===LW.Dense?this.valueOffsets[e]:e;return r.getValid(i)}if(this.nullable&&this.nullCount>0){const t=this.offset+e;return!!(this.nullBitmap[t>>3]&1<<t%8)}return!0}setValid(e,t){let n;const{type:r}=this;if(CY.isUnion(r)){const i=r,o=this.children[i.typeIdToChildIndex[this.typeIds[e]]],a=i.mode===LW.Dense?this.valueOffsets[e]:e;n=o.getValid(a),o.setValid(a,t)}else{let{nullBitmap:r}=this;const{offset:i,length:o}=this,a=i+e,s=1<<a%8,l=a>>3;(!r||r.byteLength<=l)&&(r=new Uint8Array((i+o+63&-64)>>3).fill(255),this.nullCount>0?(r.set(UZ(i,o,this.nullBitmap),0),Object.assign(this,{nullBitmap:r})):Object.assign(this,{nullBitmap:r,_nullCount:0}));const u=r[l];n=0!==(u&s),r[l]=t?u|s:u&~s}return n!==!!t&&(this._nullCount=this.nullCount+(t?-1:1)),t}clone(e=this.type,t=this.offset,n=this.length,r=this._nullCount,i=this,o=this.children){return new GZ(e,t,n,r,i,o,this.dictionary)}slice(e,t){const{stride:n,typeId:r,children:i}=this,o=+(0===this._nullCount)-1,a=16===r?n:1,s=this._sliceBuffers(e,t,n,r);return this.clone(this.type,this.offset+e,t,o,s,0===i.length||this.valueOffsets?i:this._sliceChildren(i,a*e,a*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===UG.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:n}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);r[t>>3]=(1<<t-(-8&t))-1,n>0&&r.set(UZ(this.offset,t,this.nullBitmap),0);const i=this.buffers;return i[qG.VALIDITY]=r,this.clone(this.type,0,e,n+(e-t),i)}_sliceBuffers(e,t,n,r){let i;const{buffers:o}=this;return(i=o[qG.TYPE])&&(o[qG.TYPE]=i.subarray(e,e+t)),(i=o[qG.OFFSET])&&(o[qG.OFFSET]=i.subarray(e,e+t+1))||(i=o[qG.DATA])&&(o[qG.DATA]=6===r?i:i.subarray(n*e,n*(e+t))),o}_sliceChildren(e,t,n){return e.map(e=>e.slice(t,n))}}GZ.prototype.children=Object.freeze([]);class YZ extends lK{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{type:t,offset:n=0,length:r=0}=e;return new GZ(t,n,r,r)}visitBool(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length>>3,nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitInt(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitFloat(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitUtf8(e){const{type:t,offset:n=0}=e,r=kW(e.data),i=kW(e.nullBitmap),o=EW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,r,i])}visitLargeUtf8(e){const{type:t,offset:n=0}=e,r=kW(e.data),i=kW(e.nullBitmap),o=SW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,r,i])}visitBinary(e){const{type:t,offset:n=0}=e,r=kW(e.data),i=kW(e.nullBitmap),o=EW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,r,i])}visitLargeBinary(e){const{type:t,offset:n=0}=e,r=kW(e.data),i=kW(e.nullBitmap),o=SW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,r,i])}visitFixedSizeBinary(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitDate(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitTimestamp(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitTime(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitDecimal(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitList(e){const{type:t,offset:n=0,child:r}=e,i=kW(e.nullBitmap),o=EW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,void 0,i],[r])}visitStruct(e){const{type:t,offset:n=0,children:r=[]}=e,i=kW(e.nullBitmap),{length:o=r.reduce((e,{length:t})=>Math.max(e,t),0),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,void 0,i],r)}visitUnion(e){const{type:t,offset:n=0,children:r=[]}=e,i=xW(t.ArrayType,e.typeIds),{length:o=i.length,nullCount:a=-1}=e;if(CY.isSparseUnion(t))return new GZ(t,n,o,a,[void 0,void 0,void 0,i],r);const s=EW(e.valueOffsets);return new GZ(t,n,o,a,[s,void 0,void 0,i],r)}visitDictionary(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.indices.ArrayType,e.data),{dictionary:o=new yQ([(new YZ).visit({type:t.dictionary})])}=e,{length:a=i.length,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[void 0,i,r],[],o)}visitInterval(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitDuration(e){const{type:t,offset:n=0}=e,r=kW(e.nullBitmap),i=xW(t.ArrayType,e.data),{length:o=i.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,i,r])}visitFixedSizeList(e){const{type:t,offset:n=0,child:r=(new YZ).visit({type:t.valueType})}=e,i=kW(e.nullBitmap),{length:o=r.length/sK(t),nullCount:a=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,o,a,[void 0,void 0,i],[r])}visitMap(e){const{type:t,offset:n=0,child:r=(new YZ).visit({type:t.childType})}=e,i=kW(e.nullBitmap),o=EW(e.valueOffsets),{length:a=o.length-1,nullCount:s=(e.nullBitmap?-1:0)}=e;return new GZ(t,n,a,s,[o,void 0,i],[r])}}const KZ=new YZ;function ZZ(e){return KZ.visit(e)}class QZ{constructor(e=0,t){this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function XZ(e){return e.reduce((e,t)=>e+t.nullCount,0)}function JZ(e){return e.reduce((e,t,n)=>(e[n+1]=e[n]+t.length,e),new Uint32Array(e.length+1))}function eQ(e,t,n,r){const i=[];for(let o=-1,a=e.length;++o<a;){const a=e[o],s=t[o],{length:l}=a;if(s>=r)break;if(n>=s+l)continue;if(s>=n&&s+l<=r){i.push(a);continue}const u=Math.max(0,n-s),c=Math.min(r-s,l);i.push(a.slice(u,c-u))}return 0===i.length&&i.push(e[0].slice(0,0)),i}function tQ(e,t,n,r){let i=0,o=0,a=t.length-1;do{if(i>=a-1)return n<t[a]?r(e,i,n-t[i]):null;o=i+Math.trunc(.5*(a-i)),n<t[o]?a=o:i=o}while(i<a)}function nQ(e,t){return e.getValid(t)}function rQ(e){function t(t,n,r){return e(t[n],r)}return function(e){return tQ(this.data,this._offsets,e,t)}}function iQ(e){let t;function n(n,r,i){return e(n[r],i,t)}return function(e,r){const i=this.data;t=r;const o=tQ(i,this._offsets,e,n);return t=void 0,o}}function oQ(e){let t;function n(n,r,i){let o=i,a=0,s=0;for(let l=r-1,u=n.length;++l<u;){const r=n[l];if(~(a=e(r,t,o)))return s+a;o=0,s+=r.length}return-1}return function(e,r){t=e;const i=this.data,o="number"!=typeof r?n(i,0,0):tQ(i,this._offsets,r,n);return t=void 0,o}}class aQ extends lK{}function sQ(e,t,n){if(void 0===t)return-1;if(null===t)switch(e.typeId){case UG.Union:case UG.Dictionary:break;default:return function(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new HZ(n,e.offset+(t||0),e.length,n,$Z)){if(!i)return r;++r}return-1}(e,n)}const r=kZ.getVisitFn(e),i=LZ(t);for(let o=(n||0)-1,a=e.length;++o<a;)if(i(r(e,o)))return o;return-1}function lQ(e,t,n){const r=kZ.getVisitFn(e),i=LZ(t);for(let o=(n||0)-1,a=e.length;++o<a;)if(i(r(e,o)))return o;return-1}aQ.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},aQ.prototype.visitBool=sQ,aQ.prototype.visitInt=sQ,aQ.prototype.visitInt8=sQ,aQ.prototype.visitInt16=sQ,aQ.prototype.visitInt32=sQ,aQ.prototype.visitInt64=sQ,aQ.prototype.visitUint8=sQ,aQ.prototype.visitUint16=sQ,aQ.prototype.visitUint32=sQ,aQ.prototype.visitUint64=sQ,aQ.prototype.visitFloat=sQ,aQ.prototype.visitFloat16=sQ,aQ.prototype.visitFloat32=sQ,aQ.prototype.visitFloat64=sQ,aQ.prototype.visitUtf8=sQ,aQ.prototype.visitLargeUtf8=sQ,aQ.prototype.visitBinary=sQ,aQ.prototype.visitLargeBinary=sQ,aQ.prototype.visitFixedSizeBinary=sQ,aQ.prototype.visitDate=sQ,aQ.prototype.visitDateDay=sQ,aQ.prototype.visitDateMillisecond=sQ,aQ.prototype.visitTimestamp=sQ,aQ.prototype.visitTimestampSecond=sQ,aQ.prototype.visitTimestampMillisecond=sQ,aQ.prototype.visitTimestampMicrosecond=sQ,aQ.prototype.visitTimestampNanosecond=sQ,aQ.prototype.visitTime=sQ,aQ.prototype.visitTimeSecond=sQ,aQ.prototype.visitTimeMillisecond=sQ,aQ.prototype.visitTimeMicrosecond=sQ,aQ.prototype.visitTimeNanosecond=sQ,aQ.prototype.visitDecimal=sQ,aQ.prototype.visitList=sQ,aQ.prototype.visitStruct=sQ,aQ.prototype.visitUnion=sQ,aQ.prototype.visitDenseUnion=lQ,aQ.prototype.visitSparseUnion=lQ,aQ.prototype.visitDictionary=sQ,aQ.prototype.visitInterval=sQ,aQ.prototype.visitIntervalDayTime=sQ,aQ.prototype.visitIntervalYearMonth=sQ,aQ.prototype.visitDuration=sQ,aQ.prototype.visitDurationSecond=sQ,aQ.prototype.visitDurationMillisecond=sQ,aQ.prototype.visitDurationMicrosecond=sQ,aQ.prototype.visitDurationNanosecond=sQ,aQ.prototype.visitFixedSizeList=sQ,aQ.prototype.visitMap=sQ;const uQ=new aQ;class cQ extends lK{}function dQ(e){const{type:t}=e;if(0===e.nullCount&&1===e.stride&&(CY.isInt(t)&&64!==t.bitWidth||CY.isTime(t)&&64!==t.bitWidth||CY.isFloat(t)&&t.precision!==BW.HALF))return new QZ(e.data.length,t=>{const n=e.data[t];return n.values.subarray(0,n.length)[Symbol.iterator]()});let n=0;return new QZ(e.data.length,t=>{const r=e.data[t].length,i=e.slice(n,n+r);return n+=r,new fQ(i)})}class fQ{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}cQ.prototype.visitNull=dQ,cQ.prototype.visitBool=dQ,cQ.prototype.visitInt=dQ,cQ.prototype.visitInt8=dQ,cQ.prototype.visitInt16=dQ,cQ.prototype.visitInt32=dQ,cQ.prototype.visitInt64=dQ,cQ.prototype.visitUint8=dQ,cQ.prototype.visitUint16=dQ,cQ.prototype.visitUint32=dQ,cQ.prototype.visitUint64=dQ,cQ.prototype.visitFloat=dQ,cQ.prototype.visitFloat16=dQ,cQ.prototype.visitFloat32=dQ,cQ.prototype.visitFloat64=dQ,cQ.prototype.visitUtf8=dQ,cQ.prototype.visitLargeUtf8=dQ,cQ.prototype.visitBinary=dQ,cQ.prototype.visitLargeBinary=dQ,cQ.prototype.visitFixedSizeBinary=dQ,cQ.prototype.visitDate=dQ,cQ.prototype.visitDateDay=dQ,cQ.prototype.visitDateMillisecond=dQ,cQ.prototype.visitTimestamp=dQ,cQ.prototype.visitTimestampSecond=dQ,cQ.prototype.visitTimestampMillisecond=dQ,cQ.prototype.visitTimestampMicrosecond=dQ,cQ.prototype.visitTimestampNanosecond=dQ,cQ.prototype.visitTime=dQ,cQ.prototype.visitTimeSecond=dQ,cQ.prototype.visitTimeMillisecond=dQ,cQ.prototype.visitTimeMicrosecond=dQ,cQ.prototype.visitTimeNanosecond=dQ,cQ.prototype.visitDecimal=dQ,cQ.prototype.visitList=dQ,cQ.prototype.visitStruct=dQ,cQ.prototype.visitUnion=dQ,cQ.prototype.visitDenseUnion=dQ,cQ.prototype.visitSparseUnion=dQ,cQ.prototype.visitDictionary=dQ,cQ.prototype.visitInterval=dQ,cQ.prototype.visitIntervalDayTime=dQ,cQ.prototype.visitIntervalYearMonth=dQ,cQ.prototype.visitDuration=dQ,cQ.prototype.visitDurationSecond=dQ,cQ.prototype.visitDurationMillisecond=dQ,cQ.prototype.visitDurationMicrosecond=dQ,cQ.prototype.visitDurationNanosecond=dQ,cQ.prototype.visitFixedSizeList=dQ,cQ.prototype.visitMap=dQ;const pQ=new cQ;var hQ;const mQ={},gQ={};class yQ{constructor(e){var t,n,r;const i=e[0]instanceof yQ?e.flatMap(e=>e.data):e;if(0===i.length||i.some(e=>!(e instanceof GZ)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=null===(t=i[0])||void 0===t?void 0:t.type;switch(i.length){case 0:this._offsets=[0];break;case 1:{const{get:e,set:t,indexOf:n}=mQ[o.typeId],r=i[0];this.isValid=e=>nQ(r,e),this.get=t=>e(r,t),this.set=(e,n)=>t(r,e,n),this.indexOf=e=>n(r,e),this._offsets=[0,r.length];break}default:Object.setPrototypeOf(this,gQ[o.typeId]),this._offsets=JZ(i)}this.data=i,this.type=o,this.stride=sK(o),this.numChildren=null!==(r=null===(n=o.children)||void 0===n?void 0:n.length)&&void 0!==r?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,t)=>e+t.byteLength,0)}get nullable(){return this.data.some(e=>e.nullable)}get nullCount(){return XZ(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${UG[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(PZ(e,this.length))}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>-1}[Symbol.iterator](){return pQ.visit(this)}concat(...e){return new yQ(this.data.concat(e.flatMap(e=>e.data).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new yQ(MZ(this,e,t,({data:e,_offsets:t},n,r)=>eQ(e,t,n,r)))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:n,stride:r,ArrayType:i}=this;switch(e.typeId){case UG.Int:case UG.Float:case UG.Decimal:case UG.Time:case UG.Timestamp:switch(t.length){case 0:return new i;case 1:return t[0].values.subarray(0,n*r);default:return t.reduce((e,{values:t,length:n})=>(e.array.set(t.subarray(0,n*r),e.offset),e.offset+=n*r,e),{array:new i(n*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null===(t=this.type.children)||void 0===t?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new yQ(this.data.map(({children:t})=>t[e])):null}get isMemoized(){return!!CY.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(CY.isDictionary(this.type)){const e=new vQ(this.data[0].dictionary),t=this.data.map(t=>{const n=t.clone();return n.dictionary=e,n});return new yQ(t)}return new vQ(this)}unmemoize(){if(CY.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map(t=>{const n=t.clone();return n.dictionary=e,n});return new yQ(t)}return this}}hQ=Symbol.toStringTag,yQ[hQ]=(e=>{e.type=CY.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(UG).map(e=>UG[e]).filter(e=>"number"==typeof e&&e!==UG.NONE);for(const n of t){const t=kZ.getVisitFnByTypeId(n),r=YK.getVisitFnByTypeId(n),i=uQ.getVisitFnByTypeId(n);mQ[n]={get:t,set:r,indexOf:i},gQ[n]=Object.create(e,{isValid:{value:rQ(nQ)},get:{value:rQ(kZ.getVisitFnByTypeId(n))},set:{value:iQ(YK.getVisitFnByTypeId(n))},indexOf:{value:oQ(uQ.getVisitFnByTypeId(n))}})}return"Vector"})(yQ.prototype);class vQ extends yQ{constructor(e){super(e.data);const t=this.get,n=this.set,r=this.slice,i=new Array(this.length);Object.defineProperty(this,"get",{value(e){const n=i[e];if(void 0!==n)return n;const r=t.call(this,e);return i[e]=r,r}}),Object.defineProperty(this,"set",{value(e,t){n.call(this,e,t),i[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new vQ(r.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new yQ(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function bQ(e){if(e){if(e instanceof GZ)return new yQ([e]);if(e instanceof yQ)return new yQ(e.data);if(e.type instanceof CY)return new yQ([ZZ(e)]);if(Array.isArray(e))return new yQ(e.flatMap(e=>{return(t=e)instanceof GZ?[t]:t instanceof yQ?t.data:bQ(t).data;var t}));if(ArrayBuffer.isView(e)){e instanceof DataView&&(e=new Uint8Array(e.buffer));const t={offset:0,length:e.length,nullCount:-1,data:e};if(e instanceof Int8Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new OY}))]);if(e instanceof Int16Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new NY}))]);if(e instanceof Int32Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new DY}))]);if(e instanceof BigInt64Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new RY}))]);if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new MY}))]);if(e instanceof Uint16Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new PY}))]);if(e instanceof Uint32Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new FY}))]);if(e instanceof BigUint64Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new LY}))]);if(e instanceof Float32Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new BY}))]);if(e instanceof Float64Array)return new yQ([ZZ(Object.assign(Object.assign({},t),{type:new $Y}))]);throw new Error("Unrecognized input")}}throw new Error("Unrecognized input")}function wQ(e){if(!e||e.length<=0)return function(e){return!0};let t="";const n=e.filter(e=>e==e);return n.length>0&&(t=`\n    switch (x) {${n.map(e=>`\n        case ${function(e){if("bigint"!=typeof e)return VG(e);return`${VG(e)}n`}(e)}:`).join("")}\n            return false;\n    }`),e.length!==n.length&&(t=`if (x !== x) return false;\n${t}`),new Function("x",`${t}\nreturn true;`)}function _Q(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function xQ(e,t=0){return e.length>=t?e.subarray(0,t):wW(new e.constructor(t),e,0)}class EQ{constructor(e,t=0,n=1){this.length=Math.ceil(t/n),this.buffer=new e(this.length),this.stride=n,this.BYTES_PER_ELEMENT=e.BYTES_PER_ELEMENT,this.ArrayType=e}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(e,t){return this}append(e){return this.set(this.length,e)}reserve(e){if(e>0){this.length+=e;const t=this.stride,n=this.length*t,r=this.buffer.length;n>=r&&this._resize(_Q(0===r?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(e=this.length){e=_Q(e*this.stride,this.BYTES_PER_ELEMENT);const t=xQ(this.buffer,e);return this.clear(),t}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(e){return this.buffer=xQ(this.buffer,e)}}class SQ extends EQ{last(){return this.get(this.length-1)}get(e){return this.buffer[e]}set(e,t){return this.reserve(e-this.length+1),this.buffer[e*this.stride]=t,this}}class kQ extends SQ{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(e){return this.buffer[e>>3]>>e%8&1}set(e,t){const{buffer:n}=this.reserve(e-this.length+1),r=e>>3,i=e%8,o=n[r]>>i&1;return t?0===o&&(n[r]|=1<<i,++this.numValid):1===o&&(n[r]&=~(1<<i),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class TQ extends SQ{constructor(e){super(e.OffsetArrayType,1,1)}append(e){return this.set(this.length-1,e)}set(e,t){const n=this.length-1,r=this.reserve(e-n+1).buffer;return n<e++&&n>=0&&r.fill(r[n],n,e),r[e]=r[e-1]+t,this}flush(e=this.length-1){return e>this.length&&this.set(e-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(e+1)}}let CQ=class{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e){throw new Error('"throughDOM" not available in this environment')}constructor({type:e,nullValues:t}){this.length=0,this.finished=!1,this.type=e,this.children=[],this.nullValues=t,this.stride=sK(e),this._nulls=new kQ,t&&t.length>0&&(this._isValid=wQ(t))}toVector(){return new yQ([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let e=0;const{_offsets:t,_values:n,_nulls:r,_typeIds:i,children:o}=this;return t&&(e+=t.byteLength),n&&(e+=n.byteLength),r&&(e+=r.byteLength),i&&(e+=i.byteLength),o.reduce((e,t)=>e+t.byteLength,e)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let e=0;return this._offsets&&(e+=this._offsets.reservedByteLength),this._values&&(e+=this._values.reservedByteLength),this._nulls&&(e+=this._nulls.reservedByteLength),this._typeIds&&(e+=this._typeIds.reservedByteLength),this.children.reduce((e,t)=>e+t.reservedByteLength,e)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(e){return this.set(this.length,e)}isValid(e){return this._isValid(e)}set(e,t){return this.setValid(e,this.isValid(t))&&this.setValue(e,t),this}setValue(e,t){this._setValue(this,e,t)}setValid(e,t){return this.length=this._nulls.set(e,+t).length,t}addChild(e,t=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(e){return this.children[e]||null}flush(){let e,t,n,r;const{type:i,length:o,nullCount:a,_typeIds:s,_offsets:l,_values:u,_nulls:c}=this;(t=null==s?void 0:s.flush(o))?r=null==l?void 0:l.flush(o):e=(r=null==l?void 0:l.flush(o))?null==u?void 0:u.flush(l.last()):null==u?void 0:u.flush(o),a>0&&(n=null==c?void 0:c.flush(o));const d=this.children.map(e=>e.flush());return this.clear(),ZZ({type:i,length:o,nullCount:a,children:d,child:d[0],data:e,typeIds:t,nullBitmap:n,valueOffsets:r})}finish(){this.finished=!0;for(const e of this.children)e.finish();return this}clear(){var e,t,n,r;this.length=0,null===(e=this._nulls)||void 0===e||e.clear(),null===(t=this._values)||void 0===t||t.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(r=this._typeIds)||void 0===r||r.clear();for(const i of this.children)i.clear();return this}};CQ.prototype.length=1,CQ.prototype.stride=1,CQ.prototype.children=null,CQ.prototype.finished=!1,CQ.prototype.nullValues=null,CQ.prototype._isValid=()=>!0;class AQ extends CQ{constructor(e){super(e),this._values=new SQ(this.ArrayType,0,this.stride)}setValue(e,t){const n=this._values;return n.reserve(e-n.length+1),super.setValue(e,t)}}class IQ extends CQ{constructor(e){super(e),this._pendingLength=0,this._offsets=new TQ(e.type)}setValue(e,t){const n=this._pending||(this._pending=new Map),r=n.get(e);r&&(this._pendingLength-=r.length),this._pendingLength+=t instanceof OZ?t[TZ].length:t.length,n.set(e,t)}setValid(e,t){return!!super.setValid(e,t)||((this._pending||(this._pending=new Map)).set(e,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const e=this._pending,t=this._pendingLength;return this._pendingLength=0,this._pending=void 0,e&&e.size>0&&this._flushPending(e,t),this}}class OQ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,n,r){return e.prep(8,24),e.writeInt64(BigInt(null!=r?r:0)),e.pad(4),e.writeInt32(n),e.writeInt64(BigInt(null!=t?t:0)),e.offset()}}class NQ{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new NQ).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new NQ).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):PW.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new BG).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const n=this.bb.__offset(this.bb_pos,8);return n?(t||new OQ).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new OQ).__init(this.bb.__vector(this.bb_pos+n)+24*e,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new gG).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,PW.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}let DQ=class e{constructor(e=[],t,n,r=PW.V5){this.fields=e||[],this.metadata=t||new Map,n||(n=PQ(this.fields)),this.dictionaries=n,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,t)=>`${t}: ${e}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(e=>n.has(e.name));return new e(r,this.metadata)}selectAt(t){const n=t.map(e=>this.fields[e]).filter(Boolean);return new e(n,this.metadata)}assign(...t){const n=t[0]instanceof e?t[0]:Array.isArray(t[0])?new e(t[0]):new e(t),r=[...this.fields],i=MQ(MQ(new Map,this.metadata),n.metadata),o=n.fields.filter(e=>{const t=r.findIndex(t=>t.name===e.name);return!~t||(r[t]=e.clone({metadata:MQ(MQ(new Map,r[t].metadata),e.metadata)}))&&!1}),a=PQ(o,new Map);return new e([...r,...o],i,new Map([...this.dictionaries,...a]))}};DQ.prototype.fields=null,DQ.prototype.metadata=null,DQ.prototype.dictionaries=null;let RQ=class e{static new(...t){let[n,r,i,o]=t;return t[0]&&"object"==typeof t[0]&&(({name:n}=t[0]),void 0===r&&(r=t[0].type),void 0===i&&(i=t[0].nullable),void 0===o&&(o=t[0].metadata)),new e(`${n}`,r,i,o)}constructor(e,t,n=!1,r){this.name=e,this.type=t,this.nullable=n,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,o]=t;return t[0]&&"object"==typeof t[0]?({name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:o=this.metadata}=t[0]):[n=this.name,r=this.type,i=this.nullable,o=this.metadata]=t,e.new(n,r,i,o)}};function MQ(e,t){return new Map([...e||new Map,...t||new Map])}function PQ(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const r=e[n].type;if(CY.isDictionary(r))if(t.has(r.id)){if(t.get(r.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(r.id,r.dictionary);r.children&&r.children.length>0&&PQ(r.children,t)}return t}RQ.prototype.type=null,RQ.prototype.name=null,RQ.prototype.nullable=null,RQ.prototype.metadata=null;var FQ=eG,LQ=JW;class jQ{static decode(e){e=new LQ(kW(e));const t=NQ.getRootAsFooter(e),n=DQ.decode(t.schema(),new Map,t.version());return new BQ(n,t)}static encode(e){const t=new FQ,n=DQ.encode(t,e.schema);NQ.startRecordBatchesVector(t,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())$Q.encode(t,o);const r=t.endVector();NQ.startDictionariesVector(t,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())$Q.encode(t,o);const i=t.endVector();return NQ.startFooter(t),NQ.addSchema(t,n),NQ.addVersion(t,PW.V5),NQ.addRecordBatches(t,r),NQ.addDictionaries(t,i),NQ.finishFooterBuffer(t,NQ.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,t=PW.V5,n,r){this.schema=e,this.version=t,n&&(this._recordBatches=n),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let e,t=-1,n=this.numRecordBatches;++t<n;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,n=this.numDictionaries;++t<n;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class BQ extends jQ{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,t){super(e,t.version()),this._footer=t}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return $Q.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return $Q.decode(t)}return null}}class $Q{static decode(e){return new $Q(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:n}=t,r=BigInt(t.offset),i=BigInt(t.bodyLength);return OQ.createBlock(e,r,n,i)}constructor(e,t,n){this.metaDataLength=e,this.offset=WG(n),this.bodyLength=WG(t)}}const zQ=Object.freeze({done:!0,value:void 0});class UQ{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class qQ{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class HQ extends qQ{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ii(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(zQ);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return NW.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return NW.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ii(this,void 0,void 0,function*(){return yield this.abort(e),zQ})}return(e){return ii(this,void 0,void 0,function*(){return yield this.close(),zQ})}read(e){return ii(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ii(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((e,t)=>{this.resolvers.push({resolve:e,reject:t})}):Promise.resolve(zQ)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class VQ extends HQ{write(e){if((e=kW(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?rW(this.toUint8Array(!0)):this.toUint8Array(!1).then(rW)}toUint8Array(e=!1){return e?_W(this._values)[0]:(()=>ii(this,void 0,void 0,function*(){var e,t,n,r;const i=[];let o=0;try{for(var a,s=!0,l=ui(this);!(e=(a=yield l.next()).done);s=!0){r=a.value,s=!1;const e=r;i.push(e),o+=e.byteLength}}catch(u){t={error:u}}finally{try{s||e||!(n=l.return)||(yield n.call(l))}finally{if(t)throw t.error}}return _W(i,o)[0]}))()}}class WQ{constructor(e){e&&(this.source=new YQ(NW.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class GQ{constructor(e){e instanceof GQ?this.source=e.source:e instanceof VQ?this.source=new KQ(NW.fromAsyncIterable(e)):vW(e)?this.source=new KQ(NW.fromNodeStream(e)):yW(e)?this.source=new KQ(NW.fromDOMStream(e)):mW(e)?this.source=new KQ(NW.fromDOMStream(e.body)):cW(e)?this.source=new KQ(NW.fromIterable(e)):(uW(e)||dW(e))&&(this.source=new KQ(NW.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class YQ{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,t="read"){return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||zQ)}return(e){return Object.create(this.source.return&&this.source.return(e)||zQ)}}class KQ{constructor(e){this.source=e,this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}cancel(e){return ii(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ii(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ii(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return ii(this,arguments,void 0,function*(e,t="read"){return yield this.source.next({cmd:t,size:e})})}throw(e){return ii(this,void 0,void 0,function*(){const t=this.source.throw&&(yield this.source.throw(e))||zQ;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}return(e){return ii(this,void 0,void 0,function*(){const t=this.source.return&&(yield this.source.return(e))||zQ;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)})}}class ZQ extends WQ{constructor(e,t){super(),this.position=0,this.buffer=kW(e),this.size=void 0===t?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:n}=this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:n,position:r}=this;return t&&r<n?("number"!=typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(n,r+Math.min(n-r,e)),t.subarray(r,this.position)):null}readAt(e,t){const n=this.buffer,r=Math.min(this.size,e+t);return n?n.subarray(e,r):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class QQ extends GQ{constructor(e,t){super(),this.position=0,this._handle=e,"number"==typeof t?this.size=t:this._pending=(()=>ii(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending}))()}readInt32(e){return ii(this,void 0,void 0,function*(){const{buffer:t,byteOffset:n}=yield this.readAt(e,4);return new DataView(t,n).getInt32(0,!0)})}seek(e){return ii(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ii(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:t,size:n,position:r}=this;if(t&&r<n){"number"!=typeof e&&(e=Number.POSITIVE_INFINITY);let i=r,o=0,a=0;const s=Math.min(n,i+Math.min(n-i,e)),l=new Uint8Array(Math.max(0,(this.position=s)-i));for(;(i+=a)<s&&(o+=a)<l.byteLength;)({bytesRead:a}=yield t.read(l,o,l.byteLength-o,i));return l}return null})}readAt(e,t){return ii(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:r}=this;if(n&&e+t<r){const i=Math.min(r,e+t),o=new Uint8Array(i-e);return(yield n.read(o,0,t,e)).buffer}return new Uint8Array(t)})}close(){return ii(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ii(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ii(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}function XQ(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const JQ=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class eX{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);let r=t[3]*n[3];this.buffer[0]=65535&r;let i=r>>>16;return r=t[2]*n[3],i+=r,r=t[3]*n[2]>>>0,i+=r,this.buffer[0]+=i<<16,this.buffer[1]=i>>>0<r?65536:0,this.buffer[1]+=i>>>16,this.buffer[1]+=t[1]*n[3]+t[2]*n[2]+t[3]*n[1],this.buffer[1]+=t[0]*n[3]+t[1]*n[2]+t[2]*n[1]+t[3]*n[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${XQ(this.buffer[1])} ${XQ(this.buffer[0])}`}}class tX extends eX{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,t=new Uint32Array(2)){return tX.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return tX.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.length,r=new tX(t);for(let i=0;i<n;){const t=8<n-i?8:n-i,o=new tX(new Uint32Array([Number.parseInt(e.slice(i,i+t),10),0])),a=new tX(new Uint32Array([JQ[t],0]));r.times(a),r.plus(o),i+=t}return r}static convertArray(e){const t=new Uint32Array(2*e.length);for(let n=-1,r=e.length;++n<r;)tX.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new tX(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new tX(new Uint32Array(e.buffer)).plus(t)}}class nX extends eX{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]|0,n=e.buffer[1]|0;return t<n||t===n&&this.buffer[0]<e.buffer[0]}static from(e,t=new Uint32Array(2)){return nX.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(2)){return nX.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(2)){const n=e.startsWith("-"),r=e.length,i=new nX(t);for(let o=n?1:0;o<r;){const t=8<r-o?8:r-o,n=new nX(new Uint32Array([Number.parseInt(e.slice(o,o+t),10),0])),a=new nX(new Uint32Array([JQ[t],0]));i.times(a),i.plus(n),o+=t}return n?i.negate():i}static convertArray(e){const t=new Uint32Array(2*e.length);for(let n=-1,r=e.length;++n<r;)nX.from(e[n],new Uint32Array(t.buffer,t.byteOffset+2*n*4,2));return t}static multiply(e,t){return new nX(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new nX(new Uint32Array(e.buffer)).plus(t)}}class rX{constructor(e){this.buffer=e}high(){return new nX(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new nX(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){const t=new tX(new Uint32Array([this.buffer[3],0])),n=new tX(new Uint32Array([this.buffer[2],0])),r=new tX(new Uint32Array([this.buffer[1],0])),i=new tX(new Uint32Array([this.buffer[0],0])),o=new tX(new Uint32Array([e.buffer[3],0])),a=new tX(new Uint32Array([e.buffer[2],0])),s=new tX(new Uint32Array([e.buffer[1],0])),l=new tX(new Uint32Array([e.buffer[0],0]));let u=tX.multiply(i,l);this.buffer[0]=u.low();const c=new tX(new Uint32Array([u.high(),0]));u=tX.multiply(r,l),c.plus(u),u=tX.multiply(i,s),c.plus(u),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(u)?1:0,this.buffer[2]=c.high();return new tX(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(tX.multiply(n,l)).plus(tX.multiply(r,s)).plus(tX.multiply(i,a)),this.buffer[3]+=tX.multiply(t,l).plus(tX.multiply(n,s)).plus(tX.multiply(r,a)).plus(tX.multiply(i,o)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${XQ(this.buffer[3])} ${XQ(this.buffer[2])} ${XQ(this.buffer[1])} ${XQ(this.buffer[0])}`}static multiply(e,t){return new rX(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new rX(new Uint32Array(e.buffer)).plus(t)}static from(e,t=new Uint32Array(4)){return rX.fromString("string"==typeof e?e:e.toString(),t)}static fromNumber(e,t=new Uint32Array(4)){return rX.fromString(e.toString(),t)}static fromString(e,t=new Uint32Array(4)){const n=e.startsWith("-"),r=e.length,i=new rX(t);for(let o=n?1:0;o<r;){const t=8<r-o?8:r-o,n=new rX(new Uint32Array([Number.parseInt(e.slice(o,o+t),10),0,0,0])),a=new rX(new Uint32Array([JQ[t],0,0,0]));i.times(a),i.plus(n),o+=t}return n?i.negate():i}static convertArray(e){const t=new Uint32Array(4*e.length);for(let n=-1,r=e.length;++n<r;)rX.from(e[n],new Uint32Array(t.buffer,t.byteOffset+16*n,4));return t}}class iX extends lK{constructor(e,t,n,r,i=PW.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=n,this.dictionaries=r,this.metadataVersion=i}visit(e){return super.visit(e instanceof RQ?e.type:e)}visitNull(e,{length:t}=this.nextFieldNode()){return ZZ({type:e,length:t})}visitBool(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitInt(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFloat(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitUtf8(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDate(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTimestamp(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitTime(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDecimal(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitList(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),children:this.visitMany(e.children)})}visitUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return this.metadataVersion<PW.V5&&this.readNullBitmap(e,n),e.mode===LW.Sparse?this.visitSparseUnion(e,{length:t,nullCount:n}):this.visitDenseUnion(e,{length:t,nullCount:n})}visitDenseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitDuration(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),data:this.readData(e)})}visitFixedSizeList(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),child:this.visit(e.children[0])})}visitMap(e,{length:t,nullCount:n}=this.nextFieldNode()){return ZZ({type:e,length:t,nullCount:n,nullBitmap:this.readNullBitmap(e,n),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t,n=this.nextBufferRange()){return t>0&&this.readData(e,n)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e,{length:t,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class oX extends iX{constructor(e,t,n,r,i){super(new Uint8Array(0),t,n,r,i),this.sources=e}readNullBitmap(e,t,{offset:n}=this.nextBufferRange()){return t<=0?new Uint8Array(0):qZ(this.sources[n])}readOffsets(e,{offset:t}=this.nextBufferRange()){return xW(Uint8Array,xW(e.OffsetArrayType,this.sources[t]))}readTypeIds(e,{offset:t}=this.nextBufferRange()){return xW(Uint8Array,xW(e.ArrayType,this.sources[t]))}readData(e,{offset:t}=this.nextBufferRange()){const{sources:n}=this;return CY.isTimestamp(e)||(CY.isInt(e)||CY.isTime(e))&&64===e.bitWidth||CY.isDuration(e)||CY.isDate(e)&&e.unit===zW.MILLISECOND?xW(Uint8Array,nX.convertArray(n[t])):CY.isDecimal(e)?xW(Uint8Array,rX.convertArray(n[t])):CY.isBinary(e)||CY.isLargeBinary(e)||CY.isFixedSizeBinary(e)?function(e){const t=e.join(""),n=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2)n[r>>1]=Number.parseInt(t.slice(r,r+2),16);return n}(n[t]):CY.isBool(e)?qZ(n[t]):CY.isUtf8(e)||CY.isLargeUtf8(e)?oW(n[t].join("")):xW(Uint8Array,xW(e.ArrayType,n[t].map(e=>+e)))}}class aX extends IQ{constructor(e){super(e),this._values=new EQ(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,kW(t))}_flushPending(e,t){const n=this._offsets,r=this._values.reserve(t).buffer;let i=0;for(const[o,a]of e)if(void 0===a)n.set(o,0);else{const e=a.length;r.set(a,i),n.set(o,e),i+=e}}}class sX extends IQ{constructor(e){super(e),this._values=new EQ(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,kW(t))}_flushPending(e,t){const n=this._offsets,r=this._values.reserve(t).buffer;let i=0;for(const[o,a]of e)if(void 0===a)n.set(o,BigInt(0));else{const e=a.length;r.set(a,i),n.set(o,BigInt(e)),i+=e}}}class lX extends CQ{constructor(e){super(e),this._values=new kQ}setValue(e,t){this._values.set(e,+t)}}class uX extends AQ{}uX.prototype._setValue=TK;class cX extends uX{}cX.prototype._setValue=_K;class dX extends uX{}dX.prototype._setValue=xK;class fX extends AQ{}fX.prototype._setValue=LK;class pX extends CQ{constructor({type:e,nullValues:t,dictionaryHashFunction:n}){super({type:new aK(e.dictionary,e.indices,e.id,e.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=gJ({type:this.type.indices,nullValues:t}),this.dictionary=gJ({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(e){return this.indices.isValid(e)}setValid(e,t){const n=this.indices;return t=n.setValid(e,t),this.length=n.length,t}setValue(e,t){const n=this._keysToIndices,r=this.valueToKey(t);let i=n[r];return void 0===i&&(n[r]=i=this._dictionaryOffset+this.dictionary.append(t).length-1),this.indices.setValue(e,i)}flush(){const e=this.type,t=this._dictionary,n=this.dictionary.toVector(),r=this.indices.flush().clone(e);return r.dictionary=t?t.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=r.dictionary,this.clear(),r}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(e){return"string"==typeof e?e:`${e}`}}class hX extends AQ{}hX.prototype._setValue=EK;class mX extends CQ{setValue(e,t){const[n]=this.children,r=e*this.stride;for(let i=-1,o=t.length;++i<o;)n.set(r+i,t[i])}addChild(e,t="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(e);return this.type=new rK(this.type.listSize,new RQ(t,e.type,!0)),n}}class gX extends AQ{setValue(e,t){this._values.set(e,t)}}class yX extends gX{setValue(e,t){super.setValue(e,hK(t))}}class vX extends gX{}class bX extends gX{}class wX extends AQ{}wX.prototype._setValue=$K;class _X extends wX{}_X.prototype._setValue=zK;class xX extends wX{}xX.prototype._setValue=UK;class EX extends AQ{}EX.prototype._setValue=GK;class SX extends EX{}SX.prototype._setValue=qK;class kX extends EX{}kX.prototype._setValue=HK;class TX extends EX{}TX.prototype._setValue=VK;class CX extends EX{}CX.prototype._setValue=WK;class AX extends AQ{setValue(e,t){this._values.set(e,t)}}class IX extends AX{}class OX extends AX{}class NX extends AX{}class DX extends AX{}class RX extends AX{}class MX extends AX{}class PX extends AX{}class FX extends AX{}class LX extends IQ{constructor(e){super(e),this._offsets=new TQ(e.type)}addChild(e,t="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new JY(new RQ(t,e.type,!0)),this.numChildren-1}_flushPending(e){const t=this._offsets,[n]=this.children;for(const[r,i]of e)if(void 0===i)t.set(r,0);else{const e=i,o=e.length,a=t.set(r,o).buffer[r];for(let t=-1;++t<o;)n.set(a+t,e[t])}}}class jX extends IQ{set(e,t){return super.set(e,t)}setValue(e,t){const n=t instanceof Map?t:new Map(Object.entries(t)),r=this._pending||(this._pending=new Map),i=r.get(e);i&&(this._pendingLength-=i.size),this._pendingLength+=n.size,r.set(e,n)}addChild(e,t=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=e,this.type=new iK(new RQ(t,e.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(e){const t=this._offsets,[n]=this.children;for(const[r,i]of e)if(void 0===i)t.set(r,0);else{let{[r]:e,[r+1]:o}=t.set(r,i.size).buffer;for(const t of i.entries())if(n.set(e,t),++e>=o)break}}}class BX extends CQ{setValue(e,t){}setValid(e,t){return this.length=Math.max(e+1,this.length),t}}class $X extends CQ{setValue(e,t){const{children:n,type:r}=this;switch(Array.isArray(t)||t.constructor){case!0:return r.children.forEach((r,i)=>n[i].set(e,t[i]));case Map:return r.children.forEach((r,i)=>n[i].set(e,t.get(r.name)));default:return r.children.forEach((r,i)=>n[i].set(e,t[r.name]))}}setValid(e,t){return super.setValid(e,t)||this.children.forEach(n=>n.setValid(e,t)),t}addChild(e,t=`${this.numChildren}`){const n=this.children.push(e);return this.type=new eK([...this.type.children,new RQ(t,e.type,!0)]),n}}class zX extends AQ{}zX.prototype._setValue=NK;class UX extends zX{}UX.prototype._setValue=CK;class qX extends zX{}qX.prototype._setValue=AK;class HX extends zX{}HX.prototype._setValue=IK;class VX extends zX{}VX.prototype._setValue=OK;class WX extends AQ{}WX.prototype._setValue=FK;class GX extends WX{}GX.prototype._setValue=DK;class YX extends WX{}YX.prototype._setValue=RK;class KX extends WX{}KX.prototype._setValue=MK;class ZX extends WX{}ZX.prototype._setValue=PK;class QX extends CQ{constructor(e){super(e),this._typeIds=new SQ(Int8Array,0,1),"function"==typeof e.valueToChildTypeId&&(this._valueToChildTypeId=e.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(e,t){return this.set(this.length,e,t)}set(e,t,n){return void 0===n&&(n=this._valueToChildTypeId(this,t,e)),this.setValue(e,t,n),this}setValue(e,t,n){this._typeIds.set(e,n);const r=this.type.typeIdToChildIndex[n],i=this.children[r];null==i||i.set(e,t)}addChild(e,t=`${this.children.length}`){const n=this.children.push(e),{type:{children:r,mode:i,typeIds:o}}=this,a=[...r,new RQ(t,e.type)];return this.type=new tK(i,[...o,n],a),n}_valueToChildTypeId(e,t,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class XX extends QX{}class JX extends QX{constructor(e){super(e),this._offsets=new SQ(Int32Array)}setValue(e,t,n){const r=this._typeIds.set(e,n).buffer[e],i=this.getChildAt(this.type.typeIdToChildIndex[r]),o=this._offsets.set(e,i.length).buffer[e];null==i||i.set(o,t)}}class eJ extends IQ{constructor(e){super(e),this._values=new EQ(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,oW(t))}_flushPending(e,t){}}eJ.prototype._flushPending=aX.prototype._flushPending;class tJ extends IQ{constructor(e){super(e),this._values=new EQ(Uint8Array)}get byteLength(){let e=this._pendingLength+4*this.length;return this._offsets&&(e+=this._offsets.byteLength),this._values&&(e+=this._values.byteLength),this._nulls&&(e+=this._nulls.byteLength),e}setValue(e,t){return super.setValue(e,oW(t))}_flushPending(e,t){}}tJ.prototype._flushPending=sX.prototype._flushPending;const nJ=new class extends lK{visitNull(){return BX}visitBool(){return lX}visitInt(){return AX}visitInt8(){return IX}visitInt16(){return OX}visitInt32(){return NX}visitInt64(){return DX}visitUint8(){return RX}visitUint16(){return MX}visitUint32(){return PX}visitUint64(){return FX}visitFloat(){return gX}visitFloat16(){return yX}visitFloat32(){return vX}visitFloat64(){return bX}visitUtf8(){return eJ}visitLargeUtf8(){return tJ}visitBinary(){return aX}visitLargeBinary(){return sX}visitFixedSizeBinary(){return hX}visitDate(){return uX}visitDateDay(){return cX}visitDateMillisecond(){return dX}visitTimestamp(){return zX}visitTimestampSecond(){return UX}visitTimestampMillisecond(){return qX}visitTimestampMicrosecond(){return HX}visitTimestampNanosecond(){return VX}visitTime(){return WX}visitTimeSecond(){return GX}visitTimeMillisecond(){return YX}visitTimeMicrosecond(){return KX}visitTimeNanosecond(){return ZX}visitDecimal(){return fX}visitList(){return LX}visitStruct(){return $X}visitUnion(){return QX}visitDenseUnion(){return JX}visitSparseUnion(){return XX}visitDictionary(){return pX}visitInterval(){return wX}visitIntervalDayTime(){return _X}visitIntervalYearMonth(){return xX}visitDuration(){return EX}visitDurationSecond(){return SX}visitDurationMillisecond(){return kX}visitDurationMicrosecond(){return TX}visitDurationNanosecond(){return CX}visitFixedSizeList(){return mX}visitMap(){return jX}};class rJ extends lK{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>this.compareFields(e,t[n]))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function iJ(e,t){return t instanceof e.constructor}function oJ(e,t){return e===t||iJ(e,t)}function aJ(e,t){return e===t||iJ(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function sJ(e,t){return e===t||iJ(e,t)&&e.precision===t.precision}function lJ(e,t){return e===t||iJ(e,t)&&e.unit===t.unit}function uJ(e,t){return e===t||iJ(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function cJ(e,t){return e===t||iJ(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function dJ(e,t){return e===t||iJ(e,t)&&e.mode===t.mode&&e.typeIds.every((e,n)=>e===t.typeIds[n])&&hJ.compareManyFields(e.children,t.children)}function fJ(e,t){return e===t||iJ(e,t)&&e.unit===t.unit}function pJ(e,t){return e===t||iJ(e,t)&&e.unit===t.unit}rJ.prototype.visitNull=oJ,rJ.prototype.visitBool=oJ,rJ.prototype.visitInt=aJ,rJ.prototype.visitInt8=aJ,rJ.prototype.visitInt16=aJ,rJ.prototype.visitInt32=aJ,rJ.prototype.visitInt64=aJ,rJ.prototype.visitUint8=aJ,rJ.prototype.visitUint16=aJ,rJ.prototype.visitUint32=aJ,rJ.prototype.visitUint64=aJ,rJ.prototype.visitFloat=sJ,rJ.prototype.visitFloat16=sJ,rJ.prototype.visitFloat32=sJ,rJ.prototype.visitFloat64=sJ,rJ.prototype.visitUtf8=oJ,rJ.prototype.visitLargeUtf8=oJ,rJ.prototype.visitBinary=oJ,rJ.prototype.visitLargeBinary=oJ,rJ.prototype.visitFixedSizeBinary=function(e,t){return e===t||iJ(e,t)&&e.byteWidth===t.byteWidth},rJ.prototype.visitDate=lJ,rJ.prototype.visitDateDay=lJ,rJ.prototype.visitDateMillisecond=lJ,rJ.prototype.visitTimestamp=uJ,rJ.prototype.visitTimestampSecond=uJ,rJ.prototype.visitTimestampMillisecond=uJ,rJ.prototype.visitTimestampMicrosecond=uJ,rJ.prototype.visitTimestampNanosecond=uJ,rJ.prototype.visitTime=cJ,rJ.prototype.visitTimeSecond=cJ,rJ.prototype.visitTimeMillisecond=cJ,rJ.prototype.visitTimeMicrosecond=cJ,rJ.prototype.visitTimeNanosecond=cJ,rJ.prototype.visitDecimal=oJ,rJ.prototype.visitList=function(e,t){return e===t||iJ(e,t)&&e.children.length===t.children.length&&hJ.compareManyFields(e.children,t.children)},rJ.prototype.visitStruct=function(e,t){return e===t||iJ(e,t)&&e.children.length===t.children.length&&hJ.compareManyFields(e.children,t.children)},rJ.prototype.visitUnion=dJ,rJ.prototype.visitDenseUnion=dJ,rJ.prototype.visitSparseUnion=dJ,rJ.prototype.visitDictionary=function(e,t){return e===t||iJ(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&hJ.visit(e.indices,t.indices)&&hJ.visit(e.dictionary,t.dictionary)},rJ.prototype.visitInterval=fJ,rJ.prototype.visitIntervalDayTime=fJ,rJ.prototype.visitIntervalYearMonth=fJ,rJ.prototype.visitDuration=pJ,rJ.prototype.visitDurationSecond=pJ,rJ.prototype.visitDurationMillisecond=pJ,rJ.prototype.visitDurationMicrosecond=pJ,rJ.prototype.visitDurationNanosecond=pJ,rJ.prototype.visitFixedSizeList=function(e,t){return e===t||iJ(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&hJ.compareManyFields(e.children,t.children)},rJ.prototype.visitMap=function(e,t){return e===t||iJ(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&hJ.compareManyFields(e.children,t.children)};const hJ=new rJ;function mJ(e,t){return hJ.compareSchemas(e,t)}function gJ(e){const t=e.type,n=new(nJ.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},o=Array.isArray(r)?(e,t)=>r[t]||i:({name:e})=>r[e]||i;for(const[e,a]of t.children.entries()){const{type:t}=a,r=o(a,e);n.children.push(gJ(Object.assign(Object.assign({},r),{type:t})))}}return n}function yJ(e,t){if(e instanceof GZ||e instanceof yQ||e.type instanceof CY||ArrayBuffer.isView(e))return bQ(e);const n=[...bJ({type:vJ(e),nullValues:[null]})(e)],r=1===n.length?n[0]:n.reduce((e,t)=>e.concat(t));return CY.isDictionary(r.type)?r.memoize():r}function vJ(e){if(0===e.length)return new AY;let t=0,n=0,r=0,i=0,o=0,a=0,s=0,l=0;for(const u of e){if(null!=u){switch(typeof u){case"bigint":++a;continue;case"boolean":++s;continue;case"number":++i;continue;case"string":++o;continue;case"object":Array.isArray(u)?++n:"[object Date]"===Object.prototype.toString.call(u)?++l:++r;continue}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}++t}if(i+t===e.length)return new $Y;if(o+t===e.length)return new aK(new qY,new DY);if(a+t===e.length)return new RY;if(s+t===e.length)return new VY;if(l+t===e.length)return new ZY;if(n+t===e.length){const t=e,n=vJ(t[t.findIndex(e=>null!=e)]);if(t.every(e=>{return null==e||(t=n,r=vJ(e),hJ.visit(t,r));var t,r}))return new JY(new RQ("",n,!0))}else if(r+t===e.length){const t=new Map;for(const n of e)for(const e of Object.keys(n))t.has(e)||null==n[e]||t.set(e,new RQ(e,vJ([n[e]]),!0));return new eK([...t.values()])}throw new TypeError("Unable to infer Vector type from input values, explicit type declaration expected.")}function bJ(e){const{queueingStrategy:t="count"}=e,{highWaterMark:n=("bytes"!==t?Number.POSITIVE_INFINITY:Math.pow(2,14))}=e,r="bytes"!==t?"length":"byteLength";return function*(t){let i=0;const o=gJ(e);for(const e of t)o.append(e)[r]>=n&&++i&&(yield o.toVector());(o.finish().length>0||0===i)&&(yield o.toVector())}}function wJ(e,t){return function(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((e,t)=>Math.max(e,t.length),0)};let o=0,a=0,s=-1;const l=t.length;let u,c=[];for(;i.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,s=-1;++s<l;)c[s]=u=t[s].shift(),a=Math.min(a,u?u.length:a);Number.isFinite(a)&&(c=_J(n,a,c,t,i),a>0&&(r[o++]=ZZ({type:new eK(n),length:a,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(t=>new kJ(e,t))]}(e,t.map(e=>e.data.concat()))}function _J(e,t,n,r,i){var o;const a=(t+63&-64)>>3;for(let s=-1,l=r.length;++s<l;){const l=n[s],u=null==l?void 0:l.length;if(u>=t)u===t?n[s]=l:(n[s]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[s].unshift(l.slice(t,u-t))));else{const r=e[s];e[s]=r.clone({nullable:!0}),n[s]=null!==(o=null==l?void 0:l._changeLengthAndBackfillNullBitmap(t))&&void 0!==o?o:ZZ({type:r.type,length:t,nullCount:t,nullBitmap:new Uint8Array(a)})}}return n}var xJ;let EJ=class e{constructor(...t){var n,r;if(0===t.length)return this.batches=[],this.schema=new DQ([]),this._offsets=[0],this;let i,o;t[0]instanceof DQ&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(o=t.pop());const a=t=>{if(t){if(t instanceof kJ)return[t];if(t instanceof e)return t.batches;if(t instanceof GZ){if(t.type instanceof eK)return[new kJ(new DQ(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap(e=>a(e));if("function"==typeof t[Symbol.iterator])return[...t].flatMap(e=>a(e));if("object"==typeof t){const e=Object.keys(t),n=e.map(e=>new yQ([t[e]])),r=null!=i?i:new DQ(e.map((e,t)=>new RQ(String(e),n[t].type,n[t].nullable))),[,o]=wJ(r,n);return 0===o.length?[new kJ(t)]:o}}}return[]},s=t.flatMap(e=>a(e));if(i=null!==(r=null!=i?i:null===(n=s[0])||void 0===n?void 0:n.schema)&&void 0!==r?r:new DQ([]),!(i instanceof DQ))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const e of s){if(!(e instanceof kJ))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!mJ(i,e.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=s,this._offsets=null!=o?o:JZ(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,t)=>e+t.length,0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=XZ(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(PZ(e,this.numRows))}set(e,t){}indexOf(e,t){return-1}[Symbol.iterator](){return this.batches.length>0?pQ.visit(new yQ(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:e})=>e));return new e(n,r.map(e=>new kJ(n,e)))}slice(t,n){const r=this.schema;[t,n]=MZ({length:this.numRows},t,n);const i=eQ(this.data,this._offsets,t,n);return new e(r,i.map(e=>new kJ(r,e)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(t=>t.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map(t=>t.children[e]);if(0===t.length){const{type:n}=this.schema.fields[e],r=ZZ({type:n,length:0,nullCount:0});t.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new yQ(t)}return null}setChild(e,t){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex(t=>t.name===e),t)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new yQ([ZZ({type:new AY,length:this.numRows})]));const e=r.fields.slice(),o=e[t].clone({type:n.type}),a=this.schema.fields.map((e,t)=>this.getChildAt(t));[e[t],a[t]]=[o,n],[r,i]=wJ(r,a)}return new e(r,i)}select(e){const t=this.schema.fields.reduce((e,t,n)=>e.set(t.name,n),new Map);return this.selectAt(e.map(e=>t.get(e)).filter(e=>e>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(e=>e.selectAt(t));return new e(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((e,t,r)=>{const[i,o]=e,a=n.findIndex(e=>e.name===t.name);return~a?o[a]=r:i.push(r),e},[[],[]]),o=this.schema.assign(t.schema),a=[...n.map((e,t)=>[t,i[t]]).map(([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n)),...r.map(e=>t.getChildAt(e))].filter(Boolean);return new e(...wJ(o,a))}};var SJ;xJ=Symbol.toStringTag,EJ[xJ]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=rQ(nQ),e.get=rQ(kZ.getVisitFn(UG.Struct)),e.set=iQ(YK.getVisitFn(UG.Struct)),e.indexOf=oQ(uQ.getVisitFn(UG.Struct)),"Table"))(EJ.prototype);let kJ=class e{constructor(...e){switch(e.length){case 2:if([this.schema]=e,!(this.schema instanceof DQ))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ZZ({nullCount:0,type:new eK(this.schema.fields),children:this.schema.fields.map(e=>ZZ({type:e.type,nullCount:0}))})]=e,!(this.data instanceof GZ))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=TJ(this.schema,this.data.children);break;case 1:{const[t]=e,{fields:n,children:r,length:i}=Object.keys(t).reduce((e,n,r)=>(e.children[r]=t[n],e.length=Math.max(e.length,t[n].length),e.fields[r]=RQ.new({name:n,type:t[n].type,nullable:!0}),e),{length:0,fields:new Array,children:new Array}),o=new DQ(n),a=ZZ({type:new eK(n),length:i,children:r,nullCount:0});[this.schema,this.data]=TJ(o,a.children,i);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=CJ(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return kZ.visit(this.data,e)}at(e){return this.get(PZ(e,this.numRows))}set(e,t){return YK.visit(this.data,e,t)}indexOf(e,t){return uQ.visit(this.data,e,t)}[Symbol.iterator](){return pQ.visit(new yQ([this.data]))}toArray(){return[...this]}concat(...e){return new EJ(this.schema,[this,...e])}slice(t,n){const[r]=new yQ([this.data]).slice(t,n).data;return new e(this.schema,r)}getChild(e){var t;return this.getChildAt(null===(t=this.schema.fields)||void 0===t?void 0:t.findIndex(t=>t.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new yQ([this.data.children[e]]):null}setChild(e,t){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex(t=>t.name===e),t)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new yQ([ZZ({type:new AY,length:this.numRows})]));const e=r.fields.slice(),o=i.children.slice(),a=e[t].clone({type:n.type});[e[t],o[t]]=[a,n.data[0]],r=new DQ(e,new Map(this.schema.metadata)),i=ZZ({type:new eK(e),children:o})}return new e(r,i)}select(t){const n=this.schema.select(t),r=new eK(n.fields),i=[];for(const e of t){const t=this.schema.fields.findIndex(t=>t.name===e);~t&&(i[t]=this.data.children[t])}return new e(n,ZZ({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(e=>this.data.children[e]).filter(Boolean),i=ZZ({type:new eK(n.fields),length:this.numRows,children:r});return new e(n,i)}};function TJ(e,t,n=t.reduce((e,t)=>Math.max(e,t.length),0)){var r;const i=[...e.fields],o=[...t],a=(n+63&-64)>>3;for(const[s,l]of e.fields.entries()){const e=t[s];e&&e.length===n||(i[s]=l.clone({nullable:!0}),o[s]=null!==(r=null==e?void 0:e._changeLengthAndBackfillNullBitmap(n))&&void 0!==r?r:ZZ({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[e.assign(i),ZZ({type:new eK(i),length:n,children:o})]}function CJ(e,t,n=new Map){var r,i;if((null!==(r=null==e?void 0:e.length)&&void 0!==r?r:0)>0&&(null==e?void 0:e.length)===(null==t?void 0:t.length))for(let o=-1,a=e.length;++o<a;){const{type:r}=e[o],a=t[o];for(const e of[a,...(null===(i=null==a?void 0:a.dictionary)||void 0===i?void 0:i.data)||[]])CJ(r.children,null==e?void 0:e.children,n);if(CY.isDictionary(r)){const{id:e}=r;if(n.has(e)){if(n.get(e)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else(null==a?void 0:a.dictionary)&&n.set(e,a.dictionary)}}return n}SJ=Symbol.toStringTag,kJ[SJ]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(kJ.prototype);class AJ extends kJ{constructor(e){const t=e.fields.map(e=>ZZ({type:e.type}));super(e,ZZ({type:new eK(e.fields),nullCount:0,children:t}))}}let IJ=class e{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(t,n){return(n||new e).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+4),(n||new e).__init(t.readInt32(t.position())+t.position(),t)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):PW.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):$G.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new gG).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,PW.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,$G.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,BigInt("0"))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let n=t.length-1;n>=0;n--)e.addOffset(t[n]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(t,n,r,i,o,a){return e.startMessage(t),e.addVersion(t,n),e.addHeaderType(t,r),e.addHeader(t,i),e.addBodyLength(t,o),e.addCustomMetadata(t,a),e.endMessage(t)}};const OJ=new class extends lK{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return OG.startNull(t),OG.endNull(t)}visitInt(e,t){return hG.startInt(t),hG.addBitWidth(t,e.bitWidth),hG.addIsSigned(t,e.isSigned),hG.endInt(t)}visitFloat(e,t){return SG.startFloatingPoint(t),SG.addPrecision(t,e.precision),SG.endFloatingPoint(t)}visitBinary(e,t){return yG.startBinary(t),yG.endBinary(t)}visitLargeBinary(e,t){return TG.startLargeBinary(t),TG.endLargeBinary(t)}visitBool(e,t){return vG.startBool(t),vG.endBool(t)}visitUtf8(e,t){return PG.startUtf8(t),PG.endUtf8(t)}visitLargeUtf8(e,t){return CG.startLargeUtf8(t),CG.endLargeUtf8(t)}visitDecimal(e,t){return wG.startDecimal(t),wG.addScale(t,e.scale),wG.addPrecision(t,e.precision),wG.addBitWidth(t,e.bitWidth),wG.endDecimal(t)}visitDate(e,t){return bG.startDate(t),bG.addUnit(t,e.unit),bG.endDate(t)}visitTime(e,t){return DG.startTime(t),DG.addUnit(t,e.unit),DG.addBitWidth(t,e.bitWidth),DG.endTime(t)}visitTimestamp(e,t){const n=e.timezone&&t.createString(e.timezone)||void 0;return RG.startTimestamp(t),RG.addUnit(t,e.unit),void 0!==n&&RG.addTimezone(t,n),RG.endTimestamp(t)}visitInterval(e,t){return kG.startInterval(t),kG.addUnit(t,e.unit),kG.endInterval(t)}visitDuration(e,t){return _G.startDuration(t),_G.addUnit(t,e.unit),_G.endDuration(t)}visitList(e,t){return AG.startList(t),AG.endList(t)}visitStruct(e,t){return NG.startStruct_(t),NG.endStruct_(t)}visitUnion(e,t){MG.startTypeIdsVector(t,e.typeIds.length);const n=MG.createTypeIdsVector(t,e.typeIds);return MG.startUnion(t),MG.addMode(t,e.mode),MG.addTypeIds(t,n),MG.endUnion(t)}visitDictionary(e,t){const n=this.visit(e.indices,t);return mG.startDictionaryEncoding(t),mG.addId(t,BigInt(e.id)),mG.addIsOrdered(t,e.isOrdered),void 0!==n&&mG.addIndexType(t,n),mG.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return xG.startFixedSizeBinary(t),xG.addByteWidth(t,e.byteWidth),xG.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return EG.startFixedSizeList(t),EG.addListSize(t,e.listSize),EG.endFixedSizeList(t)}visitMap(e,t){return IG.startMap(t),IG.addKeysSorted(t,e.keysSorted),IG.endMap(t)}};function NJ(e){return new zJ(e.count,RJ(e.columns),MJ(e.columns))}function DJ(e,t){return(e.children||[]).filter(Boolean).map(e=>RQ.fromJSON(e,t))}function RJ(e){return(e||[]).reduce((e,t)=>{return[...e,new HJ(t.count,(n=t.VALIDITY,(n||[]).reduce((e,t)=>e+ +(0===t),0))),...RJ(t.children)];var n},[])}function MJ(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const r=e[n];r.VALIDITY&&t.push(new qJ(t.length,r.VALIDITY.length)),r.TYPE_ID&&t.push(new qJ(t.length,r.TYPE_ID.length)),r.OFFSET&&t.push(new qJ(t.length,r.OFFSET.length)),r.DATA&&t.push(new qJ(t.length,r.DATA.length)),t=MJ(r.children,t)}return t}function PJ(e=[]){return new Map(e.map(({key:e,value:t})=>[e,t]))}function FJ(e){return new IY(e.isSigned,e.bitWidth)}function LJ(e,t){const n=e.type.name;switch(n){case"NONE":case"null":return new AY;case"binary":return new zY;case"largebinary":return new UY;case"utf8":return new qY;case"largeutf8":return new HY;case"bool":return new VY;case"list":return new JY((t||[])[0]);case"struct":case"struct_":return new eK(t||[])}switch(n){case"int":{const t=e.type;return new IY(t.isSigned,t.bitWidth)}case"floatingpoint":{const t=e.type;return new jY(BW[t.precision])}case"decimal":{const t=e.type;return new WY(t.scale,t.precision,t.bitWidth)}case"date":{const t=e.type;return new GY(zW[t.unit])}case"time":{const t=e.type;return new YY(qW[t.unit],t.bitWidth)}case"timestamp":{const t=e.type;return new KY(qW[t.unit],t.timezone)}case"interval":{const t=e.type;return new QY(VW[t.unit])}case"duration":{const t=e.type;return new XY(qW[t.unit])}case"union":{const n=e.type,[r,...i]=(n.mode+"").toLowerCase(),o=r.toUpperCase()+i.join("");return new tK(LW[o],n.typeIds||[],t||[])}case"fixedsizebinary":{const t=e.type;return new nK(t.byteWidth)}case"fixedsizelist":{const n=e.type;return new rK(n.listSize,(t||[])[0])}case"map":{const n=e.type;return new iK((t||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var jJ=eG,BJ=JW;class $J{static fromJSON(e,t){const n=new $J(0,PW.V5,t);return n._createHeader=function(e,t){return()=>{switch(t){case $G.Schema:return DQ.fromJSON(e);case $G.RecordBatch:return zJ.fromJSON(e);case $G.DictionaryBatch:return UJ.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${$G[t]}, type: ${t} }`)}}(e,t),n}static decode(e){e=new BJ(kW(e));const t=IJ.getRootAsMessage(e),n=t.bodyLength(),r=t.version(),i=t.headerType(),o=new $J(n,r,i);return o._createHeader=function(e,t){return()=>{switch(t){case $G.Schema:return DQ.decode(e.header(new BG),new Map,e.version());case $G.RecordBatch:return zJ.decode(e.header(new lG),e.version());case $G.DictionaryBatch:return UJ.decode(e.header(new uG),e.version())}throw new Error(`Unrecognized Message type: { name: ${$G[t]}, type: ${t} }`)}}(t,i),o}static encode(e){const t=new jJ;let n=-1;return e.isSchema()?n=DQ.encode(t,e.header()):e.isRecordBatch()?n=zJ.encode(t,e.header()):e.isDictionaryBatch()&&(n=UJ.encode(t,e.header())),IJ.startMessage(t),IJ.addVersion(t,PW.V5),IJ.addHeader(t,n),IJ.addHeaderType(t,e.headerType),IJ.addBodyLength(t,BigInt(e.bodyLength)),IJ.finishMessageBuffer(t,IJ.endMessage(t)),t.asUint8Array()}static from(e,t=0){if(e instanceof DQ)return new $J(0,PW.V5,$G.Schema,e);if(e instanceof zJ)return new $J(t,PW.V5,$G.RecordBatch,e);if(e instanceof UJ)return new $J(t,PW.V5,$G.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===$G.Schema}isRecordBatch(){return this.headerType===$G.RecordBatch}isDictionaryBatch(){return this.headerType===$G.DictionaryBatch}constructor(e,t,n,r){this._version=t,this._headerType=n,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=WG(e)}}class zJ{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,t,n){this._nodes=t,this._buffers=n,this._length=WG(e)}}class UJ{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,t,n=!1){this._data=e,this._isDelta=n,this._id=WG(t)}}class qJ{constructor(e,t){this.offset=WG(e),this.length=WG(t)}}class HJ{constructor(e,t){this.length=WG(e),this.nullCount=WG(t)}}function VJ(e,t){const n=[];for(let r,i=-1,o=-1,a=e.childrenLength();++i<a;)(r=e.children(i))&&(n[++o]=RQ.decode(r,t));return n}function WJ(e){const t=new Map;if(e)for(let n,r,i=-1,o=Math.trunc(e.customMetadataLength());++i<o;)(n=e.customMetadata(i))&&null!=(r=n.key())&&t.set(r,n.value());return t}function GJ(e){return new IY(e.isSigned(),e.bitWidth())}function YJ(e,t){const n=e.typeType();switch(n){case FG.NONE:case FG.Null:return new AY;case FG.Binary:return new zY;case FG.LargeBinary:return new UY;case FG.Utf8:return new qY;case FG.LargeUtf8:return new HY;case FG.Bool:return new VY;case FG.List:return new JY((t||[])[0]);case FG.Struct_:return new eK(t||[])}switch(n){case FG.Int:{const t=e.type(new hG);return new IY(t.isSigned(),t.bitWidth())}case FG.FloatingPoint:{const t=e.type(new SG);return new jY(t.precision())}case FG.Decimal:{const t=e.type(new wG);return new WY(t.scale(),t.precision(),t.bitWidth())}case FG.Date:{const t=e.type(new bG);return new GY(t.unit())}case FG.Time:{const t=e.type(new DG);return new YY(t.unit(),t.bitWidth())}case FG.Timestamp:{const t=e.type(new RG);return new KY(t.unit(),t.timezone())}case FG.Interval:{const t=e.type(new kG);return new QY(t.unit())}case FG.Duration:{const t=e.type(new _G);return new XY(t.unit())}case FG.Union:{const n=e.type(new MG);return new tK(n.mode(),n.typeIdsArray()||[],t||[])}case FG.FixedSizeBinary:{const t=e.type(new xG);return new nK(t.byteWidth())}case FG.FixedSizeList:{const n=e.type(new EG);return new rK(n.listSize(),(t||[])[0])}case FG.Map:{const n=e.type(new IG);return new iK((t||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${FG[n]}" (${n})`)}RQ.encode=function(e,t){let n=-1,r=-1,i=-1;const o=t.type;let a=t.typeId;CY.isDictionary(o)?(a=o.dictionary.typeId,i=OJ.visit(o,e),r=OJ.visit(o.dictionary,e)):r=OJ.visit(o,e);const s=(o.children||[]).map(t=>RQ.encode(e,t)),l=jG.createChildrenVector(e,s),u=t.metadata&&t.metadata.size>0?jG.createCustomMetadataVector(e,[...t.metadata].map(([t,n])=>{const r=e.createString(`${t}`),i=e.createString(`${n}`);return gG.startKeyValue(e),gG.addKey(e,r),gG.addValue(e,i),gG.endKeyValue(e)})):-1;t.name&&(n=e.createString(t.name));jG.startField(e),jG.addType(e,r),jG.addTypeType(e,a),jG.addChildren(e,l),jG.addNullable(e,!!t.nullable),-1!==n&&jG.addName(e,n);-1!==i&&jG.addDictionary(e,i);-1!==u&&jG.addCustomMetadata(e,u);return jG.endField(e)},RQ.decode=function(e,t){let n,r,i,o,a,s;t&&(s=e.dictionary())?t.has(n=WG(s.id()))?(o=(o=s.indexType())?GJ(o):new DY,a=new aK(t.get(n),o,n,s.isOrdered()),r=new RQ(e.name(),a,e.nullable(),WJ(e))):(o=(o=s.indexType())?GJ(o):new DY,t.set(n,i=YJ(e,VJ(e,t))),a=new aK(i,o,n,s.isOrdered()),r=new RQ(e.name(),a,e.nullable(),WJ(e))):(i=YJ(e,VJ(e,t)),r=new RQ(e.name(),i,e.nullable(),WJ(e)));return r||null},RQ.fromJSON=function(e,t){let n,r,i,o,a,s;return t&&(o=e.dictionary)?t.has(n=o.id)?(r=(r=o.indexType)?FJ(r):new DY,s=new aK(t.get(n),r,n,o.isOrdered),i=new RQ(e.name,s,e.nullable,PJ(e.metadata))):(r=(r=o.indexType)?FJ(r):new DY,t.set(n,a=LJ(e,DJ(e,t))),s=new aK(a,r,n,o.isOrdered),i=new RQ(e.name,s,e.nullable,PJ(e.metadata))):(a=LJ(e,DJ(e,t)),i=new RQ(e.name,a,e.nullable,PJ(e.metadata))),i||null},DQ.encode=function(e,t){const n=t.fields.map(t=>RQ.encode(e,t));BG.startFieldsVector(e,n.length);const r=BG.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?BG.createCustomMetadataVector(e,[...t.metadata].map(([t,n])=>{const r=e.createString(`${t}`),i=e.createString(`${n}`);return gG.startKeyValue(e),gG.addKey(e,r),gG.addValue(e,i),gG.endKeyValue(e)})):-1;BG.startSchema(e),BG.addFields(e,r),BG.addEndianness(e,KJ?cG.Little:cG.Big),-1!==i&&BG.addCustomMetadata(e,i);return BG.endSchema(e)},DQ.decode=function(e,t=new Map,n=PW.V5){const r=function(e,t){const n=[];for(let r,i=-1,o=-1,a=e.fieldsLength();++i<a;)(r=e.fields(i))&&(n[++o]=RQ.decode(r,t));return n}(e,t);return new DQ(r,WJ(e),t,n)},DQ.fromJSON=function(e,t=new Map){return new DQ(function(e,t){return(e.fields||[]).filter(Boolean).map(e=>RQ.fromJSON(e,t))}(e,t),PJ(e.metadata),t)},zJ.encode=function(e,t){const n=t.nodes||[],r=t.buffers||[];lG.startNodesVector(e,n.length);for(const a of n.slice().reverse())HJ.encode(e,a);const i=e.endVector();lG.startBuffersVector(e,r.length);for(const a of r.slice().reverse())qJ.encode(e,a);const o=e.endVector();return lG.startRecordBatch(e),lG.addLength(e,BigInt(t.length)),lG.addNodes(e,i),lG.addBuffers(e,o),lG.endRecordBatch(e)},zJ.decode=function(e,t=PW.V5){if(null!==e.compression())throw new Error("Record batch compression not implemented");return new zJ(e.length(),function(e){const t=[];for(let n,r=-1,i=-1,o=e.nodesLength();++r<o;)(n=e.nodes(r))&&(t[++i]=HJ.decode(n));return t}(e),function(e,t){const n=[];for(let r,i=-1,o=-1,a=e.buffersLength();++i<a;)(r=e.buffers(i))&&(t<PW.V4&&(r.bb_pos+=8*(i+1)),n[++o]=qJ.decode(r));return n}(e,t))},zJ.fromJSON=NJ,UJ.encode=function(e,t){const n=zJ.encode(e,t.data);return uG.startDictionaryBatch(e),uG.addId(e,BigInt(t.id)),uG.addIsDelta(e,t.isDelta),uG.addData(e,n),uG.endDictionaryBatch(e)},UJ.decode=function(e,t=PW.V5){return new UJ(zJ.decode(e.data(),t),e.id(),e.isDelta())},UJ.fromJSON=function(e){return new UJ(NJ(e.data),e.id,e.isDelta)},HJ.encode=function(e,t){return sG.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))},HJ.decode=function(e){return new HJ(e.length(),e.nullCount())},qJ.encode=function(e,t){return aG.createBuffer(e,BigInt(t.offset),BigInt(t.length))},qJ.decode=function(e){return new qJ(e.offset(),e.length())};const KJ=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),ZJ=e=>`Expected ${$G[e]} Message in stream, but was null or length 0.`,QJ=e=>`Header pointer of flatbuffer-encoded ${$G[e]} Message is null or length 0.`,XJ=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,JJ=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class e0{constructor(e){this.source=e instanceof WQ?e:new WQ(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?zQ:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(ZJ(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=kW(this.source.read(e));if(t.byteLength<e)throw new Error(JJ(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(e=!1){const t=$G.Schema,n=this.readMessage(t),r=null==n?void 0:n.header();if(e&&!r)throw new Error(QJ(t));return r}readMetadataLength(){const e=this.source.read(r0),t=e&&new JW(e),n=(null==t?void 0:t.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(e){const t=this.source.read(e);if(!t)return zQ;if(t.byteLength<e)throw new Error(XJ(e,t.byteLength));return{done:!1,value:$J.decode(t)}}}class t0{constructor(e,t){this.source=e instanceof GQ?e:hW(e)?new QQ(e,t):new GQ(e)}[Symbol.asyncIterator](){return this}next(){return ii(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?zQ:e})}throw(e){return ii(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ii(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ii(this,void 0,void 0,function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(ZJ(e));return t.value})}readMessageBody(e){return ii(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const t=kW(yield this.source.read(e));if(t.byteLength<e)throw new Error(JJ(e,t.byteLength));return t.byteOffset%8==0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()})}readSchema(){return ii(this,arguments,void 0,function*(e=!1){const t=$G.Schema,n=yield this.readMessage(t),r=null==n?void 0:n.header();if(e&&!r)throw new Error(QJ(t));return r})}readMetadataLength(){return ii(this,void 0,void 0,function*(){const e=yield this.source.read(r0),t=e&&new JW(e),n=(null==t?void 0:t.readInt32(0))||0;return{done:0===n,value:n}})}readMetadata(e){return ii(this,void 0,void 0,function*(){const t=yield this.source.read(e);if(!t)return zQ;if(t.byteLength<e)throw new Error(XJ(e,t.byteLength));return{done:!1,value:$J.decode(t)}})}}class n0 extends e0{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof UQ?e:new UQ(e)}next(){const{_json:e}=this;if(!this._schema){this._schema=!0;return{done:!1,value:$J.fromJSON(e.schema,$G.Schema)}}if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];this._body=t.data.columns;return{done:!1,value:$J.fromJSON(t,$G.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];this._body=t.columns;return{done:!1,value:$J.fromJSON(t,$G.RecordBatch)}}return this._body=[],zQ}readMessageBody(e){return function e(t){return(t||[]).reduce((t,n)=>[...t,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE_ID&&[n.TYPE_ID]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...e(n.children)],[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(ZJ(e));return t.value}readSchema(){const e=$G.Schema,t=this.readMessage(e),n=null==t?void 0:t.header();if(!t||!n)throw new Error(QJ(e));return n}}const r0=4,i0="ARROW1",o0=new Uint8Array(6);for(let Set=0;Set<6;Set+=1)o0[Set]=i0.codePointAt(Set);function a0(e,t=0){for(let n=-1,r=o0.length;++n<r;)if(o0[n]!==e[t+n])return!1;return!0}const s0=o0.length,l0=s0+r0,u0=2*s0+r0;class c0 extends qQ{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return uW(t)?t.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return NW.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return NW.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof c0?e:fW(e)?function(e){return new d0(new w0(e))}(e):hW(e)?function(e){return ii(this,void 0,void 0,function*(){const{size:t}=yield e.stat(),n=new QQ(e,t);return t>=u0&&a0(yield n.readAt(0,s0+7&-8))?new h0(new b0(n)):new f0(new y0(n))})}(e):uW(e)?(()=>ii(this,void 0,void 0,function*(){return yield c0.from(yield e)}))():mW(e)||yW(e)||vW(e)||dW(e)?function(e){return ii(this,void 0,void 0,function*(){const t=yield e.peek(s0+7&-8);return t&&t.byteLength>=4?a0(t)?new p0(new v0(yield e.read())):new f0(new y0(e)):new f0(new y0(function(){return si(this,arguments,function*(){})}()))})}(new GQ(e)):function(e){const t=e.peek(s0+7&-8);return t&&t.byteLength>=4?a0(t)?new p0(new v0(e.read())):new d0(new g0(e)):new d0(new g0(function*(){}()))}(new WQ(e))}static readAll(e){return e instanceof c0?e.isSync()?x0(e):E0(e):fW(e)||ArrayBuffer.isView(e)||cW(e)||pW(e)?x0(e):E0(e)}}class d0 extends c0{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return si(this,arguments,function*(){yield ai(yield*li(ui(this[Symbol.iterator]())))})}}class f0 extends c0{constructor(e){super(e),this._impl=e}readAll(){return ii(this,void 0,void 0,function*(){var e,t,n,r;const i=new Array;try{for(var o,a=!0,s=ui(this);!(e=(o=yield s.next()).done);a=!0){r=o.value,a=!1;const e=r;i.push(e)}}catch(l){t={error:l}}finally{try{a||e||!(n=s.return)||(yield n.call(s))}finally{if(t)throw t.error}}return i})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class p0 extends d0{constructor(e){super(e),this._impl=e}}class h0 extends f0{constructor(e){super(e),this._impl=e}}class m0{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const n=this._loadVectors(e,t,this.schema.fields),r=ZZ({type:new eK(this.schema.fields),length:e.length,children:n});return new kJ(this.schema,r)}_loadDictionaryBatch(e,t){const{id:n,isDelta:r}=e,{dictionaries:i,schema:o}=this,a=i.get(n),s=o.dictionaries.get(n),l=this._loadVectors(e.data,t,[s]);return(a&&r?a.concat(new yQ(l)):new yQ(l)).memoize()}_loadVectors(e,t,n){return new iX(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}class g0 extends m0{constructor(e,t){super(t),this._reader=fW(e)?new n0(this._handle=e):new e0(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=_0(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):zQ}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):zQ}next(){if(this.closed)return zQ;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),r=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),r=t.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new AJ(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class y0 extends m0{constructor(e,t){super(t),this._reader=new t0(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ii(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ii(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=_0(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ii(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):zQ})}return(e){return ii(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):zQ})}next(){return ii(this,void 0,void 0,function*(){if(this.closed)return zQ;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const n=e.header(),r=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(n,r)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const n=e.header(),r=yield t.readMessageBody(e.bodyLength),i=this._loadDictionaryBatch(n,r);this.dictionaries.set(n.id,i)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new AJ(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ii(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class v0 extends g0{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,t){super(e instanceof ZQ?e:new ZQ(e),t)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(n&&this._handle.seek(n.offset)){const e=this._reader.readMessage($G.RecordBatch);if(null==e?void 0:e.isRecordBatch()){const t=e.header(),n=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,n)}}return null}_readDictionaryBatch(e){var t;const n=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(n&&this._handle.seek(n.offset)){const e=this._reader.readMessage($G.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){const t=e.header(),n=this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,n);this.dictionaries.set(t.id,r)}}}_readFooter(){const{_handle:e}=this,t=e.size-l0,n=e.readInt32(t),r=e.readAt(t-n,n);return jQ.decode(r)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(e)}return null}}class b0 extends y0{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...t){const n="number"!=typeof t[0]?t.shift():void 0,r=t[0]instanceof Map?t.shift():void 0;super(e instanceof QQ?e:new QQ(e,n),r)}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return ii(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)})}readRecordBatch(e){return ii(this,void 0,void 0,function*(){var t;if(this.closed)return null;this._footer||(yield this.open());const n=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(n&&(yield this._handle.seek(n.offset))){const e=yield this._reader.readMessage($G.RecordBatch);if(null==e?void 0:e.isRecordBatch()){const t=e.header(),n=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,n)}}return null})}_readDictionaryBatch(e){return ii(this,void 0,void 0,function*(){var t;const n=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(n&&(yield this._handle.seek(n.offset))){const e=yield this._reader.readMessage($G.DictionaryBatch);if(null==e?void 0:e.isDictionaryBatch()){const t=e.header(),n=yield this._reader.readMessageBody(e.bodyLength),r=this._loadDictionaryBatch(t,n);this.dictionaries.set(t.id,r)}}})}_readFooter(){return ii(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-l0,n=yield e.readInt32(t),r=yield e.readAt(t-n,n);return jQ.decode(r)})}_readNextMessageAndValidate(e){return ii(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null})}}class w0 extends g0{constructor(e,t){super(e,t)}_loadVectors(e,t,n){return new oX(t,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(n)}}function _0(e,t){return t&&"boolean"==typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*x0(e){const t=c0.from(e);try{if(!t.open({autoDestroy:!1}).closed)do{yield t}while(!t.reset().open().closed)}finally{t.cancel()}}function E0(e){return si(this,arguments,function*(){const t=yield ai(c0.from(e));try{if(!(yield ai(t.open({autoDestroy:!1}))).closed)do{yield yield ai(t)}while(!(yield ai(t.reset().open())).closed)}finally{yield ai(t.cancel())}})}class S0 extends lK{static assemble(...e){const t=e=>e.flatMap(e=>Array.isArray(e)?t(e):e instanceof kJ?e.data.children:e.data),n=new S0;return n.visitMany(t(e)),n}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof yQ)return this.visitMany(e.data),this;const{type:t}=e;if(!CY.isDictionary(t)){const{length:n}=e;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(CY.isUnion(t))this.nodes.push(new HJ(n,0));else{const{nullCount:r}=e;CY.isNull(t)||k0.call(this,r<=0?new Uint8Array(0):UZ(e.offset,n,e.nullBitmap)),this.nodes.push(new HJ(n,r))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function k0(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new qJ(this._byteLength,t)),this._byteLength+=t,this}function T0(e){return k0.call(this,e.values.subarray(0,e.length*e.stride))}function C0(e){const{length:t,values:n,valueOffsets:r}=e,i=WG(r[0]),o=WG(r[t]),a=Math.min(o-i,n.byteLength-i);return k0.call(this,OW(-i,t+1,r)),k0.call(this,n.subarray(i,i+a)),this}function A0(e){const{length:t,valueOffsets:n}=e;if(n){const{0:r,[t]:i}=n;return k0.call(this,OW(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function I0(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}S0.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?k0.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?k0.call(this,UZ(e.offset,e.length,t)):k0.call(this,qZ(e.values))},S0.prototype.visitInt=T0,S0.prototype.visitFloat=T0,S0.prototype.visitUtf8=C0,S0.prototype.visitLargeUtf8=C0,S0.prototype.visitBinary=C0,S0.prototype.visitLargeBinary=C0,S0.prototype.visitFixedSizeBinary=T0,S0.prototype.visitDate=T0,S0.prototype.visitTimestamp=T0,S0.prototype.visitTime=T0,S0.prototype.visitDecimal=T0,S0.prototype.visitList=A0,S0.prototype.visitStruct=I0,S0.prototype.visitUnion=function(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:o}=e;if(k0.call(this,i),n.mode===LW.Sparse)return I0.call(this,e);if(n.mode===LW.Dense){if(e.offset<=0)return k0.call(this,o),I0.call(this,e);{const a=new Int32Array(r),s=Object.create(null),l=Object.create(null);for(let e,n,u=-1;++u<r;)void 0!==(e=i[u])&&(void 0===(n=s[e])&&(n=s[e]=o[u]),a[u]=o[u]-n,l[e]=(null!==(t=l[e])&&void 0!==t?t:0)+1);k0.call(this,a),this.visitMany(e.children.map((e,t)=>{const i=n.typeIds[t],o=s[i],a=l[i];return e.slice(o,Math.min(r,a))}))}}return this},S0.prototype.visitInterval=T0,S0.prototype.visitDuration=T0,S0.prototype.visitFixedSizeList=A0,S0.prototype.visitMap=A0;class O0 extends qQ{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new VQ,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,lW(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return uW(e)?e.then(e=>this.writeAll(e)):dW(e)?M0(this,e):R0(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,t=null){var n;return e===this._sink||e instanceof VQ?this._sink=e:(this._sink=new VQ,e&&(lW(n=e)&&sW(n.abort)&&sW(n.getWriter)&&!gW(n))?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(e=>lW(e)&&sW(e.end)&&sW(e.write)&&aW(e.writable)&&!gW(e))(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,t&&mJ(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==e)return this.finish()&&void 0;if(e instanceof EJ&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof kJ&&!(t=e.schema))return this.finish()&&void 0;if(t&&!mJ(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof kJ?e instanceof AJ||this._writeRecordBatch(e):e instanceof EJ?this.writeAll(e.batches):cW(e)&&this.writeAll(e)}_writeMessage(e,t=8){const n=t-1,r=$J.encode(e),i=r.byteLength,o=this._writeLegacyIpcFormat?4:8,a=i+o+n&~n,s=a-i-o;return e.headerType===$G.RecordBatch?this._recordBatchBlocks.push(new $Q(a,e.bodyLength,this._position)):e.headerType===$G.DictionaryBatch&&this._dictionaryBlocks.push(new $Q(a,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),i>0&&this._write(r),this._writePadding(s)}_write(e){if(this._started){const t=kW(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage($J.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(o0)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:n,bufferRegions:r,buffers:i}=S0.assemble(e),o=new zJ(e.numRows,n,r),a=$J.from(o,t);return this._writeDictionaries(e)._writeMessage(a)._writeBodyBuffers(i)}_writeDictionaryBatch(e,t,n=!1){const{byteLength:r,nodes:i,bufferRegions:o,buffers:a}=S0.assemble(new yQ([e])),s=new zJ(e.length,i,o),l=new UJ(s,t,n),u=$J.from(l,r);return this._writeMessage(u)._writeBodyBuffers(a)}_writeBodyBuffers(e){let t,n,r;for(let i=-1,o=e.length;++i<o;)(t=e[i])&&(n=t.byteLength)>0&&(this._write(t),(r=(n+7&-8)-n)>0&&this._writePadding(r));return this}_writeDictionaries(e){var t,n;for(const[r,i]of e.dictionaries){const e=null!==(t=null==i?void 0:i.data)&&void 0!==t?t:[],o=this._seenDictionaries.get(r),a=null!==(n=this._dictionaryDeltaOffsets.get(r))&&void 0!==n?n:0;if(o&&o.data[0]===e[0]){if(a<e.length)for(const t of e.slice(a))this._writeDictionaryBatch(t,r,!0)}else for(const[t,n]of e.entries())this._writeDictionaryBatch(n,r,t>0);this._seenDictionaries.set(r,i),this._dictionaryDeltaOffsets.set(r,e.length)}return this}}class N0 extends O0{static writeAll(e,t){const n=new N0(t);return uW(e)?e.then(e=>n.writeAll(e)):dW(e)?M0(n,e):R0(n,e)}}class D0 extends O0{static writeAll(e){const t=new D0;return uW(e)?e.then(e=>t.writeAll(e)):dW(e)?M0(t,e):R0(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,t,n=!1){if(!n&&this._seenDictionaries.has(t))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,t,n)}_writeFooter(e){const t=jQ.encode(new jQ(e,PW.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function R0(e,t){let n=t;t instanceof EJ&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function M0(e,t){return ii(this,void 0,void 0,function*(){var n,r,i,o,a,s,l;try{for(n=!0,r=ui(t);!(o=(i=yield r.next()).done);n=!0){l=i.value,n=!1;const t=l;e.write(t)}}catch(u){a={error:u}}finally{try{n||o||!(s=r.return)||(yield s.call(r))}finally{if(a)throw a.error}}return e.finish()})}var P0,F0,L0,j0,B0,$0,z0,U0,q0=Object.create,H0=Object.defineProperty,V0=Object.getOwnPropertyDescriptor,W0=Object.getOwnPropertyNames,G0=Object.getPrototypeOf,Y0=Object.prototype.hasOwnProperty,K0=(P0=(e,t)=>{t.exports=Worker},()=>(F0||P0((F0={exports:{}}).exports,F0),F0.exports)),Z0=((L0=Z0||{})[L0.UNDEFINED=0]="UNDEFINED",L0[L0.AUTOMATIC=1]="AUTOMATIC",L0[L0.READ_ONLY=2]="READ_ONLY",L0[L0.READ_WRITE=3]="READ_WRITE",L0),Q0=((j0=Q0||{})[j0.IDENTIFIER=0]="IDENTIFIER",j0[j0.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",j0[j0.STRING_CONSTANT=2]="STRING_CONSTANT",j0[j0.OPERATOR=3]="OPERATOR",j0[j0.KEYWORD=4]="KEYWORD",j0[j0.COMMENT=5]="COMMENT",j0),X0=((B0=X0||{})[B0.NONE=0]="NONE",B0[B0.DEBUG=1]="DEBUG",B0[B0.INFO=2]="INFO",B0[B0.WARNING=3]="WARNING",B0[B0.ERROR=4]="ERROR",B0),J0=(e=>(e[e.NONE=0]="NONE",e[e.CONNECT=1]="CONNECT",e[e.DISCONNECT=2]="DISCONNECT",e[e.OPEN=3]="OPEN",e[e.QUERY=4]="QUERY",e[e.INSTANTIATE=5]="INSTANTIATE",e))(J0||{}),e1=(e=>(e[e.NONE=0]="NONE",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR",e[e.START=3]="START",e[e.RUN=4]="RUN",e[e.CAPTURE=5]="CAPTURE",e))(e1||{}),t1=(e=>(e[e.NONE=0]="NONE",e[e.WEB_WORKER=1]="WEB_WORKER",e[e.NODE_WORKER=2]="NODE_WORKER",e[e.BINDINGS=3]="BINDINGS",e[e.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",e))(t1||{}),n1=class{constructor(e=2){this.level=e}log(e){e.level,this.level}},r1=(($0=r1||{})[$0.SUCCESS=0]="SUCCESS",$0[$0.MAX_ARROW_ERROR=255]="MAX_ARROW_ERROR",$0[$0.DUCKDB_WASM_RETRY=256]="DUCKDB_WASM_RETRY",$0),i1=class{constructor(e,t){this._bindings=e,this._conn=t}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(e){return e(this._bindings,this._conn)}async query(e){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let t=await this._bindings.runQuery(this._conn,e),n=c0.from(t);return new EJ(n)}async send(e,t=!1){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:e});let n=await this._bindings.startPendingQuery(this._conn,e,t);for(;null==n;)n=await this._bindings.pollPendingQuery(this._conn);let r=new o1(this._bindings,this._conn,n);return await c0.from(r)}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(e){return await this._bindings.getTableNames(this._conn,e)}async prepare(e){let t=await this._bindings.createPrepared(this._conn,e);return new a1(this._bindings,this._conn,t)}async insertArrowTable(e,t){let n=function(e,t="stream"){return("stream"===t?N0:D0).writeAll(e).toUint8Array(!0)}(e,"stream");await this.insertArrowFromIPCStream(n,t)}async insertArrowFromIPCStream(e,t){await this._bindings.insertArrowFromIPCStream(this._conn,e,t)}async insertCSVFromPath(e,t){await this._bindings.insertCSVFromPath(this._conn,e,t)}async insertJSONFromPath(e,t){await this._bindings.insertJSONFromPath(this._conn,e,t)}},o1=class{constructor(e,t,n){this.db=e,this.conn=t,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let e=null;for(null!=this._inFlight&&(e=await this._inFlight,this._inFlight=null);null==e;)e=await this.db.fetchQueryResults(this.conn);return this._depleted=0==e.length,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:e}}[Symbol.asyncIterator](){return this}},a1=class{constructor(e,t,n){this.bindings=e,this.connectionId=t,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...e){let t=await this.bindings.runPrepared(this.connectionId,this.statementId,e),n=c0.from(t);return new EJ(n)}async send(...e){let t=await this.bindings.sendPrepared(this.connectionId,this.statementId,e),n=new o1(this.bindings,this.connectionId,t);return await c0.from(n)}},s1=((U0=s1||{}).CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",U0.CLOSE_PREPARED="CLOSE_PREPARED",U0.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",U0.REGISTER_OPFS_FILE_NAME="REGISTER_OPFS_FILE_NAME",U0.CONNECT="CONNECT",U0.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",U0.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",U0.CREATE_PREPARED="CREATE_PREPARED",U0.DISCONNECT="DISCONNECT",U0.DROP_FILE="DROP_FILE",U0.DROP_FILES="DROP_FILES",U0.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",U0.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",U0.FLUSH_FILES="FLUSH_FILES",U0.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",U0.GET_TABLE_NAMES="GET_TABLE_NAMES",U0.GET_VERSION="GET_VERSION",U0.GLOB_FILE_INFOS="GLOB_FILE_INFOS",U0.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",U0.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",U0.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",U0.INSTANTIATE="INSTANTIATE",U0.OPEN="OPEN",U0.PING="PING",U0.POLL_PENDING_QUERY="POLL_PENDING_QUERY",U0.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",U0.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",U0.REGISTER_FILE_URL="REGISTER_FILE_URL",U0.RESET="RESET",U0.RUN_PREPARED="RUN_PREPARED",U0.RUN_QUERY="RUN_QUERY",U0.SEND_PREPARED="SEND_PREPARED",U0.START_PENDING_QUERY="START_PENDING_QUERY",U0.TOKENIZE="TOKENIZE",U0),l1=((z0=l1||{}).CONNECTION_INFO="CONNECTION_INFO",z0.ERROR="ERROR",z0.FEATURE_FLAGS="FEATURE_FLAGS",z0.FILE_BUFFER="FILE_BUFFER",z0.FILE_INFOS="FILE_INFOS",z0.FILE_SIZE="FILE_SIZE",z0.FILE_STATISTICS="FILE_STATISTICS",z0.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",z0.LOG="LOG",z0.PROGRESS_UPDATE="PROGRESS_UPDATE",z0.OK="OK",z0.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",z0.QUERY_PLAN="QUERY_PLAN",z0.QUERY_RESULT="QUERY_RESULT",z0.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",z0.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",z0.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",z0.REGISTERED_FILE="REGISTERED_FILE",z0.SCRIPT_TOKENS="SCRIPT_TOKENS",z0.SUCCESS="SUCCESS",z0.TABLE_NAMES="TABLE_NAMES",z0.VERSION_STRING="VERSION_STRING",z0),u1=class{constructor(e,t){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=e,this.data=t,this.promise=new Promise((e,t)=>{this.promiseResolver=e,this.promiseRejecter=t})}};function c1(e){switch(e.typeId){case UG.Binary:return{sqlType:"binary"};case UG.Bool:return{sqlType:"bool"};case UG.Date:return{sqlType:"date"};case UG.DateDay:return{sqlType:"date32[d]"};case UG.DateMillisecond:return{sqlType:"date64[ms]"};case UG.Decimal:{let t=e;return{sqlType:"decimal",precision:t.precision,scale:t.scale}}case UG.Float:return{sqlType:"float"};case UG.Float16:return{sqlType:"float16"};case UG.Float32:return{sqlType:"float32"};case UG.Float64:return{sqlType:"float64"};case UG.Int:return{sqlType:"int32"};case UG.Int16:return{sqlType:"int16"};case UG.Int32:return{sqlType:"int32"};case UG.Int64:return{sqlType:"int64"};case UG.Uint16:return{sqlType:"uint16"};case UG.Uint32:return{sqlType:"uint32"};case UG.Uint64:return{sqlType:"uint64"};case UG.Uint8:return{sqlType:"uint8"};case UG.IntervalDayTime:return{sqlType:"interval[dt]"};case UG.IntervalYearMonth:return{sqlType:"interval[m]"};case UG.List:return{sqlType:"list",valueType:c1(e.valueType)};case UG.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:e.byteWidth};case UG.Null:return{sqlType:"null"};case UG.Utf8:return{sqlType:"utf8"};case UG.Struct:return{sqlType:"struct",fields:e.children.map(e=>d1(e.name,e.type))};case UG.Map:{let t=e;return{sqlType:"map",keyType:c1(t.keyType),valueType:c1(t.valueType)}}case UG.Time:return{sqlType:"time[s]"};case UG.TimeMicrosecond:return{sqlType:"time[us]"};case UG.TimeMillisecond:return{sqlType:"time[ms]"};case UG.TimeNanosecond:return{sqlType:"time[ns]"};case UG.TimeSecond:return{sqlType:"time[s]"};case UG.Timestamp:return{sqlType:"timestamp",timezone:e.timezone||void 0};case UG.TimestampSecond:return{sqlType:"timestamp[s]",timezone:e.timezone||void 0};case UG.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:e.timezone||void 0};case UG.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:e.timezone||void 0};case UG.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:e.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(e.toString()))}function d1(e,t){let n=c1(t);return n.name=e,n}var f1=new TextEncoder,p1=class{constructor(e,t=null){this._onInstantiationProgress=[],this._onExecutionProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=e,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),null!=t&&this.attach(t)}get logger(){return this._logger}attach(e){this._worker=e,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,t)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(e,t=[]){if(!this._worker)return;let n=this._nextMessageId++;return this._pendingRequests.set(n,e),this._worker.postMessage({messageId:n,type:e.type,data:e.data},t),await e.promise}onMessage(e){var t;let n=e.data;switch(n.type){case"PROGRESS_UPDATE":for(let e of this._onExecutionProgress)e(n.data);return;case"LOG":return void this._logger.log(n.data);case"INSTANTIATE_PROGRESS":for(let e of this._onInstantiationProgress)e(n.data);return}let r=this._pendingRequests.get(n.requestId);if(r){if(this._pendingRequests.delete(n.requestId),"ERROR"==n.type){let e=new Error(n.data.message);return e.name=n.data.name,null!=(t=Object.getOwnPropertyDescriptor(e,"stack"))&&t.writable&&(e.stack=n.data.stack),void r.promiseRejecter(e)}switch(r.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"REGISTER_OPFS_FILE_NAME":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if("OK"==n.type)return void r.promiseResolver(n.data);break;case"INSTANTIATE":if(this._onInstantiationProgress=[],"OK"==n.type)return void r.promiseResolver(n.data);break;case"GLOB_FILE_INFOS":if("FILE_INFOS"==n.type)return void r.promiseResolver(n.data);break;case"GET_VERSION":if("VERSION_STRING"==n.type)return void r.promiseResolver(n.data);break;case"GET_FEATURE_FLAGS":if("FEATURE_FLAGS"==n.type)return void r.promiseResolver(n.data);break;case"GET_TABLE_NAMES":if("TABLE_NAMES"==n.type)return void r.promiseResolver(n.data);break;case"TOKENIZE":if("SCRIPT_TOKENS"==n.type)return void r.promiseResolver(n.data);break;case"COPY_FILE_TO_BUFFER":if("FILE_BUFFER"==n.type)return void r.promiseResolver(n.data);break;case"EXPORT_FILE_STATISTICS":if("FILE_STATISTICS"==n.type)return void r.promiseResolver(n.data);break;case"CONNECT":if("CONNECTION_INFO"==n.type)return void r.promiseResolver(n.data);break;case"RUN_PREPARED":case"RUN_QUERY":if("QUERY_RESULT"==n.type)return void r.promiseResolver(n.data);break;case"SEND_PREPARED":if("QUERY_RESULT_HEADER"==n.type)return void r.promiseResolver(n.data);break;case"START_PENDING_QUERY":case"POLL_PENDING_QUERY":if("QUERY_RESULT_HEADER_OR_NULL"==n.type)return void r.promiseResolver(n.data);break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],"SUCCESS"==n.type)return void r.promiseResolver(n.data);break;case"FETCH_QUERY_RESULTS":if("QUERY_RESULT_CHUNK"==n.type)return void r.promiseResolver(n.data);break;case"CREATE_PREPARED":if("PREPARED_STATEMENT_ID"==n.type)return void r.promiseResolver(n.data)}r.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}}onError(e){this._pendingRequests.clear()}onClose(){this._workerShutdownResolver(null),0==this._pendingRequests.size&&this._pendingRequests.clear()}async reset(){let e=new u1("RESET",null);return await this.postTask(e)}async ping(){let e=new u1("PING",null);await this.postTask(e)}async dropFile(e){let t=new u1("DROP_FILE",e);return await this.postTask(t)}async dropFiles(){let e=new u1("DROP_FILES",null);return await this.postTask(e)}async flushFiles(){let e=new u1("FLUSH_FILES",null);return await this.postTask(e)}async instantiate(e,t=null,n=e=>{}){this._onInstantiationProgress.push(n);let r=new u1("INSTANTIATE",[e,t]);return await this.postTask(r)}async getVersion(){let e=new u1("GET_VERSION",null);return await this.postTask(e)}async getFeatureFlags(){let e=new u1("GET_FEATURE_FLAGS",null);return await this.postTask(e)}async open(e){let t=new u1("OPEN",e);await this.postTask(t)}async tokenize(e){let t=new u1("TOKENIZE",e);return await this.postTask(t)}async connectInternal(){let e=new u1("CONNECT",null);return await this.postTask(e)}async connect(){let e=await this.connectInternal();return new i1(this,e)}async disconnect(e){let t=new u1("DISCONNECT",e);await this.postTask(t)}async runQuery(e,t){let n=new u1("RUN_QUERY",[e,t]);return await this.postTask(n)}async startPendingQuery(e,t,n=!1){let r=new u1("START_PENDING_QUERY",[e,t,n]);return await this.postTask(r)}async pollPendingQuery(e){let t=new u1("POLL_PENDING_QUERY",e);return await this.postTask(t)}async cancelPendingQuery(e){let t=new u1("CANCEL_PENDING_QUERY",e);return await this.postTask(t)}async fetchQueryResults(e){let t=new u1("FETCH_QUERY_RESULTS",e);return await this.postTask(t)}async getTableNames(e,t){let n=new u1("GET_TABLE_NAMES",[e,t]);return await this.postTask(n)}async createPrepared(e,t){let n=new u1("CREATE_PREPARED",[e,t]);return await this.postTask(n)}async closePrepared(e,t){let n=new u1("CLOSE_PREPARED",[e,t]);await this.postTask(n)}async runPrepared(e,t,n){let r=new u1("RUN_PREPARED",[e,t,n]);return await this.postTask(r)}async sendPrepared(e,t,n){let r=new u1("SEND_PREPARED",[e,t,n]);return await this.postTask(r)}async globFiles(e){let t=new u1("GLOB_FILE_INFOS",e);return await this.postTask(t)}async registerFileText(e,t){let n=f1.encode(t);await this.registerFileBuffer(e,n)}async registerFileURL(e,t,n,r){void 0===t&&(t=e);let i=new u1("REGISTER_FILE_URL",[e,t,n,r]);await this.postTask(i)}async registerEmptyFileBuffer(e){}async registerFileBuffer(e,t){let n=new u1("REGISTER_FILE_BUFFER",[e,t]);await this.postTask(n,[t.buffer])}async registerFileHandle(e,t,n,r){let i=new u1("REGISTER_FILE_HANDLE",[e,t,n,r]);await this.postTask(i,[])}async registerOPFSFileName(e){let t=new u1("REGISTER_OPFS_FILE_NAME",[e]);await this.postTask(t,[])}async collectFileStatistics(e,t){let n=new u1("COLLECT_FILE_STATISTICS",[e,t]);await this.postTask(n,[])}async exportFileStatistics(e){let t=new u1("EXPORT_FILE_STATISTICS",e);return await this.postTask(t,[])}async copyFileToBuffer(e){let t=new u1("COPY_FILE_TO_BUFFER",e);return await this.postTask(t)}async copyFileToPath(e,t){let n=new u1("COPY_FILE_TO_PATH",[e,t]);await this.postTask(n)}async insertArrowFromIPCStream(e,t,n){if(0==t.length)return;let r=new u1("INSERT_ARROW_FROM_IPC_STREAM",[e,t,n]);await this.postTask(r,[t.buffer])}async insertCSVFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let r=n.columns[t];e.push(d1(t,r))}n.columnsFlat=e,delete n.columns}let r=new u1("IMPORT_CSV_FROM_PATH",[e,t,n]);await this.postTask(r)}async insertJSONFromPath(e,t,n){if(void 0!==n.columns){let e=[];for(let t in n.columns){let r=n.columns[t];e.push(d1(t,r))}n.columnsFlat=e,delete n.columns}let r=new u1("IMPORT_JSON_FROM_PATH",[e,t,n]);await this.postTask(r)}};!function(){let e=new TextDecoder}();var h1=(e=>(e[e.BUFFER=0]="BUFFER",e[e.NODE_FS=1]="NODE_FS",e[e.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",e[e.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",e[e.HTTP=4]="HTTP",e[e.S3=5]="S3",e))(h1||{}),m1={name:"@duckdb/duckdb-wasm",version:"1.30.1-dev2.0"},g1=m1.name,y1=m1.version,v1=m1.version.split(".");v1[0],v1[1],v1[2];function b1(){let e="https://cdn.jsdelivr.net/npm/".concat(g1,"@").concat(y1,"/dist/");return{mvp:{mainModule:"".concat(e,"duckdb-mvp.wasm"),mainWorker:"".concat(e,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(e,"duckdb-eh.wasm"),mainWorker:"".concat(e,"duckdb-browser-eh.worker.js")}}}var w1=null,_1=null,x1=null,E1=null,S1=null;async function k1(){return null==w1&&(w1=typeof BigInt64Array<"u"),null==_1&&(_1=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])))()),null==x1&&(x1=await(async e=>{try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(e)}catch(F0){return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))),null==E1&&(E1=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))()),null==S1&&(S1=await(async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])))()),{bigInt64Array:w1,crossOriginIsolated:typeof navigator>"u"||globalThis.crossOriginIsolated||!1,wasmExceptions:_1,wasmSIMD:E1,wasmThreads:x1,wasmBulkMemory:S1}}function T1(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function C1(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function A1(){}((e,t,n)=>{n=null!=e?q0(G0(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of W0(t))!Y0.call(e,i)&&i!==n&&H0(e,i,{get:()=>t[i],enumerable:!(r=V0(t,i))||r.enumerable})})(e&&e.__esModule?n:H0(n,"default",{value:e,enumerable:!0}),e)})(K0());var I1=.7,O1=1/I1,N1="\\s*([+-]?\\d+)\\s*",D1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",R1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",M1=/^#([0-9a-f]{3,8})$/,P1=new RegExp(`^rgb\\(${N1},${N1},${N1}\\)$`),F1=new RegExp(`^rgb\\(${R1},${R1},${R1}\\)$`),L1=new RegExp(`^rgba\\(${N1},${N1},${N1},${D1}\\)$`),j1=new RegExp(`^rgba\\(${R1},${R1},${R1},${D1}\\)$`),B1=new RegExp(`^hsl\\(${D1},${R1},${R1}\\)$`),$1=new RegExp(`^hsla\\(${D1},${R1},${R1},${D1}\\)$`),z1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function U1(){return this.rgb().formatHex()}function q1(){return this.rgb().formatRgb()}function H1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=M1.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?V1(t):3===n?new K1(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?W1(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?W1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=P1.exec(e))?new K1(t[1],t[2],t[3],1):(t=F1.exec(e))?new K1(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=L1.exec(e))?W1(t[1],t[2],t[3],t[4]):(t=j1.exec(e))?W1(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=B1.exec(e))?t2(t[1],t[2]/100,t[3]/100,1):(t=$1.exec(e))?t2(t[1],t[2]/100,t[3]/100,t[4]):z1.hasOwnProperty(e)?V1(z1[e]):"transparent"===e?new K1(NaN,NaN,NaN,0):null}function V1(e){return new K1(e>>16&255,e>>8&255,255&e,1)}function W1(e,t,n,r){return r<=0&&(e=t=n=NaN),new K1(e,t,n,r)}function G1(e){return e instanceof A1||(e=H1(e)),e?new K1((e=e.rgb()).r,e.g,e.b,e.opacity):new K1}function Y1(e,t,n,r){return 1===arguments.length?G1(e):new K1(e,t,n,null==r?1:r)}function K1(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Z1(){return`#${e2(this.r)}${e2(this.g)}${e2(this.b)}`}function Q1(){const e=X1(this.opacity);return`${1===e?"rgb(":"rgba("}${J1(this.r)}, ${J1(this.g)}, ${J1(this.b)}${1===e?")":`, ${e})`}`}function X1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function J1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function e2(e){return((e=J1(e))<16?"0":"")+e.toString(16)}function t2(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new i2(e,t,n,r)}function n2(e){if(e instanceof i2)return new i2(e.h,e.s,e.l,e.opacity);if(e instanceof A1||(e=H1(e)),!e)return new i2;if(e instanceof i2)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new i2(a,s,l,e.opacity)}function r2(e,t,n,r){return 1===arguments.length?n2(e):new i2(e,t,n,null==r?1:r)}function i2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function o2(e){return(e=(e||0)%360)<0?e+360:e}function a2(e){return Math.max(0,Math.min(1,e||0))}function s2(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}T1(A1,H1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:U1,formatHex:U1,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return n2(this).formatHsl()},formatRgb:q1,toString:q1}),T1(K1,Y1,C1(A1,{brighter(e){return e=null==e?O1:Math.pow(O1,e),new K1(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?I1:Math.pow(I1,e),new K1(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new K1(J1(this.r),J1(this.g),J1(this.b),X1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Z1,formatHex:Z1,formatHex8:function(){return`#${e2(this.r)}${e2(this.g)}${e2(this.b)}${e2(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Q1,toString:Q1})),T1(i2,r2,C1(A1,{brighter(e){return e=null==e?O1:Math.pow(O1,e),new i2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?I1:Math.pow(I1,e),new i2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new K1(s2(e>=240?e-240:e+120,i,r),s2(e,i,r),s2(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new i2(o2(this.h),a2(this.s),a2(this.l),X1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=X1(this.opacity);return`${1===e?"hsl(":"hsla("}${o2(this.h)}, ${100*a2(this.s)}%, ${100*a2(this.l)}%${1===e?")":`, ${e})`}`}}));const l2=Math.PI/180,u2=180/Math.PI,c2=.96422,d2=.82521,f2=4/29,p2=6/29,h2=3*p2*p2,m2=p2*p2*p2;function g2(e){if(e instanceof v2)return new v2(e.l,e.a,e.b,e.opacity);if(e instanceof S2)return k2(e);e instanceof K1||(e=G1(e));var t,n,r=x2(e.r),i=x2(e.g),o=x2(e.b),a=b2((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=b2((.4360747*r+.3850649*i+.1430804*o)/c2),n=b2((.0139322*r+.0971045*i+.7141733*o)/d2)),new v2(116*a-16,500*(t-a),200*(a-n),e.opacity)}function y2(e,t,n,r){return 1===arguments.length?g2(e):new v2(e,t,n,null==r?1:r)}function v2(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function b2(e){return e>m2?Math.pow(e,1/3):e/h2+f2}function w2(e){return e>p2?e*e*e:h2*(e-f2)}function _2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function x2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function E2(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof S2)return new S2(e.h,e.c,e.l,e.opacity);if(e instanceof v2||(e=g2(e)),0===e.a&&0===e.b)return new S2(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*u2;return new S2(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new S2(e,t,n,null==r?1:r)}function S2(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function k2(e){if(isNaN(e.h))return new v2(e.l,0,0,e.opacity);var t=e.h*l2;return new v2(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}T1(v2,y2,C1(A1,{brighter(e){return new v2(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker(e){return new v2(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new K1(_2(3.1338561*(t=c2*w2(t))-1.6168667*(e=1*w2(e))-.4906146*(n=d2*w2(n))),_2(-.9787684*t+1.9161415*e+.033454*n),_2(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),T1(S2,E2,C1(A1,{brighter(e){return new S2(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker(e){return new S2(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb(){return k2(this).rgb()}}));var T2=-.14861,C2=1.78277,A2=-.29227,I2=-.90649,O2=1.97294,N2=O2*I2,D2=O2*C2,R2=C2*A2-I2*T2;function M2(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof P2)return new P2(e.h,e.s,e.l,e.opacity);e instanceof K1||(e=G1(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(R2*r+N2*t-D2*n)/(R2+N2-D2),o=r-i,a=(O2*(n-i)-A2*o)/I2,s=Math.sqrt(a*a+o*o)/(O2*i*(1-i)),l=s?Math.atan2(a,o)*u2-120:NaN;return new P2(l<0?l+360:l,s,i,e.opacity)}(e):new P2(e,t,n,null==r?1:r)}function P2(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function F2(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function L2(e){return(e=F2(Math.abs(e)))?e[1]:NaN}T1(P2,M2,C1(A1,{brighter(e){return e=null==e?O1:Math.pow(O1,e),new P2(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?I1:Math.pow(I1,e),new P2(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*l2,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new K1(255*(t+n*(T2*r+C2*i)),255*(t+n*(A2*r+I2*i)),255*(t+n*(O2*r)),this.opacity)}}));var j2,B2=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $2(e){if(!(t=B2.exec(e)))throw new Error("invalid format: "+e);var t;return new z2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function z2(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function U2(e,t){var n=F2(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}$2.prototype=z2.prototype,z2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const q2={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>U2(100*e,t),r:U2,s:function(e,t){var n=F2(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(j2=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+F2(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function H2(e){return e}var V2,W2,G2,Y2=Array.prototype.map,K2=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Z2(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?H2:(t=Y2.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?H2:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Y2.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function d(e){var t=(e=$2(e)).fill,n=e.align,d=e.sign,f=e.symbol,p=e.zero,h=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):q2[v]||(void 0===g&&(g=12),y=!0,v="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var b="$"===f?i:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",w="$"===f?o:/[%p]/.test(v)?l:"",_=q2[v],x=/[defgprs%]/.test(v);function E(e){var i,o,l,f=b,E=w;if("c"===v)E=_(e)+E,e="";else{var S=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:_(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),S&&0===+e&&"+"!==d&&(S=!1),f=(S?"("===d?d:u:"-"===d||"("===d?"":d)+f,E=("s"===v?K2[8+j2/3]:"")+E+(S&&"("===d?")":""),x)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){E=(46===l?a+e.slice(i+1):e.slice(i))+E,e=e.slice(0,i);break}}m&&!p&&(e=r(e,1/0));var k=f.length+e.length+E.length,T=k<h?new Array(h-k+1).join(t):"";switch(m&&p&&(e=r(T+e,T.length?h-E.length:1/0),T=""),n){case"<":e=f+e+E+T;break;case"=":e=f+T+e+E;break;case"^":e=T.slice(0,k=T.length>>1)+f+e+E+T.slice(k);break;default:e=T+f+e+E}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),E.toString=function(){return e+""},E}return{format:d,formatPrefix:function(e,t){var n=d(((e=$2(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(L2(t)/3))),i=Math.pow(10,-r),o=K2[8+r/3];return function(e){return n(i*e)+o}}}}function Q2(e){return Math.max(0,-L2(Math.abs(e)))}function X2(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(L2(t)/3)))-L2(Math.abs(e)))}function J2(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,L2(t)-L2(e))+1}V2=Z2({thousands:",",grouping:[3],currency:["$",""]}),W2=V2.format,G2=V2.formatPrefix;const e3=W2(",.0f");function t3(e,t=10){return e.length<=t?e:`${e.substring(0,t-3)}…`}W2(".4~s"),W2(",.0s");const n3=new Date,r3=new Date;function i3(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>i3(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(n3.setTime(+t),r3.setTime(+r),e(n3),e(r3),Math.floor(n(n3,r3))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const o3=i3(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);o3.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i3(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):o3:null),o3.range;const a3=1e3,s3=6e4,l3=36e5,u3=864e5,c3=6048e5,d3=2592e6,f3=31536e6,p3=i3(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*a3)},(e,t)=>(t-e)/a3,e=>e.getUTCSeconds());p3.range;const h3=i3(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*a3)},(e,t)=>{e.setTime(+e+t*s3)},(e,t)=>(t-e)/s3,e=>e.getMinutes());h3.range;const m3=i3(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*s3)},(e,t)=>(t-e)/s3,e=>e.getUTCMinutes());m3.range;const g3=i3(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*a3-e.getMinutes()*s3)},(e,t)=>{e.setTime(+e+t*l3)},(e,t)=>(t-e)/l3,e=>e.getHours());g3.range;const y3=i3(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*l3)},(e,t)=>(t-e)/l3,e=>e.getUTCHours());y3.range;const v3=i3(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s3)/u3,e=>e.getDate()-1);v3.range;const b3=i3(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/u3,e=>e.getUTCDate()-1);b3.range;const w3=i3(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/u3,e=>Math.floor(e/u3));function _3(e){return i3(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*s3)/c3)}w3.range;const x3=_3(0),E3=_3(1),S3=_3(2),k3=_3(3),T3=_3(4),C3=_3(5),A3=_3(6);function I3(e){return i3(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/c3)}x3.range,E3.range,S3.range,k3.range,T3.range,C3.range,A3.range;const O3=I3(0),N3=I3(1),D3=I3(2),R3=I3(3),M3=I3(4),P3=I3(5),F3=I3(6);O3.range,N3.range,D3.range,R3.range,M3.range,P3.range,F3.range;const L3=i3(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth());L3.range;const j3=i3(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth());j3.range;const B3=i3(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());B3.every=e=>isFinite(e=Math.floor(e))&&e>0?i3(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null,B3.range;const $3=i3(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());function z3(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function U3(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function q3(e){let t,n,r;function i(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=z3,n=(t,n)=>z3(e(t),n),r=(t,n)=>e(t)-n):(t=e===z3||e===U3?e:H3,n=e,r=e),{left:i,center:function(e,t,n=0,o=e.length){const a=i(e,t,n,o-1);return a>n&&r(e[a-1],t)>-r(e[a],t)?a-1:a},right:function(e,r,i=0,o=e.length){if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function H3(){return 0}function V3(e){return null===e?NaN:+e}$3.every=e=>isFinite(e=Math.floor(e))&&e>0?i3(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null,$3.range;const W3=q3(z3),G3=W3.right,Y3=W3.left;q3(V3).center;class K3{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}class Z3 extends Map{constructor(e,t=t4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(X3(this,e))}has(e){return super.has(X3(this,e))}set(e,t){return super.set(J3(this,e),t)}delete(e){return super.delete(e4(this,e))}}class Q3 extends Set{constructor(e,t=t4){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const n of e)this.add(n)}has(e){return super.has(X3(this,e))}add(e){return super.add(J3(this,e))}delete(e){return super.delete(e4(this,e))}}function X3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function J3({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function e4({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function t4(e){return null!==e&&"object"==typeof e?e.valueOf():e}function n4(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}const r4=Math.sqrt(50),i4=Math.sqrt(10),o4=Math.sqrt(2);function a4(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=r4?10:o>=i4?5:o>=o4?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?a4(e,t,2*n):[s,l,u]}function s4(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?a4(t,e,n):a4(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function l4(e,t,n){return a4(e=+e,t=+t,n=+n)[2]}function u4(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?l4(t,e,n):l4(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function c4(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function d4(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function f4(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?n4:function(e=z3){if(e===z3)return n4;if("function"!=typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}(i);r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);f4(e,t,Math.max(n,Math.floor(t-a*l/o+u)),Math.min(r,Math.floor(t+(o-a)*l/o+u)),i)}const o=e[t];let a=n,s=r;for(p4(e,n,t),i(e[r],o)>0&&p4(e,n,r);a<s;){for(p4(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?p4(e,n,s):(++s,p4(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function p4(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function h4(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return d4(e);if(t>=1)return c4(e);var r,i=(r-1)*t,o=Math.floor(i),a=c4(f4(e,o).subarray(0,o+1));return a+(d4(e.subarray(o+1))-a)*(i-o)}}function m4(e,t,n=V3){if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function g4(e,t){return h4(e,.5,t)}function y4(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function v4(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}function b4(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function w4(e){return e instanceof Q3?e:new Q3(e)}function _4(e,t,n,r,i,o){const a=[[p3,1,a3],[p3,5,5e3],[p3,15,15e3],[p3,30,3e4],[o,1,s3],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,l3],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,u3],[r,2,1728e5],[n,1,c3],[t,1,d3],[t,3,7776e6],[e,1,f3]];function s(t,n,r){const i=Math.abs(n-t)/r,o=q3(([,,e])=>e).right(a,i);if(o===a.length)return e.every(u4(t/f3,n/f3,r));if(0===o)return o3.every(Math.max(u4(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[x4,E4]=_4($3,j3,O3,w3,y3,m3),[S4,k4]=_4(B3,L3,x3,v3,g3,h3);function T4(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function C4(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function A4(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function I4(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=z4(i),c=U4(i),d=z4(o),f=U4(o),p=z4(a),h=U4(a),m=z4(s),g=U4(s),y=z4(l),v=U4(l),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:u5,e:u5,f:h5,g:k5,G:C5,H:c5,I:d5,j:f5,L:p5,m:m5,M:g5,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Z5,s:Q5,S:y5,u:v5,U:b5,V:_5,w:x5,W:E5,x:null,X:null,y:S5,Y:T5,Z:A5,"%":K5},w={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:I5,e:I5,f:M5,g:V5,G:G5,H:O5,I:N5,j:D5,L:R5,m:P5,M:F5,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Z5,s:Q5,S:L5,u:j5,U:B5,V:z5,w:U5,W:q5,x:null,X:null,y:H5,Y:W5,Z:Y5,"%":K5},_={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return S(e,t,n,r)},d:J4,e:J4,f:o5,g:K4,G:Y4,H:t5,I:t5,j:e5,L:i5,m:X4,M:n5,p:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Q4,Q:s5,s:l5,S:r5,u:H4,U:V4,V:W4,w:q4,W:G4,x:function(e,t,r){return S(e,n,t,r)},X:function(e,t,n){return S(e,r,t,n)},y:K4,Y:Y4,Z:Z4,"%":a5};function x(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,u=e.length;for(n instanceof Date||(n=new Date(+n));++s<u;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=P4[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function E(e,t){return function(n){var r,i,o=A4(1900,void 0,1);if(S(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=C4(A4(o.y,0,1))).getUTCDay(),r=i>4||0===i?N3.ceil(r):N3(r),r=b3.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=T4(A4(o.y,0,1))).getDay(),r=i>4||0===i?E3.ceil(r):E3(r),r=v3.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?C4(A4(o.y,0,1)).getUTCDay():T4(A4(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,C4(o)):T4(o)}}function S(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=_[i in P4?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=x(n,b),b.X=x(r,b),b.c=x(t,b),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w),{format:function(e){var t=x(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=E(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=x(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=E(e+="",!0);return t.toString=function(){return e},t}}}var O4,N4,D4,R4,M4,P4={"-":"",_:" ",0:"0"},F4=/^\s*\d+/,L4=/^%/,j4=/[\\^$*+?|[\]().{}]/g;function B4(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function $4(e){return e.replace(j4,"\\$&")}function z4(e){return new RegExp("^(?:"+e.map($4).join("|")+")","i")}function U4(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function q4(e,t,n){var r=F4.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function H4(e,t,n){var r=F4.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function V4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function W4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function G4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Y4(e,t,n){var r=F4.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function K4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Z4(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Q4(e,t,n){var r=F4.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function X4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function J4(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function e5(e,t,n){var r=F4.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function t5(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function n5(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function r5(e,t,n){var r=F4.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function i5(e,t,n){var r=F4.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function o5(e,t,n){var r=F4.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function a5(e,t,n){var r=L4.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function s5(e,t,n){var r=F4.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function l5(e,t,n){var r=F4.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function u5(e,t){return B4(e.getDate(),t,2)}function c5(e,t){return B4(e.getHours(),t,2)}function d5(e,t){return B4(e.getHours()%12||12,t,2)}function f5(e,t){return B4(1+v3.count(B3(e),e),t,3)}function p5(e,t){return B4(e.getMilliseconds(),t,3)}function h5(e,t){return p5(e,t)+"000"}function m5(e,t){return B4(e.getMonth()+1,t,2)}function g5(e,t){return B4(e.getMinutes(),t,2)}function y5(e,t){return B4(e.getSeconds(),t,2)}function v5(e){var t=e.getDay();return 0===t?7:t}function b5(e,t){return B4(x3.count(B3(e)-1,e),t,2)}function w5(e){var t=e.getDay();return t>=4||0===t?T3(e):T3.ceil(e)}function _5(e,t){return e=w5(e),B4(T3.count(B3(e),e)+(4===B3(e).getDay()),t,2)}function x5(e){return e.getDay()}function E5(e,t){return B4(E3.count(B3(e)-1,e),t,2)}function S5(e,t){return B4(e.getFullYear()%100,t,2)}function k5(e,t){return B4((e=w5(e)).getFullYear()%100,t,2)}function T5(e,t){return B4(e.getFullYear()%1e4,t,4)}function C5(e,t){var n=e.getDay();return B4((e=n>=4||0===n?T3(e):T3.ceil(e)).getFullYear()%1e4,t,4)}function A5(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+B4(t/60|0,"0",2)+B4(t%60,"0",2)}function I5(e,t){return B4(e.getUTCDate(),t,2)}function O5(e,t){return B4(e.getUTCHours(),t,2)}function N5(e,t){return B4(e.getUTCHours()%12||12,t,2)}function D5(e,t){return B4(1+b3.count($3(e),e),t,3)}function R5(e,t){return B4(e.getUTCMilliseconds(),t,3)}function M5(e,t){return R5(e,t)+"000"}function P5(e,t){return B4(e.getUTCMonth()+1,t,2)}function F5(e,t){return B4(e.getUTCMinutes(),t,2)}function L5(e,t){return B4(e.getUTCSeconds(),t,2)}function j5(e){var t=e.getUTCDay();return 0===t?7:t}function B5(e,t){return B4(O3.count($3(e)-1,e),t,2)}function $5(e){var t=e.getUTCDay();return t>=4||0===t?M3(e):M3.ceil(e)}function z5(e,t){return e=$5(e),B4(M3.count($3(e),e)+(4===$3(e).getUTCDay()),t,2)}function U5(e){return e.getUTCDay()}function q5(e,t){return B4(N3.count($3(e)-1,e),t,2)}function H5(e,t){return B4(e.getUTCFullYear()%100,t,2)}function V5(e,t){return B4((e=$5(e)).getUTCFullYear()%100,t,2)}function W5(e,t){return B4(e.getUTCFullYear()%1e4,t,4)}function G5(e,t){var n=e.getUTCDay();return B4((e=n>=4||0===n?M3(e):M3.ceil(e)).getUTCFullYear()%1e4,t,4)}function Y5(){return"+0000"}function K5(){return"%"}function Z5(e){return+e}function Q5(e){return Math.floor(+e/1e3)}!function(e){O4=I4(e),N4=O4.format,D4=O4.parse,R4=O4.utcFormat,M4=O4.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var X5,J5={exports:{}};var e6=(X5||(X5=1,J5.exports=function(){var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",o="minute",a="hour",s="day",l="week",u="month",c="quarter",d="year",f="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},y=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},v={s:y,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+y(r,2,"0")+":"+y(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,u),o=n-i<0,a=t.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:u,y:d,w:l,d:s,D:f,h:a,m:o,s:i,ms:r,Q:c}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",w={};w[b]=g;var _="$isDayjsObject",x=function(e){return e instanceof T||!(!e||!e[_])},E=function e(t,n,r){var i;if(!t)return b;if("string"==typeof t){var o=t.toLowerCase();w[o]&&(i=o),n&&(w[o]=n,i=o);var a=t.split("-");if(!i&&a.length>1)return e(a[0])}else{var s=t.name;w[s]=t,i=s}return!r&&i&&(b=i),i||!r&&b},S=function(e,t){if(x(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},k=v;k.l=E,k.i=x,k.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function g(e){this.$L=E(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var y=g.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(k.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(h);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return k},y.isValid=function(){return!(this.$d.toString()===p)},y.isSame=function(e,t){var n=S(e);return this.startOf(t)<=n&&n<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,n){return k.u(e)?this[t]:this.set(n,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var n=this,r=!!k.u(t)||t,c=k.p(e),p=function(e,t){var i=k.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(s)},h=function(e,t){return k.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,g=this.$M,y=this.$D,v="set"+(this.$u?"UTC":"");switch(c){case d:return r?p(1,0):p(31,11);case u:return r?p(1,g):p(0,g+1);case l:var b=this.$locale().weekStart||0,w=(m<b?m+7:m)-b;return p(r?y-w:y+(6-w),g);case s:case f:return h(v+"Hours",0);case a:return h(v+"Minutes",1);case o:return h(v+"Seconds",2);case i:return h(v+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var n,l=k.p(e),c="set"+(this.$u?"UTC":""),p=(n={},n[s]=c+"Date",n[f]=c+"Date",n[u]=c+"Month",n[d]=c+"FullYear",n[a]=c+"Hours",n[o]=c+"Minutes",n[i]=c+"Seconds",n[r]=c+"Milliseconds",n)[l],h=l===s?this.$D+(t-this.$W):t;if(l===u||l===d){var m=this.clone().set(f,1);m.$d[p](h),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[k.p(e)]()},y.add=function(r,c){var f,p=this;r=Number(r);var h=k.p(c),m=function(e){var t=S(p);return k.w(t.date(t.date()+Math.round(e*r)),p)};if(h===u)return this.set(u,this.$M+r);if(h===d)return this.set(d,this.$y+r);if(h===s)return m(1);if(h===l)return m(7);var g=(f={},f[o]=t,f[a]=n,f[i]=e,f)[h]||1,y=this.$d.getTime()+r*g;return k.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=k.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,u=n.months,c=n.meridiem,d=function(e,n,i,o){return e&&(e[n]||e(t,r))||i[n].slice(0,o)},f=function(e){return k.s(o%12||12,e,"0")},h=c||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(m,function(e,r){return r||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return k.s(t.$y,4,"0");case"M":return s+1;case"MM":return k.s(s+1,2,"0");case"MMM":return d(n.monthsShort,s,u,3);case"MMMM":return d(u,s);case"D":return t.$D;case"DD":return k.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return d(n.weekdaysMin,t.$W,l,2);case"ddd":return d(n.weekdaysShort,t.$W,l,3);case"dddd":return l[t.$W];case"H":return String(o);case"HH":return k.s(o,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return h(o,a,!0);case"A":return h(o,a,!1);case"m":return String(a);case"mm":return k.s(a,2,"0");case"s":return String(t.$s);case"ss":return k.s(t.$s,2,"0");case"SSS":return k.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(r,f,p){var h,m=this,g=k.p(f),y=S(r),v=(y.utcOffset()-this.utcOffset())*t,b=this-y,w=function(){return k.m(m,y)};switch(g){case d:h=w()/12;break;case u:h=w();break;case c:h=w()/3;break;case l:h=(b-v)/6048e5;break;case s:h=(b-v)/864e5;break;case a:h=b/n;break;case o:h=b/t;break;case i:h=b/e;break;default:h=b}return p?h:k.a(h)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return w[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=E(e,t,!0);return r&&(n.$L=r),n},y.clone=function(){return k.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},g}(),C=T.prototype;return S.prototype=C,[["$ms",r],["$s",i],["$m",o],["$H",a],["$W",s],["$M",u],["$y",d],["$D",f]].forEach(function(e){C[e[1]]=function(t){return this.$g(t,e[0],e[1])}}),S.extend=function(e,t){return e.$i||(e(t,T,S),e.$i=!0),S},S.locale=E,S.isDayjs=x,S.unix=function(e){return S(1e3*e)},S.en=w[b],S.Ls=w,S.p={},S}()),J5.exports);const t6=f(e6);var n6,r6={exports:{}};var i6=(n6||(n6=1,r6.exports=function(e,t,n){e=e||{};var r=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(e,t,n,i){return r.fromToBase(e,t,n,i)}n.en.relativeTime=i,r.fromToBase=function(t,r,o,a,s){for(var l,u,c,d=o.$locale().relativeTime||i,f=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=f.length,h=0;h<p;h+=1){var m=f[h];m.d&&(l=a?n(t).diff(o,m.d,!0):o.diff(t,m.d,!0));var g=(e.rounding||Math.round)(Math.abs(l));if(c=l>0,g<=m.r||!m.r){g<=1&&h>0&&(m=f[h-1]);var y=d[m.l];s&&(g=s(""+g)),u="string"==typeof y?y.replace("%d",g):y(g,r,m.l,c);break}}if(r)return u;var v=c?d.future:d.past;return"function"==typeof v?v(u):v.replace("%s",u)},r.to=function(e,t){return o(e,t,this,!0)},r.from=function(e,t){return o(e,t,this)};var a=function(e){return e.$u?n.utc():n()};r.toNow=function(e){return this.to(a(this),e)},r.fromNow=function(e){return this.from(a(this),e)}}),r6.exports);const o6=f(i6);t6.extend(o6),N4("%I:%M %p"),N4("%a %Y-%m-%d %I:%M %p"),N4("%Y-%m-%d");var a6,s6={exports:{}};function l6(){return a6||(a6=1,function(e,t){function n(e){var t=this,n=function(){var e=4022871197,t=function(t){t=String(t);for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)};return t}();t.next=function(){var e=2091639*t.s0+2.3283064365386963e-10*t.c;return t.s0=t.s1,t.s1=t.s2,t.s2=e-(t.c=0|e)},t.c=1,t.s0=n(" "),t.s1=n(" "),t.s2=n(" "),t.s0-=n(e),t.s0<0&&(t.s0+=1),t.s1-=n(e),t.s1<0&&(t.s1+=1),t.s2-=n(e),t.s2<0&&(t.s2+=1),n=null}function r(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var i=new n(e),o=t&&t.state,a=i.next;return a.int32=function(){return 4294967296*i.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.alea=i}(0,s6)),s6.exports}var u6,c6={exports:{}};var d6,f6={exports:{}};var p6,h6={exports:{}};var m6,g6={exports:{}};var y6,v6={exports:{}};var b6={exports:{}};const w6=p(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var _6,x6,E6,S6=b6.exports;function k6(){return _6||(_6=1,e=b6,function(t,n,r){var i,o=256,a="random",s=r.pow(o,6),l=r.pow(2,52),u=2*l,c=255;function d(e,c,d){var y=[],v=m(h((c=1==c?{entropy:!0}:c||{}).entropy?[e,g(n)]:null==e?function(){try{var e;return i&&(e=i.randomBytes)?e=e(o):(e=new Uint8Array(o),(t.crypto||t.msCrypto).getRandomValues(e)),g(e)}catch(F0){var r=t.navigator,a=r&&r.plugins;return[+new Date,t,a,t.screen,g(n)]}}():e,3),y),b=new f(y),w=function(){for(var e=b.g(6),t=s,n=0;e<l;)e=(e+n)*o,t*=o,n=b.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,m(g(b.S),n),(c.pass||d||function(e,t,n,i){return i&&(i.S&&p(i,b),e.state=function(){return p(b,{})}),n?(r[a]=e,t):e})(w,v,"global"in c?c.global:this==r,c.state)}function f(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=c&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=c&i+1],n=n*o+s[c&(s[i]=s[a=c&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function h(e,t){var n,r=[],i=typeof e;if(t&&"object"==i)for(n in e)try{r.push(h(e[n],t-1))}catch(F0){}return r.length?r:"string"==i?e:e+"\0"}function m(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return g(t)}function g(e){return String.fromCharCode.apply(0,e)}if(m(r.random(),n),e.exports){e.exports=d;try{i=w6}catch(y){}}else r["seed"+a]=d}("undefined"!=typeof self?self:S6,[],Math)),b6.exports;var e}function T6(e,t){const n=Math.random;return Array.from(function*(){for(let t=0;t<e;t++){const e=Math.floor(62*n());e<26?yield String.fromCharCode(e+65):e<52?yield String.fromCharCode(e+71):yield String.fromCharCode(e+48)}}()).join("")}function C6(e){let t=e.replace(/\.[^/.]+$/,"").replace(/[^a-z0-9_]/gi,"_");return/^\d/.test(t)&&(t="_"+t),t.length>63&&(t=t.substring(0,63)),t}function A6(e,t){const n=null==t?void 0:t.map(e=>e.toLowerCase());if(null==n?void 0:n.includes(e.toLowerCase())){let t=e,r=0;const i=e.match(/^(.+)_(\d+)$/);i&&(t=i[1],r=Number(i[2]));do{r++,e=`${t}_${r}`}while(n.includes(e.toLowerCase()))}return e}function I6(e){if(e)try{return JSON.parse(e)}catch{return}}function O6(e,t,{replace:n=!1,temp:r=!1,view:i=!1}={}){return"CREATE"+(n?" OR REPLACE ":" ")+(r?"TEMP ":"")+(i?"VIEW":"TABLE")+(n?" ":" IF NOT EXISTS ")+e+" AS "+t}function N6(e){switch(typeof e){case"number":return Number.isFinite(e)?`${e}`:"NULL";case"string":return`'${e.replace(/'/g,"''")}'`;case"boolean":return e?"TRUE":"FALSE";default:if(null==e)return"NULL";if(e instanceof Date){const t=+e;if(Number.isNaN(t))return"NULL";const n=e.getUTCFullYear(),r=e.getUTCMonth(),i=e.getUTCDate();return t===Date.UTC(n,r,i)?`DATE '${n}-${r+1}-${i}'`:`epoch_ms(${t})`}return e instanceof RegExp?`'${e.source}'`:`${e}`}}function D6(e,t,n,r={},i={}){const{method:o,schema:a,select:s=["*"],where:l,view:u,temp:c,replace:d,...f}=r,p=function(e){return Object.entries(e).map(([e,t])=>`${e}=${P6(t)}`).join(", ")}({...i,...f}),h="auto"===e?`'${n}'${p?", "+p:""}`:`${e}('${n}'${p?", "+p:""})`,m=l?` WHERE ${l}`:"",g=`SELECT ${s.join(", ")} FROM ${h}${m}`;return(a?`${function(e,{strict:t=!1}={}){return"CREATE SCHEMA "+(t?"":"IF NOT EXISTS ")+e}(a)}; `:"")+O6(a?`${a}.${t}`:t,g,{view:u,temp:c,replace:d})}function R6(e,t,n={}){const{schema:r,options:i,...o}=n;if(i){const e=Array.isArray(i)?i.join(", "):"string"==typeof i?i:Object.entries(i).map(([e,t])=>`${e}=${t}`).join(", ");Object.assign(o,{open_options:e.toUpperCase()})}return D6("st_read",r?`${r}.${e}`:e,t,o)}function M6(e,t,n={}){const{schema:r,select:i=["*"],...o}=n,a=function(e,{columns:t=Object.keys((null==e?void 0:e[0])||{})}={}){let n,r=[];if(Array.isArray(t)?(r=t,n=r.reduce((e,t)=>({...e,[t]:t}),{})):(n=t,r=Object.keys(t)),!r.length)throw new Error("Can not create table from empty column set.");const i=[];for(const o of e){const e=r.map(e=>`${N6(o[e])} AS "${n[e]}"`);i.push(`(SELECT ${e.join(", ")})`)}return i.join(" UNION ALL ")}(t);return O6(r?`${r}.${e}`:e,1===i.length&&"*"===i[0]?a:`SELECT ${i} FROM ${a}`,o)}function P6(e){switch(typeof e){case"boolean":default:return String(e);case"string":return`'${e}'`;case"undefined":case"object":return null==e?"NULL":Array.isArray(e)?"["+e.map(e=>P6(e)).join(", ")+"]":"{"+Object.entries(e).map(([e,t])=>`'${e}': ${P6(t)}`).join(", ")+"}"}}function F6({arrowTable:e,validate:t}){let n;return{get length(){return e.numRows},getRow(n){const r={};return e.schema.fields.forEach(t=>{const i=e.getChild(t.name);i&&(r[t.name]=i.get(n))}),t?t(r):r},*rows(){for(let e=0;e<this.length;e++)yield this.getRow(e)},toArray(){if(n)return n;const e=[];for(let t=0;t<this.length;t++)e.push(this.getRow(t));return n=e,e},[Symbol.iterator](){return this.rows()}}}function L6({dbPath:e=":memory:",initializationQuery:t=""}={},n){const r={initialized:!1,initializing:null,activeQueries:new Map},i=async()=>{!r.initialized&&r.initializing&&await r.initializing},o=(e,t)=>{var i;const o=new AbortController,a=`q_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(null==t?void 0:t.signal){const e=t.signal;e.aborted?o.abort():e.addEventListener("abort",()=>o.abort())}r.activeQueries.set(a,o);const s=e(o.signal,a).finally(()=>{r.activeQueries.delete(a)}),l={result:s,signal:o.signal,cancel:async()=>(async e=>{var t;const i=r.activeQueries.get(e);i&&(i.abort(),r.activeQueries.delete(e)),await(null==(t=n.cancelQueryInternal)?void 0:t.call(n,e))})(a),then:s.then.bind(s),catch:s.catch.bind(s),finally:null==(i=s.finally)?void 0:i.bind(s)};return l},a=(e,t)=>o((t,r)=>n.executeQueryInternal(e,t,r),t);return{initialize:async()=>{if(!r.initialized)return r.initializing||(r.initializing=(async()=>{var e;await(null==(e=n.initializeInternal)?void 0:e.call(n)),t&&await n.executeQueryInternal(t,(new AbortController).signal),r.initialized=!0,r.initializing=null})().catch(e=>{throw r.initialized=!1,r.initializing=null,e})),r.initializing},destroy:async()=>{var e;await(null==(e=n.destroyInternal)?void 0:e.call(n)),r.initialized=!1,r.initializing=null},execute:(e,t)=>o((t,r)=>n.executeQueryInternal(e,t,r),t),query:a,queryJson:(e,t)=>o(async(t,r)=>F6({arrowTable:await n.executeQueryInternal(e,t,r)}),t),loadFile:async(e,t,r)=>{if(n.loadFileInternal)return n.loadFileInternal(e,t,r);if(e instanceof File)throw new Error("Not implemented",{cause:{file:e,tableName:t,opts:r}});const o=e;await i(),r&&bA(r)?await a(R6(t,o,r)):await a(D6((null==r?void 0:r.method)??"auto",t,o,r))},loadArrow:async(e,t,r)=>{if(n.loadArrowInternal)return n.loadArrowInternal(e,t,r);throw new Error("Not implemented")},loadObjects:async(e,t,r)=>{if(n.loadObjectsInternal)return n.loadObjectsInternal(e,t,r);await i(),await a(M6(t,e,r))}}}function j6(e){return"object"==typeof e&&"toString"in e}function B6({database:e,schema:t,table:n}){const r=[e,t,n].filter(e=>null!=e).map(e=>z6(e)).join(".");return{database:e,schema:t,table:n,toString:()=>r}}!function(){if(E6)return x6;E6=1;var e=l6(),t=(u6||(u6=1,function(e,t){function n(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var i=new n(e),o=t&&t.state,a=function(){return(i.next()>>>0)/4294967296};return a.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=i.next,a.quick=a,o&&("object"==typeof o&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.xor128=i}(0,c6)),c6.exports),n=(d6||(d6=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function r(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var i=new n(e),o=t&&t.state,a=function(){return(i.next()>>>0)/4294967296};return a.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=i.next,a.quick=a,o&&("object"==typeof o&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.xorwow=i}(0,f6)),f6.exports),r=(p6||(p6=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function r(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var i=new n(e),o=t&&t.state,a=function(){return(i.next()>>>0)/4294967296};return a.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=i.next,a.quick=a,o&&(o.x&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.xorshift7=i}(0,h6)),h6.exports),i=(m6||(m6=1,function(e,t){function n(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function r(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var i=new n(e),o=t&&t.state,a=function(){return(i.next()>>>0)/4294967296};return a.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=i.next,a.quick=a,o&&(o.X&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.xor4096=i}(0,g6)),g6.exports),o=(y6||(y6=1,function(e,t){function n(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function r(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var i=new n(e),o=t&&t.state,a=function(){return(i.next()>>>0)/4294967296};return a.double=function(){do{var e=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=i.next,a.quick=a,o&&("object"==typeof o&&r(o,i),a.state=function(){return r(i,{})}),a}t&&t.exports?t.exports=i:this.tychei=i}(0,v6)),v6.exports),a=k6();a.alea=e,a.xor128=t,a.xorwow=n,a.xorshift7=r,a.xor4096=i,a.tychei=o,x6=a}();const $6=e=>`'${String(e).replace(/'/g,"''")}'`,z6=e=>{const t=String(e);return t.startsWith('"')&&t.endsWith('"')?t:`"${t.replace(/"/g,'""')}"`};function U6(e,t=0,n=0){var r;const i=null==(r="number"==typeof t?e.getChildAt(t):e.getChild(t))?void 0:r.get(n);return null==i?NaN:Number(i[0]??i)}const q6=(e,t)=>{const n=Math.max(0,Math.min(t,e.length)),r=e.slice(0,n).split("\n"),i=r.length,o=(r[r.length-1]??"").length+1,a=e.split("\n")[i-1]??"",s=" ".repeat(Math.max(0,o-1))+"^";return{line:i,column:o,lineText:a,pointerLine:s,formatted:`LINE ${i}: ${a}\n${" ".repeat(`LINE ${i}: `.length)}${s}`}};function H6(e){const t=[];let n="",r=!1,i=!1,o=!1,a=!1;for(let l=0;l<e.length;l++){const s=e[l];if(o)"\n"===s&&(o=!1,n+=s);else if(a)"*"===s&&"/"===e[l+1]&&(a=!1,l++);else if(r)n+=s,"'"===s&&(l+1<e.length&&"'"===e[l+1]?n+=e[++l]:r=!1);else if(i)n+=s,'"'===s&&(l+1<e.length&&'"'===e[l+1]?n+=e[++l]:i=!1);else if("-"!==s||"-"!==e[l+1])if("/"!==s||"*"!==e[l+1])if("'"!==s)if('"'!==s){if(";"===s){const e=n.trim();e.length>0&&t.push(e),n="";continue}n+=s}else i=!0,n+=s;else r=!0,n+=s;else a=!0,l++;else o=!0,l++}const s=n.trim();return s.length>0&&t.push(s),t}function V6(e){return e.trim().replace(/;+$/,"").replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ")}function W6(e,{limit:t=100,offset:n=0,sanitize:r=!0}={}){return`SELECT * FROM (\n    ${r?V6(e):e}\n  ) LIMIT ${t} OFFSET ${n}`}function G6(e={}){const{logging:t=!1,initializationQuery:n="",dbPath:r=":memory:",bundles:i=b1(),...o}=e;let a=null,s=null,l=null;const u={async initializeInternal(){if(!globalThis.Worker)throw new Error("No Worker support in this environment");try{const e=i,n=await async function(e){let t=await k1();if(t.wasmExceptions){if(t.wasmSIMD&&t.wasmThreads&&t.crossOriginIsolated&&e.coi)return{mainModule:e.coi.mainModule,mainWorker:e.coi.mainWorker,pthreadWorker:e.coi.pthreadWorker};if(e.eh)return{mainModule:e.eh.mainModule,mainWorker:e.eh.mainWorker,pthreadWorker:null}}return{mainModule:e.mvp.mainModule,mainWorker:e.mvp.mainWorker,pthreadWorker:null}}(e);if(!n.mainWorker)throw new Error("No best bundle found for DuckDB worker");const u=new URL(n.mainWorker,globalThis.location.origin).href,c=URL.createObjectURL(new Blob([`importScripts("${u}");`],{type:"text/javascript"}));l=new window.Worker(c);const d=t?new n1:{log:()=>{}};a=new class extends p1{onError(e){super.onError(e)}}(d,l);const f=new URL(n.mainModule,globalThis.location.origin).href,p=n.pthreadWorker?new URL(n.pthreadWorker,globalThis.location.origin).href:void 0;await a.instantiate(f,p),URL.revokeObjectURL(c),await a.open({...o,path:o.path??r}),s=await a.connect()}catch(HOt){throw a=null,s=null,l=null,HOt}},async destroyInternal(){s&&(await s.close(),s=null),a&&(await a.terminate(),a=null),l&&(l.terminate(),l=null)},async executeQueryInternal(e,t){if(!a)throw new Error("DuckDB not initialized");if(t.aborted)throw new Error("Query aborted before execution");const n=await a.connect(),r=n.send(e,!0);let i=null;const o=async()=>{i=await r;const e=[];let t=0;for await(const n of i)0!==n.numRows&&(e.push(n),t+=n.numRows);return 0===t?function(e){const t={},n=Object.entries(e);for(const[r,i]of n)t[r]=yJ(i);return new EJ(t)}({}):new EJ(e)};let s;const l=new Promise((e,r)=>{s=()=>{var e;n.cancelSent().catch(()=>{}),null==(e=null==i?void 0:i.cancel)||e.call(i),r(new Error("Query cancelled"))},t.addEventListener("abort",s)});try{return await Promise.race([o(),l])}catch(F0){if(F0 instanceof Error){const n=I6(F0.message);if(null!==n&&"object"==typeof n&&"exception_message"in n)throw new Error(`${n.exception_type} ${n.error_subtype}: ${n.exception_message}\n${q6(e,Number(n.position)).formatted}`)}throw F0}finally{s&&t.removeEventListener("abort",s),await n.close()}},async cancelQueryInternal(){if(s)try{await s.cancelSent()}catch(HOt){}},async loadFileInternal(e,t,n){if(!s)throw new Error("DuckDB connection not initialized");await async function(e,t){if(!s||!a)throw new Error("DuckDB connection not initialized");let n,r;if(e instanceof File){const{ext:t}=function(e){const t=e.includes("\\")?"\\":"/",n=e.split(/[/\\]/),r=n.pop()||"",i=r.lastIndexOf(".");if(-1===i||0===i)return{dir:n.join(t),name:r,ext:"",filename:r};const o=r.substring(0,i),a=r.substring(i+1);return{dir:n.join(t),name:o,ext:a,filename:r}}(e.name);r=`${Math.random().toString(36).substring(2,15)}${t?`.${t}`:""}`,n=r,await a.registerFileHandle(n,e,h1.BROWSER_FILEREADER,!0)}else n=e;try{await t(n)}finally{r&&await a.dropFile(r)}}(e,async e=>{n&&bA(n)?await s.query(R6(t,e,n)):await s.query(D6((null==n?void 0:n.method)??"auto",t,e,n))})},async loadArrowInternal(e,t,n){if(!s)throw new Error("DuckDB connection not initialized");const r={name:t,schema:null==n?void 0:n.schema};e instanceof EJ?await s.insertArrowTable(e,r):await s.insertArrowFromIPCStream(e,r)},async loadObjectsInternal(e,t,n){if(!s)throw new Error("DuckDB connection not initialized");await s.query(M6(t,e,n))}};return{...L6({dbPath:r,initializationQuery:n},u),getDb(){if(!a)throw new Error("DuckDB not initialized");return a},getConnection(){if(!s)throw new Error("DuckDB connection not initialized");return s},get type(){return"wasm"}}}const Y6={string:[/^varchar/,/^char/,/^text/,/^string/,/^uuid/,/^bit/],number:[/^tinyint/,/^smallint/,/^integer/,/^bigint/,/^hugeint/,/^utinyint/,/^usmallint/,/^uinteger/,/^ubigint/,/^uhugeint/,/^decimal/,/^numeric/,/^double/,/^float/],boolean:[/^bool(ean)?/],binary:[/^blob/,/^bytea/,/^binary/,/^varbinary/],datetime:[/^date$/,/^time$/,/^timestamp$/,/^timestamptz$/,/^interval$/],json:[/^json$/],struct:[/^struct$/,/^list$/,/^map$/,/^array$/,/^union$/],geometry:[/^geometry/]};function K6(e){const t=e.toLowerCase();for(const[n,r]of Object.entries(Y6))if(r.some(e=>t.match(e)))return n}function Z6(e,t,n,r){return{key:`${e}.${t}.${n}`,object:{type:"column",name:n,columnType:r,columnTypeCategory:K6(r)}}}function Q6(e,t){return{key:`${e.schema}.${e.tableName}`,object:{type:"table",...e,name:e.tableName},isInitialOpen:!1,children:t}}function X6({connector:e=G6()}){return mT((t,n)=>({db:{connector:e,schema:"main",currentSchema:void 0,currentDatabase:void 0,isRefreshingTableSchemas:!1,tables:[],tableRowCounts:{},schemaTree:void 0,queryCache:{},setConnector:e=>{t(hT(t=>{t.config.dataSources=[],t.db.connector=e}))},initialize:async()=>{await n().db.connector.initialize(),await n().db.refreshTableSchemas()},getConnector:async()=>(await n().db.connector.initialize(),n().db.connector),destroy:async()=>{try{n().db.connector&&await n().db.connector.destroy()}catch(HOt){}},async createTableFromQuery(e,t){const r=j6(e)?e:B6({table:e}),i=await n().db.getConnector(),o=H6(t);if(1!==o.length)throw new Error("Query must contain exactly one statement");const a=o[0];if((await n().db.sqlSelectToJson(a)).error)throw new Error("Query is not a valid SELECT statement");return{tableName:e,rowCount:U6(await i.query(`CREATE OR REPLACE TABLE ${r} AS (\n              ${o[0]}\n            )`))}},getTables:async e=>(await n().db.loadTableSchemas({schema:e})).map(e=>e.table.table),getTableSchema:async(e,t="main")=>(await n().db.loadTableSchemas({schema:t,table:e}))[0],getTableRowCount:async(e,t="main")=>n().db.loadTableRowCount({table:e,schema:t}),async loadTableRowCount(e){const{schema:t,database:r,table:i}="string"==typeof e?{table:e}:e||{},o=await n().db.getConnector();return U6(await o.query(`SELECT COUNT(*) FROM ${B6({schema:t,database:r,table:i})}`))},getTableSchemas:async e=>await n().db.loadTableSchemas({schema:e}),async loadTableSchemas(t){var n,r,i,o,a,s,l,u,c;const{schema:d,database:f,table:p}=t||{},h=await e.query("WITH tables_and_views AS (\n              FROM duckdb_tables() SELECT\n                database_name AS database,\n                schema_name AS schema,\n                table_name AS name,\n                sql,\n                comment,\n                estimated_size,\n                FALSE AS isView\n              UNION\n              FROM duckdb_views() SELECT\n                database_name AS database,\n                schema_name AS schema,\n                view_name AS name,\n                sql,\n                comment,\n                NULL estimated_size,\n                TRUE AS isView\n            )\n            SELECT \n                isView,\n                database, schema,\n                name, column_names, column_types,\n                sql, comment,\n                estimated_size\n            FROM (DESCRIBE)\n            LEFT OUTER JOIN tables_and_views USING (database, schema, name) \n            "+(d||f||p?`WHERE ${[d?`schema = '${z6(d)}'`:"",f?`database = '${z6(f)}'`:"",p?`name = '${z6(p)}'`:""].filter(Boolean).join(" AND ")}`:"")),m=[];for(let e=0;e<h.numRows;e++){const t=null==(n=h.getChild("isView"))?void 0:n.get(e),d=null==(r=h.getChild("database"))?void 0:r.get(e),f=null==(i=h.getChild("schema"))?void 0:i.get(e),p=null==(o=h.getChild("name"))?void 0:o.get(e),g=null==(a=h.getChild("sql"))?void 0:a.get(e),y=null==(s=h.getChild("comment"))?void 0:s.get(e),v=null==(l=h.getChild("estimated_size"))?void 0:l.get(e),b=null==(u=h.getChild("column_names"))?void 0:u.get(e),w=null==(c=h.getChild("column_types"))?void 0:c.get(e),_=[];for(let e=0;e<b.length;e++)_.push({name:b.get(e),type:w.get(e)});m.push({table:B6({database:d,schema:f,table:p}),database:d,schema:f,tableName:p,columns:_,sql:g,comment:y,isView:Boolean(t),rowCount:"bigint"==typeof v?Number(v):null===v?void 0:v})}return m},async checkTableExists(e){const t=j6(e)?e:B6({table:e});return!!(await n().db.loadTableSchemas(t))[0]},async dropTable(e){const t=await n().db.getConnector(),r=j6(e)?e:B6({table:e});await t.query(`DROP TABLE IF EXISTS ${r};`),await n().db.refreshTableSchemas()},async addTable(e,r){const i=j6(e)?e:B6({table:e}),{db:o}=n();r instanceof EJ?await o.connector.loadArrow(r,i.toString()):await o.connector.loadObjects(r,i.toString(),{replace:!0});const a=(await o.loadTableSchemas(i))[0];if(!a)throw new Error("Failed to add table");return t(e=>hT(e,e=>{e.db.tables.push(a)})),await n().db.refreshTableSchemas(),a},async setTableRowCount(e,n){const r=j6(e)?e:B6({table:e});t(e=>hT(e,e=>{e.db.tableRowCounts[r.toString()]=n}))},getTable:e=>n().db.findTableByName(e),findTableByName(e){const{table:t,schema:r,database:i}={schema:n().db.currentSchema,database:n().db.currentDatabase,..."string"==typeof e?{table:e}:e};return n().db.tables.find(e=>!(e.table.table!==t||r&&e.table.schema!==r||i&&e.table.database!==i))},async refreshTableSchemas(){t(e=>hT(e,e=>{e.db.isRefreshingTableSchemas=!0}));try{const e=await n().db.getConnector(),r=await e.query("SELECT current_schema() AS schema, current_database() AS database");t(e=>hT(e,e=>{var t,n;e.db.currentSchema=null==(t=r.getChild("schema"))?void 0:t.get(0),e.db.currentDatabase=null==(n=r.getChild("database"))?void 0:n.get(0)}));const i=await n().db.loadTableSchemas();return Ej(i,n().db.tables)||t(e=>hT(e,e=>{e.db.tables=i,e.db.schemaTrees=function(e){var t;const n=new Map;for(const r of e){const e=r.database??"default",i=r.schema,o=r.tableName,a=r.columns.map(e=>Z6(i,o,e.name,e.type)),s=Q6(r,a);n.has(e)||n.set(e,new Map);const l=n.get(e);l.has(i)||l.set(i,[]),null==(t=l.get(i))||t.push(s)}return Array.from(n.entries()).map(([e,t])=>{const n=Array.from(t.entries()).map(([e,t])=>function(e,t){return{key:e,object:{type:"schema",name:e},isInitialOpen:!0,children:t}}(e,t));return function(e,t){return{key:e,object:{type:"database",name:e},isInitialOpen:!0,children:t}}(e,n)})}(i)})),i}catch(HOt){return n().room.captureException(HOt),[]}finally{t(e=>hT(e,e=>{e.db.isRefreshingTableSchemas=!1}))}},async sqlSelectToJson(e){var t;const r=await n().db.getConnector(),i=null==(t=(await r.query(`SELECT json_serialize_sql(${$6(e)})`)).getChildAt(0))?void 0:t.get(0);return JSON.parse(i)},async executeSql(e){const r=`${e}`,i=await n().db.getConnector(),o=n().db.queryCache[r];if(o)return o;const a=i.query(e);return t(e=>hT(e,e=>{e.db.queryCache[r]=a})),a.result.finally(()=>{t(e=>hT(e,e=>{delete e.db.queryCache[r]}))}),a}}}))}function J6(e){return xk(t=>e(t))}function e8(){const e=J6(e=>e.db.getConnector);return{exportToCsv:async(t,n,r=1e5)=>{const i=await e();let o=0;const a=[];let s=!1;for(;;){const e=`(\n          ${t}\n        ) LIMIT ${r} OFFSET ${o}`,n=await i.query(e);if(0===n.numRows)break;const l=t8(n,!s);a.push(new Blob([l],{type:"text/csv"})),s=!0,o+=r}!function(e,t){const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),URL.revokeObjectURL(n),document.body.removeChild(r)}(new Blob(a,{type:"text/csv"}),n)}}}function t8(e,t){const n=e.schema.fields.map(e=>e.name),r=n.reduce((t,n)=>{const r=e.getChild(n);return r&&(t[n]=r),t},{});let i=t?n.join(",")+"\r\n":"";for(let o=0;o<e.numRows;o++){i+=n.map(e=>{var t;const n=null==(t=r[e])?void 0:t.get(o);if(null==n)return"";let i=String(n);return(i.includes('"')||i.includes(",")||i.includes("\n"))&&(i='"'+i.replace(/"/g,'""')+'"'),i}).join(",")+"\r\n"}return i}function n8(e){return e.toArray().map(e=>Object.fromEntries(Object.entries(e).map(([e,t])=>[e,r8(t)])))}function r8(e){return"bigint"==typeof e?e>=Number.MIN_SAFE_INTEGER&&e<=Number.MAX_SAFE_INTEGER?Number(e):String(e):"number"==typeof e?e:String(e)}function i8(e,t){const n=void 0!==t,r=n?t:e,i=n?e:void 0,[o,a]=k.useState(void 0),[s,l]=k.useState(null),[u,c]=k.useState(!1),d=J6(e=>e.db.executeSql);return k.useEffect(()=>{let e=!0;return(async()=>{if(r.enabled||void 0===r.enabled){c(!0),l(null);try{const t=await d(r.query);if(!t||!e)return;const n=await t;if(!e)return;const o=F6({arrowTable:n,validate:i?e=>i.parse(e):void 0});a({...o,arrowTable:n})}catch(HOt){e&&l(HOt instanceof Error?HOt:new Error(String(HOt)))}finally{e&&c(!1)}}})(),()=>{e=!1}},[r.query,r.enabled,d]),{data:o,error:s,isLoading:u}}var o8,a8;oA({db:oA({}).optional()}),(a8=o8||(o8={})).PENDING="PENDING",a8.FETCHING="FETCHING",a8.READY="READY",a8.ERROR="ERROR";const s8={title:"",layout:OA,description:"",dataSources:[],db:{},layout:OA},l8="download-data-sources",u8="init-db",c8="init-room";function d8(e){return(t,n,r)=>{const{connector:i,config:o,room:a,...s}=e,l={...s8,...o},u={CustomErrorBoundary:gf,roomFiles:[],roomFilesProgress:{},isDataAvailable:!1,dataSourceStates:{},...a},c=function(e){const{config:t,room:n,...r}=e,i={...n,initialized:!1,lastSavedConfig:void 0,tasksProgress:{},captureException:e=>{}};return(e,n)=>({config:t,room:{...i,initialize:async()=>{},setRoomConfig:t=>e(e=>hT(e,e=>{e.config=t})),setLastSavedConfig:t=>e(e=>hT(e,e=>{e.room.lastSavedConfig=t})),hasUnsavedChanges:()=>{const{lastSavedConfig:e}=n().room,{config:t}=n();return t!==e},getLoadingProgress(){const{tasksProgress:e}=n().room,t=Object.keys(e),r=t[t.length-1];if(r)return e[r]},setTaskProgress(t,n){e(e=>hT(e,e=>{n?e.room.tasksProgress[t]=n:delete e.room.tasksProgress[t]}))}},...r})}({config:l,room:u})(t,n,r),d={...c,...X6({connector:i})(t,n,r),...tW({panels:a.panels})(t,n,r),room:{...u,...c.room,async initialize(){await c.room.initialize();const{setTaskProgress:e}=n().room;e(u8,{message:"Initializing database…",progress:void 0}),await n().db.initialize(),e(u8,void 0),e(c8,{message:"Loading data sources…",progress:void 0}),await f(),await p();const t=Object.entries(r.getState()).filter(([e,t])=>"room"!==e&&"db"!==e&&gT(t));for(const[n,r]of t)gT(r)&&await r.initialize();const i=r.getState();gT(i)&&await i.initialize(),e(c8,void 0)},setRoomConfig:e=>t(t=>hT(t,t=>{t.config=e})),setLastSavedConfig:e=>t(t=>hT(t,t=>{t.room.lastSavedConfig=e})),hasUnsavedChanges:()=>{const{lastSavedConfig:e}=n().room,{config:t}=n();return t!==e},setRoomTitle:e=>t(t=>hT(t,t=>{t.config.title=e})),setDescription:e=>t(t=>hT(t,t=>{t.config.description=e})),addDataSource:async(e,n=o8.PENDING)=>{t(t=>hT(t,t=>{const r=t.config.dataSources,i=e.tableName,o=r.findIndex(e=>e.tableName===i);o>=0?r[o]=e:r.push(e),t.room.dataSourceStates[i]={status:n}})),await p()},async addOrUpdateSqlQueryDataSource(e,r,i){const{schema:o}=n().db,{db:a}=n(),s=e!==i?(l=e,u=await a.getTables(o),A6(C6(l),u)):e;var l,u;const{rowCount:c}=await a.createTableFromQuery(s,r);n().db.setTableRowCount(s,c),t(e=>hT(e,e=>{const t={type:xA.enum.sql,sqlQuery:r,tableName:s};i?(e.config.dataSources=e.config.dataSources.map(e=>e.tableName===i?t:e),delete e.room.dataSourceStates[i]):e.config.dataSources.push(t),e.room.dataSourceStates[s]={status:o8.READY}})),await n().db.refreshTableSchemas()},setRoomFiles:e=>t(t=>hT(t,t=>{t.room.roomFiles=e})),async addRoomFile(e,r,i){const{db:o}=n(),a=e instanceof File?e.name:e,s=r??C6(a);return await o.connector.loadFile(e,s,i),t(t=>hT(t,t=>{t.room.roomFiles.push({pathname:a,duckdbFileName:a,size:e instanceof File?e.size:void 0,file:e instanceof File?e:void 0})})),await n().room.addDataSource({type:xA.enum.file,fileName:a,tableName:s},o8.READY),await n().db.refreshTableSchemas(),t(e=>hT(e,e=>{Object.values(n().room.dataSourceStates).every(e=>e.status===o8.READY)&&(e.room.isDataAvailable=!0)})),n().db.findTableByName(s)},removeSqlQueryDataSource:async e=>{await n().room.removeDataSource(e)},removeDataSource:async e=>{const{db:r}=n(),i=n().config.dataSources.find(t=>t.tableName===e);i&&(t(t=>hT(t,t=>{t.config.dataSources=t.config.dataSources.filter(t=>t.tableName!==e),(null==i?void 0:i.type)===xA.Enum.file&&(t.room.roomFiles=t.room.roomFiles.filter(e=>e.pathname!==i.fileName)),delete t.room.dataSourceStates[e]})),await r.dropTable(e),await r.refreshTableSchemas())},removeRoomFile:async e=>{const t=n().config.dataSources.find(t=>t.type===xA.Enum.file&&t.fileName===e);t&&await n().room.removeDataSource(t.tableName)},setRoomFileProgress(e,n){t(t=>hT(t,t=>{t.room.roomFilesProgress[e]=n;const r=t.room.roomFiles.find(t=>t.pathname===e);r&&void 0===r.size&&"error"!==n.status&&n.progress&&(r.size=n.progress.total)}))},areDatasetsReady:()=>{const{dataSourceStates:e}=n().room,{config:t}=n();return t.dataSources.every(t=>{var n;return(null==(n=e[t.tableName])?void 0:n.status)===o8.READY})}},...s};async function f(){const{tables:e}=n().db,{dataSourceStates:r}=n().room,{config:i}=n(),{dataSources:o}=i;t(t=>hT(t,t=>{var n;for(const i of o){const o=i.tableName,a=e.find(e=>e.tableName===o);a?t.room.dataSourceStates[o]={status:o8.READY}:(null==(n=r[o])?void 0:n.status)||(t.room.dataSourceStates[o]={status:o8.PENDING})}}))}async function p(){const{roomFilesProgress:e,dataSourceStates:r}=n().room,{dataSources:i}=n().config,o=i.filter(e=>{var t;return!r[e.tableName]||(null==(t=r[e.tableName])?void 0:t.status)===o8.PENDING}),a=o.filter(t=>{switch(t.type){case xA.Enum.file:return!e[t.fileName];case xA.Enum.url:return!e[t.url];default:return!1}});a.length>0&&await async function(e){if(!e.length)return;const{setTableRowCount:r}=n().db,{captureException:i,setTaskProgress:o,setRoomFileProgress:a}=n().room;e.forEach(e=>{const n=e.type===xA.Enum.file?e.fileName:e.url;t(e=>hT(e,e=>{const t={duckdbFileName:n,pathname:n,file:void 0,size:void 0},r=e.room.roomFiles.findIndex(e=>e.pathname===n);r>=0?e.room.roomFiles[r]=t:e.room.roomFiles.push(t)})),a(n,{status:"download"})}),e.length>0&&h();const s=await Promise.all(e.map(async e=>{const t=e.type===xA.Enum.file?e.fileName:e.url,s=e=>{a(t,{status:"download",progress:e}),h()};try{let i;switch(e.type){case xA.Enum.file:{const{fileDataSourceLoader:t}=n().room;if(!t)throw new Error("fileDataSourceLoader is not defined");i=await t(e,s);break}case xA.Enum.url:{const t=e.url;i=await async function(e,t={}){const{method:n="GET",headers:r={},onProgress:i}=t;return await new Promise((t,o)=>{const a=new XMLHttpRequest;a.open(n,e,!0),a.responseType="arraybuffer",Object.keys(r).map(e=>{r[e]&&a.setRequestHeader(e,r[e])}),a.onload=()=>t(new Uint8Array(a.response)),a.onreadystatechange=()=>{a.readyState===XMLHttpRequest.DONE&&(a.status>=200&&a.status<300||o({status:a.status,error:"File download failed"}))},a.onerror=()=>o({status:a.status,error:"File download failed"}),i&&(a.onprogress=e=>{const{lengthComputable:t,loaded:n,total:r}=e;t&&i({loaded:n,total:r,ratio:r?n/r:0})}),a.send(null)})}(t,{...e.type===xA.Enum.url&&{method:e.httpMethod,headers:e.headers},onProgress:s});break}}a(t,{status:"done"}),h();const{db:o}=n();await o.connector.loadFile(i instanceof File?i:new File([i],t),e.tableName,e.loadOptions),r(e.tableName,await o.getTableRowCount(e.tableName))}catch(HOt){i(HOt),a(t,{status:"error",message:"Download failed"})}finally{o(l8,void 0)}}));s.length&&await n().db.refreshTableSchemas()}(a);const s=o.filter(e=>e.type===xA.Enum.sql);s.length>0&&await async function(e){for(const r of e)try{const{tableName:e,sqlQuery:i}=r;t(t=>hT(t,t=>{t.room.dataSourceStates[e]={status:o8.FETCHING}}));const{rowCount:o}=await n().db.createTableFromQuery(e,i);n().db.setTableRowCount(e,o),t(t=>hT(t,t=>{t.room.dataSourceStates[e]={status:o8.READY}}))}catch(HOt){t(t=>hT(t,t=>{t.room.dataSourceStates[r.tableName]={status:o8.ERROR,message:`${HOt}`}}))}await n().db.refreshTableSchemas(),await f()}(s),n().config.dataSources.length>0&&t(e=>hT(e,e=>{e.room.isDataAvailable=!0}))}function h(){var e,t;const{setTaskProgress:r,roomFilesProgress:i}=n().room;let o=0,a=0;for(const n of Object.values(i))"download"!==n.status&&"done"!==n.status||(o+=(null==(e=n.progress)?void 0:e.total)||0,a+=(null==(t=n.progress)?void 0:t.loaded)||0);r(l8,{progress:o>0?Math.round(a/o*100):void 0,message:"Downloading data…"})}return r.subscribe((e,t)=>{e.db.tables!==t.db.tables&&f()}),d}}function f8(e){return xk(e)}function p8(e){return(t,n,r)=>e(t,n,r)}const h8=({className:e,title:t,isSelected:n,isDisabled:r=!1,icon:i,onClick:o})=>w.jsxs(qx,{children:[w.jsx(Hx,{asChild:!0,children:w.jsx(er,{variant:"ghost",size:"icon",className:zn("h-10 w-10 rounded-none",n?"bg-secondary":"hover:bg-secondary/50",e),disabled:r,onClick:o,children:i?w.jsx(i,{className:"h-5 w-5"}):t})}),w.jsx(Vx,{side:"right",children:w.jsx("p",{children:t})})]}),m8=({roomPanelType:e})=>{const t=f8(e=>e.room.initialized),n=f8(e=>e.config.layout),r=f8(e=>e.layout.panels),i=k.useMemo(()=>function(e=OA.nodes){const t=[];return e&&QV(e,e=>{t.push(e)}),t}(null==n?void 0:n.nodes),[n]),o=f8(e=>e.layout.togglePanel),{icon:a,title:s}=r[e]??{};return w.jsx(h8,{title:s??"",isSelected:i.includes(e),isDisabled:!t,icon:a??(()=>null),onClick:()=>o(e)},e)},g8=({className:e})=>{const t=f8(e=>e.layout.panels);return w.jsxs("div",{className:zn("flex h-full grow flex-col",e),children:[w.jsx("div",{className:"flex flex-col gap-2",children:t?Object.keys(t).filter(e=>{var n;return"sidebar"===(null==(n=t[e])?void 0:n.placement)}).map(e=>w.jsx(m8,{roomPanelType:e},e)):null}),w.jsx("div",{className:"flex-1"}),w.jsx("div",{className:"flex flex-col gap-2",children:Object.keys(t).filter(e=>{var n;return"sidebar-bottom"===(null==(n=t[e])?void 0:n.placement)}).map(e=>w.jsx(m8,{roomPanelType:e},e))})]})};const y8=Object.assign(function({className:e,children:t,roomStore:n}){return w.jsx(_k,{roomStore:n,children:w.jsx("div",{className:zn("flex h-full w-full",e),children:w.jsx(gf,{children:w.jsxs(k.Suspense,{fallback:w.jsx(rw,{h:"100%"}),children:[w.jsx(Ux,{children:t}),w.jsx(V_,{})]})})})})},{Sidebar:({className:e,children:t})=>w.jsxs("div",{className:zn("bg-muted/70 flex h-full w-12 flex-col items-center px-1 py-4",e),children:[w.jsx(g8,{}),t]}),SidebarButton:h8,LayoutComposer:({className:e,tileClassName:t})=>{const n=f8(e=>e.config.layout),r=f8(e=>e.layout.setLayout),i=f8(e=>e.layout.panels),o=f8(e=>e.room.CustomErrorBoundary),a=k.useCallback(e=>{r({...n,nodes:e})},[r,n]);return w.jsx("div",{className:zn("flex h-full w-full flex-grow flex-col items-stretch",e),children:n?w.jsx(eW,{renderTile:e=>{var t;const n=e&&(null==(t=i[e])?void 0:t.component);return n?w.jsx(o,{children:w.jsx(n,{})},e):null},value:n.nodes,onChange:a,tileClassName:t}):null})},LoadingProgress:({className:e})=>{const t=f8(e=>e.room.getLoadingProgress());return w.jsx(Xh,{className:e,isOpen:void 0!==t,title:"Loading",loadingStage:null==t?void 0:t.message,indeterminate:!0})}}),v8=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},b8=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim(),w8=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var _8={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},l)=>k.createElement("svg",{ref:l,..._8,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:b8("lucide",i),...!o&&!w8(s)&&{"aria-hidden":"true"},...s},[...a.map(([e,t])=>k.createElement(e,t)),...Array.isArray(o)?o:[o]])),E8=(e,t)=>{const n=k.forwardRef(({className:n,...r},i)=>{return k.createElement(x8,{ref:i,iconNode:t,className:b8(`lucide-${o=v8(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,n),...r});var o});return n.displayName=v8(e),n},S8=E8("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),k8=E8("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),T8=E8("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),C8=E8("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),A8=E8("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),I8=E8("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]),O8=E8("clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]),N8=E8("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);
/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function D8(e,t){return"function"==typeof e?e(t):e}function R8(e,t){return n=>{t.setState(t=>({...t,[e]:D8(n,t[e])}))}}function M8(e){return e instanceof Function}function P8(e,t,n){let r,i=[];return o=>{let a;n.key&&n.debug&&(a=Date.now());const s=e(o);if(!(s.length!==i.length||s.some((e,t)=>i[t]!==e)))return r;let l;if(i=s,n.key&&n.debug&&(l=Date.now()),r=t(...s),null==n||null==n.onChange||n.onChange(r),n.key&&n.debug&&null!=n&&n.debug()){Math.round(100*(Date.now()-a)),Math.round(100*(Date.now()-l))}return r}}function F8(e,t,n,r){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:r}}const L8="debugHeaders";function j8(e,t,n){var r;let i={id:null!=(r=n.id)?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(i),e},getContext:()=>({table:e,header:i,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(i,e)}),i}const B8={createTable:e=>{e.getHeaderGroups=P8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var o,a;const s=null!=(o=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[],l=null!=(a=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?a:[];return $8(t,[...s,...n.filter(e=>!(null!=r&&r.includes(e.id)||null!=i&&i.includes(e.id))),...l],e)},F8(e.options,L8)),e.getCenterHeaderGroups=P8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>$8(t,n=n.filter(e=>!(null!=r&&r.includes(e.id)||null!=i&&i.includes(e.id))),e,"center"),F8(e.options,L8)),e.getLeftHeaderGroups=P8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;return $8(t,null!=(i=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[],e,"left")},F8(e.options,L8)),e.getRightHeaderGroups=P8(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;return $8(t,null!=(i=null==r?void 0:r.map(e=>n.find(t=>t.id===e)).filter(Boolean))?i:[],e,"right")},F8(e.options,L8)),e.getFooterGroups=P8(()=>[e.getHeaderGroups()],e=>[...e].reverse(),F8(e.options,L8)),e.getLeftFooterGroups=P8(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),F8(e.options,L8)),e.getCenterFooterGroups=P8(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),F8(e.options,L8)),e.getRightFooterGroups=P8(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),F8(e.options,L8)),e.getFlatHeaders=P8(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),F8(e.options,L8)),e.getLeftFlatHeaders=P8(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),F8(e.options,L8)),e.getCenterFlatHeaders=P8(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),F8(e.options,L8)),e.getRightFlatHeaders=P8(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),F8(e.options,L8)),e.getCenterLeafHeaders=P8(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),F8(e.options,L8)),e.getLeftLeafHeaders=P8(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),F8(e.options,L8)),e.getRightLeafHeaders=P8(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),F8(e.options,L8)),e.getLeafHeaders=P8(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var r,i,o,a,s,l;return[...null!=(r=null==(i=e[0])?void 0:i.headers)?r:[],...null!=(o=null==(a=t[0])?void 0:a.headers)?o:[],...null!=(s=null==(l=n[0])?void 0:l.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},F8(e.options,L8))}};function $8(e,t,n,r){var i,o;let a=0;const s=function(e,t){void 0===t&&(t=1),a=Math.max(a,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let l=[];const u=(e,t)=>{const i={depth:t,id:[r,`${t}`].filter(Boolean).join("_"),headers:[]},o=[];e.forEach(e=>{const a=[...o].reverse()[0];let s,l=!1;if(e.column.depth===i.depth&&e.column.parent?s=e.column.parent:(s=e.column,l=!0),a&&(null==a?void 0:a.column)===s)a.subHeaders.push(e);else{const i=j8(n,s,{id:[r,t,s.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:l,placeholderId:l?`${o.filter(e=>e.column===s).length}`:void 0,depth:t,index:o.length});i.subHeaders.push(e),o.push(i)}i.headers.push(e),e.headerGroup=i}),l.push(i),t>0&&u(o,t-1)},c=t.map((e,t)=>j8(n,e,{depth:a,index:t}));u(c,a-1),l.reverse();const d=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,r=[0];e.subHeaders&&e.subHeaders.length?(r=[],d(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:i}=e;t+=n,r.push(i)})):t=1;return n+=Math.min(...r),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return d(null!=(i=null==(o=l[0])?void 0:o.headers)?i:[]),l}const z8=(e,t,n,r,i,o,a)=>{let s={id:t,index:r,original:n,depth:i,parentId:a,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?(s._valuesCache[t]=n.accessorFn(s.original,r),s._valuesCache[t]):void 0},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];const n=e.getColumn(t);return null!=n&&n.accessorFn?n.columnDef.getUniqueValues?(s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,r),s._uniqueValuesCache[t]):(s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]):void 0},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:[],getLeafRows:()=>function(e,t){const n=[],r=e=>{e.forEach(e=>{n.push(e);const i=t(e);null!=i&&i.length&&r(i)})};return r(e),n}(s.subRows,e=>e.subRows),getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){const n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:P8(()=>[e.getAllLeafColumns()],t=>t.map(t=>function(e,t,n,r){const i={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:P8(()=>[e,n,t,i],(e,t,n,r)=>({table:e,column:t,row:n,cell:r,getValue:r.getValue,renderValue:r.renderValue}),F8(e.options,"debugCells"))};return e._features.forEach(r=>{null==r.createCell||r.createCell(i,n,t,e)},{}),i}(e,s,t,t.id)),F8(e.options,"debugRows")),_getAllCellsByColumnId:P8(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),F8(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const t=e._features[l];null==t||null==t.createRow||t.createRow(s,e)}return s},U8={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},q8=(e,t,n)=>{var r,i;const o=null==n||null==(r=n.toString())?void 0:r.toLowerCase();return Boolean(null==(i=e.getValue(t))||null==(i=i.toString())||null==(i=i.toLowerCase())?void 0:i.includes(o))};q8.autoRemove=e=>J8(e);const H8=(e,t,n)=>{var r;return Boolean(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.includes(n))};H8.autoRemove=e=>J8(e);const V8=(e,t,n)=>{var r;return(null==(r=e.getValue(t))||null==(r=r.toString())?void 0:r.toLowerCase())===(null==n?void 0:n.toLowerCase())};V8.autoRemove=e=>J8(e);const W8=(e,t,n)=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)};W8.autoRemove=e=>J8(e);const G8=(e,t,n)=>!n.some(n=>{var r;return!(null!=(r=e.getValue(t))&&r.includes(n))});G8.autoRemove=e=>J8(e)||!(null!=e&&e.length);const Y8=(e,t,n)=>n.some(n=>{var r;return null==(r=e.getValue(t))?void 0:r.includes(n)});Y8.autoRemove=e=>J8(e)||!(null!=e&&e.length);const K8=(e,t,n)=>e.getValue(t)===n;K8.autoRemove=e=>J8(e);const Z8=(e,t,n)=>e.getValue(t)==n;Z8.autoRemove=e=>J8(e);const Q8=(e,t,n)=>{let[r,i]=n;const o=e.getValue(t);return o>=r&&o<=i};Q8.resolveFilterValue=e=>{let[t,n]=e,r="number"!=typeof t?parseFloat(t):t,i="number"!=typeof n?parseFloat(n):n,o=null===t||Number.isNaN(r)?-1/0:r,a=null===n||Number.isNaN(i)?1/0:i;if(o>a){const e=o;o=a,a=e}return[o,a]},Q8.autoRemove=e=>J8(e)||J8(e[0])&&J8(e[1]);const X8={includesString:q8,includesStringSensitive:H8,equalsString:V8,arrIncludes:W8,arrIncludesAll:G8,arrIncludesSome:Y8,equals:K8,weakEquals:Z8,inNumberRange:Q8};function J8(e){return null==e||""===e}const e9={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:R8("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"string"==typeof r?X8.includesString:"number"==typeof r?X8.inNumberRange:"boolean"==typeof r||null!==r&&"object"==typeof r?X8.equals:Array.isArray(r)?X8.arrIncludes:X8.weakEquals},e.getFilterFn=()=>{var n,r;return M8(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(r=t.options.filterFns)?void 0:r[e.columnDef.filterFn])?n:X8[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(r=t.options.enableColumnFilters)||r)&&(null==(i=t.options.enableFilters)||i)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,r;return null!=(n=null==(r=t.getState().columnFilters)?void 0:r.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{const r=e.getFilterFn(),i=null==t?void 0:t.find(t=>t.id===e.id),o=D8(n,i?i.value:void 0);var a;if(t9(r,o,e))return null!=(a=null==t?void 0:t.filter(t=>t.id!==e.id))?a:[];const s={id:e.id,value:o};var l;return i?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?s:t))?l:[]:null!=t&&t.length?[...t,s]:[s]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var r;return null==(r=D8(t,e))?void 0:r.filter(e=>{const t=n.find(t=>t.id===e.id);if(t){if(t9(t.getFilterFn(),e.value,t))return!1}return!0})})},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function t9(e,t,n){return!(!e||!e.autoRemove)&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}const n9={sum:(e,t,n)=>n.reduce((t,n)=>{const r=n.getValue(e);return t+("number"==typeof r?r:0)},0),min:(e,t,n)=>{let r;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(r>n||void 0===r&&n>=n)&&(r=n)}),r},max:(e,t,n)=>{let r;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(r<n||void 0===r&&n>=n)&&(r=n)}),r},extent:(e,t,n)=>{let r,i;return n.forEach(t=>{const n=t.getValue(e);null!=n&&(void 0===r?n>=n&&(r=i=n):(r>n&&(r=n),i<n&&(i=n)))}),[r,i]},mean:(e,t)=>{let n=0,r=0;if(t.forEach(t=>{let i=t.getValue(e);null!=i&&(i=+i)>=i&&(++n,r+=i)}),n)return r/n},median:(e,t)=>{if(!t.length)return;const n=t.map(t=>t.getValue(e));if(r=n,!Array.isArray(r)||!r.every(e=>"number"==typeof e))return;var r;if(1===n.length)return n[0];const i=Math.floor(n.length/2),o=n.sort((e,t)=>e-t);return n.length%2!=0?o[i]:(o[i-1]+o[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},r9={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:R8("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,r;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(r=t.options.enableGrouping)||r)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=null==n?void 0:n.getValue(e.id);return"number"==typeof r?n9.sum:"[object Date]"===Object.prototype.toString.call(r)?n9.extent:void 0},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return M8(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(r=t.options.aggregationFns)?void 0:r[e.columnDef.aggregationFn])?n:n9[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return null!=r&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!(null==(t=n.subRows)||!t.length)}}};const i9={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:R8("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=P8(e=>[d9(t,e)],t=>t.findIndex(t=>t.id===e.id),F8(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return(null==(r=d9(t,n)[0])?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=d9(t,n);return(null==(r=i[i.length-1])?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=P8(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>r=>{let i=[];if(null!=e&&e.length){const t=[...e],n=[...r];for(;n.length&&t.length;){const e=t.shift(),r=n.findIndex(t=>t.id===e);r>-1&&i.push(n.splice(r,1)[0])}i=[...i,...n]}else i=r;return function(e,t,n){if(null==t||!t.length||!n)return e;const r=e.filter(e=>!t.includes(e.id));return"remove"===n?r:[...t.map(t=>e.find(e=>e.id===t)).filter(Boolean),...r]}(i,t,n)},F8(e.options,"debugTable"))}},o9={getInitialState:e=>({columnPinning:{left:[],right:[]},...e}),getDefaultOptions:e=>({onColumnPinningChange:R8("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,i,o,a,s,l;return"right"===n?{left:(null!=(o=null==e?void 0:e.left)?o:[]).filter(e=>!(null!=r&&r.includes(e))),right:[...(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=r&&r.includes(e))),...r]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=r&&r.includes(e))),...r],right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=r&&r.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=r&&r.includes(e))),right:(null!=(i=null==e?void 0:e.right)?i:[]).filter(e=>!(null!=r&&r.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,r,i;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(r=null!=(i=t.options.enableColumnPinning)?i:t.options.enablePinning)||r)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(e=>e.id),{left:r,right:i}=t.getState().columnPinning,o=n.some(e=>null==r?void 0:r.includes(e)),a=n.some(e=>null==i?void 0:i.includes(e));return o?"left":!!a&&"right"},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?null!=(n=null==(r=t.getState().columnPinning)||null==(r=r[i])?void 0:r.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=P8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.column.id))},F8(t.options,"debugRows")),e.getLeftVisibleCells=P8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),F8(t.options,"debugRows")),e.getRightVisibleCells=P8(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),F8(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?{left:[],right:[]}:null!=(n=null==(r=e.initialState)?void 0:r.columnPinning)?n:{left:[],right:[]})},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;var i,o;return t?Boolean(null==(n=r[t])?void 0:n.length):Boolean((null==(i=r.left)?void 0:i.length)||(null==(o=r.right)?void 0:o.length))},e.getLeftLeafColumns=P8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),F8(e.options,"debugColumns")),e.getRightLeafColumns=P8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),F8(e.options,"debugColumns")),e.getCenterLeafColumns=P8(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{const r=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!r.includes(e.id))},F8(e.options,"debugColumns"))}};const a9={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},s9={getDefaultColumnDef:()=>a9,getInitialState:e=>({columnSizing:{},columnSizingInfo:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]},...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:R8("columnSizing",e),onColumnSizingInfoChange:R8("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const o=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:a9.minSize,null!=(r=null!=o?o:e.columnDef.size)?r:a9.size),null!=(i=e.columnDef.maxSize)?i:a9.maxSize)},e.getStart=P8(e=>[e,d9(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),F8(t.options,"debugColumns")),e.getAfter=P8(e=>[e,d9(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),F8(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...r}=t;return r})},e.getCanResize=()=>{var n,r;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(r=t.options.enableColumnResizing)||r)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0;const n=e=>{var r;e.subHeaders.length?e.subHeaders.forEach(n):t+=null!=(r=e.column.getSize())?r:0};return n(e),t},e.getStart=()=>{if(e.index>0){const t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=null==r?void 0:r.getCanResize();return o=>{if(!r||!i)return;if(null==o.persist||o.persist(),u9(o)&&o.touches&&o.touches.length>1)return;const a=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[r.id,r.getSize()]],l=u9(o)?Math.round(o.touches[0].clientX):o.clientX,u={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var r,i;const o="rtl"===t.options.columnResizeDirection?-1:1,a=(n-(null!=(r=null==e?void 0:e.startOffset)?r:0))*o,s=Math.max(a/(null!=(i=null==e?void 0:e.startSize)?i:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;u[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:a,deltaPercentage:s}}),"onChange"!==t.options.columnResizeMode&&"end"!==e||t.setColumnSizing(e=>({...e,...u})))},d=e=>c("move",e),f=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null);const h={moveHandler:e=>d(e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",h.moveHandler),null==p||p.removeEventListener("mouseup",h.upHandler),f(e.clientX)}},m={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),d(e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",m.moveHandler),null==p||p.removeEventListener("touchend",m.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),f(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof l9)return l9;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch(HOt){e=!1}return l9=e,l9}()&&{passive:!1};u9(o)?(null==p||p.addEventListener("touchmove",m.moveHandler,g),null==p||p.addEventListener("touchend",m.upHandler,g)):(null==p||p.addEventListener("mousemove",h.moveHandler,g),null==p||p.addEventListener("mouseup",h.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:l,startSize:a,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}:null!=(n=e.initialState.columnSizingInfo)?n:{startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]})},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}};let l9=null;function u9(e){return"touchstart"===e.type}const c9={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:R8("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return null==(n=i.length?i.some(e=>e.getIsVisible()):null==(r=t.getState().columnVisibility)?void 0:r[e.id])||n},e.getCanHide=()=>{var n,r;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(r=t.options.enableHiding)||r)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=P8(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),F8(t.options,"debugRows")),e.getVisibleCells=P8(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],F8(t.options,"debugRows"))},createTable:e=>{const t=(t,n)=>P8(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),F8(e.options,"debugColumns"));e.getVisibleFlatColumns=t(0,()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t(0,()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t(0,()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t(0,()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t(0,()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}};function d9(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const f9={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:R8("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(t){if(null!=(r=null!=(i=e.options.autoResetAll)?i:e.options.autoResetExpanded)?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}}else e._queue(()=>{t=!0})},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,r;e.setExpanded(t?{}:null!=(n=null==(r=e.initialState)?void 0:r.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{const t=e.getState().expanded;return"boolean"==typeof t?!0===t:!!Object.keys(t).length&&!e.getRowModel().flatRows.some(e=>!e.getIsExpanded())},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{const n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const o=!0===r||!(null==r||!r[e.id]);let a={};if(!0===r?Object.keys(t.getRowModel().rowsById).forEach(e=>{a[e]=!0}):a=r,n=null!=(i=n)?i:!o,!o&&n)return{...a,[e.id]:!0};if(o&&!n){const{[e.id]:t,...n}=a;return n}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===r||(null==r?void 0:r[e.id]))},e.getCanExpand=()=>{var n,r,i;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(r=t.options.enableExpanding)||r)&&!(null==(i=e.subRows)||!i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},p9={getInitialState:e=>({...e,pagination:{pageIndex:0,pageSize:10,...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:R8("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(t){if(null!=(r=null!=(i=e.options.autoResetAll)?i:e.options.autoResetPageIndex)?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}}else e._queue(()=>{t=!0})},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>D8(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?{pageIndex:0,pageSize:10}:null!=(n=e.initialState.pagination)?n:{pageIndex:0,pageSize:10})},e.setPageIndex=t=>{e.setPagination(n=>{let r=D8(t,n.pageIndex);const i=void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return r=Math.max(0,Math.min(r,i)),{...n,pageIndex:r}})},e.resetPageIndex=t=>{var n,r;e.setPageIndex(t?0:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageIndex)?n:0)},e.resetPageSize=t=>{var n,r;e.setPageSize(t?10:null!=(n=null==(r=e.initialState)||null==(r=r.pagination)?void 0:r.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{const n=Math.max(1,D8(t,e.pageSize)),r=e.pageSize*e.pageIndex,i=Math.floor(r/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var r;let i=D8(t,null!=(r=e.options.pageCount)?r:-1);return"number"==typeof i&&(i=Math.max(-1,i)),{...n,pageCount:i}}),e.getPageOptions=P8(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...new Array(e)].fill(null).map((e,t)=>t)),t},F8(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return-1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},h9={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:R8("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(e=>{e.getCanSelect()&&(r[e.id]=!0)}):i.forEach(e=>{delete r[e.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=void 0!==t?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(t=>{m9(i,t.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=P8(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?g9(e,n):{rows:[],flatRows:[],rowsById:{}},F8(e.options,"debugTable")),e.getFilteredSelectedRowModel=P8(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?g9(e,n):{rows:[],flatRows:[],rowsById:{}},F8(e.options,"debugTable")),e.getGroupedSelectedRowModel=P8(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?g9(e,n):{rows:[],flatRows:[],rowsById:{}},F8(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=Boolean(t.length&&Object.keys(n).length);return r&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(e=>!n[e.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(o=>{var a;if(n=void 0!==n?n:!i,e.getCanSelect()&&i===n)return o;const s={...o};return m9(s,e.id,n,null==(a=null==r?void 0:r.selectChildren)||a,t),s})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return y9(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return"some"===v9(e,n)},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return"all"===v9(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{const t=e.getCanSelect();return n=>{var r;t&&e.toggleSelected(null==(r=n.target)?void 0:r.checked)}}}},m9=(e,t,n,r,i)=>{var o;const a=i.getRow(t,!0);n?(a.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),a.getCanSelect()&&(e[t]=!0)):delete e[t],r&&null!=(o=a.subRows)&&o.length&&a.getCanSelectSubRows()&&a.subRows.forEach(t=>m9(e,t.id,n,r,i))};function g9(e,t){const n=e.getState().rowSelection,r=[],i={},o=function(e,t){return e.map(e=>{var t;const a=y9(e,n);if(a&&(r.push(e),i[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:o(e.subRows)}),a)return e}).filter(Boolean)};return{rows:o(t.rows),flatRows:r,rowsById:i}}function y9(e,t){var n;return null!=(n=t[e.id])&&n}function v9(e,t,n){var r;if(null==(r=e.subRows)||!r.length)return!1;let i=!0,o=!1;return e.subRows.forEach(e=>{if((!o||i)&&(e.getCanSelect()&&(y9(e,t)?o=!0:i=!1),e.subRows&&e.subRows.length)){const n=v9(e,t);"all"===n?o=!0:"some"===n?(o=!0,i=!1):i=!1}}),i?"all":!!o&&"some"}const b9=/([0-9]+)/gm;function w9(e,t){return e===t?0:e>t?1:-1}function _9(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function x9(e,t){const n=e.split(b9).filter(Boolean),r=t.split(b9).filter(Boolean);for(;n.length&&r.length;){const e=n.shift(),t=r.shift(),i=parseInt(e,10),o=parseInt(t,10),a=[i,o].sort();if(isNaN(a[0])){if(e>t)return 1;if(t>e)return-1}else{if(isNaN(a[1]))return isNaN(i)?-1:1;if(i>o)return 1;if(o>i)return-1}}return n.length-r.length}const E9={alphanumeric:(e,t,n)=>x9(_9(e.getValue(n)).toLowerCase(),_9(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>x9(_9(e.getValue(n)),_9(t.getValue(n))),text:(e,t,n)=>w9(_9(e.getValue(n)).toLowerCase(),_9(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>w9(_9(e.getValue(n)),_9(t.getValue(n))),datetime:(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},basic:(e,t,n)=>w9(e.getValue(n),t.getValue(n))},S9={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:R8("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const t of n){const n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return E9.datetime;if("string"==typeof n&&(r=!0,n.split(b9).length>1))return E9.alphanumeric}return r?E9.text:E9.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return M8(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(r=t.options.sortingFns)?void 0:r[e.columnDef.sortingFn])?n:E9[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),o=null!=n;t.setSorting(a=>{const s=null==a?void 0:a.find(t=>t.id===e.id),l=null==a?void 0:a.findIndex(t=>t.id===e.id);let u,c=[],d=o?n:"desc"===i;var f;(u=null!=a&&a.length&&e.getCanMultiSort()&&r?s?"toggle":"add":null!=a&&a.length&&l!==a.length-1?"replace":s?"toggle":"replace","toggle"===u&&(o||i||(u="remove")),"add"===u)?(c=[...a,{id:e.id,desc:d}],c.splice(0,c.length-(null!=(f=t.options.maxMultiSortColCount)?f:Number.MAX_SAFE_INTEGER))):c="toggle"===u?a.map(t=>t.id===e.id?{...t,desc:d}:t):"remove"===u?a.filter(t=>t.id!==e.id):[{id:e.id,desc:d}];return c})},e.getFirstSortDir=()=>{var n,r;return(null!=(n=null!=(r=e.columnDef.sortDescFirst)?r:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const o=e.getFirstSortDir(),a=e.getIsSorted();return a?!!(a===o||null!=(r=t.options.enableSortingRemoval)&&!r||n&&null!=(i=t.options.enableMultiRemove)&&!i)&&("desc"===a?"asc":"desc"):o},e.getCanSort=()=>{var n,r;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(r=t.options.enableSorting)||r)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return null!=(n=null!=(r=e.columnDef.enableMultiSort)?r:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!r&&(r.desc?"desc":"asc")},e.getSortIndex=()=>{var n,r;return null!=(n=null==(r=t.getState().sorting)?void 0:r.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(null==r.persist||r.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(r))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:null!=(n=null==(r=e.initialState)?void 0:r.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},k9=[B8,c9,i9,o9,U8,e9,{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:R8("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof r||"number"==typeof r}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,o;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(r=t.options.enableGlobalFilter)||r)&&(null==(i=t.options.enableFilters)||i)&&(null==(o=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||o)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>X8.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return M8(r)?r:"auto"===r?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[r])?t:X8[r]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},S9,r9,f9,p9,{getInitialState:e=>({rowPinning:{top:[],bottom:[]},...e}),getDefaultOptions:e=>({onRowPinningChange:R8("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const o=r?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],a=i?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],s=new Set([...a,e.id,...o]);t.setRowPinning(e=>{var t,r,i,o,a,l;return"bottom"===n?{top:(null!=(i=null==e?void 0:e.top)?i:[]).filter(e=>!(null!=s&&s.has(e))),bottom:[...(null!=(o=null==e?void 0:e.bottom)?o:[]).filter(e=>!(null!=s&&s.has(e))),...Array.from(s)]}:"top"===n?{top:[...(null!=(a=null==e?void 0:e.top)?a:[]).filter(e=>!(null!=s&&s.has(e))),...Array.from(s)],bottom:(null!=(l=null==e?void 0:e.bottom)?l:[]).filter(e=>!(null!=s&&s.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=s&&s.has(e))),bottom:(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=s&&s.has(e)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return"function"==typeof r?r(e):null==(n=null!=r?r:i)||n},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,o=n.some(e=>null==r?void 0:r.includes(e)),a=n.some(e=>null==i?void 0:i.includes(e));return o?"top":!!a&&"bottom"},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const o=null==(n="top"===i?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(r=null==o?void 0:o.indexOf(e.id))?r:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?{top:[],bottom:[]}:null!=(n=null==(r=e.initialState)?void 0:r.rowPinning)?n:{top:[],bottom:[]})},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;var i,o;return t?Boolean(null==(n=r[t])?void 0:n.length):Boolean((null==(i=r.top)?void 0:i.length)||(null==(o=r.bottom)?void 0:o.length))},e._getPinnedRows=(t,n,r)=>{var i;return(null==(i=e.options.keepPinnedRows)||i?(null!=n?n:[]).map(t=>{const n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:r}))},e.getTopRows=P8(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),F8(e.options,"debugRows")),e.getBottomRows=P8(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),F8(e.options,"debugRows")),e.getCenterRows=P8(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{const r=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!r.has(e.id))},F8(e.options,"debugRows"))}},h9,s9];function T9(e){var t,n;const r=[...k9,...null!=(t=e._features)?t:[]];let i={_features:r};const o=i._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(i)),{});let a={...null!=(n=e.initialState)?n:{}};i._features.forEach(e=>{var t;a=null!=(t=null==e.getInitialState?void 0:e.getInitialState(a))?t:a});const s=[];let l=!1;const u={_features:r,options:{...o,...e},initialState:a,_queue:e=>{s.push(e),l||(l=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();l=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{i.setState(i.initialState)},setOptions:e=>{const t=D8(e,i.options);var n;i.options=(n=t,i.options.mergeOptions?i.options.mergeOptions(o,n):{...o,...n})},getState:()=>i.options.state,setState:e=>{null==i.options.onStateChange||i.options.onStateChange(e)},_getRowId:(e,t,n)=>{var r;return null!=(r=null==i.options.getRowId?void 0:i.options.getRowId(e,t,n))?r:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?i.getPrePaginationRowModel():i.getRowModel()).rowsById[e];if(!n&&(n=i.getCoreRowModel().rowsById[e],!n))throw new Error;return n},_getDefaultColumnDef:P8(()=>[i.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{const t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...i._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},F8(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:P8(()=>[i._getColumnDefs()],e=>{const t=function(e,n,r){return void 0===r&&(r=0),e.map(e=>{const o=function(e,t,n,r){var i,o;const a={...e._getDefaultColumnDef(),...t},s=a.accessorKey;let l,u=null!=(i=null!=(o=a.id)?o:s?"function"==typeof String.prototype.replaceAll?s.replaceAll(".","_"):s.replace(/\./g,"_"):void 0)?i:"string"==typeof a.header?a.header:void 0;if(a.accessorFn?l=a.accessorFn:s&&(l=s.includes(".")?e=>{let t=e;for(const r of s.split(".")){var n;t=null==(n=t)?void 0:n[r]}return t}:e=>e[a.accessorKey]),!u)throw new Error;let c={id:`${String(u)}`,accessorFn:l,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:P8(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},F8(e.options,"debugColumns")),getLeafColumns:P8(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},F8(e.options,"debugColumns"))};for(const d of e._features)null==d.createColumn||d.createColumn(c,e);return c}(i,e,r,n),a=e;return o.columns=a.columns?t(a.columns,o,r+1):[],o})};return t(e)},F8(e,"debugColumns")),getAllFlatColumns:P8(()=>[i.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),F8(e,"debugColumns")),_getAllFlatColumnsById:P8(()=>[i.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),F8(e,"debugColumns")),getAllLeafColumns:P8(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),F8(e,"debugColumns")),getColumn:e=>i._getAllFlatColumnsById()[e]};Object.assign(i,u);for(let c=0;c<i._features.length;c++){const e=i._features[c];null==e||null==e.createTable||e.createTable(i)}return i}function C9(){return e=>P8(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(t,i,o){void 0===i&&(i=0);const a=[];for(let l=0;l<t.length;l++){const u=z8(e,e._getRowId(t[l],l,o),t[l],l,i,0,null==o?void 0:o.id);var s;if(n.flatRows.push(u),n.rowsById[u.id]=u,a.push(u),e.options.getSubRows)u.originalSubRows=e.options.getSubRows(t[l],l),null!=(s=u.originalSubRows)&&s.length&&(u.subRows=r(u.originalSubRows,i+1,u))}return a};return n.rows=r(t),n},F8(e.options,"debugTable",0,()=>e._autoResetPageIndex()))}function A9(){return e=>P8(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||null==t||!t.length)return n;const r=e.getState().sorting,i=[],o=r.filter(t=>{var n;return null==(n=e.getColumn(t.id))?void 0:n.getCanSort()}),a={};o.forEach(t=>{const n=e.getColumn(t.id);n&&(a[t.id]={sortUndefined:n.columnDef.sortUndefined,invertSorting:n.columnDef.invertSorting,sortingFn:n.getSortingFn()})});const s=e=>{const t=e.map(e=>({...e}));return t.sort((e,t)=>{for(let r=0;r<o.length;r+=1){var n;const i=o[r],s=a[i.id],l=s.sortUndefined,u=null!=(n=null==i?void 0:i.desc)&&n;let c=0;if(l){const n=void 0===e.getValue(i.id),r=void 0===t.getValue(i.id);if(n||r){if("first"===l)return n?-1:1;if("last"===l)return n?1:-1;c=n&&r?0:n?l:-l}}if(0===c&&(c=s.sortingFn(e,t,i.id)),0!==c)return u&&(c*=-1),s.invertSorting&&(c*=-1),c}return e.index-t.index}),t.forEach(e=>{var t;i.push(e),null!=(t=e.subRows)&&t.length&&(e.subRows=s(e.subRows))}),t};return{rows:s(n.rows),flatRows:i,rowsById:n.rowsById}},F8(e.options,"debugTable",0,()=>e._autoResetPageIndex()))}
/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function I9(e,t){return e?function(e){return"function"==typeof e&&(()=>{const t=Object.getPrototypeOf(e);return t.prototype&&t.prototype.isReactComponent})()}(n=e)||"function"==typeof n||function(e){return"object"==typeof e&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)}(n)?k.createElement(e,t):e:null;var n}function O9(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=k.useState(()=>({current:T9(t)})),[r,i]=k.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...r,...e.state},onStateChange:t=>{i(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}function N9({className:e,fontSize:t="text-xs",data:n,columns:r,numRows:i,pagination:o,sorting:a,onPaginationChange:s,onSortingChange:l,footerActions:u,isFetching:c,onRowClick:d,onRowDoubleClick:f}){const p=k.useMemo(()=>[],[]),h=O9({data:n??p,columns:r??[],pageCount:(o&&void 0!==i?Math.ceil(i/o.pageSize):void 0)??0,getSortedRowModel:A9(),onSortingChange:e=>{l&&a&&"function"==typeof e&&l(e(a))},onPaginationChange:e=>{o&&s&&"function"==typeof e&&s(e(o))},getCoreRowModel:C9(),manualPagination:!0,state:{pagination:o,sorting:a}}),[m,g]=k.useState((null==o?void 0:o.pageIndex)??0);return k.useEffect(()=>{g((null==o?void 0:o.pageIndex)??0)},[null==o?void 0:o.pageIndex]),w.jsxs("div",{className:zn("relative flex h-full w-full flex-col",e),children:[w.jsx("div",{className:"border-border flex-1 overflow-hidden border font-mono",children:w.jsxs(mb,{className:"h-full overflow-auto",children:[w.jsxs(mw,{disableWrapper:!0,children:[w.jsx(gw,{children:h.getHeaderGroups().map(e=>w.jsxs(vw,{children:[w.jsx(bw,{className:"bg-background sticky left-0 top-[-1px] z-10 w-auto whitespace-nowrap border-r py-2 text-center",children:c?w.jsx("div",{className:"border-primary h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}):null}),e.headers.map(e=>{const n=e.column.columnDef.meta;return w.jsx(bw,{colSpan:e.colSpan,className:zn("bg-background hover:bg-muted sticky top-[-1px] z-10 w-auto whitespace-nowrap border-r py-2",o?"cursor-pointer":"",(null==n?void 0:n.isNumeric)?"text-right":"text-left",t),onClick:e.column.getToggleSortingHandler(),children:w.jsxs("div",{className:"flex items-center gap-2",children:[e.isPlaceholder?null:w.jsx("div",{children:I9(e.column.columnDef.header,e.getContext())}),e.column.getIsSorted()?"desc"===e.column.getIsSorted()?w.jsx(S8,{className:"h-4 w-4"}):w.jsx(C8,{className:"h-4 w-4"}):null,w.jsx("div",{className:"flex-1"}),w.jsx(Xn,{variant:"outline",className:"max-w-[400px] truncate text-xs opacity-30",children:String(null==n?void 0:n.type)})]})},e.id)}),w.jsx(bw,{className:"bg-background sticky top-0 w-full whitespace-nowrap border-r border-t py-2"})]},e.id))}),w.jsx(yw,{children:h.getRowModel().rows.map((e,n)=>w.jsxs(vw,{className:"hover:bg-muted bg-background",onClick:t=>{t.preventDefault(),null==d||d({row:e,event:t})},onDoubleClick:t=>{t.preventDefault(),null==f||f({row:e,event:t})},children:[w.jsx(ww,{className:`bg-background text-muted-foreground sticky left-0 border-r text-center ${t}`,children:o?`${o.pageIndex*o.pageSize+n+1}`:`${n+1}`}),e.getVisibleCells().map(e=>{const n=e.column.columnDef.meta;return w.jsx(ww,{className:zn("max-w-[500px] overflow-hidden truncate border-r px-7",t,(null==n?void 0:n.isNumeric)?"text-right":"text-left"),children:I9(e.column.columnDef.cell,e.getContext())},e.id)}),w.jsx(ww,{className:"border-r",children:" "})]},e.id))})]}),w.jsx(gb,{orientation:"vertical",className:"z-50"}),w.jsx(gb,{orientation:"horizontal"})]})}),o||u?w.jsxs("div",{className:"bg-background sticky bottom-0 left-0 flex flex-wrap items-center gap-2 border border-t-0 p-2",children:[o?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[w.jsx(er,{variant:"outline",size:"icon",onClick:()=>h.setPageIndex(0),disabled:!h.getCanPreviousPage(),children:w.jsx(A8,{className:"h-4 w-4"})}),w.jsx(er,{variant:"outline",size:"icon",onClick:()=>h.previousPage(),disabled:!h.getCanPreviousPage(),children:w.jsx(k8,{className:"h-4 w-4"})}),w.jsxs("div",{className:`ml-1 flex items-center gap-1 ${t}`,children:[w.jsx("div",{children:"Page"}),w.jsx(pf,{type:"number",min:1,max:h.getPageCount(),className:"h-8 w-16",value:m+1,onChange:e=>{const t=e.target.value;if(t){const e=Math.max(0,Math.min(h.getPageCount()-1,Number(t)-1));g(e)}},onBlur:()=>{m!==(null==o?void 0:o.pageIndex)&&h.setPageIndex(m)}}),w.jsx("div",{children:`of ${e3(h.getPageCount())}`})]}),w.jsx(er,{variant:"outline",size:"icon",onClick:()=>h.nextPage(),disabled:!h.getCanNextPage(),children:w.jsx(T8,{className:"h-4 w-4"})}),w.jsx(er,{variant:"outline",size:"icon",onClick:()=>h.setPageIndex(h.getPageCount()-1),disabled:!h.getCanNextPage(),children:w.jsx(I8,{className:"h-4 w-4"})}),w.jsxs(Ev,{value:String(h.getState().pagination.pageSize),onValueChange:e=>h.setPageSize(Number(e)),children:[w.jsx(Tv,{className:"h-8 w-[110px]",children:w.jsx(kv,{})}),w.jsx(Iv,{children:[10,50,100,500,1e3].map(e=>w.jsx(Nv,{value:String(e),children:`${e} rows`},e))})]})]}),w.jsx("div",{className:"flex-1"})]}):null,w.jsx(w.Fragment,{children:void 0!==i&&isFinite(i)?w.jsx("div",{className:`font-normal ${t}`,children:`${e3(i)} rows`}):null}),u]}):null,c?w.jsx("div",{className:"bg-background/80 absolute inset-0 animate-pulse"}):null]})}const D9=e=>`export-${t6().format("YYYY-MM-DDTHH-mm-ss")}.${e}`,R9=({query:e})=>{const{exportToCsv:t}=e8(),[n,r]=k.useState(!1);return w.jsxs(uf,{children:[w.jsx(cf,{asChild:!0,children:w.jsx(er,{variant:"outline",size:"xs",disabled:n,children:n?w.jsx("div",{className:"border-primary h-4 w-4 animate-spin rounded-full border-2 border-t-transparent"}):w.jsx(N8,{className:"h-4 w-4"})})}),w.jsx(df,{align:"end",children:w.jsx(ff,{onClick:async()=>{if(e)try{r(!0),await t(e,D9("csv"))}finally{r(!1)}},children:"Export CSV"})})]})},M9={accessor:(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},display:e=>e,group:e=>e};function P9(e,t){if(null==t)return"NULL";if(CY.isTimestamp(e))switch(typeof t){case"number":case"bigint":return new Date(Number(t)).toISOString();case"string":return new Date(t).toISOString()}if(CY.isTime(e))switch(typeof t){case"number":case"bigint":return new Date(Number(t)/1e3).toISOString().substring(11,19);case"string":return new Date(t).toISOString().substring(11,19)}return CY.isDate(e)&&t instanceof Date?t.toISOString():String(t)}function F9(e,t={}){const{fontSize:n="base"}=t??{},r=k.useMemo(()=>({length:(null==e?void 0:e.numRows)??0}),[e]),i=k.useMemo(()=>{if(!e)return;const t=[];for(const r of e.schema.fields)t.push(M9.accessor((t,n)=>{var i;return null==(i=e.getChild(r.name))?void 0:i.get(n)},{cell:e=>{const t=e.getValue(),i=P9(r.type,t);return i.length>64?w.jsxs(uu,{children:[w.jsx(cu,{asChild:!0,children:w.jsx("span",{className:"cursor-pointer",children:t3(`${i}`,64)})}),w.jsx(du,{className:`w-auto max-w-[500px] text-${n}`,children:w.jsxs("div",{className:"space-y-2",children:[w.jsx("div",{className:"font-medium",children:`"${r.name}" (${r.type})`}),w.jsxs("div",{className:"relative",children:[w.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:i}),w.jsx(er,{variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-6 w-6",onClick:()=>navigator.clipboard.writeText(i),children:w.jsx(O8,{className:"h-3 w-3"})})]})]})})]}):i},header:r.name,meta:{type:r.type,isNumeric:CY.isFloat(r.type)||CY.isDecimal(r.type)||CY.isInt(r.type)}}));return t},[e,n]);return r&&i?{data:r,columns:i}:void 0}const L9=({className:e,fontSize:t="text-xs",query:n,renderActions:r=e=>w.jsx(R9,{query:e})})=>{var i,o,a;const[s,l]=k.useState([]),[u,c]=k.useState({pageIndex:0,pageSize:100}),d=k.useMemo(()=>V6(n),[n]),f=function(e,t,n){return`SELECT * FROM (\n    ${e}\n    ) ${t.length>0?`ORDER BY ${t.map(e=>`${z6(e.id)}${e.desc?" DESC":""}`).join(", ")}`:""}\n    OFFSET ${n.pageIndex*n.pageSize}\n    LIMIT ${n.pageSize}`}(d,s,u),p=i8({query:f}),h=i8({query:`SELECT COUNT(*)::int AS count FROM (${d})`}),m=F9(null==(i=p.data)?void 0:i.arrowTable);if(p.error)return w.jsx("div",{className:"h-full w-full overflow-auto p-5",children:w.jsx("pre",{className:"text-xs leading-tight text-red-500",children:(null==(o=p.error)?void 0:o.message)??"Unknown error"})});const g=h.data?(null==(a=h.data.toArray()[0])?void 0:a.count)??0:void 0;return w.jsx(N9,{...m,className:e,fontSize:t,numRows:g,isFetching:p.isLoading,pagination:u,onPaginationChange:c,sorting:s,onSortingChange:l,footerActions:r?r(d):null})},j9=({className:e,title:t,query:n,tableModal:r})=>w.jsx(ba,{open:r.isOpen,onOpenChange:e=>!e&&r.onClose(),children:w.jsxs(xa,{className:zn("h-[80vh] max-w-[75vw]",e),"aria-describedby":"data-table-modal",children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:t??""}),w.jsx(Ta,{className:"hidden",children:t})]}),w.jsx("div",{className:"bg-muted flex-1 overflow-hidden",children:r.isOpen&&n?w.jsx(L9,{query:n}):null}),w.jsx(Sa,{children:w.jsx(er,{variant:"outline",onClick:r.onClose,children:"Close"})})]})});function B9(){return B9=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B9.apply(this,arguments)}var $9,z9=["bottom","height","left","right","top","width"],U9=new Map,q9=function e(){var t=[];U9.forEach(function(e,n){var r=n.getBoundingClientRect();(function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),z9.some(function(n){return e[n]!==t[n]})})(r,e.rect)&&(e.rect=r,t.push(e))}),t.forEach(function(e){e.callbacks.forEach(function(t){return t(e.rect)})}),$9=window.requestAnimationFrame(e)};var H9="undefined"!=typeof window?T.useLayoutEffect:T.useEffect;function V9(e,t){void 0===t&&(t={width:0,height:0});var n=T.useState(e.current),r=n[0],i=n[1],o=T.useReducer(W9,t),a=o[0],s=o[1],l=T.useRef(!1);return H9(function(){e.current!==r&&i(e.current)}),H9(function(){if(r&&!l.current){l.current=!0;var e=r.getBoundingClientRect();s({rect:e})}},[r]),T.useEffect(function(){if(r){var e,t,n=(e=r,t=function(e){s({rect:e})},{observe:function(){var n=0===U9.size;U9.has(e)?U9.get(e).callbacks.push(t):U9.set(e,{rect:void 0,hasRectChanged:!1,callbacks:[t]}),n&&q9()},unobserve:function(){var n=U9.get(e);if(n){var r=n.callbacks.indexOf(t);r>=0&&n.callbacks.splice(r,1),n.callbacks.length||U9.delete(e),U9.size||cancelAnimationFrame($9)}}});return n.observe(),function(){n.unobserve()}}},[r]),a}function W9(e,t){var n=t.rect;return e.height!==n.height||e.width!==n.width?n:e}var G9=function(){return 50},Y9=function(e){return e},K9=function(e,t){return e[t?"offsetWidth":"offsetHeight"]},Z9=function(e){for(var t=Math.max(e.start-e.overscan,0),n=Math.min(e.end+e.overscan,e.size-1),r=[],i=t;i<=n;i++)r.push(i);return r};function Q9(e){var t,n=e.size,r=void 0===n?0:n,i=e.estimateSize,o=void 0===i?G9:i,a=e.overscan,s=void 0===a?1:a,l=e.paddingStart,u=void 0===l?0:l,c=e.paddingEnd,d=void 0===c?0:c,f=e.parentRef,p=e.horizontal,h=e.scrollToFn,m=e.useObserver,g=e.initialRect,y=e.onScrollElement,v=e.scrollOffsetFn,b=e.keyExtractor,w=void 0===b?Y9:b,_=e.measureSize,x=void 0===_?K9:_,E=e.rangeExtractor,S=void 0===E?Z9:E,k=p?"width":"height",C=p?"scrollLeft":"scrollTop",A=T.useRef({scrollOffset:0,measurements:[]}),I=T.useState(0),O=I[0],N=I[1];A.current.scrollOffset=O;var D=(m||V9)(f,g)[k];A.current.outerSize=D;var R=T.useCallback(function(e){f.current&&(f.current[C]=e)},[f,C]),M=h||R;h=T.useCallback(function(e){M(e,R)},[R,M]);var P=T.useState({}),F=P[0],L=P[1],j=T.useCallback(function(){return L({})},[]),B=T.useRef([]),$=T.useMemo(function(){var e=B.current.length>0?Math.min.apply(Math,B.current):0;B.current=[];for(var t=A.current.measurements.slice(0,e),n=e;n<r;n++){var i=w(n),a=F[i],s=t[n-1]?t[n-1].end:u,l="number"==typeof a?a:o(n),c=s+l;t[n]={index:n,start:s,size:l,end:c,key:i}}return t},[o,F,u,r,w]),z=((null==(t=$[r-1])?void 0:t.end)||u)+d;A.current.measurements=$,A.current.totalSize=z;var U=y?y.current:f.current,q=T.useRef(v);q.current=v,H9(function(){if(U){var e=function(e){var t=q.current?q.current(e):U[C];N(t)};return e(),U.addEventListener("scroll",e,{capture:!1,passive:!0}),function(){U.removeEventListener("scroll",e)}}N(0)},[U,C]);var H=function(e){var t=e.measurements,n=e.outerSize,r=e.scrollOffset,i=t.length-1,o=function(e){return t[e].start},a=X9(0,i,o,r),s=a;for(;s<i&&t[s].end<r+n;)s++;return{start:a,end:s}}(A.current),V=H.start,W=H.end,G=T.useMemo(function(){return S({start:V,end:W,overscan:s,size:$.length})},[V,W,s,$.length,S]),Y=T.useRef(x);Y.current=x;var K=T.useMemo(function(){for(var e=[],t=function(t,n){var r=G[t],i=B9(B9({},$[r]),{},{measureRef:function(e){if(e){var t=Y.current(e,p);if(t!==i.size){var n=A.current.scrollOffset;i.start<n&&R(n+(t-i.size)),B.current.push(r),L(function(e){var n;return B9(B9({},e),{},((n={})[i.key]=t,n))})}}}});e.push(i)},n=0,r=G.length;n<r;n++)t(n);return e},[G,R,p,$]),Z=T.useRef(!1);H9(function(){Z.current&&L({}),Z.current=!0},[o]);var Q=T.useCallback(function(e,t){var n=(void 0===t?{}:t).align,r=void 0===n?"start":n,i=A.current,o=i.scrollOffset,a=i.outerSize;"auto"===r&&(r=e<=o?"start":e>=o+a?"end":"start"),"start"===r?h(e):"end"===r?h(e-a):"center"===r&&h(e-a/2)},[h]),X=T.useCallback(function(e,t){var n=void 0===t?{}:t,i=n.align,o=void 0===i?"auto":i,a=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(n,["align"]),s=A.current,l=s.measurements,u=s.scrollOffset,c=s.outerSize,d=l[Math.max(0,Math.min(e,r-1))];if(d){if("auto"===o)if(d.end>=u+c)o="end";else{if(!(d.start<=u))return;o="start"}var f="center"===o?d.start+d.size/2:"end"===o?d.end:d.start;Q(f,B9({align:o},a))}},[Q,r]),J=T.useCallback(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];X.apply(void 0,t),requestAnimationFrame(function(){X.apply(void 0,t)})},[X]);return{virtualItems:K,totalSize:z,scrollToOffset:Q,scrollToIndex:J,measure:j}}var X9=function(e,t,n,r){for(;e<=t;){var i=(e+t)/2|0,o=n(i);if(o<r)e=i+1;else{if(!(o>r))return i;t=i-1}}return e>0?e-1:0};k.memo(function({data:e,columns:t,isPreview:n}){var r,i;const[o,a]=k.useState([]),s=O9({columns:t,data:e,onSortingChange:a,getCoreRowModel:C9(),getSortedRowModel:A9(),state:{sorting:o}}),l=k.useRef(null),{rows:u}=s.getRowModel(),c=Q9({parentRef:l,size:u.length,overscan:20}),{virtualItems:d,totalSize:f}=c,p=d.length>0&&(null==(r=null==d?void 0:d[0])?void 0:r.start)||0,h=d.length>0?f-((null==(i=null==d?void 0:d[d.length-1])?void 0:i.end)||0):0;return w.jsxs("div",{className:"flex flex-col overflow-hidden",children:[w.jsx("div",{className:"border-border overflow-hidden border",children:w.jsx("div",{ref:l,className:"h-full overflow-auto",children:w.jsxs(mw,{disableWrapper:!0,children:[w.jsx(gw,{children:s.getHeaderGroups().map(e=>w.jsxs(vw,{children:[w.jsx(bw,{className:"bg-background sticky left-0 top-0 z-20 w-auto whitespace-nowrap border-r py-2 text-center"}),e.headers.map(e=>{const t=e.column.columnDef.meta;return w.jsx(bw,{className:`bg-background hover:bg-muted/80 sticky top-0 z-10 cursor-pointer whitespace-nowrap border-r px-7 py-2 font-mono ${(null==t?void 0:t.isNumeric)?"text-right":"text-left"} `,onClick:e.column.getToggleSortingHandler(),children:w.jsxs("div",{className:"flex items-center gap-1 "+((null==t?void 0:t.isNumeric)?"justify-end":"justify-start"),children:[I9(e.column.columnDef.header,e.getContext()),e.column.getIsSorted()?"desc"===e.column.getIsSorted()?w.jsx(S8,{className:"h-4 w-4"}):w.jsx(C8,{className:"h-4 w-4"}):null,w.jsx("div",{className:"flex-1"}),w.jsx(Xn,{variant:"outline",className:"text-[9px] opacity-30",children:String(null==t?void 0:t.type)})]})},e.id)})]},e.id))}),w.jsxs(yw,{children:[p>0&&w.jsx(vw,{children:w.jsx(ww,{style:{height:`${p}px`}})}),d.map(e=>{const t=u[e.index];return t?w.jsxs(vw,{className:"hover:bg-muted/50",children:[w.jsx(ww,{className:"bg-muted text-muted-foreground sticky left-0 border-r text-center text-xs",children:e.index+1}),t.getVisibleCells().map(e=>{const t=e.column.columnDef.meta;return w.jsx(ww,{className:`max-w-[500px] overflow-hidden truncate border-r px-7 text-xs ${(null==t?void 0:t.isNumeric)?"text-right":"text-left"} `,children:I9(e.column.columnDef.cell,e.getContext())},e.id)})]},t.id):null}),h>0&&w.jsx(vw,{children:w.jsx(ww,{style:{height:`${h}px`}})})]})]})})}),w.jsx("div",{className:"bg-background sticky bottom-0 left-0 border border-t-0 px-4 py-2 font-mono text-xs",children:`${n?"Preview of the first ":""}${e3(e.length)} rows`})]})});const J9=e=>{const{isPinned:t,icon:n,label:r,onClick:i}=e;return w.jsx(er,{size:"icon",onClick:i,variant:"ghost",className:`h-6 w-6 ${t?"text-foreground":"text-muted-foreground"} hover:text-foreground hover:bg-foreground/10`,"aria-label":r,children:n})},e7=e=>{const{showHeader:t=!0,panelKey:n,children:r}=e,i=f8(e=>e.layout.panels),{icon:o,title:a}=i[n]??{},s=f8(e=>e.layout.togglePanel),l=f8(e=>e.layout.togglePanelPin),u=f8(e=>e.config.layout.pinned),c=k.useMemo(()=>null==u?void 0:u.includes(n),[u,n]);return w.jsxs("div",{className:"flex",children:[w.jsxs("div",{className:"flex w-full flex-row items-center gap-2",children:[t&&w.jsxs(w.Fragment,{children:[o?w.jsx(o,{className:"h-4 w-4"}):null,w.jsx("h2",{className:"text-muted-foreground text-xs font-semibold uppercase",children:a})]}),r]}),w.jsxs("div",{className:"bg-secondary/50 flex gap-0",children:[w.jsx(J9,{isPinned:c,icon:c?w.jsx(Nt,{className:"w-[18px]"}):w.jsx(Ot,{className:"w-[18px]"}),onClick:()=>l(n),label:"Pin panel"}),w.jsx(J9,{icon:w.jsx(Vt,{className:"w-[18px]"}),onClick:()=>s(n),label:`Close panel "${a}"`})]})]})},t7=({type:e,children:t,className:n,showHeader:r=!0})=>w.jsxs("div",{className:zn("flex h-full flex-grow flex-col gap-3",n),children:[r&&w.jsx(e7,{panelKey:e}),w.jsx("div",{className:"flex h-full flex-grow flex-col gap-3 overflow-auto",children:t})]}),n7=(e,t,n)=>{if(e&&"reportValidity"in e){const r=Of(n,t);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},r7=(e,t)=>{for(const n in t.fields){const r=t.fields[n];r&&r.ref&&"reportValidity"in r.ref?n7(r.ref,n,e):r.refs&&r.refs.forEach(t=>n7(t,n,e))}},i7=(e,t)=>{t.shouldUseNativeValidation&&r7(e,t);const n={};for(const r in e){const i=Of(t.fields,r),o=Object.assign(e[r]||{},{ref:i&&i.ref});if(o7(t.names||Object.keys(e),r)){const e=Object.assign({},Of(n,r));Df(e,"root",o),Df(n,r,e)}else Df(n,r,o)}return n},o7=(e,t)=>e.some(e=>e.startsWith(t+"."));var a7=function(e,t){for(var n={};e.length;){var r=e[0],i=r.code,o=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var s=r.unionErrors[0].errors[0];n[a]={message:s.message,type:s.code}}else n[a]={message:o,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var l=n[a].types,u=l&&l[r.code];n[a]=ip(a,t,n,i,u?[].concat(u,r.message):r.message)}e.shift()}return n},s7=function(e,t,n){return void 0===n&&(n={}),function(r,i,o){try{return Promise.resolve(function(i,a){try{var s=Promise.resolve(e["sync"===n.mode?"parse":"parseAsync"](r,t)).then(function(e){return o.shouldUseNativeValidation&&r7({},o),{errors:{},values:n.raw?r:e}})}catch(l){return a(l)}return s&&s.then?s.then(void 0,a):s}(0,function(e){if(t=e,Array.isArray(null==t?void 0:t.errors))return{values:{},errors:i7(a7(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};var t;throw e}))}catch(a){return Promise.reject(a)}}};function l7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u7(Object(n),!0).forEach(function(t){l7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d7(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f7(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h7(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function m7(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h7(Object(n),!0).forEach(function(t){p7(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h7(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function g7(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t.apply(n,[].concat(i,r))}}}function y7(e){return{}.toString.call(e).includes("Object")}function v7(e){return"function"==typeof e}var b7=g7(function(e,t){throw new Error(e[t]||e.default)})({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),w7={changes:function(e,t){return y7(t)||b7("changeType"),Object.keys(t).some(function(t){return n=e,r=t,!Object.prototype.hasOwnProperty.call(n,r);var n,r})&&b7("changeField"),t},selector:function(e){v7(e)||b7("selectorType")},handler:function(e){v7(e)||y7(e)||b7("handlerType"),y7(e)&&Object.values(e).some(function(e){return!v7(e)})&&b7("handlersType")},initial:function(e){var t;e||b7("initialIsRequired"),y7(e)||b7("initialType"),t=e,Object.keys(t).length||b7("initialContent")}};function _7(e,t){return v7(t)?t(e.current):t}function x7(e,t){return e.current=m7(m7({},e.current),t),t}function E7(e,t,n){return v7(t)?t(e.current):Object.keys(n).forEach(function(n){var r;return null===(r=t[n])||void 0===r?void 0:r.call(t,e.current[n])}),n}var S7={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};w7.initial(e),w7.handler(t);var n={current:e},r=g7(E7)(n,t),i=g7(x7)(n),o=g7(w7.changes)(e),a=g7(_7)(n);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return w7.selector(e),e(n.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(r,i,o,a)(e)}]}};var k7,T7=(k7=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.length>=k7.length?k7.apply(this,r):function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.apply(t,[].concat(r,i))}})({configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "}),C7={config:function(e){var t;return e||T7("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||T7("configType"),e.urls?{paths:{vs:e.urls.monacoBase}}:e}};function A7(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],A7(e[n],t[n]))}),c7(c7({},e),t)}var I7={type:"cancelation",msg:"operation is manually canceled"};function O7(e){var t=!1,n=new Promise(function(n,r){e.then(function(e){return t?r(I7):n(e)}),e.catch(r)});return n.cancel=function(){return t=!0},n}var N7=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(HOt){i=!0,o=HOt}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f7(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f7(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(S7.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),2),D7=N7[0],R7=N7[1];function M7(e){return document.body.appendChild(e)}function P7(e){var t,n,r=D7(function(e){return{config:e.config,reject:e.reject}}),i=(t="".concat(r.config.paths.vs,"/loader.js"),n=document.createElement("script"),t&&(n.src=t),n);return i.onload=function(){return e()},i.onerror=r.reject,i}function F7(){var e=D7(function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(t){L7(t),e.resolve(t)},function(t){e.reject(t)})}function L7(e){D7().monaco||R7({monaco:e})}var j7=new Promise(function(e,t){return R7({resolve:e,reject:t})}),B7={config:function(e){var t=C7.config(e),n=t.monaco,r=d7(t,["monaco"]);R7(function(e){return{config:A7(e.config,r),monaco:n}})},init:function(){var e=D7(function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}});if(!e.isInitialized){if(R7({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),O7(j7);if(window.monaco&&window.monaco.editor)return L7(window.monaco),e.resolve(window.monaco),O7(j7);!function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight(function(e,t){return t(e)},e)}}(M7,P7)(F7)}return O7(j7)},__getMonacoInstance:function(){return D7(function(e){return e.monaco})}},$7={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},z7={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}};var U7=function({children:e}){return T.createElement("div",{style:z7.container},e)},q7=U7;var H7=function({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:a}){return T.createElement("section",{style:{...$7.wrapper,width:e,height:t},...a},!n&&T.createElement(q7,null,r),T.createElement("div",{ref:i,style:{...$7.fullWidth,...!n&&$7.hide},className:o}))},V7=k.memo(H7);var W7=function(e){k.useEffect(e,[])};var G7=function(e,t,n=!0){let r=k.useRef(!0);k.useEffect(r.current||!n?()=>{r.current=!1}:e,t)};function Y7(){}function K7(e,t,n,r){return function(e,t){return e.editor.getModel(Z7(e,t))}(e,r)||function(e,t,n,r){return e.editor.createModel(t,n,r?Z7(e,r):void 0)}(e,t,n,r)}function Z7(e,t){return e.Uri.parse(t)}var Q7=function({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:a,keepCurrentOriginalModel:s=!1,keepCurrentModifiedModel:l=!1,theme:u="light",loading:c="Loading...",options:d={},height:f="100%",width:p="100%",className:h,wrapperProps:m={},beforeMount:g=Y7,onMount:y=Y7}){let[v,b]=k.useState(!1),[w,_]=k.useState(!0),x=k.useRef(null),E=k.useRef(null),S=k.useRef(null),C=k.useRef(y),A=k.useRef(g),I=k.useRef(!1);W7(()=>{let e=B7.init();return e.then(e=>(E.current=e)&&_(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&void 0),()=>x.current?function(){var e,t,n,r;let i=null==(e=x.current)?void 0:e.getModel();s||null==(t=null==i?void 0:i.original)||t.dispose(),l||null==(n=null==i?void 0:i.modified)||n.dispose(),null==(r=x.current)||r.dispose()}():e.cancel()}),G7(()=>{if(x.current&&E.current){let t=x.current.getOriginalEditor(),i=K7(E.current,e||"",r||n||"text",o||"");i!==t.getModel()&&t.setModel(i)}},[o],v),G7(()=>{if(x.current&&E.current){let e=x.current.getModifiedEditor(),r=K7(E.current,t||"",i||n||"text",a||"");r!==e.getModel()&&e.setModel(r)}},[a],v),G7(()=>{let e=x.current.getModifiedEditor();e.getOption(E.current.editor.EditorOption.readOnly)?e.setValue(t||""):t!==e.getValue()&&(e.executeEdits("",[{range:e.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),e.pushUndoStop())},[t],v),G7(()=>{var t,n;null==(n=null==(t=x.current)?void 0:t.getModel())||n.original.setValue(e||"")},[e],v),G7(()=>{let{original:e,modified:t}=x.current.getModel();E.current.editor.setModelLanguage(e,r||n||"text"),E.current.editor.setModelLanguage(t,i||n||"text")},[n,r,i],v),G7(()=>{var e;null==(e=E.current)||e.editor.setTheme(u)},[u],v),G7(()=>{var e;null==(e=x.current)||e.updateOptions(d)},[d],v);let O=k.useCallback(()=>{var s;if(!E.current)return;A.current(E.current);let l=K7(E.current,e||"",r||n||"text",o||""),u=K7(E.current,t||"",i||n||"text",a||"");null==(s=x.current)||s.setModel({original:l,modified:u})},[n,t,i,e,r,o,a]),N=k.useCallback(()=>{var e;!I.current&&S.current&&(x.current=E.current.editor.createDiffEditor(S.current,{automaticLayout:!0,...d}),O(),null==(e=E.current)||e.editor.setTheme(u),b(!0),I.current=!0)},[d,u,O]);return k.useEffect(()=>{v&&C.current(x.current,E.current)},[v]),k.useEffect(()=>{!w&&!v&&N()},[w,v,N]),T.createElement(V7,{width:p,height:f,isEditorReady:v,loading:c,_ref:S,className:h,wrapperProps:m})};k.memo(Q7);var X7=function(e){let t=k.useRef();return k.useEffect(()=>{t.current=e},[e]),t.current},J7=new Map;var eee=function({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:o,theme:a="light",line:s,loading:l="Loading...",options:u={},overrideServices:c={},saveViewState:d=!0,keepCurrentModel:f=!1,width:p="100%",height:h="100%",className:m,wrapperProps:g={},beforeMount:y=Y7,onMount:v=Y7,onChange:b,onValidate:w=Y7}){let[_,x]=k.useState(!1),[E,S]=k.useState(!0),C=k.useRef(null),A=k.useRef(null),I=k.useRef(null),O=k.useRef(v),N=k.useRef(y),D=k.useRef(),R=k.useRef(r),M=X7(o),P=k.useRef(!1),F=k.useRef(!1);W7(()=>{let e=B7.init();return e.then(e=>(C.current=e)&&S(!1)).catch(e=>"cancelation"!==(null==e?void 0:e.type)&&void 0),()=>{return A.current?(null==(t=D.current)||t.dispose(),f?d&&J7.set(o,A.current.saveViewState()):null==(n=A.current.getModel())||n.dispose(),void A.current.dispose()):e.cancel();var t,n}}),G7(()=>{var a,s,l,u;let c=K7(C.current,e||r||"",t||i||"",o||n||"");c!==(null==(a=A.current)?void 0:a.getModel())&&(d&&J7.set(M,null==(s=A.current)?void 0:s.saveViewState()),null==(l=A.current)||l.setModel(c),d&&(null==(u=A.current)||u.restoreViewState(J7.get(o))))},[o],_),G7(()=>{var e;null==(e=A.current)||e.updateOptions(u)},[u],_),G7(()=>{!A.current||void 0===r||(A.current.getOption(C.current.editor.EditorOption.readOnly)?A.current.setValue(r):r!==A.current.getValue()&&(F.current=!0,A.current.executeEdits("",[{range:A.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),A.current.pushUndoStop(),F.current=!1))},[r],_),G7(()=>{var e,t;let n=null==(e=A.current)?void 0:e.getModel();n&&i&&(null==(t=C.current)||t.editor.setModelLanguage(n,i))},[i],_),G7(()=>{var e;void 0!==s&&(null==(e=A.current)||e.revealLine(s))},[s],_),G7(()=>{var e;null==(e=C.current)||e.editor.setTheme(a)},[a],_);let L=k.useCallback(()=>{var l;if(I.current&&C.current&&!P.current){N.current(C.current);let f=o||n,p=K7(C.current,r||e||"",t||i||"",f||"");A.current=null==(l=C.current)?void 0:l.editor.create(I.current,{model:p,automaticLayout:!0,...u},c),d&&A.current.restoreViewState(J7.get(f)),C.current.editor.setTheme(a),void 0!==s&&A.current.revealLine(s),x(!0),P.current=!0}},[e,t,n,r,i,o,u,c,d,a,s]);return k.useEffect(()=>{_&&O.current(A.current,C.current)},[_]),k.useEffect(()=>{!E&&!_&&L()},[E,_,L]),R.current=r,k.useEffect(()=>{var e,t;_&&b&&(null==(e=D.current)||e.dispose(),D.current=null==(t=A.current)?void 0:t.onDidChangeModelContent(e=>{F.current||b(A.current.getValue(),e)}))},[_,b]),k.useEffect(()=>{if(_){let e=C.current.editor.onDidChangeMarkers(e=>{var t;let n=null==(t=A.current.getModel())?void 0:t.uri;if(n&&e.find(e=>e.path===n.path)){let e=C.current.editor.getModelMarkers({resource:n});null==w||w(e)}});return()=>{null==e||e.dispose()}}return()=>{}},[_,w]),T.createElement(V7,{width:p,height:h,isEditorReady:_,loading:l,_ref:I,className:m,wrapperProps:g})},tee=k.memo(eee);let nee=!1;function ree(e,t){try{const n=getComputedStyle(document.documentElement).getPropertyValue(e).trim();if(!n)return t;if(n.startsWith("#"))return n;const r=n.match(/^(\d+(?:\.\d+)?)\s+(\d+(?:\.\d+)?)%\s+(\d+(?:\.\d+)?)%$/);if(r&&r[1]&&r[2]&&r[3]){const e=parseFloat(r[1]),t=parseFloat(r[2]);return function(e,t,n){t/=100,n/=100;const r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(e/60%2-1)),o=n-r/2;let a=0,s=0,l=0;0<=e&&e<60?(a=r,s=i,l=0):60<=e&&e<120?(a=i,s=r,l=0):120<=e&&e<180?(a=0,s=r,l=i):180<=e&&e<240?(a=0,s=i,l=r):240<=e&&e<300?(a=i,s=0,l=r):300<=e&&e<360&&(a=r,s=0,l=i);const u=e=>{const t=Math.round(255*(e+o)).toString(16);return 1===t.length?"0"+t:t};return`#${u(a)}${u(s)}${u(l)}`}(e,t,parseFloat(r[3]))}return t}catch(n){return t}}function iee(e){const t=e?{"editorWidget.background":"#1f1f1f","editorWidget.foreground":"#cccccc","editorWidget.border":"#454545","editorSuggestWidget.background":"#252526","list.hoverBackground":"#2a2d2e","list.highlightForeground":"#0097fb","menu.background":"#252526","menu.foreground":"#cccccc","menu.selectionBackground":"#04395e","menu.selectionForeground":"#ffffff","quickInput.background":"#252526","quickInput.foreground":"#cccccc","dropdown.background":"#252526","dropdown.foreground":"#f0f0f0"}:{"editorWidget.background":"#f3f3f3","editorWidget.foreground":"#616161","editorWidget.border":"#c8c8c8","editorSuggestWidget.background":"#f3f3f3","list.hoverBackground":"#e8e8e8","list.highlightForeground":"#0066bf","menu.background":"#f3f3f3","menu.foreground":"#616161","menu.selectionBackground":"#d6ebff","menu.selectionForeground":"#333333","quickInput.background":"#f3f3f3","quickInput.foreground":"#616161","dropdown.background":"#f3f3f3","dropdown.foreground":"#616161"},n={};return n["editorWidget.background"]=ree("--popover",t["editorWidget.background"]),n["editorWidget.foreground"]=ree("--popover-foreground",t["editorWidget.foreground"]),n["editorWidget.border"]=ree("--border",t["editorWidget.border"]),n["editorSuggestWidget.background"]=ree("--popover",t["editorSuggestWidget.background"]),n["list.hoverBackground"]=ree("--accent",t["list.hoverBackground"]),n["list.highlightForeground"]=ree("--primary",t["list.highlightForeground"]),n["menu.background"]=ree("--popover",t["menu.background"]),n["menu.foreground"]=ree("--popover-foreground",t["menu.foreground"]),n["menu.selectionBackground"]=ree("--accent",t["menu.selectionBackground"]),n["menu.selectionForeground"]=ree("--accent-foreground",t["menu.selectionForeground"]),n["quickInput.background"]=ree("--popover",t["quickInput.background"]),n["quickInput.foreground"]=ree("--popover-foreground",t["quickInput.foreground"]),n["dropdown.background"]=ree("--popover",t["dropdown.background"]),n["dropdown.foreground"]=ree("--popover-foreground",t["dropdown.foreground"]),n}function oee(e){const t=e?{property:"#78AEFF",string:"#FFAD85",number:"#7CD992",keyword:"#C987E8",punctuation:"#A9B1BA"}:{property:"#4B6BDF",string:"#DB745C",number:"#56A64B",keyword:"#A450B5",punctuation:"#6E7781"},n=ree("--background",e?"#1E1E1E":"#FFFFFF"),r=ree("--foreground",e?"#D4D4D4":"#000000"),i=ree("--accent",e?"#264F78":"#ADD6FF"),o=ree("--muted",e?"#2A2A2A":"#F5F5F5"),a=ree("--muted-foreground",e?"#858585":"#888888"),s=ree("--primary",e?"#FFFFFF":"#000000"),l=ree("--popover",e?"#1C2233":"#F3F3F3"),u=ree("--popover-foreground",e?"#FFFFFF":"#616161"),c=ree("--border",e?"#39435E":"#C8C8C8");return{base:e?"vs-dark":"vs",inherit:!0,rules:[{token:"type",foreground:t.property.slice(1)},{token:"string.key.json",foreground:t.property.slice(1)},{token:"key",foreground:t.property.slice(1)},{token:"string.value.json",foreground:t.string.slice(1)},{token:"string",foreground:t.string.slice(1)},{token:"number",foreground:t.number.slice(1)},{token:"keyword",foreground:t.keyword.slice(1)},{token:"delimiter",foreground:t.punctuation.slice(1)},{token:"bracket",foreground:t.punctuation.slice(1)},{token:"",foreground:r.slice(1)}],colors:{"editor.background":n,"editor.foreground":r,"editor.selectionBackground":i,"editor.lineHighlightBackground":o,"editorLineNumber.foreground":a,"editorCursor.foreground":s,"editorWidget.background":l,"editorWidget.foreground":u,"editorWidget.border":c,"editorSuggestWidget.background":l,"editorSuggestWidget.foreground":u,"editorSuggestWidget.border":c,"menu.background":l,"menu.foreground":u,"menu.selectionBackground":i,"menu.selectionForeground":u,"menu.separatorBackground":c,"list.hoverBackground":o,"list.activeSelectionBackground":i,"quickInput.background":l,"quickInput.foreground":u}}}const aee=({className:e,language:t="javascript",theme:n,value:r="",readOnly:i=!1,onMount:o,onChange:a,options:s={},...l})=>{nee||(B7.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs"}}),nee=!0);const{theme:u}=(()=>{const e=k.useContext(qw);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e})(),[c,d]=T.useState(0),f=n||("dark"===u||"system"===u&&window.matchMedia("(prefers-color-scheme: dark)").matches?"vs-dark":"light"),p=k.useRef(null),h=k.useRef(null);k.useEffect(()=>{p.current&&p.current.updateOptions({readOnly:i})},[i]),k.useEffect(()=>{if(p.current&&h.current&&!n){const e="dark"===u||"system"===u&&window.matchMedia("(prefers-color-scheme: dark)").matches;"json"===t?h.current.editor.setTheme(e?"sqlrooms-json-dark":"sqlrooms-json-light"):h.current.editor.setTheme(e?"sqlrooms-dark":"sqlrooms-light"),d(e=>e+1)}},[u,n,t]),k.useEffect(()=>{if("system"===u&&!n&&h.current){const e=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{h.current&&("json"===t?h.current.editor.setTheme(e.matches?"sqlrooms-json-dark":"sqlrooms-json-light"):h.current.editor.setTheme(e.matches?"sqlrooms-dark":"sqlrooms-light"),d(e=>e+1))};return e.addEventListener("change",n),()=>{e.removeEventListener("change",n)}}},[u,n,t]);const m=getComputedStyle(document.documentElement).getPropertyValue("--font-mono").trim()||'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace',g={minimap:{enabled:!1},scrollBeyondLastLine:!1,automaticLayout:!0,readOnly:i,fontFamily:m,fontLigatures:!0,...s};return w.jsx("div",{className:zn("h-[300px] w-full",e),children:w.jsx(tee,{height:"100%",width:"100%",language:t,theme:f,value:r,options:g,onMount:(e,n)=>{p.current=e,h.current=n,"json"===t&&n.languages.setMonarchTokensProvider("json",{tokenizer:{root:[[/"([^"]*)"(?=\s*:)/,"string.key.json"],[/"([^"]*)"(?!\s*:)/,"string.value.json"],[/-?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/,"number"],[/\b(?:true|false|null)\b/,"keyword"],[/[{}[\],:]/,"delimiter"]]}}),n.editor.defineTheme("sqlrooms-light",{base:"vs",inherit:!0,rules:[],colors:{"editor.background":ree("--background","#ffffff"),"editor.foreground":ree("--foreground","#000000"),"editor.lineHighlightBackground":ree("--muted","#f5f5f5"),"editorCursor.foreground":ree("--primary","#000000"),"editor.selectionBackground":ree("--accent","#e3e3e3"),"editorLineNumber.foreground":ree("--muted-foreground","#888888"),...iee(!1)}}),n.editor.defineTheme("sqlrooms-dark",{base:"vs-dark",inherit:!0,rules:[],colors:{"editor.background":ree("--background","#1e1e1e"),"editor.foreground":ree("--foreground","#d4d4d4"),"editor.lineHighlightBackground":ree("--muted","#2a2a2a"),"editorCursor.foreground":ree("--primary","#ffffff"),"editor.selectionBackground":ree("--accent","#264f78"),"editorLineNumber.foreground":ree("--muted-foreground","#858585"),...iee(!0)}}),n.editor.defineTheme("sqlrooms-json-light",oee(!1)),n.editor.defineTheme("sqlrooms-json-dark",oee(!0));const r="dark"===u||"system"===u&&window.matchMedia("(prefers-color-scheme: dark)").matches;"json"===t?n.editor.setTheme(r?"sqlrooms-json-dark":"sqlrooms-json-light"):n.editor.setTheme(r?"sqlrooms-dark":"sqlrooms-light"),o&&o(e,n)},onChange:a,loading:w.jsx(nw,{}),...l},c)})},see=({schema:e,value:t="",onMount:n,className:r,...i})=>{const o="object"==typeof t?JSON.stringify(t,null,2):t;return w.jsx(aee,{language:"json",value:o,onMount:(t,r)=>{e&&r.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:[{uri:"http://myserver/schema.json",fileMatch:["*"],schema:e}]}),setTimeout(()=>{var e;null==(e=t.getAction("editor.action.formatDocument"))||e.run()},100),n&&n(t,r)},className:r,options:{formatOnPaste:!0,formatOnType:!0},...i})},lee=["SELECT","FROM","WHERE","GROUP","BY","HAVING","ORDER","LIMIT","OFFSET","INSERT","INTO","VALUES","UPDATE","SET","DELETE","CREATE","ALTER","DROP","TABLE","VIEW","INDEX","TRIGGER","PROCEDURE","FUNCTION","DATABASE","SCHEMA","JOIN","INNER","LEFT","RIGHT","FULL","OUTER","CROSS","NATURAL","ON","USING","AND","OR","NOT","NULL","IS","IN","BETWEEN","LIKE","AS","CASE","WHEN","THEN","ELSE","END","DISTINCT","ALL","UNION","INTERSECT","EXCEPT","WITH","CAST","PRIMARY","KEY","FOREIGN","REFERENCES","CONSTRAINT","DEFAULT","CHECK","UNIQUE","INDEX","CASCADE","RESTRICT","ASC","DESC","IF","EXISTS","TRUE","FALSE","PRAGMA","RETURNING","QUALIFY","PIVOT","UNPIVOT","EXCLUDE","INCLUDE","WINDOW","FILTER","WITHIN","OVER","PARTITION","RANGE","ROWS","GROUPS","PRECEDING","FOLLOWING","CURRENT","ROW","TIES","OTHERS","EXCLUDE","RESPECT","NULLS","FIRST","LAST","MATERIALIZED","RECURSIVE","TEMPORARY","TEMP","UNLOGGED","GLOBAL","LOCAL","STORED","VIRTUAL","DELIMITED","CSV","JSON","COPY","DESCRIBE","EXPLAIN","SUMMARIZE","PROFILE","LOAD","INSTALL","FORCE","PARALLEL","SEQUENTIAL","PRAGMA"],uee=[],cee={defaultToken:"",tokenPostfix:".sql",ignoreCase:!0,brackets:[{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:lee,operators:["+","-","*","/","%","&","|","^","=","<>","!=",">",">=","<","<=","<<",">>","||","::","->>","->","~","!","@"],builtinFunctions:uee,builtinVariables:["$1","$2","$3","$4","$5","$6","$7","$8","$9"],pseudoColumns:["$ACTION","$IDENTITY","$ROWGUID","$PARTITION"],tokenizer:{root:[{include:"@comments"},{include:"@whitespace"},{include:"@numbers"},{include:"@strings"},{include:"@complexIdentifiers"},{include:"@scopes"},[/[;,.]/,"delimiter"],[/[()]/,"@brackets"],[/[\w@#$]+/,{cases:{"@keywords":"keyword","@operators":"operator","@builtinFunctions":"predefined","@builtinVariables":"predefined","@pseudoColumns":"predefined","@default":"identifier"}}],[/[<>=!%&+\-*/|~^]/,"operator"]],whitespace:[[/\s+/,"white"]],comments:[[/--+.*/,"comment"],[/\/\*/,{token:"comment.quote",next:"@comment"}]],comment:[[/[^*/]+/,"comment"],[/\*\//,{token:"comment.quote",next:"@pop"}],[/./,"comment"]],numbers:[[/0[xX][0-9a-fA-F]*/,"number"],[/[$][+-]*\d*(\.\d*)?/,"number"],[/((\d+(\.\d*)?)|(\.\d+))([eE][\-+]?\d+)?/,"number"]],strings:[[/'/,{token:"string",next:"@string"}],[/"/,{token:"string.double",next:"@stringDouble"}]],string:[[/[^']+/,"string"],[/''/,"string"],[/'/,{token:"string",next:"@pop"}]],stringDouble:[[/[^"]+/,"string.double"],[/""/,"string.double"],[/"/,{token:"string.double",next:"@pop"}]],complexIdentifiers:[[/\[/,{token:"identifier.quote",next:"@bracketedIdentifier"}],[/"/,{token:"identifier.quote",next:"@quotedIdentifier"}]],bracketedIdentifier:[[/[^\]]+/,"identifier"],[/]]/,"identifier"],[/]/,{token:"identifier.quote",next:"@pop"}]],quotedIdentifier:[[/[^"]+/,"identifier"],[/""/,"identifier"],[/"/,{token:"identifier.quote",next:"@pop"}]],scopes:[]}},dee=function(e){let t,n,r=!1;return function(...i){return r&&t&&function(e,t){return e.length===t.length&&e.every((e,n)=>e===t[n])}(t,i)||(n=e.apply(this,i),t=i,r=!0),n}}(async(e,t,n=100)=>{const r=await e.query(`SELECT * FROM duckdb_functions()\n     WHERE function_name ILIKE ${$6(t.replace(/([%_\\])/g,"\\$1")+"%")} ESCAPE '\\'\n     AND REGEXP_MATCHES(function_name, '^[A-Z]', 'i')\n     ORDER BY function_name\n     LIMIT ${n}\n     `);return Array.from((i=Array.from(F6({arrowTable:r})).map(({function_name:e,function_type:t,return_type:n,example:r,examples:i,parameters:o,parameter_types:a,description:s})=>({name:e,type:t,returnType:n,examples:(null==i?void 0:i.toArray)instanceof Function?i.toArray():"string"==typeof r?[r]:[],parameters:Array.from(o),parameterTypes:Array.from(a),description:s})),i.reduce((e,t)=>{var n;return e.has(t.name)||e.set(t.name,[]),null==(n=e.get(t.name))||n.push(t),e},new Map)).entries()).map(([e,t])=>({name:e,documentation:fee(t)}));var i});function fee(e){return e.length?[mee(e),pee(e),hee(e)].filter(Boolean).join("<br>"):""}function pee(e){var t;const n=null==(t=e[0])?void 0:t.description;return n?`<i>${n}</i>`:""}function hee(e,t=3){const n=Array.from(new Set(e.flatMap(e=>e.examples).filter(Boolean))).slice(0,t).join("\n");return n?`<br><b>Examples:</b><br><pre>${n}</pre>`:""}function mee(e,t=3){const n=e.slice(0,t),r=n.map(gee),i=e.length-n.length,o=i?`(+${i} more overload)`:"";return`<pre>${[...r,...o?[o]:[]].filter(Boolean).join("\n")}</pre>`}function gee({name:e,parameterTypes:t,parameters:n,returnType:r}){const i=`${e}(${n.map((e,n)=>({parameterName:e,parameterType:t[n]})).map(({parameterName:e,parameterType:t})=>t?`${e}: ${t}`:e).join(", ")})`;return r?`${i}: ${r}`:i}const yee=({connector:e,customKeywords:t=[],customFunctions:n=[],tableSchemas:r=[],getLatestSchemas:i,onMount:o,className:a,...s})=>{const l=k.useRef(null),u=k.useRef(null),c=k.useRef(null),d=k.useCallback(()=>{if(!l.current||!u.current)return;const o=u.current;c.current&&c.current.dispose();const a=o.languages.registerCompletionItemProvider("sql",{triggerCharacters:[" ",".",",","(","="],provideCompletionItems:async(a,s)=>{try{let l=r;if(i){l=i().tableSchemas}const u=[],c=a.getWordUntilPosition(s),d={startLineNumber:s.lineNumber,endLineNumber:s.lineNumber,startColumn:c.startColumn,endColumn:c.endColumn},f=a.getLineContent(s.lineNumber).substring(0,s.column-1).trim().toLowerCase(),p=/\b(from|join|into|update|table)\s+\w*$/.test(f),h=/\b(\w+)\.\w*$/.test(f),m=[...lee,...t],g=[...uee,...n];if(h||m.forEach(e=>{u.push({label:e,kind:o.languages.CompletionItemKind.Keyword,insertText:e,range:d,detail:"Keyword",sortText:p?"z"+e:"a"+e})}),!h&&(g.forEach(e=>{u.push({label:e,kind:o.languages.CompletionItemKind.Function,insertText:e,range:d,detail:"Function",sortText:p?"z"+e:"b"+e})}),e)){const t=await dee(e,c.word);for(const{name:e,documentation:n}of t)u.push({label:e,insertText:e,documentation:{value:n,isTrusted:!0,supportHtml:!0},range:d,kind:o.languages.CompletionItemKind.Function,sortText:p?"z"+e:"b"+e})}return l.forEach(e=>{const t=e.tableName;u.push({label:t,kind:o.languages.CompletionItemKind.Class,insertText:t,range:d,detail:"Table",documentation:{value:`Table: ${t}`,isTrusted:!0},sortText:p?"a"+t:"c"+t});let n="";if(h){const e=f.match(/\b(\w+)\.\w*$/);e&&e[1]&&(n=e[1])}h&&n!==t||e.columns.forEach(e=>{const r=e.name,i=e.type;u.push({label:r,kind:o.languages.CompletionItemKind.Field,insertText:r,range:d,detail:`Column (${i})`,documentation:{value:`Column from table ${t}`,isTrusted:!0},sortText:h&&n===t?"a"+r:"d"+r}),h||u.push({label:`${t}.${r}`,kind:o.languages.CompletionItemKind.Field,insertText:`${t}.${r}`,range:d,detail:`Column (${i})`,documentation:{value:`Column from table ${t}`,isTrusted:!0},sortText:"e"+t+r})})}),{suggestions:u}}catch(l){return{suggestions:[]}}}});c.current=a},[t,n,r,i]);k.useEffect(()=>{l.current&&u.current&&d()},[r,d]);const f=k.useCallback((e,r)=>{l.current=e,u.current=r,r.languages.getLanguages().some(e=>"sql"===e.id)||r.languages.register({id:"sql"});const i=[...lee,...t],a=[...uee,...n];r.languages.setMonarchTokensProvider("sql",{...cee,keywords:i,builtinFunctions:a}),d(),e.onDidDispose(()=>{c.current&&c.current.dispose()}),o&&o(e,r)},[t,n,o,d]);return w.jsx(aee,{language:"sql",onMount:f,className:zn("h-full",a),options:{formatOnPaste:!0,formatOnType:!0,wordWrap:"on"},...s})};var vee={},bee={};function wee(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'}).join(",")+"}")}function _ee(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}function xee(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Eee(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+xee(-t,6):t>9999?"+"+xee(t,6):xee(t,4))+"-"+xee(e.getUTCMonth()+1,2)+"-"+xee(e.getUTCDate(),2)+(o?"T"+xee(n,2)+":"+xee(r,2)+":"+xee(i,2)+"."+xee(o,3)+"Z":i?"T"+xee(n,2)+":"+xee(r,2)+":"+xee(i,2)+"Z":r||n?"T"+xee(n,2)+":"+xee(r,2)+"Z":"")}function See(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,l=o<=0,u=!1;function c(){if(l)return bee;if(u)return u=!1,vee;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?l=!0:10===(r=e.charCodeAt(a++))?u=!0:13===r&&(u=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))u=!0;else if(13===r)u=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return l=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==bee;){for(var d=[];r!==vee&&r!==bee;)d.push(r),r=c();t&&null==(d=t(d,s++))||i.push(d)}return i}function i(t,n){return t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?Eee(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=wee(e);return function(r,i){return t(n(r),i,e)}}(e,t):wee(e)});return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=_ee(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=_ee(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}}var kee,Tee=See(",").format,Cee={exports:{}};var Aee,Iee=(kee||(kee=1,Aee=Cee,function(){function e(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function t(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,n)},r.onerror=function(){},r.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(n){}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof d&&d.global===d?d:void 0,o=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(e,o,a){var s=i.URL||i.webkitURL,l=document.createElement("a");o=o||e.name||"download",l.download=o,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?r(l):n(l.href)?t(e,o,a):r(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){r(l)},0))}:"msSaveOrOpenBlob"in navigator?function(i,o,a){if(o=o||i.name||"download","string"!=typeof i)navigator.msSaveOrOpenBlob(e(i,a),o);else if(n(i))t(i,o,a);else{var s=document.createElement("a");s.href=i,s.target="_blank",setTimeout(function(){r(s)})}}:function(e,n,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,r);var s="application/octet-stream"===e.type,l=/constructor/i.test(i.HTMLElement)||i.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||s&&l||o)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=u?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var d=i.URL||i.webkitURL,f=d.createObjectURL(e);a?a.location=f:location.href=f,a=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});i.saveAs=a.saveAs=a,Aee.exports=a}()),Cee.exports);function Oee(e){return"success"===(null==e?void 0:e.status)&&("pragma"===e.type||"explain"===e.type||"select"===e.type)}function Nee({queryResultLimit:e=100,queryResultLimitOptions:t=[100,500,1e3]}={}){return p8((n,r)=>({sqlEditor:{isTablesLoading:!1,queryResultLimit:e,queryResultLimitOptions:t,exportResultsToCsv:(e,t)=>{if(!e)return;const n=new Blob([Tee(e.toArray())],{type:"text/plain;charset=utf-8"});Iee.saveAs(n,t||`export-${T6(5)}.csv`)},createQueryTab:(e="")=>{const t=r().config.sqlEditor,i={id:T6(8),name:A6("Untitled",t.queries.map(e=>e.name)),query:e};return n(e=>hT(e,e=>{e.config.sqlEditor.queries.push(i),e.config.sqlEditor.selectedQueryId=i.id})),i},deleteQueryTab:e=>{const t=r().config.sqlEditor,i=t.queries;if(i.length<=1)return;const o=i.findIndex(t=>t.id===e);if(-1===o)return;const a=t.selectedQueryId===e,s=i.filter(t=>t.id!==e);n(e=>hT(e,e=>{var t,n;if(e.config.sqlEditor.queries=s,a&&s.length>0){const r=Math.max(0,o-1),i=(null==(t=s[r])?void 0:t.id)??(null==(n=s[0])?void 0:n.id);i&&(e.config.sqlEditor.selectedQueryId=i)}}))},renameQueryTab:(e,t)=>{n(n=>hT(n,n=>{const r=n.config.sqlEditor.queries.find(t=>t.id===e);r&&(r.name=t||r.name)}))},updateQueryText:(e,t)=>{n(n=>hT(n,n=>{const r=n.config.sqlEditor.queries.find(t=>t.id===e);r&&(r.query=t)}))},setSelectedQueryId:e=>{n(t=>hT(t,t=>{t.config.sqlEditor.selectedQueryId=e}))},getCurrentQuery:()=>{const e=r().config.sqlEditor,t=e.selectedQueryId,n=e.queries.find(e=>e.id===t);return(null==n?void 0:n.query)||""},selectTable:e=>{n(t=>hT(t,t=>{t.sqlEditor.selectedTable=e}))},clearQueryResults:()=>{n(e=>({...e,sqlEditor:{...e.sqlEditor,queryResults:null,queryError:void 0}}))},parseAndRunCurrentQuery:async()=>r().sqlEditor.parseAndRunQuery(r().sqlEditor.getCurrentQuery()),abortCurrentQuery:()=>{const e=r().sqlEditor.queryResult;"loading"===(null==e?void 0:e.status)&&e.controller&&e.controller.abort(),n(e=>hT(e,e=>{var t;"loading"===(null==(t=e.sqlEditor.queryResult)?void 0:t.status)&&(e.sqlEditor.queryResult.isBeingAborted=!0)}))},setQueryResultLimit:e=>{n(t=>hT(t,t=>{t.sqlEditor.queryResultLimit=e}))},parseAndRunQuery:async e=>{var t;if("loading"===(null==(t=r().sqlEditor.queryResult)?void 0:t.status))throw new Error("Query already running");if(!e.trim())return;const i=new AbortController;let o;n(t=>hT(t,t=>{t.sqlEditor.selectedTable=void 0,t.sqlEditor.queryResult={status:"loading",isBeingAborted:!1,controller:i},t.config.sqlEditor.lastExecutedQuery=e}));try{const t=await r().db.getConnector(),n=i.signal,a=H6(e),s=a.slice(0,-1),l=a[a.length-1];if(!(null==a?void 0:a.length))throw new Error("Empty query");if(n.aborted)throw new Error("Query aborted");const u=await r().db.sqlSelectToJson(l);if(n.aborted)throw new Error("Query aborted");const c=!u.error;if(c){const e=[...s,W6(l,{sanitize:!1,limit:r().sqlEditor.queryResultLimit})].join(";\n"),i=await t.query(e,{signal:n});o={status:"success",type:"select",lastQueryStatement:l,result:i}}else{if(u.error&&"not implemented"!==u.error_type)throw`${u.error_type} ${u.error_subtype}: ${u.error_message}\n${q6(l,Number(u.position)).formatted}`;const r=await t.query(e,{signal:n});o=/^(EXPLAIN)/i.test(l)?{status:"success",type:"explain",lastQueryStatement:l,result:r}:/^(PRAGMA)/i.test(l)?{status:"success",type:"pragma",lastQueryStatement:l,result:r}:{status:"success",type:"exec",lastQueryStatement:l}}if(n.aborted)throw new Error("Query aborted");if((a.length>1||!c)&&r().db.refreshTableSchemas(),n.aborted)throw new Error("Query aborted")}catch(F0){const t=F0 instanceof Error?F0.message:String(F0);o="Query aborted"===t||i.signal.aborted?{status:"aborted"}:{status:"error",error:t}}n(e=>({...e,sqlEditor:{...e.sqlEditor,queryResult:o}}))}}}))}function Dee(e){return f8(t=>e(t))}const Ree=oA({tableName:XC().min(1,"Table name is required").regex(/^[a-zA-Z_][a-zA-Z0-9_]{0,62}$/,"Only letters, digits and underscores are allowed; should not start with a digit"),query:XC().min(1,"Query is required")}),Mee=({query:e,onClose:t,editDataSource:n,onAddOrUpdateSqlQuery:r})=>{const i=Dee(e=>e.db.connector),o=$p({resolver:s7(Ree),defaultValues:{tableName:(null==n?void 0:n.tableName)??"",query:(null==n?void 0:n.sqlQuery)??e.trim()}}),a=k.useCallback(async e=>{try{const{tableName:i,query:a}=e;await r(i,a,null==n?void 0:n.tableName),o.reset(),t()}catch(HOt){o.setError("root",{type:"manual",message:`${HOt}`})}},[r,null==n?void 0:n.tableName,t,o]);return w.jsx(Vp,{...o,children:w.jsxs("form",{onSubmit:o.handleSubmit(a),className:"space-y-4",children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:n?"Edit table query":"Create table from query"}),!n&&w.jsx(Ta,{children:"Create a new table from the results of an SQL query."})]}),o.formState.errors.root&&w.jsx(Wn,{variant:"destructive",children:w.jsx(Yn,{className:"whitespace-pre-wrap font-mono text-xs",children:o.formState.errors.root.message})}),w.jsx(Gp,{control:o.control,name:"tableName",render:({field:e})=>w.jsxs(Zp,{children:[w.jsx(Qp,{children:"Table name:"}),w.jsx(Xp,{children:w.jsx(pf,{...e,className:"font-mono",autoFocus:!0})}),w.jsx(Jp,{})]})}),w.jsx(Gp,{control:o.control,name:"query",render:({field:e})=>w.jsxs(Zp,{className:"flex flex-col",children:[w.jsx(Qp,{children:"SQL query:"}),w.jsx(Xp,{children:w.jsx(yee,{connector:i,value:e.value,onChange:e.onChange,className:"h-[200px] w-full",options:{scrollBeyondLastLine:!1,automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on"}})}),w.jsx(Jp,{})]})}),w.jsxs(Sa,{children:[w.jsx(er,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),w.jsx(er,{type:"submit",disabled:o.formState.isSubmitting,children:n?"Update":"Create"})]})]})})},Pee=e=>{const{isOpen:t,onClose:n,query:r,editDataSource:i,onAddOrUpdateSqlQuery:o}=e;return w.jsx(ba,{open:t,onOpenChange:e=>!e&&n(),children:w.jsx(xa,{className:"sm:max-w-[800px]",children:t&&w.jsx(Mee,{query:r,onClose:n,editDataSource:i,onAddOrUpdateSqlQuery:o})})})},Fee=({className:e})=>{const t=Dee(e=>e.sqlEditor.parseAndRunCurrentQuery),n=Dee(e=>e.sqlEditor.abortCurrentQuery),r=Dee(e=>e.sqlEditor.queryResult),i=navigator.platform.toLowerCase().includes("mac"),o="loading"===(null==r?void 0:r.status),a="loading"===(null==r?void 0:r.status)&&r.isBeingAborted,s=o?a?{icon:w.jsx(Tt,{className:"h-3 w-3 animate-spin"}),text:"Cancelling...",disabled:!0}:{icon:w.jsx(Tt,{className:"h-3 w-3 animate-spin"}),text:"Cancel",disabled:!1,rightIcon:w.jsx(At,{className:"h-3 w-3"})}:{icon:w.jsx(Dt,{className:"h-3 w-3"}),text:"Run",disabled:!1,rightIcon:w.jsx("span",{children:i?"⌘↵":"⌃↵"})};return w.jsxs(qx,{children:[w.jsx(Hx,{asChild:!0,children:w.jsxs(er,{className:zn("flex w-[110px] items-center gap-2",e),variant:"outline",size:"xs",onClick:()=>{o?n():t()},disabled:s.disabled,children:[s.icon,w.jsx("span",{children:s.text}),s.rightIcon]})}),w.jsx(Vx,{children:o?"Cancel the running query":`Use ${i?"Cmd":"Ctrl"}+Enter to run query or selected text`})]})},Lee={scrollBeyondLastLine:!1,automaticLayout:!0,minimap:{enabled:!1},wordWrap:"on",quickSuggestions:!0,suggestOnTriggerCharacters:!0},jee=({className:e,queryId:t})=>{const n=Dee(e=>e.db.tables),r=Dee(e=>e.sqlEditor.parseAndRunQuery),i=Dee(e=>e.db.connector),o=Dee(e=>{var n;return null==(n=e.config.sqlEditor.queries.find(e=>e.id===t))?void 0:n.query}),a=Dee(e=>e.sqlEditor.updateQueryText),s=k.useRef({}),l=k.useCallback(e=>{e&&a(t,e)},[t,a]),u=k.useCallback((e,n)=>{s.current[t]=e,e.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.Enter,()=>{const t=e.getModel(),n=e.getSelection();t&&n&&!n.isEmpty()?r(t.getValueInRange(n)):r(e.getValue())})},[r]);return w.jsx(yee,{connector:i,value:o??"",onChange:l,className:zn("h-full w-full flex-grow",e),options:Lee,onMount:u,tableSchemas:n})},Bee=({isOpen:e,onClose:t,onConfirm:n})=>w.jsx(ba,{open:e,onOpenChange:e=>!e&&t(),children:w.jsxs(xa,{children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Delete Query"}),w.jsx(Ta,{children:"Are you sure you want to delete this query? This action cannot be undone."})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:t,children:"Cancel"}),w.jsx(er,{variant:"destructive",onClick:n,children:"Delete"})]})]})}),$ee=oA({queryName:XC().min(1,"Query name is required")}),zee=({isOpen:e,onClose:t,initialName:n,onRename:r})=>{const i=$p({resolver:s7($ee),defaultValues:{queryName:n}});return k.useEffect(()=>{e&&i.reset({queryName:n})},[e,n,i]),w.jsx(ba,{open:e,onOpenChange:e=>!e&&t(),children:w.jsxs(xa,{children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Rename"}),w.jsx(Ta,{children:"Rename the query to a new name."})]}),w.jsx(Vp,{...i,children:w.jsxs("form",{onSubmit:i.handleSubmit(function(e){r(e.queryName),t()}),className:"space-y-4",children:[w.jsx(Gp,{control:i.control,name:"queryName",render:({field:e})=>w.jsxs(Zp,{children:[w.jsx(Qp,{children:"Query Name"}),w.jsx(Xp,{children:w.jsx(pf,{...e,autoFocus:!0,placeholder:"Enter query name"})}),w.jsx(Jp,{})]})}),w.jsxs(Sa,{children:[w.jsx(er,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),w.jsx(er,{type:"submit",children:"Save"})]})]})})]})})},Uee=({className:e})=>{const t=Dee(e=>e.config.sqlEditor.queries),n=Dee(e=>e.sqlEditor.renameQueryTab),[r,i]=T.useState(null),[o,a]=T.useState(null),[s,l]=T.useState(null),u=Dee(e=>e.sqlEditor.createQueryTab),c=Dee(e=>e.sqlEditor.deleteQueryTab),d=k.useCallback((e,t)=>{l({id:e,name:t})},[]),f=k.useCallback(e=>{s&&n(s.id,e),l(null)},[s,n]),p=k.useCallback((e,t)=>{""!==t.trim()&&n(e,t.trim()),a(null)},[n]),h=k.useCallback(e=>{a(e)},[]),m=k.useCallback(e=>{const n=t.find(t=>t.id===e);n&&""===n.query.trim()?c(e):i(e)},[t,c]),g=k.useCallback(()=>u(),[u]),y=k.useCallback(()=>{r&&(c(r),i(null))},[r,c]);return w.jsxs(w.Fragment,{children:[w.jsx(Bw,{className:zn("h-auto flex-1 flex-wrap",e),children:t.map(e=>w.jsxs("div",{className:"relative",children:[w.jsx($w,{value:e.id,className:"hover:bg-accent min-w-[60px] max-w-[150px] overflow-hidden px-6 py-0 pr-8",children:w.jsx("div",{className:"flex h-6 items-center",onDoubleClick:()=>h(e.id),children:o!==e.id?w.jsx("div",{children:e.name}):w.jsx(hf,{value:e.name,onChange:t=>p(e.id,t),className:"h-6 truncate text-sm",isEditing:o===e.id,onEditingChange:e=>{e||a(null)}})})}),w.jsxs(uf,{children:[w.jsx(cf,{children:w.jsx("div",{className:"hover:bg-accent absolute right-0 top-1/2 flex h-6 w-6 -translate-y-1/2 cursor-pointer items-center justify-center rounded-sm",children:w.jsx(gt,{className:"h-3 w-3"})})}),w.jsxs(df,{children:[w.jsx(ff,{onClick:()=>{d(e.id,e.name)},children:"Rename"}),t.length>1&&w.jsx(ff,{onClick:()=>{m(e.id)},className:"text-red-500",children:"Delete"})]})]})]},e.id))}),w.jsx(er,{size:"icon",variant:"ghost",onClick:g,className:"ml-2",children:w.jsx(Rt,{className:"h-4 w-4"})}),w.jsx(Bee,{isOpen:null!==r,onClose:()=>i(null),onConfirm:y}),w.jsx(zee,{isOpen:null!==s,onClose:()=>l(null),initialName:(null==s?void 0:s.name)??"",onRename:f})]})},qee=({className:e})=>{const t=Dee(e=>e.config.sqlEditor.selectedQueryId),n=Dee(e=>e.config.sqlEditor.queries),r=Dee(e=>e.sqlEditor.setSelectedQueryId);return w.jsxs(jw,{value:t,onValueChange:r,className:zn("flex h-full flex-col","overflow-visible",e),children:[w.jsxs("div",{className:"border-border flex items-center border-b p-1",children:[w.jsx(Fee,{}),w.jsx(Uee,{})]}),n.map(e=>w.jsx(zw,{value:e.id,className:"relative h-full flex-grow flex-col data-[state=active]:flex",children:w.jsx("div",{className:"absolute inset-0 h-full w-full flex-grow",children:e.id===t&&w.jsx(jee,{queryId:e.id})})},e.id))]})},Hee=({className:e,renderActions:t,fontSize:n="text-xs",onRowClick:r,onRowDoubleClick:i})=>{const o=Dee(e=>e.sqlEditor.queryResult),a=Dee(e=>e.sqlEditor.setQueryResultLimit),s=Dee(e=>e.sqlEditor.queryResultLimit),l=Dee(e=>e.sqlEditor.queryResultLimitOptions),u=T.useMemo(()=>l.includes(s)?l:[s,...l],[l,s]),c=F9(Oee(o)?o.result:void 0);return o?"loading"===(null==o?void 0:o.status)?w.jsx(rw,{h:"100%"}):"aborted"===(null==o?void 0:o.status)?w.jsx("div",{className:"p-5 font-mono text-xs leading-tight text-red-500",children:"Query was aborted"}):"error"===(null==o?void 0:o.status)?w.jsx("div",{className:"h-full w-full overflow-auto p-5",children:w.jsx("pre",{className:"whitespace-pre-wrap text-xs leading-tight text-red-500",children:o.error})}):"success"===(null==o?void 0:o.status)?w.jsx("div",{className:zn("relative flex h-full w-full flex-grow flex-col overflow-hidden",e),children:Oee(o)?w.jsxs("div",{className:"flex h-full w-full flex-col",children:[w.jsx(N9,{...c,className:"flex-grow overflow-hidden",fontSize:n,isFetching:!1,onRowClick:r,onRowDoubleClick:i}),w.jsxs("div",{className:"bg-background flex w-full items-center gap-2 px-4 py-1",children:[o.result?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"font-mono text-xs",children:`${e3(o.result.numRows??0)} rows`}),w.jsxs(Ev,{value:s.toString(),onValueChange:e=>a(parseInt(e)),children:[w.jsx(Tv,{className:"h-6 w-fit",children:w.jsx("div",{className:"text-xs text-gray-500",children:`Limit results to ${e3(s)} rows`})}),w.jsx(Iv,{children:u.map(e=>w.jsx(Nv,{value:e.toString(),children:`${e3(e)} rows`},e))})]})]}):null,w.jsx("div",{className:"flex-1"}),t?t(o.lastQueryStatement):void 0]})]}):w.jsx("pre",{className:"p-4 text-xs leading-tight text-green-500",children:"Successfully executed query"})}):null:null},Vee=({className:e,text:t,icon:n,url:r="https://duckdb.org/docs/sql/introduction",variant:i="outline"})=>w.jsx(er,{asChild:!0,size:"sm",variant:i,className:zn(e),children:w.jsx("a",{href:r,target:"_blank",rel:"noreferrer",children:w.jsx(Wee,{text:t,icon:n})})}),Wee=({className:e,text:t="SQL reference",icon:n=w.jsx(ot,{})})=>w.jsxs("div",{className:zn("flex items-center gap-2",e),children:[n,w.jsx("span",{className:"text-xs",children:t})]}),Gee=({className:e,title:t,showDocs:n,documentationPanel:r,onToggleDocs:i,children:o})=>w.jsxs("div",{className:zn("flex w-full items-center gap-2 px-2 py-1",e),children:[t&&w.jsx("h2",{className:"text-md ml-1 font-semibold",children:t}),o,w.jsx("div",{className:"flex-grow"}),r?w.jsx(er,{size:"sm",variant:n?"secondary":"outline",onClick:()=>null==i?void 0:i(!n),children:w.jsx(Wee,{})}):w.jsx(Vee,{})]});function Yee(e){const{className:t,asChild:n,children:r}=e,i=n?M:"div";return w.jsx(i,{className:zn("hover:bg-foreground/10 h-[22px] w-full flex-grow cursor-pointer select-none rounded-sm p-[1px]",t),children:w.jsx("div",{className:zn("group flex w-full items-center overflow-hidden",t),children:r})})}const Kee=e=>{const{children:t}=e;return w.jsx("div",{className:"absolute right-0 top-[1px] opacity-0 outline-none group-hover:opacity-100",children:w.jsxs(uf,{children:[w.jsx(cf,{asChild:!0,children:w.jsx("div",{className:"hover:bg-foreground/10 flex h-5 w-7 items-center justify-center p-0 outline-none transition-colors",children:w.jsx(gt,{size:"16px"})})}),w.jsx(df,{align:"start",side:"bottom",children:t})]})})},Zee=k.forwardRef(({className:e,...t},n)=>{const{onClick:r}=t;return w.jsx(ff,{ref:n,className:zn("gap-2 text-xs",e),...t,onClick:r?e=>{e.stopPropagation(),r(e)}:void 0})});Zee.displayName="TreeNodeActionsMenuItem";const Qee=e=>{const{className:t,nodeObject:n,additionalMenuItems:r}=e;return w.jsxs(Yee,{asChild:!0,className:t,nodeObject:n,children:[w.jsxs("div",{className:"flex w-full items-center space-x-2",children:[w.jsx("span",{className:"text-[11px] w-[70px] flex-shrink-0 truncate",children:n.columnType}),w.jsx("span",{className:"text-[11px]",children:n.name})]}),w.jsxs(Kee,{children:[w.jsxs(Zee,{onClick:()=>navigator.clipboard.writeText(n.name),children:[w.jsx(pt,{width:"15px"}),"Copy column name"]}),r]})]})},Xee=(e,t)=>{const{database:n,schema:r,name:i,sql:o,isView:a}=e,s=B6({database:n,schema:r,table:i});return w.jsxs(w.Fragment,{children:[t&&w.jsxs(Zee,{onClick:()=>{t.onOpen()},children:[w.jsx(bt,{width:"15px"}),"View data"]}),w.jsxs(Zee,{onClick:()=>{navigator.clipboard.writeText(s.table)},children:[w.jsx(pt,{width:"15px"}),"Copy ",a?"view":"table"," name"]}),w.jsxs(Zee,{onClick:()=>{navigator.clipboard.writeText(s.toString())},children:[w.jsx(pt,{width:"15px"}),"Copy qualified ",a?"view":"table"," name"]}),w.jsxs(Zee,{onClick:()=>{navigator.clipboard.writeText(`SELECT * FROM ${s}`)},children:[w.jsx(pt,{width:"15px"}),"Copy SELECT query"]}),w.jsxs(Zee,{onClick:()=>{o&&navigator.clipboard.writeText(o)},disabled:!o,children:[w.jsx(pt,{width:"15px"}),"Copy CREATE ",a?"VIEW":"TABLE"]})]})},Jee=e=>{const{className:t,nodeObject:n,renderMenuItems:r=Xee}=e,i=Jx(),{database:o,schema:a,name:s,rowCount:l,isView:u}=n,c=B6({database:o,schema:a,table:s}),d=`SELECT * FROM ${c}`;return w.jsxs(w.Fragment,{children:[w.jsxs(Yee,{asChild:!0,className:t,nodeObject:n,children:[w.jsxs("div",{className:"relative flex w-full items-center space-x-2",children:[u?w.jsx(Ht,{size:"16px",className:"shrink-0 text-blue-500"}):w.jsx(Bt,{size:"16px",className:"shrink-0 text-blue-500"}),w.jsxs("div",{className:"flex w-full items-center justify-between gap-2 overflow-hidden",children:[w.jsx("span",{className:"text-sm truncate",children:s}),void 0!==l&&w.jsxs("span",{className:"text-muted-foreground/50 ml-1 whitespace-nowrap pr-5 text-xs flex-shrink-0",children:[e3(l)," ",1===l?"row":"rows"]})]})]}),w.jsx(Kee,{children:r(n,i)})]}),w.jsx(j9,{title:c.table,query:d,tableModal:i})]})},ete=e=>{const{className:t,nodeObject:n,additionalMenuItems:r}=e;return w.jsxs(Yee,{asChild:!0,className:t,nodeObject:n,children:[w.jsxs("div",{className:"flex w-full items-center space-x-2",children:[w.jsx(_t,{size:"16px",className:"shrink-0 text-yellow-500"}),w.jsx("span",{className:"text-sm",children:n.name})]}),w.jsxs(Kee,{children:[w.jsxs(Zee,{onClick:()=>navigator.clipboard.writeText(n.name),children:[w.jsx(pt,{width:"15px"}),"Copy schema name"]}),r]})]})},tte=e=>{const{className:t,nodeObject:n,additionalMenuItems:r}=e;return w.jsxs(Yee,{asChild:!0,className:t,nodeObject:n,children:[w.jsxs("div",{className:"flex w-full items-center space-x-2",children:[w.jsx(ht,{size:"16px",className:"shrink-0 text-green-500"}),w.jsx("span",{className:"text-sm",children:n.name})]}),w.jsxs(Kee,{children:[w.jsxs(Zee,{onClick:()=>navigator.clipboard.writeText(n.name),children:[w.jsx(pt,{width:"15px"}),"Copy database name"]}),r]})]})},nte=e=>{const{object:t}=e;switch(t.type){case"database":return w.jsx(tte,{nodeObject:t});case"schema":return w.jsx(ete,{nodeObject:t});case"table":return w.jsx(Jee,{nodeObject:t});case"column":return w.jsx(Qee,{nodeObject:t});default:return null}},rte=({className:e,schemaTrees:t,renderNode:n=nte,skipSingleDatabaseOrSchema:r=!1})=>{var i,o,a,s,l,u;const c=r?t.length>1?t:(null==(i=t[0])?void 0:i.children)&&(null==(a=null==(o=t[0])?void 0:o.children)?void 0:a.length)>1?t[0].children:null==(u=null==(l=null==(s=t[0])?void 0:s.children)?void 0:l[0])?void 0:u.children:t;return w.jsx("div",{className:zn("flex h-full flex-col gap-2 overflow-auto p-0",e),children:null==c?void 0:c.map(e=>w.jsx(Wx,{treeData:e,renderNode:n},e.object.name))})},ite=({className:e,schema:t="*"})=>{const n=Dee(e=>e.db.schemaTrees),r=k.useMemo(()=>"*"===t?n:"function"==typeof t?null==n?void 0:n.filter(e=>t(e.object.name)):null==n?void 0:n.filter(e=>e.object.name===t),[t,n]),i=Dee(e=>e.db.isRefreshingTableSchemas);return w.jsxs(mb,{className:zn("relative flex h-full flex-col gap-2 overflow-auto p-2",e),children:[r&&w.jsx(rte,{schemaTrees:r}),i&&w.jsx(rw,{className:"bg-background/80 absolute inset-0 h-full"}),w.jsx(gb,{orientation:"vertical"}),w.jsx(gb,{orientation:"horizontal"})]})},ote=T.memo(e=>{const{schema:t="*",documentationPanel:n,queryResultProps:r}=e,i=f8(e=>e.room.addOrUpdateSqlQueryDataSource),o=Dee(e=>{var t,n;return"success"===(null==(t=e.sqlEditor.queryResult)?void 0:t.status)&&"select"===(null==(n=e.sqlEditor.queryResult)?void 0:n.type)?e.sqlEditor.queryResult.lastQueryStatement:""}),[a,s]=k.useState(!1),[l,u]=k.useState(!1),c=k.useCallback(e=>{s(e)},[]),d=k.useCallback(()=>{u(!0)},[]);return w.jsxs("div",{className:"relative flex h-full w-full flex-col overflow-hidden",children:[w.jsx(Gee,{title:"SQL Editor",showDocs:a,documentationPanel:n,onToggleDocs:c}),w.jsx("div",{className:"bg-muted h-full flex-grow",children:w.jsxs(ty,{direction:"horizontal",className:"h-full",children:[w.jsx(ny,{defaultSize:a?70:100,children:w.jsxs(ty,{direction:"vertical",className:"h-full",children:[w.jsx(ny,{defaultSize:50,className:"flex flex-row",children:w.jsxs(ty,{direction:"horizontal",children:[w.jsx(ny,{defaultSize:20,children:w.jsx(ite,{schema:t})}),w.jsx(ry,{withHandle:!0}),w.jsx(ny,{defaultSize:80,className:"!overflow-visible",children:w.jsx(qee,{})})]})}),w.jsx(ry,{withHandle:!0}),w.jsx(ny,{defaultSize:50,children:w.jsx(Hee,{onRowClick:null==r?void 0:r.onRowClick,onRowDoubleClick:null==r?void 0:r.onRowDoubleClick,renderActions:()=>w.jsx("div",{className:"flex gap-2",children:w.jsxs(er,{size:"xs",onClick:d,children:[w.jsx(Rt,{className:"h-4 w-4"}),"New table"]})})})})]})}),a&&w.jsxs(w.Fragment,{children:[w.jsx(ry,{withHandle:!0}),w.jsx(ny,{defaultSize:30,children:n})]})]})}),w.jsx(Pee,{query:o,isOpen:l,onClose:()=>u(!1),onAddOrUpdateSqlQuery:i})]})}),ate=e=>{const{isOpen:t,onClose:n}=e,r=k.useCallback(e=>{e||n()},[n]);return w.jsxs(ba,{open:t,onOpenChange:r,children:[w.jsx(_a,{className:"bg-background/80"}),w.jsxs(xa,{className:"h-[100vh] max-h-[100vh] w-[100vw] max-w-[100vw] p-3",children:[w.jsxs(Ea,{className:"sr-only",children:[w.jsx(ka,{children:"SQL Editor"}),w.jsx(Ta,{children:"SQL editor for querying and managing database tables"})]}),w.jsx(k.Suspense,{fallback:w.jsx(rw,{h:"100%"}),children:w.jsx(ote,{...e})})]})]})},ste=oA({sqlEditor:oA({queries:iA(oA({id:XC().describe("Query identifier."),name:XC().describe("Query name."),query:XC().describe("SQL query to execute.")})),selectedQueryId:XC().default("default").describe("The id of the currently selected query."),lastExecutedQuery:XC().optional().describe("Last executed query")})});var lte,ute={},cte={},dte={},fte={};function pte(){if(lte)return fte;lte=1,Object.defineProperty(fte,"__esModule",{value:!0}),fte.toBig=fte.shrSL=fte.shrSH=fte.rotrSL=fte.rotrSH=fte.rotrBL=fte.rotrBH=fte.rotr32L=fte.rotr32H=fte.rotlSL=fte.rotlSH=fte.rotlBL=fte.rotlBH=fte.add5L=fte.add5H=fte.add4L=fte.add4H=fte.add3L=fte.add3H=void 0,fte.add=y,fte.fromBig=n,fte.split=r;const e=BigInt(2**32-1),t=BigInt(32);function n(n,r=!1){return r?{h:Number(n&e),l:Number(n>>t&e)}:{h:0|Number(n>>t&e),l:0|Number(n&e)}}function r(e,t=!1){const r=e.length;let i=new Uint32Array(r),o=new Uint32Array(r);for(let a=0;a<r;a++){const{h:r,l:s}=n(e[a],t);[i[a],o[a]]=[r,s]}return[i,o]}const i=(e,n)=>BigInt(e>>>0)<<t|BigInt(n>>>0);fte.toBig=i;const o=(e,t,n)=>e>>>n;fte.shrSH=o;const a=(e,t,n)=>e<<32-n|t>>>n;fte.shrSL=a;const s=(e,t,n)=>e>>>n|t<<32-n;fte.rotrSH=s;const l=(e,t,n)=>e<<32-n|t>>>n;fte.rotrSL=l;const u=(e,t,n)=>e<<64-n|t>>>n-32;fte.rotrBH=u;const c=(e,t,n)=>e>>>n-32|t<<64-n;fte.rotrBL=c;const d=(e,t)=>t;fte.rotr32H=d;const f=(e,t)=>e;fte.rotr32L=f;const p=(e,t,n)=>e<<n|t>>>32-n;fte.rotlSH=p;const h=(e,t,n)=>t<<n|e>>>32-n;fte.rotlSL=h;const m=(e,t,n)=>t<<n-32|e>>>64-n;fte.rotlBH=m;const g=(e,t,n)=>e<<n-32|t>>>64-n;function y(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:0|i}}fte.rotlBL=g;const v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);fte.add3L=v;const b=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;fte.add3H=b;const w=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);fte.add4L=w;const _=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0;fte.add4H=_;const x=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);fte.add5L=x;const E=(e,t,n,r,i,o)=>t+n+r+i+o+(e/2**32|0)|0;fte.add5H=E;const S={fromBig:n,split:r,toBig:i,shrSH:o,shrSL:a,rotrSH:s,rotrSL:l,rotrBH:u,rotrBL:c,rotr32H:d,rotr32L:f,rotlSH:p,rotlSL:h,rotlBH:m,rotlBL:g,add:y,add3L:v,add3H:b,add4L:w,add4H:_,add5H:E,add5L:x};return fte.default=S,fte}var hte,mte,gte,yte,vte,bte={},wte={};function _te(){return hte||(hte=1,Object.defineProperty(wte,"__esModule",{value:!0}),wte.crypto=void 0,wte.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0),wte}function xte(){return mte||(mte=1,function(e){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.Hash=e.nextTick=e.swap32IfBE=e.byteSwapIfBE=e.swap8IfBE=e.isLE=void 0,e.isBytes=n,e.anumber=r,e.abytes=i,e.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");r(e.outputLen),r(e.blockLen)},e.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},e.aoutput=function(e,t){i(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)},e.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},e.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},e.clean=function(...e){for(let t=0;t<e.length;t++)e[t].fill(0)},e.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},e.rotr=function(e,t){return e<<32-t|e>>>t},e.rotl=function(e,t){return e<<t|e>>>32-t>>>0},e.byteSwap=o,e.byteSwap32=a,e.bytesToHex=function(e){if(i(e),s)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=l[e[n]];return t},e.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(s)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let i=0,o=0;i<n;i++,o+=2){const t=c(e.charCodeAt(o)),n=c(e.charCodeAt(o+1));if(void 0===t||void 0===n){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[i]=16*t+n}return r},e.asyncLoop=async function(t,n,r){let i=Date.now();for(let o=0;o<t;o++){r(o);const t=Date.now()-i;t>=0&&t<n||(await(0,e.nextTick)(),i+=t)}},e.utf8ToBytes=d,e.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},e.toBytes=f,e.kdfInputToBytes=function(e){"string"==typeof e&&(e=d(e));return i(e),e},e.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];i(n),t+=n.length}const n=new Uint8Array(t);for(let r=0,i=0;r<e.length;r++){const t=e[r];n.set(t,i),i+=t.length}return n},e.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("options should be object or undefined");return Object.assign(e,t)},e.createHasher=p,e.createOptHasher=h,e.createXOFer=m,e.randomBytes=function(e=32){if(t.crypto&&"function"==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(e));if(t.crypto&&"function"==typeof t.crypto.randomBytes)return Uint8Array.from(t.crypto.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")};const t=_te();function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!n(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function o(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function a(e){for(let t=0;t<e.length;t++)e[t]=o(e[t]);return e}e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.swap8IfBE=e.isLE?e=>e:e=>o(e),e.byteSwapIfBE=e.swap8IfBE,e.swap32IfBE=e.isLE?e=>e:a;const s=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));const u={_0:48,_9:57,A:65,F:70,a:97,f:102};function c(e){return e>=u._0&&e<=u._9?e-u._0:e>=u.A&&e<=u.F?e-(u.A-10):e>=u.a&&e<=u.f?e-(u.a-10):void 0}function d(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function f(e){return"string"==typeof e&&(e=d(e)),i(e),e}e.nextTick=async()=>{};function p(e){const t=t=>e().update(f(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function h(e){const t=(t,n)=>e(n).update(f(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}function m(e){const t=(t,n)=>e(n).update(f(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t}e.Hash=class{},e.wrapConstructor=p,e.wrapConstructorWithOpts=h,e.wrapXOFConstructorWithOpts=m}(bte)),bte}function Ete(){if(gte)return dte;gte=1,Object.defineProperty(dte,"__esModule",{value:!0}),dte.shake256=dte.shake128=dte.keccak_512=dte.keccak_384=dte.keccak_256=dte.keccak_224=dte.sha3_512=dte.sha3_384=dte.sha3_256=dte.sha3_224=dte.Keccak=void 0,dte.keccakP=g;const e=pte(),t=xte(),n=BigInt(0),r=BigInt(1),i=BigInt(2),o=BigInt(7),a=BigInt(256),s=BigInt(113),l=[],u=[],c=[];for(let w=0,_=r,x=1,E=0;w<24;w++){[x,E]=[E,(2*x+3*E)%5],l.push(2*(5*E+x)),u.push((w+1)*(w+2)/2%64);let e=n;for(let t=0;t<7;t++)_=(_<<r^(_>>o)*s)%a,_&i&&(e^=r<<(r<<BigInt(t))-r);c.push(e)}const d=(0,e.split)(c,!0),f=d[0],p=d[1],h=(t,n,r)=>r>32?(0,e.rotlBH)(t,n,r):(0,e.rotlSH)(t,n,r),m=(t,n,r)=>r>32?(0,e.rotlBL)(t,n,r):(0,e.rotlSL)(t,n,r);function g(e,n=24){const r=new Uint32Array(10);for(let t=24-n;t<24;t++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,o=r[i],a=r[i+1],s=h(o,a,1)^r[n],l=m(o,a,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=s,e[t+r+1]^=l}let n=e[2],i=e[3];for(let t=0;t<24;t++){const r=u[t],o=h(n,i,r),a=m(n,i,r),s=l[t];n=e[s],i=e[s+1],e[s]=o,e[s+1]=a}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=f[t],e[1]^=p[t]}(0,t.clean)(r)}class y extends t.Hash{constructor(e,n,r,i=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=o,(0,t.anumber)(r),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=(0,t.u32)(this.state)}clone(){return this._cloneInto()}keccak(){(0,t.swap32IfBE)(this.state32),g(this.state32,this.rounds),(0,t.swap32IfBE)(this.state32),this.posOut=0,this.pos=0}update(e){(0,t.aexists)(this),e=(0,t.toBytes)(e),(0,t.abytes)(e);const{blockLen:n,state:r}=this,i=e.length;for(let t=0;t<i;){const o=Math.min(n-this.pos,i-t);for(let n=0;n<o;n++)r[this.pos++]^=e[t++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,t.aexists)(this,!1),(0,t.abytes)(e),this.finish();const n=this.state,{blockLen:r}=this;for(let t=0,i=e.length;t<i;){this.posOut>=r&&this.keccak();const o=Math.min(r-this.posOut,i-t);e.set(n.subarray(this.posOut,this.posOut+o),t),this.posOut+=o,t+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,t.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,t.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,(0,t.clean)(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:i,enableXOF:o}=this;return e||(e=new y(t,n,r,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=r,e.enableXOF=o,e.destroyed=this.destroyed,e}}dte.Keccak=y;const v=(e,n,r)=>(0,t.createHasher)(()=>new y(n,e,r));dte.sha3_224=v(6,144,28),dte.sha3_256=v(6,136,32),dte.sha3_384=v(6,104,48),dte.sha3_512=v(6,72,64),dte.keccak_224=v(1,144,28),dte.keccak_256=v(1,136,32),dte.keccak_384=v(1,104,48),dte.keccak_512=v(1,72,64);const b=(e,n,r)=>(0,t.createXOFer)((t={})=>new y(n,e,void 0===t.dkLen?r:t.dkLen,!0));return dte.shake128=b(31,168,16),dte.shake256=b(31,136,32),dte}function Ste(){if(yte)return cte;yte=1;const{sha3_512:e}=Ete(),t=(e=4,t=Math.random)=>{let n="";for(;n.length<e;)n+=Math.floor(36*t()).toString(36);return n};function n(e){let t=0n;for(const n of e.values()){t=(t<<8n)+BigInt(n)}return t}const r=(t="")=>n(e(t)).toString(36).slice(1),i=Array.from({length:26},(e,t)=>String.fromCharCode(t+97)),o=({globalObj:e=(void 0!==d?d:"undefined"!=typeof window?window:{}),random:n=Math.random}={})=>{const i=Object.keys(e).toString(),o=i.length?i+t(32,n):t(32,n);return r(o).substring(0,32)},a=e=>()=>e++,s=({random:e=Math.random,counter:n=a(Math.floor(476782367*e())),length:s=24,fingerprint:l=o({random:e})}={})=>function(){const o=(e=>i[Math.floor(e()*i.length)])(e),a=Date.now().toString(36),u=n().toString(36),c=t(s,e);return`${o+r(`${a+c+u+l}`).substring(1,s)}`},l=s();return cte.getConstants=()=>({defaultLength:24,bigLength:32}),cte.init=s,cte.createId=l,cte.bufToBigInt=n,cte.createCounter=a,cte.createFingerprint=o,cte.isCuid=(e,{minLength:t=2,maxLength:n=32}={})=>{const r=e.length,i=/^[0-9a-z]+$/;try{if("string"==typeof e&&r>=t&&r<=n&&i.test(e))return!0}finally{}return!1},cte}var kte=function(){if(vte)return ute;vte=1;const{createId:e,init:t,getConstants:n,isCuid:r}=Ste();return ute.createId=e,ute.init=t,ute.getConstants=n,ute.isCuid=r,ute}();const Tte={},Cte=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const i=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),a=(null==o?void 0:o.nonce)||(null==o?void 0:o.getAttribute("nonce"));r=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in Tte)return;Tte[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(!!n)for(let n=i.length-1;n>=0;n--){const r=i[n];if(r.href===e&&(!t||"stylesheet"===r.rel))return}else if(document.querySelector(`link[href="${e}"]${r}`))return;const o=document.createElement("link");return o.rel=t?"stylesheet":"modulepreload",t||(o.as="script"),o.crossOrigin="",o.href=e,a&&o.setAttribute("nonce",a),document.head.appendChild(o),t?new Promise((t,n)=>{o.addEventListener("load",t),o.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};var Ate,Ite="vercel.ai.error",Ote=Symbol.for(Ite),Nte=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[Ate]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,Ite)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};Ate=Ote;var Dte,Rte=Nte,Mte="AI_APICallError",Pte=`vercel.ai.error.${Mte}`,Fte=Symbol.for(Pte),Lte=class extends Rte{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:o,cause:a,isRetryable:s=null!=r&&(408===r||409===r||429===r||r>=500),data:l}){super({name:Mte,message:e,cause:a}),this[Dte]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=o,this.isRetryable=s,this.data=l}static isInstance(e){return Rte.hasMarker(e,Pte)}};Dte=Fte;var jte,Bte="AI_EmptyResponseBodyError",$te=`vercel.ai.error.${Bte}`,zte=Symbol.for($te),Ute=class extends Rte{constructor({message:e="Empty response body"}={}){super({name:Bte,message:e}),this[jte]=!0}static isInstance(e){return Rte.hasMarker(e,$te)}};function qte(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}jte=zte;var Hte,Vte="AI_InvalidArgumentError",Wte=`vercel.ai.error.${Vte}`,Gte=Symbol.for(Wte),Yte=class extends Rte{constructor({message:e,cause:t,argument:n}){super({name:Vte,message:e,cause:t}),this[Hte]=!0,this.argument=n}static isInstance(e){return Rte.hasMarker(e,Wte)}};Hte=Gte;var Kte,Zte="AI_InvalidPromptError",Qte=`vercel.ai.error.${Zte}`,Xte=Symbol.for(Qte),Jte=class extends Rte{constructor({prompt:e,message:t,cause:n}){super({name:Zte,message:`Invalid prompt: ${t}`,cause:n}),this[Kte]=!0,this.prompt=e}static isInstance(e){return Rte.hasMarker(e,Qte)}};Kte=Xte;var ene,tne="AI_InvalidResponseDataError",nne=`vercel.ai.error.${tne}`,rne=Symbol.for(nne),ine=class extends Rte{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:tne,message:t}),this[ene]=!0,this.data=e}static isInstance(e){return Rte.hasMarker(e,nne)}};ene=rne;var one,ane="AI_JSONParseError",sne=`vercel.ai.error.${ane}`,lne=Symbol.for(sne),une=class extends Rte{constructor({text:e,cause:t}){super({name:ane,message:`JSON parsing failed: Text: ${e}.\nError message: ${qte(t)}`,cause:t}),this[one]=!0,this.text=e}static isInstance(e){return Rte.hasMarker(e,sne)}};one=lne;var cne,dne="AI_LoadAPIKeyError",fne=`vercel.ai.error.${dne}`,pne=Symbol.for(fne),hne=class extends Rte{constructor({message:e}){super({name:dne,message:e}),this[cne]=!0}static isInstance(e){return Rte.hasMarker(e,fne)}};cne=pne;var mne,gne="AI_NoSuchModelError",yne=`vercel.ai.error.${gne}`,vne=Symbol.for(yne),bne=class extends Rte{constructor({errorName:e=gne,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[mne]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return Rte.hasMarker(e,yne)}};mne=vne;var wne,_ne="AI_TooManyEmbeddingValuesForCallError",xne=`vercel.ai.error.${_ne}`,Ene=Symbol.for(xne),Sne=class extends Rte{constructor(e){super({name:_ne,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[wne]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Rte.hasMarker(e,xne)}};wne=Ene;var kne,Tne="AI_TypeValidationError",Cne=`vercel.ai.error.${Tne}`,Ane=Symbol.for(Cne);kne=Ane;var Ine,One=class e extends Rte{constructor({value:e,cause:t}){super({name:Tne,message:`Type validation failed: Value: ${JSON.stringify(e)}.\nError message: ${qte(t)}`,cause:t}),this[kne]=!0,this.value=e}static isInstance(e){return Rte.hasMarker(e,Cne)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}},Nne="AI_UnsupportedFunctionalityError",Dne=`vercel.ai.error.${Nne}`,Rne=Symbol.for(Dne),Mne=class extends Rte{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:Nne,message:t}),this[Ine]=!0,this.functionality=e}static isInstance(e){return Rte.hasMarker(e,Dne)}};Ine=Rne;let Pne=(e,t=21)=>(n=t)=>{let r="",i=0|n;for(;i--;)r+=e[Math.random()*e.length|0];return r};var Fne,Lne={exports:{}};var jne=function(){if(Fne)return Lne.exports;Fne=1;const e="undefined"!=typeof Buffer,t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(r,o,a){null==a&&null!==o&&"object"==typeof o&&(a=o,o=void 0),e&&Buffer.isBuffer(r)&&(r=r.toString()),r&&65279===r.charCodeAt(0)&&(r=r.slice(1));const s=JSON.parse(r,o);if(null===s||"object"!=typeof s)return s;const l=a&&a.protoAction||"error",u=a&&a.constructorAction||"error";if("ignore"===l&&"ignore"===u)return s;if("ignore"!==l&&"ignore"!==u){if(!1===t.test(r)&&!1===n.test(r))return s}else if("ignore"!==l&&"ignore"===u){if(!1===t.test(r))return s}else if(!1===n.test(r))return s;return i(s,{protoAction:l,constructorAction:u,safe:a&&a.safe})}function i(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let i=[e];for(;i.length;){const e=i;i=[];for(const o of e){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(!0===r)return null;if("error"===t)throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if("ignore"!==n&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(const e in o){const t=o[e];t&&"object"==typeof t&&i.push(t)}}}return e}function o(e,t,n){const i=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(e,t,n)}finally{Error.stackTraceLimit=i}}return Lne.exports=o,Lne.exports.default=o,Lne.exports.parse=o,Lne.exports.safeParse=function(e,t){const n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(e,t,{safe:!0})}catch(i){return null}finally{Error.stackTraceLimit=n}},Lne.exports.scan=i,Lne.exports}();const Bne=f(jne);var $ne={};function zne(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function Une(){let e,t,n,r="",i=[];function o(e,t){if(""===e)return void a(t);if(e.startsWith(":"))return;const n=e.indexOf(":");if(-1===n)return void s(e,"");const r=n+1;s(e.slice(0,n),r<e.length&&" "===e[r]?e.slice(r+1):e.slice(r))}function a(r){i.length>0&&(r.enqueue({event:e,data:i.join("\n"),id:t,retry:n}),i=[],e=void 0,n=void 0)}function s(r,o){switch(r){case"event":e=o;break;case"data":i.push(o);break;case"id":t=o;break;case"retry":const r=parseInt(o,10);isNaN(r)||(n=r)}}return new TransformStream({transform(e,t){const{lines:n,incompleteLine:i}=function(e,t){const n=[];let r=e;for(let i=0;i<t.length;){const e=t[i++];"\n"===e?(n.push(r),r=""):"\r"===e?(n.push(r),r="","\n"===t[i]&&i++):r+=e}return{lines:n,incompleteLine:r}}(r,e);r=i;for(let r=0;r<n.length;r++)o(n[r],t)},flush(e){o(r,e),a(e)}})}function qne(e){const t={};return e.headers.forEach((e,n)=>{t[n]=e}),t}var Hne=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Pne(n,t);if(null==e)return i;if(n.includes(r))throw new Yte({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return t=>`${e}${r}${i(t)}`},Vne=Hne();function Wne(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}function Gne({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if("string"==typeof e)return e;if(null!=e)throw new hne({message:`${r} API key must be a string.`});if("undefined"==typeof process)throw new hne({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(null==(e=$ne[t]))throw new hne({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new hne({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var Yne=Symbol.for("vercel.ai.validator");function Kne(e){return function(e){return"object"==typeof e&&null!==e&&Yne in e&&!0===e[Yne]&&"validate"in e}(e)?e:(t=e,n=e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}},{[Yne]:!0,validate:n});var t,n}function Zne({value:e,schema:t}){const n=Kne(t);try{if(null==n.validate)return{success:!0,value:e};const t=n.validate(e);return t.success?t:{success:!1,error:One.wrap({value:e,cause:t.error})}}catch(r){return{success:!1,error:One.wrap({value:e,cause:r})}}}function Qne({text:e,schema:t}){try{const n=Bne.parse(e);return null==t?n:function({value:e,schema:t}){const n=Zne({value:e,schema:t});if(!n.success)throw One.wrap({value:e,cause:n.error});return n.value}({value:n,schema:t})}catch(n){if(une.isInstance(n)||One.isInstance(n))throw n;throw new une({text:e,cause:n})}}function Xne({text:e,schema:t}){try{const n=Bne.parse(e);if(null==t)return{success:!0,value:n,rawValue:n};const r=Zne({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:une.isInstance(n)?n:new une({text:e,cause:n})}}}function Jne(e){try{return Bne.parse(e),!0}catch(F0){return!1}}function ere({provider:e,providerOptions:t,schema:n}){if(null==(null==t?void 0:t[e]))return;const r=Zne({value:t[e],schema:n});if(!r.success)throw new Yte({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var tre=()=>globalThis.fetch,nre=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>rre({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),rre=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:o,fetch:a=tre()})=>{try{const u=await a(e,{method:"POST",headers:(s=t,Object.fromEntries(Object.entries(s).filter(([e,t])=>null!=t))),body:n.content,signal:o}),c=qne(u);if(!u.ok){let t;try{t=await i({response:u,url:e,requestBodyValues:n.values})}catch(l){if(Wne(l)||Lte.isInstance(l))throw l;throw new Lte({message:"Failed to process error response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}throw t.value}try{return await r({response:u,url:e,requestBodyValues:n.values})}catch(l){if(l instanceof Error&&(Wne(l)||Lte.isInstance(l)))throw l;throw new Lte({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}}catch(l){if(Wne(l))throw l;if(l instanceof TypeError&&"fetch failed"===l.message){const t=l.cause;if(null!=t)throw new Lte({message:`Cannot connect to API: ${t.message}`,cause:t,url:e,requestBodyValues:n.values,isRetryable:!0})}throw l}var s};async function ire(e){return"function"==typeof e&&(e=e()),Promise.resolve(e)}var ore=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:o})=>{const a=await r.text(),s=qne(r);if(""===a.trim())return{responseHeaders:s,value:new Lte({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})};try{const l=Qne({text:a,schema:e});return{responseHeaders:s,value:new Lte({message:t(l),url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,data:l,isRetryable:null==n?void 0:n(r,l)})}}catch(l){return{responseHeaders:s,value:new Lte({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})}}},are=e=>async({response:t})=>{const n=qne(t);if(null==t.body)throw new Ute({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(Une()).pipeThrough(new TransformStream({transform({data:t},n){"[DONE]"!==t&&n.enqueue(Xne({text:t,schema:e}))}}))}},sre=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),o=Xne({text:i,schema:e}),a=qne(t);if(!o.success)throw new Lte({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:o.value,rawValue:o.rawValue}},{btoa:lre,atob:ure}=globalThis;function cre(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=ure(t);return Uint8Array.from(n,e=>e.codePointAt(0))}function dre(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return lre(t)}function fre(e){return null==e?void 0:e.replace(/\/$/,"")}function pre(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.content)?void 0:t.map(({token:e,logprob:t,top_logprobs:n})=>({token:e,logprob:t,topLogprobs:n?n.map(({token:e,logprob:t})=>({token:e,logprob:t})):[]})))?n:void 0}function hre(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var mre=oA({error:oA({message:XC(),type:XC().nullish(),param:nA().nullish(),code:aA([XC(),JC()]).nullish()})}),gre=ore({errorSchema:mre,errorToMessage:e=>e.error.message});function yre({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}var vre=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return null!=(e=this.settings.structuredOutputs)?e:xre(this.modelId)}get defaultObjectGenerationMode(){return this.modelId.startsWith("gpt-4o-audio-preview")?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:o,frequencyPenalty:a,presencePenalty:s,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var f,p,h,m,g,y,v,b;const w=e.type,_=[];null!=o&&_.push({type:"unsupported-setting",setting:"topK"}),"json"!==(null==u?void 0:u.type)||null==u.schema||this.supportsStructuredOutputs||_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const x=this.settings.useLegacyFunctionCalling;if(x&&!0===this.settings.parallelToolCalls)throw new Mne({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(x&&this.supportsStructuredOutputs)throw new Mne({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:E,warnings:S}=function({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],i=[];for(const{role:o,content:a}of e)switch(o){case"system":switch(n){case"system":r.push({role:"system",content:a});break;case"developer":r.push({role:"developer",content:a});break;case"remove":i.push({type:"other",message:"system messages are removed for this model"});break;default:throw new Error(`Unsupported system message mode: ${n}`)}break;case"user":if(1===a.length&&"text"===a[0].type){r.push({role:"user",content:a[0].text});break}r.push({role:"user",content:a.map((e,t)=>{var n,r,i,o;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(n=e.mimeType)?n:"image/jpeg"};base64,${dre(e.image)}`,detail:null==(i=null==(r=e.providerMetadata)?void 0:r.openai)?void 0:i.imageDetail}};case"file":if(e.data instanceof URL)throw new Mne({functionality:"'File content parts with URL data' functionality not supported."});switch(e.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:e.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:e.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:null!=(o=e.filename)?o:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`}};default:throw new Mne({functionality:`File content part type ${e.mimeType} in user messages`})}}})});break;case"assistant":{let e="";const n=[];for(const t of a)switch(t.type){case"text":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:JSON.stringify(t.args)}})}if(t){if(n.length>1)throw new Mne({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:e,function_call:n.length>0?n[0].function:void 0})}else r.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0});break}case"tool":for(const e of a)t?r.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):r.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw new Error(`Unsupported role: ${o}`)}return{messages:r,warnings:i}}({prompt:t,useLegacyFunctionCalling:x,systemMessageMode:Ere(this.modelId)});_.push(...S);const k={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:s,response_format:"json"===(null==u?void 0:u.type)?this.supportsStructuredOutputs&&null!=u.schema?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:null!=(f=u.name)?f:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:c,max_completion_tokens:null==(p=null==d?void 0:d.openai)?void 0:p.maxCompletionTokens,store:null==(h=null==d?void 0:d.openai)?void 0:h.store,metadata:null==(m=null==d?void 0:d.openai)?void 0:m.metadata,prediction:null==(g=null==d?void 0:d.openai)?void 0:g.prediction,reasoning_effort:null!=(v=null==(y=null==d?void 0:d.openai)?void 0:y.reasoningEffort)?v:this.settings.reasoningEffort,messages:E};switch(xre(this.modelId)?(null!=k.temperature&&(k.temperature=void 0,_.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=k.top_p&&(k.top_p=void 0,_.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=k.frequency_penalty&&(k.frequency_penalty=void 0,_.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=k.presence_penalty&&(k.presence_penalty=void 0,_.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=k.logit_bias&&(k.logit_bias=void 0,_.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=k.logprobs&&(k.logprobs=void 0,_.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=k.top_logprobs&&(k.top_logprobs=void 0,_.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=k.max_tokens&&(null==k.max_completion_tokens&&(k.max_completion_tokens=k.max_tokens),k.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&null!=k.temperature&&(k.temperature=void 0,_.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),w){case"regular":{const{tools:t,tool_choice:n,functions:r,function_call:i,toolWarnings:o}=function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const i=(null==(r=e.tools)?void 0:r.length)?e.tools:void 0,o=[];if(null==i)return{tools:void 0,tool_choice:void 0,toolWarnings:o};const a=e.toolChoice;if(t){const e=[];for(const t of i)"provider-defined"===t.type?o.push({type:"unsupported-tool",tool:t}):e.push({name:t.name,description:t.description,parameters:t.parameters});if(null==a)return{functions:e,function_call:void 0,toolWarnings:o};switch(a.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0,toolWarnings:o};case"required":throw new Mne({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:a.toolName},toolWarnings:o}}}const s=[];for(const u of i)"provider-defined"===u.type?o.push({type:"unsupported-tool",tool:u}):s.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:!!n||void 0}});if(null==a)return{tools:s,tool_choice:void 0,toolWarnings:o};const l=a.type;switch(l){case"auto":case"none":case"required":return{tools:s,tool_choice:l,toolWarnings:o};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:o};default:throw new Mne({functionality:`Unsupported tool choice type: ${l}`})}}({mode:e,useLegacyFunctionCalling:x,structuredOutputs:this.supportsStructuredOutputs});return{args:{...k,tools:t,tool_choice:n,functions:r,function_call:i},warnings:[..._,...o]}}case"object-json":return{args:{...k,response_format:this.supportsStructuredOutputs&&null!=e.schema?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(b=e.name)?b:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:x?{...k,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...k,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!!this.supportsStructuredOutputs||void 0}}]},warnings:_};default:throw new Error(`Unsupported type: ${w}`)}}async doGenerate(e){var t,n,r,i,o,a,s,l;const{args:u,warnings:c}=this.getArgs(e),{responseHeaders:d,value:f,rawValue:p}=await nre({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:u,failedResponseHandler:gre,successfulResponseHandler:sre(wre),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:h,...m}=u,g=f.choices[0],y=null==(t=f.usage)?void 0:t.completion_tokens_details,v=null==(n=f.usage)?void 0:n.prompt_tokens_details,b={openai:{}};return null!=(null==y?void 0:y.reasoning_tokens)&&(b.openai.reasoningTokens=null==y?void 0:y.reasoning_tokens),null!=(null==y?void 0:y.accepted_prediction_tokens)&&(b.openai.acceptedPredictionTokens=null==y?void 0:y.accepted_prediction_tokens),null!=(null==y?void 0:y.rejected_prediction_tokens)&&(b.openai.rejectedPredictionTokens=null==y?void 0:y.rejected_prediction_tokens),null!=(null==v?void 0:v.cached_tokens)&&(b.openai.cachedPromptTokens=null==v?void 0:v.cached_tokens),{text:null!=(r=g.message.content)?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&g.message.function_call?[{toolCallType:"function",toolCallId:Vne(),toolName:g.message.function_call.name,args:g.message.function_call.arguments}]:null==(i=g.message.tool_calls)?void 0:i.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:Vne(),toolName:e.function.name,args:e.function.arguments}}),finishReason:hre(g.finish_reason),usage:{promptTokens:null!=(a=null==(o=f.usage)?void 0:o.prompt_tokens)?a:NaN,completionTokens:null!=(l=null==(s=f.usage)?void 0:s.completion_tokens)?l:NaN},rawCall:{rawPrompt:h,rawSettings:m},rawResponse:{headers:d,body:p},request:{body:JSON.stringify(u)},response:yre(f),warnings:c,logprobs:pre(g.logprobs),providerMetadata:b}}async doStream(e){if(this.settings.simulateStreaming){const t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(const n of t.toolCalls)e.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.toolCallId,toolName:n.toolName,argsTextDelta:n.args}),e.enqueue({type:"tool-call",...n});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:i,value:o}=await nre({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:r,failedResponseHandler:gre,successfulResponseHandler:are(_re),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:a,...s}=t,l=[];let u,c="unknown",d={promptTokens:void 0,completionTokens:void 0},f=!0;const{useLegacyFunctionCalling:p}=this.settings,h={openai:{}};return{stream:o.pipeThrough(new TransformStream({transform(e,t){var n,r,i,o,a,s,m,g,y,v,b,w;if(!e.success)return c="error",void t.enqueue({type:"error",error:e.error});const _=e.value;if("error"in _)return c="error",void t.enqueue({type:"error",error:_.error});if(f&&(f=!1,t.enqueue({type:"response-metadata",...yre(_)})),null!=_.usage){const{prompt_tokens:e,completion_tokens:t,prompt_tokens_details:n,completion_tokens_details:r}=_.usage;d={promptTokens:null!=e?e:void 0,completionTokens:null!=t?t:void 0},null!=(null==r?void 0:r.reasoning_tokens)&&(h.openai.reasoningTokens=null==r?void 0:r.reasoning_tokens),null!=(null==r?void 0:r.accepted_prediction_tokens)&&(h.openai.acceptedPredictionTokens=null==r?void 0:r.accepted_prediction_tokens),null!=(null==r?void 0:r.rejected_prediction_tokens)&&(h.openai.rejectedPredictionTokens=null==r?void 0:r.rejected_prediction_tokens),null!=(null==n?void 0:n.cached_tokens)&&(h.openai.cachedPromptTokens=null==n?void 0:n.cached_tokens)}const x=_.choices[0];if(null!=(null==x?void 0:x.finish_reason)&&(c=hre(x.finish_reason)),null==(null==x?void 0:x.delta))return;const E=x.delta;null!=E.content&&t.enqueue({type:"text-delta",textDelta:E.content});const S=pre(null==x?void 0:x.logprobs);(null==S?void 0:S.length)&&(void 0===u&&(u=[]),u.push(...S));const k=p&&null!=E.function_call?[{type:"function",id:Vne(),function:E.function_call,index:0}]:E.tool_calls;if(null!=k)for(const u of k){const e=u.index;if(null==l[e]){if("function"!==u.type)throw new ine({data:u,message:"Expected 'function' type."});if(null==u.id)throw new ine({data:u,message:"Expected 'id' to be a string."});if(null==(null==(n=u.function)?void 0:n.name))throw new ine({data:u,message:"Expected 'function.name' to be a string."});l[e]={id:u.id,type:"function",function:{name:u.function.name,arguments:null!=(r=u.function.arguments)?r:""},hasFinished:!1};const s=l[e];null!=(null==(i=s.function)?void 0:i.name)&&null!=(null==(o=s.function)?void 0:o.arguments)&&(s.function.arguments.length>0&&t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:s.id,toolName:s.function.name,argsTextDelta:s.function.arguments}),Jne(s.function.arguments)&&(t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(a=s.id)?a:Vne(),toolName:s.function.name,args:s.function.arguments}),s.hasFinished=!0));continue}const c=l[e];c.hasFinished||(null!=(null==(s=u.function)?void 0:s.arguments)&&(c.function.arguments+=null!=(g=null==(m=u.function)?void 0:m.arguments)?g:""),t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:c.id,toolName:c.function.name,argsTextDelta:null!=(y=u.function.arguments)?y:""}),null!=(null==(v=c.function)?void 0:v.name)&&null!=(null==(b=c.function)?void 0:b.arguments)&&Jne(c.function.arguments)&&(t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(w=c.id)?w:Vne(),toolName:c.function.name,args:c.function.arguments}),c.hasFinished=!0))}},flush(e){var t,n;e.enqueue({type:"finish",finishReason:c,logprobs:u,usage:{promptTokens:null!=(t=d.promptTokens)?t:NaN,completionTokens:null!=(n=d.completionTokens)?n:NaN},...null!=h?{providerMetadata:h}:{}})}})),rawCall:{rawPrompt:a,rawSettings:s},rawResponse:{headers:i},request:{body:JSON.stringify(r)},warnings:n}}},bre=oA({prompt_tokens:JC().nullish(),completion_tokens:JC().nullish(),prompt_tokens_details:oA({cached_tokens:JC().nullish()}).nullish(),completion_tokens_details:oA({reasoning_tokens:JC().nullish(),accepted_prediction_tokens:JC().nullish(),rejected_prediction_tokens:JC().nullish()}).nullish()}).nullish(),wre=oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({message:oA({role:dA("assistant").nullish(),content:XC().nullish(),function_call:oA({arguments:XC(),name:XC()}).nullish(),tool_calls:iA(oA({id:XC().nullish(),type:dA("function"),function:oA({name:XC(),arguments:XC()})})).nullish()}),index:JC(),logprobs:oA({content:iA(oA({token:XC(),logprob:JC(),top_logprobs:iA(oA({token:XC(),logprob:JC()}))})).nullable()}).nullish(),finish_reason:XC().nullish()})),usage:bre}),_re=aA([oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({delta:oA({role:fA(["assistant"]).nullish(),content:XC().nullish(),function_call:oA({name:XC().optional(),arguments:XC().optional()}).nullish(),tool_calls:iA(oA({index:JC(),id:XC().nullish(),type:dA("function").nullish(),function:oA({name:XC().nullish(),arguments:XC().nullish()})})).nullish()}).nullish(),logprobs:oA({content:iA(oA({token:XC(),logprob:JC(),top_logprobs:iA(oA({token:XC(),logprob:JC()}))})).nullable()}).nullish(),finish_reason:XC().nullish(),index:JC()})),usage:bre}),mre]);function xre(e){return e.startsWith("o")||e.startsWith("gpt-5")}function Ere(e){var t,n;return xre(e)?null!=(n=null==(t=Sre[e])?void 0:t.systemMessageMode)?n:"developer":"system"}var Sre={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function kre(e){return null==e?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([e,t])=>({token:e,logprob:t})):[]}))}var Tre=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d}){var f;const p=e.type,h=[];null!=a&&h.push({type:"unsupported-setting",setting:"topK"}),null!=c&&"text"!==c.type&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:m,stopSequences:g}=function({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let i="";"system"===e[0].role&&(i+=`${e[0].content}\n\n`,e=e.slice(1));for(const{role:o,content:a}of e)switch(o){case"system":throw new Jte({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":i+=`${n}:\n${a.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new Mne({functionality:"images"})}}).join("")}\n\n`;break;case"assistant":i+=`${r}:\n${a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new Mne({functionality:"tool-call messages"})}}).join("")}\n\n`;break;case"tool":throw new Mne({functionality:"tool messages"});default:throw new Error(`Unsupported role: ${o}`)}return i+=`${r}:\n`,{prompt:i,stopSequences:[`\n${n}:`]}}({prompt:n,inputFormat:t}),y=[...null!=g?g:[],...null!=u?u:[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:o,frequency_penalty:s,presence_penalty:l,seed:d,prompt:m,stop:y.length>0?y:void 0};switch(p){case"regular":if(null==(f=e.tools)?void 0:f.length)throw new Mne({functionality:"tools"});if(e.toolChoice)throw new Mne({functionality:"toolChoice"});return{args:v,warnings:h};case"object-json":throw new Mne({functionality:"object-json mode"});case"object-tool":throw new Mne({functionality:"object-tool mode"});default:throw new Error(`Unsupported type: ${p}`)}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i,rawValue:o}=await nre({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:t,failedResponseHandler:gre,successfulResponseHandler:sre(Cre),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...s}=t,l=i.choices[0];return{text:l.text,usage:{promptTokens:i.usage.prompt_tokens,completionTokens:i.usage.completion_tokens},finishReason:hre(l.finish_reason),logprobs:kre(l.logprobs),rawCall:{rawPrompt:a,rawSettings:s},rawResponse:{headers:r,body:o},response:yre(i),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:i,value:o}=await nre({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:r,failedResponseHandler:gre,successfulResponseHandler:are(Are),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:a,...s}=t;let l,u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:o.pipeThrough(new TransformStream({transform(e,t){if(!e.success)return u="error",void t.enqueue({type:"error",error:e.error});const n=e.value;if("error"in n)return u="error",void t.enqueue({type:"error",error:n.error});d&&(d=!1,t.enqueue({type:"response-metadata",...yre(n)})),null!=n.usage&&(c={promptTokens:n.usage.prompt_tokens,completionTokens:n.usage.completion_tokens});const r=n.choices[0];null!=(null==r?void 0:r.finish_reason)&&(u=hre(r.finish_reason)),null!=(null==r?void 0:r.text)&&t.enqueue({type:"text-delta",textDelta:r.text});const i=kre(null==r?void 0:r.logprobs);(null==i?void 0:i.length)&&(void 0===l&&(l=[]),l.push(...i))},flush(e){e.enqueue({type:"finish",finishReason:u,logprobs:l,usage:c})}})),rawCall:{rawPrompt:a,rawSettings:s},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},Cre=oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({text:XC(),finish_reason:XC(),logprobs:oA({tokens:iA(XC()),token_logprobs:iA(JC()),top_logprobs:iA(uA(XC(),JC())).nullable()}).nullish()})),usage:oA({prompt_tokens:JC(),completion_tokens:JC()})}),Are=aA([oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({text:XC(),finish_reason:XC().nullish(),index:JC(),logprobs:oA({tokens:iA(XC()),token_logprobs:iA(JC()),top_logprobs:iA(uA(XC(),JC())).nullable()}).nullish()})),usage:oA({prompt_tokens:JC(),completion_tokens:JC()}).nullish()}),mre]),Ire=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Sne({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:i}=await nre({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:zne(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:gre,successfulResponseHandler:sre(Ore),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(e=>e.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},Ore=oA({data:iA(oA({embedding:iA(JC())})),usage:oA({prompt_tokens:JC()}).nullish()}),Nre={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},Dre=new Set(["gpt-image-1"]),Rre=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return null!=(t=null!=(e=this.settings.maxImagesPerCall)?e:Nre[this.modelId])?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:o,headers:a,abortSignal:s}){var l,u,c,d;const f=[];null!=r&&f.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=i&&f.push({type:"unsupported-setting",setting:"seed"});const p=null!=(c=null==(u=null==(l=this.config._internal)?void 0:l.currentDate)?void 0:u.call(l))?c:new Date,{value:h,responseHeaders:m}=await nre({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:zne(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...null!=(d=o.openai)?d:{},...Dre.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:gre,successfulResponseHandler:sre(Mre),abortSignal:s,fetch:this.config.fetch});return{images:h.data.map(e=>e.b64_json),warnings:f,response:{timestamp:p,modelId:this.modelId,headers:m}}}},Mre=oA({data:iA(oA({b64_json:XC()}))}),Pre=oA({include:iA(XC()).nullish(),language:XC().nullish(),prompt:XC().nullish(),temperature:JC().min(0).max(1).nullish().default(0),timestampGranularities:iA(fA(["word","segment"])).nullish().default(["segment"])}),Fre={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},Lre=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,i,o,a,s;const l=ere({provider:"openai",providerOptions:n,schema:Pre}),u=new FormData,c=e instanceof Uint8Array?new Blob([e]):new Blob([cre(e)]);if(u.append("model",this.modelId),u.append("file",new File([c],"audio",{type:t})),l){const e={include:null!=(r=l.include)?r:void 0,language:null!=(i=l.language)?i:void 0,prompt:null!=(o=l.prompt)?o:void 0,temperature:null!=(a=l.temperature)?a:void 0,timestamp_granularities:null!=(s=l.timestampGranularities)?s:void 0};for(const t in e){const n=e[t];void 0!==n&&u.append(t,String(n))}}return{formData:u,warnings:[]}}async doGenerate(e){var t,n,r,i,o,a;const s=null!=(r=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?r:new Date,{formData:l,warnings:u}=this.getArgs(e),{value:c,responseHeaders:d,rawValue:f}=await(async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>rre({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}))({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),formData:l,failedResponseHandler:gre,successfulResponseHandler:sre(jre),abortSignal:e.abortSignal,fetch:this.config.fetch}),p=null!=c.language&&c.language in Fre?Fre[c.language]:void 0;return{text:c.text,segments:null!=(o=null==(i=c.words)?void 0:i.map(e=>({text:e.word,startSecond:e.start,endSecond:e.end})))?o:[],language:p,durationInSeconds:null!=(a=c.duration)?a:void 0,warnings:u,response:{timestamp:s,modelId:this.modelId,headers:d,body:f}}}},jre=oA({text:XC(),language:XC().nullish(),duration:JC().nullish(),words:iA(oA({word:XC(),start:JC(),end:JC()})).nullish()});function Bre({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}var $re=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:i,topK:o,presencePenalty:a,frequencyPenalty:s,seed:l,prompt:u,providerMetadata:c,responseFormat:d}){var f,p,h;const m=[],g=function(e){if(e.startsWith("o")||e.startsWith("gpt-5"))return e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1};return{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}(this.modelId),y=e.type;null!=o&&m.push({type:"unsupported-setting",setting:"topK"}),null!=l&&m.push({type:"unsupported-setting",setting:"seed"}),null!=a&&m.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=s&&m.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=r&&m.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:v,warnings:b}=function({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:i,content:o}of e)switch(i){case"system":switch(t){case"system":n.push({role:"system",content:o});break;case"developer":n.push({role:"developer",content:o});break;case"remove":r.push({type:"other",message:"system messages are removed for this model"});break;default:throw new Error(`Unsupported system message mode: ${t}`)}break;case"user":n.push({role:"user",content:o.map((e,t)=>{var n,r,i,o;switch(e.type){case"text":return{type:"input_text",text:e.text};case"image":return{type:"input_image",image_url:e.image instanceof URL?e.image.toString():`data:${null!=(n=e.mimeType)?n:"image/jpeg"};base64,${dre(e.image)}`,detail:null==(i=null==(r=e.providerMetadata)?void 0:r.openai)?void 0:i.imageDetail};case"file":if(e.data instanceof URL)throw new Mne({functionality:"File URLs in user messages"});if("application/pdf"===e.mimeType)return{type:"input_file",filename:null!=(o=e.filename)?o:`part-${t}.pdf`,file_data:`data:application/pdf;base64,${e.data}`};throw new Mne({functionality:"Only PDF files are supported in user messages"})}})});break;case"assistant":for(const e of o)switch(e.type){case"text":n.push({role:"assistant",content:[{type:"output_text",text:e.text}]});break;case"tool-call":n.push({type:"function_call",call_id:e.toolCallId,name:e.toolName,arguments:JSON.stringify(e.args)})}break;case"tool":for(const e of o)n.push({type:"function_call_output",call_id:e.toolCallId,output:JSON.stringify(e.result)});break;default:throw new Error(`Unsupported role: ${i}`)}return{messages:n,warnings:r}}({prompt:u,systemMessageMode:g.systemMessageMode});m.push(...b);const w=ere({provider:"openai",providerOptions:c,schema:Xre}),_=null==(f=null==w?void 0:w.strictSchemas)||f,x={model:this.modelId,input:v,temperature:n,top_p:i,max_output_tokens:t,..."json"===(null==d?void 0:d.type)&&{text:{format:null!=d.schema?{type:"json_schema",strict:_,name:null!=(p=d.name)?p:"response",description:d.description,schema:d.schema}:{type:"json_object"}}},metadata:null==w?void 0:w.metadata,parallel_tool_calls:null==w?void 0:w.parallelToolCalls,previous_response_id:null==w?void 0:w.previousResponseId,store:null==w?void 0:w.store,user:null==w?void 0:w.user,instructions:null==w?void 0:w.instructions,...g.isReasoningModel&&(null!=(null==w?void 0:w.reasoningEffort)||null!=(null==w?void 0:w.reasoningSummary))&&{reasoning:{...null!=(null==w?void 0:w.reasoningEffort)&&{effort:w.reasoningEffort},...null!=(null==w?void 0:w.reasoningSummary)&&{summary:w.reasoningSummary}}},...g.requiredAutoTruncation&&{truncation:"auto"}};switch(g.isReasoningModel&&(null!=x.temperature&&(x.temperature=void 0,m.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=x.top_p&&(x.top_p=void 0,m.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),y){case"regular":{const{tools:t,tool_choice:n,toolWarnings:r}=function({mode:e,strict:t}){var n;const r=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0,i=[];if(null==r)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice,a=[];for(const l of r)switch(l.type){case"function":a.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:!!t||void 0});break;case"provider-defined":"openai.web_search_preview"===l.id?a.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation}):i.push({type:"unsupported-tool",tool:l});break;default:i.push({type:"unsupported-tool",tool:l})}if(null==o)return{tools:a,tool_choice:void 0,toolWarnings:i};const s=o.type;switch(s){case"auto":case"none":case"required":return{tools:a,tool_choice:s,toolWarnings:i};case"tool":return"web_search_preview"===o.toolName?{tools:a,tool_choice:{type:"web_search_preview"},toolWarnings:i}:{tools:a,tool_choice:{type:"function",name:o.toolName},toolWarnings:i};default:throw new Mne({functionality:`Unsupported tool choice type: ${s}`})}}({mode:e,strict:_});return{args:{...x,tools:t,tool_choice:n},warnings:[...m,...r]}}case"object-json":return{args:{...x,text:{format:null!=e.schema?{type:"json_schema",strict:_,name:null!=(h=e.name)?h:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:m};case"object-tool":return{args:{...x,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:_}]},warnings:m};default:throw new Error(`Unsupported type: ${y}`)}}async doGenerate(e){var t,n,r,i,o,a,s;const{args:l,warnings:u}=this.getArgs(e),c=this.config.url({path:"/responses",modelId:this.modelId}),{responseHeaders:d,value:f,rawValue:p}=await nre({url:c,headers:zne(this.config.headers(),e.headers),body:l,failedResponseHandler:gre,successfulResponseHandler:sre(oA({id:XC(),created_at:JC(),error:oA({message:XC(),code:XC()}).nullish(),model:XC(),output:iA(sA("type",[oA({type:dA("message"),role:dA("assistant"),content:iA(oA({type:dA("output_text"),text:XC(),annotations:iA(oA({type:dA("url_citation"),start_index:JC(),end_index:JC(),url:XC(),title:XC()}))}))}),oA({type:dA("function_call"),call_id:XC(),name:XC(),arguments:XC()}),oA({type:dA("web_search_call")}),oA({type:dA("computer_call")}),oA({type:dA("reasoning"),summary:iA(oA({type:dA("summary_text"),text:XC()}))})])),incomplete_details:oA({reason:XC()}).nullable(),usage:zre})),abortSignal:e.abortSignal,fetch:this.config.fetch});if(f.error)throw new Lte({message:f.error.message,url:c,requestBodyValues:l,statusCode:400,responseHeaders:d,responseBody:p,isRetryable:!1});const h=f.output.filter(e=>"message"===e.type).flatMap(e=>e.content).filter(e=>"output_text"===e.type),m=f.output.filter(e=>"function_call"===e.type).map(e=>({toolCallType:"function",toolCallId:e.call_id,toolName:e.name,args:e.arguments})),g=null!=(n=null==(t=f.output.find(e=>"reasoning"===e.type))?void 0:t.summary)?n:null;return{text:h.map(e=>e.text).join("\n"),sources:h.flatMap(e=>e.annotations.map(e=>{var t,n,r;return{sourceType:"url",id:null!=(r=null==(n=(t=this.config).generateId)?void 0:n.call(t))?r:Vne(),url:e.url,title:e.title}})),finishReason:Bre({finishReason:null==(r=f.incomplete_details)?void 0:r.reason,hasToolCalls:m.length>0}),toolCalls:m.length>0?m:void 0,reasoning:g?g.map(e=>({type:"text",text:e.text})):void 0,usage:{promptTokens:f.usage.input_tokens,completionTokens:f.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:d,body:p},request:{body:JSON.stringify(l)},response:{id:f.id,timestamp:new Date(1e3*f.created_at),modelId:f.model},providerMetadata:{openai:{responseId:f.id,cachedPromptTokens:null!=(o=null==(i=f.usage.input_tokens_details)?void 0:i.cached_tokens)?o:null,reasoningTokens:null!=(s=null==(a=f.usage.output_tokens_details)?void 0:a.reasoning_tokens)?s:null}},warnings:u}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:i}=await nre({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:gre,successfulResponseHandler:are(Qre),abortSignal:e.abortSignal,fetch:this.config.fetch}),o=this;let a="unknown",s=NaN,l=NaN,u=null,c=null,d=null;const f={};let p=!1;return{stream:i.pipeThrough(new TransformStream({transform(e,t){var n,r,i,h,m,g,y,v;if(!e.success)return a="error",void t.enqueue({type:"error",error:e.error});const b=e.value;if(function(e){return"response.output_item.added"===e.type}(b))"function_call"===b.item.type&&(f[b.output_index]={toolName:b.item.name,toolCallId:b.item.call_id},t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:b.item.call_id,toolName:b.item.name,argsTextDelta:b.item.arguments}));else if(function(e){return"response.function_call_arguments.delta"===e.type}(b)){const e=f[b.output_index];null!=e&&t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:b.delta})}else!function(e){return"response.created"===e.type}(b)?!function(e){return"response.output_text.delta"===e.type}(b)?!function(e){return"response.reasoning_summary_text.delta"===e.type}(b)?!function(e){return"response.output_item.done"===e.type}(b)||"function_call"!==b.item.type?!function(e){return"response.completed"===e.type||"response.incomplete"===e.type}(b)?!function(e){return"response.output_text.annotation.added"===e.type}(b)?function(e){return"error"===e.type}(b)&&t.enqueue({type:"error",error:b}):t.enqueue({type:"source",source:{sourceType:"url",id:null!=(v=null==(y=(g=o.config).generateId)?void 0:y.call(g))?v:Vne(),url:b.annotation.url,title:b.annotation.title}}):(a=Bre({finishReason:null==(n=b.response.incomplete_details)?void 0:n.reason,hasToolCalls:p}),s=b.response.usage.input_tokens,l=b.response.usage.output_tokens,u=null!=(i=null==(r=b.response.usage.input_tokens_details)?void 0:r.cached_tokens)?i:u,c=null!=(m=null==(h=b.response.usage.output_tokens_details)?void 0:h.reasoning_tokens)?m:c):(f[b.output_index]=void 0,p=!0,t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:b.item.call_id,toolName:b.item.name,args:b.item.arguments})):t.enqueue({type:"reasoning",textDelta:b.delta}):t.enqueue({type:"text-delta",textDelta:b.delta}):(d=b.response.id,t.enqueue({type:"response-metadata",id:b.response.id,timestamp:new Date(1e3*b.response.created_at),modelId:b.response.model}))},flush(e){e.enqueue({type:"finish",finishReason:a,usage:{promptTokens:s,completionTokens:l},...(null!=u||null!=c)&&{providerMetadata:{openai:{responseId:d,cachedPromptTokens:u,reasoningTokens:c}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},zre=oA({input_tokens:JC(),input_tokens_details:oA({cached_tokens:JC().nullish()}).nullish(),output_tokens:JC(),output_tokens_details:oA({reasoning_tokens:JC().nullish()}).nullish()}),Ure=oA({type:dA("response.output_text.delta"),delta:XC()}),qre=oA({type:fA(["response.completed","response.incomplete"]),response:oA({incomplete_details:oA({reason:XC()}).nullish(),usage:zre})}),Hre=oA({type:dA("response.created"),response:oA({id:XC(),created_at:JC(),model:XC()})}),Vre=oA({type:dA("response.output_item.done"),output_index:JC(),item:sA("type",[oA({type:dA("message")}),oA({type:dA("function_call"),id:XC(),call_id:XC(),name:XC(),arguments:XC(),status:dA("completed")})])}),Wre=oA({type:dA("response.function_call_arguments.delta"),item_id:XC(),output_index:JC(),delta:XC()}),Gre=oA({type:dA("response.output_item.added"),output_index:JC(),item:sA("type",[oA({type:dA("message")}),oA({type:dA("function_call"),id:XC(),call_id:XC(),name:XC(),arguments:XC()})])}),Yre=oA({type:dA("response.output_text.annotation.added"),annotation:oA({type:dA("url_citation"),url:XC(),title:XC()})}),Kre=oA({type:dA("response.reasoning_summary_text.delta"),item_id:XC(),output_index:JC(),summary_index:JC(),delta:XC()}),Zre=oA({type:dA("error"),code:XC(),message:XC(),param:XC().nullish(),sequence_number:JC()}),Qre=aA([Ure,qre,Hre,Vre,Wre,Gre,Yre,Kre,Zre,oA({type:XC()}).passthrough()]);var Xre=oA({metadata:nA().nullish(),parallelToolCalls:eA().nullish(),previousResponseId:XC().nullish(),store:eA().nullish(),user:XC().nullish(),reasoningEffort:XC().nullish(),strictSchemas:eA().nullish(),instructions:XC().nullish(),reasoningSummary:XC().nullish()}),Jre=oA({});var eie={webSearchPreview:function({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:Jre}}},tie=oA({instructions:XC().nullish(),speed:JC().min(.25).max(4).default(1).nullish()}),nie=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:i,providerOptions:o}){const a=[],s=ere({provider:"openai",providerOptions:o,schema:tie}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:i};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:a.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),s){const e={};for(const t in e){const n=e[t];void 0!==n&&(l[t]=n)}}return{requestBody:l,warnings:a}}async doGenerate(e){var t,n,r;const i=null!=(r=null==(n=null==(t=this.config._internal)?void 0:t.currentDate)?void 0:n.call(t))?r:new Date,{requestBody:o,warnings:a}=this.getArgs(e),{value:s,responseHeaders:l,rawValue:u}=await nre({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:zne(this.config.headers(),e.headers),body:o,failedResponseHandler:gre,successfulResponseHandler:async({response:e,url:t,requestBodyValues:n})=>{const r=qne(e);if(!e.body)throw new Lte({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const t=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(t)}}catch(i){throw new Lte({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:i})}},abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:s,warnings:a,request:{body:JSON.stringify(o)},response:{timestamp:i,modelId:this.modelId,headers:l,body:u}}}};function rie(e={}){var t,n,r;const i=null!=(t=fre(e.baseURL))?t:"https://api.openai.com/v1",o=null!=(n=e.compatibility)?n:"compatible",a=null!=(r=e.name)?r:"openai",s=()=>({Authorization:`Bearer ${Gne({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(t,n={})=>new vre(t,n,{provider:`${a}.chat`,url:({path:e})=>`${i}${e}`,headers:s,compatibility:o,fetch:e.fetch}),u=(t,n={})=>new Tre(t,n,{provider:`${a}.completion`,url:({path:e})=>`${i}${e}`,headers:s,compatibility:o,fetch:e.fetch}),c=(t,n={})=>new Ire(t,n,{provider:`${a}.embedding`,url:({path:e})=>`${i}${e}`,headers:s,fetch:e.fetch}),d=(t,n={})=>new Rre(t,n,{provider:`${a}.image`,url:({path:e})=>`${i}${e}`,headers:s,fetch:e.fetch}),f=t=>new Lre(t,{provider:`${a}.transcription`,url:({path:e})=>`${i}${e}`,headers:s,fetch:e.fetch}),p=t=>new nie(t,{provider:`${a}.speech`,url:({path:e})=>`${i}${e}`,headers:s,fetch:e.fetch}),h=(e,t)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?u(e,t):l(e,t)},m=function(e,t){return h(e,t)};return m.languageModel=h,m.chat=l,m.completion=u,m.responses=t=>new $re(t,{provider:`${a}.responses`,url:({path:e})=>`${i}${e}`,headers:s,fetch:e.fetch}),m.embedding=c,m.textEmbedding=c,m.textEmbeddingModel=c,m.image=d,m.imageModel=d,m.transcription=f,m.transcriptionModel=f,m.speech=p,m.speechModel=p,m.tools=eie,m}rie({compatibility:"strict"});const iie="RFC3986",oie={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:e=>String(e)},aie=Array.isArray,sie=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),lie=1024;function uie(e,t){if(aie(e)){const n=[];for(let r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)}const cie=Object.prototype.hasOwnProperty,die={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},fie=Array.isArray,pie=Array.prototype.push,hie=function(e,t){pie.apply(e,fie(t)?t:[t])},mie=Date.prototype.toISOString,gie={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:(e,t,n,r,i)=>{if(0===e.length)return e;let o=e;if("symbol"==typeof e?o=Symbol.prototype.toString.call(e):"string"!=typeof e&&(o=String(e)),"iso-8859-1"===n)return escape(o).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let a="";for(let s=0;s<o.length;s+=lie){const e=o.length>=lie?o.slice(s,s+lie):o,t=[];for(let n=0;n<e.length;++n){let r=e.charCodeAt(n);45===r||46===r||95===r||126===r||r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||"RFC1738"===i&&(40===r||41===r)?t[t.length]=e.charAt(n):r<128?t[t.length]=sie[r]:r<2048?t[t.length]=sie[192|r>>6]+sie[128|63&r]:r<55296||r>=57344?t[t.length]=sie[224|r>>12]+sie[128|r>>6&63]+sie[128|63&r]:(n+=1,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t[t.length]=sie[240|r>>18]+sie[128|r>>12&63]+sie[128|r>>6&63]+sie[128|63&r])}a+=t.join("")}return a},encodeValuesOnly:!1,format:iie,formatter:oie[iie],indices:!1,serializeDate:e=>mie.call(e),skipNulls:!1,strictNullHandling:!1};const yie={};function vie(e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,y){let v=e,b=y,w=0,_=!1;for(;void 0!==(b=b.get(yie))&&!_;){const t=b.get(e);if(w+=1,void 0!==t){if(t===w)throw new RangeError("Cyclic object value");_=!0}void 0===b.get(yie)&&(w=0)}if("function"==typeof u?v=u(t,v):v instanceof Date?v=null==f?void 0:f(v):"comma"===n&&fie(v)&&(v=uie(v,function(e){return e instanceof Date?null==f?void 0:f(e):e})),null===v){if(o)return l&&!m?l(t,gie.encoder,g,"key",p):t;v=""}if("string"==typeof(x=v)||"number"==typeof x||"boolean"==typeof x||"symbol"==typeof x||"bigint"==typeof x||function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))}(v)){if(l){const e=m?t:l(t,gie.encoder,g,"key",p);return[(null==h?void 0:h(e))+"="+(null==h?void 0:h(l(v,gie.encoder,g,"value",p)))]}return[(null==h?void 0:h(t))+"="+(null==h?void 0:h(String(v)))]}var x;const E=[];if(void 0===v)return E;let S;if("comma"===n&&fie(v))m&&l&&(v=uie(v,l)),S=[{value:v.length>0?v.join(",")||null:void 0}];else if(fie(u))S=u;else{const e=Object.keys(v);S=c?e.sort(c):e}const k=s?String(t).replace(/\./g,"%2E"):String(t),T=r&&fie(v)&&1===v.length?k+"[]":k;if(i&&fie(v)&&0===v.length)return T+"[]";for(let C=0;C<S.length;++C){const t=S[C],b="object"==typeof t&&void 0!==t.value?t.value:v[t];if(a&&null===b)continue;const _=d&&s?t.replace(/\./g,"%2E"):t,x=fie(v)?"function"==typeof n?n(T,_):T:T+(d?"."+_:"["+_+"]");y.set(e,w);const k=new WeakMap;k.set(yie,y),hie(E,vie(b,x,n,r,i,o,a,s,"comma"===n&&m&&fie(v)?null:l,u,c,d,f,p,h,m,g,k))}return E}function bie(e,t={}){let n=e;const r=function(e=gie){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||gie.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=iie;if(void 0!==e.format){if(!cie.call(oie,e.format))throw new TypeError("Unknown format option provided.");n=e.format}const r=oie[n];let i,o=gie.filter;if(("function"==typeof e.filter||fie(e.filter))&&(o=e.filter),i=e.arrayFormat&&e.arrayFormat in die?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":gie.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const a=void 0===e.allowDots?1==!!e.encodeDotInKeys||gie.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:gie.addQueryPrefix,allowDots:a,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:gie.allowEmptyArrays,arrayFormat:i,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:gie.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?gie.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:gie.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:gie.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:gie.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:gie.encodeValuesOnly,filter:o,format:n,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:gie.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:gie.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:gie.strictNullHandling}}(t);let i,o;"function"==typeof r.filter?(o=r.filter,n=o("",n)):fie(r.filter)&&(o=r.filter,i=o);const a=[];if("object"!=typeof n||null===n)return"";const s=die[r.arrayFormat],l="comma"===s&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);const u=new WeakMap;for(let f=0;f<i.length;++f){const e=i[f];r.skipNulls&&null===n[e]||hie(a,vie(n[e],e,s,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}const c=a.join(r.delimiter);let d=!0===r.addQueryPrefix?"?":"";return r.charsetSentinel&&("iso-8859-1"===r.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),c.length>0?d+c:""}const wie="4.104.0";let _ie,xie,Eie,Sie,kie,Tie,Cie,Aie,Iie,Oie=!1;class Nie{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}const Die=()=>{_ie||function(e,t={auto:!1}){if(Oie)throw new Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(_ie)throw new Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${_ie}'\``);Oie=t.auto,_ie=e.kind,xie=e.fetch,Eie=e.FormData,Sie=e.File,kie=e.ReadableStream,Tie=e.getMultipartRequestOptions,Cie=e.getDefaultAgent,Aie=e.fileFromPath,Iie=e.isFsReadStream}(function({manuallyImported:e}={}){const t=e?"You may need to use polyfills":"Add one of these imports before your first `import … from 'openai'`:\n- `import 'openai/shims/node'` (if you're running on Node)\n- `import 'openai/shims/web'` (otherwise)\n";let n,r,i,o;try{n=fetch,r=Request,i=Response,o=Headers}catch(a){throw new Error(`this environment is missing the following Web Fetch API type: ${a.message}. ${t}`)}return{kind:"web",fetch:n,Request:r,Response:i,Headers:o,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${t}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${t}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${t}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${t}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new Nie(e)}),getDefaultAgent:e=>{},fileFromPath:()=>{throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0})};Die();class Rie extends Error{}class Mie extends Rie{constructor(e,t,n,r){super(`${Mie.makeMessage(e,t,n)}`),this.status=e,this.headers=r,this.request_id=null==r?void 0:r["x-request-id"],this.error=t;const i=t;this.code=null==i?void 0:i.code,this.param=null==i?void 0:i.param,this.type=null==i?void 0:i.type}static makeMessage(e,t,n){const r=(null==t?void 0:t.message)?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):n;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,n,r){if(!e||!r)return new Fie({message:n,cause:Moe(t)});const i=null==t?void 0:t.error;return 400===e?new jie(e,i,n,r):401===e?new Bie(e,i,n,r):403===e?new $ie(e,i,n,r):404===e?new zie(e,i,n,r):409===e?new Uie(e,i,n,r):422===e?new qie(e,i,n,r):429===e?new Hie(e,i,n,r):e>=500?new Vie(e,i,n,r):new Mie(e,i,n,r)}}class Pie extends Mie{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Fie extends Mie{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Lie extends Fie{constructor({message:e}={}){super({message:e??"Request timed out."})}}class jie extends Mie{}class Bie extends Mie{}class $ie extends Mie{}class zie extends Mie{}class Uie extends Mie{}class qie extends Mie{}class Hie extends Mie{}class Vie extends Mie{}class Wie extends Rie{constructor(){super("Could not parse response content as the length limit was reached")}}class Gie extends Rie{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}var Yie,Kie=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Zie=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class Qie{constructor(){Yie.set(this,void 0),this.buffer=new Uint8Array,Kie(this,Yie,null,"f")}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?(new TextEncoder).encode(e):e;let n=new Uint8Array(this.buffer.length+t.length);n.set(this.buffer),n.set(t,this.buffer.length),this.buffer=n;const r=[];let i;for(;null!=(i=Xie(this.buffer,Zie(this,Yie,"f")));){if(i.carriage&&null==Zie(this,Yie,"f")){Kie(this,Yie,i.index,"f");continue}if(null!=Zie(this,Yie,"f")&&(i.index!==Zie(this,Yie,"f")+1||i.carriage)){r.push(this.decodeText(this.buffer.slice(0,Zie(this,Yie,"f")-1))),this.buffer=this.buffer.slice(Zie(this,Yie,"f")),Kie(this,Yie,null,"f");continue}const e=null!==Zie(this,Yie,"f")?i.preceding-1:i.preceding,t=this.decodeText(this.buffer.slice(0,e));r.push(t),this.buffer=this.buffer.slice(i.index),Kie(this,Yie,null,"f")}return r}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Rie(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Rie(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Rie("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){return this.buffer.length?this.decode("\n"):[]}}function Xie(e,t){for(let n=t??0;n<e.length;n++){if(10===e[n])return{preceding:n,index:n+1,carriage:!1};if(13===e[n])return{preceding:n,index:n+1,carriage:!0}}return null}function Jie(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}function eoe(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(F0){throw t.releaseLock(),F0}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}Yie=new WeakMap,Qie.NEWLINE_CHARS=new Set(["\n","\r"]),Qie.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class toe{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let n=!1;return new toe(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const n of async function*(e,t){if(!e.body)throw t.abort(),new Rie("Attempted to iterate over a response with no body");const n=new noe,r=new Qie,i=eoe(e.body);for await(const o of async function*(e){let t=new Uint8Array;for await(const n of e){if(null==n)continue;const e=n instanceof ArrayBuffer?new Uint8Array(n):"string"==typeof n?(new TextEncoder).encode(n):n;let r,i=new Uint8Array(t.length+e.length);for(i.set(t),i.set(e,t.length),t=i;-1!==(r=Jie(t));)yield t.slice(0,r),t=t.slice(r)}t.length>0&&(yield t)}(i))for(const e of r.decode(o)){const t=n.decode(e);t&&(yield t)}for(const o of r.flush()){const e=n.decode(o);e&&(yield e)}}(e,t))if(!r)if(n.data.startsWith("[DONE]"))r=!0;else if(null===n.event||n.event.startsWith("response.")||n.event.startsWith("transcript.")){let t;try{t=JSON.parse(n.data)}catch(F0){throw F0}if(t&&t.error)throw new Mie(void 0,t.error,void 0,_oe(e.headers));yield t}else{let e;try{e=JSON.parse(n.data)}catch(F0){throw F0}if("error"==n.event)throw new Mie(void 0,e.error,e.message,void 0);yield{event:n.event,data:e}}r=!0}catch(F0){if(F0 instanceof Error&&"AbortError"===F0.name)return;throw F0}finally{r||t.abort()}},t)}static fromReadableStream(e,t){let n=!1;return new toe(async function*(){if(n)throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");n=!0;let r=!1;try{for await(const t of async function*(){const t=new Qie,n=eoe(e);for await(const e of n)for(const n of t.decode(e))yield n;for(const e of t.flush())yield e}())r||t&&(yield JSON.parse(t));r=!0}catch(F0){if(F0 instanceof Error&&"AbortError"===F0.name)return;throw F0}finally{r||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],n=this.iterator(),r=r=>({next:()=>{if(0===r.length){const r=n.next();e.push(r),t.push(r)}return r.shift()}});return[new toe(()=>r(e),this.controller),new toe(()=>r(t),this.controller)]}toReadableStream(){const e=this;let t;const n=new TextEncoder;return new kie({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:i}=await t.next();if(i)return e.close();const o=n.encode(JSON.stringify(r)+"\n");e.enqueue(o)}catch(HOt){e.error(HOt)}},async cancel(){var e;await(null==(e=t.return)?void 0:e.call(t))}})}}class noe{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,n,r]=function(e,t){const n=e.indexOf(t);if(-1!==n)return[e.substring(0,n),t,e.substring(n+t.length)];return[e,"",""]}(e,":");return r.startsWith(" ")&&(r=r.substring(1)),"event"===t?this.event=r:"data"===t&&this.data.push(r),null}}const roe=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,ioe=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&ooe(e),ooe=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer;async function aoe(e,t,n){var r;if(e=await e,ioe(e))return e;if(roe(e)){const r=await e.blob();t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file");const i=ooe(r)?[await r.arrayBuffer()]:[r];return new Sie(i,t,n)}const i=await async function(e){var t;let n=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if(ooe(e))n.push(await e.arrayBuffer());else{if(!loe(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${null==(t=null==e?void 0:e.constructor)?void 0:t.name}; props: ${function(e){const t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);for await(const t of e)n.push(t)}return n}(e);if(t||(t=function(e){var t;return soe(e.name)||soe(e.filename)||(null==(t=soe(e.path))?void 0:t.split(/[\\/]/).pop())}(e)??"unknown_file"),!(null==n?void 0:n.type)){const e=null==(r=i[0])?void 0:r.type;"string"==typeof e&&(n={...n,type:e})}return new Sie(i,t,n)}const soe=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,loe=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],uoe=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],coe=async e=>{const t=await doe(e.body);return Tie(t,e)},doe=async e=>{const t=new Eie;return await Promise.all(Object.entries(e||{}).map(([e,n])=>foe(t,e,n))),t},foe=async(e,t,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(t,String(n));else if((e=>ioe(e)||roe(e)||Iie(e))(n)){const r=await aoe(n);e.append(t,r)}else if(Array.isArray(n))await Promise.all(n.map(n=>foe(e,t+"[]",n)));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map(([n,r])=>foe(e,`${t}[${n}]`,r)))}}};var poe,hoe={};async function moe(e){var t;const{response:n}=e;if(e.options.stream)return $oe("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller):toe.fromSSEResponse(n,e.controller);if(204===n.status)return null;if(e.options.__binaryResponse)return n;const r=n.headers.get("content-type"),i=null==(t=null==r?void 0:r.split(";")[0])?void 0:t.trim();if((null==i?void 0:i.includes("application/json"))||(null==i?void 0:i.endsWith("+json"))){const e=await n.json();return $oe("response",n.status,n.url,n.headers,e),goe(e,n)}const o=await n.text();return $oe("response",n.status,n.url,n.headers,o),o}function goe(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}Die();class yoe extends Promise{constructor(e,t=moe){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new yoe(this.responsePromise,async t=>goe(e(await this.parseResponse(t),t),t.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class voe{constructor({baseURL:e,maxRetries:t=2,timeout:n=6e5,httpAgent:r,fetch:i}){this.baseURL=e,this.maxRetries=Roe("maxRetries",t),this.timeout=Roe("timeout",n),this.httpAgent=r,this.fetch=i??xie}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...Aoe(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${zoe()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,n){return this.request(Promise.resolve(n).then(async n=>{const r=n&&ooe(null==n?void 0:n.body)?new DataView(await n.body.arrayBuffer()):(null==n?void 0:n.body)instanceof DataView?n.body:(null==n?void 0:n.body)instanceof ArrayBuffer?new DataView(n.body):n&&ArrayBuffer.isView(null==n?void 0:n.body)?new DataView(n.body.buffer):null==n?void 0:n.body;return{method:e,path:t,...n,body:r}}))}getAPIList(e,t,n){return this.requestAPIList(t,{method:"get",path:e,...n})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder){return(new TextEncoder).encode(e).length.toString()}}else if(ArrayBuffer.isView(e))return e.byteLength.toString();return null}buildRequest(e,{retryCount:t=0}={}){var n;const r={...e},{method:i,path:o,query:a,headers:s={}}=r,l=ArrayBuffer.isView(r.body)||r.__binaryRequest&&"string"==typeof r.body?r.body:uoe(r.body)?r.body.body:r.body?JSON.stringify(r.body,null,2):null,u=this.calculateContentLength(l),c=this.buildURL(o,a);"timeout"in r&&Roe("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const d=r.httpAgent??this.httpAgent??Cie(c),f=r.timeout+1e3;"number"==typeof(null==(n=null==d?void 0:d.options)?void 0:n.timeout)&&f>(d.options.timeout??0)&&(d.options.timeout=f),this.idempotencyHeader&&"get"!==i&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);return{req:{method:i,...l&&{body:l},headers:this.buildHeaders({options:r,headers:s,contentLength:u,retryCount:t}),...d&&{agent:d},signal:r.signal??null},url:c,timeout:r.timeout}}buildHeaders({options:e,headers:t,contentLength:n,retryCount:r}){const i={};n&&(i["content-length"]=n);const o=this.defaultHeaders(e);return joe(i,o),joe(i,t),uoe(e.body)&&"node"!==_ie&&delete i["content-type"],void 0===Uoe(o,"x-stainless-retry-count")&&void 0===Uoe(t,"x-stainless-retry-count")&&(i["x-stainless-retry-count"]=String(r)),void 0===Uoe(o,"x-stainless-timeout")&&void 0===Uoe(t,"x-stainless-timeout")&&e.timeout&&(i["x-stainless-timeout"]=String(Math.trunc(e.timeout/1e3))),this.validateHeaders(i,t),i}async prepareOptions(e){}async prepareRequest(e,{url:t,options:n}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,n,r){return Mie.generate(e,t,n,r)}request(e,t=null){return new yoe(this.makeRequest(e,t))}async makeRequest(e,t){var n,r;const i=await e,o=i.maxRetries??this.maxRetries;null==t&&(t=o),await this.prepareOptions(i);const{req:a,url:s,timeout:l}=this.buildRequest(i,{retryCount:o-t});if(await this.prepareRequest(a,{url:s,options:i}),$oe("request",s,i,a.headers),null==(n=i.signal)?void 0:n.aborted)throw new Pie;const u=new AbortController,c=await this.fetchWithTimeout(s,a,l,u).catch(Moe);if(c instanceof Error){if(null==(r=i.signal)?void 0:r.aborted)throw new Pie;if(t)return this.retryRequest(i,t);if("AbortError"===c.name)throw new Lie;throw new Fie({cause:c})}const d=_oe(c.headers);if(!c.ok){if(t&&this.shouldRetry(c)){return $oe(`response (error; ${`retrying, ${t} attempts remaining`})`,c.status,s,d),this.retryRequest(i,t,d)}const e=await c.text().catch(e=>Moe(e).message),n=Ioe(e),r=n?void 0:e;$oe(`response (error; ${t?"(error; no more retries left)":"(error; not retryable)"})`,c.status,s,d,r);throw this.makeStatusError(c.status,n,r,d)}return{response:c,options:i,controller:u}}requestAPIList(e,t){const n=this.makeRequest(t,null);return new woe(this,n,e)}buildURL(e,t){const n=Noe(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),r=this.defaultQuery();return Foe(r)||(t={...r,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(n.search=this.stringifyQuery(t)),n.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Rie(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,n,r){const{signal:i,...o}=t||{};i&&i.addEventListener("abort",()=>r.abort());const a=setTimeout(()=>r.abort(),n),s={signal:r.signal,...o};return s.method&&(s.method=s.method.toUpperCase()),this.fetch.call(void 0,e,s).finally(()=>{clearTimeout(a)})}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,n){let r;const i=null==n?void 0:n["retry-after-ms"];if(i){const e=parseFloat(i);Number.isNaN(e)||(r=e)}const o=null==n?void 0:n["retry-after"];if(o&&!r){const e=parseFloat(o);r=Number.isNaN(e)?Date.parse(o)-Date.now():1e3*e}if(!(r&&0<=r&&r<6e4)){const n=e.maxRetries??this.maxRetries;r=this.calculateDefaultRetryTimeoutMillis(t,n)}return await Doe(r),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){const n=t-e;return Math.min(.5*Math.pow(2,n),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${wie}`}}class boe{constructor(e,t,n,r){poe.set(this,void 0),function(e,t,n){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");t.set(e,n)}(this,poe,e),this.options=r,this.response=t,this.body=n}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Rie("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){const n=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,r]of n)e.url.searchParams.set(t,r);t.query=void 0,t.path=e.url.toString()}return await function(e,t,n,r){if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,poe,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(poe=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class woe extends yoe{constructor(e,t,n){super(t,async t=>new n(e,t.response,await moe(t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}const _oe=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const n=t.toString();return e[n.toLowerCase()]||e[n]}}),xoe={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__metadata:!0,__binaryRequest:!0,__binaryResponse:!0,__streamClass:!0},Eoe=e=>"object"==typeof e&&null!==e&&!Foe(e)&&Object.keys(e).every(e=>Loe(xoe,e)),Soe=()=>{var e;if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wie,"X-Stainless-OS":Toe(Deno.build.os),"X-Stainless-Arch":koe(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:(null==(e=Deno.version)?void 0:e.deno)??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wie,"X-Stainless-OS":Toe(process.platform),"X-Stainless-Arch":koe(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const t=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of e){const e=n.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":wie,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};const koe=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",Toe=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let Coe;const Aoe=()=>Coe??(Coe=Soe()),Ioe=e=>{try{return JSON.parse(e)}catch(HOt){return}},Ooe=/^[a-z][a-z0-9+.-]*:/i,Noe=e=>Ooe.test(e),Doe=e=>new Promise(t=>setTimeout(t,e)),Roe=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Rie(`${e} must be an integer`);if(t<0)throw new Rie(`${e} must be a positive integer`);return t},Moe=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e)try{return new Error(JSON.stringify(e))}catch{}return new Error(e)},Poe=e=>{var t,n,r,i;return"undefined"!=typeof process?(null==(t=null==hoe?void 0:hoe[e])?void 0:t.trim())??void 0:"undefined"!=typeof Deno?null==(i=null==(r=null==(n=Deno.env)?void 0:n.get)?void 0:r.call(n,e))?void 0:i.trim():void 0};function Foe(e){if(!e)return!0;for(const t in e)return!1;return!0}function Loe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function joe(e,t){for(const n in t){if(!Loe(t,n))continue;const r=n.toLowerCase();if(!r)continue;const i=t[n];null===i?delete e[r]:void 0!==i&&(e[r]=i)}}const Boe=new Set(["authorization","api-key"]);function $oe(e,...t){if("undefined"!=typeof process&&"true"===(null==hoe?void 0:hoe.DEBUG)){t.map(e=>{if(!e)return e;if(e.headers){const t={...e,headers:{...e.headers}};for(const n in e.headers)Boe.has(n.toLowerCase())&&(t.headers[n]="REDACTED");return t}let t=null;for(const n in e)Boe.has(n.toLowerCase())&&(t??(t={...e}),t[n]="REDACTED");return t??e})}}const zoe=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),Uoe=(e,t)=>{var n;const r=t.toLowerCase();if((e=>"function"==typeof(null==e?void 0:e.get))(e)){const i=(null==(n=t[0])?void 0:n.toUpperCase())+t.substring(1).replace(/([^\w])(\w)/g,(e,t,n)=>t+n.toUpperCase());for(const n of[t,r,t.toUpperCase(),i]){const t=e.get(n);if(t)return t}}for(const[i,o]of Object.entries(e))if(i.toLowerCase()===r)return Array.isArray(o)?(o.length,o[0]):o};function qoe(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}class Hoe extends boe{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.object=n.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class Voe extends boe{constructor(e,t,n,r){super(e,t,n,r),this.data=n.data||[],this.has_more=n.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e;const t=this.getPaginatedItems();if(!t.length)return null;const n=null==(e=t[t.length-1])?void 0:e.id;return n?{params:{after:n}}:null}}class Woe{constructor(e){this._client=e}}let Goe=class extends Woe{list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/chat/completions/${e}/messages`,Zoe,{query:t,...n})}},Yoe=class extends Woe{constructor(){super(...arguments),this.messages=new Goe(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(`/chat/completions/${e}`,t)}update(e,t,n){return this._client.post(`/chat/completions/${e}`,{body:t,...n})}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/chat/completions",Koe,{query:e,...t})}del(e,t){return this._client.delete(`/chat/completions/${e}`,t)}};class Koe extends Voe{}class Zoe extends Voe{}Yoe.ChatCompletionsPage=Koe,Yoe.Messages=Goe;let Qoe=class extends Woe{constructor(){super(...arguments),this.completions=new Yoe(this._client)}};Qoe.Completions=Yoe,Qoe.ChatCompletionsPage=Koe;class Xoe extends Woe{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:{Accept:"application/octet-stream",...null==t?void 0:t.headers},__binaryResponse:!0})}}class Joe extends Woe{create(e,t){return this._client.post("/audio/transcriptions",coe({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}}))}}class eae extends Woe{create(e,t){return this._client.post("/audio/translations",coe({body:e,...t,__metadata:{model:e.model}}))}}class tae extends Woe{constructor(){super(...arguments),this.transcriptions=new Joe(this._client),this.translations=new eae(this._client),this.speech=new Xoe(this._client)}}tae.Transcriptions=Joe,tae.Translations=eae,tae.Speech=Xoe;class nae extends Woe{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(`/batches/${e}`,t)}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/batches",rae,{query:e,...t})}cancel(e,t){return this._client.post(`/batches/${e}/cancel`,t)}}class rae extends Voe{}nae.BatchesPage=rae;var iae,oae,aae,sae,lae,uae,cae,dae,fae,pae,hae,mae,gae,yae=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},vae=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};let bae=class{constructor(){iae.add(this),this.controller=new AbortController,oae.set(this,void 0),aae.set(this,()=>{}),sae.set(this,()=>{}),lae.set(this,void 0),uae.set(this,()=>{}),cae.set(this,()=>{}),dae.set(this,{}),fae.set(this,!1),pae.set(this,!1),hae.set(this,!1),mae.set(this,!1),yae(this,oae,new Promise((e,t)=>{yae(this,aae,e,"f"),yae(this,sae,t,"f")}),"f"),yae(this,lae,new Promise((e,t)=>{yae(this,uae,e,"f"),yae(this,cae,t,"f")}),"f"),vae(this,oae,"f").catch(()=>{}),vae(this,lae,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},vae(this,iae,"m",gae).bind(this))},0)}_connected(){this.ended||(vae(this,aae,"f").call(this),this._emit("connect"))}get ended(){return vae(this,fae,"f")}get errored(){return vae(this,pae,"f")}get aborted(){return vae(this,hae,"f")}abort(){this.controller.abort()}on(e,t){return(vae(this,dae,"f")[e]||(vae(this,dae,"f")[e]=[])).push({listener:t}),this}off(e,t){const n=vae(this,dae,"f")[e];if(!n)return this;const r=n.findIndex(e=>e.listener===t);return r>=0&&n.splice(r,1),this}once(e,t){return(vae(this,dae,"f")[e]||(vae(this,dae,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,n)=>{yae(this,mae,!0,"f"),"error"!==e&&this.once("error",n),this.once(e,t)})}async done(){yae(this,mae,!0,"f"),await vae(this,lae,"f")}_emit(e,...t){if(vae(this,fae,"f"))return;"end"===e&&(yae(this,fae,!0,"f"),vae(this,uae,"f").call(this));const n=vae(this,dae,"f")[e];if(n&&(vae(this,dae,"f")[e]=n.filter(e=>!e.once),n.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return vae(this,mae,"f")||(null==n?void 0:n.length)||Promise.reject(e),vae(this,sae,"f").call(this,e),vae(this,cae,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];vae(this,mae,"f")||(null==n?void 0:n.length)||Promise.reject(e),vae(this,sae,"f").call(this,e),vae(this,cae,"f").call(this,e),this._emit("end")}}_emitFinal(){}};oae=new WeakMap,aae=new WeakMap,sae=new WeakMap,lae=new WeakMap,uae=new WeakMap,cae=new WeakMap,dae=new WeakMap,fae=new WeakMap,pae=new WeakMap,hae=new WeakMap,mae=new WeakMap,iae=new WeakSet,gae=function(e){if(yae(this,pae,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new Pie),e instanceof Pie)return yae(this,hae,!0,"f"),this._emit("abort",e);if(e instanceof Rie)return this._emit("error",e);if(e instanceof Error){const t=new Rie(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new Rie(String(e)))};var wae,_ae,xae,Eae,Sae,kae,Tae,Cae,Aae,Iae,Oae,Nae,Dae,Rae,Mae,Pae,Fae,Lae,jae,Bae,$ae,zae,Uae=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},qae=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};class Hae extends bae{constructor(){super(...arguments),wae.add(this),_ae.set(this,[]),xae.set(this,{}),Eae.set(this,{}),Sae.set(this,void 0),kae.set(this,void 0),Tae.set(this,void 0),Cae.set(this,void 0),Aae.set(this,void 0),Iae.set(this,void 0),Oae.set(this,void 0),Nae.set(this,void 0),Dae.set(this,void 0)}[(_ae=new WeakMap,xae=new WeakMap,Eae=new WeakMap,Sae=new WeakMap,kae=new WeakMap,Tae=new WeakMap,Cae=new WeakMap,Aae=new WeakMap,Iae=new WeakMap,Oae=new WeakMap,Nae=new WeakMap,Dae=new WeakMap,wae=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new Hae;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){var n;const r=null==t?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const i=toe.fromReadableStream(e,this.controller);for await(const o of i)Uae(this,wae,"m",Rae).call(this,o);if(null==(n=i.controller.signal)?void 0:n.aborted)throw new Pie;return this._addRun(Uae(this,wae,"m",Mae).call(this))}toReadableStream(){return new toe(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,n,r,i){const o=new Hae;return o._run(()=>o._runToolAssistantStream(e,t,n,r,{...i,headers:{...null==i?void 0:i.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,n,r,i){var o;const a=null==i?void 0:i.signal;a&&(a.aborted&&this.controller.abort(),a.addEventListener("abort",()=>this.controller.abort()));const s={...r,stream:!0},l=await e.submitToolOutputs(t,n,s,{...i,signal:this.controller.signal});this._connected();for await(const u of l)Uae(this,wae,"m",Rae).call(this,u);if(null==(o=l.controller.signal)?void 0:o.aborted)throw new Pie;return this._addRun(Uae(this,wae,"m",Mae).call(this))}static createThreadAssistantStream(e,t,n){const r=new Hae;return r._run(()=>r._threadAssistantStream(e,t,{...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}static createAssistantStream(e,t,n,r){const i=new Hae;return i._run(()=>i._runAssistantStream(e,t,n,{...r,headers:{...null==r?void 0:r.headers,"X-Stainless-Helper-Method":"stream"}})),i}currentEvent(){return Uae(this,Oae,"f")}currentRun(){return Uae(this,Nae,"f")}currentMessageSnapshot(){return Uae(this,Sae,"f")}currentRunStepSnapshot(){return Uae(this,Dae,"f")}async finalRunSteps(){return await this.done(),Object.values(Uae(this,xae,"f"))}async finalMessages(){return await this.done(),Object.values(Uae(this,Eae,"f"))}async finalRun(){if(await this.done(),!Uae(this,kae,"f"))throw Error("Final run was not received.");return Uae(this,kae,"f")}async _createThreadAssistantStream(e,t,n){var r;const i=null==n?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},a=await e.createAndRun(o,{...n,signal:this.controller.signal});this._connected();for await(const s of a)Uae(this,wae,"m",Rae).call(this,s);if(null==(r=a.controller.signal)?void 0:r.aborted)throw new Pie;return this._addRun(Uae(this,wae,"m",Mae).call(this))}async _createAssistantStream(e,t,n,r){var i;const o=null==r?void 0:r.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const a={...n,stream:!0},s=await e.create(t,a,{...r,signal:this.controller.signal});this._connected();for await(const l of s)Uae(this,wae,"m",Rae).call(this,l);if(null==(i=s.controller.signal)?void 0:i.aborted)throw new Pie;return this._addRun(Uae(this,wae,"m",Mae).call(this))}static accumulateDelta(e,t){for(const[n,r]of Object.entries(t)){if(!e.hasOwnProperty(n)){e[n]=r;continue}let t=e[n];if(null!=t)if("index"!==n&&"type"!==n){if("string"==typeof t&&"string"==typeof r)t+=r;else if("number"==typeof t&&"number"==typeof r)t+=r;else{if(!qoe(t)||!qoe(r)){if(Array.isArray(t)&&Array.isArray(r)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...r);continue}for(const e of r){if(!qoe(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const n=e.index;if(null==n)throw new Error("Expected array delta entry to have an `index` property");if("number"!=typeof n)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${n}`);const r=t[n];null==r?t.push(e):t[n]=this.accumulateDelta(r,e)}continue}throw Error(`Unhandled record type: ${n}, deltaValue: ${r}, accValue: ${t}`)}t=this.accumulateDelta(t,r)}e[n]=t}else e[n]=r;else e[n]=r}return e}_addRun(e){return e}async _threadAssistantStream(e,t,n){return await this._createThreadAssistantStream(t,e,n)}async _runAssistantStream(e,t,n,r){return await this._createAssistantStream(t,e,n,r)}async _runToolAssistantStream(e,t,n,r,i){return await this._createToolAssistantStream(n,e,t,r,i)}}Rae=function(e){if(!this.ended)switch(qae(this,Oae,e,"f"),Uae(this,wae,"m",Lae).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":Uae(this,wae,"m",zae).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Uae(this,wae,"m",Fae).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":Uae(this,wae,"m",Pae).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},Mae=function(){if(this.ended)throw new Rie("stream has ended, this shouldn't happen");if(!Uae(this,kae,"f"))throw Error("Final run has not been received");return Uae(this,kae,"f")},Pae=function(e){const[t,n]=Uae(this,wae,"m",Bae).call(this,e,Uae(this,Sae,"f"));qae(this,Sae,t,"f"),Uae(this,Eae,"f")[t.id]=t;for(const r of n){const e=t.content[r.index];"text"==(null==e?void 0:e.type)&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const n of e.data.delta.content){if("text"==n.type&&n.text){let e=n.text,r=t.content[n.index];if(!r||"text"!=r.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,r.text)}if(n.index!=Uae(this,Tae,"f")){if(Uae(this,Cae,"f"))switch(Uae(this,Cae,"f").type){case"text":this._emit("textDone",Uae(this,Cae,"f").text,Uae(this,Sae,"f"));break;case"image_file":this._emit("imageFileDone",Uae(this,Cae,"f").image_file,Uae(this,Sae,"f"))}qae(this,Tae,n.index,"f")}qae(this,Cae,t.content[n.index],"f")}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==Uae(this,Tae,"f")){const t=e.data.content[Uae(this,Tae,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,Uae(this,Sae,"f"));break;case"text":this._emit("textDone",t.text,Uae(this,Sae,"f"))}}Uae(this,Sae,"f")&&this._emit("messageDone",e.data),qae(this,Sae,void 0,"f")}},Fae=function(e){const t=Uae(this,wae,"m",jae).call(this,e);switch(qae(this,Dae,t,"f"),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const n=e.data.delta;if(n.step_details&&"tool_calls"==n.step_details.type&&n.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of n.step_details.tool_calls)e.index==Uae(this,Aae,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(Uae(this,Iae,"f")&&this._emit("toolCallDone",Uae(this,Iae,"f")),qae(this,Aae,e.index,"f"),qae(this,Iae,t.step_details.tool_calls[e.index],"f"),Uae(this,Iae,"f")&&this._emit("toolCallCreated",Uae(this,Iae,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":qae(this,Dae,void 0,"f");"tool_calls"==e.data.step_details.type&&Uae(this,Iae,"f")&&(this._emit("toolCallDone",Uae(this,Iae,"f")),qae(this,Iae,void 0,"f")),this._emit("runStepDone",e.data,t)}},Lae=function(e){Uae(this,_ae,"f").push(e),this._emit("event",e)},jae=function(e){switch(e.event){case"thread.run.step.created":return Uae(this,xae,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=Uae(this,xae,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let n=e.data;if(n.delta){const r=Hae.accumulateDelta(t,n.delta);Uae(this,xae,"f")[e.data.id]=r}return Uae(this,xae,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":Uae(this,xae,"f")[e.data.id]=e.data}if(Uae(this,xae,"f")[e.data.id])return Uae(this,xae,"f")[e.data.id];throw new Error("No snapshot available")},Bae=function(e,t){let n=[];switch(e.event){case"thread.message.created":return[e.data,n];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let r=e.data;if(r.delta.content)for(const e of r.delta.content)if(e.index in t.content){let n=t.content[e.index];t.content[e.index]=Uae(this,wae,"m",$ae).call(this,e,n)}else t.content[e.index]=e,n.push(e);return[t,n];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,n];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},$ae=function(e,t){return Hae.accumulateDelta(t,e)},zae=function(e){switch(qae(this,Nae,e.data,"f"),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":qae(this,kae,e.data,"f"),Uae(this,Iae,"f")&&(this._emit("toolCallDone",Uae(this,Iae,"f")),qae(this,Iae,void 0,"f"))}};class Vae extends Woe{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post(`/assistants/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/assistants",Wae,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}}class Wae extends Voe{}function Gae(e){return"function"==typeof e.parse}Vae.AssistantsPage=Wae;const Yae=e=>"assistant"===(null==e?void 0:e.role),Kae=e=>"function"===(null==e?void 0:e.role),Zae=e=>"tool"===(null==e?void 0:e.role);function Qae(e){return"auto-parseable-response-format"===(null==e?void 0:e.$brand)}function Xae(e){return"auto-parseable-tool"===(null==e?void 0:e.$brand)}function Jae(e,t){const n=e.choices.map(e=>{var n;if("length"===e.finish_reason)throw new Wie;if("content_filter"===e.finish_reason)throw new Gie;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:(null==(n=e.message.tool_calls)?void 0:n.map(e=>function(e,t){var n;const r=null==(n=e.tools)?void 0:n.find(e=>{var n;return(null==(n=e.function)?void 0:n.name)===t.function.name});return{...t,function:{...t.function,parsed_arguments:Xae(r)?r.$parseRaw(t.function.arguments):(null==r?void 0:r.function.strict)?JSON.parse(t.function.arguments):null}}}(t,e)))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?ese(t,e.message.content):null}}});return{...e,choices:n}}function ese(e,t){var n,r;if("json_schema"!==(null==(n=e.response_format)?void 0:n.type))return null;if("json_schema"===(null==(r=e.response_format)?void 0:r.type)){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function tse(e,t){var n;if(!e)return!1;const r=null==(n=e.tools)?void 0:n.find(e=>{var n;return(null==(n=e.function)?void 0:n.name)===t.function.name});return Xae(r)||(null==r?void 0:r.function.strict)||!1}function nse(e){var t;return!!Qae(e.response_format)||((null==(t=e.tools)?void 0:t.some(e=>Xae(e)||"function"===e.type&&!0===e.function.strict))??!1)}var rse,ise,ose,ase,sse,lse,use,cse,dse=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};const fse=10;class pse extends bae{constructor(){super(...arguments),rse.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){var t;this._chatCompletions.push(e),this._emit("chatCompletion",e);const n=null==(t=e.choices[0])?void 0:t.message;return n&&this._addMessage(n),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),(Kae(e)||Zae(e))&&e.content)this._emit("functionCallResult",e.content);else if(Yae(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(Yae(e)&&e.tool_calls)for(const n of e.tool_calls)"function"===n.type&&this._emit("functionCall",n.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new Rie("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),dse(this,rse,"m",ise).call(this)}async finalMessage(){return await this.done(),dse(this,rse,"m",ose).call(this)}async finalFunctionCall(){return await this.done(),dse(this,rse,"m",ase).call(this)}async finalFunctionCallResult(){return await this.done(),dse(this,rse,"m",sse).call(this)}async totalUsage(){return await this.done(),dse(this,rse,"m",lse).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=dse(this,rse,"m",ose).call(this);t&&this._emit("finalMessage",t);const n=dse(this,rse,"m",ise).call(this);n&&this._emit("finalContent",n);const r=dse(this,rse,"m",ase).call(this);r&&this._emit("finalFunctionCall",r);const i=dse(this,rse,"m",sse).call(this);null!=i&&this._emit("finalFunctionCallResult",i),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",dse(this,rse,"m",lse).call(this))}async _createChatCompletion(e,t,n){const r=null==n?void 0:n.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),dse(this,rse,"m",use).call(this,t);const i=await e.chat.completions.create({...t,stream:!1},{...n,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Jae(i,t))}async _runChatCompletion(e,t,n){for(const r of t.messages)this._addMessage(r,!1);return await this._createChatCompletion(e,t,n)}async _runFunctions(e,t,n){var r;const i="function",{function_call:o="auto",stream:a,...s}=t,l="string"!=typeof o&&(null==o?void 0:o.name),{maxChatCompletions:u=fse}=n||{},c={};for(const p of t.functions)c[p.name||p.function.name]=p;const d=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(const p of t.messages)this._addMessage(p,!1);for(let p=0;p<u;++p){const t=null==(r=(await this._createChatCompletion(e,{...s,function_call:o,functions:d,messages:[...this.messages]},n)).choices[0])?void 0:r.message;if(!t)throw new Rie("missing message in ChatCompletion response");if(!t.function_call)return;const{name:a,arguments:u}=t.function_call,p=c[a];if(!p){const e=`Invalid function_call: ${JSON.stringify(a)}. Available options are: ${d.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:i,name:a,content:e});continue}if(l&&l!==a){const e=`Invalid function_call: ${JSON.stringify(a)}. ${JSON.stringify(l)} requested. Please try again`;this._addMessage({role:i,name:a,content:e});continue}let h;try{h=Gae(p)?await p.parse(u):u}catch(f){this._addMessage({role:i,name:a,content:f instanceof Error?f.message:String(f)});continue}const m=await p.function(h,this),g=dse(this,rse,"m",cse).call(this,m);if(this._addMessage({role:i,name:a,content:g}),l)return}}async _runTools(e,t,n){var r,i,o;const a="tool",{tool_choice:s="auto",stream:l,...u}=t,c="string"!=typeof s&&(null==(r=null==s?void 0:s.function)?void 0:r.name),{maxChatCompletions:d=fse}=n||{},f=t.tools.map(e=>{if(Xae(e)){if(!e.$callback)throw new Rie("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),p={};for(const g of f)"function"===g.type&&(p[g.function.name||g.function.function.name]=g.function);const h="tools"in t?f.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const g of t.messages)this._addMessage(g,!1);for(let g=0;g<d;++g){const t=null==(i=(await this._createChatCompletion(e,{...u,tool_choice:s,tools:h,messages:[...this.messages]},n)).choices[0])?void 0:i.message;if(!t)throw new Rie("missing message in ChatCompletion response");if(!(null==(o=t.tool_calls)?void 0:o.length))return;for(const e of t.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:n,arguments:r}=e.function,i=p[n];if(!i){const e=`Invalid tool_call: ${JSON.stringify(n)}. Available options are: ${Object.keys(p).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:a,tool_call_id:t,content:e});continue}if(c&&c!==n){const e=`Invalid tool_call: ${JSON.stringify(n)}. ${JSON.stringify(c)} requested. Please try again`;this._addMessage({role:a,tool_call_id:t,content:e});continue}let o;try{o=Gae(i)?await i.parse(r):r}catch(m){const e=m instanceof Error?m.message:String(m);this._addMessage({role:a,tool_call_id:t,content:e});continue}const s=await i.function(o,this),l=dse(this,rse,"m",cse).call(this,s);if(this._addMessage({role:a,tool_call_id:t,content:l}),c)return}}}}rse=new WeakSet,ise=function(){return dse(this,rse,"m",ose).call(this).content??null},ose=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(Yae(t)){const{function_call:e,...n}=t,r={...n,content:t.content??null,refusal:t.refusal??null};return e&&(r.function_call=e),r}}throw new Rie("stream ended without producing a ChatCompletionMessage with role=assistant")},ase=function(){var e,t;for(let n=this.messages.length-1;n>=0;n--){const r=this.messages[n];if(Yae(r)&&(null==r?void 0:r.function_call))return r.function_call;if(Yae(r)&&(null==(e=null==r?void 0:r.tool_calls)?void 0:e.length))return null==(t=r.tool_calls.at(-1))?void 0:t.function}},sse=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(Kae(t)&&null!=t.content)return t.content;if(Zae(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>{var n;return"assistant"===e.role&&(null==(n=e.tool_calls)?void 0:n.some(e=>"function"===e.type&&e.id===t.tool_call_id))}))return t.content}},lse=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},use=function(e){if(null!=e.n&&e.n>1)throw new Rie("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},cse=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class hse extends pse{static runFunctions(e,t,n){const r=new hse,i={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,i)),r}static runTools(e,t,n){const r=new hse,i={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,i)),r}_addMessage(e,t=!0){super._addMessage(e,t),Yae(e)&&e.content&&this._emit("content",e.content)}}const mse=1,gse=2,yse=4,vse=8,bse=16,wse=32,_se=64,xse=128,Ese=256,Sse=511;class kse extends Error{}class Tse extends Error{}const Cse=(e,t)=>{const n=e.length;let r=0;const i=e=>{throw new kse(`${e} at position ${r}`)},o=e=>{throw new Tse(`${e} at position ${r}`)},a=()=>(d(),r>=n&&i("Unexpected end of input"),'"'===e[r]?s():"{"===e[r]?l():"["===e[r]?u():"null"===e.substring(r,r+4)||bse&t&&n-r<4&&"null".startsWith(e.substring(r))?(r+=4,null):"true"===e.substring(r,r+4)||wse&t&&n-r<4&&"true".startsWith(e.substring(r))?(r+=4,!0):"false"===e.substring(r,r+5)||wse&t&&n-r<5&&"false".startsWith(e.substring(r))?(r+=5,!1):"Infinity"===e.substring(r,r+8)||xse&t&&n-r<8&&"Infinity".startsWith(e.substring(r))?(r+=8,1/0):"-Infinity"===e.substring(r,r+9)||Ese&t&&1<n-r&&n-r<9&&"-Infinity".startsWith(e.substring(r))?(r+=9,-1/0):"NaN"===e.substring(r,r+3)||_se&t&&n-r<3&&"NaN".startsWith(e.substring(r))?(r+=3,NaN):c()),s=()=>{const a=r;let s=!1;for(r++;r<n&&('"'!==e[r]||s&&"\\"===e[r-1]);)s="\\"===e[r]&&!s,r++;if('"'==e.charAt(r))try{return JSON.parse(e.substring(a,++r-Number(s)))}catch(F0){o(String(F0))}else if(mse&t)try{return JSON.parse(e.substring(a,r-Number(s))+'"')}catch(F0){return JSON.parse(e.substring(a,e.lastIndexOf("\\"))+'"')}i("Unterminated string literal")},l=()=>{r++,d();const o={};try{for(;"}"!==e[r];){if(d(),r>=n&&vse&t)return o;const i=s();d(),r++;try{const e=a();Object.defineProperty(o,i,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(F0){if(vse&t)return o;throw F0}d(),","===e[r]&&r++}}catch(F0){if(vse&t)return o;i("Expected '}' at end of object")}return r++,o},u=()=>{r++;const n=[];try{for(;"]"!==e[r];)n.push(a()),d(),","===e[r]&&r++}catch(F0){if(yse&t)return n;i("Expected ']' at end of array")}return r++,n},c=()=>{if(0===r){"-"===e&&gse&t&&i("Not sure what '-' is");try{return JSON.parse(e)}catch(F0){if(gse&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(s){}o(String(F0))}}const a=r;for("-"===e[r]&&r++;e[r]&&!",]}".includes(e[r]);)r++;r!=n||gse&t||i("Unterminated number literal");try{return JSON.parse(e.substring(a,r))}catch(F0){"-"===e.substring(a,r)&&gse&t&&i("Not sure what '-' is");try{return JSON.parse(e.substring(a,e.lastIndexOf("e")))}catch(s){o(String(s))}}},d=()=>{for(;r<n&&" \n\r\t".includes(e[r]);)r++};return a()},Ase=e=>function(e,t=Sse){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return Cse(e.trim(),t)}(e,Sse^gse);var Ise,Ose,Nse,Dse,Rse,Mse,Pse,Fse,Lse,jse,Bse,$se,zse=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},Use=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class qse extends pse{constructor(e){super(),Ise.add(this),Ose.set(this,void 0),Nse.set(this,void 0),Dse.set(this,void 0),zse(this,Ose,e,"f"),zse(this,Nse,[],"f")}get currentChatCompletionSnapshot(){return Use(this,Dse,"f")}static fromReadableStream(e){const t=new qse(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,n){const r=new qse(t);return r._run(()=>r._runChatCompletion(e,{...t,stream:!0},{...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createChatCompletion(e,t,n){var r;super._createChatCompletion;const i=null==n?void 0:n.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),Use(this,Ise,"m",Rse).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...n,signal:this.controller.signal});this._connected();for await(const a of o)Use(this,Ise,"m",Pse).call(this,a);if(null==(r=o.controller.signal)?void 0:r.aborted)throw new Pie;return this._addChatCompletion(Use(this,Ise,"m",jse).call(this))}async _fromReadableStream(e,t){var n;const r=null==t?void 0:t.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),Use(this,Ise,"m",Rse).call(this),this._connected();const i=toe.fromReadableStream(e,this.controller);let o;for await(const a of i)o&&o!==a.id&&this._addChatCompletion(Use(this,Ise,"m",jse).call(this)),Use(this,Ise,"m",Pse).call(this,a),o=a.id;if(null==(n=i.controller.signal)?void 0:n.aborted)throw new Pie;return this._addChatCompletion(Use(this,Ise,"m",jse).call(this))}[(Ose=new WeakMap,Nse=new WeakMap,Dse=new WeakMap,Ise=new WeakSet,Rse=function(){this.ended||zse(this,Dse,void 0,"f")},Mse=function(e){let t=Use(this,Nse,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},Use(this,Nse,"f")[e.index]=t,t)},Pse=function(e){var t,n,r,i,o,a,s,l,u,c,d,f,p,h,m;if(this.ended)return;const g=Use(this,Ise,"m",$se).call(this,e);this._emit("chunk",e,g);for(const y of e.choices){const e=g.choices[y.index];null!=y.delta.content&&"assistant"===(null==(t=e.message)?void 0:t.role)&&(null==(n=e.message)?void 0:n.content)&&(this._emit("content",y.delta.content,e.message.content),this._emit("content.delta",{delta:y.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=y.delta.refusal&&"assistant"===(null==(r=e.message)?void 0:r.role)&&(null==(i=e.message)?void 0:i.refusal)&&this._emit("refusal.delta",{delta:y.delta.refusal,snapshot:e.message.refusal}),null!=(null==(o=y.logprobs)?void 0:o.content)&&"assistant"===(null==(a=e.message)?void 0:a.role)&&this._emit("logprobs.content.delta",{content:null==(s=y.logprobs)?void 0:s.content,snapshot:(null==(l=e.logprobs)?void 0:l.content)??[]}),null!=(null==(u=y.logprobs)?void 0:u.refusal)&&"assistant"===(null==(c=e.message)?void 0:c.role)&&this._emit("logprobs.refusal.delta",{refusal:null==(d=y.logprobs)?void 0:d.refusal,snapshot:(null==(f=e.logprobs)?void 0:f.refusal)??[]});const v=Use(this,Ise,"m",Mse).call(this,e);e.finish_reason&&(Use(this,Ise,"m",Lse).call(this,e),null!=v.current_tool_call_index&&Use(this,Ise,"m",Fse).call(this,e,v.current_tool_call_index));for(const t of y.delta.tool_calls??[])v.current_tool_call_index!==t.index&&(Use(this,Ise,"m",Lse).call(this,e),null!=v.current_tool_call_index&&Use(this,Ise,"m",Fse).call(this,e,v.current_tool_call_index)),v.current_tool_call_index=t.index;for(const t of y.delta.tool_calls??[]){const n=null==(p=e.message.tool_calls)?void 0:p[t.index];(null==n?void 0:n.type)&&("function"===(null==n?void 0:n.type)?this._emit("tool_calls.function.arguments.delta",{name:null==(h=n.function)?void 0:h.name,index:t.index,arguments:n.function.arguments,parsed_arguments:n.function.parsed_arguments,arguments_delta:(null==(m=t.function)?void 0:m.arguments)??""}):Vse(null==n?void 0:n.type))}}},Fse=function(e,t){var n,r,i;if(Use(this,Ise,"m",Mse).call(this,e).done_tool_calls.has(t))return;const o=null==(n=e.message.tool_calls)?void 0:n[t];if(!o)throw new Error("no tool call snapshot");if(!o.type)throw new Error("tool call snapshot missing `type`");if("function"===o.type){const e=null==(i=null==(r=Use(this,Ose,"f"))?void 0:r.tools)?void 0:i.find(e=>"function"===e.type&&e.function.name===o.function.name);this._emit("tool_calls.function.arguments.done",{name:o.function.name,index:t,arguments:o.function.arguments,parsed_arguments:Xae(e)?e.$parseRaw(o.function.arguments):(null==e?void 0:e.function.strict)?JSON.parse(o.function.arguments):null})}else o.type},Lse=function(e){var t,n;const r=Use(this,Ise,"m",Mse).call(this,e);if(e.message.content&&!r.content_done){r.content_done=!0;const t=Use(this,Ise,"m",Bse).call(this);this._emit("content.done",{content:e.message.content,parsed:t?t.$parseRaw(e.message.content):null})}e.message.refusal&&!r.refusal_done&&(r.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),(null==(t=e.logprobs)?void 0:t.content)&&!r.logprobs_content_done&&(r.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),(null==(n=e.logprobs)?void 0:n.refusal)&&!r.logprobs_refusal_done&&(r.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},jse=function(){if(this.ended)throw new Rie("stream has ended, this shouldn't happen");const e=Use(this,Dse,"f");if(!e)throw new Rie("request ended without sending any chunks");return zse(this,Dse,void 0,"f"),zse(this,Nse,[],"f"),function(e,t){const{id:n,choices:r,created:i,model:o,system_fingerprint:a,...s}=e,l={...s,id:n,choices:r.map(({message:t,finish_reason:n,index:r,logprobs:i,...o})=>{if(!n)throw new Rie(`missing finish_reason for choice ${r}`);const{content:a=null,function_call:s,tool_calls:l,...u}=t,c=t.role;if(!c)throw new Rie(`missing role for choice ${r}`);if(s){const{arguments:e,name:l}=s;if(null==e)throw new Rie(`missing function_call.arguments for choice ${r}`);if(!l)throw new Rie(`missing function_call.name for choice ${r}`);return{...o,message:{content:a,function_call:{arguments:e,name:l},role:c,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}return l?{...o,index:r,finish_reason:n,logprobs:i,message:{...u,role:c,content:a,refusal:t.refusal??null,tool_calls:l.map((t,n)=>{const{function:i,type:o,id:a,...s}=t,{arguments:l,name:u,...c}=i||{};if(null==a)throw new Rie(`missing choices[${r}].tool_calls[${n}].id\n${Hse(e)}`);if(null==o)throw new Rie(`missing choices[${r}].tool_calls[${n}].type\n${Hse(e)}`);if(null==u)throw new Rie(`missing choices[${r}].tool_calls[${n}].function.name\n${Hse(e)}`);if(null==l)throw new Rie(`missing choices[${r}].tool_calls[${n}].function.arguments\n${Hse(e)}`);return{...s,id:a,type:o,function:{...c,name:u,arguments:l}}})}}:{...o,message:{...u,content:a,role:c,refusal:t.refusal??null},finish_reason:n,index:r,logprobs:i}}),created:i,model:o,object:"chat.completion",...a?{system_fingerprint:a}:{}};return function(e,t){return t&&nse(t)?Jae(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}(l,t)}(e,Use(this,Ose,"f"))},Bse=function(){var e;const t=null==(e=Use(this,Ose,"f"))?void 0:e.response_format;return Qae(t)?t:null},$se=function(e){var t,n,r,i;let o=Use(this,Dse,"f");const{choices:a,...s}=e;o?Object.assign(o,s):o=zse(this,Dse,{...s,choices:[]},"f");for(const{delta:l,finish_reason:u,index:c,logprobs:d=null,...f}of e.choices){let e=o.choices[c];if(e||(e=o.choices[c]={finish_reason:u,index:c,message:{},logprobs:d,...f}),d)if(e.logprobs){const{content:r,refusal:i,...o}=d;Object.assign(e.logprobs,o),r&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...r)),i&&((n=e.logprobs).refusal??(n.refusal=[]),e.logprobs.refusal.push(...i))}else e.logprobs=Object.assign({},d);if(u&&(e.finish_reason=u,Use(this,Ose,"f")&&nse(Use(this,Ose,"f")))){if("length"===u)throw new Wie;if("content_filter"===u)throw new Gie}if(Object.assign(e,f),!l)continue;const{content:a,refusal:s,function_call:p,role:h,tool_calls:m,...g}=l;if(Object.assign(e.message,g),s&&(e.message.refusal=(e.message.refusal||"")+s),h&&(e.message.role=h),p&&(e.message.function_call?(p.name&&(e.message.function_call.name=p.name),p.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=p.arguments)):e.message.function_call=p),a&&(e.message.content=(e.message.content||"")+a,!e.message.refusal&&Use(this,Ise,"m",Bse).call(this)&&(e.message.parsed=Ase(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:n,type:r,function:o,...a}of m){const s=(i=e.message.tool_calls)[t]??(i[t]={});Object.assign(s,a),n&&(s.id=n),r&&(s.type=r),o&&(s.function??(s.function={name:o.name??"",arguments:""})),(null==o?void 0:o.name)&&(s.function.name=o.name),(null==o?void 0:o.arguments)&&(s.function.arguments+=o.arguments,tse(Use(this,Ose,"f"),s)&&(s.function.parsed_arguments=Ase(s.function.arguments)))}}}return o},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("chunk",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new toe(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function Hse(e){return JSON.stringify(e)}function Vse(e){}class Wse extends qse{static fromReadableStream(e){const t=new Wse(null);return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,n){const r=new Wse(null),i={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runFunctions"}};return r._run(()=>r._runFunctions(e,t,i)),r}static runTools(e,t,n){const r=new Wse(t),i={...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"runTools"}};return r._run(()=>r._runTools(e,t,i)),r}}let Gse=class extends Woe{parse(e,t){return function(e){for(const t of e??[]){if("function"!==t.type)throw new Rie(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new Rie(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}(e.tools),this._client.chat.completions.create(e,{...t,headers:{...null==t?void 0:t.headers,"X-Stainless-Helper-Method":"beta.chat.completions.parse"}})._thenUnwrap(t=>Jae(t,e))}runFunctions(e,t){return e.stream?Wse.runFunctions(this._client,e,t):hse.runFunctions(this._client,e,t)}runTools(e,t){return e.stream?Wse.runTools(this._client,e,t):hse.runTools(this._client,e,t)}stream(e,t){return qse.createChatCompletion(this._client,e,t)}};class Yse extends Woe{constructor(){super(...arguments),this.completions=new Gse(this._client)}}(Yse||(Yse={})).Completions=Gse;class Kse extends Woe{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}}class Zse extends Woe{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}}class Qse extends Woe{constructor(){super(...arguments),this.sessions=new Kse(this._client),this.transcriptionSessions=new Zse(this._client)}}Qse.Sessions=Kse,Qse.TranscriptionSessions=Zse;class Xse extends Woe{create(e,t,n){return this._client.post(`/threads/${e}/messages`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/messages/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,Jse,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/threads/${e}/messages/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}}class Jse extends Voe{}Xse.MessagesPage=Jse;class ele extends Woe{retrieve(e,t,n,r={},i){return Eoe(r)?this.retrieve(e,t,n,{},r):this._client.get(`/threads/${e}/runs/${t}/steps/${n}`,{query:r,...i,headers:{"OpenAI-Beta":"assistants=v2",...null==i?void 0:i.headers}})}list(e,t,n={},r){return Eoe(n)?this.list(e,t,{},n):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,tle,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}}class tle extends Voe{}ele.RunStepsPage=tle;let nle=class extends Woe{constructor(){super(...arguments),this.steps=new ele(this._client)}create(e,t,n){const{include:r,...i}=t;return this._client.post(`/threads/${e}/runs`,{query:{include:r},body:i,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers},stream:t.stream??!1})}retrieve(e,t,n){return this._client.get(`/threads/${e}/runs/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,rle,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}createAndStream(e,t,n){return Hae.createAssistantStream(e,this._client.beta.threads.runs,t,n)}async poll(e,t,n){const r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,t,{...n,headers:{...null==n?void 0:n.headers,...r}}).withResponse();switch(i.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(null==n?void 0:n.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Doe(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return i}}}stream(e,t,n){return Hae.createAssistantStream(e,this._client.beta.threads.runs,t,n)}submitToolOutputs(e,t,n,r){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers},stream:n.stream??!1})}async submitToolOutputsAndPoll(e,t,n,r){const i=await this.submitToolOutputs(e,t,n,r);return await this.poll(e,i.id,r)}submitToolOutputsStream(e,t,n,r){return Hae.createToolAssistantStream(e,t,this._client.beta.threads.runs,n,r)}};class rle extends Voe{}nle.RunsPage=rle,nle.Steps=ele,nle.RunStepsPage=tle;class ile extends Woe{constructor(){super(...arguments),this.runs=new nle(this._client),this.messages=new Xse(this._client)}create(e={},t){return Eoe(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post(`/threads/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers},stream:e.stream??!1})}async createAndRunPoll(e,t){const n=await this.createAndRun(e,t);return await this.runs.poll(n.thread_id,n.id,t)}createAndRunStream(e,t){return Hae.createThreadAssistantStream(e,this._client.beta.threads,t)}}ile.Runs=nle,ile.RunsPage=rle,ile.Messages=Xse,ile.MessagesPage=Jse;class ole extends Woe{constructor(){super(...arguments),this.realtime=new Qse(this._client),this.chat=new Yse(this._client),this.assistants=new Vae(this._client),this.threads=new ile(this._client)}}ole.Realtime=Qse,ole.Assistants=Vae,ole.AssistantsPage=Wae,ole.Threads=ile;class ale extends Woe{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class sle extends Woe{retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}/content`,{...n,headers:{Accept:"application/binary",...null==n?void 0:n.headers},__binaryResponse:!0})}}let lle=class extends Woe{constructor(){super(...arguments),this.content=new sle(this._client)}create(e,t,n){return this._client.post(`/containers/${e}/files`,coe({body:t,...n}))}retrieve(e,t,n){return this._client.get(`/containers/${e}/files/${t}`,n)}list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/containers/${e}/files`,ule,{query:t,...n})}del(e,t,n){return this._client.delete(`/containers/${e}/files/${t}`,{...n,headers:{Accept:"*/*",...null==n?void 0:n.headers}})}};class ule extends Voe{}lle.FileListResponsesPage=ule,lle.Content=sle;class cle extends Woe{constructor(){super(...arguments),this.files=new lle(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(`/containers/${e}`,t)}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/containers",dle,{query:e,...t})}del(e,t){return this._client.delete(`/containers/${e}`,{...t,headers:{Accept:"*/*",...null==t?void 0:t.headers}})}}class dle extends Voe{}cle.ContainerListResponsesPage=dle,cle.Files=lle,cle.FileListResponsesPage=ule;class fle extends Woe{create(e,t){const n=!!e.encoding_format;let r=n?e.encoding_format:"base64";n&&$oe(0,"User defined encoding_format:",e.encoding_format);const i=this._client.post("/embeddings",{body:{...e,encoding_format:r},...t});return n?i:($oe(0,"Decoding base64 embeddings to float32 array"),i._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=(e=>{if("undefined"!=typeof Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let e=0;e<n;e++)r[e]=t.charCodeAt(e);return Array.from(new Float32Array(r.buffer))}})(t)}),e)))}}class ple extends Woe{retrieve(e,t,n,r){return this._client.get(`/evals/${e}/runs/${t}/output_items/${n}`,r)}list(e,t,n={},r){return Eoe(n)?this.list(e,t,{},n):this._client.getAPIList(`/evals/${e}/runs/${t}/output_items`,hle,{query:n,...r})}}class hle extends Voe{}ple.OutputItemListResponsesPage=hle;class mle extends Woe{constructor(){super(...arguments),this.outputItems=new ple(this._client)}create(e,t,n){return this._client.post(`/evals/${e}/runs`,{body:t,...n})}retrieve(e,t,n){return this._client.get(`/evals/${e}/runs/${t}`,n)}list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/evals/${e}/runs`,gle,{query:t,...n})}del(e,t,n){return this._client.delete(`/evals/${e}/runs/${t}`,n)}cancel(e,t,n){return this._client.post(`/evals/${e}/runs/${t}`,n)}}class gle extends Voe{}mle.RunListResponsesPage=gle,mle.OutputItems=ple,mle.OutputItemListResponsesPage=hle;class yle extends Woe{constructor(){super(...arguments),this.runs=new mle(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(`/evals/${e}`,t)}update(e,t,n){return this._client.post(`/evals/${e}`,{body:t,...n})}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/evals",vle,{query:e,...t})}del(e,t){return this._client.delete(`/evals/${e}`,t)}}class vle extends Voe{}yle.EvalListResponsesPage=vle,yle.Runs=mle,yle.RunListResponsesPage=gle;let ble=class extends Woe{create(e,t){return this._client.post("/files",coe({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/files",wle,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/binary",...null==t?void 0:t.headers},__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,t)}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:n=18e5}={}){const r=new Set(["processed","error","deleted"]),i=Date.now();let o=await this.retrieve(e);for(;!o.status||!r.has(o.status);)if(await Doe(t),o=await this.retrieve(e),Date.now()-i>n)throw new Lie({message:`Giving up on waiting for file ${e} to finish processing after ${n} milliseconds.`});return o}};class wle extends Voe{}ble.FileObjectsPage=wle;let _le=class extends Woe{},xle=class extends Woe{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Ele extends Woe{constructor(){super(...arguments),this.graders=new xle(this._client)}}Ele.Graders=xle;class Sle extends Woe{create(e,t,n){return this._client.getAPIList(`/fine_tuning/checkpoints/${e}/permissions`,kle,{body:t,method:"post",...n})}retrieve(e,t={},n){return Eoe(t)?this.retrieve(e,{},t):this._client.get(`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...n})}del(e,t,n){return this._client.delete(`/fine_tuning/checkpoints/${e}/permissions/${t}`,n)}}class kle extends Hoe{}Sle.PermissionCreateResponsesPage=kle;let Tle=class extends Woe{constructor(){super(...arguments),this.permissions=new Sle(this._client)}};Tle.Permissions=Sle,Tle.PermissionCreateResponsesPage=kle;class Cle extends Woe{list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/checkpoints`,Ale,{query:t,...n})}}class Ale extends Voe{}Cle.FineTuningJobCheckpointsPage=Ale;class Ile extends Woe{constructor(){super(...arguments),this.checkpoints=new Cle(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",Ole,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},n){return Eoe(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,Nle,{query:t,...n})}pause(e,t){return this._client.post(`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(`/fine_tuning/jobs/${e}/resume`,t)}}class Ole extends Voe{}class Nle extends Voe{}Ile.FineTuningJobsPage=Ole,Ile.FineTuningJobEventsPage=Nle,Ile.Checkpoints=Cle,Ile.FineTuningJobCheckpointsPage=Ale;class Dle extends Woe{constructor(){super(...arguments),this.methods=new _le(this._client),this.jobs=new Ile(this._client),this.checkpoints=new Tle(this._client),this.alpha=new Ele(this._client)}}Dle.Methods=_le,Dle.Jobs=Ile,Dle.FineTuningJobsPage=Ole,Dle.FineTuningJobEventsPage=Nle,Dle.Checkpoints=Tle,Dle.Alpha=Ele;class Rle extends Woe{}class Mle extends Woe{constructor(){super(...arguments),this.graderModels=new Rle(this._client)}}Mle.GraderModels=Rle;class Ple extends Woe{createVariation(e,t){return this._client.post("/images/variations",coe({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",coe({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Fle extends Woe{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Lle,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class Lle extends Hoe{}Fle.ModelsPage=Lle;class jle extends Woe{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function Ble(e,t){return t&&function(e){var t;if(Qae(null==(t=e.text)?void 0:t.format))return!0;return!1}(t)?$le(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}function $le(e,t){const n=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:Ule(t,e)};if("message"===e.type){const n=e.content.map(e=>"output_text"===e.type?{...e,parsed:zle(t,e.text)}:e);return{...e,content:n}}return e}),r=Object.assign({},e,{output:n});return Object.getOwnPropertyDescriptor(e,"output_text")||qle(r),Object.defineProperty(r,"output_parsed",{enumerable:!0,get(){for(const e of r.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),r}function zle(e,t){var n,r,i,o;if("json_schema"!==(null==(r=null==(n=e.text)?void 0:n.format)?void 0:r.type))return null;if("$parseRaw"in(null==(i=e.text)?void 0:i.format)){return(null==(o=e.text)?void 0:o.format).$parseRaw(t)}return JSON.parse(t)}function Ule(e,t){const n=(r=e.tools??[],i=t.name,r.find(e=>"function"===e.type&&e.name===i));var r,i,o;return{...t,...t,parsed_arguments:(o=n,"auto-parseable-tool"===(null==o?void 0:o.$brand)?n.$parseRaw(t.arguments):(null==n?void 0:n.strict)?JSON.parse(t.arguments):null)}}function qle(e){const t=[];for(const n of e.output)if("message"===n.type)for(const e of n.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}class Hle extends Woe{list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/responses/${e}/input_items`,rue,{query:t,...n})}}var Vle,Wle,Gle,Yle,Kle,Zle,Qle,Xle,Jle=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},eue=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};class tue extends bae{constructor(e){super(),Vle.add(this),Wle.set(this,void 0),Gle.set(this,void 0),Yle.set(this,void 0),Jle(this,Wle,e,"f")}static createResponse(e,t,n){const r=new tue(t);return r._run(()=>r._createOrRetrieveResponse(e,t,{...n,headers:{...null==n?void 0:n.headers,"X-Stainless-Helper-Method":"stream"}})),r}async _createOrRetrieveResponse(e,t,n){var r;const i=null==n?void 0:n.signal;let o;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),eue(this,Vle,"m",Kle).call(this);let a=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...n,signal:this.controller.signal,stream:!0}),a=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...n,signal:this.controller.signal}),this._connected();for await(const s of o)eue(this,Vle,"m",Zle).call(this,s,a);if(null==(r=o.controller.signal)?void 0:r.aborted)throw new Pie;return eue(this,Vle,"m",Qle).call(this)}[(Wle=new WeakMap,Gle=new WeakMap,Yle=new WeakMap,Vle=new WeakSet,Kle=function(){this.ended||Jle(this,Gle,void 0,"f")},Zle=function(e,t){if(this.ended)return;const n=(e,n)=>{(null==t||n.sequence_number>t)&&this._emit(e,n)},r=eue(this,Vle,"m",Xle).call(this,e);switch(n("event",e),e.type){case"response.output_text.delta":{const t=r.output[e.output_index];if(!t)throw new Rie(`missing output at index ${e.output_index}`);if("message"===t.type){const r=t.content[e.content_index];if(!r)throw new Rie(`missing content at index ${e.content_index}`);if("output_text"!==r.type)throw new Rie(`expected content to be 'output_text', got ${r.type}`);n("response.output_text.delta",{...e,snapshot:r.text})}break}case"response.function_call_arguments.delta":{const t=r.output[e.output_index];if(!t)throw new Rie(`missing output at index ${e.output_index}`);"function_call"===t.type&&n("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:n(e.type,e)}},Qle=function(){if(this.ended)throw new Rie("stream has ended, this shouldn't happen");const e=eue(this,Gle,"f");if(!e)throw new Rie("request ended without sending any events");Jle(this,Gle,void 0,"f");const t=function(e,t){return Ble(e,t)}(e,eue(this,Wle,"f"));return Jle(this,Yle,t,"f"),t},Xle=function(e){let t=eue(this,Gle,"f");if(!t){if("response.created"!==e.type)throw new Rie(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=Jle(this,Gle,e.response,"f"),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const n=t.output[e.output_index];if(!n)throw new Rie(`missing output at index ${e.output_index}`);"message"===n.type&&n.content.push(e.part);break}case"response.output_text.delta":{const n=t.output[e.output_index];if(!n)throw new Rie(`missing output at index ${e.output_index}`);if("message"===n.type){const t=n.content[e.content_index];if(!t)throw new Rie(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new Rie(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const n=t.output[e.output_index];if(!n)throw new Rie(`missing output at index ${e.output_index}`);"function_call"===n.type&&(n.arguments+=e.delta);break}case"response.completed":Jle(this,Gle,e.response,"f")}return t},Symbol.asyncIterator)](){const e=[],t=[];let n=!1;return this.on("event",n=>{const r=t.shift();r?r.resolve(n):e.push(n)}),this.on("end",()=>{n=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),this.on("error",e=>{n=!0;for(const n of t)n.reject(e);t.length=0}),{next:async()=>{if(!e.length)return n?{value:void 0,done:!0}:new Promise((e,n)=>t.push({resolve:e,reject:n})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=eue(this,Yle,"f");if(!e)throw new Rie("stream ended without producing a ChatCompletion");return e}}class nue extends Woe{constructor(){super(...arguments),this.inputItems=new Hle(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&qle(e),e))}retrieve(e,t={},n){return this._client.get(`/responses/${e}`,{query:t,...n,stream:(null==t?void 0:t.stream)??!1})}del(e,t){return this._client.delete(`/responses/${e}`,{...t,headers:{Accept:"*/*",...null==t?void 0:t.headers}})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>$le(t,e))}stream(e,t){return tue.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(`/responses/${e}/cancel`,{...t,headers:{Accept:"*/*",...null==t?void 0:t.headers}})}}class rue extends Voe{}nue.InputItems=Hle;class iue extends Woe{create(e,t,n){return this._client.post(`/uploads/${e}/parts`,coe({body:t,...n}))}}class oue extends Woe{constructor(){super(...arguments),this.parts=new iue(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(`/uploads/${e}/cancel`,t)}complete(e,t,n){return this._client.post(`/uploads/${e}/complete`,{body:t,...n})}}oue.Parts=iue;class aue extends Woe{create(e,t,n){return this._client.post(`/vector_stores/${e}/files`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}update(e,t,n,r){return this._client.post(`/vector_stores/${e}/files/${t}`,{body:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}list(e,t={},n){return Eoe(t)?this.list(e,{},t):this._client.getAPIList(`/vector_stores/${e}/files`,sue,{query:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}del(e,t,n){return this._client.delete(`/vector_stores/${e}/files/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t,n);return await this.poll(e,r.id,n)}async poll(e,t,n){const r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const i=await this.retrieve(e,t,{...n,headers:r}).withResponse(),o=i.data;switch(o.status){case"in_progress":let e=5e3;if(null==n?void 0:n.pollIntervalMs)e=n.pollIntervalMs;else{const t=i.response.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Doe(e);break;case"failed":case"completed":return o}}}async upload(e,t,n){const r=await this._client.files.create({file:t,purpose:"assistants"},n);return this.create(e,{file_id:r.id},n)}async uploadAndPoll(e,t,n){const r=await this.upload(e,t,n);return await this.poll(e,r.id,n)}content(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/files/${t}/content`,lue,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}}class sue extends Voe{}class lue extends Hoe{}aue.VectorStoreFilesPage=sue,aue.FileContentResponsesPage=lue;class uue extends Woe{create(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}retrieve(e,t,n){return this._client.get(`/vector_stores/${e}/file_batches/${t}`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}cancel(e,t,n){return this._client.post(`/vector_stores/${e}/file_batches/${t}/cancel`,{...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}async createAndPoll(e,t,n){const r=await this.create(e,t);return await this.poll(e,r.id,n)}listFiles(e,t,n={},r){return Eoe(n)?this.listFiles(e,t,{},n):this._client.getAPIList(`/vector_stores/${e}/file_batches/${t}/files`,sue,{query:n,...r,headers:{"OpenAI-Beta":"assistants=v2",...null==r?void 0:r.headers}})}async poll(e,t,n){const r={...null==n?void 0:n.headers,"X-Stainless-Poll-Helper":"true"};for((null==n?void 0:n.pollIntervalMs)&&(r["X-Stainless-Custom-Poll-Interval"]=n.pollIntervalMs.toString());;){const{data:i,response:o}=await this.retrieve(e,t,{...n,headers:r}).withResponse();switch(i.status){case"in_progress":let e=5e3;if(null==n?void 0:n.pollIntervalMs)e=n.pollIntervalMs;else{const t=o.headers.get("openai-poll-after-ms");if(t){const n=parseInt(t);isNaN(n)||(e=n)}}await Doe(e);break;case"failed":case"cancelled":case"completed":return i}}}async uploadAndPoll(e,{files:t,fileIds:n=[]},r){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const i=(null==r?void 0:r.maxConcurrency)??5,o=Math.min(i,t.length),a=this._client,s=t.values(),l=[...n];const u=Array(o).fill(s).map(async function(e){for(let t of e){const e=await a.files.create({file:t,purpose:"assistants"},r);l.push(e.id)}});return await(async e=>{const t=await Promise.allSettled(e),n=t.filter(e=>"rejected"===e.status);if(n.length){for(const e of n);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const r=[];for(const i of t)"fulfilled"===i.status&&r.push(i.value);return r})(u),await this.createAndPoll(e,{file_ids:l})}}class cue extends Woe{constructor(){super(...arguments),this.files=new aue(this._client),this.fileBatches=new uue(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}retrieve(e,t){return this._client.get(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}update(e,t,n){return this._client.post(`/vector_stores/${e}`,{body:t,...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}list(e={},t){return Eoe(e)?this.list({},e):this._client.getAPIList("/vector_stores",due,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}del(e,t){return this._client.delete(`/vector_stores/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v2",...null==t?void 0:t.headers}})}search(e,t,n){return this._client.getAPIList(`/vector_stores/${e}/search`,fue,{body:t,method:"post",...n,headers:{"OpenAI-Beta":"assistants=v2",...null==n?void 0:n.headers}})}}class due extends Voe{}class fue extends Hoe{}var pue;cue.VectorStoresPage=due,cue.VectorStoreSearchResponsesPage=fue,cue.Files=aue,cue.VectorStoreFilesPage=sue,cue.FileContentResponsesPage=lue,cue.FileBatches=uue;class hue extends voe{constructor({baseURL:e=Poe("OPENAI_BASE_URL"),apiKey:t=Poe("OPENAI_API_KEY"),organization:n=Poe("OPENAI_ORG_ID")??null,project:r=Poe("OPENAI_PROJECT_ID")??null,...i}={}){if(void 0===t)throw new Rie("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const o={apiKey:t,organization:n,project:r,...i,baseURL:e||"https://api.openai.com/v1"};if(!o.dangerouslyAllowBrowser&&"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator)throw new Rie("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:o.baseURL,timeout:o.timeout??6e5,httpAgent:o.httpAgent,maxRetries:o.maxRetries,fetch:o.fetch}),this.completions=new ale(this),this.chat=new Qoe(this),this.embeddings=new fle(this),this.files=new ble(this),this.images=new Ple(this),this.audio=new tae(this),this.moderations=new jle(this),this.models=new Fle(this),this.fineTuning=new Dle(this),this.graders=new Mle(this),this.vectorStores=new cue(this),this.beta=new ole(this),this.batches=new nae(this),this.uploads=new oue(this),this.responses=new nue(this),this.evals=new yle(this),this.containers=new cle(this),this._options=o,this.apiKey=t,this.organization=n,this.project=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}stringifyQuery(e){return bie(e,{arrayFormat:"brackets"})}}pue=hue,hue.OpenAI=pue,hue.DEFAULT_TIMEOUT=6e5,hue.OpenAIError=Rie,hue.APIError=Mie,hue.APIConnectionError=Fie,hue.APIConnectionTimeoutError=Lie,hue.APIUserAbortError=Pie,hue.NotFoundError=zie,hue.ConflictError=Uie,hue.RateLimitError=Hie,hue.BadRequestError=jie,hue.AuthenticationError=Bie,hue.InternalServerError=Vie,hue.PermissionDeniedError=$ie,hue.UnprocessableEntityError=qie,hue.toFile=aoe,hue.fileFromPath=Aie,hue.Completions=ale,hue.Chat=Qoe,hue.ChatCompletionsPage=Koe,hue.Embeddings=fle,hue.Files=ble,hue.FileObjectsPage=wle,hue.Images=Ple,hue.Audio=tae,hue.Moderations=jle,hue.Models=Fle,hue.ModelsPage=Lle,hue.FineTuning=Dle,hue.Graders=Mle,hue.VectorStores=cue,hue.VectorStoresPage=due,hue.VectorStoreSearchResponsesPage=fue,hue.Beta=ole,hue.Batches=nae,hue.BatchesPage=rae,hue.Uploads=oue,hue.Responses=nue,hue.Evals=yle,hue.EvalListResponsesPage=vle,hue.Containers=cle,hue.ContainerListResponsesPage=dle;const mue=Symbol("Let zodToJsonSchema decide on which parser to use"),gue={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},yue=e=>{const t=(e=>"string"==typeof e?{...gue,name:e}:{...gue,...e})(e),n=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,n])=>[n._def,{def:n._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function vue(e,t,n,r){(null==r?void 0:r.errorMessages)&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function bue(e,t,n,r,i){e[t]=n,vue(e,t,r,i)}const wue=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")};function _ue(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?wue(t,e.currentPath):t.join("/")}}function xue(e,t){return Kue(e.type._def,t)}function Eue(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((n,r)=>Eue(e,t,n))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return Sue(e,t)}}const Sue=(e,t)=>{const n={type:"integer",format:"unix-time"};if("openApi3"===t.target)return n;for(const r of e.checks)switch(r.kind){case"min":bue(n,"minimum",r.value,r.message,t);break;case"max":bue(n,"maximum",r.value,r.message,t)}return n};let kue;const Tue=/^[cC][^\s-]{8,}$/,Cue=/^[0-9a-z]+$/,Aue=/^[0-9A-HJKMNP-TV-Z]{26}$/,Iue=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,Oue=()=>(void 0===kue&&(kue=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),kue),Nue=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Due=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Rue=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Mue=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Pue=/^[a-zA-Z0-9_-]{21}$/,Fue=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function Lue(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":bue(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":bue(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":$ue(n,"email",r.message,t);break;case"format:idn-email":$ue(n,"idn-email",r.message,t);break;case"pattern:zod":zue(n,Iue,r.message,t)}break;case"url":$ue(n,"uri",r.message,t);break;case"uuid":$ue(n,"uuid",r.message,t);break;case"regex":zue(n,r.regex,r.message,t);break;case"cuid":zue(n,Tue,r.message,t);break;case"cuid2":zue(n,Cue,r.message,t);break;case"startsWith":zue(n,RegExp(`^${jue(r.value,t)}`),r.message,t);break;case"endsWith":zue(n,RegExp(`${jue(r.value,t)}$`),r.message,t);break;case"datetime":$ue(n,"date-time",r.message,t);break;case"date":$ue(n,"date",r.message,t);break;case"time":$ue(n,"time",r.message,t);break;case"duration":$ue(n,"duration",r.message,t);break;case"length":bue(n,"minLength","number"==typeof n.minLength?Math.max(n.minLength,r.value):r.value,r.message,t),bue(n,"maxLength","number"==typeof n.maxLength?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":zue(n,RegExp(jue(r.value,t)),r.message,t);break;case"ip":"v6"!==r.version&&$ue(n,"ipv4",r.message,t),"v4"!==r.version&&$ue(n,"ipv6",r.message,t);break;case"base64url":zue(n,Mue,r.message,t);break;case"jwt":zue(n,Fue,r.message,t);break;case"cidr":"v6"!==r.version&&zue(n,Nue,r.message,t),"v4"!==r.version&&zue(n,Due,r.message,t);break;case"emoji":zue(n,Oue(),r.message,t);break;case"ulid":zue(n,Aue,r.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":$ue(n,"binary",r.message,t);break;case"contentEncoding:base64":bue(n,"contentEncoding","base64",r.message,t);break;case"pattern:zod":zue(n,Rue,r.message,t)}break;case"nanoid":zue(n,Pue,r.message,t)}return n}function jue(e,t){return"escape"===t.patternStrategy?function(e){let t="";for(let n=0;n<e.length;n++)Bue.has(e[n])||(t+="\\"),t+=e[n];return t}(e):e}const Bue=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function $ue(e,t,n,r){var i;e.format||(null==(i=e.anyOf)?void 0:i.some(e=>e.format))?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):bue(e,"format",t,n,r)}function zue(e,t,n,r){var i;e.pattern||(null==(i=e.allOf)?void 0:i.some(e=>e.pattern))?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:Uue(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):bue(e,"pattern",Uue(t,r),n,r)}function Uue(e,t){var n;if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),i=e.flags.includes("m"),o=e.flags.includes("s"),a=r?e.source.toLowerCase():e.source;let s="",l=!1,u=!1,c=!1;for(let d=0;d<a.length;d++)if(l)s+=a[d],l=!1;else{if(r)if(u){if(a[d].match(/[a-z]/)){c?(s+=a[d],s+=`${a[d-2]}-${a[d]}`.toUpperCase(),c=!1):"-"===a[d+1]&&(null==(n=a[d+2])?void 0:n.match(/[a-z]/))?(s+=a[d],c=!0):s+=`${a[d]}${a[d].toUpperCase()}`;continue}}else if(a[d].match(/[a-z]/)){s+=`[${a[d]}${a[d].toUpperCase()}]`;continue}if(i){if("^"===a[d]){s+="(^|(?<=[\r\n]))";continue}if("$"===a[d]){s+="($|(?=[\r\n]))";continue}}o&&"."===a[d]?s+=u?`${a[d]}\r\n`:`[${a[d]}\r\n]`:(s+=a[d],"\\"===a[d]?l=!0:u&&"]"===a[d]?u=!1:u||"["!==a[d]||(u=!0))}try{new RegExp(s)}catch{return e.source}return s}function que(e,t){var n,r,i,o,a,s;if(t.target,"openApi3"===t.target&&(null==(n=e.keyType)?void 0:n._def.typeName)===KC.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((n,r)=>({...n,[r]:Kue(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",r]})??_ue(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const l={type:"object",additionalProperties:Kue(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return l;if((null==(r=e.keyType)?void 0:r._def.typeName)===KC.ZodString&&(null==(i=e.keyType._def.checks)?void 0:i.length)){const{type:n,...r}=Lue(e.keyType._def,t);return{...l,propertyNames:r}}if((null==(o=e.keyType)?void 0:o._def.typeName)===KC.ZodEnum)return{...l,propertyNames:{enum:e.keyType._def.values}};if((null==(a=e.keyType)?void 0:a._def.typeName)===KC.ZodBranded&&e.keyType._def.type._def.typeName===KC.ZodString&&(null==(s=e.keyType._def.type._def.checks)?void 0:s.length)){const{type:n,...r}=xue(e.keyType._def,t);return{...l,propertyNames:r}}return l}const Hue={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};const Vue=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,n)=>Kue(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${n}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return n.length?{anyOf:n}:void 0};function Wue(e,t){const n="openAi"===t.target,r={type:"object",properties:{}},i=[],o=e.shape();for(const s in o){let e=o[s];if(void 0===e||void 0===e._def)continue;let a=Gue(e);a&&n&&("ZodOptional"===e._def.typeName&&(e=e._def.innerType),e.isNullable()||(e=e.nullable()),a=!1);const l=Kue(e._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});void 0!==l&&(r.properties[s]=l,a||i.push(s))}i.length&&(r.required=i);const a=function(e,t){if("ZodNever"!==e.catchall._def.typeName)return Kue(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}(e,t);return void 0!==a&&(r.additionalProperties=a),r}function Gue(e){try{return e.isOptional()}catch{return!0}}const Yue=(e,t,n)=>{switch(t){case KC.ZodString:return Lue(e,n);case KC.ZodNumber:return function(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",vue(n,"type",r.message,t);break;case"min":"jsonSchema7"===t.target?r.inclusive?bue(n,"minimum",r.value,r.message,t):bue(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),bue(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?bue(n,"maximum",r.value,r.message,t):bue(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),bue(n,"maximum",r.value,r.message,t));break;case"multipleOf":bue(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case KC.ZodObject:return Wue(e,n);case KC.ZodBigInt:return function(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":"jsonSchema7"===t.target?r.inclusive?bue(n,"minimum",r.value,r.message,t):bue(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),bue(n,"minimum",r.value,r.message,t));break;case"max":"jsonSchema7"===t.target?r.inclusive?bue(n,"maximum",r.value,r.message,t):bue(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),bue(n,"maximum",r.value,r.message,t));break;case"multipleOf":bue(n,"multipleOf",r.value,r.message,t)}return n}(e,n);case KC.ZodBoolean:return{type:"boolean"};case KC.ZodDate:return Eue(e,n);case KC.ZodUndefined:return function(e){return{not:_ue(e)}}(n);case KC.ZodNull:return function(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}(n);case KC.ZodArray:return function(e,t){var n,r,i;const o={type:"array"};return(null==(n=e.type)?void 0:n._def)&&(null==(i=null==(r=e.type)?void 0:r._def)?void 0:i.typeName)!==KC.ZodAny&&(o.items=Kue(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&bue(o,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&bue(o,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(bue(o,"minItems",e.exactLength.value,e.exactLength.message,t),bue(o,"maxItems",e.exactLength.value,e.exactLength.message,t)),o}(e,n);case KC.ZodUnion:case KC.ZodDiscriminatedUnion:return function(e,t){if("openApi3"===t.target)return Vue(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(e=>e._def.typeName in Hue&&(!e._def.checks||!e._def.checks.length))){const e=n.reduce((e,t)=>{const n=Hue[t._def.typeName];return n&&!e.includes(n)?[...e,n]:e},[]);return{type:e.length>1?e:e[0]}}if(n.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=n.reduce((e,t)=>{const n=typeof t._def.value;switch(n){case"string":case"number":case"boolean":return[...e,n];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===n.length){const t=e.filter((e,t,n)=>n.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:n.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(n.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:n.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return Vue(e,t)}(e,n);case KC.ZodIntersection:return function(e,t){const n=[Kue(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),Kue(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let r="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const i=[];return n.forEach(e=>{if("type"in(t=e)&&"string"===t.type||!("allOf"in t)){let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:n,...r}=e;t=r}else r=void 0;i.push(t)}else i.push(...e.allOf),void 0===e.unevaluatedProperties&&(r=void 0);var t}),i.length?{allOf:i,...r}:void 0}(e,n);case KC.ZodTuple:return function(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,n)=>Kue(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:Kue(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,n)=>Kue(e._def,{...t,currentPath:[...t.currentPath,"items",`${n}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}(e,n);case KC.ZodRecord:return que(e,n);case KC.ZodLiteral:return function(e,t){const n=typeof e.value;return"bigint"!==n&&"number"!==n&&"boolean"!==n&&"string"!==n?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===n?"integer":n,enum:[e.value]}:{type:"bigint"===n?"integer":n,const:e.value}}(e,n);case KC.ZodEnum:return function(e){return{type:"string",enum:Array.from(e.values)}}(e);case KC.ZodNativeEnum:return function(e){const t=e.values,n=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),r=Array.from(new Set(n.map(e=>typeof e)));return{type:1===r.length?"string"===r[0]?"string":"number":["string","number"],enum:n}}(e);case KC.ZodNullable:return function(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:Hue[e.innerType._def.typeName],nullable:!0}:{type:[Hue[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const n=Kue(e.innerType._def,{...t,currentPath:[...t.currentPath]});return n&&"$ref"in n?{allOf:[n],nullable:!0}:n&&{...n,nullable:!0}}const n=Kue(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}(e,n);case KC.ZodOptional:return((e,t)=>{var n;if(t.currentPath.toString()===(null==(n=t.propertyPath)?void 0:n.toString()))return Kue(e.innerType._def,t);const r=Kue(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:_ue(t)},r]}:_ue(t)})(e,n);case KC.ZodMap:return function(e,t){return"record"===t.mapStrategy?que(e,t):{type:"array",maxItems:125,items:{type:"array",items:[Kue(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||_ue(t),Kue(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||_ue(t)],minItems:2,maxItems:2}}}(e,n);case KC.ZodSet:return function(e,t){const n={type:"array",uniqueItems:!0,items:Kue(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&bue(n,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&bue(n,"maxItems",e.maxSize.value,e.maxSize.message,t),n}(e,n);case KC.ZodLazy:return()=>e.getter()._def;case KC.ZodPromise:return function(e,t){return Kue(e.type._def,t)}(e,n);case KC.ZodNaN:case KC.ZodNever:return function(e){return"openAi"===e.target?void 0:{not:_ue({...e,currentPath:[...e.currentPath,"not"]})}}(n);case KC.ZodEffects:return function(e,t){return"input"===t.effectStrategy?Kue(e.schema._def,t):_ue(t)}(e,n);case KC.ZodAny:return _ue(n);case KC.ZodUnknown:return function(e){return _ue(e)}(n);case KC.ZodDefault:return function(e,t){return{...Kue(e.innerType._def,t),default:e.defaultValue()}}(e,n);case KC.ZodBranded:return xue(e,n);case KC.ZodReadonly:case KC.ZodCatch:return((e,t)=>Kue(e.innerType._def,t))(e,n);case KC.ZodPipeline:return((e,t)=>{if("input"===t.pipeStrategy)return Kue(e.in._def,t);if("output"===t.pipeStrategy)return Kue(e.out._def,t);const n=Kue(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[n,Kue(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]})].filter(e=>void 0!==e)}})(e,n);case KC.ZodFunction:case KC.ZodVoid:case KC.ZodSymbol:default:return}};function Kue(e,t,n=!1){var r;const i=t.seen.get(e);if(t.override){const o=null==(r=t.override)?void 0:r.call(t,e,t,i,n);if(o!==mue)return o}if(i&&!n){const e=Zue(i,t);if(void 0!==e)return e}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const a=Yue(e,e.typeName,t),s="function"==typeof a?Kue(a(),t):a;if(s&&Que(e,t,s),t.postProcess){const n=t.postProcess(s,e,t);return o.jsonSchema=s,n}return o.jsonSchema=s,s}const Zue=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:wue(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,n)=>t.currentPath[n]===e)||"seen"===t.$refStrategy?_ue(t):void 0}},Que=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n);var Xue={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Jue={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},ece={code:"4",name:"assistant_message",parse:e=>{if(!(null!=e&&"object"==typeof e&&"id"in e&&"role"in e&&"content"in e&&"string"==typeof e.id&&"string"==typeof e.role&&"assistant"===e.role&&Array.isArray(e.content)&&e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value)))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},tce={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},nce={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}};function rce(e){const t=["ROOT"];let n=-1,r=null;function i(e,i,o){switch(e){case'"':n=i,t.pop(),t.push(o),t.push("INSIDE_STRING");break;case"f":case"t":case"n":n=i,r=i,t.pop(),t.push(o),t.push("INSIDE_LITERAL");break;case"-":t.pop(),t.push(o),t.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=i,t.pop(),t.push(o),t.push("INSIDE_NUMBER");break;case"{":n=i,t.pop(),t.push(o),t.push("INSIDE_OBJECT_START");break;case"[":n=i,t.pop(),t.push(o),t.push("INSIDE_ARRAY_START")}}function o(e,r){switch(e){case",":t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":n=r,t.pop()}}function a(e,r){switch(e){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=r,t.pop()}}for(let l=0;l<e.length;l++){const s=e[l];switch(t[t.length-1]){case"ROOT":i(s,l,"FINISH");break;case"INSIDE_OBJECT_START":switch(s){case'"':t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"}":n=l,t.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":if('"'===s)t.pop(),t.push("INSIDE_OBJECT_KEY");break;case"INSIDE_OBJECT_KEY":if('"'===s)t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break;case"INSIDE_OBJECT_AFTER_KEY":if(":"===s)t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break;case"INSIDE_OBJECT_BEFORE_VALUE":i(s,l,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":o(s,l);break;case"INSIDE_STRING":switch(s){case'"':t.pop(),n=l;break;case"\\":t.push("INSIDE_STRING_ESCAPE");break;default:n=l}break;case"INSIDE_ARRAY_START":if("]"===s)n=l,t.pop();else n=l,i(s,l,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_ARRAY_AFTER_VALUE":switch(s){case",":t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":n=l,t.pop();break;default:n=l}break;case"INSIDE_ARRAY_AFTER_COMMA":i(s,l,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":t.pop(),n=l;break;case"INSIDE_NUMBER":switch(s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=l;break;case"e":case"E":case"-":case".":break;case",":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&a(s,l),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&o(s,l);break;case"}":t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]&&o(s,l);break;case"]":t.pop(),"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&a(s,l);break;default:t.pop()}break;case"INSIDE_LITERAL":{const i=e.substring(r,l+1);"false".startsWith(i)||"true".startsWith(i)||"null".startsWith(i)?n=l:(t.pop(),"INSIDE_OBJECT_AFTER_VALUE"===t[t.length-1]?o(s,l):"INSIDE_ARRAY_AFTER_VALUE"===t[t.length-1]&&a(s,l));break}}}let s=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--){switch(t[l]){case"INSIDE_STRING":s+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":s+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":s+="]";break;case"INSIDE_LITERAL":{const t=e.substring(r,e.length);"true".startsWith(t)?s+="true".slice(t.length):"false".startsWith(t)?s+="false".slice(t.length):"null".startsWith(t)&&(s+="null".slice(t.length))}}}return s}function ice(e){if(void 0===e)return{value:void 0,state:"undefined-input"};let t=Xne({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=Xne({text:rce(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}[Xue,Jue,ece,tce,nce].map(e=>e.code);var oce=[{code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},{code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},{code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},{code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},{code:"9",name:"tool_call",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName||!("args"in e)||"object"!=typeof e.args)throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},{code:"a",name:"tool_result",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},{code:"b",name:"tool_call_streaming_start",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("toolName"in e)||"string"!=typeof e.toolName)throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},{code:"c",name:"tool_call_delta",parse:e=>{if(null==e||"object"!=typeof e||!("toolCallId"in e)||"string"!=typeof e.toolCallId||!("argsTextDelta"in e)||"string"!=typeof e.argsTextDelta)throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},{code:"d",name:"finish_message",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},{code:"e",name:"finish_step",parse:e=>{if(null==e||"object"!=typeof e||!("finishReason"in e)||"string"!=typeof e.finishReason)throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&null!=e.usage&&"object"==typeof e.usage&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:"number"==typeof e.usage.promptTokens?e.usage.promptTokens:Number.NaN,completionTokens:"number"==typeof e.usage.completionTokens?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&"boolean"==typeof e.isContinued&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},{code:"f",name:"start_step",parse:e=>{if(null==e||"object"!=typeof e||!("messageId"in e)||"string"!=typeof e.messageId)throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},{code:"g",name:"reasoning",parse:e=>{if("string"!=typeof e)throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},{code:"h",name:"source",parse:e=>{if(null==e||"object"!=typeof e)throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},{code:"i",name:"redacted_reasoning",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data)throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},{code:"j",name:"reasoning_signature",parse:e=>{if(null==e||"object"!=typeof e||!("signature"in e)||"string"!=typeof e.signature)throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},{code:"k",name:"file",parse:e=>{if(null==e||"object"!=typeof e||!("data"in e)||"string"!=typeof e.data||!("mimeType"in e)||"string"!=typeof e.mimeType)throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}}],ace=Object.fromEntries(oce.map(e=>[e.code,e]));Object.fromEntries(oce.map(e=>[e.name,e.code]));var sce=oce.map(e=>e.code),lce=e=>{const t=e.indexOf(":");if(-1===t)throw new Error("Failed to parse stream string. No separator found.");const n=e.slice(0,t);if(!sce.includes(n))throw new Error(`Failed to parse stream string. Invalid code ${n}.`);const r=n,i=e.slice(t+1),o=JSON.parse(i);return ace[r].parse(o)};function uce(e,t){const n=oce.find(t=>t.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}\n`}var cce="\n".charCodeAt(0);function dce(e,t){const n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return e.length=0,n}async function fce({stream:e,update:t,onToolCall:n,onFinish:r,generateId:i=Vne,getCurrentDate:o=()=>new Date,lastMessage:a}){var s,l;const u="assistant"===(null==a?void 0:a.role);let c=u?1+(null!=(l=null==(s=a.toolInvocations)?void 0:s.reduce((e,t)=>{var n;return Math.max(e,null!=(n=t.step)?n:0)},0))?l:0):0;const d=u?structuredClone(a):{id:i(),createdAt:o(),role:"assistant",content:"",parts:[]};let f,p,h;function m(e,t){const n=d.parts.find(t=>"tool-invocation"===t.type&&t.toolInvocation.toolCallId===e);null!=n?n.toolInvocation=t:d.parts.push({type:"tool-invocation",toolInvocation:t})}const g=[];let y=u?null==a?void 0:a.annotations:void 0;const v={};let b={completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},w="unknown";function _(){const e=[...g];(null==y?void 0:y.length)&&(d.annotations=y);const n={...structuredClone(d),revisionId:i()};t({message:n,data:e,replaceLastMessage:u})}await async function({stream:e,onTextPart:t,onReasoningPart:n,onReasoningSignaturePart:r,onRedactedReasoningPart:i,onSourcePart:o,onFilePart:a,onDataPart:s,onErrorPart:l,onToolCallStreamingStartPart:u,onToolCallDeltaPart:c,onToolCallPart:d,onToolResultPart:f,onMessageAnnotationsPart:p,onFinishMessagePart:h,onFinishStepPart:m,onStartStepPart:g}){const y=e.getReader(),v=new TextDecoder,b=[];let w=0;for(;;){const{value:e}=await y.read();if(e&&(b.push(e),w+=e.length,e[e.length-1]!==cce))continue;if(0===b.length)break;const _=dce(b,w);w=0;const x=v.decode(_,{stream:!0}).split("\n").filter(e=>""!==e).map(lce);for(const{type:y,value:v}of x)switch(y){case"text":await(null==t?void 0:t(v));break;case"reasoning":await(null==n?void 0:n(v));break;case"reasoning_signature":await(null==r?void 0:r(v));break;case"redacted_reasoning":await(null==i?void 0:i(v));break;case"file":await(null==a?void 0:a(v));break;case"source":await(null==o?void 0:o(v));break;case"data":await(null==s?void 0:s(v));break;case"error":await(null==l?void 0:l(v));break;case"message_annotations":await(null==p?void 0:p(v));break;case"tool_call_streaming_start":await(null==u?void 0:u(v));break;case"tool_call_delta":await(null==c?void 0:c(v));break;case"tool_call":await(null==d?void 0:d(v));break;case"tool_result":await(null==f?void 0:f(v));break;case"finish_message":await(null==h?void 0:h(v));break;case"finish_step":await(null==m?void 0:m(v));break;case"start_step":await(null==g?void 0:g(v));break;default:throw new Error(`Unknown stream part type: ${y}`)}}}({stream:e,onTextPart(e){null==f?(f={type:"text",text:e},d.parts.push(f)):f.text+=e,d.content+=e,_()},onReasoningPart(e){var t;null==h?(h={type:"text",text:e},null!=p&&p.details.push(h)):h.text+=e,null==p?(p={type:"reasoning",reasoning:e,details:[h]},d.parts.push(p)):p.reasoning+=e,d.reasoning=(null!=(t=d.reasoning)?t:"")+e,_()},onReasoningSignaturePart(e){null!=h&&(h.signature=e.signature)},onRedactedReasoningPart(e){null==p&&(p={type:"reasoning",reasoning:"",details:[]},d.parts.push(p)),p.details.push({type:"redacted",data:e.data}),h=void 0,_()},onFilePart(e){d.parts.push({type:"file",mimeType:e.mimeType,data:e.data}),_()},onSourcePart(e){d.parts.push({type:"source",source:e}),_()},onToolCallStreamingStartPart(e){null==d.toolInvocations&&(d.toolInvocations=[]),v[e.toolCallId]={text:"",step:c,toolName:e.toolName,index:d.toolInvocations.length};const t={state:"partial-call",step:c,toolCallId:e.toolCallId,toolName:e.toolName,args:void 0};d.toolInvocations.push(t),m(e.toolCallId,t),_()},onToolCallDeltaPart(e){const t=v[e.toolCallId];t.text+=e.argsTextDelta;const{value:n}=ice(t.text),r={state:"partial-call",step:t.step,toolCallId:e.toolCallId,toolName:t.toolName,args:n};d.toolInvocations[t.index]=r,m(e.toolCallId,r),_()},async onToolCallPart(e){const t={state:"call",step:c,...e};if(null!=v[e.toolCallId]?d.toolInvocations[v[e.toolCallId].index]=t:(null==d.toolInvocations&&(d.toolInvocations=[]),d.toolInvocations.push(t)),m(e.toolCallId,t),_(),n){const t=await n({toolCall:e});if(null!=t){const n={state:"result",step:c,...e,result:t};d.toolInvocations[d.toolInvocations.length-1]=n,m(e.toolCallId,n),_()}}},onToolResultPart(e){const t=d.toolInvocations;if(null==t)throw new Error("tool_result must be preceded by a tool_call");const n=t.findIndex(t=>t.toolCallId===e.toolCallId);if(-1===n)throw new Error("tool_result must be preceded by a tool_call with the same toolCallId");const r={...t[n],state:"result",...e};t[n]=r,m(e.toolCallId,r),_()},onDataPart(e){g.push(...e),_()},onMessageAnnotationsPart(e){null==y?y=[...e]:y.push(...e),_()},onFinishStepPart(e){c+=1,f=e.isContinued?f:void 0,p=void 0,h=void 0},onStartStepPart(e){u||(d.id=e.messageId),d.parts.push({type:"step-start"}),_()},onFinishMessagePart(e){w=e.finishReason,null!=e.usage&&(b=function({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}(e.usage))},onErrorPart(e){throw new Error(e)}}),null==r||r({message:d,finishReason:w,usage:b})}async function pce({stream:e,update:t,onFinish:n,getCurrentDate:r=()=>new Date,generateId:i=Vne}){const o={type:"text",text:""},a={id:i(),createdAt:r(),role:"assistant",content:"",parts:[o]};await async function({stream:e,onTextPart:t}){const n=e.pipeThrough(new TextDecoderStream).getReader();for(;;){const{done:e,value:r}=await n.read();if(e)break;await t(r)}}({stream:e,onTextPart:e=>{a.content+=e,o.text+=e,t({message:{...a},data:[],replaceLastMessage:!1})}}),null==n||n(a,{usage:{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN},finishReason:"unknown"})}var hce=()=>fetch;function mce(e,t){const n=null!=void 0&&undefined;return function(e,{validate:t}={}){return{[gce]:!0,_type:void 0,[Yne]:!0,jsonSchema:e,validate:t}}(((e,t)=>{const n=yue(t);let r="object"==typeof t&&t.definitions?Object.entries(t.definitions).reduce((e,[t,r])=>({...e,[t]:Kue(r._def,{...n,currentPath:[...n.basePath,n.definitionPath,t]},!0)??_ue(n)}),{}):void 0;const i="string"==typeof t?t:"title"===(null==t?void 0:t.nameStrategy)||null==t?void 0:t.name,o=Kue(e._def,void 0===i?n:{...n,currentPath:[...n.basePath,n.definitionPath,i]},!1)??_ue(n),a="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==a&&(o.title=a),n.flags.hasReferencedOpenAiAnyType&&(r||(r={}),r[n.openAiAnyTypeName]||(r[n.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===n.$refStrategy?"1":[...n.basePath,n.definitionPath,n.openAiAnyTypeName].join("/")}}));const s=void 0===i?r?{...o,[n.definitionPath]:r}:o:{$ref:[..."relative"===n.$refStrategy?[]:n.basePath,n.definitionPath,i].join("/"),[n.definitionPath]:{...r,[i]:o}};return"jsonSchema7"===n.target?s.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==n.target&&"openAi"!==n.target||(s.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===n.target&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type)),s})(e,{$refStrategy:n?"root":"none",target:"jsonSchema7"}),{validate:t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}}})}var gce=Symbol.for("vercel.ai.schema");function yce(e){return"object"==typeof(t=e)&&null!==t&&gce in t&&!0===t[gce]&&"jsonSchema"in t&&"validate"in t?e:mce(e);var t}var vce,bce,wce,_ce,xce,Ece,Sce={exports:{}},kce={};function Tce(){return wce||(wce=1,e=kce,t=function(){if(bce)return vce;function e(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return bce=1,vce=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(void 0===n){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1)}var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},n),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(e){this.attempt(e)},e.prototype.start=function(e){this.attempt(e)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,n=0,r=0;r<this._errors.length;r++){var i=this._errors[r],o=i.message,a=(e[o]||0)+1;e[o]=a,a>=n&&(t=i,n=a)}return t},vce}(),e.operation=function(n){var r=e.timeouts(n);return new t(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var n in e)t[n]=e[n];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],i=0;i<t.retries;i++)r.push(this.createTimeout(i,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(i,t)),r.sort(function(e,t){return e-t}),r},e.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1,r=Math.round(n*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout)},e.wrap=function(t,n,r){if(n instanceof Array&&(r=n,n=null),!r)for(var i in r=[],t)"function"==typeof t[i]&&r.push(i);for(var o=0;o<r.length;o++){var a=r[o],s=t[a];t[a]=function(r){var i=e.operation(n),o=Array.prototype.slice.call(arguments,1),a=o.pop();o.push(function(e){i.retry(e)||(e&&(arguments[0]=i.mainError()),a.apply(this,arguments))}),i.attempt(function(){r.apply(t,o)})}.bind(t,s),t[a].options=n}}),kce;var e,t}var Cce=function(){if(Ece)return Sce.exports;Ece=1;const e=xce?_ce:(xce=1,_ce=Tce()),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const r=(r,i)=>new Promise((o,a)=>{i={onFailedAttempt:()=>{},retries:10,...i};const s=e.operation(i);s.attempt(async e=>{try{o(await r(e))}catch(u){if(!(u instanceof Error))return void a(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));if(u instanceof n)s.stop(),a(u.originalError);else if(u instanceof TypeError&&(l=u.message,!t.includes(l)))s.stop(),a(u);else{((e,t,n)=>{const r=n.retries-(t-1);e.attemptNumber=t,e.retriesLeft=r})(u,e,i);try{await i.onFailedAttempt(u)}catch(c){return void a(c)}s.retry(u)||a(s.mainError())}}var l})});return Sce.exports=r,Sce.exports.default=r,Sce.exports.AbortError=n,Sce.exports}();const Ace=f(Cce);var Ice,Oce={},Nce={exports:{}};var Dce,Rce,Mce,Pce={exports:{}};function Fce(){if(Mce)return Pce.exports;Mce=1;const e=Rce?Dce:(Rce=1,Dce=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e}))));class t extends Error{constructor(e){super(e),this.name="TimeoutError"}}const n=(n,r,i)=>new Promise((o,a)=>{if("number"!=typeof r||r<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(r===1/0)return void o(n);const s=setTimeout(()=>{if("function"==typeof i){try{o(i())}catch(s){a(s)}return}const e=i instanceof Error?i:new t("string"==typeof i?i:`Promise timed out after ${r} milliseconds`);"function"==typeof n.cancel&&n.cancel(),a(e)},r);e(n.then(o,a),()=>{clearTimeout(s)})});return Pce.exports=n,Pce.exports.default=n,Pce.exports.TimeoutError=t,Pce.exports}var Lce,jce,Bce,$ce={},zce={};function Uce(){if(jce)return $ce;jce=1,Object.defineProperty($ce,"__esModule",{value:!0});const e=(Lce||(Lce=1,Object.defineProperty(zce,"__esModule",{value:!0}),zce.default=function(e,t,n){let r=0,i=e.length;for(;i>0;){const o=i/2|0;let a=r+o;n(e[a],t)<=0?(r=++a,i-=o+1):i=o}return r}),zce);return $ce.default=class{constructor(){this._queue=[]}enqueue(t,n){const r={priority:(n=Object.assign({priority:0},n)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=n.priority)return void this._queue.push(r);const i=e.default(this._queue,r,(e,t)=>t.priority-e.priority);this._queue.splice(i,0,r)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}},$ce}var qce=function(){if(Bce)return Oce;Bce=1,Object.defineProperty(Oce,"__esModule",{value:!0});const e=(Ice||(Ice=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(Nce)),Nce.exports),t=Fce(),n=Uce(),r=()=>{},i=new t.TimeoutError;return Oce.default=class extends e{constructor(e){var t,i,o,a;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=r,this._resolveIdle=r,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:n.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(i=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==i?i:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(a=null===(o=e.interval)||void 0===o?void 0:o.toString())&&void 0!==a?a:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=r,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=r,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,n={}){return new Promise((r,o)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const a=void 0===this._timeout&&void 0===n.timeout?e():t.default(Promise.resolve(e()),void 0===n.timeout?this._timeout:n.timeout,()=>{(void 0===n.throwOnTimeout?this._throwOnTimeout:n.throwOnTimeout)&&o(i)});r(await a)}catch(a){o(a)}this._next()},n),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},Oce}();const Hce=f(qce);var Vce,Wce=Object.create,Gce=Object.defineProperty,Yce=Object.getOwnPropertyDescriptor,Kce=Object.getOwnPropertyNames,Zce=Object.getPrototypeOf,Qce=Object.prototype.hasOwnProperty,Xce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Jce=(e,t,n)=>(n=null!=e?Wce(Zce(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of Kce(t))!Qce.call(e,i)&&i!==n&&Gce(e,i,{get:()=>t[i],enumerable:!(r=Yce(t,i))||r.enumerable});return e})(Gce(n,"default",{value:e,enumerable:!0}),e)),ede=Xce((e,t)=>{var n=typeof Buffer<"u",r=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,i=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function o(e,t,o){null==o&&null!==t&&"object"==typeof t&&(o=t,t=void 0),n&&Buffer.isBuffer(e)&&(e=e.toString()),e&&65279===e.charCodeAt(0)&&(e=e.slice(1));let s=JSON.parse(e,t);if(null===s||"object"!=typeof s)return s;let l=o&&o.protoAction||"error",u=o&&o.constructorAction||"error";if("ignore"===l&&"ignore"===u)return s;if("ignore"!==l&&"ignore"!==u){if(!1===r.test(e)&&!1===i.test(e))return s}else if("ignore"!==l&&"ignore"===u){if(!1===r.test(e))return s}else if(!1===i.test(e))return s;return a(s,{protoAction:l,constructorAction:u,safe:o&&o.safe})}function a(e,{protoAction:t="error",constructorAction:n="error",safe:r}={}){let i=[e];for(;i.length;){let e=i;i=[];for(let o of e){if("ignore"!==t&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(!0===r)return null;if("error"===t)throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if("ignore"!==n&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(!0===r)return null;if("error"===n)throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let e in o){let t=o[e];t&&"object"==typeof t&&i.push(t)}}}return e}function s(e,t,n){let r=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,n)}finally{Error.stackTraceLimit=r}}t.exports=s,t.exports.default=s,t.exports.parse=s,t.exports.safeParse=function(e,t){let n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return o(e,t,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=n}},t.exports.scan=a}),tde=Xce(e=>{e.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},e.toByteArray=function(e){var t,n,o=a(e),s=o[0],l=o[1],u=new i(function(e,t,n){return 3*(t+n)/4-n}(0,s,l)),c=0,d=l>0?s-4:s;for(n=0;n<d;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===l&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===l&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},e.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(l(e,s,s+a>u?u:s+a));return 1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),o.join("")};var t,n=[],r=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0,64;t<64;++t)n[t]=o[t],r[o.charCodeAt(t)]=t;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(s(r));return i.join("")}r[45]=62,r[95]=63}),nde="vercel.ai.error",rde=Symbol.for(nde),ide=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[Vce]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,nde)}static hasMarker(e,t){let n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};Vce=rde;var ode,ade=ide,sde="AI_APICallError",lde=`vercel.ai.error.${sde}`,ude=Symbol.for(lde),cde=class extends ade{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:o,cause:a,isRetryable:s=null!=r&&(408===r||409===r||429===r||r>=500),data:l}){super({name:sde,message:e,cause:a}),this[ode]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=o,this.isRetryable=s,this.data=l}static isInstance(e){return ade.hasMarker(e,lde)}};function dde(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}ode=ude;var fde,pde="AI_InvalidArgumentError",hde=`vercel.ai.error.${pde}`,mde=Symbol.for(hde),gde=class extends ade{constructor({message:e,cause:t,argument:n}){super({name:pde,message:e,cause:t}),this[fde]=!0,this.argument=n}static isInstance(e){return ade.hasMarker(e,hde)}};fde=mde;var yde,vde="AI_InvalidPromptError",bde=`vercel.ai.error.${vde}`,wde=Symbol.for(bde),_de=class extends ade{constructor({prompt:e,message:t,cause:n}){super({name:vde,message:`Invalid prompt: ${t}`,cause:n}),this[yde]=!0,this.prompt=e}static isInstance(e){return ade.hasMarker(e,bde)}};yde=wde;var xde,Ede="AI_JSONParseError",Sde=`vercel.ai.error.${Ede}`,kde=Symbol.for(Sde),Tde=class extends ade{constructor({text:e,cause:t}){super({name:Ede,message:`JSON parsing failed: Text: ${e}.\nError message: ${dde(t)}`,cause:t}),this[xde]=!0,this.text=e}static isInstance(e){return ade.hasMarker(e,Sde)}};xde=kde;var Cde,Ade="AI_TypeValidationError",Ide=`vercel.ai.error.${Ade}`,Ode=Symbol.for(Ide);Cde=Ode;var Nde=class e extends ade{constructor({value:e,cause:t}){super({name:Ade,message:`Type validation failed: Value: ${JSON.stringify(e)}.\nError message: ${dde(t)}`,cause:t}),this[Cde]=!0,this.value=e}static isInstance(e){return ade.hasMarker(e,Ide)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}},Dde=Jce(ede());var Rde=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{let i=((e,t=21)=>(n=t)=>{let r="",i=0|n;for(;i--;)r+=e[Math.random()*e.length|0];return r})(n,t);if(null==e)return i;if(n.includes(r))throw new gde({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return t=>`${e}${r}${i(t)}`},Mde=Rde();var Pde=Symbol.for("vercel.ai.validator");function Fde(e){return function(e){return"object"==typeof e&&null!==e&&Pde in e&&!0===e[Pde]&&"validate"in e}(e)?e:function(e){return function(e){return{[Pde]:!0,validate:e}}(t=>{let n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}(e)}function Lde({value:e,schema:t}){let n=Fde(t);try{if(null==n.validate)return{success:!0,value:e};let t=n.validate(e);return t.success?t:{success:!1,error:Nde.wrap({value:e,cause:t.error})}}catch(B0){return{success:!1,error:Nde.wrap({value:e,cause:B0})}}}function jde({text:e,schema:t}){try{let n=Dde.default.parse(e);if(null==t)return{success:!0,value:n,rawValue:n};let r=Lde({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Tde.isInstance(n)?n:new Tde({text:e,cause:n})}}}var{btoa:Bde,atob:$de}=globalThis;function zde(e){let t=e.replace(/-/g,"+").replace(/_/g,"/"),n=$de(t);return Uint8Array.from(n,e=>e.codePointAt(0))}function Ude(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return Bde(t)}var qde="object"==typeof globalThis?globalThis:global,Hde="1.9.0",Vde=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;var Wde=function(e){var t=new Set([e]),n=new Set,r=e.match(Vde);if(!r)return function(){return!1};var i=+r[1],o=+r[2],a=+r[3];if(null!=r[4])return function(t){return t===e};function s(e){return n.add(e),!1}function l(e){return t.add(e),!0}return function(e){if(t.has(e))return!0;if(n.has(e))return!1;var r=e.match(Vde);if(!r)return s(e);var u=+r[1],c=+r[2],d=+r[3];return null!=r[4]||i!==u?s(e):0===i?o===c&&a<=d?l(e):s(e):o<=c?l(e):s(e)}}(Hde),Gde=Hde.split(".")[0],Yde=Symbol.for("opentelemetry.js.api."+Gde),Kde=qde;function Zde(e,t,n,r){var i;void 0===r&&(r=!1);var o=Kde[Yde]=null!==(i=Kde[Yde])&&void 0!==i?i:{version:Hde};if(!r&&o[e]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(a.stack||a.message),!1}if(o.version!==Hde){a=new Error("@opentelemetry/api: Registration of version v"+o.version+" for "+e+" does not match previously registered API v"+Hde);return n.error(a.stack||a.message),!1}return o[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+Hde+"."),!0}function Qde(e){var t,n,r=null===(t=Kde[Yde])||void 0===t?void 0:t.version;if(r&&Wde(r))return null===(n=Kde[Yde])||void 0===n?void 0:n[e]}function Xde(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+Hde+".");var n=Kde[Yde];n&&delete n[e]}var Jde,efe=function(){function e(e){this._namespace=e.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tfe("debug",this._namespace,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tfe("error",this._namespace,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tfe("info",this._namespace,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tfe("warn",this._namespace,e)},e.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return tfe("verbose",this._namespace,e)},e}();function tfe(e,t,n){var r=Qde("diag");if(r)return n.unshift(t),r[e].apply(r,function(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(Ukt){i={error:Ukt}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(n),!1))}!function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(Jde||(Jde={}));var nfe=function(){function e(){function e(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=Qde("diag");if(r)return r[e].apply(r,function(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,a=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)s.push(i.value)}catch(r){o={error:r}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return s}(t),!1))}}var t=this;t.setLogger=function(e,n){var r,i,o;if(void 0===n&&(n={logLevel:Jde.INFO}),e===t){var a=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(r=a.stack)&&void 0!==r?r:a.message),!1}"number"==typeof n&&(n={logLevel:n});var s=Qde("diag"),l=function(e,t){function n(n,r){var i=t[n];return"function"==typeof i&&e>=r?i.bind(t):function(){}}return e<Jde.NONE?e=Jde.NONE:e>Jde.ALL&&(e=Jde.ALL),t=t||{},{error:n("error",Jde.ERROR),warn:n("warn",Jde.WARN),info:n("info",Jde.INFO),debug:n("debug",Jde.DEBUG),verbose:n("verbose",Jde.VERBOSE)}}(null!==(i=n.logLevel)&&void 0!==i?i:Jde.INFO,e);if(s&&!n.suppressOverrideMessage){var u=null!==(o=(new Error).stack)&&void 0!==o?o:"<failed to generate stacktrace>";s.warn("Current logger will be overwritten from "+u),l.warn("Current logger will overwrite one already registered from "+u)}return Zde("diag",l,t,!0)},t.disable=function(){Xde("diag",t)},t.createComponentLogger=function(e){return new efe(e)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();var rfe,ife=function(){return function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(e){return n._currentContext.get(e)},n.setValue=function(t,r){var i=new e(n._currentContext);return i._currentContext.set(t,r),i},n.deleteValue=function(t){var r=new e(n._currentContext);return r._currentContext.delete(t),r}}}(),ofe=new ife,afe=function(){function e(){}return e.prototype.active=function(){return ofe},e.prototype.with=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t.call.apply(t,function(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(Ukt){i={error:Ukt}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(r),!1))},e.prototype.bind=function(e,t){return t},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),sfe="context",lfe=new afe,ufe=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(e){return Zde(sfe,e,nfe.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(r=this._getContextManager()).with.apply(r,function(e,t,n){if(2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)(r||!(i in t))&&(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}([e,t,n],function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(Ukt){i={error:Ukt}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(i),!1))},e.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},e.prototype._getContextManager=function(){return Qde(sfe)||lfe},e.prototype.disable=function(){this._getContextManager().disable(),Xde(sfe,nfe.instance())},e}();!function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(rfe||(rfe={}));var cfe="0000000000000000",dfe="00000000000000000000000000000000",ffe={traceId:dfe,spanId:cfe,traceFlags:rfe.NONE},pfe=function(){function e(e){void 0===e&&(e=ffe),this._spanContext=e}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(e,t){return this},e.prototype.setAttributes=function(e){return this},e.prototype.addEvent=function(e,t){return this},e.prototype.addLink=function(e){return this},e.prototype.addLinks=function(e){return this},e.prototype.setStatus=function(e){return this},e.prototype.updateName=function(e){return this},e.prototype.end=function(e){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(e,t){},e}(),hfe=function(e){return Symbol.for(e)}("OpenTelemetry Context Key SPAN");function mfe(e){return e.getValue(hfe)||void 0}function gfe(){return mfe(ufe.getInstance().active())}function yfe(e,t){return e.setValue(hfe,t)}function vfe(e){return e.deleteValue(hfe)}function bfe(e,t){return yfe(e,new pfe(t))}function wfe(e){var t;return null===(t=mfe(e))||void 0===t?void 0:t.spanContext()}var _fe=/^([0-9a-f]{32})$/i,xfe=/^[0-9a-f]{16}$/i;function Efe(e){return function(e){return _fe.test(e)&&e!==dfe}(e.traceId)&&function(e){return xfe.test(e)&&e!==cfe}(e.spanId)}function Sfe(e){return new pfe(e)}var kfe=ufe.getInstance(),Tfe=function(){function e(){}return e.prototype.startSpan=function(e,t,n){if(void 0===n&&(n=kfe.active()),!!(null==t?void 0:t.root))return new pfe;var r=n&&wfe(n);return function(e){return"object"==typeof e&&"string"==typeof e.spanId&&"string"==typeof e.traceId&&"number"==typeof e.traceFlags}(r)&&Efe(r)?new pfe(r):new pfe},e.prototype.startActiveSpan=function(e,t,n,r){var i,o,a;if(!(arguments.length<2)){2===arguments.length?a=t:3===arguments.length?(i=t,a=n):(i=t,o=n,a=r);var s=o??kfe.active(),l=this.startSpan(e,i,s),u=yfe(s,l);return kfe.with(u,a,void 0,l)}},e}();var Cfe,Afe=new Tfe,Ife=function(){function e(e,t,n,r){this._provider=e,this.name=t,this.version=n,this.options=r}return e.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},e.prototype.startActiveSpan=function(e,t,n,r){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):Afe},e}(),Ofe=function(){function e(){}return e.prototype.getTracer=function(e,t,n){return new Tfe},e}(),Nfe=new Ofe,Dfe=function(){function e(){}return e.prototype.getTracer=function(e,t,n){var r;return null!==(r=this.getDelegateTracer(e,t,n))&&void 0!==r?r:new Ife(this,e,t,n)},e.prototype.getDelegate=function(){var e;return null!==(e=this._delegate)&&void 0!==e?e:Nfe},e.prototype.setDelegate=function(e){this._delegate=e},e.prototype.getDelegateTracer=function(e,t,n){var r;return null===(r=this._delegate)||void 0===r?void 0:r.getTracer(e,t,n)},e}();!function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(Cfe||(Cfe={}));var Rfe,Mfe,Pfe="trace",Ffe=function(){function e(){this._proxyTracerProvider=new Dfe,this.wrapSpanContext=Sfe,this.isSpanContextValid=Efe,this.deleteSpan=vfe,this.getSpan=mfe,this.getActiveSpan=gfe,this.getSpanContext=wfe,this.setSpan=yfe,this.setSpanContext=bfe}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(e){var t=Zde(Pfe,this._proxyTracerProvider,nfe.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},e.prototype.getTracerProvider=function(){return Qde(Pfe)||this._proxyTracerProvider},e.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},e.prototype.disable=function(){Xde(Pfe,nfe.instance()),this._proxyTracerProvider=new Dfe},e}(),Lfe=Ffe.getInstance();!function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{let t={};for(let n of e)t[n]=n;return t},e.getValidEnumValues=t=>{let n=e.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]),r={};for(let e of n)r[e]=t[e];return e.objectValues(r)},e.objectValues=t=>e.objectKeys(t).map(function(e){return t[e]}),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{let t=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},e.find=(e,t)=>{for(let n of e)if(t(n))return n},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t}(Rfe||(Rfe={})),(Mfe||(Mfe={})).mergeShapes=(e,t)=>({...e,...t});var jfe=Rfe.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Bfe=e=>{switch(typeof e){case"undefined":return jfe.undefined;case"string":return jfe.string;case"number":return isNaN(e)?jfe.nan:jfe.number;case"boolean":return jfe.boolean;case"function":return jfe.function;case"bigint":return jfe.bigint;case"symbol":return jfe.symbol;case"object":return Array.isArray(e)?jfe.array:null===e?jfe.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?jfe.promise:typeof Map<"u"&&e instanceof Map?jfe.map:typeof Set<"u"&&e instanceof Set?jfe.set:typeof Date<"u"&&e instanceof Date?jfe.date:jfe.object;default:return jfe.unknown}},$fe=Rfe.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),zfe=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(e){return e.message},n={_errors:[]},r=e=>{for(let i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(r);else if("invalid_return_type"===i.code)r(i.returnTypeError);else if("invalid_arguments"===i.code)r(i.argumentsError);else if(0===i.path.length)n._errors.push(t(i));else{let e=n,r=0;for(;r<i.path.length;){let n=i.path[r];r===i.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(t(i))):e[n]=e[n]||{_errors:[]},e=e[n],r++}}};return r(this),n}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Rfe.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){let t={},n=[];for(let r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};zfe.create=e=>new zfe(e);var Ufe=(e,t)=>{let n;switch(e.code){case $fe.invalid_type:n=e.received===jfe.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case $fe.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Rfe.jsonStringifyReplacer)}`;break;case $fe.unrecognized_keys:n=`Unrecognized key(s) in object: ${Rfe.joinValues(e.keys,", ")}`;break;case $fe.invalid_union:n="Invalid input";break;case $fe.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Rfe.joinValues(e.options)}`;break;case $fe.invalid_enum_value:n=`Invalid enum value. Expected ${Rfe.joinValues(e.options)}, received '${e.received}'`;break;case $fe.invalid_arguments:n="Invalid function arguments";break;case $fe.invalid_return_type:n="Invalid function return type";break;case $fe.invalid_date:n="Invalid date";break;case $fe.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Rfe.assertNever(e.validation):n="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case $fe.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case $fe.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case $fe.custom:n="Invalid input";break;case $fe.invalid_intersection_types:n="Intersection results could not be merged";break;case $fe.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case $fe.not_finite:n="Number must be finite";break;default:n=t.defaultError,Rfe.assertNever(e)}return{message:n}},qfe=Ufe;function Hfe(){return qfe}var Vfe=e=>{let{data:t,path:n,errorMaps:r,issueData:i}=e,o=[...n,...i.path||[]],a={...i,path:o};if(void 0!==i.message)return{...i,path:o,message:i.message};let s="",l=r.filter(e=>!!e).slice().reverse();for(let u of l)s=u(a,{data:t,defaultError:s}).message;return{...i,path:o,message:s}};function Wfe(e,t){let n=Hfe(),r=Vfe({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Ufe?void 0:Ufe].filter(e=>!!e)});e.common.issues.push(r)}var Gfe,Yfe=class e{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){let n=[];for(let r of t){if("aborted"===r.status)return Kfe;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(t,n){let r=[];for(let e of n){let t=await e.key,n=await e.value;r.push({key:t,value:n})}return e.mergeObjectSync(t,r)}static mergeObjectSync(e,t){let n={};for(let r of t){let{key:t,value:i}=r;if("aborted"===t.status||"aborted"===i.status)return Kfe;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"!==t.value&&(typeof i.value<"u"||r.alwaysSet)&&(n[t.value]=i.value)}return{status:e.value,value:n}}},Kfe=Object.freeze({status:"aborted"}),Zfe=e=>({status:"dirty",value:e}),Qfe=e=>({status:"valid",value:e}),Xfe=e=>"aborted"===e.status,Jfe=e=>"dirty"===e.status,epe=e=>"valid"===e.status,tpe=e=>typeof Promise<"u"&&e instanceof Promise;function npe(e,t,n,r){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function rpe(e,t,n,r,i){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}!function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message}(Gfe||(Gfe={}));var ipe,ope,ape=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},spe=(e,t)=>{if(epe(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new zfe(e.common.issues);return this._error=t,this._error}}};function lpe(e){if(!e)return{};let{errorMap:t,invalid_type_error:n,required_error:r,description:i}=e;if(t&&(n||r))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(t,i)=>{var o,a;let{message:s}=e;return"invalid_enum_value"===t.code?{message:s??i.defaultError}:typeof i.data>"u"?{message:null!==(o=s??r)&&void 0!==o?o:i.defaultError}:"invalid_type"!==t.code?{message:i.defaultError}:{message:null!==(a=s??n)&&void 0!==a?a:i.defaultError}},description:i}}var upe,cpe=class{get description(){return this._def.description}_getType(e){return Bfe(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Bfe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Yfe,ctx:{common:e.parent.common,data:e.data,parsedType:Bfe(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(tpe(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;let r={common:{issues:[],async:null!==(n=null==t?void 0:t.async)&&void 0!==n&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bfe(e)},i=this._parseSync({data:e,path:r.path,parent:r});return spe(r,i)}"~validate"(e){var t,n;let r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bfe(e)};if(!this["~standard"].async)try{let t=this._parseSync({data:e,path:[],parent:r});return epe(t)?{value:t.value}:{issues:r.common.issues}}catch(j0){!(null===(n=null===(t=null==j0?void 0:j0.message)||void 0===t?void 0:t.toLowerCase())||void 0===n)&&n.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(e=>epe(e)?{value:e.value}:{issues:r.common.issues})}async parseAsync(e,t){let n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){let n={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Bfe(e)},r=this._parse({data:e,path:n.path,parent:n}),i=await(tpe(r)?r:Promise.resolve(r));return spe(n,i)}refine(e,t){let n=e=>"string"==typeof t||typeof t>"u"?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,r)=>{let i=e(t),o=()=>r.addIssue({code:$fe.custom,...n(t)});return typeof Promise<"u"&&i instanceof Promise?i.then(e=>!!e||(o(),!1)):!!i||(o(),!1)})}refinement(e,t){return this._refinement((n,r)=>!!e(n)||(r.addIssue("function"==typeof t?t(n,r):t),!1))}_refinement(e){return new dhe({schema:this,typeName:Ehe.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return fhe.create(this,this._def)}nullable(){return phe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Wpe.create(this)}promise(){return che.create(this,this._def)}or(e){return Kpe.create([this,e],this._def)}and(e){return Jpe.create(this,e,this._def)}transform(e){return new dhe({...lpe(this._def),schema:this,typeName:Ehe.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t="function"==typeof e?e:()=>e;return new hhe({...lpe(this._def),innerType:this,defaultValue:t,typeName:Ehe.ZodDefault})}brand(){return new vhe({typeName:Ehe.ZodBranded,type:this,...lpe(this._def)})}catch(e){let t="function"==typeof e?e:()=>e;return new mhe({...lpe(this._def),innerType:this,catchValue:t,typeName:Ehe.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return bhe.create(this,e)}readonly(){return whe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},dpe=/^c[^\s-]{8,}$/i,fpe=/^[0-9a-z]+$/,ppe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,hpe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,mpe=/^[a-z0-9_-]{21}$/i,gpe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ype=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,vpe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,bpe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,wpe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,_pe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,xpe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Epe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Spe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,kpe="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Tpe=new RegExp(`^${kpe}$`);function Cpe(e){let t="[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function Ape(e){return new RegExp(`^${Cpe(e)}$`)}function Ipe(e){let t=`${kpe}T${Cpe(e)}`,n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function Ope(e,t){return!(("v4"!==t&&t||!bpe.test(e))&&("v6"!==t&&t||!_pe.test(e)))}function Npe(e,t){if(!gpe.test(e))return!1;try{let[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!("object"!=typeof i||null===i||!i.typ||!i.alg||t&&i.alg!==t)}catch{return!1}}function Dpe(e,t){return!(("v4"!==t&&t||!wpe.test(e))&&("v6"!==t&&t||!xpe.test(e)))}var Rpe=class e extends cpe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==jfe.string){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.string,received:t.parsedType}),Kfe}let t,n=new Yfe;for(let r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if("max"===r.kind)e.data.length>r.value&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),n.dirty());else if("length"===r.kind){let i=e.data.length>r.value,o=e.data.length<r.value;(i||o)&&(t=this._getOrReturnCtx(e,t),i?Wfe(t,{code:$fe.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):o&&Wfe(t,{code:$fe.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),n.dirty())}else if("email"===r.kind)vpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"email",code:$fe.invalid_string,message:r.message}),n.dirty());else if("emoji"===r.kind)upe||(upe=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),upe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"emoji",code:$fe.invalid_string,message:r.message}),n.dirty());else if("uuid"===r.kind)hpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"uuid",code:$fe.invalid_string,message:r.message}),n.dirty());else if("nanoid"===r.kind)mpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"nanoid",code:$fe.invalid_string,message:r.message}),n.dirty());else if("cuid"===r.kind)dpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"cuid",code:$fe.invalid_string,message:r.message}),n.dirty());else if("cuid2"===r.kind)fpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"cuid2",code:$fe.invalid_string,message:r.message}),n.dirty());else if("ulid"===r.kind)ppe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"ulid",code:$fe.invalid_string,message:r.message}),n.dirty());else if("url"===r.kind)try{new URL(e.data)}catch{t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"url",code:$fe.invalid_string,message:r.message}),n.dirty()}else"regex"===r.kind?(r.regex.lastIndex=0,r.regex.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"regex",code:$fe.invalid_string,message:r.message}),n.dirty())):"trim"===r.kind?e.data=e.data.trim():"includes"===r.kind?e.data.includes(r.value,r.position)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),n.dirty()):"toLowerCase"===r.kind?e.data=e.data.toLowerCase():"toUpperCase"===r.kind?e.data=e.data.toUpperCase():"startsWith"===r.kind?e.data.startsWith(r.value)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:{startsWith:r.value},message:r.message}),n.dirty()):"endsWith"===r.kind?e.data.endsWith(r.value)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:{endsWith:r.value},message:r.message}),n.dirty()):"datetime"===r.kind?Ipe(r).test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:"datetime",message:r.message}),n.dirty()):"date"===r.kind?Tpe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:"date",message:r.message}),n.dirty()):"time"===r.kind?Ape(r).test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_string,validation:"time",message:r.message}),n.dirty()):"duration"===r.kind?ype.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"duration",code:$fe.invalid_string,message:r.message}),n.dirty()):"ip"===r.kind?Ope(e.data,r.version)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"ip",code:$fe.invalid_string,message:r.message}),n.dirty()):"jwt"===r.kind?Npe(e.data,r.alg)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"jwt",code:$fe.invalid_string,message:r.message}),n.dirty()):"cidr"===r.kind?Dpe(e.data,r.version)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"cidr",code:$fe.invalid_string,message:r.message}),n.dirty()):"base64"===r.kind?Epe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"base64",code:$fe.invalid_string,message:r.message}),n.dirty()):"base64url"===r.kind?Spe.test(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{validation:"base64url",code:$fe.invalid_string,message:r.message}),n.dirty()):Rfe.assertNever(r);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(t=>e.test(t),{validation:t,code:$fe.invalid_string,...Gfe.errToObj(n)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...Gfe.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Gfe.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Gfe.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Gfe.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Gfe.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Gfe.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Gfe.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Gfe.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Gfe.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Gfe.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Gfe.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Gfe.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Gfe.errToObj(e)})}datetime(e){var t,n;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(null==e?void 0:e.precision)>"u"?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(n=null==e?void 0:e.local)&&void 0!==n&&n,...Gfe.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(null==e?void 0:e.precision)>"u"?null:null==e?void 0:e.precision,...Gfe.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Gfe.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...Gfe.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...Gfe.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...Gfe.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...Gfe.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...Gfe.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...Gfe.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...Gfe.errToObj(t)})}nonempty(e){return this.min(1,Gfe.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function Mpe(e,t){let n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,i=n>r?n:r;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}Rpe.create=e=>{var t;return new Rpe({checks:[],typeName:Ehe.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...lpe(e)})};var Ppe=class e extends cpe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==jfe.number){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.number,received:t.parsedType}),Kfe}let t,n=new Yfe;for(let r of this._def.checks)"int"===r.kind?Rfe.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.invalid_type,expected:"integer",received:"float",message:r.message}),n.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),n.dirty()):"multipleOf"===r.kind?0!==Mpe(e.data,r.value)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.not_finite,message:r.message}),n.dirty()):Rfe.assertNever(r);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,Gfe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Gfe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Gfe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Gfe.toString(t))}setLimit(t,n,r,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Gfe.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:Gfe.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Gfe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Gfe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Gfe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Gfe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Gfe.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:Gfe.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Gfe.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Gfe.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&Rfe.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Ppe.create=e=>new Ppe({checks:[],typeName:Ehe.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...lpe(e)});var Fpe=class e extends cpe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==jfe.bigint)return this._getInvalidInput(e);let t,n=new Yfe;for(let r of this._def.checks)"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?e.data%r.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):Rfe.assertNever(r);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.bigint,received:t.parsedType}),Kfe}gte(e,t){return this.setLimit("min",e,!0,Gfe.toString(t))}gt(e,t){return this.setLimit("min",e,!1,Gfe.toString(t))}lte(e,t){return this.setLimit("max",e,!0,Gfe.toString(t))}lt(e,t){return this.setLimit("max",e,!1,Gfe.toString(t))}setLimit(t,n,r,i){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Gfe.toString(i)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Gfe.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Gfe.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Gfe.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Gfe.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:Gfe.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};Fpe.create=e=>{var t;return new Fpe({checks:[],typeName:Ehe.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...lpe(e)})};var Lpe=class extends cpe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==jfe.boolean){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.boolean,received:t.parsedType}),Kfe}return Qfe(e.data)}};Lpe.create=e=>new Lpe({typeName:Ehe.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...lpe(e)});var jpe=class e extends cpe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==jfe.date){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.date,received:t.parsedType}),Kfe}if(isNaN(e.data.getTime())){return Wfe(this._getOrReturnCtx(e),{code:$fe.invalid_date}),Kfe}let t,n=new Yfe;for(let r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(t=this._getOrReturnCtx(e,t),Wfe(t,{code:$fe.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):Rfe.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:Gfe.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:Gfe.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};jpe.create=e=>new jpe({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:Ehe.ZodDate,...lpe(e)});var Bpe=class extends cpe{_parse(e){if(this._getType(e)!==jfe.symbol){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.symbol,received:t.parsedType}),Kfe}return Qfe(e.data)}};Bpe.create=e=>new Bpe({typeName:Ehe.ZodSymbol,...lpe(e)});var $pe=class extends cpe{_parse(e){if(this._getType(e)!==jfe.undefined){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.undefined,received:t.parsedType}),Kfe}return Qfe(e.data)}};$pe.create=e=>new $pe({typeName:Ehe.ZodUndefined,...lpe(e)});var zpe=class extends cpe{_parse(e){if(this._getType(e)!==jfe.null){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.null,received:t.parsedType}),Kfe}return Qfe(e.data)}};zpe.create=e=>new zpe({typeName:Ehe.ZodNull,...lpe(e)});var Upe=class extends cpe{constructor(){super(...arguments),this._any=!0}_parse(e){return Qfe(e.data)}};Upe.create=e=>new Upe({typeName:Ehe.ZodAny,...lpe(e)});var qpe=class extends cpe{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Qfe(e.data)}};qpe.create=e=>new qpe({typeName:Ehe.ZodUnknown,...lpe(e)});var Hpe=class extends cpe{_parse(e){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.never,received:t.parsedType}),Kfe}};Hpe.create=e=>new Hpe({typeName:Ehe.ZodNever,...lpe(e)});var Vpe=class extends cpe{_parse(e){if(this._getType(e)!==jfe.undefined){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.void,received:t.parsedType}),Kfe}return Qfe(e.data)}};Vpe.create=e=>new Vpe({typeName:Ehe.ZodVoid,...lpe(e)});var Wpe=class e extends cpe{_parse(e){let{ctx:t,status:n}=this._processInputParams(e),r=this._def;if(t.parsedType!==jfe.array)return Wfe(t,{code:$fe.invalid_type,expected:jfe.array,received:t.parsedType}),Kfe;if(null!==r.exactLength){let e=t.data.length>r.exactLength.value,i=t.data.length<r.exactLength.value;(e||i)&&(Wfe(t,{code:e?$fe.too_big:$fe.too_small,minimum:i?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),n.dirty())}if(null!==r.minLength&&t.data.length<r.minLength.value&&(Wfe(t,{code:$fe.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),n.dirty()),null!==r.maxLength&&t.data.length>r.maxLength.value&&(Wfe(t,{code:$fe.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((e,n)=>r.type._parseAsync(new ape(t,e,t.path,n)))).then(e=>Yfe.mergeArray(n,e));let i=[...t.data].map((e,n)=>r.type._parseSync(new ape(t,e,t.path,n)));return Yfe.mergeArray(n,i)}get element(){return this._def.type}min(t,n){return new e({...this._def,minLength:{value:t,message:Gfe.toString(n)}})}max(t,n){return new e({...this._def,maxLength:{value:t,message:Gfe.toString(n)}})}length(t,n){return new e({...this._def,exactLength:{value:t,message:Gfe.toString(n)}})}nonempty(e){return this.min(1,e)}};function Gpe(e){if(e instanceof Ype){let t={};for(let n in e.shape){let r=e.shape[n];t[n]=fhe.create(Gpe(r))}return new Ype({...e._def,shape:()=>t})}return e instanceof Wpe?new Wpe({...e._def,type:Gpe(e.element)}):e instanceof fhe?fhe.create(Gpe(e.unwrap())):e instanceof phe?phe.create(Gpe(e.unwrap())):e instanceof ehe?ehe.create(e.items.map(e=>Gpe(e))):e}Wpe.create=(e,t)=>new Wpe({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Ehe.ZodArray,...lpe(t)});var Ype=class e extends cpe{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;let e=this._def.shape(),t=Rfe.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==jfe.object){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.object,received:t.parsedType}),Kfe}let{status:t,ctx:n}=this._processInputParams(e),{shape:r,keys:i}=this._getCached(),o=[];if(!(this._def.catchall instanceof Hpe&&"strip"===this._def.unknownKeys))for(let s in n.data)i.includes(s)||o.push(s);let a=[];for(let s of i){let e=r[s],t=n.data[s];a.push({key:{status:"valid",value:s},value:e._parse(new ape(n,t,n.path,s)),alwaysSet:s in n.data})}if(this._def.catchall instanceof Hpe){let e=this._def.unknownKeys;if("passthrough"===e)for(let t of o)a.push({key:{status:"valid",value:t},value:{status:"valid",value:n.data[t]}});else if("strict"===e)o.length>0&&(Wfe(n,{code:$fe.unrecognized_keys,keys:o}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let e=this._def.catchall;for(let t of o){let r=n.data[t];a.push({key:{status:"valid",value:t},value:e._parse(new ape(n,r,n.path,t)),alwaysSet:t in n.data})}}return n.common.async?Promise.resolve().then(async()=>{let e=[];for(let t of a){let n=await t.key,r=await t.value;e.push({key:n,value:r,alwaysSet:t.alwaysSet})}return e}).then(e=>Yfe.mergeObjectSync(t,e)):Yfe.mergeObjectSync(t,a)}get shape(){return this._def.shape()}strict(t){return Gfe.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,n)=>{var r,i,o,a;let s=null!==(o=null===(i=(r=this._def).errorMap)||void 0===i?void 0:i.call(r,e,n).message)&&void 0!==o?o:n.defaultError;return"unrecognized_keys"===e.code?{message:null!==(a=Gfe.errToObj(t).message)&&void 0!==a?a:s}:{message:s}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Ehe.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){let n={};return Rfe.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}omit(t){let n={};return Rfe.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new e({...this._def,shape:()=>n})}deepPartial(){return Gpe(this)}partial(t){let n={};return Rfe.objectKeys(this.shape).forEach(e=>{let r=this.shape[e];t&&!t[e]?n[e]=r:n[e]=r.optional()}),new e({...this._def,shape:()=>n})}required(t){let n={};return Rfe.objectKeys(this.shape).forEach(e=>{if(t&&!t[e])n[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof fhe;)t=t._def.innerType;n[e]=t}}),new e({...this._def,shape:()=>n})}keyof(){return she(Rfe.objectKeys(this.shape))}};Ype.create=(e,t)=>new Ype({shape:()=>e,unknownKeys:"strip",catchall:Hpe.create(),typeName:Ehe.ZodObject,...lpe(t)}),Ype.strictCreate=(e,t)=>new Ype({shape:()=>e,unknownKeys:"strict",catchall:Hpe.create(),typeName:Ehe.ZodObject,...lpe(t)}),Ype.lazycreate=(e,t)=>new Ype({shape:e,unknownKeys:"strip",catchall:Hpe.create(),typeName:Ehe.ZodObject,...lpe(t)});var Kpe=class extends cpe{_parse(e){let{ctx:t}=this._processInputParams(e),n=this._def.options;if(t.common.async)return Promise.all(n.map(async e=>{let n={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:n}),ctx:n}})).then(function(e){for(let t of e)if("valid"===t.result.status)return t.result;for(let r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;let n=e.map(e=>new zfe(e.ctx.common.issues));return Wfe(t,{code:$fe.invalid_union,unionErrors:n}),Kfe});{let e,r=[];for(let o of n){let n={...t,common:{...t.common,issues:[]},parent:null},i=o._parseSync({data:t.data,path:t.path,parent:n});if("valid"===i.status)return i;"dirty"===i.status&&!e&&(e={result:i,ctx:n}),n.common.issues.length&&r.push(n.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;let i=r.map(e=>new zfe(e));return Wfe(t,{code:$fe.invalid_union,unionErrors:i}),Kfe}}get options(){return this._def.options}};Kpe.create=(e,t)=>new Kpe({options:e,typeName:Ehe.ZodUnion,...lpe(t)});var Zpe=e=>e instanceof ohe?Zpe(e.schema):e instanceof dhe?Zpe(e.innerType()):e instanceof ahe?[e.value]:e instanceof lhe?e.options:e instanceof uhe?Rfe.objectValues(e.enum):e instanceof hhe?Zpe(e._def.innerType):e instanceof $pe?[void 0]:e instanceof zpe?[null]:e instanceof fhe?[void 0,...Zpe(e.unwrap())]:e instanceof phe?[null,...Zpe(e.unwrap())]:e instanceof vhe||e instanceof whe?Zpe(e.unwrap()):e instanceof mhe?Zpe(e._def.innerType):[],Qpe=class e extends cpe{_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==jfe.object)return Wfe(t,{code:$fe.invalid_type,expected:jfe.object,received:t.parsedType}),Kfe;let n=this.discriminator,r=t.data[n],i=this.optionsMap.get(r);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(Wfe(t,{code:$fe.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),Kfe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){let i=new Map;for(let e of n){let n=Zpe(e.shape[t]);if(!n.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(let r of n){if(i.has(r))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(r)}`);i.set(r,e)}}return new e({typeName:Ehe.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:i,...lpe(r)})}};function Xpe(e,t){let n=Bfe(e),r=Bfe(t);if(e===t)return{valid:!0,data:e};if(n===jfe.object&&r===jfe.object){let n=Rfe.objectKeys(t),r=Rfe.objectKeys(e).filter(e=>-1!==n.indexOf(e)),i={...e,...t};for(let o of r){let n=Xpe(e[o],t[o]);if(!n.valid)return{valid:!1};i[o]=n.data}return{valid:!0,data:i}}if(n===jfe.array&&r===jfe.array){if(e.length!==t.length)return{valid:!1};let n=[];for(let r=0;r<e.length;r++){let i=Xpe(e[r],t[r]);if(!i.valid)return{valid:!1};n.push(i.data)}return{valid:!0,data:n}}return n===jfe.date&&r===jfe.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var Jpe=class extends cpe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=(e,r)=>{if(Xfe(e)||Xfe(r))return Kfe;let i=Xpe(e.value,r.value);return i.valid?((Jfe(e)||Jfe(r))&&t.dirty(),{status:t.value,value:i.data}):(Wfe(n,{code:$fe.invalid_intersection_types}),Kfe)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([e,t])=>r(e,t)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};Jpe.create=(e,t,n)=>new Jpe({left:e,right:t,typeName:Ehe.ZodIntersection,...lpe(n)});var ehe=class e extends cpe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jfe.array)return Wfe(n,{code:$fe.invalid_type,expected:jfe.array,received:n.parsedType}),Kfe;if(n.data.length<this._def.items.length)return Wfe(n,{code:$fe.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Kfe;!this._def.rest&&n.data.length>this._def.items.length&&(Wfe(n,{code:$fe.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());let r=[...n.data].map((e,t)=>{let r=this._def.items[t]||this._def.rest;return r?r._parse(new ape(n,e,n.path,t)):null}).filter(e=>!!e);return n.common.async?Promise.all(r).then(e=>Yfe.mergeArray(t,e)):Yfe.mergeArray(t,r)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};ehe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ehe({items:e,typeName:Ehe.ZodTuple,rest:null,...lpe(t)})};var the=class e extends cpe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jfe.object)return Wfe(n,{code:$fe.invalid_type,expected:jfe.object,received:n.parsedType}),Kfe;let r=[],i=this._def.keyType,o=this._def.valueType;for(let a in n.data)r.push({key:i._parse(new ape(n,a,n.path,a)),value:o._parse(new ape(n,n.data[a],n.path,a)),alwaysSet:a in n.data});return n.common.async?Yfe.mergeObjectAsync(t,r):Yfe.mergeObjectSync(t,r)}get element(){return this._def.valueType}static create(t,n,r){return new e(n instanceof cpe?{keyType:t,valueType:n,typeName:Ehe.ZodRecord,...lpe(r)}:{keyType:Rpe.create(),valueType:t,typeName:Ehe.ZodRecord,...lpe(n)})}},nhe=class extends cpe{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jfe.map)return Wfe(n,{code:$fe.invalid_type,expected:jfe.map,received:n.parsedType}),Kfe;let r=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([e,t],o)=>({key:r._parse(new ape(n,e,n.path,[o,"key"])),value:i._parse(new ape(n,t,n.path,[o,"value"]))}));if(n.common.async){let e=new Map;return Promise.resolve().then(async()=>{for(let n of o){let r=await n.key,i=await n.value;if("aborted"===r.status||"aborted"===i.status)return Kfe;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}})}{let e=new Map;for(let n of o){let r=n.key,i=n.value;if("aborted"===r.status||"aborted"===i.status)return Kfe;("dirty"===r.status||"dirty"===i.status)&&t.dirty(),e.set(r.value,i.value)}return{status:t.value,value:e}}}};nhe.create=(e,t,n)=>new nhe({valueType:t,keyType:e,typeName:Ehe.ZodMap,...lpe(n)});var rhe=class e extends cpe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==jfe.set)return Wfe(n,{code:$fe.invalid_type,expected:jfe.set,received:n.parsedType}),Kfe;let r=this._def;null!==r.minSize&&n.data.size<r.minSize.value&&(Wfe(n,{code:$fe.too_small,minimum:r.minSize.value,type:"set",inclusive:!0,exact:!1,message:r.minSize.message}),t.dirty()),null!==r.maxSize&&n.data.size>r.maxSize.value&&(Wfe(n,{code:$fe.too_big,maximum:r.maxSize.value,type:"set",inclusive:!0,exact:!1,message:r.maxSize.message}),t.dirty());let i=this._def.valueType;function o(e){let n=new Set;for(let r of e){if("aborted"===r.status)return Kfe;"dirty"===r.status&&t.dirty(),n.add(r.value)}return{status:t.value,value:n}}let a=[...n.data.values()].map((e,t)=>i._parse(new ape(n,e,n.path,t)));return n.common.async?Promise.all(a).then(e=>o(e)):o(a)}min(t,n){return new e({...this._def,minSize:{value:t,message:Gfe.toString(n)}})}max(t,n){return new e({...this._def,maxSize:{value:t,message:Gfe.toString(n)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};rhe.create=(e,t)=>new rhe({valueType:e,minSize:null,maxSize:null,typeName:Ehe.ZodSet,...lpe(t)});var ihe=class e extends cpe{constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==jfe.function)return Wfe(t,{code:$fe.invalid_type,expected:jfe.function,received:t.parsedType}),Kfe;function n(e,n){return Vfe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hfe(),Ufe].filter(e=>!!e),issueData:{code:$fe.invalid_arguments,argumentsError:n}})}function r(e,n){return Vfe({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,Hfe(),Ufe].filter(e=>!!e),issueData:{code:$fe.invalid_return_type,returnTypeError:n}})}let i={errorMap:t.common.contextualErrorMap},o=t.data;if(this._def.returns instanceof che){let e=this;return Qfe(async function(...t){let a=new zfe([]),s=await e._def.args.parseAsync(t,i).catch(e=>{throw a.addIssue(n(t,e)),a}),l=await Reflect.apply(o,this,s);return await e._def.returns._def.type.parseAsync(l,i).catch(e=>{throw a.addIssue(r(l,e)),a})})}{let e=this;return Qfe(function(...t){let a=e._def.args.safeParse(t,i);if(!a.success)throw new zfe([n(t,a.error)]);let s=Reflect.apply(o,this,a.data),l=e._def.returns.safeParse(s,i);if(!l.success)throw new zfe([r(s,l.error)]);return l.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new e({...this._def,args:ehe.create(t).rest(qpe.create())})}returns(t){return new e({...this._def,returns:t})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(t,n,r){return new e({args:t||ehe.create([]).rest(qpe.create()),returns:n||qpe.create(),typeName:Ehe.ZodFunction,...lpe(r)})}},ohe=class extends cpe{get schema(){return this._def.getter()}_parse(e){let{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};ohe.create=(e,t)=>new ohe({getter:e,typeName:Ehe.ZodLazy,...lpe(t)});var ahe=class extends cpe{_parse(e){if(e.data!==this._def.value){let t=this._getOrReturnCtx(e);return Wfe(t,{received:t.data,code:$fe.invalid_literal,expected:this._def.value}),Kfe}return{status:"valid",value:e.data}}get value(){return this._def.value}};function she(e,t){return new lhe({values:e,typeName:Ehe.ZodEnum,...lpe(t)})}ahe.create=(e,t)=>new ahe({value:e,typeName:Ehe.ZodLiteral,...lpe(t)});var lhe=class e extends cpe{constructor(){super(...arguments),ipe.set(this,void 0)}_parse(e){if("string"!=typeof e.data){let t=this._getOrReturnCtx(e),n=this._def.values;return Wfe(t,{expected:Rfe.joinValues(n),received:t.parsedType,code:$fe.invalid_type}),Kfe}if(npe(this,ipe)||rpe(this,ipe,new Set(this._def.values)),!npe(this,ipe).has(e.data)){let t=this._getOrReturnCtx(e),n=this._def.values;return Wfe(t,{received:t.data,code:$fe.invalid_enum_value,options:n}),Kfe}return Qfe(e.data)}get options(){return this._def.values}get enum(){let e={};for(let t of this._def.values)e[t]=t;return e}get Values(){let e={};for(let t of this._def.values)e[t]=t;return e}get Enum(){let e={};for(let t of this._def.values)e[t]=t;return e}extract(t,n=this._def){return e.create(t,{...this._def,...n})}exclude(t,n=this._def){return e.create(this.options.filter(e=>!t.includes(e)),{...this._def,...n})}};ipe=new WeakMap,lhe.create=she;var uhe=class extends cpe{constructor(){super(...arguments),ope.set(this,void 0)}_parse(e){let t=Rfe.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==jfe.string&&n.parsedType!==jfe.number){let e=Rfe.objectValues(t);return Wfe(n,{expected:Rfe.joinValues(e),received:n.parsedType,code:$fe.invalid_type}),Kfe}if(npe(this,ope)||rpe(this,ope,new Set(Rfe.getValidEnumValues(this._def.values))),!npe(this,ope).has(e.data)){let e=Rfe.objectValues(t);return Wfe(n,{received:n.data,code:$fe.invalid_enum_value,options:e}),Kfe}return Qfe(e.data)}get enum(){return this._def.values}};ope=new WeakMap,uhe.create=(e,t)=>new uhe({values:e,typeName:Ehe.ZodNativeEnum,...lpe(t)});var che=class extends cpe{unwrap(){return this._def.type}_parse(e){let{ctx:t}=this._processInputParams(e);if(t.parsedType!==jfe.promise&&!1===t.common.async)return Wfe(t,{code:$fe.invalid_type,expected:jfe.promise,received:t.parsedType}),Kfe;let n=t.parsedType===jfe.promise?t.data:Promise.resolve(t.data);return Qfe(n.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}};che.create=(e,t)=>new che({type:e,typeName:Ehe.ZodPromise,...lpe(t)});var dhe=class extends cpe{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Ehe.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,i={addIssue:e=>{Wfe(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===r.type){let e=r.transform(n.data,i);if(n.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return Kfe;let r=await this._def.schema._parseAsync({data:e,path:n.path,parent:n});return"aborted"===r.status?Kfe:"dirty"===r.status||"dirty"===t.value?Zfe(r.value):r});{if("aborted"===t.value)return Kfe;let r=this._def.schema._parseSync({data:e,path:n.path,parent:n});return"aborted"===r.status?Kfe:"dirty"===r.status||"dirty"===t.value?Zfe(r.value):r}}if("refinement"===r.type){let e=e=>{let t=r.refinement(e,i);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===n.common.async){let r=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===r.status?Kfe:("dirty"===r.status&&t.dirty(),e(r.value),{status:t.value,value:r.value})}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(n=>"aborted"===n.status?Kfe:("dirty"===n.status&&t.dirty(),e(n.value).then(()=>({status:t.value,value:n.value}))))}if("transform"===r.type){if(!1===n.common.async){let e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!epe(e))return e;let o=r.transform(e.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:o}}return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>epe(e)?Promise.resolve(r.transform(e.value,i)).then(e=>({status:t.value,value:e})):e)}Rfe.assertNever(r)}};dhe.create=(e,t,n)=>new dhe({schema:e,typeName:Ehe.ZodEffects,effect:t,...lpe(n)}),dhe.createWithPreprocess=(e,t,n)=>new dhe({schema:t,effect:{type:"preprocess",transform:e},typeName:Ehe.ZodEffects,...lpe(n)});var fhe=class extends cpe{_parse(e){return this._getType(e)===jfe.undefined?Qfe(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};fhe.create=(e,t)=>new fhe({innerType:e,typeName:Ehe.ZodOptional,...lpe(t)});var phe=class extends cpe{_parse(e){return this._getType(e)===jfe.null?Qfe(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};phe.create=(e,t)=>new phe({innerType:e,typeName:Ehe.ZodNullable,...lpe(t)});var hhe=class extends cpe{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return t.parsedType===jfe.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};hhe.create=(e,t)=>new hhe({innerType:e,typeName:Ehe.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...lpe(t)});var mhe=class extends cpe{_parse(e){let{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return tpe(r)?r.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new zfe(n.common.issues)},input:n.data})})):{status:"valid",value:"valid"===r.status?r.value:this._def.catchValue({get error(){return new zfe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};mhe.create=(e,t)=>new mhe({innerType:e,typeName:Ehe.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...lpe(t)});var ghe=class extends cpe{_parse(e){if(this._getType(e)!==jfe.nan){let t=this._getOrReturnCtx(e);return Wfe(t,{code:$fe.invalid_type,expected:jfe.nan,received:t.parsedType}),Kfe}return{status:"valid",value:e.data}}};ghe.create=e=>new ghe({typeName:Ehe.ZodNaN,...lpe(e)});var yhe=Symbol("zod_brand"),vhe=class extends cpe{_parse(e){let{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},bhe=class e extends cpe{_parse(e){let{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{let e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Kfe:"dirty"===e.status?(t.dirty(),Zfe(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})();{let e=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?Kfe:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}}static create(t,n){return new e({in:t,out:n,typeName:Ehe.ZodPipeline})}},whe=class extends cpe{_parse(e){let t=this._def.innerType._parse(e),n=e=>(epe(e)&&(e.value=Object.freeze(e.value)),e);return tpe(t)?t.then(e=>n(e)):n(t)}unwrap(){return this._def.innerType}};function _he(e,t){let n="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof n?{message:n}:n}function xhe(e,t={},n){return e?Upe.create().superRefine((r,i)=>{var o,a;let s=e(r);if(s instanceof Promise)return s.then(e=>{var o,a;if(!e){let e=_he(t,r),s=null===(a=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:s})}});if(!s){let e=_he(t,r),s=null===(a=null!==(o=e.fatal)&&void 0!==o?o:n)||void 0===a||a;i.addIssue({code:"custom",...e,fatal:s})}}):Upe.create()}whe.create=(e,t)=>new whe({innerType:e,typeName:Ehe.ZodReadonly,...lpe(t)});var Ehe,She={object:Ype.lazycreate};!function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"}(Ehe||(Ehe={}));var khe=Rpe.create,The=Ppe.create,Che=ghe.create,Ahe=Fpe.create,Ihe=Lpe.create,Ohe=jpe.create,Nhe=Bpe.create,Dhe=$pe.create,Rhe=zpe.create,Mhe=Upe.create,Phe=qpe.create,Fhe=Hpe.create,Lhe=Vpe.create,jhe=Wpe.create,Bhe=Ype.create,$he=Ype.strictCreate,zhe=Kpe.create,Uhe=Qpe.create,qhe=Jpe.create,Hhe=ehe.create,Vhe=the.create,Whe=nhe.create,Ghe=rhe.create,Yhe=ihe.create,Khe=ohe.create,Zhe=ahe.create,Qhe=lhe.create,Xhe=uhe.create,Jhe=che.create,eme=dhe.create,tme=fhe.create,nme=phe.create,rme=dhe.createWithPreprocess,ime=bhe.create,ome={string:e=>Rpe.create({...e,coerce:!0}),number:e=>Ppe.create({...e,coerce:!0}),boolean:e=>Lpe.create({...e,coerce:!0}),bigint:e=>Fpe.create({...e,coerce:!0}),date:e=>jpe.create({...e,coerce:!0})},ame=Kfe,sme=Object.freeze({__proto__:null,defaultErrorMap:Ufe,setErrorMap:function(e){qfe=e},getErrorMap:Hfe,makeIssue:Vfe,EMPTY_PATH:[],addIssueToContext:Wfe,ParseStatus:Yfe,INVALID:Kfe,DIRTY:Zfe,OK:Qfe,isAborted:Xfe,isDirty:Jfe,isValid:epe,isAsync:tpe,get util(){return Rfe},get objectUtil(){return Mfe},ZodParsedType:jfe,getParsedType:Bfe,ZodType:cpe,datetimeRegex:Ipe,ZodString:Rpe,ZodNumber:Ppe,ZodBigInt:Fpe,ZodBoolean:Lpe,ZodDate:jpe,ZodSymbol:Bpe,ZodUndefined:$pe,ZodNull:zpe,ZodAny:Upe,ZodUnknown:qpe,ZodNever:Hpe,ZodVoid:Vpe,ZodArray:Wpe,ZodObject:Ype,ZodUnion:Kpe,ZodDiscriminatedUnion:Qpe,ZodIntersection:Jpe,ZodTuple:ehe,ZodRecord:the,ZodMap:nhe,ZodSet:rhe,ZodFunction:ihe,ZodLazy:ohe,ZodLiteral:ahe,ZodEnum:lhe,ZodNativeEnum:uhe,ZodPromise:che,ZodEffects:dhe,ZodTransformer:dhe,ZodOptional:fhe,ZodNullable:phe,ZodDefault:hhe,ZodCatch:mhe,ZodNaN:ghe,BRAND:yhe,ZodBranded:vhe,ZodPipeline:bhe,ZodReadonly:whe,custom:xhe,Schema:cpe,ZodSchema:cpe,late:She,get ZodFirstPartyTypeKind(){return Ehe},coerce:ome,any:Mhe,array:jhe,bigint:Ahe,boolean:Ihe,date:Ohe,discriminatedUnion:Uhe,effect:eme,enum:Qhe,function:Yhe,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>xhe(t=>t instanceof e,t),intersection:qhe,lazy:Khe,literal:Zhe,map:Whe,nan:Che,nativeEnum:Xhe,never:Fhe,null:Rhe,nullable:nme,number:The,object:Bhe,oboolean:()=>Ihe().optional(),onumber:()=>The().optional(),optional:tme,ostring:()=>khe().optional(),pipeline:ime,preprocess:rme,promise:Jhe,record:Vhe,set:Ghe,strictObject:$he,string:khe,symbol:Nhe,transformer:eme,tuple:Hhe,undefined:Dhe,union:zhe,unknown:Phe,void:Lhe,NEVER:ame,ZodIssueCode:$fe,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:zfe}),lme=Object.defineProperty,ume=(e,t)=>{for(var n in t)lme(e,n,{get:t[n],enumerable:!0})};function cme(e,{contentType:t,dataStreamVersion:n}){let r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),void 0!==n&&r.set("X-Vercel-AI-Data-Stream",n),r}function dme(e,{contentType:t,dataStreamVersion:n}){let r={};if(null!=e)for(let[i,o]of Object.entries(e))r[i]=o;return null==r["Content-Type"]&&(r["Content-Type"]=t),void 0!==n&&(r["X-Vercel-AI-Data-Stream"]=n),r}function fme({response:e,status:t,statusText:n,headers:r,stream:i}){e.writeHead(t??200,n,r);let o=i.getReader();(async()=>{try{for(;;){let{done:t,value:n}=await o.read();if(t)break;e.write(n)}}catch(Ukt){throw Ukt}finally{e.end()}})()}var pme,hme=class extends ade{constructor(){super({name:"AI_UnsupportedModelVersionError",message:'Unsupported model version. AI SDK 4 only supports models that implement specification version "v1". Please upgrade to AI SDK 5 to use this model.'})}},mme="AI_InvalidArgumentError",gme=`vercel.ai.error.${mme}`,yme=Symbol.for(gme),vme=class extends ade{constructor({parameter:e,value:t,message:n}){super({name:mme,message:`Invalid argument for parameter ${e}: ${n}`}),this[pme]=!0,this.parameter=e,this.value=t}static isInstance(e){return ade.hasMarker(e,gme)}};pme=yme;var bme,wme="AI_RetryError",_me=`vercel.ai.error.${wme}`,xme=Symbol.for(_me),Eme=class extends ade{constructor({message:e,reason:t,errors:n}){super({name:wme,message:e}),this[bme]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return ade.hasMarker(e,_me)}};bme=xme;var Sme=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>kme(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function kme(e,{maxRetries:t,delayInMs:n,backoffFactor:r},i=[]){try{return await e()}catch(j0){if(function(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}(j0)||0===t)throw j0;let a=function(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}(j0),s=[...i,j0],l=s.length;if(l>t)throw new Eme({message:`Failed after ${l} attempts. Last error: ${a}`,reason:"maxRetriesExceeded",errors:s});if(j0 instanceof Error&&cde.isInstance(j0)&&!0===j0.isRetryable&&l<=t)return await async function(e){return null==e?Promise.resolve():new Promise(t=>setTimeout(t,e))}(n),kme(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw 1===l?j0:new Eme({message:`Failed after ${l} attempts with non-retryable error: '${a}'`,reason:"errorNotRetryable",errors:s})}}function Tme({maxRetries:e}){if(null!=e){if(!Number.isInteger(e))throw new vme({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new vme({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}let t=e??2;return{maxRetries:t,retry:Sme({maxRetries:t})}}function Cme({operationId:e,telemetry:t}){return{"operation.name":`${e}${null!=(null==t?void 0:t.functionId)?` ${t.functionId}`:""}`,"resource.name":null==t?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":null==t?void 0:t.functionId}}function Ame({model:e,settings:t,telemetry:n,headers:r}){var i;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((e,[t,n])=>(e[`ai.settings.${t}`]=n,e),{}),...Object.entries(null!=(i=null==n?void 0:n.metadata)?i:{}).reduce((e,[t,n])=>(e[`ai.telemetry.metadata.${t}`]=n,e),{}),...Object.entries(r??{}).reduce((e,[t,n])=>(void 0!==n&&(e[`ai.request.headers.${t}`]=n),e),{})}}var Ime={startSpan:()=>Ome,startActiveSpan:(e,t,n,r)=>"function"==typeof t?t(Ome):"function"==typeof n?n(Ome):"function"==typeof r?r(Ome):void 0},Ome={spanContext:()=>Nme,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},Nme={traceId:"",spanId:"",traceFlags:0};function Dme({isEnabled:e=!1,tracer:t}={}){return e?t||Lfe.getTracer("ai"):Ime}function Rme({name:e,tracer:t,attributes:n,fn:r,endWhenDone:i=!0}){return t.startActiveSpan(e,{attributes:n},async e=>{try{let t=await r(e);return i&&e.end(),t}catch(L0){try{Mme(e,L0)}finally{e.end()}throw L0}})}function Mme(e,t){t instanceof Error?(e.recordException({name:t.name,message:t.message,stack:t.stack}),e.setStatus({code:Cfe.ERROR,message:t.message})):e.setStatus({code:Cfe.ERROR})}function Pme({telemetry:e,attributes:t}){return!0!==(null==e?void 0:e.isEnabled)?{}:Object.entries(t).reduce((t,[n,r])=>{if(void 0===r)return t;if("object"==typeof r&&"input"in r&&"function"==typeof r.input){if(!1===(null==e?void 0:e.recordInputs))return t;let i=r.input();return void 0===i?t:{...t,[n]:i}}if("object"==typeof r&&"output"in r&&"function"==typeof r.output){if(!1===(null==e?void 0:e.recordOutputs))return t;let i=r.output();return void 0===i?t:{...t,[n]:i}}return{...t,[n]:r}},{})}var Fme=class{constructor({data:e,mimeType:t}){let n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return null==this.base64Data&&(this.base64Data=Ude(this.uint8ArrayData)),this.base64Data}get uint8Array(){return null==this.uint8ArrayData&&(this.uint8ArrayData=zde(this.base64Data)),this.uint8ArrayData}},Lme=class extends Fme{constructor(e){super(e),this.type="file"}},jme=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function Bme(e){return"string"==typeof e&&e.startsWith("SUQz")||"string"!=typeof e&&e.length>10&&73===e[0]&&68===e[1]&&51===e[2]?(e=>{let t="string"==typeof e?zde(e):e,n=(127&t[6])<<21|(127&t[7])<<14|(127&t[8])<<7|127&t[9];return t.slice(n+10)})(e):e}var $me,zme="AI_NoObjectGeneratedError",Ume=`vercel.ai.error.${zme}`,qme=Symbol.for(Ume),Hme=class extends ade{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:i,finishReason:o}){super({name:zme,message:e,cause:t}),this[$me]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=o}static isInstance(e){return ade.hasMarker(e,Ume)}};$me=qme;var Vme,Wme="AI_DownloadError",Gme=`vercel.ai.error.${Wme}`,Yme=Symbol.for(Gme),Kme=class extends ade{constructor({url:e,statusCode:t,statusText:n,cause:r,message:i=(null==r?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`)}){super({name:Wme,message:i,cause:r}),this[Vme]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return ade.hasMarker(e,Gme)}};async function Zme({url:e}){var t;let n=e.toString();try{let e=await fetch(n);if(!e.ok)throw new Kme({url:n,statusCode:e.status,statusText:e.statusText});return{data:new Uint8Array(await e.arrayBuffer()),mimeType:null!=(t=e.headers.get("content-type"))?t:void 0}}catch(B0){throw Kme.isInstance(B0)?B0:new Kme({url:n,cause:B0})}}Vme=Yme;var Qme,Xme="AI_InvalidDataContentError",Jme=`vercel.ai.error.${Xme}`,ege=Symbol.for(Jme),tge=class extends ade{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:Xme,message:n,cause:t}),this[Qme]=!0,this.content=e}static isInstance(e){return ade.hasMarker(e,Jme)}};Qme=ege;var nge=sme.union([sme.string(),sme.instanceof(Uint8Array),sme.instanceof(ArrayBuffer),sme.custom(e=>{var t,n;return null!=(n=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&n},{message:"Must be a Buffer"})]);function rge(e){return"string"==typeof e?e:e instanceof ArrayBuffer?Ude(new Uint8Array(e)):Ude(e)}function ige(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return zde(e)}catch($0){throw new tge({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:$0})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new tge({content:e})}function oge(e){try{return(new TextDecoder).decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var age,sge="AI_InvalidMessageRoleError",lge=`vercel.ai.error.${sge}`,uge=Symbol.for(lge),cge=class extends ade{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:sge,message:t}),this[age]=!0,this.role=e}static isInstance(e){return ade.hasMarker(e,lge)}};async function dge({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=Zme}){let i=await async function(e,t,n,r){let i=e.filter(e=>"user"===e.role).map(e=>e.content).filter(e=>Array.isArray(e)).flat().filter(e=>"image"===e.type||"file"===e.type).filter(e=>!("image"===e.type&&!0===n)).map(e=>"image"===e.type?e.image:e.data).map(e=>"string"==typeof e&&(e.startsWith("http:")||e.startsWith("https:"))?new URL(e):e).filter(e=>e instanceof URL).filter(e=>!r(e)),o=await Promise.all(i.map(async e=>({url:e,data:await t({url:e})})));return Object.fromEntries(o.map(({url:e,data:t})=>[e.toString(),t]))}(e.messages,r,t,n);return[...null!=e.system?[{role:"system",content:e.system}]:[],...e.messages.map(e=>function(e,t){var n,r,i,o,a,s;let l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata};case"user":return"string"==typeof e.content?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:null!=(r=e.providerOptions)?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(e=>function(e,t){var n,r,i,o;if("text"===e.type)return{type:"text",text:e.text,providerMetadata:null!=(n=e.providerOptions)?n:e.experimental_providerMetadata};let a,s,l,u=e.mimeType,c=e.type;switch(c){case"image":a=e.image;break;case"file":a=e.data;break;default:throw new Error(`Unsupported part type: ${c}`)}try{s="string"==typeof a?new URL(a):a}catch{s=a}if(s instanceof URL)if("data:"===s.protocol){let{mimeType:e,base64Content:t}=function(e){try{let[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}(s.toString());if(null==e||null==t)throw new Error(`Invalid data URL format in part ${c}`);u=e,l=ige(t)}else{let e=t[s.toString()];e?(l=e.data,u??(u=e.mimeType)):l=s}else l=ige(s);switch(c){case"image":return l instanceof Uint8Array&&(u=null!=(r=function({data:e,signatures:t}){let n=Bme(e);for(let r of t)if("string"==typeof n?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((e,t)=>n[t]===e))return r.mimeType}({data:l,signatures:jme}))?r:u),{type:"image",image:l,mimeType:u,providerMetadata:null!=(i=e.providerOptions)?i:e.experimental_providerMetadata};case"file":if(null==u)throw new Error("Mime type is missing for file part");return{type:"file",data:l instanceof Uint8Array?rge(l):l,filename:e.filename,mimeType:u,providerMetadata:null!=(o=e.providerOptions)?o:e.experimental_providerMetadata}}}(e,t)).filter(e=>"text"!==e.type||""!==e.text),providerMetadata:null!=(i=e.providerOptions)?i:e.experimental_providerMetadata};case"assistant":return"string"==typeof e.content?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:null!=(o=e.providerOptions)?o:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(e=>"text"!==e.type||""!==e.text).map(e=>{var t;let n=null!=(t=e.providerOptions)?t:e.experimental_providerMetadata;switch(e.type){case"file":return{type:"file",data:e.data instanceof URL?e.data:rge(e.data),filename:e.filename,mimeType:e.mimeType,providerMetadata:n};case"reasoning":return{type:"reasoning",text:e.text,signature:e.signature,providerMetadata:n};case"redacted-reasoning":return{type:"redacted-reasoning",data:e.data,providerMetadata:n};case"text":return{type:"text",text:e.text,providerMetadata:n};case"tool-call":return{type:"tool-call",toolCallId:e.toolCallId,toolName:e.toolName,args:e.args,providerMetadata:n}}}),providerMetadata:null!=(a=e.providerOptions)?a:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(e=>{var t;return{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result,content:e.experimental_content,isError:e.isError,providerMetadata:null!=(t=e.providerOptions)?t:e.experimental_providerMetadata}}),providerMetadata:null!=(s=e.providerOptions)?s:e.experimental_providerMetadata};default:throw new cge({role:l})}}(e,i))]}function fge({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:i,frequencyPenalty:o,stopSequences:a,seed:s}){if(null!=e){if(!Number.isInteger(e))throw new vme({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new vme({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(null!=t&&"number"!=typeof t)throw new vme({parameter:"temperature",value:t,message:"temperature must be a number"});if(null!=n&&"number"!=typeof n)throw new vme({parameter:"topP",value:n,message:"topP must be a number"});if(null!=r&&"number"!=typeof r)throw new vme({parameter:"topK",value:r,message:"topK must be a number"});if(null!=i&&"number"!=typeof i)throw new vme({parameter:"presencePenalty",value:i,message:"presencePenalty must be a number"});if(null!=o&&"number"!=typeof o)throw new vme({parameter:"frequencyPenalty",value:o,message:"frequencyPenalty must be a number"});if(null!=s&&!Number.isInteger(s))throw new vme({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:i,frequencyPenalty:o,stopSequences:null!=a&&a.length>0?a:void 0,seed:s}}function pge(e){var t,n,r;let i=[];for(let o of e){let e;try{e=new URL(o.url)}catch{throw new Error(`Invalid URL: ${o.url}`)}switch(e.protocol){case"http:":case"https:":if(null!=(t=o.contentType)&&t.startsWith("image/"))i.push({type:"image",image:e});else{if(!o.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:e,mimeType:o.contentType})}break;case"data:":{let e,t,a;try{[e,t]=o.url.split(","),a=e.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${o.url}`)}if(null==a||null==t)throw new Error(`Invalid data URL format: ${o.url}`);if(null!=(n=o.contentType)&&n.startsWith("image/"))i.push({type:"image",image:ige(t)});else if(null!=(r=o.contentType)&&r.startsWith("text/"))i.push({type:"text",text:oge(ige(t))});else{if(!o.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:t,mimeType:o.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${e.protocol}`)}}return i}age=uge;var hge,mge="AI_MessageConversionError",gge=`vercel.ai.error.${mge}`,yge=Symbol.for(gge),vge=class extends ade{constructor({originalMessage:e,message:t}){super({name:mge,message:t}),this[hge]=!0,this.originalMessage=e}static isInstance(e){return ade.hasMarker(e,gge)}};function bge(e,t){var n,r;let i=null!=(n=null==t?void 0:t.tools)?n:{},o=[];for(let a=0;a<e.length;a++){let t=e[a],n=a===e.length-1,{role:s,content:l,experimental_attachments:u}=t;switch(s){case"system":o.push({role:"system",content:l});break;case"user":if(null==t.parts)o.push({role:"user",content:u?[{type:"text",text:l},...pge(u)]:l});else{let e=t.parts.filter(e=>"text"===e.type).map(e=>({type:"text",text:e.text}));o.push({role:"user",content:u?[...e,...pge(u)]:e})}break;case"assistant":{if(null!=t.parts){let e=function(){let e=[];for(let t of s)switch(t.type){case"file":case"text":e.push(t);break;case"reasoning":for(let n of t.details)switch(n.type){case"text":e.push({type:"reasoning",text:n.text,signature:n.signature});break;case"redacted":e.push({type:"redacted-reasoning",data:n.data})}break;case"tool-invocation":e.push({type:"tool-call",toolCallId:t.toolInvocation.toolCallId,toolName:t.toolInvocation.toolName,args:t.toolInvocation.args});break;default:throw new Error(`Unsupported part: ${t}`)}o.push({role:"assistant",content:e});let r=s.filter(e=>"tool-invocation"===e.type).map(e=>e.toolInvocation);r.length>0&&o.push({role:"tool",content:r.map(e=>{if(!("result"in e))throw new vge({originalMessage:t,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:n,toolName:r,result:o}=e,a=i[r];return null!=(null==a?void 0:a.experimental_toToolResultContent)?{type:"tool-result",toolCallId:n,toolName:r,result:a.experimental_toToolResultContent(o),experimental_content:a.experimental_toToolResultContent(o)}:{type:"tool-result",toolCallId:n,toolName:r,result:o}})}),s=[],a=!1,n++},n=0,a=!1,s=[];for(let i of t.parts)switch(i.type){case"text":a&&e(),s.push(i);break;case"file":case"reasoning":s.push(i);break;case"tool-invocation":(null!=(r=i.toolInvocation.step)?r:0)!==n&&e(),s.push(i),a=!0}e();break}let e=t.toolInvocations;if(null==e||0===e.length){o.push({role:"assistant",content:l});break}let a=e.reduce((e,t)=>{var n;return Math.max(e,null!=(n=t.step)?n:0)},0);for(let r=0;r<=a;r++){let a=e.filter(e=>{var t;return(null!=(t=e.step)?t:0)===r});0!==a.length&&(o.push({role:"assistant",content:[...n&&l&&0===r?[{type:"text",text:l}]:[],...a.map(({toolCallId:e,toolName:t,args:n})=>({type:"tool-call",toolCallId:e,toolName:t,args:n}))]}),o.push({role:"tool",content:a.map(e=>{if(!("result"in e))throw new vge({originalMessage:t,message:"ToolInvocation must have a result: "+JSON.stringify(e)});let{toolCallId:n,toolName:r,result:o}=e,a=i[r];return null!=(null==a?void 0:a.experimental_toToolResultContent)?{type:"tool-result",toolCallId:n,toolName:r,result:a.experimental_toToolResultContent(o),experimental_content:a.experimental_toToolResultContent(o)}:{type:"tool-result",toolCallId:n,toolName:r,result:o}})}))}l&&!n&&o.push({role:"assistant",content:l});break}case"data":break;default:throw new vge({originalMessage:t,message:`Unsupported role: ${s}`})}}return o}hge=yge;var wge=sme.lazy(()=>sme.union([sme.null(),sme.string(),sme.number(),sme.boolean(),sme.record(sme.string(),wge),sme.array(wge)])),_ge=sme.record(sme.string(),sme.record(sme.string(),wge)),xge=sme.array(sme.union([sme.object({type:sme.literal("text"),text:sme.string()}),sme.object({type:sme.literal("image"),data:sme.string(),mimeType:sme.string().optional()})])),Ege=sme.object({type:sme.literal("text"),text:sme.string(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Sge=sme.object({type:sme.literal("image"),image:sme.union([nge,sme.instanceof(URL)]),mimeType:sme.string().optional(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),kge=sme.object({type:sme.literal("file"),data:sme.union([nge,sme.instanceof(URL)]),filename:sme.string().optional(),mimeType:sme.string(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Tge=sme.object({type:sme.literal("reasoning"),text:sme.string(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Cge=sme.object({type:sme.literal("redacted-reasoning"),data:sme.string(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Age=sme.object({type:sme.literal("tool-call"),toolCallId:sme.string(),toolName:sme.string(),args:sme.unknown(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Ige=sme.object({type:sme.literal("tool-result"),toolCallId:sme.string(),toolName:sme.string(),result:sme.unknown(),content:xge.optional(),isError:sme.boolean().optional(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Oge=sme.object({role:sme.literal("system"),content:sme.string(),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Nge=sme.object({role:sme.literal("user"),content:sme.union([sme.string(),sme.array(sme.union([Ege,Sge,kge]))]),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Dge=sme.object({role:sme.literal("assistant"),content:sme.union([sme.string(),sme.array(sme.union([Ege,kge,Tge,Cge,Age]))]),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Rge=sme.object({role:sme.literal("tool"),content:sme.array(Ige),providerOptions:_ge.optional(),experimental_providerMetadata:_ge.optional()}),Mge=sme.union([Oge,Nge,Dge,Rge]);function Pge({prompt:e,tools:t}){if(null==e.prompt&&null==e.messages)throw new _de({prompt:e,message:"prompt or messages must be defined"});if(null!=e.prompt&&null!=e.messages)throw new _de({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(null!=e.system&&"string"!=typeof e.system)throw new _de({prompt:e,message:"system must be a string"});if(null!=e.prompt){if("string"!=typeof e.prompt)throw new _de({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(null!=e.messages){let n="ui-messages"===function(e){if(!Array.isArray(e))throw new _de({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received non-array value: ${JSON.stringify(e)}`].join("\n"),cause:e});if(0===e.length)return"messages";let t=e.map(Fge);if(t.some(e=>"has-ui-specific-parts"===e))return"ui-messages";let n=t.findIndex(e=>"has-core-specific-parts"!==e&&"message"!==e);if(-1===n)return"messages";throw new _de({prompt:e,message:["messages must be an array of CoreMessage or UIMessage",`Received message of type: "${t[n]}" at index ${n}`,`messages[${n}]: ${JSON.stringify(e[n])}`].join("\n"),cause:e})}(e.messages)?bge(e.messages,{tools:t}):e.messages;if(0===n.length)throw new _de({prompt:e,message:"messages must not be empty"});let r=Lde({value:n,schema:sme.array(Mge)});if(!r.success)throw new _de({prompt:e,message:["message must be a CoreMessage or a UI message",`Validation error: ${r.error.message}`].join("\n"),cause:r.error});return{type:"messages",messages:n,system:e.system}}throw new Error("unreachable")}function Fge(e){return"object"==typeof e&&null!==e&&("function"===e.role||"data"===e.role||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":"object"==typeof e&&null!==e&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":"object"==typeof e&&null!==e&&"role"in e&&"content"in e&&"string"==typeof e.content&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}function Lge({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function jge(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}function Bge(e){let t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{let e=t.getReader();return{async next(){let{done:t,value:n}=await e.read();return t?{done:!0,value:void 0}:{done:!1,value:n}}}},t}function $ge(e){let t=e.map(e=>({...e,content:"string"==typeof e.content?e.content:e.content.map(zge)}));return JSON.stringify(t)}function zge(e){return"image"===e.type?{...e,image:e.image instanceof Uint8Array?rge(e.image):e.image}:e}Rde({prefix:"aiobj",size:24});var Uge=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise||(this.promise=new Promise((e,t)=>{"resolved"===this.status.type?e(this.status.value):"rejected"===this.status.type&&t(this.status.error),this._resolve=e,this._reject=t})),this.promise}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&(null==(t=this._resolve)||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&(null==(t=this._reject)||t.call(this,e))}};function qge(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function Hge(){var e,t;return null!=(t=null==(e=null==globalThis?void 0:globalThis.performance)?void 0:e.now())?t:Date.now()}Rde({prefix:"aiobj",size:24});var Vge,Wge="AI_NoOutputSpecifiedError",Gge=`vercel.ai.error.${Wge}`,Yge=Symbol.for(Gge),Kge=class extends ade{constructor({message:e="No output specified."}={}){super({name:Wge,message:e}),this[Vge]=!0}static isInstance(e){return ade.hasMarker(e,Gge)}};Vge=Yge;var Zge,Qge="AI_ToolExecutionError",Xge=`vercel.ai.error.${Qge}`,Jge=Symbol.for(Xge),eye=class extends ade{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:i=`Error executing tool ${t}: ${dde(r)}`}){super({name:Qge,message:i,cause:r}),this[Zge]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return ade.hasMarker(e,Xge)}};function tye({tools:e,toolChoice:t,activeTools:n}){return function(e){return null!=e&&Object.keys(e).length>0}(e)?{tools:(null!=n?Object.entries(e).filter(([e])=>n.includes(e)):Object.entries(e)).map(([e,t])=>{let n=t.type;switch(n){case void 0:case"function":return{type:"function",name:e,description:t.description,parameters:yce(t.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:e,id:t.id,args:t.args};default:throw new Error(`Unsupported tool type: ${n}`)}}),toolChoice:null==t?{type:"auto"}:"string"==typeof t?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}Zge=Jge;var nye=/^([\s\S]*?)(\s+)(\S*)$/;function rye(e){let t=e.match(nye);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}function iye(e){let t=rye(e);return t?t.prefix+t.whitespace:e}var oye,aye="AI_InvalidToolArgumentsError",sye=`vercel.ai.error.${aye}`,lye=Symbol.for(sye),uye=class extends ade{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${dde(n)}`}){super({name:aye,message:r,cause:n}),this[oye]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return ade.hasMarker(e,sye)}};oye=lye;var cye,dye="AI_NoSuchToolError",fye=`vercel.ai.error.${dye}`,pye=Symbol.for(fye),hye=class extends ade{constructor({toolName:e,availableTools:t,message:n=`Model tried to call unavailable tool '${e}'. ${void 0===t?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:dye,message:n}),this[cye]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return ade.hasMarker(e,fye)}};cye=pye;var mye,gye="AI_ToolCallRepairError",yye=`vercel.ai.error.${gye}`,vye=Symbol.for(yye),bye=class extends ade{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${dde(e)}`}){super({name:gye,message:n,cause:e}),this[mye]=!0,this.originalError=t}static isInstance(e){return ade.hasMarker(e,yye)}};async function wye({toolCall:e,tools:t,repairToolCall:n,system:r,messages:i}){if(null==t)throw new hye({toolName:e.toolName});try{return await _ye({toolCall:e,tools:t})}catch(j0){if(null==n||!hye.isInstance(j0)&&!uye.isInstance(j0))throw j0;let a=null;try{a=await n({toolCall:e,tools:t,parameterSchema:({toolName:e})=>yce(t[e].parameters).jsonSchema,system:r,messages:i,error:j0})}catch(Ukt){throw new bye({cause:Ukt,originalError:j0})}if(null==a)throw j0;return await _ye({toolCall:a,tools:t})}}async function _ye({toolCall:e,tools:t}){let n=e.toolName,r=t[n];if(null==r)throw new hye({toolName:e.toolName,availableTools:Object.keys(t)});let i=yce(r.parameters),o=""===e.args.trim()?Lde({value:{},schema:i}):jde({text:e.args,schema:i});if(!1===o.success)throw new uye({toolName:n,toolArgs:e.args,cause:o.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:o.value}}function xye(e){let t=e.filter(e=>"text"===e.type).map(e=>e.text).join("");return t.length>0?t:void 0}function Eye({text:e="",files:t,reasoning:n,tools:r,toolCalls:i,toolResults:o,messageId:a,generateMessageId:s}){let l=[],u=[];return n.length>0&&u.push(...n.map(e=>"text"===e.type?{...e,type:"reasoning"}:{...e,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(e=>({type:"file",data:e.base64,mimeType:e.mimeType}))),e.length>0&&u.push({type:"text",text:e}),i.length>0&&u.push(...i),u.length>0&&l.push({role:"assistant",content:u,id:a}),o.length>0&&l.push({role:"tool",id:s(),content:o.map(e=>{let t=r[e.toolName];return null!=(null==t?void 0:t.experimental_toToolResultContent)?{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:t.experimental_toToolResultContent(e.result),experimental_content:t.experimental_toToolResultContent(e.result)}:{type:"tool-result",toolCallId:e.toolCallId,toolName:e.toolName,result:e.result}})}),l}mye=vye;var Sye=Rde({prefix:"aitxt",size:24}),kye=Rde({prefix:"msg",size:24});async function Tye({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:o,maxRetries:a,abortSignal:s,headers:l,maxSteps:u=1,experimental_generateMessageId:c=kye,experimental_output:d,experimental_continueSteps:f=!1,experimental_telemetry:p,experimental_providerMetadata:h,providerOptions:m=h,experimental_activeTools:g,experimental_prepareStep:y,experimental_repairToolCall:v,_internal:{generateId:b=Sye,currentDate:w=()=>new Date}={},onStepFinish:_,...x}){var E;if("string"==typeof e||"v1"!==e.specificationVersion)throw new hme;if(u<1)throw new vme({parameter:"maxSteps",value:u,message:"maxSteps must be at least 1"});let{maxRetries:S,retry:k}=Tme({maxRetries:a}),T=Ame({model:e,telemetry:p,headers:l,settings:{...x,maxRetries:S}}),C=Pge({prompt:{system:null!=(E=null==d?void 0:d.injectIntoSystemPrompt({system:r,model:e}))?E:r,prompt:i,messages:o},tools:t}),A=Dme(p);return Rme({name:"ai.generateText",attributes:Pme({telemetry:p,attributes:{...Cme({operationId:"ai.generateText",telemetry:p}),...T,"ai.model.provider":e.provider,"ai.model.id":e.modelId,"ai.prompt":{input:()=>JSON.stringify({system:r,prompt:i,messages:o})},"ai.settings.maxSteps":u}}),tracer:A,fn:async i=>{var o,a,h,E,S,I,O,N,D,R,M,P,F,L;let j,B=fge(x),$=[],z=[],U=[],q=0,H=[],V="",W=[],G=[],Y={completionTokens:0,promptTokens:0,totalTokens:0},K="initial";do{let i=0===q?C.type:"messages",P=[...C.messages,...H],F=await(null==y?void 0:y({model:e,steps:G,maxSteps:u,stepNumber:q})),L=null!=(o=null==F?void 0:F.toolChoice)?o:n,Z=null!=(a=null==F?void 0:F.experimental_activeTools)?a:g,Q=null!=(h=null==F?void 0:F.model)?h:e,X=await dge({prompt:{type:i,system:C.system,messages:P},modelSupportsImageUrls:Q.supportsImageUrls,modelSupportsUrl:null==(E=Q.supportsUrl)?void 0:E.bind(Q)}),J={type:"regular",...tye({tools:t,toolChoice:L,activeTools:Z})};j=await k(()=>Rme({name:"ai.generateText.doGenerate",attributes:Pme({telemetry:p,attributes:{...Cme({operationId:"ai.generateText.doGenerate",telemetry:p}),...T,"ai.model.provider":Q.provider,"ai.model.id":Q.modelId,"ai.prompt.format":{input:()=>i},"ai.prompt.messages":{input:()=>$ge(X)},"ai.prompt.tools":{input:()=>{var e;return null==(e=J.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=J.toolChoice?JSON.stringify(J.toolChoice):void 0},"gen_ai.system":Q.provider,"gen_ai.request.model":Q.modelId,"gen_ai.request.frequency_penalty":x.frequencyPenalty,"gen_ai.request.max_tokens":x.maxTokens,"gen_ai.request.presence_penalty":x.presencePenalty,"gen_ai.request.stop_sequences":x.stopSequences,"gen_ai.request.temperature":x.temperature,"gen_ai.request.top_k":x.topK,"gen_ai.request.top_p":x.topP}}),tracer:A,fn:async t=>{var n,r,o,a,u,c;let f=await Q.doGenerate({mode:J,...B,inputFormat:i,responseFormat:null==d?void 0:d.responseFormat({model:e}),prompt:X,providerMetadata:m,abortSignal:s,headers:l}),h={id:null!=(r=null==(n=f.response)?void 0:n.id)?r:b(),timestamp:null!=(a=null==(o=f.response)?void 0:o.timestamp)?a:w(),modelId:null!=(c=null==(u=f.response)?void 0:u.modelId)?c:Q.modelId};return t.setAttributes(Pme({telemetry:p,attributes:{"ai.response.finishReason":f.finishReason,"ai.response.text":{output:()=>f.text},"ai.response.toolCalls":{output:()=>JSON.stringify(f.toolCalls)},"ai.response.id":h.id,"ai.response.model":h.modelId,"ai.response.timestamp":h.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(f.providerMetadata),"ai.usage.promptTokens":f.usage.promptTokens,"ai.usage.completionTokens":f.usage.completionTokens,"gen_ai.response.finish_reasons":[f.finishReason],"gen_ai.response.id":h.id,"gen_ai.response.model":h.modelId,"gen_ai.usage.input_tokens":f.usage.promptTokens,"gen_ai.usage.output_tokens":f.usage.completionTokens}})),{...f,response:h}}})),$=await Promise.all((null!=(S=j.toolCalls)?S:[]).map(e=>wye({toolCall:e,tools:t,repairToolCall:v,system:r,messages:P}))),z=null==t?[]:await Cye({toolCalls:$,tools:t,tracer:A,telemetry:p,messages:P,abortSignal:s});let ee=Lge(j.usage);Y=jge(Y,ee);let te="done";++q<u&&(f&&"length"===j.finishReason&&0===$.length?te="continue":$.length>0&&z.length===$.length&&(te="tool-result"));let ne=null!=(I=j.text)?I:"",re="continue"===K&&V.trimEnd()!==V?ne.trimStart():ne,ie="continue"===te?iye(re):re;if(V="continue"===te||"continue"===K?V+ie:ie,U=Iye(j.reasoning),W.push(...null!=(O=j.sources)?O:[]),"continue"===K){let e=H[H.length-1];"string"==typeof e.content?e.content+=ie:e.content.push({text:ie,type:"text"})}else H.push(...Eye({text:V,files:Oye(j.files),reasoning:Iye(j.reasoning),tools:t??{},toolCalls:$,toolResults:z,messageId:c(),generateMessageId:c}));let oe={stepType:K,text:ie,reasoning:xye(U),reasoningDetails:U,files:Oye(j.files),sources:null!=(N=j.sources)?N:[],toolCalls:$,toolResults:z,finishReason:j.finishReason,usage:ee,warnings:j.warnings,logprobs:j.logprobs,request:null!=(D=j.request)?D:{},response:{...j.response,headers:null==(R=j.rawResponse)?void 0:R.headers,body:null==(M=j.rawResponse)?void 0:M.body,messages:structuredClone(H)},providerMetadata:j.providerMetadata,experimental_providerMetadata:j.providerMetadata,isContinued:"continue"===te};G.push(oe),await(null==_?void 0:_(oe)),K=te}while("done"!==K);return i.setAttributes(Pme({telemetry:p,attributes:{"ai.response.finishReason":j.finishReason,"ai.response.text":{output:()=>j.text},"ai.response.toolCalls":{output:()=>JSON.stringify(j.toolCalls)},"ai.usage.promptTokens":j.usage.promptTokens,"ai.usage.completionTokens":j.usage.completionTokens,"ai.response.providerMetadata":JSON.stringify(j.providerMetadata)}})),new Aye({text:V,files:Oye(j.files),reasoning:xye(U),reasoningDetails:U,sources:W,outputResolver:()=>{if(null==d)throw new Kge;return d.parseOutput({text:V},{response:j.response,usage:Y,finishReason:j.finishReason})},toolCalls:$,toolResults:z,finishReason:j.finishReason,usage:Y,warnings:j.warnings,request:null!=(P=j.request)?P:{},response:{...j.response,headers:null==(F=j.rawResponse)?void 0:F.headers,body:null==(L=j.rawResponse)?void 0:L.body,messages:H},logprobs:j.logprobs,steps:G,providerMetadata:j.providerMetadata})}})}async function Cye({toolCalls:e,tools:t,tracer:n,telemetry:r,messages:i,abortSignal:o}){return(await Promise.all(e.map(async({toolCallId:e,toolName:a,args:s})=>{let l=t[a];if(null==(null==l?void 0:l.execute))return;let u=await Rme({name:"ai.toolCall",attributes:Pme({telemetry:r,attributes:{...Cme({operationId:"ai.toolCall",telemetry:r}),"ai.toolCall.name":a,"ai.toolCall.id":e,"ai.toolCall.args":{output:()=>JSON.stringify(s)}}}),tracer:n,fn:async t=>{try{let n=await l.execute(s,{toolCallId:e,messages:i,abortSignal:o});try{t.setAttributes(Pme({telemetry:r,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(n)}}}))}catch{}return n}catch(n){throw Mme(t,n),new eye({toolCallId:e,toolName:a,toolArgs:s,cause:n})}}});return{type:"tool-result",toolCallId:e,toolName:a,args:s,result:u}}))).filter(e=>null!=e)}var Aye=class{constructor(e){this.text=e.text,this.files=e.files,this.reasoning=e.reasoning,this.reasoningDetails=e.reasoningDetails,this.toolCalls=e.toolCalls,this.toolResults=e.toolResults,this.finishReason=e.finishReason,this.usage=e.usage,this.warnings=e.warnings,this.request=e.request,this.response=e.response,this.steps=e.steps,this.experimental_providerMetadata=e.providerMetadata,this.providerMetadata=e.providerMetadata,this.logprobs=e.logprobs,this.outputResolver=e.outputResolver,this.sources=e.sources}get experimental_output(){return this.outputResolver()}};function Iye(e){return null==e?[]:"string"==typeof e?[{type:"text",text:e}]:e}function Oye(e){var t;return null!=(t=null==e?void 0:e.map(e=>new Fme(e)))?t:[]}ume({},{object:()=>Lye,text:()=>Fye});var Nye,Dye="AI_InvalidStreamPartError",Rye=`vercel.ai.error.${Dye}`,Mye=Symbol.for(Rye),Pye=class extends ade{constructor({chunk:e,message:t}){super({name:Dye,message:t}),this[Nye]=!0,this.chunk=e}static isInstance(e){return ade.hasMarker(e,Rye)}};Nye=Mye;var Fye=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt:({system:e})=>e,parsePartial:({text:e})=>({partial:e}),parseOutput:({text:e})=>e}),Lye=({schema:e})=>{let t=yce(e);return{type:"object",responseFormat:({model:e})=>({type:"json",schema:e.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt:({system:e,model:n})=>n.supportsStructuredOutputs?e:function({prompt:e,schema:t,schemaPrefix:n=(null!=t?"JSON schema:":void 0),schemaSuffix:r=(null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON.")}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,n,null!=t?JSON.stringify(t):void 0,r].filter(e=>null!=e).join("\n")}({prompt:e,schema:t.jsonSchema}),parsePartial({text:e}){let t=ice(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{let e=t.state;throw new Error(`Unsupported parse state: ${e}`)}}},parseOutput({text:e},n){let r=jde({text:e});if(!r.success)throw new Hme({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});let i=Lde({value:r.value,schema:t});if(!i.success)throw new Hme({message:"No object generated: response did not match schema.",cause:i.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.value}}};function jye(e){return void 0===e?[]:Array.isArray(e)?e:[e]}function Bye(e,t){let n,r,i=e.getReader(),o=t.getReader(),a=!1,s=!1;async function l(e){try{null==n&&(n=i.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==r&&(r=o.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(a)return void(await u(e));if(s)return void(await l(e));null==n&&(n=i.read()),null==r&&(r=o.read());let{result:t,reader:c}=await Promise.race([n.then(e=>({result:e,reader:i})),r.then(e=>({result:e,reader:o}))]);t.done||e.enqueue(t.value),c===i?(n=void 0,t.done&&(await u(e),a=!0)):(r=void 0,t.done&&(s=!0,await l(e)))}catch(t){e.error(t)}},cancel(){i.cancel(),o.cancel()}})}var $ye=Rde({prefix:"aitxt",size:24}),zye=Rde({prefix:"msg",size:24});var Uye=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:i,abortSignal:o,system:a,prompt:s,messages:l,tools:u,toolChoice:c,toolCallStreaming:d,transforms:f,activeTools:p,repairToolCall:h,maxSteps:m,output:g,continueSteps:y,providerOptions:v,now:b,currentDate:w,generateId:_,generateMessageId:x,onChunk:E,onError:S,onFinish:k,onStepFinish:T}){var C;if(this.warningsPromise=new Uge,this.usagePromise=new Uge,this.finishReasonPromise=new Uge,this.providerMetadataPromise=new Uge,this.textPromise=new Uge,this.reasoningPromise=new Uge,this.reasoningDetailsPromise=new Uge,this.sourcesPromise=new Uge,this.filesPromise=new Uge,this.toolCallsPromise=new Uge,this.toolResultsPromise=new Uge,this.requestPromise=new Uge,this.responsePromise=new Uge,this.stepsPromise=new Uge,m<1)throw new vme({parameter:"maxSteps",value:m,message:"maxSteps must be at least 1"});this.output=g;let A,I,O,N,D="",R="",M="",P=[],F=[],L=[],j=[],B={id:_(),timestamp:w(),modelId:e.modelId,messages:[]},$=[],z=[],U="initial",q=[],H=new TransformStream({async transform(e,t){t.enqueue(e);let{part:n}=e;if(("text-delta"===n.type||"reasoning"===n.type||"source"===n.type||"tool-call"===n.type||"tool-result"===n.type||"tool-call-streaming-start"===n.type||"tool-call-delta"===n.type)&&await(null==E?void 0:E({chunk:n})),"error"===n.type&&await(null==S?void 0:S({error:n.error})),"text-delta"===n.type&&(D+=n.textDelta,R+=n.textDelta,M+=n.textDelta),"reasoning"===n.type&&(null==A?(A={type:"text",text:n.textDelta},P.push(A)):A.text+=n.textDelta),"reasoning-signature"===n.type){if(null==A)throw new ade({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});A.signature=n.signature,A=void 0}if("redacted-reasoning"===n.type&&P.push({type:"redacted",data:n.data}),"file"===n.type&&F.push(n),"source"===n.type&&(j.push(n.source),L.push(n.source)),"tool-call"===n.type&&$.push(n),"tool-result"===n.type&&z.push(n),"step-finish"===n.type){let e=Eye({text:R,files:F,reasoning:P,tools:u??{},toolCalls:$,toolResults:z,messageId:n.messageId,generateMessageId:x}),t="done";q.length+1<m&&(y&&"length"===n.finishReason&&0===$.length?t="continue":$.length>0&&z.length===$.length&&(t="tool-result"));let r={stepType:U,text:D,reasoning:xye(P),reasoningDetails:P,files:F,sources:L,toolCalls:$,toolResults:z,finishReason:n.finishReason,usage:n.usage,warnings:n.warnings,logprobs:n.logprobs,request:n.request,response:{...n.response,messages:[...B.messages,...e]},providerMetadata:n.experimental_providerMetadata,experimental_providerMetadata:n.experimental_providerMetadata,isContinued:n.isContinued};await(null==T?void 0:T(r)),q.push(r),$=[],z=[],D="",L=[],P=[],F=[],A=void 0,"done"!==t&&(U=t),"continue"!==t&&(B.messages.push(...e),R="")}"finish"===n.type&&(B.id=n.response.id,B.timestamp=n.response.timestamp,B.modelId=n.response.modelId,B.headers=n.response.headers,O=n.usage,I=n.finishReason)},async flush(e){var n;try{if(0===q.length)return;let e=q[q.length-1];X.warningsPromise.resolve(e.warnings),X.requestPromise.resolve(e.request),X.responsePromise.resolve(e.response),X.toolCallsPromise.resolve(e.toolCalls),X.toolResultsPromise.resolve(e.toolResults),X.providerMetadataPromise.resolve(e.experimental_providerMetadata),X.reasoningPromise.resolve(e.reasoning),X.reasoningDetailsPromise.resolve(e.reasoningDetails);let r=I??"unknown",i=O??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};X.finishReasonPromise.resolve(r),X.usagePromise.resolve(i),X.textPromise.resolve(M),X.sourcesPromise.resolve(j),X.filesPromise.resolve(e.files),X.stepsPromise.resolve(q),await(null==k?void 0:k({finishReason:r,logprobs:void 0,usage:i,text:M,reasoning:e.reasoning,reasoningDetails:e.reasoningDetails,files:e.files,sources:e.sources,toolCalls:e.toolCalls,toolResults:e.toolResults,request:null!=(n=e.request)?n:{},response:e.response,warnings:e.warnings,providerMetadata:e.providerMetadata,experimental_providerMetadata:e.experimental_providerMetadata,steps:q})),N.setAttributes(Pme({telemetry:t,attributes:{"ai.response.finishReason":r,"ai.response.text":{output:()=>M},"ai.response.toolCalls":{output:()=>{var t;return null!=(t=e.toolCalls)&&t.length?JSON.stringify(e.toolCalls):void 0}},"ai.usage.promptTokens":i.promptTokens,"ai.usage.completionTokens":i.completionTokens,"ai.response.providerMetadata":JSON.stringify(e.providerMetadata)}}))}catch(r){e.error(r)}finally{N.end()}}}),V=function(){let e=[],t=null,n=!1,r=qge(),i=async()=>{if(n&&0===e.length)null==t||t.close();else{if(0===e.length)return r=qge(),await r.promise,i();try{let{value:r,done:o}=await e[0].read();o?(e.shift(),e.length>0?await i():n&&(null==t||t.close())):null==t||t.enqueue(r)}catch(o){null==t||t.error(o),e.shift(),n&&0===e.length&&(null==t||t.close())}}};return{stream:new ReadableStream({start(e){t=e},pull:i,async cancel(){for(let t of e)await t.cancel();e=[],n=!0}}),addStream:t=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(t.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),0===e.length&&(null==t||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(e=>e.cancel()),e=[],null==t||t.close()}}}();this.addStream=V.addStream,this.closeStream=V.close;let W=V.stream;for(let J of f)W=W.pipeThrough(J({tools:u,stopStream(){V.terminate()}}));this.baseStream=W.pipeThrough(function(e){if(!e)return new TransformStream({transform(e,t){t.enqueue({part:e,partialOutput:void 0})}});let t="",n="",r="";function i({controller:e,partialOutput:t}){e.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:t}),n=""}return new TransformStream({transform(o,a){if("step-finish"===o.type&&i({controller:a}),"text-delta"!==o.type)return void a.enqueue({part:o,partialOutput:void 0});t+=o.textDelta,n+=o.textDelta;let s=e.parsePartial({text:t});if(null!=s){let e=JSON.stringify(s.partial);e!==r&&(i({controller:a,partialOutput:s.partial}),r=e)}},flush(e){n.length>0&&i({controller:e})}})}(g)).pipeThrough(H);let{maxRetries:G,retry:Y}=Tme({maxRetries:i}),K=Dme(t),Z=Ame({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:G}}),Q=Pge({prompt:{system:null!=(C=null==g?void 0:g.injectIntoSystemPrompt({system:a,model:e}))?C:a,prompt:s,messages:l},tools:u}),X=this;Rme({name:"ai.streamText",attributes:Pme({telemetry:t,attributes:{...Cme({operationId:"ai.streamText",telemetry:t}),...Z,"ai.prompt":{input:()=>JSON.stringify({system:a,prompt:s,messages:l})},"ai.settings.maxSteps":m}}),tracer:K,endWhenDone:!1,fn:async i=>{N=i,await async function i({currentStep:s,responseMessages:l,usage:f,stepType:E,previousStepText:S,hasLeadingWhitespace:k,messageId:T}){var C;let A,I,O,N=0===l.length?Q.type:"messages",D=[...Q.messages,...l],R=await dge({prompt:{type:N,system:Q.system,messages:D},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:null==(C=e.supportsUrl)?void 0:C.bind(e)}),M={type:"regular",...tye({tools:u,toolChoice:c,activeTools:p})},{result:{stream:P,warnings:F,rawResponse:L,request:j},doStreamSpan:B,startTimestampMs:$}=await Y(()=>Rme({name:"ai.streamText.doStream",attributes:Pme({telemetry:t,attributes:{...Cme({operationId:"ai.streamText.doStream",telemetry:t}),...Z,"ai.prompt.format":{input:()=>N},"ai.prompt.messages":{input:()=>$ge(R)},"ai.prompt.tools":{input:()=>{var e;return null==(e=M.tools)?void 0:e.map(e=>JSON.stringify(e))}},"ai.prompt.toolChoice":{input:()=>null!=M.toolChoice?JSON.stringify(M.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:K,endWhenDone:!1,fn:async t=>({startTimestampMs:b(),doStreamSpan:t,result:await e.doStream({mode:M,...fge(r),inputFormat:N,responseFormat:null==g?void 0:g.responseFormat({model:e}),prompt:R,providerMetadata:v,abortSignal:o,headers:n})})})),z=function({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:i,system:o,messages:a,abortSignal:s,repairToolCall:l}){let u,c=null,d=new ReadableStream({start(e){c=e}}),f={},p=new Set,h=!1;function m(){h&&0===p.size&&(null!=u&&c.enqueue(u),c.close())}let g=new TransformStream({async transform(t,d){let h=t.type;switch(h){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":d.enqueue(t);break;case"file":d.enqueue(new Lme({data:t.data,mimeType:t.mimeType}));break;case"tool-call-delta":n&&(f[t.toolCallId]||(d.enqueue({type:"tool-call-streaming-start",toolCallId:t.toolCallId,toolName:t.toolName}),f[t.toolCallId]=!0),d.enqueue({type:"tool-call-delta",toolCallId:t.toolCallId,toolName:t.toolName,argsTextDelta:t.argsTextDelta}));break;case"tool-call":try{let n=await wye({toolCall:t,tools:e,repairToolCall:l,system:o,messages:a});d.enqueue(n);let u=e[n.toolName];if(null!=u.execute){let e=Vne();p.add(e),Rme({name:"ai.toolCall",attributes:Pme({telemetry:i,attributes:{...Cme({operationId:"ai.toolCall",telemetry:i}),"ai.toolCall.name":n.toolName,"ai.toolCall.id":n.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(n.args)}}}),tracer:r,fn:async t=>u.execute(n.args,{toolCallId:n.toolCallId,messages:a,abortSignal:s}).then(r=>{c.enqueue({...n,type:"tool-result",result:r}),p.delete(e),m();try{t.setAttributes(Pme({telemetry:i,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(r)}}}))}catch{}},r=>{Mme(t,r),c.enqueue({type:"error",error:new eye({toolCallId:n.toolCallId,toolName:n.toolName,toolArgs:n.args,cause:r})}),p.delete(e),m()})})}}catch(w){c.enqueue({type:"error",error:w})}break;case"finish":u={type:"finish",finishReason:t.finishReason,logprobs:t.logprobs,usage:Lge(t.usage),experimental_providerMetadata:t.providerMetadata};break;default:throw new Error(`Unhandled chunk type: ${h}`)}},flush(){h=!0,m()}});return new ReadableStream({start:async e=>Promise.all([t.pipeThrough(g).pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){}})),d.pipeTo(new WritableStream({write(t){e.enqueue(t)},close(){e.close()}}))])})}({tools:u,generatorStream:P,toolCallStreaming:d,tracer:K,telemetry:t,system:a,messages:D,repairToolCall:h,abortSignal:o}),U=j??{},q=[],H=[],V=[],W=[],G="unknown",J={promptTokens:0,completionTokens:0,totalTokens:0},ee=!0,te="",ne="continue"===E?S:"",re={id:_(),timestamp:w(),modelId:e.modelId},ie="",oe=!1,ae=!0,se=!1;async function le({controller:e,chunk:t}){e.enqueue(t),te+=t.textDelta,ne+=t.textDelta,oe=!0,se=t.textDelta.trimEnd()!==t.textDelta}X.addStream(z.pipeThrough(new TransformStream({async transform(e,t){var n,r,i;if(ee){let e=b()-$;ee=!1,B.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":e}),B.setAttributes({"ai.response.msToFirstChunk":e}),t.enqueue({type:"step-start",messageId:T,request:U,warnings:F??[]})}if("text-delta"===e.type&&0===e.textDelta.length)return;let o=e.type;switch(o){case"text-delta":if(y){let n=ae&&k?e.textDelta.trimStart():e.textDelta;if(0===n.length)break;ae=!1,ie+=n;let r=rye(ie);null!=r&&(ie=r.suffix,await le({controller:t,chunk:{type:"text-delta",textDelta:r.prefix+r.whitespace}}))}else await le({controller:t,chunk:e});break;case"reasoning":t.enqueue(e),null==A?(A={type:"text",text:e.textDelta},V.push(A)):A.text+=e.textDelta;break;case"reasoning-signature":if(t.enqueue(e),null==A)throw new Pye({chunk:e,message:"reasoning-signature without reasoning"});A.signature=e.signature,A=void 0;break;case"redacted-reasoning":t.enqueue(e),V.push({type:"redacted",data:e.data});break;case"tool-call":t.enqueue(e),q.push(e);break;case"tool-result":t.enqueue(e),H.push(e);break;case"response-metadata":re={id:null!=(n=e.id)?n:re.id,timestamp:null!=(r=e.timestamp)?r:re.timestamp,modelId:null!=(i=e.modelId)?i:re.modelId};break;case"finish":{J=e.usage,G=e.finishReason,I=e.experimental_providerMetadata,O=e.logprobs;let t=b()-$;B.addEvent("ai.stream.finish"),B.setAttributes({"ai.response.msToFinish":t,"ai.response.avgCompletionTokensPerSecond":1e3*J.completionTokens/t});break}case"file":W.push(e),t.enqueue(e);break;case"source":case"tool-call-streaming-start":case"tool-call-delta":t.enqueue(e);break;case"error":t.enqueue(e),G="error";break;default:throw new Error(`Unknown chunk type: ${o}`)}},async flush(e){let n=q.length>0?JSON.stringify(q):void 0,r="done";s+1<m&&(y&&"length"===G&&0===q.length?r="continue":q.length>0&&H.length===q.length&&(r="tool-result")),y&&ie.length>0&&("continue"!==r||"continue"===E&&!oe)&&(await le({controller:e,chunk:{type:"text-delta",textDelta:ie}}),ie="");try{B.setAttributes(Pme({telemetry:t,attributes:{"ai.response.finishReason":G,"ai.response.text":{output:()=>te},"ai.response.toolCalls":{output:()=>n},"ai.response.id":re.id,"ai.response.model":re.modelId,"ai.response.timestamp":re.timestamp.toISOString(),"ai.response.providerMetadata":JSON.stringify(I),"ai.usage.promptTokens":J.promptTokens,"ai.usage.completionTokens":J.completionTokens,"gen_ai.response.finish_reasons":[G],"gen_ai.response.id":re.id,"gen_ai.response.model":re.modelId,"gen_ai.usage.input_tokens":J.promptTokens,"gen_ai.usage.output_tokens":J.completionTokens}}))}catch{}finally{B.end()}e.enqueue({type:"step-finish",finishReason:G,usage:J,providerMetadata:I,experimental_providerMetadata:I,logprobs:O,request:U,response:{...re,headers:null==L?void 0:L.headers},warnings:F,isContinued:"continue"===r,messageId:T});let o=jge(f,J);if("done"===r)e.enqueue({type:"finish",finishReason:G,usage:o,providerMetadata:I,experimental_providerMetadata:I,logprobs:O,response:{...re,headers:null==L?void 0:L.headers}}),X.closeStream();else{if("continue"===E){let e=l[l.length-1];"string"==typeof e.content?e.content+=te:e.content.push({text:te,type:"text"})}else l.push(...Eye({text:te,files:W,reasoning:V,tools:u??{},toolCalls:q,toolResults:H,messageId:T,generateMessageId:x}));await i({currentStep:s+1,responseMessages:l,usage:o,stepType:r,previousStepText:ne,hasLeadingWhitespace:se,messageId:"continue"===r?T:x()})}}})))}({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:x()})}}).catch(e=>{X.addStream(new ReadableStream({start(t){t.enqueue({type:"error",error:e}),t.close()}})),X.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){let[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return Bge(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){"text-delta"===e.type&&t.enqueue(e.textDelta)}})))}get fullStream(){return Bge(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await async function({stream:e,onError:t}){let n=e.getReader();try{for(;;){let{done:e}=await n.read();if(e)break}}catch(B0){null==t||t(B0)}finally{n.releaseLock()}}({stream:this.fullStream,onError:null==e?void 0:e.onError})}catch(n){null==(t=null==e?void 0:e.onError)||t.call(e,n)}}get experimental_partialOutputStream(){if(null==this.output)throw new Kge;return Bge(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){null!=e&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:i=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(o,a)=>{let s=o.type;switch(s){case"text-delta":a.enqueue(uce("text",o.textDelta));break;case"reasoning":n&&a.enqueue(uce("reasoning",o.textDelta));break;case"redacted-reasoning":n&&a.enqueue(uce("redacted_reasoning",{data:o.data}));break;case"reasoning-signature":n&&a.enqueue(uce("reasoning_signature",{signature:o.signature}));break;case"file":a.enqueue(uce("file",{mimeType:o.mimeType,data:o.base64}));break;case"source":r&&a.enqueue(uce("source",o.source));break;case"tool-call-streaming-start":a.enqueue(uce("tool_call_streaming_start",{toolCallId:o.toolCallId,toolName:o.toolName}));break;case"tool-call-delta":a.enqueue(uce("tool_call_delta",{toolCallId:o.toolCallId,argsTextDelta:o.argsTextDelta}));break;case"tool-call":a.enqueue(uce("tool_call",{toolCallId:o.toolCallId,toolName:o.toolName,args:o.args}));break;case"tool-result":a.enqueue(uce("tool_result",{toolCallId:o.toolCallId,result:o.result}));break;case"error":a.enqueue(uce("error",e(o.error)));break;case"step-start":a.enqueue(uce("start_step",{messageId:o.messageId}));break;case"step-finish":a.enqueue(uce("finish_step",{finishReason:o.finishReason,usage:t?{promptTokens:o.usage.promptTokens,completionTokens:o.usage.completionTokens}:void 0,isContinued:o.isContinued}));break;case"finish":i&&a.enqueue(uce("finish_message",{finishReason:o.finishReason,usage:t?{promptTokens:o.usage.promptTokens,completionTokens:o.usage.completionTokens}:void 0}));break;default:throw new Error(`Unknown chunk type: ${s}`)}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:i,getErrorMessage:o,sendUsage:a,sendReasoning:s,sendSources:l,experimental_sendFinish:u}={}){fme({response:e,status:t,statusText:n,headers:dme(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:i,getErrorMessage:o,sendUsage:a,sendReasoning:s,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){fme({response:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,headers:dme(null==t?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){let t=this.toDataStreamInternal({getErrorMessage:null==e?void 0:e.getErrorMessage,sendUsage:null==e?void 0:e.sendUsage,sendReasoning:null==e?void 0:e.sendReasoning,sendSources:null==e?void 0:e.sendSources,experimental_sendFinish:null==e?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return(null==e?void 0:e.data)?Bye(null==e?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:null==t?void 0:t.sendUsage,sendReasoning:null==t?void 0:t.sendReasoning,sendSources:null==t?void 0:t.sendSources,experimental_sendFinish:null==t?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:i,sendUsage:o,sendReasoning:a,sendSources:s,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:i,sendUsage:o,sendReasoning:a,sendSources:s,experimental_sendFinish:l}),{status:t,statusText:n,headers:cme(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:null!=(t=null==e?void 0:e.status)?t:200,headers:cme(null==e?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},qye=sme.object({name:sme.string(),version:sme.string()}).passthrough(),Hye=sme.object({_meta:sme.optional(sme.object({}).passthrough())}).passthrough(),Vye=Hye,Wye=sme.object({method:sme.string(),params:sme.optional(Hye)}),Gye=sme.object({experimental:sme.optional(sme.object({}).passthrough()),logging:sme.optional(sme.object({}).passthrough()),prompts:sme.optional(sme.object({listChanged:sme.optional(sme.boolean())}).passthrough()),resources:sme.optional(sme.object({subscribe:sme.optional(sme.boolean()),listChanged:sme.optional(sme.boolean())}).passthrough()),tools:sme.optional(sme.object({listChanged:sme.optional(sme.boolean())}).passthrough())}).passthrough();Vye.extend({protocolVersion:sme.string(),capabilities:Gye,serverInfo:qye,instructions:sme.optional(sme.string())});var Yye=Vye.extend({nextCursor:sme.optional(sme.string())}),Kye=sme.object({name:sme.string(),description:sme.optional(sme.string()),inputSchema:sme.object({type:sme.literal("object"),properties:sme.optional(sme.object({}).passthrough())}).passthrough()}).passthrough();Yye.extend({tools:sme.array(Kye)});var Zye=sme.object({type:sme.literal("text"),text:sme.string()}).passthrough(),Qye=sme.object({type:sme.literal("image"),data:sme.string().base64(),mimeType:sme.string()}).passthrough(),Xye=sme.object({uri:sme.string(),mimeType:sme.optional(sme.string())}).passthrough(),Jye=Xye.extend({text:sme.string()}),eve=Xye.extend({blob:sme.string().base64()}),tve=sme.object({type:sme.literal("resource"),resource:sme.union([Jye,eve])}).passthrough();Vye.extend({content:sme.array(sme.union([Zye,Qye,tve])),isError:sme.boolean().default(!1).optional()}).or(Vye.extend({toolResult:sme.unknown()}));var nve="2.0",rve=sme.object({jsonrpc:sme.literal(nve),id:sme.union([sme.string(),sme.number().int()])}).merge(Wye).strict(),ive=sme.object({jsonrpc:sme.literal(nve),id:sme.union([sme.string(),sme.number().int()]),result:Vye}).strict(),ove=sme.object({jsonrpc:sme.literal(nve),id:sme.union([sme.string(),sme.number().int()]),error:sme.object({code:sme.number().int(),message:sme.string(),data:sme.optional(sme.unknown())})}).strict(),ave=sme.object({jsonrpc:sme.literal(nve)}).merge(sme.object({method:sme.string(),params:sme.optional(Hye)})).strict();sme.union([rve,ave,ive,ove]);function sve(e={}){let t=new TextEncoder,n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,i){i.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&"string"==typeof r&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function lve(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var n;"string"!=typeof e?"event"in e?"on_chat_model_stream"===e.event&&fve(null==(n=e.data)?void 0:n.chunk,t):fve(e,t):t.enqueue(e)}})).pipeThrough(sve(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(uce("text",e))}}))}function uve(e,t){return lve(e,t).pipeThrough(new TextEncoderStream)}function cve(e,t){var n;let r=lve(e,null==t?void 0:t.callbacks).pipeThrough(new TextEncoderStream),i=null==t?void 0:t.data,o=null==t?void 0:t.init,a=i?Bye(i.stream,r):r;return new Response(a,{status:null!=(n=null==o?void 0:o.status)?n:200,statusText:null==o?void 0:o.statusText,headers:cme(null==o?void 0:o.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function dve(e,t){t.dataStream.merge(lve(e,t.callbacks))}function fve(e,t){if("string"==typeof e.content)t.enqueue(e.content);else{let n=e.content;for(let e of n)"text"===e.type&&t.enqueue(e.text)}}ume({},{mergeIntoDataStream:()=>dve,toDataStream:()=>uve,toDataStreamResponse:()=>cve});function pve(e,t){let n=function(){let e=!0;return t=>(e&&((t=t.trimStart())&&(e=!1)),t)}();return function(e){return new ReadableStream({async pull(t){try{let{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(n(e.delta))}})).pipeThrough(sve(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(uce("text",e))}}))}function hve(e,t){return pve(e,t).pipeThrough(new TextEncoderStream)}function mve(e,t={}){var n;let{init:r,data:i,callbacks:o}=t,a=pve(e,o).pipeThrough(new TextEncoderStream),s=i?Bye(i.stream,a):a;return new Response(s,{status:null!=(n=null==r?void 0:r.status)?n:200,statusText:null==r?void 0:r.statusText,headers:cme(null==r?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function gve(e,t){t.dataStream.merge(pve(e,t.callbacks))}ume({},{mergeIntoDataStream:()=>gve,toDataStream:()=>hve,toDataStreamResponse:()=>mve});var yve=class{static async getInstance(){throw new Error("Method not implemented.")}static configure(e){throw new Error("Method not implemented.")}async close(){throw new Error("Method not implemented.")}stop(){throw new Error("Method not implemented.")}restart(){throw new Error("Method not implemented.")}async processImageMessage(e){throw new Error("Method not implemented.")}async translateVoiceToText(e){throw new Error("Method not implemented.")}async processTextMessage(e){throw new Error("Method not implemented.")}static registerTool(e){throw new Error("Method not implemented.")}async audioToText(e){throw new Error("Method not implemented.")}static async testConnection(e,t){throw new Error("Method not implemented.")}async temporaryPrompt(e){throw new Error("Method not implemented.")}static getToolResults(){throw new Error("Method not implemented.")}};function vve(e,t,n,r){let i=e[e.length-1];return!!(i&&e.length>t&&n>1&&function(e){return"tool"===e.role&&e.content.length>0}(i)&&r<n)}var bve=(e=class extends yve{constructor(){super(),this.toolSteps=0,this.streamMessage={parts:[]},this.messages=[],this.abortController=null}static async getInstance(){return e.instance||(e.instance=new e),e.instance}static configure(t){if(!t.chatEndpoint)throw new Error("chatEndpoint is required");e.chatEndpoint=t.chatEndpoint,t.voiceEndpoint&&(e.voiceEndpoint=t.voiceEndpoint),t.instructions&&(e.instructions=t.instructions),void 0!==t.temperature&&(e.temperature=t.temperature),void 0!==t.topP&&(e.topP=t.topP),t.description&&(e.description=t.description),t.maxTokens&&(e.maxTokens=t.maxTokens),void 0!==t.toolCallStreaming&&(e.toolCallStreaming=t.toolCallStreaming),t.headers&&(e.headers=t.headers)}static registerTool({name:t,tool:n,component:r}){e.tools[t]=n,e.toolComponent[t]=r}static addToolResult(t,n){e.toolResults[t]=n}static getToolResult(t){return e.toolResults[t]}getMessages(){return this.messages}addMessage(e){this.messages.push(e)}setMessages(e){this.messages=e}getComponents(){let t=[];return Object.keys(e.toolComponent).forEach(n=>{let r=e.toolComponent[n];r&&t.push({toolName:n,component:r})}),t}setAbortController(e){this.abortController=e}stop(){this.abortController&&(this.abortController.abort(),this.abortController=null)}restart(){this.stop(),this.messages=[]}static getBaseURL(){throw new Error("No base URL for VercelAi. It is a server-side only class.")}async processImageMessage({imageMessage:e,textMessage:t,streamMessageCallback:n}){await this.processTextMessage({textMessage:t,streamMessageCallback:n,imageMessage:e})}async processTextMessage({textMessage:e,streamMessageCallback:t,imageMessage:n,onToolFinished:r}){this.abortController||(this.abortController=new AbortController);let i=this.messages.length;if(!n&&e){let t={role:"user",content:e};this.messages.push(t)}else if(n&&e){let t={role:"user",content:[{type:"text",text:e},{type:"image",image:n}]};this.messages.push(t)}this.toolSteps=0,this.streamMessage={parts:[]},await this.triggerRequest({streamMessageCallback:t,onToolFinished:r}),t({deltaMessage:this.messages[this.messages.length-1].content,isCompleted:!0,message:this.streamMessage});let o=this.messages.slice(i);return{streamMessage:this.streamMessage,messages:o}}async triggerRequest({streamMessageCallback:t,imageMessage:n,onToolFinished:r}){let i=e.maxSteps,o=this.messages.length,a=this.messages[this.messages.length-1];return await async function({api:e,body:t,streamProtocol:n="data",credentials:r,headers:i,abortController:o,restoreMessagesOnFailure:a,onResponse:s,onUpdate:l,onFinish:u,onToolCall:c,generateId:d,fetch:f=hce(),lastMessage:p,requestType:h="generate"}){var m,g,y;const v="resume"===h?f(`${e}?chatId=${t.id}`,{method:"GET",headers:{"Content-Type":"application/json",...i},signal:null==(m=null==o?void 0:o())?void 0:m.signal,credentials:r}):f(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",...i},signal:null==(g=null==o?void 0:o())?void 0:g.signal,credentials:r}),b=await v.catch(e=>{throw e});if(s)try{await s(b)}catch(HOt){throw HOt}if(!b.ok)throw new Error(null!=(y=await b.text())?y:"Failed to fetch the chat response.");if(!b.body)throw new Error("The response body is empty.");switch(n){case"text":return void(await pce({stream:b.body,update:l,onFinish:u,generateId:d}));case"data":return void(await fce({stream:b.body,update:l,lastMessage:p,onToolCall:c,onFinish({message:e,finishReason:t,usage:n}){u&&null!=e&&u(e,{usage:n,finishReason:t})},generateId:d}));default:throw new Error(`Unknown stream protocol: ${n}`)}}({api:e.chatEndpoint,body:{message:a,...n?{imageBase64:n}:{},...e.hasInitializedServer?{}:{tools:e.tools,instructions:e.instructions}},streamProtocol:"data",credentials:"include",headers:e.headers,fetch:void 0,lastMessage:a,generateId:()=>Vne(),abortController:()=>this.abortController,restoreMessagesOnFailure:()=>{},onResponse:()=>{},onToolCall:async({toolCall:t})=>{var n;let r=await async function(e,t,n,r){let{toolName:i,args:o,toolCallId:a}=e,s=t[i];if(!s)throw new Error(`Tool ${i} not found`);if("function"!=typeof s.execute)throw new Error(`Tool ${i} does not have an execute function`);return await s.execute(o,{toolCallId:a,messages:n||[],abortSignal:r})}(t,e.tools,this.messages,null==(n=this.abortController)?void 0:n.signal);return JSON.stringify(r.result)},onUpdate:({message:e})=>{"assistant"===e.role&&t({deltaMessage:e.content,isCompleted:!1})},onFinish:t=>{e.hasInitializedServer=!0,this.messages.push(...bge([t]))}}),vve(this.messages,o,i,this.toolSteps)&&await this.triggerRequest({streamMessageCallback:t,onToolFinished:r}),{}}async audioToText({audioBlob:t}){if(!t)throw new Error("audioBlob is null");if(this.abortController||(this.abortController=new AbortController),!e.voiceEndpoint||""===e.voiceEndpoint)throw new Error("voiceEndpoint is not set");let n=new FormData;n.append("file",t,"audio.webm");let r=await(await fetch(e.voiceEndpoint,{method:"POST",body:n})).text();return JSON.parse(r).transcript}},e.chatEndpoint="",e.voiceEndpoint="",e.instructions="",e.toolChoice="auto",e.toolCallStreaming=!1,e.maxSteps=20,e.additionalContext="",e.temperature=0,e.topP=void 0,e.description="",e.maxTokens=128e3,e.hasInitializedServer=!1,e.headers={},e.tools={},e.toolComponent={},e.toolResults={},e.instance=null,e),wve=Jce(tde()),_ve=Object.defineProperty;function xve(e,t){return 1===e.length?[t.get(e.join(","))]:function(e,t){let n=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;n.length>1;){let r=null;for(let i=0;i<n.length-1;i++){let o=e.slice(n[i].start,n[i+1].end),a=t.get(o.join(","));null!=a&&(null==r||a<r[0])&&(r=[a,i])}if(null==r)break;{let e=r[1];n[e]={start:n[e].start,end:n[e+1].end},n.splice(e+1,1)}}return n}(e,t).map(n=>t.get(e.slice(n.start,n.end).join(","))).filter(e=>null!=e)}var Eve=class{constructor(e,t){u(this,"specialTokens"),u(this,"inverseSpecialTokens"),u(this,"patStr"),u(this,"textEncoder",new TextEncoder),u(this,"textDecoder",new TextDecoder("utf-8")),u(this,"rankMap",new Map),u(this,"textMap",new Map),this.patStr=e.pat_str;let n=e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{let[n,r,...i]=t.split(" "),o=Number.parseInt(r,10);return i.forEach((t,n)=>e[t]=o+n),e},{});for(let[r,i]of Object.entries(n)){let e=wve.default.toByteArray(r);this.rankMap.set(e.join(","),i),this.textMap.set(i,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,n])=>(e[n]=this.textEncoder.encode(t),e),{})}encode(e,t=[],n="all"){let r=new RegExp(this.patStr,"ug"),i=Eve.specialTokenRegex(Object.keys(this.specialTokens)),o=[],a=new Set("all"===t?Object.keys(this.specialTokens):t),s=new Set("all"===n?Object.keys(this.specialTokens).filter(e=>!a.has(e)):n);if(s.size>0){let t=Eve.specialTokenRegex([...s]),n=e.match(t);if(null!=n)throw new Error(`The text contains a special token that is not allowed: ${n[0]}`)}let l=0;for(;;){let t=null,n=l;for(;i.lastIndex=n,t=i.exec(e),null!=t&&!a.has(t[0]);)n=t.index+1;let s=(null==t?void 0:t.index)??e.length;for(let i of e.substring(l,s).matchAll(r)){let e=this.textEncoder.encode(i[0]),t=this.rankMap.get(e.join(","));null==t?o.push(...xve(e,this.rankMap)):o.push(t)}if(null==t)break;let u=this.specialTokens[t[0]];o.push(u),l=t.index+t[0].length}return o}decode(e){let t=[],n=0;for(let o=0;o<e.length;++o){let r=e[o],i=this.textMap.get(r)??this.inverseSpecialTokens[r];null!=i&&(t.push(i),n+=i.length)}let r=new Uint8Array(n),i=0;for(let o of t)r.set(o,i),i+=o.length;return this.textDecoder.decode(r)}},Sve=Eve;((e,t,n)=>{((e,t,n)=>{t in e?_ve(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,t+"",n)})(Sve,"specialTokenRegex",e=>new RegExp(e.map(e=>function(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}(e)).join("|"),"g"));var kve=[400,401,402,403,404,405,406,407,409],Tve=e=>{var t,n;if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name||"ECONNABORTED"===(null==e?void 0:e.code))throw e;let r=(null==(t=null==e?void 0:e.response)?void 0:t.status)??(null==e?void 0:e.status);if(r&&kve.includes(+r))throw e;if("insufficient_quota"===(null==(n=null==e?void 0:e.error)?void 0:n.code)){let t=new Error(null==e?void 0:e.message);throw t.name="InsufficientQuotaError",t}},Cve={},Ave=new class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??Tve;let t="default"in Hce?Hce.default:Hce;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>Ace(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((t,n)=>{var r;null==(r=e.signal)||r.addEventListener("abort",()=>{n(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}({});async function Ive(e){return async function(e){return e in Cve||(Cve[e]=Ave.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new Sve(e)).catch(t=>{throw delete Cve[e],t})),await Cve[e]}(function(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-preview":case"o1-preview-2024-09-12":case"o1-mini-2024-09-12":case"o3-mini":case"o3-mini-2025-01-31":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":return"o200k_base";default:throw new Error("Unknown model")}}(e))}var Ove=null;async function Nve(e){if(Ove||(Ove=await Ive("gpt-4")),"string"==typeof e)return Ove.encode(e).length;throw new Error(`Unsupported message content ${JSON.stringify(e)}`)}async function Dve(e){let t=0;for(let n of e)t+=await Rve(n);return t}async function Rve(e){let t=3;if(t+=3,t+=await Nve(e.role),"string"==typeof e.content?t+=await Nve(e.content):"object"==typeof e.content&&"type"in e.content&&("text"===e.content.type&&"text"in e.content?t+=await Nve(e.content.text):"image"===e.content.type&&"image"in e.content&&(t+=await Nve(e.content.image))),"id"in e&&e.id&&(t+=1+await Nve(e.id)),"toolInvocations"in e&&e.toolInvocations)for(let n of e.toolInvocations){let{toolName:e,args:r}=n;t+=await Nve(e),t+=await Nve(JSON.stringify(r)),"result"===n.state&&(t+=await Nve(n.result))}return t}var Mve=(t=class extends bve{constructor(){super(),this.llm=null}static getBaseURL(){throw new Error("No base URL for VercelAiClient. It is an abstract class.")}static checkModel(){if(!t.model||""===t.model.trim())throw new Error("LLM is not configured. Please call configure() first.")}static checkApiKey(){if(!t.apiKey||""===t.apiKey.trim())throw new Error("LLM is not configured. Please call configure() first.")}static configure(e){e.apiKey&&(t.apiKey=e.apiKey),e.model&&(t.model=e.model),e.instructions&&(t.instructions=e.instructions),void 0!==e.temperature&&(t.temperature=e.temperature),void 0!==e.topP&&(t.topP=e.topP),e.description&&(t.description=e.description),e.baseURL&&(t.baseURL=e.baseURL),e.toolChoice&&(t.toolChoice=e.toolChoice),void 0!==e.maxSteps&&(t.maxSteps=e.maxSteps),e.headers&&(t.headers=e.headers)}restart(){this.stop(),this.setMessages([]),this.llm=null,t.instance=null}async trimMessages(){let e=await Dve(this.messages);if(e+=await Dve([{role:"system",content:bve.instructions,id:"system"}]),bve.tools&&(e+=await Dve(Object.values(bve.tools).map(e=>({role:"assistant",content:JSON.stringify(e.parameters),id:"tool"})))),e<=bve.maxTokens)return this.messages;let t=this.messages.slice(0);if(e>bve.maxTokens)for(;t.length>0;){let n=t.shift();if(e-=await Dve([n]),e<=bve.maxTokens)break}return t}async handleToolCallStart(e,t,n,r){var i;let o={state:"call",toolCallId:e,toolName:t,args:n};null==(i=this.streamMessage.parts)||i.push({type:"tool-invocation",toolInvocation:o}),r&&r({deltaMessage:"",message:this.streamMessage,isCompleted:!1})}async handleToolCallFinish(e,t,n,r){var i,o;let a=null==(i=this.streamMessage.parts)?void 0:i.findLast(t=>"tool-invocation"===t.type&&t.toolInvocation.toolCallId===e);a.toolInvocation={...a.toolInvocation,state:"result",result:t};let s=null==(o=bve.toolResults)?void 0:o[e];s&&(a.additionalData=s),n({deltaMessage:"",message:this.streamMessage}),r&&r(e,s)}async handleTextStreaming(e,t,n){var r,i;0===t.length&&(null==(r=this.streamMessage.parts)||r.push({type:"text",text:""})),t+=e;let o=null==(i=this.streamMessage.parts)?void 0:i.findLast(e=>"text"===e.type);return o&&(o.text+=e),n({deltaMessage:t,message:this.streamMessage}),t}async triggerRequest({streamMessageCallback:e,onToolFinished:n}){var r;if(!this.llm)throw new Error("LLM instance is not initialized. Please call configure() first if you want to create a client LLM instance.");let i=[...this.getMessages()],o="",a={promptTokens:0,completionTokens:0,totalTokens:0},s=t.maxSteps||20,l=i.length,u=t.tools,{fullStream:c}=function({model:e,tools:t,toolChoice:n,system:r,prompt:i,messages:o,maxRetries:a,abortSignal:s,headers:l,maxSteps:u=1,experimental_generateMessageId:c=zye,experimental_output:d,experimental_continueSteps:f=!1,experimental_telemetry:p,experimental_providerMetadata:h,providerOptions:m=h,experimental_toolCallStreaming:g=!1,toolCallStreaming:y=g,experimental_activeTools:v,experimental_repairToolCall:b,experimental_transform:w,onChunk:_,onError:x,onFinish:E,onStepFinish:S,_internal:{now:k=Hge,generateId:T=$ye,currentDate:C=()=>new Date}={},...A}){if("string"==typeof e||"v1"!==e.specificationVersion)throw new hme;return new Uye({model:e,telemetry:p,headers:l,settings:A,maxRetries:a,abortSignal:s,system:r,prompt:i,messages:o,tools:t,toolChoice:n,toolCallStreaming:y,transforms:jye(w),activeTools:v,repairToolCall:b,maxSteps:u,output:d,continueSteps:f,providerOptions:m,onChunk:_,onError:x,onFinish:E,onStepFinish:S,now:k,currentDate:C,generateId:T,generateMessageId:c})}({model:this.llm,messages:i,tools:u,toolCallStreaming:!1,toolChoice:t.toolChoice,system:t.instructions,temperature:t.temperature,...void 0!==t.topP&&{topP:t.topP},maxSteps:s,abortSignal:null==(r=this.abortController)?void 0:r.signal,...Object.keys(t.headers).length>0&&{headers:t.headers},onStepFinish:async e=>{let{usage:t}=e;a.promptTokens=(null==t?void 0:t.promptTokens)||0,a.completionTokens=(null==t?void 0:t.completionTokens)||0,a.totalTokens=(null==t?void 0:t.totalTokens)||0,i.push(...e.response.messages)}});for await(let t of c)if("text-delta"===t.type)o=await this.handleTextStreaming(t.textDelta,o,e);else if("tool-call"===t.type)o="",this.toolSteps++,await this.handleToolCallStart(t.toolCallId,t.toolName,t.args,e);else if("tool-result"===t.type){let{toolCallId:r,result:i}=t;await this.handleToolCallFinish(r,i,e,n)}else if("reasoning"===t.type)o=await this.handleTextStreaming(t.textDelta,o,e);else if("error"===t.type){let e=`Error from Vercel AI API: ${t.error}`;throw t.error&&"object"==typeof t.error&&"responseBody"in t.error&&(e+=`\n${JSON.stringify(t.error.responseBody)}`),new Error(e)}return this.setMessages(i),vve(i,l,s,this.toolSteps)&&await this.triggerRequest({streamMessageCallback:e,onToolFinished:n}),{tokensUsed:a}}async audioToText({audioBlob:e}){if(!this.llm)throw new Error("LLM is not configured. Please call configure() first.");if(!e)throw new Error("audioBlob is null");this.abortController||(this.abortController=new AbortController);let t=await new File([e],"audio.webm").arrayBuffer();return(await Tye({model:this.llm,messages:[{role:"user",content:[{type:"text",text:"Translating audio to text, and return plain text based on the following schema: {text: content}"},{type:"file",data:t,mimeType:"audio/webm"}]}]})).text}async temporaryPrompt({prompt:e,temperature:n}){var r;return this.llm?(await Tye({model:this.llm,prompt:e,tools:t.tools,system:t.instructions,temperature:n||t.temperature,...void 0!==t.topP&&{topP:t.topP},abortSignal:null==(r=this.abortController)?void 0:r.signal,...Object.keys(t.headers).length>0&&{headers:t.headers}})).text:"LLM is not configured. Please call configure() first."}},t.apiKey="",t.model="",t.baseURL="",t.headers={},t.instance=null,t);async function Pve(e){let{finishReason:t}=await Tye({model:e,prompt:"Hello, world!"});return"stop"===t}var Fve="https://api.openai.com/v1",Lve=(n=class extends Mve{constructor(){if(super(),this.providerInstance=null,this.openaiClient=null,n.apiKey||n.baseURL!==Fve){let e={apiKey:n.apiKey,baseURL:n.baseURL,compatibility:n.baseURL===Fve?"strict":"compatible"};this.providerInstance=rie(e),this.llm=this.providerInstance(n.model,{structuredOutputs:!1,downloadImages:!0}),this.openaiClient=new hue({apiKey:n.apiKey,baseURL:n.baseURL,dangerouslyAllowBrowser:!0})}}static getBaseURL(){return n.baseURL}static configure(e){let t=e.model&&e.model!==n.model,r=e.baseURL&&e.baseURL!==n.baseURL;super.configure(e),e.baseURL&&(n.baseURL=e.baseURL),(t||r)&&n.instance&&n.instance.restart()}static async testConnection(e,t){let r=rie({apiKey:e,baseURL:n.baseURL,compatibility:n.baseURL===Fve?"strict":"compatible"});return await Pve(r(t))}static async getInstance(){if(null===n.instance&&(n.instance=new n),null===n.instance.llm)throw n.instance.restart(),new Error("OpenAIAssistant is not initialized");return n.instance}restart(){super.restart(),this.providerInstance=null,this.openaiClient=null,n.instance=null}async audioToText({audioBlob:e}){if(null===this.openaiClient)throw new Error("OpenAIClient is not initialized");if(!e)throw new Error("audioBlob is null");this.abortController||(this.abortController=new AbortController);let t=new File([e],"audio.webm");return(await this.openaiClient.audio.transcriptions.create({file:t,model:"whisper-1"},{signal:this.abortController.signal})).text}},n.baseURL=Fve,n.instance=null,n),jve="https://api.deepseek.com/v1",Bve=(r=class extends Mve{constructor(e){super(),this.providerInstance=null,this.initializeProvider(e)}static getBaseURL(){return r.baseURL}static configure(e){let t=e.model&&e.model!==r.model,n=e.baseURL&&e.baseURL!==r.baseURL;super.configure(e),e.baseURL&&(r.baseURL=e.baseURL),(t||n)&&r.instance&&r.instance.restart()}static async loadModule(){try{return await Cte(()=>Promise.resolve().then(()=>SAt),void 0,import.meta.url)}catch(e){throw new Error(`Failed to load @ai-sdk/deepseek: ${e}`)}}static async testConnection(e,t){let n=(await this.loadModule()).createDeepSeek({apiKey:e,baseURL:r.baseURL});return await Pve(n(t))}initializeProvider(e){if(r.apiKey||r.baseURL!==jve){let t={apiKey:r.apiKey,baseURL:r.baseURL};if(this.providerInstance=e.createDeepSeek(t),!this.providerInstance)throw new Error("Failed to initialize DeepSeek");this.llm=this.providerInstance(r.model)}}static async getInstance(){if(!r.instance){let e=await this.loadModule();r.instance=new r(e)}if(!r.instance.llm)throw r.instance.restart(),new Error("DeepSeekAssistant is not initialized");return r.instance}restart(){super.restart(),this.providerInstance=null,r.instance=null}},r.baseURL=jve,r.instance=null,r),$ve="https://generativelanguage.googleapis.com/v1beta",zve=(i=class extends Mve{constructor(e){super(),this.providerInstance=null,this.initializeProvider(e)}static getBaseURL(){return i.baseURL}static configure(e){let t=e.model&&e.model!==i.model,n=e.baseURL&&e.baseURL!==i.baseURL;super.configure(e),e.baseURL&&(i.baseURL=e.baseURL),(t||n)&&i.instance&&i.instance.restart()}static async loadModule(){try{return await Cte(()=>Promise.resolve().then(()=>GAt),void 0,import.meta.url)}catch(e){throw new Error(`Failed to load @ai-sdk/google: ${e}`)}}static async testConnection(e,t){let n=(await this.loadModule()).createGoogleGenerativeAI({apiKey:e,baseURL:i.baseURL});return await Pve(n(t))}initializeProvider(e){if(i.apiKey||i.baseURL!==$ve){let t={apiKey:i.apiKey,baseURL:i.baseURL};if(this.providerInstance=e.createGoogleGenerativeAI(t),!this.providerInstance)throw new Error("Failed to initialize Google");this.llm=this.providerInstance(i.model)}}static async getInstance(){if(!i.instance){let e=await this.loadModule();i.instance=new i(e)}if(!i.instance.llm)throw i.instance.restart(),new Error("GoogleAIAssistant is not initialized");return i.instance}restart(){super.restart(),this.providerInstance=null,i.instance=null}},i.baseURL=$ve,i.instance=null,i),Uve="https://api.grok.com/v1",qve=(o=class extends Mve{constructor(e){super(),this.providerInstance=null,this.initializeProvider(e)}static getBaseURL(){return o.baseURL}static configure(e){let t=e.model&&e.model!==o.model,n=e.baseURL&&e.baseURL!==o.baseURL;super.configure(e),e.baseURL&&(o.baseURL=e.baseURL),(t||n)&&o.instance&&o.instance.restart()}static async loadModule(){try{return await Cte(()=>Promise.resolve().then(()=>YAt),void 0,import.meta.url)}catch(e){throw new Error(`Failed to load @ai-sdk/xai: ${e}`)}}static async testConnection(e,t){let n=(await this.loadModule()).createXai({apiKey:e,baseURL:o.baseURL});return await Pve(n(t))}initializeProvider(e){if(o.apiKey||o.baseURL!==Uve){let t={apiKey:o.apiKey,baseURL:o.baseURL};if(this.providerInstance=e.createXai(t),!this.providerInstance)throw new Error("Failed to initialize Xai");this.llm=this.providerInstance(o.model)}}static async getInstance(){if(!o.instance){let e=await this.loadModule();o.instance=new o(e)}if(!o.instance.llm)throw o.instance.restart(),new Error("XaiAssistant is not initialized");return o.instance}restart(){super.restart(),this.providerInstance=null,o.instance=null}},o.baseURL=Uve,o.instance=null,o),Hve=(a=class extends Mve{constructor(e){super(),this.providerInstance=null,this.initializeProvider(e)}static checkBaseURL(){if(!a.baseURL||""===a.baseURL.trim())throw new Error("Base URL is not configured for Ollama. Please call configure() first.")}static getBaseURL(){return a.baseURL}static async loadModule(){try{return await Cte(()=>Promise.resolve().then(()=>TOt),void 0,import.meta.url)}catch(e){throw new Error(`Failed to load ollama-ai-provider-v2: ${e}`)}}static async testConnection(e,t){let n=(await this.loadModule()).createOllama({baseURL:a.baseURL});return await Pve(n(t))}static configure(e){let{baseURL:t,raw:n,...r}=e,i=t&&t!==a.baseURL,o=r.model&&r.model!==a.model;t&&(a.baseURL=t),n&&(a.raw=n),super.configure(r),(i||o)&&a.instance&&a.instance.restart()}initializeProvider(e){if(a.model){let t={baseURL:a.baseURL};this.providerInstance=e.createOllama(t),this.llm=this.providerInstance(a.model,{raw:a.raw})}}static async getInstance(){if(!a.instance){let e=await this.loadModule();a.instance=new a(e)}if(!a.instance.llm)throw a.instance.restart(),new Error("OllamaAssistant is not initialized");return a.instance}restart(){super.restart(),this.providerInstance=null,a.instance=null}},a.baseURL="http://127.0.0.1:11434/api",a.raw=!1,a.instance=null,a),Vve="https://api.anthropic.com/v1",Wve=(s=class extends Mve{constructor(e){super(),this.providerInstance=null,this.initializeProvider(e)}static getBaseURL(){return s.baseURL}static configure(e){let t=e.model&&e.model!==s.model,n=e.baseURL&&e.baseURL!==s.baseURL;super.configure(e),e.baseURL&&(s.baseURL=e.baseURL),(t||n)&&s.instance&&s.instance.restart()}static async loadModule(){try{return await Cte(()=>Promise.resolve().then(()=>qOt),void 0,import.meta.url)}catch(e){throw new Error(`Failed to load @ai-sdk/anthropic: ${e}`)}}static async testConnection(e,t){let n=(await this.loadModule()).createAnthropic({apiKey:e,baseURL:s.baseURL,headers:s.headers});return await Pve(n(t))}initializeProvider(e){if(s.apiKey||s.baseURL!==Vve){let t={apiKey:s.apiKey,baseURL:s.baseURL,headers:s.headers};if(this.providerInstance=e.createAnthropic(t),!this.providerInstance)throw new Error("Failed to initialize Anthropic");this.llm=this.providerInstance(s.model)}}static async getInstance(){if(!s.instance){let e=await this.loadModule();s.instance=new s(e)}if(!s.instance.llm)throw s.instance.restart(),new Error("AnthropicAssistant is not initialized");return s.instance}restart(){super.restart(),this.providerInstance=null,s.instance=null}},s.baseURL=Vve,s.headers={"anthropic-dangerous-direct-browser-access":"true"},s.instance=null,s);sme.object({toolName:sme.string(),toolCallId:sme.string(),toolOutput:sme.unknown(),args:sme.record(sme.unknown()),isCompleted:sme.boolean(),text:sme.string().optional()});var Gve=sme.union([sme.object({type:sme.literal("text"),text:sme.string(),additionalData:sme.any().optional(),isCompleted:sme.boolean().optional()}),sme.object({type:sme.literal("tool-invocation"),toolInvocation:sme.object({toolCallId:sme.string(),toolName:sme.string(),args:sme.any(),state:sme.string(),result:sme.any().optional()}),additionalData:sme.any().optional(),isCompleted:sme.boolean().optional()}),sme.object({type:sme.string(),additionalData:sme.any().optional(),isCompleted:sme.boolean().optional()}).passthrough()]),Yve=sme.object({parts:sme.array(Gve).optional()});async function Kve(e){let t=function({provider:e,chatEndpoint:t}){if(t)return bve;switch(null==e?void 0:e.toLowerCase()){case"openai":default:return Lve;case"anthropic":return Wve;case"google":return zve;case"deepseek":return Bve;case"xai":return qve;case"ollama":return Hve}}({provider:e.modelProvider,chatEndpoint:e.chatEndpoint});t.configure({chatEndpoint:e.chatEndpoint,voiceEndpoint:e.voiceEndpoint,model:e.model,apiKey:e.apiKey,instructions:e.instructions,temperature:e.temperature,topP:e.topP,description:e.description,version:e.version,toolChoice:e.toolChoice,maxSteps:e.maxSteps,toolCallStreaming:e.toolCallStreaming,...e.baseUrl?{baseURL:e.baseUrl}:{},...e.headers?{headers:e.headers}:{},...e.raw?{raw:e.raw}:{}});let n=e.tools;n&&Object.keys(n).forEach(e=>{let r=n[e];if(function(e){return"context"in e||"onToolCompleted"in e||"component"in e}(r)){let{execute:n,context:i,component:o,onToolCompleted:a,...s}=r,l={...s,execute:async(r,o)=>{let{toolCallId:s}=o;try{let e=await n(r,{...o,context:i}),{additionalData:l,llmResult:u}=e;return l&&s&&(t.addToolResult(s,l),a&&a(s,l)),u}catch(l){return{success:!1,error:`Execute tool ${e} failed: ${l}`}}}};t.registerTool({name:e,tool:l,component:o})}else t.registerTool({name:e,tool:r})});let r=await t.getInstance();return e.historyMessages&&e.historyMessages.length>0&&0===r.getMessages().length&&r.setMessages(bge(e.historyMessages)),e.abortController&&r.setAbortController(e.abortController),r}sme.object({prompt:sme.string(),response:Yve});var Zve="__openassistant_cache__",Qve=(()=>{if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;throw new Error("Unable to locate global object")})();Qve[Zve]||(Qve[Zve]={data:{},get(e){return this.data[e]},set(e,t){this.data[e]=t},delete(e){delete this.data[e]}}),Qve[Zve];
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const Xve=(...e)=>e.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim();
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var Jve={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ebe=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:a,...s},l)=>k.createElement("svg",{ref:l,...Jve,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:Xve("lucide",i),...s},[...a.map(([e,t])=>k.createElement(e,t)),...Array.isArray(o)?o:[o]])),tbe=(e,t)=>{const n=k.forwardRef(({className:n,...r},i)=>{return k.createElement(ebe,{ref:i,iconNode:t,className:Xve(`lucide-${o=e,o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...r});var o});return n.displayName=`${e}`,n},nbe=tbe("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),rbe=tbe("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ibe=tbe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),obe=tbe("SquareTerminal",[["path",{d:"m7 11 2-2-2-2",key:"1lz0vl"}],["path",{d:"M11 13h4",key:"1p7l4v"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}]]),abe=tbe("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),sbe=tbe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lbe=tbe("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),ube=tbe("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);
/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function cbe({title:e,sqlQuery:t}){const n=Jx();return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"text-muted-foreground bg-muted relative max-h-[150px] w-full overflow-auto rounded-md p-2 font-mono text-xs",children:[w.jsx("pre",{className:"whitespace-pre-wrap break-words pr-8",children:t}),w.jsx("div",{className:"absolute right-1 top-1",children:w.jsx(px,{text:t,variant:"ghost",size:"icon",className:"h-6 w-6",ariaLabel:"Copy SQL"})})]}),w.jsx("div",{className:"flex items-center gap-2",children:w.jsxs(er,{variant:"ghost",size:"sm",onClick:n.onOpen,children:[w.jsx(abe,{className:"h-4 w-4"}),w.jsx("h3",{className:"ml-1 text-xs",children:"Show Query Result"})]})}),w.jsx(j9,{title:e,query:t,tableModal:n})]})}const dbe=oA({type:dA("query"),sqlQuery:XC(),reasoning:XC()}),fbe=oA({error:XC()}),pbe=hA(e=>{if(e&&"object"==typeof e&&"toolCallMessages"in e&&"parts"in e){const t=e.parts,n=[];for(const e of t)if("text"===e.type){const t=e.text;n.push({type:"text",text:t})}else if("tool"===e.type){const t=e.toolCallMessages;for(const e of t){const t=e.toolCallId,r=e.toolName,i=e.args,o=e.isCompleted,a=e.llmResult,s=e.additionalData,l={toolCallId:t,toolName:r,args:i,state:o?"result":"call",result:a};n.push({type:"tool-invocation",toolInvocation:l,additionalData:s,isCompleted:o})}}return{parts:n}}return e},oA({parts:iA(Gve).optional()})),hbe=oA({id:XC().cuid2(),prompt:XC(),streamMessage:pbe,errorMessage:fbe.optional(),isCompleted:eA()}),mbe=hA(e=>{if(e&&"object"==typeof e&&"ollamaBaseUrl"in e&&!("baseUrl"in e)){const{ollamaBaseUrl:t,...n}=e;return{...n,baseUrl:t}}return e},oA({id:XC().cuid2(),name:XC(),modelProvider:XC(),model:XC(),customModelName:XC().optional(),baseUrl:XC().optional(),analysisResults:iA(hbe),createdAt:mA().optional()}));var gbe=Object.defineProperty,ybe=(e,t)=>{for(var n in t)gbe(e,n,{get:t[n],enumerable:!0})};function vbe(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(null!=e?e:{});return r.has("Content-Type")||r.set("Content-Type",t),r.set("X-Vercel-AI-Data-Stream",n),r}var bbe,wbe="AI_NoObjectGeneratedError",_be=`vercel.ai.error.${wbe}`,xbe=Symbol.for(_be),Ebe=class extends Rte{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:i,finishReason:o}){super({name:wbe,message:e,cause:t}),this[bbe]=!0,this.text=n,this.response=r,this.usage=i,this.finishReason=o}static isInstance(e){return Rte.hasMarker(e,_be)}};bbe=xbe;var Sbe,kbe="AI_InvalidDataContentError",Tbe=`vercel.ai.error.${kbe}`,Cbe=Symbol.for(Tbe),Abe=class extends Rte{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:kbe,message:n,cause:t}),this[Sbe]=!0,this.content=e}static isInstance(e){return Rte.hasMarker(e,Tbe)}};Sbe=Cbe;var Ibe=aA([XC(),QC(Uint8Array),QC(ArrayBuffer),YC(e=>{var t,n;return null!=(n=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&n},{message:"Must be a Buffer"})]);function Obe(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return cre(e)}catch(t){throw new Abe({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new Abe({content:e})}function Nbe(e){try{return(new TextDecoder).decode(e)}catch(t){throw new Error("Error decoding Uint8Array to text")}}function Dbe(e){var t,n,r;const i=[];for(const a of e){let e;try{e=new URL(a.url)}catch(o){throw new Error(`Invalid URL: ${a.url}`)}switch(e.protocol){case"http:":case"https:":if(null==(t=a.contentType)?void 0:t.startsWith("image/"))i.push({type:"image",image:e});else{if(!a.contentType)throw new Error("If the attachment is not an image, it must specify a content type");i.push({type:"file",data:e,mimeType:a.contentType})}break;case"data:":{let e,t,s;try{[e,t]=a.url.split(","),s=e.split(";")[0].split(":")[1]}catch(o){throw new Error(`Error processing data URL: ${a.url}`)}if(null==s||null==t)throw new Error(`Invalid data URL format: ${a.url}`);if(null==(n=a.contentType)?void 0:n.startsWith("image/"))i.push({type:"image",image:Obe(t)});else if(null==(r=a.contentType)?void 0:r.startsWith("text/"))i.push({type:"text",text:Nbe(Obe(t))});else{if(!a.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");i.push({type:"file",data:t,mimeType:a.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${e.protocol}`)}}return i}var Rbe,Mbe="AI_MessageConversionError",Pbe=`vercel.ai.error.${Mbe}`,Fbe=Symbol.for(Pbe),Lbe=class extends Rte{constructor({originalMessage:e,message:t}){super({name:Mbe,message:t}),this[Rbe]=!0,this.originalMessage=e}static isInstance(e){return Rte.hasMarker(e,Pbe)}};Rbe=Fbe;var jbe=cA(()=>aA([tA(),XC(),JC(),eA(),uA(XC(),jbe),iA(jbe)])),Bbe=uA(XC(),uA(XC(),jbe)),$be=iA(aA([oA({type:dA("text"),text:XC()}),oA({type:dA("image"),data:XC(),mimeType:XC().optional()})])),zbe=oA({type:dA("text"),text:XC(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Ube=oA({type:dA("image"),image:aA([Ibe,QC(URL)]),mimeType:XC().optional(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),qbe=oA({type:dA("file"),data:aA([Ibe,QC(URL)]),filename:XC().optional(),mimeType:XC(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Hbe=oA({type:dA("reasoning"),text:XC(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Vbe=oA({type:dA("redacted-reasoning"),data:XC(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Wbe=oA({type:dA("tool-call"),toolCallId:XC(),toolName:XC(),args:rA(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Gbe=oA({type:dA("tool-result"),toolCallId:XC(),toolName:XC(),result:rA(),content:$be.optional(),isError:eA().optional(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Ybe=oA({role:dA("system"),content:XC(),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Kbe=oA({role:dA("user"),content:aA([XC(),iA(aA([zbe,Ube,qbe]))]),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Zbe=oA({role:dA("assistant"),content:aA([XC(),iA(aA([zbe,qbe,Hbe,Vbe,Wbe]))]),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()}),Qbe=oA({role:dA("tool"),content:iA(Gbe),providerOptions:Bbe.optional(),experimental_providerMetadata:Bbe.optional()});aA([Ybe,Kbe,Zbe,Qbe]);Hne({prefix:"aiobj",size:24}),Hne({prefix:"aiobj",size:24}),Hne({prefix:"aitxt",size:24}),Hne({prefix:"msg",size:24});ybe({},{object:()=>Jbe,text:()=>Xbe});var Xbe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt:({system:e})=>e,parsePartial:({text:e})=>({partial:e}),parseOutput:({text:e})=>e}),Jbe=({schema:e})=>{const t=yce(e);return{type:"object",responseFormat:({model:e})=>({type:"json",schema:e.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt:({system:e,model:n})=>n.supportsStructuredOutputs?e:function({prompt:e,schema:t,schemaPrefix:n=(null!=t?"JSON schema:":void 0),schemaSuffix:r=(null!=t?"You MUST answer with a JSON object that matches the JSON schema above.":"You MUST answer with JSON.")}){return[null!=e&&e.length>0?e:void 0,null!=e&&e.length>0?"":void 0,n,null!=t?JSON.stringify(t):void 0,r].filter(e=>null!=e).join("\n")}({prompt:e,schema:t.jsonSchema}),parsePartial({text:e}){const t=ice(e);switch(t.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:t.value};default:{const e=t.state;throw new Error(`Unsupported parse state: ${e}`)}}},parseOutput({text:e},n){const r=Xne({text:e});if(!r.success)throw new Ebe({message:"No object generated: could not parse the response.",cause:r.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});const i=Zne({value:r.value,schema:t});if(!i.success)throw new Ebe({message:"No object generated: response did not match schema.",cause:i.error,text:e,response:n.response,usage:n.usage,finishReason:n.finishReason});return i.value}}};function ewe(e,t){const n=e.getReader(),r=t.getReader();let i,o,a=!1,s=!1;async function l(e){try{null==i&&(i=n.read());const t=await i;i=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==o&&(o=r.read());const t=await o;o=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(a)return void(await u(e));if(s)return void(await l(e));null==i&&(i=n.read()),null==o&&(o=r.read());const{result:t,reader:c}=await Promise.race([i.then(e=>({result:e,reader:n})),o.then(e=>({result:e,reader:r}))]);t.done||e.enqueue(t.value),c===n?(i=void 0,t.done&&(await u(e),a=!0)):(o=void 0,t.done&&(s=!0,await l(e)))}catch(t){e.error(t)}},cancel(){n.cancel(),r.cancel()}})}Hne({prefix:"aitxt",size:24}),Hne({prefix:"msg",size:24});var twe=oA({name:XC(),version:XC()}).passthrough(),nwe=oA({_meta:pA(oA({}).passthrough())}).passthrough(),rwe=nwe,iwe=oA({method:XC(),params:pA(nwe)}),owe=oA({experimental:pA(oA({}).passthrough()),logging:pA(oA({}).passthrough()),prompts:pA(oA({listChanged:pA(eA())}).passthrough()),resources:pA(oA({subscribe:pA(eA()),listChanged:pA(eA())}).passthrough()),tools:pA(oA({listChanged:pA(eA())}).passthrough())}).passthrough();rwe.extend({protocolVersion:XC(),capabilities:owe,serverInfo:twe,instructions:pA(XC())});var awe=rwe.extend({nextCursor:pA(XC())}),swe=oA({name:XC(),description:pA(XC()),inputSchema:oA({type:dA("object"),properties:pA(oA({}).passthrough())}).passthrough()}).passthrough();awe.extend({tools:iA(swe)});var lwe=oA({type:dA("text"),text:XC()}).passthrough(),uwe=oA({type:dA("image"),data:XC().base64(),mimeType:XC()}).passthrough(),cwe=oA({uri:XC(),mimeType:pA(XC())}).passthrough(),dwe=cwe.extend({text:XC()}),fwe=cwe.extend({blob:XC().base64()}),pwe=oA({type:dA("resource"),resource:aA([dwe,fwe])}).passthrough();rwe.extend({content:iA(aA([lwe,uwe,pwe])),isError:eA().default(!1).optional()}).or(rwe.extend({toolResult:rA()}));var hwe="2.0",mwe=oA({jsonrpc:dA(hwe),id:aA([XC(),JC().int()])}).merge(iwe).strict(),gwe=oA({jsonrpc:dA(hwe),id:aA([XC(),JC().int()]),result:rwe}).strict(),ywe=oA({jsonrpc:dA(hwe),id:aA([XC(),JC().int()]),error:oA({code:JC().int(),message:XC(),data:pA(rA())})}).strict(),vwe=oA({jsonrpc:dA(hwe)}).merge(oA({method:XC(),params:pA(nwe)})).strict();aA([mwe,vwe,gwe,ywe]);function bwe(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,i){i.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&"string"==typeof r&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function wwe(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var n;"string"!=typeof e?"event"in e?"on_chat_model_stream"===e.event&&Swe(null==(n=e.data)?void 0:n.chunk,t):Swe(e,t):t.enqueue(e)}})).pipeThrough(bwe(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(uce("text",e))}}))}function _we(e,t){return wwe(e,t).pipeThrough(new TextEncoderStream)}function xwe(e,t){var n;const r=wwe(e,null==t?void 0:t.callbacks).pipeThrough(new TextEncoderStream),i=null==t?void 0:t.data,o=null==t?void 0:t.init,a=i?ewe(i.stream,r):r;return new Response(a,{status:null!=(n=null==o?void 0:o.status)?n:200,statusText:null==o?void 0:o.statusText,headers:vbe(null==o?void 0:o.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Ewe(e,t){t.dataStream.merge(wwe(e,t.callbacks))}function Swe(e,t){if("string"==typeof e.content)t.enqueue(e.content);else{const n=e.content;for(const e of n)"text"===e.type&&t.enqueue(e.text)}}ybe({},{mergeIntoDataStream:()=>Ewe,toDataStream:()=>_we,toDataStreamResponse:()=>xwe});function kwe(e,t){const n=function(){let e=!0;return t=>(e&&(t=t.trimStart())&&(e=!1),t)}();return(r=e[Symbol.asyncIterator](),new ReadableStream({async pull(e){try{const{value:t,done:n}=await r.next();n?e.close():e.enqueue(t)}catch(t){e.error(t)}},cancel(){}})).pipeThrough(new TransformStream({async transform(e,t){t.enqueue(n(e.delta))}})).pipeThrough(bwe(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(e,t)=>{t.enqueue(uce("text",e))}}));var r}function Twe(e,t){return kwe(e,t).pipeThrough(new TextEncoderStream)}function Cwe(e,t={}){var n;const{init:r,data:i,callbacks:o}=t,a=kwe(e,o).pipeThrough(new TextEncoderStream),s=i?ewe(i.stream,a):a;return new Response(s,{status:null!=(n=null==r?void 0:r.status)?n:200,statusText:null==r?void 0:r.statusText,headers:vbe(null==r?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Awe(e,t){t.dataStream.merge(kwe(e,t.callbacks))}ybe({},{mergeIntoDataStream:()=>Awe,toDataStream:()=>Twe,toDataStreamResponse:()=>Cwe});async function Iwe({name:e="sqlrooms-ai",tableSchemas:t,modelProvider:n,model:r,customModelName:i,apiKey:o,prompt:a,abortController:s,historyAnalysis:l,onStreamResult:u,maxSteps:c=5,tools:d={},getInstructions:f,baseUrl:p}){const h="custom"===r&&i?i:r,m=await Kve({modelProvider:n,model:h,apiKey:o,version:"v1",instructions:f?f(t):(g=t,`\nYou are analyzing tables in DuckDB database in the context of a room.\n\nInstructions for analysis:\n- When using 'query' tool, please assign parameter 'type' with value 'query'\n- Use DuckDB-specific SQL syntax and functions (not Oracle, PostgreSQL, or other SQL dialects)\n- Some key DuckDB-specific functions to use:\n  * regexp_matches() for regex (not regexp_like)\n  * strftime() for date formatting (not to_char)\n  * list_aggregate() for array operations\n  * unnest() for array expansion\n  * regr_sxy()\n  * corr()\n  * skewness()\n- Please always try to use SQL queries to answer users questions\n- Please run tool calls sequentially, don't run multiple tool calls in parallel\n- IMPORTANT: Do not list out raw query results in your response. Instead:\n  * Describe the results in natural language\n  * Provide summary statistics\n  * Use comparisons and relative terms\n  * Include only the most relevant values if necessary\n- Break down complex problems into smaller steps\n- Use "SUMMARIZE table_name"for quick overview of the table\n- Please don't modify data\n- IMPORTANT: When you receive an error response from a tool call (where success: false):\n  * Stop making any further tool calls immediately\n  * Return a final answer that includes the error message\n  * Explain what went wrong and suggest possible fixes if applicable\n\nWhen creating visualizations:\n- Follow VegaLite syntax\n- Choose appropriate chart types based on the data and analysis goals\n- Use clear titles and axis labels\n- Consider color schemes for better readability\n- Add meaningful tooltips when relevant\n- Format numbers and dates appropriately\n- Use aggregations when dealing with large datasets\n\nFor your final answer:\n- Provide an explanation for how you got it\n- Explain your reasoning step by step\n- Include relevant statistics or metrics\n- For each prompt, please always provide the final answer.\n- IMPORTANT: Query tool results may include sample rows (firstRows) or may be empty:\n  * If no sample rows provided: Never fabricate data. Direct users to the table component for actual results.\n  * If sample rows provided: Use them to enhance your analysis, but always direct users to the table component for complete results.\n\nPlease use the following schema for the tables:\n\n${JSON.stringify(g)}`),tools:d,temperature:0,toolChoice:"auto",maxSteps:c,...s?{abortController:s}:{},baseUrl:p});var g;if(l){const e=function(e){var t;let n=[];for(let r of e){n.push({id:Mde(),role:"user",content:r.prompt,parts:[{type:"text",text:r.prompt}]});for(let e of(null==(t=r.response)?void 0:t.parts)||[])n.push({id:Mde(),role:"assistant",content:"",parts:[e]})}return n}(l.map(e=>({prompt:e.prompt,response:e.streamMessage})));m.setMessages(function(e){var t;const n={},r=[];for(let i=0;i<e.length;i++){const o=e[i],a=i===e.length-1,{role:s,content:l,experimental_attachments:u}=o;switch(s){case"system":r.push({role:"system",content:l});break;case"user":if(null==o.parts)r.push({role:"user",content:u?[{type:"text",text:l},...Dbe(u)]:l});else{const e=o.parts.filter(e=>"text"===e.type).map(e=>({type:"text",text:e.text}));r.push({role:"user",content:u?[...e,...Dbe(u)]:e})}break;case"assistant":{if(null!=o.parts){let e=function(){const e=[];for(const n of s)switch(n.type){case"file":case"text":e.push(n);break;case"reasoning":for(const t of n.details)switch(t.type){case"text":e.push({type:"reasoning",text:t.text,signature:t.signature});break;case"redacted":e.push({type:"redacted-reasoning",data:t.data})}break;case"tool-invocation":e.push({type:"tool-call",toolCallId:n.toolInvocation.toolCallId,toolName:n.toolInvocation.toolName,args:n.toolInvocation.args});break;default:throw new Error(`Unsupported part: ${n}`)}r.push({role:"assistant",content:e});const t=s.filter(e=>"tool-invocation"===e.type).map(e=>e.toolInvocation);t.length>0&&r.push({role:"tool",content:t.map(e=>{if(!("result"in e))throw new Lbe({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(e)});const{toolCallId:t,toolName:r,result:i}=e,a=n[r];return null!=(null==a?void 0:a.experimental_toToolResultContent)?{type:"tool-result",toolCallId:t,toolName:r,result:a.experimental_toToolResultContent(i),experimental_content:a.experimental_toToolResultContent(i)}:{type:"tool-result",toolCallId:t,toolName:r,result:i}})}),s=[],a=!1,i++},i=0,a=!1,s=[];for(const n of o.parts)switch(n.type){case"text":a&&e(),s.push(n);break;case"file":case"reasoning":s.push(n);break;case"tool-invocation":(null!=(t=n.toolInvocation.step)?t:0)!==i&&e(),s.push(n),a=!0}e();break}const e=o.toolInvocations;if(null==e||0===e.length){r.push({role:"assistant",content:l});break}const i=e.reduce((e,t)=>{var n;return Math.max(e,null!=(n=t.step)?n:0)},0);for(let t=0;t<=i;t++){const i=e.filter(e=>{var n;return(null!=(n=e.step)?n:0)===t});0!==i.length&&(r.push({role:"assistant",content:[...a&&l&&0===t?[{type:"text",text:l}]:[],...i.map(({toolCallId:e,toolName:t,args:n})=>({type:"tool-call",toolCallId:e,toolName:t,args:n}))]}),r.push({role:"tool",content:i.map(e=>{if(!("result"in e))throw new Lbe({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(e)});const{toolCallId:t,toolName:r,result:i}=e,a=n[r];return null!=(null==a?void 0:a.experimental_toToolResultContent)?{type:"tool-result",toolCallId:t,toolName:r,result:a.experimental_toToolResultContent(i),experimental_content:a.experimental_toToolResultContent(i)}:{type:"tool-result",toolCallId:t,toolName:r,result:i}})}))}l&&!a&&r.push({role:"assistant",content:l});break}case"data":break;default:throw new Lbe({originalMessage:o,message:`Unsupported role: ${s}`})}}return r}(e))}return await m.processTextMessage({textMessage:a,streamMessageCallback:({isCompleted:e,message:t})=>{u(e??!1,t)}})}function Owe(e,t=0){return{query:{description:"A tool for running SQL queries on the tables in the database.\nPlease only run one query at a time.\nIf a query fails, please don't try to run it again with the same syntax.",parameters:dbe,execute:async({type:n,sqlQuery:r})=>{try{const i=await e.getState().db.getConnector(),o=await i.query(r),a=r.toLowerCase().includes("summarize")?n8(o):await async function(e,t){if(!t.toLowerCase().trim().startsWith("select"))return null;try{const n=`temp_result_${Date.now()}`;await e.query(`CREATE TEMPORARY VIEW ${n} AS ${t}`);const r=n8(await e.query(`SUMMARIZE ${n}`));return await e.query(`DROP VIEW IF EXISTS ${n}`),r}catch(n){return null}}(i,r),s=t>0?n8(o.slice(0,t)):[];return{llmResult:{success:!0,data:{type:n,summary:a,...t>0?{firstRows:s}:{}}},additionalData:{title:"Query Result",sqlQuery:r}}}catch(i){return{llmResult:{success:!1,details:"Query execution failed.",errorMessage:i instanceof Error?i.message:"Unknown error"}}}},component:cbe}}}const Nwe=oA({ai:oA({sessions:iA(mbe),currentSessionId:XC().optional()})});function Dwe(e){const t=kte.createId();return{ai:{sessions:[{id:t,name:"Default Session",modelProvider:"openai",model:"gpt-4o-mini",analysisResults:[],createdAt:new Date}],currentSessionId:t,...e}}}function Rwe(e){const{getApiKey:t,baseUrl:n,initialAnalysisPrompt:r="",customTools:i={},getInstructions:o,numberOfRowsToShareWithLLM:a,defaultModel:s="gpt-4o-mini"}=e;return p8((e,l,u)=>({ai:{analysisPrompt:r,isRunningAnalysis:!1,tools:{...Owe(u,a),...i},setAnalysisPrompt:t=>{e(e=>hT(e,e=>{e.ai.analysisPrompt=t}))},setAiModel:(t,n)=>{e(e=>hT(e,e=>{const r=Mwe(e);r&&(r.modelProvider=t,r.model=n)}))},setCustomModelName:t=>{e(e=>hT(e,e=>{const n=Mwe(e);n&&(n.customModelName=t)}))},setBaseUrl:t=>{e(e=>hT(e,e=>{const n=Mwe(e);n&&(n.baseUrl=t)}))},getCurrentSession:()=>{const e=l(),{currentSessionId:t,sessions:n}=e.config.ai;return n.find(e=>e.id===t)},createSession:(t,n,r)=>{const i=l().ai.getCurrentSession(),o=kte.createId();let a=t;if(!a){const e=new Date,t=e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),n=e.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0});a=`Session ${t} at ${n}`}e(e=>hT(e,e=>{e.config.ai.sessions.unshift({id:o,name:a,modelProvider:n||(null==i?void 0:i.modelProvider)||"openai",model:r||(null==i?void 0:i.model)||"gpt-4.1",analysisResults:[],createdAt:new Date}),e.config.ai.currentSessionId=o}))},switchSession:t=>{e(e=>hT(e,e=>{e.config.ai.currentSessionId=t}))},renameSession:(t,n)=>{e(e=>hT(e,e=>{const r=e.config.ai.sessions.find(e=>e.id===t);r&&(r.name=n)}))},deleteSession:t=>{e(e=>hT(e,e=>{const n=e.config.ai.sessions.findIndex(e=>e.id===t);if(-1!==n&&e.config.ai.sessions.length>1&&(e.config.ai.sessions.splice(n,1),e.config.ai.currentSessionId===t&&e.config.ai.sessions.length>0)){const t=e.config.ai.sessions[0];t&&(e.config.ai.currentSessionId=t.id)}}))},startAnalysis:async()=>{const r=kte.createId(),c=new AbortController,d=l().ai.getCurrentSession();if(d){e(e=>hT(e,e=>{e.ai.analysisAbortController=c,e.ai.isRunningAnalysis=!0;const t=e.config.ai.sessions.find(t=>t.id===e.config.ai.currentSessionId);t&&t.analysisResults.push({id:r,prompt:l().ai.analysisPrompt,streamMessage:{parts:[{type:"text",text:""}]},isCompleted:!1})}));try{await Iwe({tableSchemas:l().db.tables,modelProvider:d.modelProvider||"openai",model:d.model||s,customModelName:d.customModelName,apiKey:(null==t?void 0:t(d.modelProvider||"openai"))||"",baseUrl:d.baseUrl||n,prompt:l().ai.analysisPrompt,abortController:c,tools:{...Owe(u,a),...i},getInstructions:o,onStreamResult:(t,n)=>{e(Pwe({resultId:r,streamMessage:n,isCompleted:t}))}})}catch(HOt){e(Pwe({resultId:r,isCompleted:!0,errorMessage:{error:HOt instanceof Error?HOt.message:String(HOt)}}))}finally{e(e=>hT(e,e=>{e.ai.isRunningAnalysis=!1,e.ai.analysisPrompt=""}))}}},cancelAnalysis:()=>{var t;e(e=>hT(e,e=>{e.ai.isRunningAnalysis=!1})),null==(t=l().ai.analysisAbortController)||t.abort("Analysis cancelled")},deleteAnalysisResult:(t,n)=>{e(e=>hT(e,e=>{const r=e.config.ai.sessions.find(e=>e.id===t);r&&(r.analysisResults=r.analysisResults.filter(e=>e.id!==n))}))},findToolComponent:e=>{var t,n;return null==(n=null==(t=Object.entries(l().ai.tools).find(([t])=>t===e))?void 0:t[1])?void 0:n.component}}}))}function Mwe(e){const{currentSessionId:t,sessions:n}=e.config.ai;return n.find(e=>e.id===t)}function Pwe({resultId:e,streamMessage:t,errorMessage:n,isCompleted:r}){return i=>hT(i,i=>{const o=Mwe(i);if(!o)return;const a=(s=o.analysisResults,l=e,s.find(e=>e.id===l));var s,l;if(a){if(t&&t.parts){const e={parts:t.parts.map(e=>"text"===e.type?{type:"text",text:e.text,additionalData:e.additionalData,isCompleted:e.isCompleted}:"tool-invocation"===e.type?{type:"tool-invocation",toolInvocation:{toolCallId:e.toolInvocation.toolCallId,toolName:e.toolInvocation.toolName,args:e.toolInvocation.args,state:e.toolInvocation.state,result:"result"===e.toolInvocation.state?e.toolInvocation.result:void 0},additionalData:e.additionalData,isCompleted:e.isCompleted}:e)};a.streamMessage=e}n&&(a.errorMessage=n),r&&(a.isCompleted=r)}})}function Fwe(e){return f8(t=>e(t))}function Lwe(){}function jwe(){}function Bwe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,o=!1;for(;!o;){-1===r&&(r=n.length,o=!0);const e=n.slice(i,r).trim();!e&&o||t.push(e),i=r+1,r=n.indexOf(",",i)}return t}function $we(e,t){const n={};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}const zwe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Uwe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qwe={};function Hwe(e,t){return(qwe.jsx?Uwe:zwe).test(e)}const Vwe=/[ \t\n\f\r]/g;function Wwe(e){return""===e.replace(Vwe,"")}let Gwe=class{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}};function Ywe(e,t){const n={},r={};for(const i of e)Object.assign(n,i.property),Object.assign(r,i.normal);return new Gwe(n,r,t)}function Kwe(e){return e.toLowerCase()}Gwe.prototype.normal={},Gwe.prototype.property={},Gwe.prototype.space=void 0;let Zwe=class{constructor(e,t){this.attribute=t,this.property=e}};Zwe.prototype.attribute="",Zwe.prototype.booleanish=!1,Zwe.prototype.boolean=!1,Zwe.prototype.commaOrSpaceSeparated=!1,Zwe.prototype.commaSeparated=!1,Zwe.prototype.defined=!1,Zwe.prototype.mustUseProperty=!1,Zwe.prototype.number=!1,Zwe.prototype.overloadedBoolean=!1,Zwe.prototype.property="",Zwe.prototype.spaceSeparated=!1,Zwe.prototype.space=void 0;let Qwe=0;const Xwe=o_e(),Jwe=o_e(),e_e=o_e(),t_e=o_e(),n_e=o_e(),r_e=o_e(),i_e=o_e();function o_e(){return 2**++Qwe}const a_e=Object.freeze(Object.defineProperty({__proto__:null,boolean:Xwe,booleanish:Jwe,commaOrSpaceSeparated:i_e,commaSeparated:r_e,number:t_e,overloadedBoolean:e_e,spaceSeparated:n_e},Symbol.toStringTag,{value:"Module"})),s_e=Object.keys(a_e);let l_e=class extends Zwe{constructor(e,t,n,r){let i=-1;if(super(e,t),u_e(this,"space",r),"number"==typeof n)for(;++i<s_e.length;){const e=s_e[i];u_e(this,s_e[i],(n&a_e[e])===a_e[e])}}};function u_e(e,t,n){n&&(e[t]=n)}function c_e(e){const t={},n={};for(const[r,i]of Object.entries(e.properties)){const o=new l_e(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[Kwe(r)]=r,n[Kwe(o.attribute)]=r}return new Gwe(t,n,e.space)}l_e.prototype.defined=!0;const d_e=c_e({properties:{ariaActiveDescendant:null,ariaAtomic:Jwe,ariaAutoComplete:null,ariaBusy:Jwe,ariaChecked:Jwe,ariaColCount:t_e,ariaColIndex:t_e,ariaColSpan:t_e,ariaControls:n_e,ariaCurrent:null,ariaDescribedBy:n_e,ariaDetails:null,ariaDisabled:Jwe,ariaDropEffect:n_e,ariaErrorMessage:null,ariaExpanded:Jwe,ariaFlowTo:n_e,ariaGrabbed:Jwe,ariaHasPopup:null,ariaHidden:Jwe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:n_e,ariaLevel:t_e,ariaLive:null,ariaModal:Jwe,ariaMultiLine:Jwe,ariaMultiSelectable:Jwe,ariaOrientation:null,ariaOwns:n_e,ariaPlaceholder:null,ariaPosInSet:t_e,ariaPressed:Jwe,ariaReadOnly:Jwe,ariaRelevant:null,ariaRequired:Jwe,ariaRoleDescription:n_e,ariaRowCount:t_e,ariaRowIndex:t_e,ariaRowSpan:t_e,ariaSelected:Jwe,ariaSetSize:t_e,ariaSort:null,ariaValueMax:t_e,ariaValueMin:t_e,ariaValueNow:t_e,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function f_e(e,t){return t in e?e[t]:t}function p_e(e,t){return f_e(e,t.toLowerCase())}const h_e=c_e({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:r_e,acceptCharset:n_e,accessKey:n_e,action:null,allow:null,allowFullScreen:Xwe,allowPaymentRequest:Xwe,allowUserMedia:Xwe,alt:null,as:null,async:Xwe,autoCapitalize:null,autoComplete:n_e,autoFocus:Xwe,autoPlay:Xwe,blocking:n_e,capture:null,charSet:null,checked:Xwe,cite:null,className:n_e,cols:t_e,colSpan:null,content:null,contentEditable:Jwe,controls:Xwe,controlsList:n_e,coords:t_e|r_e,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Xwe,defer:Xwe,dir:null,dirName:null,disabled:Xwe,download:e_e,draggable:Jwe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Xwe,formTarget:null,headers:n_e,height:t_e,hidden:e_e,high:t_e,href:null,hrefLang:null,htmlFor:n_e,httpEquiv:n_e,id:null,imageSizes:null,imageSrcSet:null,inert:Xwe,inputMode:null,integrity:null,is:null,isMap:Xwe,itemId:null,itemProp:n_e,itemRef:n_e,itemScope:Xwe,itemType:n_e,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Xwe,low:t_e,manifest:null,max:null,maxLength:t_e,media:null,method:null,min:null,minLength:t_e,multiple:Xwe,muted:Xwe,name:null,nonce:null,noModule:Xwe,noValidate:Xwe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Xwe,optimum:t_e,pattern:null,ping:n_e,placeholder:null,playsInline:Xwe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Xwe,referrerPolicy:null,rel:n_e,required:Xwe,reversed:Xwe,rows:t_e,rowSpan:t_e,sandbox:n_e,scope:null,scoped:Xwe,seamless:Xwe,selected:Xwe,shadowRootClonable:Xwe,shadowRootDelegatesFocus:Xwe,shadowRootMode:null,shape:null,size:t_e,sizes:null,slot:null,span:t_e,spellCheck:Jwe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:t_e,step:null,style:null,tabIndex:t_e,target:null,title:null,translate:null,type:null,typeMustMatch:Xwe,useMap:null,value:Jwe,width:t_e,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:n_e,axis:null,background:null,bgColor:null,border:t_e,borderColor:null,bottomMargin:t_e,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Xwe,declare:Xwe,event:null,face:null,frame:null,frameBorder:null,hSpace:t_e,leftMargin:t_e,link:null,longDesc:null,lowSrc:null,marginHeight:t_e,marginWidth:t_e,noResize:Xwe,noHref:Xwe,noShade:Xwe,noWrap:Xwe,object:null,profile:null,prompt:null,rev:null,rightMargin:t_e,rules:null,scheme:null,scrolling:Jwe,standby:null,summary:null,text:null,topMargin:t_e,valueType:null,version:null,vAlign:null,vLink:null,vSpace:t_e,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Xwe,disableRemotePlayback:Xwe,prefix:null,property:null,results:t_e,security:null,unselectable:null},space:"html",transform:p_e}),m_e=c_e({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:i_e,accentHeight:t_e,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:t_e,amplitude:t_e,arabicForm:null,ascent:t_e,attributeName:null,attributeType:null,azimuth:t_e,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:t_e,by:null,calcMode:null,capHeight:t_e,className:n_e,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:t_e,diffuseConstant:t_e,direction:null,display:null,dur:null,divisor:t_e,dominantBaseline:null,download:Xwe,dx:null,dy:null,edgeMode:null,editable:null,elevation:t_e,enableBackground:null,end:null,event:null,exponent:t_e,externalResourcesRequired:null,fill:null,fillOpacity:t_e,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:r_e,g2:r_e,glyphName:r_e,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:t_e,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:t_e,horizOriginX:t_e,horizOriginY:t_e,id:null,ideographic:t_e,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:t_e,k:t_e,k1:t_e,k2:t_e,k3:t_e,k4:t_e,kernelMatrix:i_e,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:t_e,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:t_e,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:t_e,overlineThickness:t_e,paintOrder:null,panose1:null,path:null,pathLength:t_e,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:n_e,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:t_e,pointsAtY:t_e,pointsAtZ:t_e,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:i_e,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:i_e,rev:i_e,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:i_e,requiredFeatures:i_e,requiredFonts:i_e,requiredFormats:i_e,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:t_e,specularExponent:t_e,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:t_e,strikethroughThickness:t_e,string:null,stroke:null,strokeDashArray:i_e,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:t_e,strokeOpacity:t_e,strokeWidth:null,style:null,surfaceScale:t_e,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:i_e,tabIndex:t_e,tableValues:null,target:null,targetX:t_e,targetY:t_e,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:i_e,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:t_e,underlineThickness:t_e,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:t_e,values:null,vAlphabetic:t_e,vMathematical:t_e,vectorEffect:null,vHanging:t_e,vIdeographic:t_e,version:null,vertAdvY:t_e,vertOriginX:t_e,vertOriginY:t_e,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:t_e,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:f_e}),g_e=c_e({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),y_e=c_e({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:p_e}),v_e=c_e({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),b_e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},w_e=/[A-Z]/g,__e=/-[a-z]/g,x_e=/^data[-\w.:]+$/i;function E_e(e,t){const n=Kwe(t);let r=t,i=Zwe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&x_e.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(__e,k_e);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!__e.test(e)){let n=e.replace(w_e,S_e);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=l_e}return new i(r,t)}function S_e(e){return"-"+e.toLowerCase()}function k_e(e){return e.charAt(1).toUpperCase()}const T_e=Ywe([d_e,h_e,g_e,y_e,v_e],"html"),C_e=Ywe([d_e,m_e,g_e,y_e,v_e],"svg");function A_e(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function I_e(e){return e.join(" ").trim()}var O_e,N_e,D_e,R_e={};function M_e(){if(D_e)return R_e;D_e=1;var e=R_e&&R_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(R_e,"__esModule",{value:!0}),R_e.default=function(e,n){var r=null;if(!e||"string"!=typeof e)return r;var i=(0,t.default)(e),o="function"==typeof n;return i.forEach(function(e){if("declaration"===e.type){var t=e.property,i=e.value;o?n(t,i,e):i&&((r=r||{})[t]=i)}}),r};var t=e(function(){if(N_e)return O_e;N_e=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,s=/^\s+|\s+$/g,l="";function u(e){return e?e.replace(s,l):l}return O_e=function(s,c){if("string"!=typeof s)throw new TypeError("First argument must be a string");if(!s)return[];c=c||{};var d=1,f=1;function p(e){var n=e.match(t);n&&(d+=n.length);var r=e.lastIndexOf("\n");f=~r?e.length-r:f+e.length}function h(){var e={line:d,column:f};return function(t){return t.position=new m(e),v(),t}}function m(e){this.start=e,this.end={line:d,column:f},this.source=c.source}function g(e){var t=new Error(c.source+":"+d+":"+f+": "+e);if(t.reason=e,t.filename=c.source,t.line=d,t.column=f,t.source=s,!c.silent)throw t}function y(e){var t=e.exec(s);if(t){var n=t[0];return p(n),s=s.slice(n.length),t}}function v(){y(n)}function b(e){var t;for(e=e||[];t=w();)!1!==t&&e.push(t);return e}function w(){var e=h();if("/"==s.charAt(0)&&"*"==s.charAt(1)){for(var t=2;l!=s.charAt(t)&&("*"!=s.charAt(t)||"/"!=s.charAt(t+1));)++t;if(t+=2,l===s.charAt(t-1))return g("End of comment missing");var n=s.slice(2,t-2);return f+=2,p(n),s=s.slice(t),f+=2,e({type:"comment",comment:n})}}function _(){var t=h(),n=y(r);if(n){if(w(),!y(i))return g("property missing ':'");var s=y(o),c=t({type:"declaration",property:u(n[0].replace(e,l)),value:s?u(s[0].replace(e,l)):l});return y(a),c}}return m.prototype.content=s,v(),function(){var e,t=[];for(b(t);e=_();)!1!==e&&(t.push(e),b(t));return t}()},O_e}());return R_e}var P_e,F_e,L_e,j_e={};function B_e(){if(P_e)return j_e;P_e=1,Object.defineProperty(j_e,"__esModule",{value:!0}),j_e.camelCase=void 0;var e=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,o=function(e,t){return t.toUpperCase()},a=function(e,t){return"".concat(t,"-")};return j_e.camelCase=function(s,l){return void 0===l&&(l={}),function(t){return!t||n.test(t)||e.test(t)}(s)?s:(s=s.toLowerCase(),(s=l.reactCompat?s.replace(i,a):s.replace(r,a)).replace(t,o))},j_e}var $_e=function(){if(L_e)return F_e;L_e=1;var e=(F_e&&F_e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(M_e()),t=B_e();function n(n,r){var i={};return n&&"string"==typeof n?((0,e.default)(n,function(e,n){e&&n&&(i[(0,t.camelCase)(e,r)]=n)}),i):i}return n.default=n,F_e=n}();const z_e=f($_e),U_e=H_e("end"),q_e=H_e("start");function H_e(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function V_e(e){return e&&"object"==typeof e?"position"in e||"type"in e?G_e(e.position):"start"in e||"end"in e?G_e(e):"line"in e||"column"in e?W_e(e):"":""}function W_e(e){return Y_e(e&&e.line)+":"+Y_e(e&&e.column)}function G_e(e){return W_e(e&&e.start)+"-"+W_e(e&&e.end)}function Y_e(e){return e&&"number"==typeof e?e:1}class K_e extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let r="",i={},o=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?r=e:!i.cause&&e&&(o=!0,r=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=a?a.line:void 0,this.name=V_e(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=o&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}K_e.prototype.file="",K_e.prototype.name="",K_e.prototype.reason="",K_e.prototype.message="",K_e.prototype.stack="",K_e.prototype.column=void 0,K_e.prototype.line=void 0,K_e.prototype.ancestors=void 0,K_e.prototype.cause=void 0,K_e.prototype.fatal=void 0,K_e.prototype.place=void 0,K_e.prototype.ruleId=void 0,K_e.prototype.source=void 0;const Z_e={}.hasOwnProperty,Q_e=new Map,X_e=/[A-Z]/g,J_e=new Set(["table","tbody","thead","tfoot","tr"]),exe=new Set(["td","th"]),txe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function nxe(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=function(e,t){return n;function n(n,r,i,o){const a=Array.isArray(i.children),s=q_e(n);return t(r,i,o,a,{columnNumber:s?s.column-1:void 0,fileName:e,lineNumber:s?s.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");r=function(e,t,n){return r;function r(e,r,i,o){const a=Array.isArray(i.children)?n:t;return o?a(r,i,o):a(r,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?C_e:T_e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},o=rxe(i,e,void 0);return o&&"string"!=typeof o?o:i.create(e,i.Fragment,{children:o||void 0},void 0)}function rxe(e,t,n){return"element"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.tagName.toLowerCase()&&"html"===r.space&&(i=C_e,e.schema=i);e.ancestors.push(t);const o=lxe(e,t.tagName,!1),a=function(e,t){const n={};let r,i;for(i in t.properties)if("children"!==i&&Z_e.call(t.properties,i)){const o=sxe(e,i,t.properties[i]);if(o){const[i,a]=o;e.tableCellAlignToStyle&&"align"===i&&"string"==typeof a&&exe.has(t.tagName)?r=a:n[i]=a}}if(r){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=r}return n}(e,t);let s=axe(e,t);J_e.has(t.tagName)&&(s=s.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Wwe(t.value):Wwe(t));var t}));return ixe(e,a,o,t),oxe(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}uxe(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const r=e.schema;let i=r;"svg"===t.name&&"html"===r.space&&(i=C_e,e.schema=i);e.ancestors.push(t);const o=null===t.name?e.Fragment:lxe(e,t.name,!0),a=function(e,t){const n={};for(const r of t.attributes)if("mdxJsxExpressionAttribute"===r.type)if(r.data&&r.data.estree&&e.evaluater){const t=r.data.estree.body[0];Lwe(t.type);const i=t.expression;Lwe(i.type);const o=i.properties[0];Lwe(o.type),Object.assign(n,e.evaluater.evaluateExpression(o.argument))}else uxe(e,t.position);else{const i=r.name;let o;if(r.value&&"object"==typeof r.value)if(r.value.data&&r.value.data.estree&&e.evaluater){const t=r.value.data.estree.body[0];Lwe(t.type),o=e.evaluater.evaluateExpression(t.expression)}else uxe(e,t.position);else o=null===r.value||r.value;n[i]=o}return n}(e,t),s=axe(e,t);return ixe(e,a,o,t),oxe(a,s),e.ancestors.pop(),e.schema=r,e.create(t,o,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);uxe(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const r={};return oxe(r,axe(e,t)),e.create(t,e.Fragment,r,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function ixe(e,t,n,r){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=r)}function oxe(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function axe(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Q_e;for(;++r<t.children.length;){const o=t.children[r];let a;if(e.passKeys){const e="element"===o.type?o.tagName:"mdxJsxFlowElement"===o.type||"mdxJsxTextElement"===o.type?o.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const s=rxe(e,o,a);void 0!==s&&n.push(s)}return n}function sxe(e,t,n){const r=E_e(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?$we(n):I_e(n)),"style"===r.property){let t="object"==typeof n?n:function(e,t){try{return z_e(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,r=new K_e("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=e.filePath||void 0,r.url=txe+"#cannot-parse-style-attribute",r}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Z_e.call(e,n)&&(t[cxe(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&r.space?b_e[r.property]||r.property:r.attribute,n]}}function lxe(e,t,n){let r;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=Hwe(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}r=n}else r=Hwe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else r={type:"Literal",value:t};if("Literal"===r.type){const t=r.value;return Z_e.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(r);uxe(e)}function uxe(e,t){const n=new K_e("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=txe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function cxe(e){let t=e.replace(X_e,dxe);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function dxe(e){return"-"+e.toLowerCase()}const fxe={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},pxe={};function hxe(e,t){return mxe(e,"boolean"!=typeof pxe.includeImageAlt||pxe.includeImageAlt,"boolean"!=typeof pxe.includeHtml||pxe.includeHtml)}function mxe(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return gxe(e.children,t,n)}return Array.isArray(e)?gxe(e,t,n):""}function gxe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=mxe(e[i],t,n);return r.join("")}const yxe=document.createElement("i");function vxe(e){const t="&"+e+";";yxe.innerHTML=t;const n=yxe.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function bxe(e,t,n,r){const i=e.length;let o,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(t,0),e.splice(...o),a+=1e4,t+=1e4}function wxe(e,t){return e.length>0?(bxe(e,e.length,0,t),e):t}const _xe={}.hasOwnProperty;function xxe(e){const t={};let n=-1;for(;++n<e.length;)Exe(t,e[n]);return t}function Exe(e,t){let n;for(n in t){const r=(_xe.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let o;if(i)for(o in i){_xe.call(r,o)||(r[o]=[]);const e=i[o];Sxe(r[o],Array.isArray(e)?e:e?[e]:[])}}}function Sxe(e,t){let n=-1;const r=[];for(;++n<t.length;)("after"===t[n].add?e:r).push(t[n]);bxe(e,0,0,r)}function kxe(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function Txe(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cxe=Bxe(/[A-Za-z]/),Axe=Bxe(/[\dA-Za-z]/),Ixe=Bxe(/[#-'*+\--9=?A-Z^-~]/);function Oxe(e){return null!==e&&(e<32||127===e)}const Nxe=Bxe(/\d/),Dxe=Bxe(/[\dA-Fa-f]/),Rxe=Bxe(/[!-/:-@[-`{-~]/);function Mxe(e){return null!==e&&e<-2}function Pxe(e){return null!==e&&(e<0||32===e)}function Fxe(e){return-2===e||-1===e||32===e}const Lxe=Bxe(new RegExp("\\p{P}|\\p{S}","u")),jxe=Bxe(/\s/);function Bxe(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function $xe(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const o=e.charCodeAt(n);let a="";if(37===o&&Axe(e.charCodeAt(n+1))&&Axe(e.charCodeAt(n+2)))i=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(a=String.fromCharCode(o));else if(o>55295&&o<57344){const t=e.charCodeAt(n+1);o<56320&&t>56319&&t<57344?(a=String.fromCharCode(o,t),i=1):a="�"}else a=String.fromCharCode(o);a&&(t.push(e.slice(r,n),encodeURIComponent(a)),r=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function zxe(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let o=0;return function(r){if(Fxe(r))return e.enter(n),a(r);return t(r)};function a(r){return Fxe(r)&&o++<i?(e.consume(r),a):(e.exit(n),t(r))}}const Uxe={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),zxe(e,t,"linePrefix")},function(t){return e.enter("paragraph"),r(t)});let n;return t;function r(t){const r=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=r),n=r,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Mxe(t)?(e.consume(t),e.exit("chunkText"),r):(e.consume(t),i)}}};const qxe={tokenize:function(e){const t=this,n=[];let r,i,o,a=0;return s;function s(r){if(a<n.length){const i=n[a];return t.containerState=i[1],e.attempt(i[0].continuation,l,u)(r)}return u(r)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,r&&v();const n=t.events.length;let i,o=n;for(;o--;)if("exit"===t.events[o][0]&&"chunkFlow"===t.events[o][1].type){i=t.events[o][1].end;break}y(a);let s=n;for(;s<t.events.length;)t.events[s][1].end={...i},s++;return bxe(t.events,o+1,0,t.events.slice(n)),t.events.length=s,u(e)}return s(e)}function u(i){if(a===n.length){if(!r)return f(i);if(r.currentConstruct&&r.currentConstruct.concrete)return h(i);t.interrupt=Boolean(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Hxe,c,d)(i)}function c(e){return r&&v(),y(a),f(e)}function d(e){return t.parser.lazy[t.now().line]=a!==n.length,o=t.now().offset,h(e)}function f(n){return t.containerState={},e.attempt(Hxe,p,h)(n)}function p(e){return a++,n.push([t.currentConstruct,t.containerState]),f(e)}function h(n){return null===n?(r&&v(),y(0),void e.consume(n)):(r=r||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:i}),m(n))}function m(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Mxe(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,s):(e.consume(n),m)}function g(e,n){const s=t.sliceStream(e);if(n&&s.push(null),e.previous=i,i&&(i.next=e),i=e,r.defineSkip(e.start),r.write(s),t.parser.lazy[e.start.line]){let e=r.events.length;for(;e--;)if(r.events[e][1].start.offset<o&&(!r.events[e][1].end||r.events[e][1].end.offset>o))return;const n=t.events.length;let i,s,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){s=t.events[l][1].end;break}i=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end={...s},e++;bxe(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(r){let i=n.length;for(;i-- >r;){const r=n[i];t.containerState=r[1],r[0].exit.call(t,e)}n.length=r}function v(){r.write([null]),i=void 0,r=void 0,t.containerState._closeFlow=void 0}}},Hxe={tokenize:function(e,t,n){return zxe(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Vxe(e){return null===e||Pxe(e)||jxe(e)?1:Lxe(e)?2:void 0}function Wxe(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const o=e[i].resolveAll;o&&!r.includes(o)&&(t=o(t,n),r.push(o))}return t}const Gxe={name:"attention",resolveAll:function(e,t){let n,r,i,o,a,s,l,u,c=-1;for(;++c<e.length;)if("enter"===e[c][0]&&"attentionSequence"===e[c][1].type&&e[c][1]._close)for(n=c;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[c][1]).charCodeAt(0)){if((e[n][1]._close||e[c][1]._open)&&(e[c][1].end.offset-e[c][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[c][1].end.offset-e[c][1].start.offset)%3))continue;s=e[n][1].end.offset-e[n][1].start.offset>1&&e[c][1].end.offset-e[c][1].start.offset>1?2:1;const d={...e[n][1].end},f={...e[c][1].start};Yxe(d,-s),Yxe(f,s),o={type:s>1?"strongSequence":"emphasisSequence",start:d,end:{...e[n][1].end}},a={type:s>1?"strongSequence":"emphasisSequence",start:{...e[c][1].start},end:f},i={type:s>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[c][1].start}},r={type:s>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},e[n][1].end={...o.start},e[c][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=wxe(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=wxe(l,[["enter",r,t],["enter",o,t],["exit",o,t],["enter",i,t]]),l=wxe(l,Wxe(t.parser.constructs.insideSpan.null,e.slice(n+1,c),t)),l=wxe(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",r,t]]),e[c][1].end.offset-e[c][1].start.offset?(u=2,l=wxe(l,[["enter",e[c][1],t],["exit",e[c][1],t]])):u=0,bxe(e,n-1,c-n+3,l),c=n+l.length-u-2;break}c=-1;for(;++c<e.length;)"attentionSequence"===e[c][1].type&&(e[c][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vxe(r);let o;return function(t){return o=t,e.enter("attentionSequence"),a(t)};function a(s){if(s===o)return e.consume(s),a;const l=e.exit("attentionSequence"),u=Vxe(s),c=!u||2===u&&i||n.includes(s),d=!i||2===i&&u||n.includes(r);return l._open=Boolean(42===o?c:c&&(i||!d)),l._close=Boolean(42===o?d:d&&(u||!c)),t(s)}}};function Yxe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Kxe={name:"autolink",tokenize:function(e,t,n){let r=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return Cxe(t)?(e.consume(t),o):64===t?n(t):l(t)}function o(e){return 43===e||45===e||46===e||Axe(e)?(r=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),r=0,s):(43===t||45===t||46===t||Axe(t))&&r++<32?(e.consume(t),a):(r=0,l(t))}function s(r){return 62===r?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(r),e.exit("autolinkMarker"),e.exit("autolink"),t):null===r||32===r||60===r||Oxe(r)?n(r):(e.consume(r),s)}function l(t){return 64===t?(e.consume(t),u):Ixe(t)?(e.consume(t),l):n(t)}function u(e){return Axe(e)?c(e):n(e)}function c(n){return 46===n?(e.consume(n),r=0,u):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):d(n)}function d(t){if((45===t||Axe(t))&&r++<63){const n=45===t?d:c;return e.consume(t),n}return n(t)}}};const Zxe={partial:!0,tokenize:function(e,t,n){return function(t){return Fxe(t)?zxe(e,r,"linePrefix")(t):r(t)};function r(e){return null===e||Mxe(e)?t(e):n(e)}}};const Qxe={continuation:{tokenize:function(e,t,n){const r=this;return function(t){if(Fxe(t))return zxe(e,i,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(r){return e.attempt(Qxe,t,n)(r)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const r=this;return function(t){if(62===t){const n=r.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Fxe(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const Xxe={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return Rxe(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};const Jxe={name:"characterReference",tokenize:function(e,t,n){const r=this;let i,o,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),s};function s(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,o=Axe,u(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,o=Dxe,u):(e.enter("characterReferenceValue"),i=7,o=Nxe,u(t))}function u(s){if(59===s&&a){const i=e.exit("characterReferenceValue");return o!==Axe||vxe(r.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(s),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(s)}return o(s)&&a++<i?(e.consume(s),u):n(s)}}};const eEe={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}},tEe={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const r=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Fxe(t)?zxe(e,u,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):u(t)}function u(t){return t===o?(e.enter("codeFencedFenceSequence"),c(t)):n(t)}function c(t){return t===o?(i++,e.consume(t),c):i>=s?(e.exit("codeFencedFenceSequence"),Fxe(t)?zxe(e,d,"whitespace")(t):d(t)):n(t)}function d(r){return null===r||Mxe(r)?(e.exit("codeFencedFence"),t(r)):n(r)}}};let o,a=0,s=0;return function(t){return function(t){const n=r.events[r.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,o=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===o?(s++,e.consume(t),l):s<3?n(t):(e.exit("codeFencedFenceSequence"),Fxe(t)?zxe(e,u,"whitespace")(t):u(t))}function u(n){return null===n||Mxe(n)?(e.exit("codeFencedFence"),r.interrupt?t(n):e.check(eEe,p,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),c(n))}function c(t){return null===t||Mxe(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),u(t)):Fxe(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),zxe(e,d,"whitespace")(t)):96===t&&t===o?n(t):(e.consume(t),c)}function d(t){return null===t||Mxe(t)?u(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||Mxe(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),u(t)):96===t&&t===o?n(t):(e.consume(t),f)}function p(t){return e.attempt(i,v,h)(t)}function h(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),m}function m(t){return a>0&&Fxe(t)?zxe(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||Mxe(t)?e.check(eEe,p,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Mxe(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const nEe={name:"codeIndented",tokenize:function(e,t,n){const r=this;return function(t){return e.enter("codeIndented"),zxe(e,i,"linePrefix",5)(t)};function i(e){const t=r.events[r.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?o(e):n(e)}function o(t){return null===t?s(t):Mxe(t)?e.attempt(rEe,o,s)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||Mxe(t)?(e.exit("codeFlowValue"),o(t)):(e.consume(t),a)}function s(n){return e.exit("codeIndented"),t(n)}}},rEe={partial:!0,tokenize:function(e,t,n){const r=this;return i;function i(t){return r.parser.lazy[r.now().line]?n(t):Mxe(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):zxe(e,o,"linePrefix",5)(t)}function o(e){const o=r.events[r.events.length-1];return o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(e):Mxe(e)?i(e):n(e)}}};const iEe={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,r=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[r][1].type&&"space"!==e[r][1].type))for(t=i;++t<r;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[r][1].type="codeTextPadding",i+=2,r-=2;break}t=i-1,r++;for(;++t<=r;)void 0===n?t!==r&&"lineEnding"!==e[t][1].type&&(n=t):t!==r&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),r-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let r,i,o=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),o++,a):(e.exit("codeTextSequence"),s(t))}function s(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),s):96===t?(i=e.enter("codeTextSequence"),r=0,u(t)):Mxe(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Mxe(t)?(e.exit("codeTextData"),s(t)):(e.consume(t),l)}function u(n){return 96===n?(e.consume(n),r++,u):r===o?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};class oEe{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const r=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return n&&aEe(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),aEe(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),aEe(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);aEe(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);aEe(this.left,t.reverse())}}}function aEe(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function sEe(e){const t={};let n,r,i,o,a,s,l,u=-1;const c=new oEe(e);for(;++u<c.length;){for(;u in t;)u=t[u];if(n=c.get(u),u&&"chunkFlow"===n[1].type&&"listItemPrefix"===c.get(u-1)[1].type&&(s=n[1]._tokenizer.events,i=0,i<s.length&&"lineEndingBlank"===s[i][1].type&&(i+=2),i<s.length&&"content"===s[i][1].type))for(;++i<s.length&&"content"!==s[i][1].type;)"chunkText"===s[i][1].type&&(s[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,lEe(c,u)),u=t[u],l=!0);else if(n[1]._container){for(i=u,r=void 0;i--;)if(o=c.get(i),"lineEnding"===o[1].type||"lineEndingBlank"===o[1].type)"enter"===o[0]&&(r&&(c.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=i);else if("linePrefix"!==o[1].type&&"listItemIndent"!==o[1].type)break;r&&(n[1].end={...c.get(r)[1].start},a=c.slice(r,u),a.unshift(n),c.splice(r,u-r+1,a))}}return bxe(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function lEe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const o=[];let a=n._tokenizer;a||(a=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const s=a.events,l=[],u={};let c,d,f=-1,p=n,h=0,m=0;const g=[m];for(;p;){for(;e.get(++i)[1]!==p;);o.push(i),p._tokenizer||(c=r.sliceStream(p),p.next||c.push(null),d&&a.defineSkip(p.start),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(c),p._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),d=p,p=p.next}for(p=n;++f<s.length;)"exit"===s[f][0]&&"enter"===s[f-1][0]&&s[f][1].type===s[f-1][1].type&&s[f][1].start.line!==s[f][1].end.line&&(m=f+1,g.push(m),p._tokenizer=void 0,p.previous=void 0,p=p.next);for(a.events=[],p?(p._tokenizer=void 0,p.previous=void 0):g.pop(),f=g.length;f--;){const t=s.slice(g[f],g[f+1]),n=o.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),f=-1;++f<l.length;)u[h+l[f][0]]=h+l[f][1],h+=l[f][1]-l[f][0]-1;return u}const uEe={resolve:function(e){return sEe(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?i(t):Mxe(t)?e.check(cEe,o,i)(t):(e.consume(t),r)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function o(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}},cEe={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),zxe(e,i,"linePrefix")};function i(i){if(null===i||Mxe(i))return n(i);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&"linePrefix"===o[1].type&&o[2].sliceSerialize(o[1],!0).length>=4?t(i):e.interrupt(r.parser.constructs.flow,n,t)(i)}}};function dEe(e,t,n,r,i,o,a,s,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return function(t){if(60===t)return e.enter(r),e.enter(i),e.enter(o),e.consume(t),e.exit(o),d;if(null===t||32===t||41===t||Oxe(t))return n(t);return e.enter(r),e.enter(a),e.enter(s),e.enter("chunkString",{contentType:"string"}),h(t)};function d(n){return 62===n?(e.enter(o),e.consume(n),e.exit(o),e.exit(i),e.exit(r),t):(e.enter(s),e.enter("chunkString",{contentType:"string"}),f(n))}function f(t){return 62===t?(e.exit("chunkString"),e.exit(s),d(t)):null===t||60===t||Mxe(t)?n(t):(e.consume(t),92===t?p:f)}function p(t){return 60===t||62===t||92===t?(e.consume(t),f):f(t)}function h(i){return c||null!==i&&41!==i&&!Pxe(i)?c<u&&40===i?(e.consume(i),c++,h):41===i?(e.consume(i),c--,h):null===i||32===i||40===i||Oxe(i)?n(i):(e.consume(i),92===i?m:h):(e.exit("chunkString"),e.exit(s),e.exit(a),e.exit(r),t(i))}function m(t){return 40===t||41===t||92===t?(e.consume(t),h):h(t)}}function fEe(e,t,n,r,i,o){const a=this;let s,l=0;return function(t){return e.enter(r),e.enter(i),e.consume(t),e.exit(i),e.enter(o),u};function u(d){return l>999||null===d||91===d||93===d&&!s||94===d&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(d):93===d?(e.exit(o),e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):Mxe(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),u):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(t){return null===t||91===t||93===t||Mxe(t)||l++>999?(e.exit("chunkString"),u(t)):(e.consume(t),s||(s=!Fxe(t)),92===t?d:c)}function d(t){return 91===t||92===t||93===t?(e.consume(t),l++,c):c(t)}}function pEe(e,t,n,r,i,o){let a;return function(t){if(34===t||39===t||40===t)return e.enter(r),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,s;return n(t)};function s(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(r),t):(e.enter(o),l(n))}function l(t){return t===a?(e.exit(o),s(a)):null===t?n(t):Mxe(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),zxe(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),u(t))}function u(t){return t===a||null===t||Mxe(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return t===a||92===t?(e.consume(t),u):u(t)}}function hEe(e,t){let n;return function r(i){if(Mxe(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r;if(Fxe(i))return zxe(e,r,n?"linePrefix":"lineSuffix")(i);return t(i)}}const mEe={name:"definition",tokenize:function(e,t,n){const r=this;let i;return function(t){return e.enter("definition"),function(t){return fEe.call(r,e,o,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function o(t){return i=Txe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Pxe(t)?hEe(e,s)(t):s(t)}function s(t){return dEe(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(gEe,u,u)(t)}function u(t){return Fxe(t)?zxe(e,c,"whitespace")(t):c(t)}function c(o){return null===o||Mxe(o)?(e.exit("definition"),r.parser.defined.push(i),t(o)):n(o)}}},gEe={partial:!0,tokenize:function(e,t,n){return function(t){return Pxe(t)?hEe(e,r)(t):n(t)};function r(t){return pEe(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Fxe(t)?zxe(e,o,"whitespace")(t):o(t)}function o(e){return null===e||Mxe(e)?t(e):n(e)}}};const yEe={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),r};function r(r){return Mxe(r)?(e.exit("hardBreakEscape"),t(r)):n(r)}}};const vEe={name:"headingAtx",resolve:function(e,t){let n,r,i=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);i-2>o&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(o===i-1||i-4>o&&"whitespace"===e[i-2][1].type)&&(i-=o+1===i?2:4);i>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[i][1].end},r={type:"chunkText",start:e[o][1].start,end:e[i][1].end,contentType:"text"},bxe(e,o,i-o+1,[["enter",n,t],["enter",r,t],["exit",r,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let r=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&r++<6?(e.consume(t),i):null===t||Pxe(t)?(e.exit("atxHeadingSequence"),o(t)):n(t)}function o(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||Mxe(n)?(e.exit("atxHeading"),t(n)):Fxe(n)?zxe(e,o,"whitespace")(n):(e.enter("atxHeadingText"),s(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),o(t))}function s(t){return null===t||35===t||Pxe(t)?(e.exit("atxHeadingText"),o(t)):(e.consume(t),s)}}};const bEe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wEe=["pre","script","style","textarea"],_Ee={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const r=this;let i,o,a,s,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),u}(t)};function u(s){return 33===s?(e.consume(s),c):47===s?(e.consume(s),o=!0,p):63===s?(e.consume(s),i=3,r.interrupt?t:M):Cxe(s)?(e.consume(s),a=String.fromCharCode(s),h):n(s)}function c(o){return 45===o?(e.consume(o),i=2,d):91===o?(e.consume(o),i=5,s=0,f):Cxe(o)?(e.consume(o),i=4,r.interrupt?t:M):n(o)}function d(i){return 45===i?(e.consume(i),r.interrupt?t:M):n(i)}function f(i){const o="CDATA[";return i===o.charCodeAt(s++)?(e.consume(i),6===s?r.interrupt?t:T:f):n(i)}function p(t){return Cxe(t)?(e.consume(t),a=String.fromCharCode(t),h):n(t)}function h(s){if(null===s||47===s||62===s||Pxe(s)){const l=47===s,u=a.toLowerCase();return l||o||!wEe.includes(u)?bEe.includes(a.toLowerCase())?(i=6,l?(e.consume(s),m):r.interrupt?t(s):T(s)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(s):o?g(s):y(s)):(i=1,r.interrupt?t(s):T(s))}return 45===s||Axe(s)?(e.consume(s),a+=String.fromCharCode(s),h):n(s)}function m(i){return 62===i?(e.consume(i),r.interrupt?t:T):n(i)}function g(t){return Fxe(t)?(e.consume(t),g):S(t)}function y(t){return 47===t?(e.consume(t),S):58===t||95===t||Cxe(t)?(e.consume(t),v):Fxe(t)?(e.consume(t),y):S(t)}function v(t){return 45===t||46===t||58===t||95===t||Axe(t)?(e.consume(t),v):b(t)}function b(t){return 61===t?(e.consume(t),w):Fxe(t)?(e.consume(t),b):y(t)}function w(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,_):Fxe(t)?(e.consume(t),w):x(t)}function _(t){return t===l?(e.consume(t),l=null,E):null===t||Mxe(t)?n(t):(e.consume(t),_)}function x(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Pxe(t)?b(t):(e.consume(t),x)}function E(e){return 47===e||62===e||Fxe(e)?y(e):n(e)}function S(t){return 62===t?(e.consume(t),k):n(t)}function k(t){return null===t||Mxe(t)?T(t):Fxe(t)?(e.consume(t),k):n(t)}function T(t){return 45===t&&2===i?(e.consume(t),O):60===t&&1===i?(e.consume(t),N):62===t&&4===i?(e.consume(t),P):63===t&&3===i?(e.consume(t),M):93===t&&5===i?(e.consume(t),R):!Mxe(t)||6!==i&&7!==i?null===t||Mxe(t)?(e.exit("htmlFlowData"),C(t)):(e.consume(t),T):(e.exit("htmlFlowData"),e.check(xEe,F,C)(t))}function C(t){return e.check(EEe,A,F)(t)}function A(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),I}function I(t){return null===t||Mxe(t)?C(t):(e.enter("htmlFlowData"),T(t))}function O(t){return 45===t?(e.consume(t),M):T(t)}function N(t){return 47===t?(e.consume(t),a="",D):T(t)}function D(t){if(62===t){const n=a.toLowerCase();return wEe.includes(n)?(e.consume(t),P):T(t)}return Cxe(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),D):T(t)}function R(t){return 93===t?(e.consume(t),M):T(t)}function M(t){return 62===t?(e.consume(t),P):45===t&&2===i?(e.consume(t),M):T(t)}function P(t){return null===t||Mxe(t)?(e.exit("htmlFlowData"),F(t)):(e.consume(t),P)}function F(n){return e.exit("htmlFlow"),t(n)}}},xEe={partial:!0,tokenize:function(e,t,n){return function(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),e.attempt(Zxe,t,n)}}},EEe={partial:!0,tokenize:function(e,t,n){const r=this;return function(t){if(Mxe(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return r.parser.lazy[r.now().line]?n(e):t(e)}}};const SEe={name:"htmlText",tokenize:function(e,t,n){const r=this;let i,o,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),s};function s(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),w):63===t?(e.consume(t),v):Cxe(t)?(e.consume(t),E):n(t)}function l(t){return 45===t?(e.consume(t),u):91===t?(e.consume(t),o=0,p):Cxe(t)?(e.consume(t),y):n(t)}function u(t){return 45===t?(e.consume(t),f):n(t)}function c(t){return null===t?n(t):45===t?(e.consume(t),d):Mxe(t)?(a=c,D(t)):(e.consume(t),c)}function d(t){return 45===t?(e.consume(t),f):c(t)}function f(e){return 62===e?N(e):45===e?d(e):c(e)}function p(t){const r="CDATA[";return t===r.charCodeAt(o++)?(e.consume(t),6===o?h:p):n(t)}function h(t){return null===t?n(t):93===t?(e.consume(t),m):Mxe(t)?(a=h,D(t)):(e.consume(t),h)}function m(t){return 93===t?(e.consume(t),g):h(t)}function g(t){return 62===t?N(t):93===t?(e.consume(t),g):h(t)}function y(t){return null===t||62===t?N(t):Mxe(t)?(a=y,D(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),b):Mxe(t)?(a=v,D(t)):(e.consume(t),v)}function b(e){return 62===e?N(e):v(e)}function w(t){return Cxe(t)?(e.consume(t),_):n(t)}function _(t){return 45===t||Axe(t)?(e.consume(t),_):x(t)}function x(t){return Mxe(t)?(a=x,D(t)):Fxe(t)?(e.consume(t),x):N(t)}function E(t){return 45===t||Axe(t)?(e.consume(t),E):47===t||62===t||Pxe(t)?S(t):n(t)}function S(t){return 47===t?(e.consume(t),N):58===t||95===t||Cxe(t)?(e.consume(t),k):Mxe(t)?(a=S,D(t)):Fxe(t)?(e.consume(t),S):N(t)}function k(t){return 45===t||46===t||58===t||95===t||Axe(t)?(e.consume(t),k):T(t)}function T(t){return 61===t?(e.consume(t),C):Mxe(t)?(a=T,D(t)):Fxe(t)?(e.consume(t),T):S(t)}function C(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,A):Mxe(t)?(a=C,D(t)):Fxe(t)?(e.consume(t),C):(e.consume(t),I)}function A(t){return t===i?(e.consume(t),i=void 0,O):null===t?n(t):Mxe(t)?(a=A,D(t)):(e.consume(t),A)}function I(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Pxe(t)?S(t):(e.consume(t),I)}function O(e){return 47===e||62===e||Pxe(e)?S(e):n(e)}function N(r){return 62===r?(e.consume(r),e.exit("htmlTextData"),e.exit("htmlText"),t):n(r)}function D(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),R}function R(t){return Fxe(t)?zxe(e,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):M(t)}function M(t){return e.enter("htmlTextData"),a(t)}}};const kEe={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const r=e[t][1];if(n.push(e[t]),"labelImage"===r.type||"labelLink"===r.type||"labelEnd"===r.type){const e="labelImage"===r.type?4:2;r.type="data",t+=e}}e.length!==n.length&&bxe(e,0,e.length,n);return e},resolveTo:function(e,t){let n,r,i,o,a=e.length,s=0;for(;a--;)if(n=e[a][1],r){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(r=a,"labelLink"!==n.type)){s=2;break}}else"labelEnd"===n.type&&(i=a);const l={type:"labelLink"===e[r][1].type?"link":"image",start:{...e[r][1].start},end:{...e[e.length-1][1].end}},u={type:"label",start:{...e[r][1].start},end:{...e[i][1].end}},c={type:"labelText",start:{...e[r+s+2][1].end},end:{...e[i-2][1].start}};return o=[["enter",l,t],["enter",u,t]],o=wxe(o,e.slice(r+1,r+s+3)),o=wxe(o,[["enter",c,t]]),o=wxe(o,Wxe(t.parser.constructs.insideSpan.null,e.slice(r+s+4,i-3),t)),o=wxe(o,[["exit",c,t],e[i-2],e[i-1],["exit",u,t]]),o=wxe(o,e.slice(i+1)),o=wxe(o,[["exit",l,t]]),bxe(e,r,e.length,o),e},tokenize:function(e,t,n){const r=this;let i,o,a=r.events.length;for(;a--;)if(("labelImage"===r.events[a][1].type||"labelLink"===r.events[a][1].type)&&!r.events[a][1]._balanced){i=r.events[a][1];break}return function(t){if(!i)return n(t);if(i._inactive)return c(t);return o=r.parser.defined.includes(Txe(r.sliceSerialize({start:i.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),s};function s(t){return 40===t?e.attempt(TEe,u,o?u:c)(t):91===t?e.attempt(CEe,u,o?l:c)(t):o?u(t):c(t)}function l(t){return e.attempt(AEe,u,c)(t)}function u(e){return t(e)}function c(e){return i._balanced=!0,n(e)}}},TEe={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),r};function r(t){return Pxe(t)?hEe(e,i)(t):i(t)}function i(t){return 41===t?u(t):dEe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function o(t){return Pxe(t)?hEe(e,s)(t):u(t)}function a(e){return n(e)}function s(t){return 34===t||39===t||40===t?pEe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):u(t)}function l(t){return Pxe(t)?hEe(e,u)(t):u(t)}function u(r){return 41===r?(e.enter("resourceMarker"),e.consume(r),e.exit("resourceMarker"),e.exit("resource"),t):n(r)}}},CEe={tokenize:function(e,t,n){const r=this;return function(t){return fEe.call(r,e,i,o,"reference","referenceMarker","referenceString")(t)};function i(e){return r.parser.defined.includes(Txe(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function o(e){return n(e)}}},AEe={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),r};function r(r){return 93===r?(e.enter("referenceMarker"),e.consume(r),e.exit("referenceMarker"),e.exit("reference"),t):n(r)}}};const IEe={name:"labelStartImage",resolveAll:kEe.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const OEe={name:"labelStartLink",resolveAll:kEe.resolveAll,tokenize:function(e,t,n){const r=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in r.parser.constructs?n(e):t(e)}}};const NEe={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),zxe(e,t,"linePrefix")}}};const DEe={name:"thematicBreak",tokenize:function(e,t,n){let r,i=0;return function(t){return e.enter("thematicBreak"),function(e){return r=e,o(e)}(t)};function o(o){return o===r?(e.enter("thematicBreakSequence"),a(o)):i>=3&&(null===o||Mxe(o))?(e.exit("thematicBreak"),t(o)):n(o)}function a(t){return t===r?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),Fxe(t)?zxe(e,o,"whitespace")(t):o(t))}}};const REe={continuation:{tokenize:function(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(Zxe,function(n){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,zxe(e,t,"listItemIndent",r.containerState.size+1)(n)},function(n){if(r.containerState.furtherBlankLines||!Fxe(n))return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,i(n);return r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(PEe,t,i)(n)});function i(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,zxe(e,e.attempt(REe,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const r=this,i=r.events[r.events.length-1];let o=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=r.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!r.containerState.marker||t===r.containerState.marker:Nxe(t)){if(r.containerState.type||(r.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(DEe,n,l)(t):l(t);if(!r.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),s(t)}return n(t)};function s(t){return Nxe(t)&&++a<10?(e.consume(t),s):(!r.interrupt||a<2)&&(r.containerState.marker?t===r.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||t,e.check(Zxe,r.interrupt?n:u,e.attempt(MEe,d,c))}function u(e){return r.containerState.initialBlankLine=!0,o++,d(e)}function c(t){return Fxe(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),d):n(t)}function d(n){return r.containerState.size=o+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},MEe={partial:!0,tokenize:function(e,t,n){const r=this;return zxe(e,function(e){const i=r.events[r.events.length-1];return!Fxe(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},PEe={partial:!0,tokenize:function(e,t,n){const r=this;return zxe(e,function(e){const i=r.events[r.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===r.containerState.size?t(e):n(e)},"listItemIndent",r.containerState.size+1)}};const FEe={name:"setextUnderline",resolveTo:function(e,t){let n,r,i,o=e.length;for(;o--;)if("enter"===e[o][0]){if("content"===e[o][1].type){n=o;break}"paragraph"===e[o][1].type&&(r=o)}else"content"===e[o][1].type&&e.splice(o,1),i||"definition"!==e[o][1].type||(i=o);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[r][1].type="setextHeadingText",i?(e.splice(r,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const r=this;let i;return function(t){let a,s=r.events.length;for(;s--;)if("lineEnding"!==r.events[s][1].type&&"linePrefix"!==r.events[s][1].type&&"content"!==r.events[s][1].type){a="paragraph"===r.events[s][1].type;break}if(!r.parser.lazy[r.now().line]&&(r.interrupt||a))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),o(t)}(t);return n(t)};function o(t){return t===i?(e.consume(t),o):(e.exit("setextHeadingLineSequence"),Fxe(t)?zxe(e,a,"lineSuffix")(t):a(t))}function a(r){return null===r||Mxe(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}}};const LEe={tokenize:function(e){const t=this,n=e.attempt(Zxe,function(r){if(null===r)return void e.consume(r);return e.enter("lineEndingBlank"),e.consume(r),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,r,zxe(e,e.attempt(this.parser.constructs.flow,r,e.attempt(uEe,r)),"linePrefix")));return n;function r(r){if(null!==r)return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(r)}}};const jEe={resolveAll:UEe()},BEe=zEe("string"),$Ee=zEe("text");function zEe(e){return{resolveAll:UEe("text"===e?qEe:void 0),tokenize:function(t){const n=this,r=this.parser.constructs[e],i=t.attempt(r,o,a);return o;function o(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),s;t.consume(e)}function s(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),s)}function l(e){if(null===e)return!0;const t=r[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function UEe(e){return function(t,n){let r,i=-1;for(;++i<=t.length;)void 0===r?t[i]&&"data"===t[i][1].type&&(r=i,i++):t[i]&&"data"===t[i][1].type||(i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),i=r+2),r=void 0);return e?e(t,n):t}}function qEe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const r=e[n-1][1],i=t.sliceStream(r);let o,a=i.length,s=-1,l=0;for(;a--;){const e=i[a];if("string"==typeof e){for(s=e.length;32===e.charCodeAt(s-1);)l++,s--;if(s)break;s=-1}else if(-2===e)o=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const i={type:n===e.length||o||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?s:r.start._bufferIndex+s,_index:r.start._index+a,line:r.end.line,column:r.end.column-l,offset:r.end.offset-l},end:{...r.end}};r.end={...i.start},r.start.offset===r.end.offset?Object.assign(r,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const HEe={42:REe,43:REe,45:REe,48:REe,49:REe,50:REe,51:REe,52:REe,53:REe,54:REe,55:REe,56:REe,57:REe,62:Qxe},VEe={91:mEe},WEe={[-2]:nEe,[-1]:nEe,32:nEe},GEe={35:vEe,42:DEe,45:[FEe,DEe],60:_Ee,61:FEe,95:DEe,96:tEe,126:tEe},YEe={38:Jxe,92:Xxe},KEe={[-5]:NEe,[-4]:NEe,[-3]:NEe,33:IEe,38:Jxe,42:Gxe,60:[Kxe,SEe],91:OEe,92:[yEe,Xxe],93:kEe,95:Gxe,96:iEe},ZEe={null:[Gxe,jEe]},QEe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:VEe,disable:{null:[]},document:HEe,flow:GEe,flowInitial:WEe,insideSpan:ZEe,string:YEe,text:KEe},Symbol.toStringTag,{value:"Module"}));function XEe(e,t,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},o=[];let a=[],s=[];const l={attempt:g(function(e,t){y(e,t.from)}),check:g(m),consume:function(e){Mxe(e)?(r.line++,r.column=1,r.offset+=-3===e?2:1,v()):-1!==e&&(r.column++,r.offset++);r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===a[r._index].length&&(r._bufferIndex=-1,r._index++));u.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=f(),u.events.push(["enter",n,u]),s.push(n),n},exit:function(e){const t=s.pop();return t.end=f(),u.events.push(["exit",t,u]),t},interrupt:g(m,{interrupt:!0})},u={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,v()},events:[],now:f,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const o=e[n];let a;if("string"==typeof o)a=o;else switch(o){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(o)}i=-2===o,r.push(a)}return r.join("")}(d(e),t)},sliceStream:d,write:function(e){if(a=wxe(a,e),p(),null!==a[a.length-1])return[];return y(t,0),u.events=Wxe(o,u.events,u),u.events}};let c=t.tokenize.call(u,l);return t.resolveAll&&o.push(t),u;function d(e){return function(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,o=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(r,o)];else{if(a=e.slice(n,i),r>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(r):a.shift()}o>0&&a.push(e[i].slice(0,o))}return a}(a,e)}function f(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:o}=r;return{_bufferIndex:e,_index:t,line:n,column:i,offset:o}}function p(){let e;for(;r._index<a.length;){const t=a[r._index];if("string"==typeof t)for(e=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===e&&r._bufferIndex<t.length;)h(t.charCodeAt(r._bufferIndex));else h(t)}}function h(e){c=c(e)}function m(e,t){t.restore()}function g(e,t){return function(n,i,o){let a,c,d,p;return Array.isArray(n)?h(n):"tokenize"in n?h([n]):function(e){return t;function t(t){const n=null!==t&&e[t],r=null!==t&&e.null;return h([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(r)?r:r?[r]:[]])(t)}}(n);function h(e){return a=e,c=0,0===e.length?o:m(e[c])}function m(e){return function(n){p=function(){const e=f(),t=u.previous,n=u.currentConstruct,i=u.events.length,o=Array.from(s);return{from:i,restore:a};function a(){r=e,u.previous=t,u.currentConstruct=n,u.events.length=i,s=o,v()}}(),d=e,e.partial||(u.currentConstruct=e);if(e.name&&u.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(u),t):u,l,g,y)(n)}}function g(t){return e(d,p),i}function y(e){return p.restore(),++c<a.length?m(a[c]):o}}}function y(e,t){e.resolveAll&&!o.includes(e)&&o.push(e),e.resolve&&bxe(u.events,t,u.events.length-t,e.resolve(u.events.slice(t),u)),e.resolveTo&&(u.events=e.resolveTo(u.events,u))}function v(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}const JEe=/[\0\t\n\r]/g;const eSe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function tSe(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return kxe(n.slice(t?2:1),t?16:10)}return vxe(n)||e}const nSe={}.hasOwnProperty;function rSe(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(te),autolinkProtocol:k,autolinkEmail:k,atxHeading:o(Q),blockQuote:o(W),characterEscape:k,characterReference:k,codeFenced:o(G),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:o(G,a),codeText:o(Y,a),codeTextData:k,data:k,codeFlowValue:k,definition:o(K),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:o(Z),hardBreakEscape:o(X),hardBreakTrailing:o(X),htmlFlow:o(J,a),htmlFlowData:k,htmlText:o(J,a),htmlTextData:k,image:o(ee),label:a,link:o(te),listItem:o(re),listItemValue:f,listOrdered:o(ne,d),listUnordered:o(ne),paragraph:o(ie),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:o(Q),strong:o(oe),thematicBreak:o(se)},exit:{atxHeading:l(),atxHeadingSequence:_,autolink:l(),autolinkEmail:V,autolinkProtocol:H,blockQuote:l(),characterEscapeValue:T,characterReferenceMarkerHexadecimal:z,characterReferenceMarkerNumeric:z,characterReferenceValue:U,characterReference:q,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:p,codeFencedFenceMeta:h,codeFlowValue:T,codeIndented:l(y),codeText:l(N),codeTextData:T,data:T,definition:l(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:l(),hardBreakEscape:l(A),hardBreakTrailing:l(A),htmlFlow:l(I),htmlFlowData:T,htmlText:l(O),htmlTextData:T,image:l(R),label:P,labelText:M,lineEnding:C,link:l(D),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:$,resourceDestinationString:F,resourceTitleString:L,resource:j,setextHeading:l(S),setextHeadingLineSequence:E,setextHeadingText:x,strong:l(),thematicBreak:l()}};oSe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(e){let r={type:"root",children:[]};const o={stack:[r],tokenStack:[],config:t,enter:s,exit:u,buffer:a,resume:c,data:n},l=[];let d=-1;for(;++d<e.length;)if("listOrdered"===e[d][1].type||"listUnordered"===e[d][1].type)if("enter"===e[d][0])l.push(d);else{d=i(e,l.pop(),d)}for(d=-1;++d<e.length;){const n=t[e[d][0]];nSe.call(n,e[d][1].type)&&n[e[d][1].type].call(Object.assign({sliceSerialize:e[d][2].sliceSerialize},o),e[d][1])}if(o.tokenStack.length>0){const e=o.tokenStack[o.tokenStack.length-1];(e[1]||sSe).call(o,void 0,e[0])}for(r.position={start:iSe(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:iSe(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},d=-1;++d<t.transforms.length;)r=t.transforms[d](r)||r;return r}function i(e,t,n){let r,i,o,a,s=t-1,l=-1,u=!1;for(;++s<=n;){const t=e[s];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!r||a||l||o||(o=s),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(r){let a=s;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",u=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}o&&(!i||o<i)&&(r._spread=!0),r.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||s,0,["exit",r,t[2]]),s++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};r=i,e.splice(s,0,["enter",i,t[2]]),s++,n++,o=void 0,a=!0}}}return e[t][1]._spread=u,n}function o(e,t){return n;function n(n){s.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function s(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:iSe(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),u.call(this,t)}}function u(e,t){const n=this.stack.pop(),r=this.tokenStack.pop();if(!r)throw new Error("Cannot close `"+e.type+"` ("+V_e({start:e.start,end:e.end})+"): it’s not open");if(r[0].type!==e.type)if(t)t.call(this,e,r[0]);else{(r[1]||sSe).call(this,e,r[0])}n.position.end=iSe(e.end)}function c(){return hxe(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function p(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function h(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Txe(this.sliceSerialize(e)).toLowerCase()}function b(){const e=this.resume();this.stack[this.stack.length-1].title=e}function w(){const e=this.resume();this.stack[this.stack.length-1].url=e}function _(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function E(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function S(){this.data.setextHeadingSlurpLineEnding=void 0}function k(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:iSe(e.start),end:void 0},t.push(n)),this.stack.push(n)}function T(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=iSe(e.end)}function C(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=iSe(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(k.call(this,e),T.call(this,e))}function A(){this.data.atHardBreak=!0}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function O(){const e=this.resume();this.stack[this.stack.length-1].value=e}function N(){const e=this.resume();this.stack[this.stack.length-1].value=e}function D(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function R(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function M(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(eSe,tSe)}(t),n.identifier=Txe(t).toLowerCase()}function P(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function F(){const e=this.resume();this.stack[this.stack.length-1].url=e}function L(){const e=this.resume();this.stack[this.stack.length-1].title=e}function j(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function $(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Txe(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function z(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let r;if(n)r=kxe(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{r=vxe(t)}this.stack[this.stack.length-1].value+=r}function q(e){this.stack.pop().position.end=iSe(e.end)}function H(e){T.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function V(e){T.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function W(){return{type:"blockquote",children:[]}}function G(){return{type:"code",lang:null,meta:null,value:""}}function Y(){return{type:"inlineCode",value:""}}function K(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Z(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function J(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function re(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function oe(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function se(){return{type:"thematicBreak"}}}(n)(function(e){for(;!sEe(e););return e}(function(e){const t={constructs:xxe([QEe,...(e||{}).extensions||[]]),content:n(Uxe),defined:[],document:n(qxe),flow:n(LEe),lazy:{},string:n(BEe),text:n($Ee)};return t;function n(e){return function(n){return XEe(t,e,n)}}}(n).document().write(function(){let e,t=1,n="",r=!0;return function(i,o,a){const s=[];let l,u,c,d,f;for(i=n+("string"==typeof i?i.toString():new TextDecoder(o||void 0).decode(i)),c=0,n="",r&&(65279===i.charCodeAt(0)&&c++,r=void 0);c<i.length;){if(JEe.lastIndex=c,l=JEe.exec(i),d=l&&void 0!==l.index?l.index:i.length,f=i.charCodeAt(d),!l){n=i.slice(c);break}if(10===f&&c===d&&e)s.push(-3),e=void 0;else switch(e&&(s.push(-5),e=void 0),c<d&&(s.push(i.slice(c,d)),t+=d-c),f){case 0:s.push(65533),t++;break;case 9:for(u=4*Math.ceil(t/4),s.push(-2);t++<u;)s.push(-1);break;case 10:s.push(-4),t=1;break;default:e=!0,t=1}c=d+1}return a&&(e&&s.push(-5),n&&s.push(n),s.push(null)),s}}()(e,t,!0))))}function iSe(e){return{line:e.line,column:e.column,offset:e.offset}}function oSe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?oSe(e,r):aSe(e,r)}}function aSe(e,t){let n;for(n in t)if(nSe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function sSe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+V_e({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+V_e({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+V_e({start:t.start,end:t.end})+") is still open")}function lSe(e){const t=this;t.parser=function(n){return rSe(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function uSe(e,t){const n=t.referenceType;let r="]";if("collapsed"===n?r+="[]":"full"===n&&(r+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),o=i[0];o&&"text"===o.type?o.value="["+o.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=r:i.push({type:"text",value:r}),i}function cSe(e){const t=e.spread;return null==t?e.children.length>1:t}function dSe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const o=[];for(;r;)o.push(fSe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return o.push(fSe(t.slice(i),i>0,!1)),o.join("")}function fSe(e,t,n){let r=0,i=e.length;if(t){let t=e.codePointAt(r);for(;9===t||32===t;)r++,t=e.codePointAt(r)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}const pSe={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=$xe(r.toLowerCase()),o=e.footnoteOrder.indexOf(r);let a,s=e.footnoteCounts.get(r);void 0===s?(s=0,e.footnoteOrder.push(r),a=e.footnoteOrder.length):a=o+1,s+=1,e.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uSe(e,t);const i={src:$xe(r.url||""),alt:t.alt};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,o),e.applyData(t,o)},image:function(e,t){const n={src:$xe(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return uSe(e,t);const i={href:$xe(r.url||"")};null!==r.title&&void 0!==r.title&&(i.title=r.title);const o={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,o),e.applyData(t,o)},link:function(e,t){const n={href:$xe(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},listItem:function(e,t,n){const r=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=cSe(n[r])}return t}(n):cSe(t),o={},a=[];if("boolean"==typeof t.checked){const e=r[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},r.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const e=r[s];(i||0!==s||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const l=r[r.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const u={type:"element",tagName:"li",properties:o,children:a};return e.patch(t,u),e.applyData(t,u)},list:function(e,t){const n={},r=e.all(t);let i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<r.length;){const e=r[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const o={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,o),e.applyData(t,o)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const r={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},o=q_e(t.children[1]),a=U_e(t.children[t.children.length-1]);o&&a&&(r.position={start:o,end:a}),i.push(r)}const o={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,o),e.applyData(t,o)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const r=n?n.children:void 0,i=0===(r?r.indexOf(t):1)?"th":"td",o=n&&"table"===n.type?n.align:void 0,a=o?o.length:t.children.length;let s=-1;const l=[];for(;++s<a;){const n=t.children[s],r={},a=o?o[s]:void 0;a&&(r.align=a);let u={type:"element",tagName:i,properties:r,children:[]};n&&(u.children=e.all(n),e.patch(n,u),u=e.applyData(n,u)),l.push(u)}const u={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,u),e.applyData(t,u)},text:function(e,t){const n={type:"text",value:dSe(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:hSe,yaml:hSe,definition:hSe,footnoteDefinition:hSe};function hSe(){}const mSe="object"==typeof self?self:globalThis,gSe=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),r=i=>{if(e.has(i))return e.get(i);const[o,a]=t[i];switch(o){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(r(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[r(t)]=r(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(r(t),r(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(r(t));return e}case 7:{const{name:e,message:t}=a;return n(new mSe[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new mSe[o](a),i)};return r})(new Map,e)(0),ySe="",{toString:vSe}={},{keys:bSe}=Object,wSe=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=vSe.call(e).slice(8,-1);switch(n){case"Array":return[1,ySe];case"Object":return[2,ySe];case"Date":return[3,ySe];case"RegExp":return[4,ySe];case"Map":return[5,ySe];case"Set":return[6,ySe];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},_Se=([e,t])=>0===e&&("function"===t||"symbol"===t),xSe=(e,{json:t,lossy:n}={})=>{const r=[];return((e,t,n,r)=>{const i=(e,t)=>{const i=r.push(e)-1;return n.set(t,i),i},o=r=>{if(n.has(r))return n.get(r);let[a,s]=wSe(r);switch(a){case 0:{let t=r;switch(s){case"bigint":a=8,t=r.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+s);t=null;break;case"undefined":return i([-1],r)}return i([a,t],r)}case 1:{if(s){let e=r;return"DataView"===s?e=new Uint8Array(r.buffer):"ArrayBuffer"===s&&(e=new Uint8Array(r)),i([s,[...e]],r)}const e=[],t=i([a,e],r);for(const n of r)e.push(o(n));return t}case 2:{if(s)switch(s){case"BigInt":return i([s,r.toString()],r);case"Boolean":case"Number":case"String":return i([s,r.valueOf()],r)}if(t&&"toJSON"in r)return o(r.toJSON());const n=[],l=i([a,n],r);for(const t of bSe(r))!e&&_Se(wSe(r[t]))||n.push([o(t),o(r[t])]);return l}case 3:return i([a,r.toISOString()],r);case 4:{const{source:e,flags:t}=r;return i([a,{source:e,flags:t}],r)}case 5:{const t=[],n=i([a,t],r);for(const[i,a]of r)(e||!_Se(wSe(i))&&!_Se(wSe(a)))&&t.push([o(i),o(a)]);return n}case 6:{const t=[],n=i([a,t],r);for(const i of r)!e&&_Se(wSe(i))||t.push(o(i));return n}}const{message:l}=r;return i([a,{name:s,message:l}],r)};return o})(!(t||n),!!t,new Map,r)(e),r},ESe="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?gSe(xSe(e,t)):structuredClone(e):(e,t)=>gSe(xSe(e,t));function SSe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function kSe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const TSe=function(e){if(null==e)return ASe;if("function"==typeof e)return CSe(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=TSe(e[n]);return CSe(r);function r(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return CSe(n);function n(n){const r=n;let i;for(i in e)if(r[i]!==t[i])return!1;return!0}}(e);if("string"==typeof e)return function(e){return CSe(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function CSe(e){return function(t,n,r){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,r||void 0))}}function ASe(){return!0}const ISe=[],OSe=!0,NSe=!1;function DSe(e,t,n,r){let i;"function"==typeof t&&"function"!=typeof n?(r=n,n=t):i=t;const o=TSe(i),a=r?-1:1;!function e(i,s,l){const u=i&&"object"==typeof i?i:{};if("string"==typeof u.type){const e="string"==typeof u.tagName?u.tagName:"string"==typeof u.name?u.name:void 0;Object.defineProperty(c,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return c;function c(){let u,c,d,f=ISe;if((!t||o(i,s,l[l.length-1]||void 0))&&(f=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[OSe,e];return null==e?ISe:[e]}(n(i,l)),f[0]===NSe))return f;if("children"in i&&i.children){const t=i;if(t.children&&"skip"!==f[0])for(c=(r?t.children.length:-1)+a,d=l.concat(t);c>-1&&c<t.children.length;){const n=t.children[c];if(u=e(n,c,d)(),u[0]===NSe)return u;c="number"==typeof u[1]?u[1]:c+a}}return f}}(e,void 0,[])()}function RSe(e,t,n,r){let i,o,a;"function"==typeof t&&"function"!=typeof n?(o=void 0,a=t,i=n):(o=t,a=n,i=r),DSe(e,o,function(e,t){const n=t[t.length-1],r=n?n.children.indexOf(e):void 0;return a(e,r,n)},i)}const MSe={}.hasOwnProperty,PSe={};function FSe(e,t){e.position&&(t.position=function(e){const t=q_e(e),n=U_e(e);if(t&&n)return{start:t,end:n}}(e))}function LSe(e,t){let n=t;if(e&&e.data){const t=e.data.hName,r=e.data.hChildren,i=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,ESe(i)),"children"in n&&n.children&&null!=r&&(n.children=r)}return n}function jSe(e,t){const n=t.data||{},r=!("value"in t)||MSe.call(n,"hProperties")||MSe.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,r),e.applyData(t,r)}function BSe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:"\n"});++r<e.length;)r&&n.push({type:"text",value:"\n"}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function $Se(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function zSe(e,t){const n=function(e,t){const n=t||PSe,r=new Map,i=new Map,o=new Map,a={...pSe,...n.handlers},s={all:function(e){const t=[];if("children"in e){const n=e.children;let r=-1;for(;++r<n.length;){const i=s.one(n[r],e);if(i){if(r&&"break"===n[r-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=$Se(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=$Se(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:LSe,definitionById:r,footnoteById:i,footnoteCounts:o,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,r=s.handlers[n];if(MSe.call(s.handlers,n)&&r)return r(s,e,t);if(s.options.passThrough&&s.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,r=ESe(n);return r.children=s.all(e),r}return ESe(e)}return(s.options.unknownHandler||jSe)(s,e,t)},options:n,patch:FSe,wrap:BSe};return RSe(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?r:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),s}(e,t),r=n.one(e,void 0),i=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||SSe,r=e.options.footnoteBackLabel||kSe,i=e.options.footnoteLabel||"Footnotes",o=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const o=e.all(i),a=String(i.identifier).toUpperCase(),u=$xe(a.toLowerCase());let c=0;const d=[],f=e.footnoteCounts.get(a);for(;void 0!==f&&++c<=f;){d.length>0&&d.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,c);"string"==typeof e&&(e={type:"text",value:e}),d.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+u+(c>1?"-"+c:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof r?r:r(l,c),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const p=o[o.length-1];if(p&&"element"===p.type&&"p"===p.tagName){const e=p.children[p.children.length-1];e&&"text"===e.type?e.value+=" ":p.children.push({type:"text",value:" "}),p.children.push(...d)}else o.push(...d);const h={type:"element",tagName:"li",properties:{id:t+"fn-"+u},children:e.wrap(o,!0)};e.patch(i,h),s.push(h)}if(0!==s.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...ESe(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(s,!0)},{type:"text",value:"\n"}]}}(n),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&o.children.push({type:"text",value:"\n"},i),o}function USe(e,t){return e&&"run"in e?async function(n,r){const i=zSe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return zSe(n,{file:r,...e||t})}}function qSe(e){if(e)throw e}var HSe,VSe;var WSe=function(){if(VSe)return HSe;VSe=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===t.call(e)},o=function(n){if(!n||"[object Object]"!==t.call(n))return!1;var r,i=e.call(n,"constructor"),o=n.constructor&&n.constructor.prototype&&e.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!i&&!o)return!1;for(r in n);return void 0===r||e.call(n,r)},a=function(e,t){n&&"__proto__"===t.name?n(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},s=function(t,n){if("__proto__"===n){if(!e.call(t,n))return;if(r)return r(t,n).value}return t[n]};return HSe=function e(){var t,n,r,l,u,c,d=arguments[0],f=1,p=arguments.length,h=!1;for("boolean"==typeof d&&(h=d,d=arguments[1]||{},f=2),(null==d||"object"!=typeof d&&"function"!=typeof d)&&(d={});f<p;++f)if(null!=(t=arguments[f]))for(n in t)r=s(d,n),d!==(l=s(t,n))&&(h&&l&&(o(l)||(u=i(l)))?(u?(u=!1,c=r&&i(r)?r:[]):c=r&&o(r)?r:{},a(d,{name:n,newValue:e(h,c,l)})):void 0!==l&&a(d,{name:n,newValue:l}));return d},HSe}();const GSe=f(WSe);function YSe(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function KSe(){const e=[],t={run:function(...t){let n=-1;const r=t.pop();if("function"!=typeof r)throw new TypeError("Expected function as last argument, not "+r);!function i(o,...a){const s=e[++n];let l=-1;if(o)r(o);else{for(;++l<t.length;)null!==a[l]&&void 0!==a[l]||(a[l]=t[l]);t=a,s?function(e,t){let n;return r;function r(...t){const r=e.length>t.length;let s;r&&t.push(i);try{s=e.apply(this,t)}catch(o){if(r&&n)throw o;return i(o)}r||(s&&s.then&&"function"==typeof s.then?s.then(a,i):s instanceof Error?i(s):a(s))}function i(e,...r){n||(n=!0,t(e,...r))}function a(e){i(null,e)}}(s,i)(...a):r(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const ZSe={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');QSe(e);let n,r=0,i=-1,o=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else i<0&&(n=!0,i=o+1);return i<0?"":e.slice(r,i)}if(t===e)return"";let a=-1,s=t.length-1;for(;o--;)if(47===e.codePointAt(o)){if(n){r=o+1;break}}else a<0&&(n=!0,a=o+1),s>-1&&(e.codePointAt(o)===t.codePointAt(s--)?s<0&&(i=o):(s=-1,i=a));r===i?i=a:i<0&&(i=e.length);return e.slice(r,i)},dirname:function(e){if(QSe(e),0===e.length)return".";let t,n=-1,r=e.length;for(;--r;)if(47===e.codePointAt(r)){if(t){n=r;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){QSe(e);let t,n=e.length,r=-1,i=0,o=-1,a=0;for(;n--;){const s=e.codePointAt(n);if(47!==s)r<0&&(t=!0,r=n+1),46===s?o<0?o=n:1!==a&&(a=1):o>-1&&(a=-1);else if(t){i=n+1;break}}if(o<0||r<0||0===a||1===a&&o===r-1&&o===i+1)return"";return e.slice(o,r)},join:function(...e){let t,n=-1;for(;++n<e.length;)QSe(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){QSe(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,r,i="",o=0,a=-1,s=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===s);else if(a!==l-1&&2===s){if(i.length<2||2!==o||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(r=i.lastIndexOf("/"),r!==i.length-1){r<0?(i="",o=0):(i=i.slice(0,r),o=i.length-1-i.lastIndexOf("/")),a=l,s=0;continue}}else if(i.length>0){i="",o=0,a=l,s=0;continue}t&&(i=i.length>0?i+"/..":"..",o=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),o=l-a-1;a=l,s=0}else 46===n&&s>-1?s++:s=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function QSe(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const XSe={cwd:function(){return"/"}};function JSe(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function eke(e){if("string"==typeof e)e=new URL(e);else if(!JSe(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const tke=["history","path","basename","stem","extname","dirname"];class nke{constructor(e){let t;t=e?JSe(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":XSe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,r=-1;for(;++r<tke.length;){const e=tke[r];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)tke.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?ZSe.basename(this.path):void 0}set basename(e){ike(e,"basename"),rke(e,"basename"),this.path=ZSe.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?ZSe.dirname(this.path):void 0}set dirname(e){oke(this.basename,"dirname"),this.path=ZSe.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?ZSe.extname(this.path):void 0}set extname(e){if(rke(e,"extname"),oke(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ZSe.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){JSe(e)&&(e=eke(e)),ike(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?ZSe.basename(this.path,this.extname):void 0}set stem(e){ike(e,"stem"),rke(e,"stem"),this.path=ZSe.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const r=this.message(e,t,n);throw r.fatal=!0,r}info(e,t,n){const r=this.message(e,t,n);return r.fatal=void 0,r}message(e,t,n){const r=new K_e(e,t,n);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function rke(e,t){if(e&&e.includes(ZSe.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ZSe.sep+"`")}function ike(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function oke(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const ake=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},ske={}.hasOwnProperty;class lke extends ake{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=KSe()}copy(){const e=new lke;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(GSe(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(fke("data",this.frozen),this.namespace[e]=t,this):ske.call(this.namespace,e)&&this.namespace[e]||void 0:e?(fke("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const r=t.call(e,...n);"function"==typeof r&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=mke(e),n=this.parser||this.Parser;return cke("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),cke("process",this.parser||this.Parser),dke("process",this.compiler||this.Compiler),t?r(void 0,t):new Promise(r);function r(r,i){const o=mke(e),a=n.parse(o);function s(e,n){e||!n?i(e):r?r(n):t(void 0,n)}n.run(a,o,function(e,t,r){if(e||!t||!r)return s(e);const i=t,o=n.stringify(i,r);var a;"string"==typeof(a=o)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?r.value=o:r.result=o,s(e,r)})}}processSync(e){let t,n=!1;return this.freeze(),cke("processSync",this.parser||this.Parser),dke("processSync",this.compiler||this.Compiler),this.process(e,function(e,r){n=!0,qSe(e),t=r}),hke("processSync","process",n),t}run(e,t,n){pke(e),this.freeze();const r=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,o){const a=mke(t);r.run(e,a,function(t,r,a){const s=r||e;t?o(t):i?i(s):n(void 0,s,a)})}}runSync(e,t){let n,r=!1;return this.run(e,t,function(e,t){qSe(e),n=t,r=!0}),hke("runSync","run",r),n}stringify(e,t){this.freeze();const n=mke(t),r=this.compiler||this.Compiler;return dke("stringify",r),pke(e),r(e,n)}use(e,...t){const n=this.attachers,r=this.namespace;if(fke("use",this.frozen),null==e);else if("function"==typeof e)s(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):o(e)}return this;function i(e){if("function"==typeof e)s(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;s(t,n)}else o(e)}}function o(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(r.settings=GSe(!0,r.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){i(e[t])}}}function s(e,t){let r=-1,i=-1;for(;++r<n.length;)if(n[r][0]===e){i=r;break}if(-1===i)n.push([e,...t]);else if(t.length>0){let[r,...o]=t;const a=n[i][1];YSe(a)&&YSe(r)&&(r=GSe(!0,a,r)),n[i]=[e,r,...o]}}}}const uke=(new lke).freeze();function cke(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function dke(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function fke(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function pke(e){if(!YSe(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function hke(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function mke(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new nke(e)}const gke=[],yke={allowDangerousHtml:!0},vke=/^(https?|ircs?|mailto|xmpp)$/i,bke=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wke(e){const t=function(e){const t=e.rehypePlugins||gke,n=e.remarkPlugins||gke,r=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...yke}:yke,i=uke().use(lSe).use(n).use(USe,r).use(t);return i}(e),n=function(e){const t=e.children||"",n=new nke;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,r=t.allowElement,i=t.components,o=t.disallowedElements,a=t.skipHtml,s=t.unwrapDisallowed,l=t.urlTransform||_ke;for(const c of bke)Object.hasOwn(t,c.from)&&jwe((c.from,c.to&&c.to,c.id));return RSe(e,u),nxe(e,{Fragment:w.Fragment,components:i,ignoreInvalidStyle:!0,jsx:w.jsx,jsxs:w.jsxs,passKeys:!0,passNode:!0});function u(e,t,i){if("raw"===e.type&&i&&"number"==typeof t)return a?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in fxe)if(Object.hasOwn(fxe,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],r=fxe[t];(null===r||r.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!o&&o.includes(e.tagName);if(!a&&r&&"number"==typeof t&&(a=!r(e,t,i)),a&&i&&"number"==typeof t)return s&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function _ke(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return-1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==r&&t>r||vke.test(e.slice(0,t))?e:""}function xke(e,t){const n=String(e);if("string"!=typeof t)throw new TypeError("Expected character");let r=0,i=n.indexOf(t);for(;-1!==i;)r++,i=n.indexOf(t,i+t.length);return r}function Eke(e,t,n){const r=TSe((n||{}).ignore||[]),i=function(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const e=n[r];t.push([Ske(e[0]),kke(e[1])])}return t}(t);let o=-1;for(;++o<i.length;)DSe(e,"text",a);function a(e,t){let n,a=-1;for(;++a<t.length;){const e=t[a],i=n?n.children:void 0;if(r(e,i?i.indexOf(e):void 0,n))return;n=e}if(n)return function(e,t){const n=t[t.length-1],r=i[o][0],a=i[o][1];let s=0;const l=n.children.indexOf(e);let u=!1,c=[];r.lastIndex=0;let d=r.exec(e.value);for(;d;){const n=d.index,i={index:d.index,input:d.input,stack:[...t,e]};let o=a(...d,i);if("string"==typeof o&&(o=o.length>0?{type:"text",value:o}:void 0),!1===o?r.lastIndex=n+1:(s!==n&&c.push({type:"text",value:e.value.slice(s,n)}),Array.isArray(o)?c.push(...o):o&&c.push(o),s=n+d[0].length,u=!0),!r.global)break;d=r.exec(e.value)}u?(s<e.value.length&&c.push({type:"text",value:e.value.slice(s)}),n.children.splice(l,1,...c)):c=[e];return l+c.length}(e,t)}}function Ske(e){return"string"==typeof e?new RegExp(function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}(e),"g"):e}function kke(e){return"function"==typeof e?e:function(){return e}}const Tke="phrasing",Cke=["autolink","link","image","label"];function Ake(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function Ike(e){this.config.enter.autolinkProtocol.call(this,e)}function Oke(e){this.config.exit.autolinkProtocol.call(this,e)}function Nke(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function Dke(e){this.config.exit.autolinkEmail.call(this,e)}function Rke(e){this.exit(e)}function Mke(e){Eke(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Pke],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),Fke]],{ignore:["link","linkReference"]})}function Pke(e,t,n,r,i){let o="";if(!Lke(i))return!1;if(/^w/i.test(t)&&(n=t+n,t="",o="http://"),!function(e){const t=e.split(".");if(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))return!1;return!0}(n))return!1;const a=function(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const i=xke(e,"(");let o=xke(e,")");for(;-1!==r&&i>o;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),o++;return[e,n]}(n+r);if(!a[0])return!1;const s={type:"link",title:null,url:o+t+a[0],children:[{type:"text",value:t+a[0]}]};return a[1]?[s,{type:"text",value:a[1]}]:s}function Fke(e,t,n,r){return!(!Lke(r,!0)||/[-\d_]$/.test(n))&&{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function Lke(e,t){const n=e.input.charCodeAt(e.index-1);return(0===e.index||jxe(n)||Lxe(n))&&(!t||47!==n)}function jke(){this.buffer()}function Bke(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function $ke(){this.buffer()}function zke(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function Uke(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Txe(this.sliceSerialize(e)).toLowerCase(),n.label=t}function qke(e){this.exit(e)}function Hke(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Txe(this.sliceSerialize(e)).toLowerCase(),n.label=t}function Vke(e){this.exit(e)}function Wke(e,t,n,r){const i=n.createTracker(r);let o=i.move("[^");const a=n.enter("footnoteReference"),s=n.enter("reference");return o+=i.move(n.safe(n.associationId(e),{after:"]",before:o})),s(),a(),o+=i.move("]"),o}function Gke(e){let t=!1;return e&&e.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:function(e,n,r,i){const o=r.createTracker(i);let a=o.move("[^");const s=r.enter("footnoteDefinition"),l=r.enter("label");a+=o.move(r.safe(r.associationId(e),{before:a,after:"]"})),l(),a+=o.move("]:"),e.children&&e.children.length>0&&(o.shift(4),a+=o.move((t?"\n":" ")+r.indentLines(r.containerFlow(e,o.current()),t?Kke:Yke)));return s(),a},footnoteReference:Wke},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]}}function Yke(e,t,n){return 0===t?e:Kke(e,t,n)}function Kke(e,t,n){return(n?"":"    ")+e}Wke.peek=function(){return"["};const Zke=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];function Qke(e){this.enter({type:"delete",children:[]},e)}function Xke(e){this.exit(e)}function Jke(e,t,n,r){const i=n.createTracker(r),o=n.enter("strikethrough");let a=i.move("~~");return a+=n.containerPhrasing(e,{...i.current(),before:a,after:"~"}),a+=i.move("~~"),o(),a}function eTe(e){return e.length}function tTe(e){return null==e?"":String(e)}function nTe(e){const t="string"==typeof e?e.codePointAt(0):0;return 67===t||99===t?99:76===t||108===t?108:82===t||114===t?114:0}Jke.peek=function(){return"~"};const rTe={}.hasOwnProperty;function iTe(e,t){const n=t||{};function r(t,...n){let i=r.invalid;const o=r.handlers;if(t&&rTe.call(t,e)){const n=String(t[e]);i=rTe.call(o,n)?o[n]:r.unknown}if(i)return i.call(this,t,...n)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}function oTe(e,t,n){return">"+(n?"":" ")+e}function aTe(e,t){return sTe(e,t.inConstruct,!0)&&!sTe(e,t.notInConstruct,!1)}function sTe(e,t,n){if("string"==typeof t&&(t=[t]),!t||0===t.length)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function lTe(e,t,n,r){let i=-1;for(;++i<n.unsafe.length;)if("\n"===n.unsafe[i].character&&aTe(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return"\\\n"}function uTe(e,t,n){return(n?"":"    ")+e}function cTe(e){const t=e.options.quote||'"';if('"'!==t&&"'"!==t)throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function dTe(e){return"&#x"+e.toString(16).toUpperCase()+";"}function fTe(e,t,n){const r=Vxe(e),i=Vxe(t);return void 0===r?void 0===i?"_"===n?{inside:!0,outside:!0}:{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!0}:1===r?void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!0}:{inside:!1,outside:!1}:void 0===i?{inside:!1,outside:!1}:1===i?{inside:!0,outside:!1}:{inside:!1,outside:!1}}function pTe(e,t,n,r){const i=function(e){const t=e.options.emphasis||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}(n),o=n.enter("emphasis"),a=n.createTracker(r),s=a.move(i);let l=a.move(n.containerPhrasing(e,{after:i,before:s,...a.current()}));const u=l.charCodeAt(0),c=fTe(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=dTe(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=fTe(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+dTe(d));const p=a.move(i);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},s+l+p}function hTe(e){return e.value||""}function mTe(e,t,n,r){const i=cTe(n),o='"'===i?"Quote":"Apostrophe",a=n.enter("image");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("![");return u+=l.move(n.safe(e.alt,{before:u,after:"]",...l.current()})),u+=l.move("]("),s(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":")",...l.current()}))),s(),e.title&&(s=n.enter(`title${o}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),u+=l.move(")"),a(),u}function gTe(e,t,n,r){const i=e.referenceType,o=n.enter("imageReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("![");const u=n.safe(e.alt,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=c,o(),"full"!==i&&u&&u===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function yTe(e,t,n){let r=e.value||"",i="`",o=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++o<n.unsafe.length;){const e=n.unsafe[o],t=n.compilePattern(e);let i;if(e.atBreak)for(;i=t.exec(r);){let e=i.index;10===r.charCodeAt(e)&&13===r.charCodeAt(e-1)&&e--,r=r.slice(0,e)+" "+r.slice(i.index+1)}}return i+r+i}function vTe(e,t){const n=hxe(e);return Boolean(!t.options.resourceLink&&e.url&&!e.title&&e.children&&1===e.children.length&&"text"===e.children[0].type&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}function bTe(e,t,n,r){const i=cTe(n),o='"'===i?"Quote":"Apostrophe",a=n.createTracker(r);let s,l;if(vTe(e,n)){const t=n.stack;n.stack=[],s=n.enter("autolink");let r=a.move("<");return r+=a.move(n.containerPhrasing(e,{before:r,after:">",...a.current()})),r+=a.move(">"),s(),n.stack=t,r}s=n.enter("link"),l=n.enter("label");let u=a.move("[");return u+=a.move(n.containerPhrasing(e,{before:u,after:"](",...a.current()})),u+=a.move("]("),l(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(e.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(e.url,{before:u,after:e.title?" ":")",...a.current()}))),l(),e.title&&(l=n.enter(`title${o}`),u+=a.move(" "+i),u+=a.move(n.safe(e.title,{before:u,after:i,...a.current()})),u+=a.move(i),l()),u+=a.move(")"),s(),u}function wTe(e,t,n,r){const i=e.referenceType,o=n.enter("linkReference");let a=n.enter("label");const s=n.createTracker(r);let l=s.move("[");const u=n.containerPhrasing(e,{before:l,after:"]",...s.current()});l+=s.move(u+"]["),a();const c=n.stack;n.stack=[],a=n.enter("reference");const d=n.safe(n.associationId(e),{before:l,after:"]",...s.current()});return a(),n.stack=c,o(),"full"!==i&&u&&u===d?"shortcut"===i?l=l.slice(0,-1):l+=s.move("]"):l+=s.move(d+"]"),l}function _Te(e){const t=e.options.bullet||"*";if("*"!==t&&"+"!==t&&"-"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function xTe(e){const t=e.options.rule||"*";if("*"!==t&&"-"!==t&&"_"!==t)throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}pTe.peek=function(e,t,n){return n.options.emphasis||"*"},hTe.peek=function(){return"<"},mTe.peek=function(){return"!"},gTe.peek=function(){return"!"},yTe.peek=function(){return"`"},bTe.peek=function(e,t,n){return vTe(e,n)?"<":"["},wTe.peek=function(){return"["};const ETe=TSe(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function STe(e,t,n,r){const i=function(e){const t=e.options.strong||"*";if("*"!==t&&"_"!==t)throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}(n),o=n.enter("strong"),a=n.createTracker(r),s=a.move(i+i);let l=a.move(n.containerPhrasing(e,{after:i,before:s,...a.current()}));const u=l.charCodeAt(0),c=fTe(r.before.charCodeAt(r.before.length-1),u,i);c.inside&&(l=dTe(u)+l.slice(1));const d=l.charCodeAt(l.length-1),f=fTe(r.after.charCodeAt(0),d,i);f.inside&&(l=l.slice(0,-1)+dTe(d));const p=a.move(i+i);return o(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},s+l+p}STe.peek=function(e,t,n){return n.options.strong||"*"};const kTe={blockquote:function(e,t,n,r){const i=n.enter("blockquote"),o=n.createTracker(r);o.move("> "),o.shift(2);const a=n.indentLines(n.containerFlow(e,o.current()),oTe);return i(),a},break:lTe,code:function(e,t,n,r){const i=function(e){const t=e.options.fence||"`";if("`"!==t&&"~"!==t)throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}(n),o=e.value||"",a="`"===i?"GraveAccent":"Tilde";if(function(e,t){return Boolean(!1===t.options.fences&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}(e,n)){const e=n.enter("codeIndented"),t=n.indentLines(o,uTe);return e(),t}const s=n.createTracker(r),l=i.repeat(Math.max(function(e,t){const n=String(e);let r=n.indexOf(t),i=r,o=0,a=0;if("string"!=typeof t)throw new TypeError("Expected substring");for(;-1!==r;)r===i?++o>a&&(a=o):o=1,i=r+t.length,r=n.indexOf(t,i);return a}(o,i)+1,3)),u=n.enter("codeFenced");let c=s.move(l);if(e.lang){const t=n.enter(`codeFencedLang${a}`);c+=s.move(n.safe(e.lang,{before:c,after:" ",encode:["`"],...s.current()})),t()}if(e.lang&&e.meta){const t=n.enter(`codeFencedMeta${a}`);c+=s.move(" "),c+=s.move(n.safe(e.meta,{before:c,after:"\n",encode:["`"],...s.current()})),t()}return c+=s.move("\n"),o&&(c+=s.move(o+"\n")),c+=s.move(l),u(),c},definition:function(e,t,n,r){const i=cTe(n),o='"'===i?"Quote":"Apostrophe",a=n.enter("definition");let s=n.enter("label");const l=n.createTracker(r);let u=l.move("[");return u+=l.move(n.safe(n.associationId(e),{before:u,after:"]",...l.current()})),u+=l.move("]: "),s(),!e.url||/[\0- \u007F]/.test(e.url)?(s=n.enter("destinationLiteral"),u+=l.move("<"),u+=l.move(n.safe(e.url,{before:u,after:">",...l.current()})),u+=l.move(">")):(s=n.enter("destinationRaw"),u+=l.move(n.safe(e.url,{before:u,after:e.title?" ":"\n",...l.current()}))),s(),e.title&&(s=n.enter(`title${o}`),u+=l.move(" "+i),u+=l.move(n.safe(e.title,{before:u,after:i,...l.current()})),u+=l.move(i),s()),a(),u},emphasis:pTe,hardBreak:lTe,heading:function(e,t,n,r){const i=Math.max(Math.min(6,e.depth||1),1),o=n.createTracker(r);if(function(e,t){let n=!1;return RSe(e,function(e){if("value"in e&&/\r?\n|\r/.test(e.value)||"break"===e.type)return n=!0,NSe}),Boolean((!e.depth||e.depth<3)&&hxe(e)&&(t.options.setext||n))}(e,n)){const t=n.enter("headingSetext"),r=n.enter("phrasing"),a=n.containerPhrasing(e,{...o.current(),before:"\n",after:"\n"});return r(),t(),a+"\n"+(1===i?"=":"-").repeat(a.length-(Math.max(a.lastIndexOf("\r"),a.lastIndexOf("\n"))+1))}const a="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");o.move(a+" ");let u=n.containerPhrasing(e,{before:"# ",after:"\n",...o.current()});return/^[\t ]/.test(u)&&(u=dTe(u.charCodeAt(0))+u.slice(1)),u=u?a+" "+u:a,n.options.closeAtx&&(u+=" "+a),l(),s(),u},html:hTe,image:mTe,imageReference:gTe,inlineCode:yTe,link:bTe,linkReference:wTe,list:function(e,t,n,r){const i=n.enter("list"),o=n.bulletCurrent;let a=e.ordered?function(e){const t=e.options.bulletOrdered||".";if("."!==t&&")"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}(n):_Te(n);const s=e.ordered?"."===a?")":".":function(e){const t=_Te(e),n=e.options.bulletOther;if(!n)return"*"===t?"-":"*";if("*"!==n&&"+"!==n&&"-"!==n)throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}(n);let l=!(!t||!n.bulletLastUsed)&&a===n.bulletLastUsed;if(!e.ordered){const t=e.children?e.children[0]:void 0;if("*"!==a&&"-"!==a||!t||t.children&&t.children[0]||"list"!==n.stack[n.stack.length-1]||"listItem"!==n.stack[n.stack.length-2]||"list"!==n.stack[n.stack.length-3]||"listItem"!==n.stack[n.stack.length-4]||0!==n.indexStack[n.indexStack.length-1]||0!==n.indexStack[n.indexStack.length-2]||0!==n.indexStack[n.indexStack.length-3]||(l=!0),xTe(n)===a&&t){let t=-1;for(;++t<e.children.length;){const n=e.children[t];if(n&&"listItem"===n.type&&n.children&&n.children[0]&&"thematicBreak"===n.children[0].type){l=!0;break}}}}l&&(a=s),n.bulletCurrent=a;const u=n.containerFlow(e,r);return n.bulletLastUsed=a,n.bulletCurrent=o,i(),u},listItem:function(e,t,n,r){const i=function(e){const t=e.options.listItemIndent||"one";if("tab"!==t&&"one"!==t&&"mixed"!==t)throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}(n);let o=n.bulletCurrent||_Te(n);t&&"list"===t.type&&t.ordered&&(o=("number"==typeof t.start&&t.start>-1?t.start:1)+(!1===n.options.incrementListMarker?0:t.children.indexOf(e))+o);let a=o.length+1;("tab"===i||"mixed"===i&&(t&&"list"===t.type&&t.spread||e.spread))&&(a=4*Math.ceil(a/4));const s=n.createTracker(r);s.move(o+" ".repeat(a-o.length)),s.shift(a);const l=n.enter("listItem"),u=n.indentLines(n.containerFlow(e,s.current()),function(e,t,n){if(t)return(n?"":" ".repeat(a))+e;return(n?o:o+" ".repeat(a-o.length))+e});return l(),u},paragraph:function(e,t,n,r){const i=n.enter("paragraph"),o=n.enter("phrasing"),a=n.containerPhrasing(e,r);return o(),i(),a},root:function(e,t,n,r){return(e.children.some(function(e){return ETe(e)})?n.containerPhrasing:n.containerFlow).call(n,e,r)},strong:STe,text:function(e,t,n,r){return n.safe(e.value,r)},thematicBreak:function(e,t,n){const r=(xTe(n)+(n.options.ruleSpaces?" ":"")).repeat(function(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}(n));return n.options.ruleSpaces?r.slice(0,-1):r}};function TTe(e){const t=e._align;this.enter({type:"table",align:t.map(function(e){return"none"===e?null:e}),children:[]},e),this.data.inTable=!0}function CTe(e){this.exit(e),this.data.inTable=void 0}function ATe(e){this.enter({type:"tableRow",children:[]},e)}function ITe(e){this.exit(e)}function OTe(e){this.enter({type:"tableCell",children:[]},e)}function NTe(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,DTe));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function DTe(e,t){return"|"===t?t:e}function RTe(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,i=t.stringLength,o=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:"\n",inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[\t :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:function(e,t,n){let r=kTe.inlineCode(e,t,n);n.stack.includes("tableCell")&&(r=r.replace(/\|/g,"\\$&"));return r},table:function(e,t,n,r){return s(function(e,t,n){const r=e.children;let i=-1;const o=[],a=t.enter("table");for(;++i<r.length;)o[i]=l(r[i],t,n);return a(),o}(e,n,r),e.align)},tableCell:a,tableRow:function(e,t,n,r){const i=s([l(e,n,r)]);return i.slice(0,i.indexOf("\n"))}}};function a(e,t,n,r){const i=n.enter("tableCell"),a=n.enter("phrasing"),s=n.containerPhrasing(e,{...r,before:o,after:o});return a(),i(),s}function s(e,t){return function(e,t){const n=t||{},r=(n.align||[]).concat(),i=n.stringLength||eTe,o=[],a=[],s=[],l=[];let u=0,c=-1;for(;++c<e.length;){const t=[],r=[];let o=-1;for(e[c].length>u&&(u=e[c].length);++o<e[c].length;){const a=tTe(e[c][o]);if(!1!==n.alignDelimiters){const e=i(a);r[o]=e,(void 0===l[o]||e>l[o])&&(l[o]=e)}t.push(a)}a[c]=t,s[c]=r}let d=-1;if("object"==typeof r&&"length"in r)for(;++d<u;)o[d]=nTe(r[d]);else{const e=nTe(r);for(;++d<u;)o[d]=e}d=-1;const f=[],p=[];for(;++d<u;){const e=o[d];let t="",r="";99===e?(t=":",r=":"):108===e?t=":":114===e&&(r=":");let i=!1===n.alignDelimiters?1:Math.max(1,l[d]-t.length-r.length);const a=t+"-".repeat(i)+r;!1!==n.alignDelimiters&&(i=t.length+i+r.length,i>l[d]&&(l[d]=i),p[d]=i),f[d]=a}a.splice(1,0,f),s.splice(1,0,p),c=-1;const h=[];for(;++c<a.length;){const e=a[c],t=s[c];d=-1;const r=[];for(;++d<u;){const i=e[d]||"";let a="",s="";if(!1!==n.alignDelimiters){const e=l[d]-(t[d]||0),n=o[d];114===n?a=" ".repeat(e):99===n?e%2?(a=" ".repeat(e/2+.5),s=" ".repeat(e/2-.5)):(a=" ".repeat(e/2),s=a):s=" ".repeat(e)}!1===n.delimiterStart||d||r.push("|"),!1===n.padding||!1===n.alignDelimiters&&""===i||!1===n.delimiterStart&&!d||r.push(" "),!1!==n.alignDelimiters&&r.push(a),r.push(i),!1!==n.alignDelimiters&&r.push(s),!1!==n.padding&&r.push(" "),!1===n.delimiterEnd&&d===u-1||r.push("|")}h.push(!1===n.delimiterEnd?r.join("").replace(/ +$/,""):r.join(""))}return h.join("\n")}(e,{align:t,alignDelimiters:r,padding:n,stringLength:i})}function l(e,t,n){const r=e.children;let i=-1;const o=[],s=t.enter("tableRow");for(;++i<r.length;)o[i]=a(r[i],0,t,n);return s(),o}}function MTe(e){const t=this.stack[this.stack.length-2];t.type,t.checked="taskListCheckValueChecked"===e.type}function PTe(e){const t=this.stack[this.stack.length-2];if(t&&"listItem"===t.type&&"boolean"==typeof t.checked){const e=this.stack[this.stack.length-1];e.type;const n=e.children[0];if(n&&"text"===n.type){const r=t.children;let i,o=-1;for(;++o<r.length;){const e=r[o];if("paragraph"===e.type){i=e;break}}i===e&&(n.value=n.value.slice(1),0===n.value.length?e.children.shift():e.position&&n.position&&"number"==typeof n.position.start.offset&&(n.position.start.column++,n.position.start.offset++,e.position.start=Object.assign({},n.position.start)))}}this.exit(e)}function FTe(e,t,n,r){const i=e.children[0],o="boolean"==typeof e.checked&&i&&"paragraph"===i.type,a="["+(e.checked?"x":" ")+"] ",s=n.createTracker(r);o&&s.move(a);let l=kTe.listItem(e,t,n,{...r,...s.current()});return o&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,function(e){return e+a})),l}const LTe={tokenize:function(e,t,n){let r=0;return function t(o){if((87===o||119===o)&&r<3)return r++,e.consume(o),t;if(46===o&&3===r)return e.consume(o),i;return n(o)};function i(e){return null===e?n(e):t(e)}},partial:!0},jTe={tokenize:function(e,t,n){let r,i,o;return a;function a(t){return 46===t||95===t?e.check($Te,l,s)(t):null===t||Pxe(t)||jxe(t)||45!==t&&Lxe(t)?l(t):(o=!0,e.consume(t),a)}function s(t){return 95===t?r=!0:(i=r,r=void 0),e.consume(t),a}function l(e){return i||r||!o?n(e):t(e)}},partial:!0},BTe={tokenize:function(e,t){let n=0,r=0;return i;function i(a){return 40===a?(n++,e.consume(a),i):41===a&&r<n?o(a):33===a||34===a||38===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||60===a||63===a||93===a||95===a||126===a?e.check($Te,t,o)(a):null===a||Pxe(a)||jxe(a)?t(a):(e.consume(a),i)}function o(t){return 41===t&&r++,e.consume(t),i}},partial:!0},$Te={tokenize:function(e,t,n){return r;function r(a){return 33===a||34===a||39===a||41===a||42===a||44===a||46===a||58===a||59===a||63===a||95===a||126===a?(e.consume(a),r):38===a?(e.consume(a),o):93===a?(e.consume(a),i):60===a||null===a||Pxe(a)||jxe(a)?t(a):n(a)}function i(e){return null===e||40===e||91===e||Pxe(e)||jxe(e)?t(e):r(e)}function o(e){return Cxe(e)?a(e):n(e)}function a(t){return 59===t?(e.consume(t),r):Cxe(t)?(e.consume(t),a):n(t)}},partial:!0},zTe={tokenize:function(e,t,n){return function(t){return e.consume(t),r};function r(e){return Axe(e)?n(e):t(e)}},partial:!0},UTe={name:"wwwAutolink",tokenize:function(e,t,n){const r=this;return function(t){if(87!==t&&119!==t||!GTe.call(r,r.previous)||QTe(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(LTe,e.attempt(jTe,e.attempt(BTe,i),n),n)(t)};function i(n){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(n)}},previous:GTe},qTe={name:"protocolAutolink",tokenize:function(e,t,n){const r=this;let i="",o=!1;return function(t){if((72===t||104===t)&&YTe.call(r,r.previous)&&!QTe(r.events))return e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),i+=String.fromCodePoint(t),e.consume(t),a;return n(t)};function a(t){if(Cxe(t)&&i.length<5)return i+=String.fromCodePoint(t),e.consume(t),a;if(58===t){const n=i.toLowerCase();if("http"===n||"https"===n)return e.consume(t),s}return n(t)}function s(t){return 47===t?(e.consume(t),o?l:(o=!0,s)):n(t)}function l(t){return null===t||Oxe(t)||Pxe(t)||jxe(t)||Lxe(t)?n(t):e.attempt(jTe,e.attempt(BTe,u),n)(t)}function u(n){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(n)}},previous:YTe},HTe={name:"emailAutolink",tokenize:function(e,t,n){const r=this;let i,o;return function(t){if(!ZTe(t)||!KTe.call(r,r.previous)||QTe(r.events))return n(t);return e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),a(t)};function a(t){return ZTe(t)?(e.consume(t),a):64===t?(e.consume(t),s):n(t)}function s(t){return 46===t?e.check(zTe,u,l)(t):45===t||95===t||Axe(t)?(o=!0,e.consume(t),s):u(t)}function l(t){return e.consume(t),i=!0,s}function u(a){return o&&i&&Cxe(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(a)):n(a)}},previous:KTe},VTe={};let WTe=48;for(;WTe<123;)VTe[WTe]=HTe,WTe++,58===WTe?WTe=65:91===WTe&&(WTe=97);function GTe(e){return null===e||40===e||42===e||95===e||91===e||93===e||126===e||Pxe(e)}function YTe(e){return!Cxe(e)}function KTe(e){return!(47===e||ZTe(e))}function ZTe(e){return 43===e||45===e||46===e||95===e||Axe(e)}function QTe(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if(("labelLink"===r.type||"labelImage"===r.type)&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}VTe[43]=HTe,VTe[45]=HTe,VTe[46]=HTe,VTe[95]=HTe,VTe[72]=[HTe,qTe],VTe[104]=[HTe,qTe],VTe[87]=[HTe,UTe],VTe[119]=[HTe,UTe];const XTe={tokenize:function(e,t,n){const r=this;return zxe(e,function(e){const i=r.events[r.events.length-1];return i&&"gfmFootnoteDefinitionIndent"===i[1].type&&4===i[2].sliceSerialize(i[1],!0).length?t(e):n(e)},"gfmFootnoteDefinitionIndent",5)},partial:!0};function JTe(e,t,n){const r=this;let i=r.events.length;const o=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a;for(;i--;){const e=r.events[i][1];if("labelImage"===e.type){a=e;break}if("gfmFootnoteCall"===e.type||"labelLink"===e.type||"label"===e.type||"image"===e.type||"link"===e.type)break}return function(i){if(!a||!a._balanced)return n(i);const s=Txe(r.sliceSerialize({start:a.end,end:r.now()}));if(94!==s.codePointAt(0)||!o.includes(s.slice(1)))return n(i);return e.enter("gfmFootnoteCallLabelMarker"),e.consume(i),e.exit("gfmFootnoteCallLabelMarker"),t(i)}}function eCe(e,t){let n=e.length;for(;n--;)if("labelImage"===e[n][1].type&&"enter"===e[n][0]){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const o={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},e[e.length-1][1].start)},a={type:"chunkString",contentType:"string",start:Object.assign({},o.start),end:Object.assign({},o.end)},s=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",i,t],["exit",i,t],["enter",o,t],["enter",a,t],["exit",a,t],["exit",o,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...s),e}function tCe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a=0;return function(t){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(t),e.exit("gfmFootnoteCallLabelMarker"),s};function s(t){return 94!==t?n(t):(e.enter("gfmFootnoteCallMarker"),e.consume(t),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",l)}function l(s){if(a>999||93===s&&!o||null===s||91===s||Pxe(s))return n(s);if(93===s){e.exit("chunkString");const o=e.exit("gfmFootnoteCallString");return i.includes(Txe(r.sliceSerialize(o)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(s),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(s)}return Pxe(s)||(o=!0),a++,e.consume(s),92===s?u:l}function u(t){return 91===t||92===t||93===t?(e.consume(t),a++,l):l(t)}}function nCe(e,t,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o,a,s=0;return function(t){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),l};function l(t){return 94===t?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",u):n(t)}function u(t){if(s>999||93===t&&!a||null===t||91===t||Pxe(t))return n(t);if(93===t){e.exit("chunkString");const n=e.exit("gfmFootnoteDefinitionLabelString");return o=Txe(r.sliceSerialize(n)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(t),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),d}return Pxe(t)||(a=!0),s++,e.consume(t),92===t?c:u}function c(t){return 91===t||92===t||93===t?(e.consume(t),s++,u):u(t)}function d(t){return 58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i.includes(o)||i.push(o),zxe(e,f,"gfmFootnoteDefinitionWhitespace")):n(t)}function f(e){return t(e)}}function rCe(e,t,n){return e.check(Zxe,t,e.attempt(XTe,t,n))}function iCe(e){e.exit("gfmFootnoteDefinition")}function oCe(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:function(e,n,r){const i=this.previous,o=this.events;let a=0;return function(t){if(126===i&&"characterEscape"!==o[o.length-1][1].type)return r(t);return e.enter("strikethroughSequenceTemporary"),s(t)};function s(o){const l=Vxe(i);if(126===o)return a>1?r(o):(e.consume(o),a++,s);if(a<2&&!t)return r(o);const u=e.exit("strikethroughSequenceTemporary"),c=Vxe(o);return u._open=!c||2===c&&Boolean(l),u._close=!l||2===l&&Boolean(c),n(o)}},resolveAll:function(e,t){let n=-1;for(;++n<e.length;)if("enter"===e[n][0]&&"strikethroughSequenceTemporary"===e[n][1].type&&e[n][1]._close){let r=n;for(;r--;)if("exit"===e[r][0]&&"strikethroughSequenceTemporary"===e[r][1].type&&e[r][1]._open&&e[n][1].end.offset-e[n][1].start.offset===e[r][1].end.offset-e[r][1].start.offset){e[n][1].type="strikethroughSequence",e[r][1].type="strikethroughSequence";const i={type:"strikethrough",start:Object.assign({},e[r][1].start),end:Object.assign({},e[n][1].end)},o={type:"strikethroughText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},a=[["enter",i,t],["enter",e[r][1],t],["exit",e[r][1],t],["enter",o,t]],s=t.parser.constructs.insideSpan.null;s&&bxe(a,a.length,0,Wxe(s,e.slice(r+1,n),t)),bxe(a,a.length,0,[["exit",o,t],["enter",e[n][1],t],["exit",e[n][1],t],["exit",i,t]]),bxe(e,r-1,n-r+3,a),n=r+a.length-2;break}}n=-1;for(;++n<e.length;)"strikethroughSequenceTemporary"===e[n][1].type&&(e[n][1].type="data");return e}};return null==t&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}}}class aCe{constructor(){this.map=[]}add(e,t,n){!function(e,t,n,r){let i=0;if(0===n&&0===r.length)return;for(;i<e.map.length;){if(e.map[i][0]===t)return e.map[i][1]+=n,void e.map[i][2].push(...r);i+=1}e.map.push([t,n,r])}(this,e,t,n)}consume(e){if(this.map.sort(function(e,t){return e[0]-t[0]}),0===this.map.length)return;let t=this.map.length;const n=[];for(;t>0;)t-=1,n.push(e.slice(this.map[t][0]+this.map[t][1]),this.map[t][2]),e.length=this.map[t][0];n.push(e.slice()),e.length=0;let r=n.pop();for(;r;){for(const t of r)e.push(t);r=n.pop()}this.map.length=0}}function sCe(e,t){let n=!1;const r=[];for(;t<e.length;){const i=e[t];if(n){if("enter"===i[0])"tableContent"===i[1].type&&r.push("tableDelimiterMarker"===e[t+1][1].type?"left":"none");else if("tableContent"===i[1].type){if("tableDelimiterMarker"===e[t-1][1].type){const e=r.length-1;r[e]="left"===r[e]?"center":"right"}}else if("tableDelimiterRow"===i[1].type)break}else"enter"===i[0]&&"tableDelimiterRow"===i[1].type&&(n=!0);t+=1}return r}function lCe(e,t,n){const r=this;let i,o=0,a=0;return function(e){let t=r.events.length-1;for(;t>-1;){const e=r.events[t][1].type;if("lineEnding"!==e&&"linePrefix"!==e)break;t--}const i=t>-1?r.events[t][1].type:null,o="tableHead"===i||"tableRow"===i?w:s;if(o===w&&r.parser.lazy[r.now().line])return n(e);return o(e)};function s(t){return e.enter("tableHead"),e.enter("tableRow"),function(e){if(124===e)return l(e);return i=!0,a+=1,l(e)}(t)}function l(t){return null===t?n(t):Mxe(t)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),d):n(t):Fxe(t)?zxe(e,l,"whitespace")(t):(a+=1,i&&(i=!1,o+=1),124===t?(e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),i=!0,l):(e.enter("data"),u(t)))}function u(t){return null===t||124===t||Pxe(t)?(e.exit("data"),l(t)):(e.consume(t),92===t?c:u)}function c(t){return 92===t||124===t?(e.consume(t),u):u(t)}function d(t){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(t):(e.enter("tableDelimiterRow"),i=!1,Fxe(t)?zxe(e,f,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):f(t))}function f(t){return 45===t||58===t?h(t):124===t?(i=!0,e.enter("tableCellDivider"),e.consume(t),e.exit("tableCellDivider"),p):b(t)}function p(t){return Fxe(t)?zxe(e,h,"whitespace")(t):h(t)}function h(t){return 58===t?(a+=1,i=!0,e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),m):45===t?(a+=1,m(t)):null===t||Mxe(t)?v(t):b(t)}function m(t){return 45===t?(e.enter("tableDelimiterFiller"),g(t)):b(t)}function g(t){return 45===t?(e.consume(t),g):58===t?(i=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(t),e.exit("tableDelimiterMarker"),y):(e.exit("tableDelimiterFiller"),y(t))}function y(t){return Fxe(t)?zxe(e,v,"whitespace")(t):v(t)}function v(n){return 124===n?f(n):(null===n||Mxe(n))&&i&&o===a?(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(n)):b(n)}function b(e){return n(e)}function w(t){return e.enter("tableRow"),_(t)}function _(n){return 124===n?(e.enter("tableCellDivider"),e.consume(n),e.exit("tableCellDivider"),_):null===n||Mxe(n)?(e.exit("tableRow"),t(n)):Fxe(n)?zxe(e,_,"whitespace")(n):(e.enter("data"),x(n))}function x(t){return null===t||124===t||Pxe(t)?(e.exit("data"),_(t)):(e.consume(t),92===t?E:x)}function E(t){return 92===t||124===t?(e.consume(t),x):x(t)}}function uCe(e,t){let n,r,i,o=-1,a=!0,s=0,l=[0,0,0,0],u=[0,0,0,0],c=!1,d=0;const f=new aCe;for(;++o<e.length;){const p=e[o],h=p[1];"enter"===p[0]?"tableHead"===h.type?(c=!1,0!==d&&(dCe(f,t,d,n,r),r=void 0,d=0),n={type:"table",start:Object.assign({},h.start),end:Object.assign({},h.end)},f.add(o,0,[["enter",n,t]])):"tableRow"===h.type||"tableDelimiterRow"===h.type?(a=!0,i=void 0,l=[0,0,0,0],u=[0,o+1,0,0],c&&(c=!1,r={type:"tableBody",start:Object.assign({},h.start),end:Object.assign({},h.end)},f.add(o,0,[["enter",r,t]])),s="tableDelimiterRow"===h.type?2:r?3:1):!s||"data"!==h.type&&"tableDelimiterMarker"!==h.type&&"tableDelimiterFiller"!==h.type?"tableCellDivider"===h.type&&(a?a=!1:(0!==l[1]&&(u[0]=u[1],i=cCe(f,t,l,s,void 0,i)),l=u,u=[l[1],o,0,0])):(a=!1,0===u[2]&&(0!==l[1]&&(u[0]=u[1],i=cCe(f,t,l,s,void 0,i),l=[0,0,0,0]),u[2]=o)):"tableHead"===h.type?(c=!0,d=o):"tableRow"===h.type||"tableDelimiterRow"===h.type?(d=o,0!==l[1]?(u[0]=u[1],i=cCe(f,t,l,s,o,i)):0!==u[1]&&(i=cCe(f,t,u,s,o,i)),s=0):!s||"data"!==h.type&&"tableDelimiterMarker"!==h.type&&"tableDelimiterFiller"!==h.type||(u[3]=o)}for(0!==d&&dCe(f,t,d,n,r),f.consume(t.events),o=-1;++o<t.events.length;){const e=t.events[o];"enter"===e[0]&&"table"===e[1].type&&(e[1]._align=sCe(t.events,o))}return e}function cCe(e,t,n,r,i,o){const a=1===r?"tableHeader":2===r?"tableDelimiter":"tableData";0!==n[0]&&(o.end=Object.assign({},fCe(t.events,n[0])),e.add(n[0],0,[["exit",o,t]]));const s=fCe(t.events,n[1]);if(o={type:a,start:Object.assign({},s),end:Object.assign({},s)},e.add(n[1],0,[["enter",o,t]]),0!==n[2]){const i=fCe(t.events,n[2]),o=fCe(t.events,n[3]),a={type:"tableContent",start:Object.assign({},i),end:Object.assign({},o)};if(e.add(n[2],0,[["enter",a,t]]),2!==r){const r=t.events[n[2]],i=t.events[n[3]];if(r[1].end=Object.assign({},i[1].end),r[1].type="chunkText",r[1].contentType="text",n[3]>n[2]+1){const t=n[2]+1,r=n[3]-n[2]-1;e.add(t,r,[])}}e.add(n[3]+1,0,[["exit",a,t]])}return void 0!==i&&(o.end=Object.assign({},fCe(t.events,i)),e.add(i,0,[["exit",o,t]]),o=void 0),o}function dCe(e,t,n,r,i){const o=[],a=fCe(t.events,n);i&&(i.end=Object.assign({},a),o.push(["exit",i,t])),r.end=Object.assign({},a),o.push(["exit",r,t]),e.add(n+1,0,o)}function fCe(e,t){const n=e[t],r="enter"===n[0]?"start":"end";return n[1][r]}const pCe={name:"tasklistCheck",tokenize:function(e,t,n){const r=this;return function(t){if(null!==r.previous||!r._gfmTasklistFirstContentOfListItem)return n(t);return e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),i};function i(t){return Pxe(t)?(e.enter("taskListCheckValueUnchecked"),e.consume(t),e.exit("taskListCheckValueUnchecked"),o):88===t||120===t?(e.enter("taskListCheckValueChecked"),e.consume(t),e.exit("taskListCheckValueChecked"),o):n(t)}function o(t){return 93===t?(e.enter("taskListCheckMarker"),e.consume(t),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),a):n(t)}function a(r){return Mxe(r)?t(r):Fxe(r)?e.check({tokenize:hCe},t,n)(r):n(r)}}};function hCe(e,t,n){return zxe(e,function(e){return null===e?n(e):t(e)},"whitespace")}const mCe={};function gCe(e){const t=e||mCe,n=this.data(),r=n.micromarkExtensions||(n.micromarkExtensions=[]),i=n.fromMarkdownExtensions||(n.fromMarkdownExtensions=[]),o=n.toMarkdownExtensions||(n.toMarkdownExtensions=[]);r.push(function(e){return xxe([{text:VTe},{document:{91:{name:"gfmFootnoteDefinition",tokenize:nCe,continuation:{tokenize:rCe},exit:iCe}},text:{91:{name:"gfmFootnoteCall",tokenize:tCe},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:JTe,resolveTo:eCe}}},oCe(e),{flow:{null:{name:"table",tokenize:lCe,resolveAll:uCe}}},{text:{91:pCe}}])}(t)),i.push([{transforms:[Mke],enter:{literalAutolink:Ake,literalAutolinkEmail:Ike,literalAutolinkHttp:Ike,literalAutolinkWww:Ike},exit:{literalAutolink:Rke,literalAutolinkEmail:Dke,literalAutolinkHttp:Oke,literalAutolinkWww:Nke}},{enter:{gfmFootnoteCallString:jke,gfmFootnoteCall:Bke,gfmFootnoteDefinitionLabelString:$ke,gfmFootnoteDefinition:zke},exit:{gfmFootnoteCallString:Uke,gfmFootnoteCall:qke,gfmFootnoteDefinitionLabelString:Hke,gfmFootnoteDefinition:Vke}},{canContainEols:["delete"],enter:{strikethrough:Qke},exit:{strikethrough:Xke}},{enter:{table:TTe,tableData:OTe,tableHeader:OTe,tableRow:ATe},exit:{codeText:NTe,table:CTe,tableData:ITe,tableHeader:ITe,tableRow:ITe}},{exit:{taskListCheckValueChecked:MTe,taskListCheckValueUnchecked:MTe,paragraph:PTe}}]),o.push(function(e){return{extensions:[{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:Tke,notInConstruct:Cke},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:Tke,notInConstruct:Cke},{character:":",before:"[ps]",after:"\\/",inConstruct:Tke,notInConstruct:Cke}]},Gke(e),{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Zke}],handlers:{delete:Jke}},RTe(e),{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:FTe}}]}}(t))}const yCe=/[#.]/g;function vCe(e,t,n){const r=n?function(e){const t=new Map;for(const n of e)t.set(n.toLowerCase(),n);return t}(n):void 0;return function(n,i,...o){let a;if(null==n){a={type:"root",children:[]};const e=i;o.unshift(e)}else{a=function(e,t){const n=e||"",r={};let i,o,a=0;for(;a<n.length;){yCe.lastIndex=a;const e=yCe.exec(n),t=n.slice(a,e?e.index:n.length);t&&(i?"#"===i?r.id=t:Array.isArray(r.className)?r.className.push(t):r.className=[t]:o=t,a+=t.length),e&&(i=e[0],a++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}(n,t);const s=a.tagName.toLowerCase(),l=r?r.get(s):void 0;if(a.tagName=l||s,function(e){if(null===e||"object"!=typeof e||Array.isArray(e))return!0;if("string"!=typeof e.type)return!1;const t=e,n=Object.keys(e);for(const r of n){const e=t[r];if(e&&"object"==typeof e){if(!Array.isArray(e))return!0;const t=e;for(const e of t)if("number"!=typeof e&&"string"!=typeof e)return!0}}if("children"in e&&Array.isArray(e.children))return!0;return!1}(i))o.unshift(i);else for(const[t,n]of Object.entries(i))bCe(e,a.properties,t,n)}for(const e of o)wCe(a.children,e);return"element"===a.type&&"template"===a.tagName&&(a.content={type:"root",children:a.children},a.children=[]),a}}function bCe(e,t,n,r){const i=E_e(e,n);let o;if(null!=r){if("number"==typeof r){if(Number.isNaN(r))return;o=r}else o="boolean"==typeof r?r:"string"==typeof r?i.spaceSeparated?A_e(r):i.commaSeparated?Bwe(r):i.commaOrSpaceSeparated?A_e(Bwe(r).join(" ")):_Ce(i,i.property,r):Array.isArray(r)?[...r]:"style"===i.property?function(e){const t=[];for(const[n,r]of Object.entries(e))t.push([n,r].join(": "));return t.join("; ")}(r):String(r);if(Array.isArray(o)){const e=[];for(const t of o)e.push(_Ce(i,i.property,t));o=e}"className"===i.property&&Array.isArray(t.className)&&(o=t.className.concat(o)),t[i.property]=o}}function wCe(e,t){if(null==t);else if("number"==typeof t||"string"==typeof t)e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(const n of t)wCe(e,n);else{if("object"!=typeof t||!("type"in t))throw new Error("Expected node, nodes, or string, got `"+t+"`");"root"===t.type?wCe(e,t.children):e.push(t)}}function _Ce(e,t,n){if("string"==typeof n){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(""===n||Kwe(n)===Kwe(t)))return!0}return n}const xCe=vCe(T_e,"div"),ECe=vCe(C_e,"g",["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"]);function SCe(e,t){const n=e.indexOf("\r",t),r=e.indexOf("\n",t);return-1===r?n:-1===n||n+1===r?r:n<r?n:r}const kCe={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},TCe={}.hasOwnProperty,CCe=Object.prototype;function ACe(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},OCe(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r&&("quirks"===r.mode||"limited-quirks"===r.mode);if(n={type:"root",children:ICe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const t=String(e.file),r=function(e){const t=String(e),n=[];return{toOffset:function(e){if(e&&"number"==typeof e.line&&"number"==typeof e.column&&!Number.isNaN(e.line)&&!Number.isNaN(e.column)){for(;n.length<e.line;){const e=n[n.length-1],r=SCe(t,e),i=-1===r?t.length+1:r+1;if(e===i)break;n.push(i)}const r=(e.line>1?n[e.line-2]:0)+e.column-1;if(r<n[e.line-1])return r}},toPoint:function(e){if("number"==typeof e&&e>-1&&e<=t.length){let r=0;for(;;){let i=n[r];if(void 0===i){const e=SCe(t,n[r-1]);i=-1===e?t.length+1:e+1,n[r]=i}if(i>e)return{line:r+1,column:e-(r>0?n[r-1]:0)+1,offset:e};r++}}}}}(t),i=r.toPoint(0),o=r.toPoint(t.length);n.position={start:i,end:o}}return n}case"#documentType":return n={type:"doctype"},OCe(e,t,n),n;case"#text":{const r=t;return n={type:"text",value:r.value},OCe(e,r,n),n}default:return n=function(e,t){const n=e.schema;e.schema=t.namespaceURI===kCe.svg?C_e:T_e;let r=-1;const i={};for(;++r<t.attrs.length;){const e=t.attrs[r],n=(e.prefix?e.prefix+":":"")+e.name;TCe.call(CCe,n)||(i[n]=e.value)}const o="svg"===e.schema.space?ECe:xCe,a=o(t.tagName,i,ICe(e,t.childNodes));if(OCe(e,t,a),"template"===a.tagName){const n=t,r=n.sourceCodeLocation,i=r&&r.startTag&&NCe(r.startTag),o=r&&r.endTag&&NCe(r.endTag),s=ACe(e,n.content);i&&o&&e.file&&(s.position={start:i.end,end:o.start}),a.content=s}return e.schema=n,a}(e,t),n}}function ICe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=ACe(e,t[n]);r.push(i)}return r}function OCe(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=function(e,t,n){const r=NCe(n);if("element"===t.type){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const r={};let i;if(n.attrs)for(i in n.attrs)TCe.call(n.attrs,i)&&(r[E_e(e.schema,i).property]=NCe(n.attrs[i]));n.startTag;const o=NCe(n.startTag),a=n.endTag?NCe(n.endTag):void 0,s={opening:o};a&&(s.closing=a),s.properties=r,t.data={position:s}}}return r}(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function NCe(e){const t=DCe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=DCe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function DCe(e){return e.line&&e.column?e:void 0}class RCe{constructor(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}}function MCe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new RCe(n,r,t)}function PCe(e){return e.toLowerCase()}RCe.prototype.property={},RCe.prototype.normal={},RCe.prototype.space=null;let FCe=class{constructor(e,t){this.property=e,this.attribute=t}};FCe.prototype.space=null,FCe.prototype.boolean=!1,FCe.prototype.booleanish=!1,FCe.prototype.overloadedBoolean=!1,FCe.prototype.number=!1,FCe.prototype.commaSeparated=!1,FCe.prototype.spaceSeparated=!1,FCe.prototype.commaOrSpaceSeparated=!1,FCe.prototype.mustUseProperty=!1,FCe.prototype.defined=!1;let LCe=0;const jCe=VCe(),BCe=VCe(),$Ce=VCe(),zCe=VCe(),UCe=VCe(),qCe=VCe(),HCe=VCe();function VCe(){return 2**++LCe}const WCe=Object.freeze(Object.defineProperty({__proto__:null,boolean:jCe,booleanish:BCe,commaOrSpaceSeparated:HCe,commaSeparated:qCe,number:zCe,overloadedBoolean:$Ce,spaceSeparated:UCe},Symbol.toStringTag,{value:"Module"})),GCe=Object.keys(WCe);class YCe extends FCe{constructor(e,t,n,r){let i=-1;if(super(e,t),KCe(this,"space",r),"number"==typeof n)for(;++i<GCe.length;){const e=GCe[i];KCe(this,GCe[i],(n&WCe[e])===WCe[e])}}}function KCe(e,t,n){n&&(e[t]=n)}YCe.prototype.defined=!0;const ZCe={}.hasOwnProperty;function QCe(e){const t={},n={};let r;for(r in e.properties)if(ZCe.call(e.properties,r)){const i=e.properties[r],o=new YCe(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),t[r]=o,n[PCe(r)]=r,n[PCe(o.attribute)]=r}return new RCe(t,n,e.space)}const XCe=QCe({space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase(),properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),JCe=QCe({space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase(),properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function eAe(e,t){return t in e?e[t]:t}function tAe(e,t){return eAe(e,t.toLowerCase())}const nAe=QCe({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:tAe,properties:{xmlns:null,xmlnsXLink:null}}),rAe=QCe({transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase(),properties:{ariaActiveDescendant:null,ariaAtomic:BCe,ariaAutoComplete:null,ariaBusy:BCe,ariaChecked:BCe,ariaColCount:zCe,ariaColIndex:zCe,ariaColSpan:zCe,ariaControls:UCe,ariaCurrent:null,ariaDescribedBy:UCe,ariaDetails:null,ariaDisabled:BCe,ariaDropEffect:UCe,ariaErrorMessage:null,ariaExpanded:BCe,ariaFlowTo:UCe,ariaGrabbed:BCe,ariaHasPopup:null,ariaHidden:BCe,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:UCe,ariaLevel:zCe,ariaLive:null,ariaModal:BCe,ariaMultiLine:BCe,ariaMultiSelectable:BCe,ariaOrientation:null,ariaOwns:UCe,ariaPlaceholder:null,ariaPosInSet:zCe,ariaPressed:BCe,ariaReadOnly:BCe,ariaRelevant:null,ariaRequired:BCe,ariaRoleDescription:UCe,ariaRowCount:zCe,ariaRowIndex:zCe,ariaRowSpan:zCe,ariaSelected:BCe,ariaSetSize:zCe,ariaSort:null,ariaValueMax:zCe,ariaValueMin:zCe,ariaValueNow:zCe,ariaValueText:null,role:null}}),iAe=QCe({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:tAe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:qCe,acceptCharset:UCe,accessKey:UCe,action:null,allow:null,allowFullScreen:jCe,allowPaymentRequest:jCe,allowUserMedia:jCe,alt:null,as:null,async:jCe,autoCapitalize:null,autoComplete:UCe,autoFocus:jCe,autoPlay:jCe,blocking:UCe,capture:null,charSet:null,checked:jCe,cite:null,className:UCe,cols:zCe,colSpan:null,content:null,contentEditable:BCe,controls:jCe,controlsList:UCe,coords:zCe|qCe,crossOrigin:null,data:null,dateTime:null,decoding:null,default:jCe,defer:jCe,dir:null,dirName:null,disabled:jCe,download:$Ce,draggable:BCe,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:jCe,formTarget:null,headers:UCe,height:zCe,hidden:jCe,high:zCe,href:null,hrefLang:null,htmlFor:UCe,httpEquiv:UCe,id:null,imageSizes:null,imageSrcSet:null,inert:jCe,inputMode:null,integrity:null,is:null,isMap:jCe,itemId:null,itemProp:UCe,itemRef:UCe,itemScope:jCe,itemType:UCe,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:jCe,low:zCe,manifest:null,max:null,maxLength:zCe,media:null,method:null,min:null,minLength:zCe,multiple:jCe,muted:jCe,name:null,nonce:null,noModule:jCe,noValidate:jCe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:jCe,optimum:zCe,pattern:null,ping:UCe,placeholder:null,playsInline:jCe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:jCe,referrerPolicy:null,rel:UCe,required:jCe,reversed:jCe,rows:zCe,rowSpan:zCe,sandbox:UCe,scope:null,scoped:jCe,seamless:jCe,selected:jCe,shadowRootClonable:jCe,shadowRootDelegatesFocus:jCe,shadowRootMode:null,shape:null,size:zCe,sizes:null,slot:null,span:zCe,spellCheck:BCe,src:null,srcDoc:null,srcLang:null,srcSet:null,start:zCe,step:null,style:null,tabIndex:zCe,target:null,title:null,translate:null,type:null,typeMustMatch:jCe,useMap:null,value:BCe,width:zCe,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:UCe,axis:null,background:null,bgColor:null,border:zCe,borderColor:null,bottomMargin:zCe,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:jCe,declare:jCe,event:null,face:null,frame:null,frameBorder:null,hSpace:zCe,leftMargin:zCe,link:null,longDesc:null,lowSrc:null,marginHeight:zCe,marginWidth:zCe,noResize:jCe,noHref:jCe,noShade:jCe,noWrap:jCe,object:null,profile:null,prompt:null,rev:null,rightMargin:zCe,rules:null,scheme:null,scrolling:BCe,standby:null,summary:null,text:null,topMargin:zCe,valueType:null,version:null,vAlign:null,vLink:null,vSpace:zCe,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:jCe,disableRemotePlayback:jCe,prefix:null,property:null,results:zCe,security:null,unselectable:null}}),oAe=QCe({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:eAe,properties:{about:HCe,accentHeight:zCe,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:zCe,amplitude:zCe,arabicForm:null,ascent:zCe,attributeName:null,attributeType:null,azimuth:zCe,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:zCe,by:null,calcMode:null,capHeight:zCe,className:UCe,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:zCe,diffuseConstant:zCe,direction:null,display:null,dur:null,divisor:zCe,dominantBaseline:null,download:jCe,dx:null,dy:null,edgeMode:null,editable:null,elevation:zCe,enableBackground:null,end:null,event:null,exponent:zCe,externalResourcesRequired:null,fill:null,fillOpacity:zCe,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:qCe,g2:qCe,glyphName:qCe,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:zCe,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:zCe,horizOriginX:zCe,horizOriginY:zCe,id:null,ideographic:zCe,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:zCe,k:zCe,k1:zCe,k2:zCe,k3:zCe,k4:zCe,kernelMatrix:HCe,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:zCe,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:zCe,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:zCe,overlineThickness:zCe,paintOrder:null,panose1:null,path:null,pathLength:zCe,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:UCe,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:zCe,pointsAtY:zCe,pointsAtZ:zCe,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:HCe,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:HCe,rev:HCe,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:HCe,requiredFeatures:HCe,requiredFonts:HCe,requiredFormats:HCe,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:zCe,specularExponent:zCe,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:zCe,strikethroughThickness:zCe,string:null,stroke:null,strokeDashArray:HCe,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:zCe,strokeOpacity:zCe,strokeWidth:null,style:null,surfaceScale:zCe,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:HCe,tabIndex:zCe,tableValues:null,target:null,targetX:zCe,targetY:zCe,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:HCe,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:zCe,underlineThickness:zCe,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:zCe,values:null,vAlphabetic:zCe,vMathematical:zCe,vectorEffect:null,vHanging:zCe,vIdeographic:zCe,version:null,vertAdvY:zCe,vertOriginX:zCe,vertOriginY:zCe,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:zCe,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),aAe=/^data[-\w.:]+$/i,sAe=/-[a-z]/g,lAe=/[A-Z]/g;function uAe(e){return"-"+e.toLowerCase()}function cAe(e){return e.charAt(1).toUpperCase()}const dAe=MCe([JCe,XCe,nAe,rAe,iAe],"html"),fAe=MCe([JCe,XCe,nAe,rAe,oAe],"svg"),pAe={},hAe={}.hasOwnProperty,mAe=iTe("type",{handlers:{root:function(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=yAe(e.children,n,t),vAe(e,n),n},element:function(e,t){const n=t;let r=n;"element"===e.type&&"svg"===e.tagName.toLowerCase()&&"html"===n.space&&(r=fAe);const i=[];let o;if(e.properties)for(o in e.properties)if("children"!==o&&hAe.call(e.properties,o)){const t=gAe(r,o,e.properties[o]);t&&i.push(t)}const a=r.space,s={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:kCe[a],childNodes:[],parentNode:null};s.childNodes=yAe(e.children,s,r),vAe(e,s),"template"===e.tagName&&e.content&&(s.content=function(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=yAe(e.children,n,t),vAe(e,n),n}(e.content,r));return s},text:function(e){const t={nodeName:"#text",value:e.value,parentNode:null};return vAe(e,t),t},comment:function(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return vAe(e,t),t},doctype:function(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return vAe(e,t),t}}});function gAe(e,t,n){const r=function(e,t){const n=PCe(t);let r=t,i=FCe;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&aAe.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(sAe,cAe);r="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!sAe.test(e)){let n=e.replace(lAe,uAe);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=YCe}return new i(r,t)}(e,t);if(!1===n||null==n||"number"==typeof n&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?$we(n):I_e(n));const i={name:r.attribute,value:!0===n?"":String(n)};if(r.space&&"html"!==r.space&&"svg"!==r.space){const e=i.name.indexOf(":");e<0?i.prefix="":(i.name=i.name.slice(e+1),i.prefix=r.attribute.slice(0,e)),i.namespace=kCe[r.space]}return i}function yAe(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const o=mAe(e[r],n);o.parentNode=t,i.push(o)}return i}function vAe(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const bAe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],wAe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),_Ae="�";var xAe,EAe;(EAe=xAe||(xAe={}))[EAe.EOF=-1]="EOF",EAe[EAe.NULL=0]="NULL",EAe[EAe.TABULATION=9]="TABULATION",EAe[EAe.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",EAe[EAe.LINE_FEED=10]="LINE_FEED",EAe[EAe.FORM_FEED=12]="FORM_FEED",EAe[EAe.SPACE=32]="SPACE",EAe[EAe.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",EAe[EAe.QUOTATION_MARK=34]="QUOTATION_MARK",EAe[EAe.AMPERSAND=38]="AMPERSAND",EAe[EAe.APOSTROPHE=39]="APOSTROPHE",EAe[EAe.HYPHEN_MINUS=45]="HYPHEN_MINUS",EAe[EAe.SOLIDUS=47]="SOLIDUS",EAe[EAe.DIGIT_0=48]="DIGIT_0",EAe[EAe.DIGIT_9=57]="DIGIT_9",EAe[EAe.SEMICOLON=59]="SEMICOLON",EAe[EAe.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",EAe[EAe.EQUALS_SIGN=61]="EQUALS_SIGN",EAe[EAe.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",EAe[EAe.QUESTION_MARK=63]="QUESTION_MARK",EAe[EAe.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",EAe[EAe.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",EAe[EAe.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",EAe[EAe.GRAVE_ACCENT=96]="GRAVE_ACCENT",EAe[EAe.LATIN_SMALL_A=97]="LATIN_SMALL_A",EAe[EAe.LATIN_SMALL_Z=122]="LATIN_SMALL_Z";const SAe="--",kAe="[CDATA[",TAe="doctype",CAe="script",AAe="public",IAe="system";function OAe(e){return e>=55296&&e<=57343}function NAe(e){return 32!==e&&10!==e&&13!==e&&9!==e&&12!==e&&e>=1&&e<=31||e>=127&&e<=159}function DAe(e){return e>=64976&&e<=65007||wAe.has(e)}var RAe,MAe;(MAe=RAe||(RAe={})).controlCharacterInInputStream="control-character-in-input-stream",MAe.noncharacterInInputStream="noncharacter-in-input-stream",MAe.surrogateInInputStream="surrogate-in-input-stream",MAe.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",MAe.endTagWithAttributes="end-tag-with-attributes",MAe.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",MAe.unexpectedSolidusInTag="unexpected-solidus-in-tag",MAe.unexpectedNullCharacter="unexpected-null-character",MAe.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",MAe.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",MAe.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",MAe.missingEndTagName="missing-end-tag-name",MAe.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",MAe.unknownNamedCharacterReference="unknown-named-character-reference",MAe.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",MAe.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",MAe.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",MAe.eofBeforeTagName="eof-before-tag-name",MAe.eofInTag="eof-in-tag",MAe.missingAttributeValue="missing-attribute-value",MAe.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",MAe.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",MAe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",MAe.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",MAe.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",MAe.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",MAe.missingDoctypePublicIdentifier="missing-doctype-public-identifier",MAe.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",MAe.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",MAe.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",MAe.cdataInHtmlContent="cdata-in-html-content",MAe.incorrectlyOpenedComment="incorrectly-opened-comment",MAe.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",MAe.eofInDoctype="eof-in-doctype",MAe.nestedComment="nested-comment",MAe.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",MAe.eofInComment="eof-in-comment",MAe.incorrectlyClosedComment="incorrectly-closed-comment",MAe.eofInCdata="eof-in-cdata",MAe.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",MAe.nullCharacterReference="null-character-reference",MAe.surrogateCharacterReference="surrogate-character-reference",MAe.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",MAe.controlCharacterReference="control-character-reference",MAe.noncharacterCharacterReference="noncharacter-character-reference",MAe.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",MAe.missingDoctypeName="missing-doctype-name",MAe.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",MAe.duplicateAttribute="duplicate-attribute",MAe.nonConformingDoctype="non-conforming-doctype",MAe.missingDoctype="missing-doctype",MAe.misplacedDoctype="misplaced-doctype",MAe.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",MAe.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",MAe.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",MAe.openElementsLeftAfterEof="open-elements-left-after-eof",MAe.abandonedHeadElementChild="abandoned-head-element-child",MAe.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",MAe.nestedNoscriptInHead="nested-noscript-in-head",MAe.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text";class PAe{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+Number(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,t){const{line:n,col:r,offset:i}=this,o=r+t,a=i+t;return{code:e,startLine:n,endLine:n,startCol:o,endCol:o,startOffset:a,endOffset:a}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const t=this.html.charCodeAt(this.pos+1);if(function(e){return e>=56320&&e<=57343}(t))return this.pos++,this._addGap(),1024*(e-55296)+9216+t}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,xAe.EOF;return this._err(RAe.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,t){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=t}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,t){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(t)return this.html.startsWith(e,this.pos);for(let n=0;n<e.length;n++){if((32|this.html.charCodeAt(this.pos+n))!==e.charCodeAt(n))return!1}return!0}peek(e){const t=this.pos+e;if(t>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,xAe.EOF;const n=this.html.charCodeAt(t);return n===xAe.CARRIAGE_RETURN?xAe.LINE_FEED:n}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,xAe.EOF;let e=this.html.charCodeAt(this.pos);if(e===xAe.CARRIAGE_RETURN)return this.isEol=!0,this.skipNextNewLine=!0,xAe.LINE_FEED;if(e===xAe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine))return this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance();this.skipNextNewLine=!1,OAe(e)&&(e=this._processSurrogate(e));return null===this.handler.onParseError||e>31&&e<127||e===xAe.LINE_FEED||e===xAe.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e}_checkForProblematicCharacters(e){NAe(e)?this._err(RAe.controlCharacterInInputStream):DAe(e)&&this._err(RAe.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var FAe,LAe;function jAe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}(LAe=FAe||(FAe={}))[LAe.CHARACTER=0]="CHARACTER",LAe[LAe.NULL_CHARACTER=1]="NULL_CHARACTER",LAe[LAe.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",LAe[LAe.START_TAG=3]="START_TAG",LAe[LAe.END_TAG=4]="END_TAG",LAe[LAe.COMMENT=5]="COMMENT",LAe[LAe.DOCTYPE=6]="DOCTYPE",LAe[LAe.EOF=7]="EOF",LAe[LAe.HIBERNATION=8]="HIBERNATION";const BAe=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(e=>e.charCodeAt(0))),$Ae=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var zAe,UAe;(UAe=zAe||(zAe={}))[UAe.NUM=35]="NUM",UAe[UAe.SEMI=59]="SEMI",UAe[UAe.EQUALS=61]="EQUALS",UAe[UAe.ZERO=48]="ZERO",UAe[UAe.NINE=57]="NINE",UAe[UAe.LOWER_A=97]="LOWER_A",UAe[UAe.LOWER_F=102]="LOWER_F",UAe[UAe.LOWER_X=120]="LOWER_X",UAe[UAe.LOWER_Z=122]="LOWER_Z",UAe[UAe.UPPER_A=65]="UPPER_A",UAe[UAe.UPPER_F=70]="UPPER_F",UAe[UAe.UPPER_Z=90]="UPPER_Z";var qAe,HAe,VAe,WAe,GAe,YAe,KAe,ZAe,QAe,XAe,JAe,eIe,tIe,nIe,rIe,iIe;function oIe(e){return e>=zAe.ZERO&&e<=zAe.NINE}function aIe(e){return e>=zAe.UPPER_A&&e<=zAe.UPPER_F||e>=zAe.LOWER_A&&e<=zAe.LOWER_F}function sIe(e){return e===zAe.EQUALS||function(e){return e>=zAe.UPPER_A&&e<=zAe.UPPER_Z||e>=zAe.LOWER_A&&e<=zAe.LOWER_Z||oIe(e)}(e)}(HAe=qAe||(qAe={}))[HAe.VALUE_LENGTH=49152]="VALUE_LENGTH",HAe[HAe.BRANCH_LENGTH=16256]="BRANCH_LENGTH",HAe[HAe.JUMP_TABLE=127]="JUMP_TABLE",(WAe=VAe||(VAe={}))[WAe.EntityStart=0]="EntityStart",WAe[WAe.NumericStart=1]="NumericStart",WAe[WAe.NumericDecimal=2]="NumericDecimal",WAe[WAe.NumericHex=3]="NumericHex",WAe[WAe.NamedEntity=4]="NamedEntity",(YAe=GAe||(GAe={}))[YAe.Legacy=0]="Legacy",YAe[YAe.Strict=1]="Strict",YAe[YAe.Attribute=2]="Attribute";class lIe{constructor(e,t,n){this.decodeTree=e,this.emitCodePoint=t,this.errors=n,this.state=VAe.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=GAe.Strict}startEntity(e){this.decodeMode=e,this.state=VAe.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(e,t){switch(this.state){case VAe.EntityStart:return e.charCodeAt(t)===zAe.NUM?(this.state=VAe.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=VAe.NamedEntity,this.stateNamedEntity(e,t));case VAe.NumericStart:return this.stateNumericStart(e,t);case VAe.NumericDecimal:return this.stateNumericDecimal(e,t);case VAe.NumericHex:return this.stateNumericHex(e,t);case VAe.NamedEntity:return this.stateNamedEntity(e,t)}}stateNumericStart(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===zAe.LOWER_X?(this.state=VAe.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=VAe.NumericDecimal,this.stateNumericDecimal(e,t))}addToNumericResult(e,t,n,r){if(t!==n){const i=n-t;this.result=this.result*Math.pow(r,i)+Number.parseInt(e.substr(t,i),r),this.consumed+=i}}stateNumericHex(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!oIe(r)&&!aIe(r))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1}stateNumericDecimal(e,t){const n=t;for(;t<e.length;){const r=e.charCodeAt(t);if(!oIe(r))return this.addToNumericResult(e,n,t,10),this.emitNumericEntity(r,2);t+=1}return this.addToNumericResult(e,n,t,10),-1}emitNumericEntity(e,t){var n;if(this.consumed<=t)return null===(n=this.errors)||void 0===n||n.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===zAe.SEMI)this.consumed+=1;else if(this.decodeMode===GAe.Strict)return 0;return this.emitCodePoint(function(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=$Ae.get(e))&&void 0!==t?t:e}(this.result),this.consumed),this.errors&&(e!==zAe.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(e,t){const{decodeTree:n}=this;let r=n[this.treeIndex],i=(r&qAe.VALUE_LENGTH)>>14;for(;t<e.length;t++,this.excess++){const o=e.charCodeAt(t);if(this.treeIndex=uIe(n,r,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===GAe.Attribute&&(0===i||sIe(o))?0:this.emitNotTerminatedNamedEntity();if(r=n[this.treeIndex],i=(r&qAe.VALUE_LENGTH)>>14,0!==i){if(o===zAe.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==GAe.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var e;const{result:t,decodeTree:n}=this,r=(n[t]&qAe.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,r,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(e,t,n){const{decodeTree:r}=this;return this.emitCodePoint(1===t?r[e]&~qAe.VALUE_LENGTH:r[e+1],n),3===t&&this.emitCodePoint(r[e+2],n),n}end(){var e;switch(this.state){case VAe.NamedEntity:return 0===this.result||this.decodeMode===GAe.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case VAe.NumericDecimal:return this.emitNumericEntity(0,2);case VAe.NumericHex:return this.emitNumericEntity(0,3);case VAe.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case VAe.EntityStart:return 0}}}function uIe(e,t,n,r){const i=(t&qAe.BRANCH_LENGTH)>>7,o=t&qAe.JUMP_TABLE;if(0===i)return 0!==o&&r===o?n:-1;if(o){const t=r-o;return t<0||t>=i?-1:e[n+t]-1}let a=n,s=a+i-1;for(;a<=s;){const t=a+s>>>1,n=e[t];if(n<r)a=t+1;else{if(!(n>r))return e[t+i];s=t-1}}return-1}(ZAe=KAe||(KAe={})).HTML="http://www.w3.org/1999/xhtml",ZAe.MATHML="http://www.w3.org/1998/Math/MathML",ZAe.SVG="http://www.w3.org/2000/svg",ZAe.XLINK="http://www.w3.org/1999/xlink",ZAe.XML="http://www.w3.org/XML/1998/namespace",ZAe.XMLNS="http://www.w3.org/2000/xmlns/",(XAe=QAe||(QAe={})).TYPE="type",XAe.ACTION="action",XAe.ENCODING="encoding",XAe.PROMPT="prompt",XAe.NAME="name",XAe.COLOR="color",XAe.FACE="face",XAe.SIZE="size",(eIe=JAe||(JAe={})).NO_QUIRKS="no-quirks",eIe.QUIRKS="quirks",eIe.LIMITED_QUIRKS="limited-quirks",(nIe=tIe||(tIe={})).A="a",nIe.ADDRESS="address",nIe.ANNOTATION_XML="annotation-xml",nIe.APPLET="applet",nIe.AREA="area",nIe.ARTICLE="article",nIe.ASIDE="aside",nIe.B="b",nIe.BASE="base",nIe.BASEFONT="basefont",nIe.BGSOUND="bgsound",nIe.BIG="big",nIe.BLOCKQUOTE="blockquote",nIe.BODY="body",nIe.BR="br",nIe.BUTTON="button",nIe.CAPTION="caption",nIe.CENTER="center",nIe.CODE="code",nIe.COL="col",nIe.COLGROUP="colgroup",nIe.DD="dd",nIe.DESC="desc",nIe.DETAILS="details",nIe.DIALOG="dialog",nIe.DIR="dir",nIe.DIV="div",nIe.DL="dl",nIe.DT="dt",nIe.EM="em",nIe.EMBED="embed",nIe.FIELDSET="fieldset",nIe.FIGCAPTION="figcaption",nIe.FIGURE="figure",nIe.FONT="font",nIe.FOOTER="footer",nIe.FOREIGN_OBJECT="foreignObject",nIe.FORM="form",nIe.FRAME="frame",nIe.FRAMESET="frameset",nIe.H1="h1",nIe.H2="h2",nIe.H3="h3",nIe.H4="h4",nIe.H5="h5",nIe.H6="h6",nIe.HEAD="head",nIe.HEADER="header",nIe.HGROUP="hgroup",nIe.HR="hr",nIe.HTML="html",nIe.I="i",nIe.IMG="img",nIe.IMAGE="image",nIe.INPUT="input",nIe.IFRAME="iframe",nIe.KEYGEN="keygen",nIe.LABEL="label",nIe.LI="li",nIe.LINK="link",nIe.LISTING="listing",nIe.MAIN="main",nIe.MALIGNMARK="malignmark",nIe.MARQUEE="marquee",nIe.MATH="math",nIe.MENU="menu",nIe.META="meta",nIe.MGLYPH="mglyph",nIe.MI="mi",nIe.MO="mo",nIe.MN="mn",nIe.MS="ms",nIe.MTEXT="mtext",nIe.NAV="nav",nIe.NOBR="nobr",nIe.NOFRAMES="noframes",nIe.NOEMBED="noembed",nIe.NOSCRIPT="noscript",nIe.OBJECT="object",nIe.OL="ol",nIe.OPTGROUP="optgroup",nIe.OPTION="option",nIe.P="p",nIe.PARAM="param",nIe.PLAINTEXT="plaintext",nIe.PRE="pre",nIe.RB="rb",nIe.RP="rp",nIe.RT="rt",nIe.RTC="rtc",nIe.RUBY="ruby",nIe.S="s",nIe.SCRIPT="script",nIe.SEARCH="search",nIe.SECTION="section",nIe.SELECT="select",nIe.SOURCE="source",nIe.SMALL="small",nIe.SPAN="span",nIe.STRIKE="strike",nIe.STRONG="strong",nIe.STYLE="style",nIe.SUB="sub",nIe.SUMMARY="summary",nIe.SUP="sup",nIe.TABLE="table",nIe.TBODY="tbody",nIe.TEMPLATE="template",nIe.TEXTAREA="textarea",nIe.TFOOT="tfoot",nIe.TD="td",nIe.TH="th",nIe.THEAD="thead",nIe.TITLE="title",nIe.TR="tr",nIe.TRACK="track",nIe.TT="tt",nIe.U="u",nIe.UL="ul",nIe.SVG="svg",nIe.VAR="var",nIe.WBR="wbr",nIe.XMP="xmp",(iIe=rIe||(rIe={}))[iIe.UNKNOWN=0]="UNKNOWN",iIe[iIe.A=1]="A",iIe[iIe.ADDRESS=2]="ADDRESS",iIe[iIe.ANNOTATION_XML=3]="ANNOTATION_XML",iIe[iIe.APPLET=4]="APPLET",iIe[iIe.AREA=5]="AREA",iIe[iIe.ARTICLE=6]="ARTICLE",iIe[iIe.ASIDE=7]="ASIDE",iIe[iIe.B=8]="B",iIe[iIe.BASE=9]="BASE",iIe[iIe.BASEFONT=10]="BASEFONT",iIe[iIe.BGSOUND=11]="BGSOUND",iIe[iIe.BIG=12]="BIG",iIe[iIe.BLOCKQUOTE=13]="BLOCKQUOTE",iIe[iIe.BODY=14]="BODY",iIe[iIe.BR=15]="BR",iIe[iIe.BUTTON=16]="BUTTON",iIe[iIe.CAPTION=17]="CAPTION",iIe[iIe.CENTER=18]="CENTER",iIe[iIe.CODE=19]="CODE",iIe[iIe.COL=20]="COL",iIe[iIe.COLGROUP=21]="COLGROUP",iIe[iIe.DD=22]="DD",iIe[iIe.DESC=23]="DESC",iIe[iIe.DETAILS=24]="DETAILS",iIe[iIe.DIALOG=25]="DIALOG",iIe[iIe.DIR=26]="DIR",iIe[iIe.DIV=27]="DIV",iIe[iIe.DL=28]="DL",iIe[iIe.DT=29]="DT",iIe[iIe.EM=30]="EM",iIe[iIe.EMBED=31]="EMBED",iIe[iIe.FIELDSET=32]="FIELDSET",iIe[iIe.FIGCAPTION=33]="FIGCAPTION",iIe[iIe.FIGURE=34]="FIGURE",iIe[iIe.FONT=35]="FONT",iIe[iIe.FOOTER=36]="FOOTER",iIe[iIe.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",iIe[iIe.FORM=38]="FORM",iIe[iIe.FRAME=39]="FRAME",iIe[iIe.FRAMESET=40]="FRAMESET",iIe[iIe.H1=41]="H1",iIe[iIe.H2=42]="H2",iIe[iIe.H3=43]="H3",iIe[iIe.H4=44]="H4",iIe[iIe.H5=45]="H5",iIe[iIe.H6=46]="H6",iIe[iIe.HEAD=47]="HEAD",iIe[iIe.HEADER=48]="HEADER",iIe[iIe.HGROUP=49]="HGROUP",iIe[iIe.HR=50]="HR",iIe[iIe.HTML=51]="HTML",iIe[iIe.I=52]="I",iIe[iIe.IMG=53]="IMG",iIe[iIe.IMAGE=54]="IMAGE",iIe[iIe.INPUT=55]="INPUT",iIe[iIe.IFRAME=56]="IFRAME",iIe[iIe.KEYGEN=57]="KEYGEN",iIe[iIe.LABEL=58]="LABEL",iIe[iIe.LI=59]="LI",iIe[iIe.LINK=60]="LINK",iIe[iIe.LISTING=61]="LISTING",iIe[iIe.MAIN=62]="MAIN",iIe[iIe.MALIGNMARK=63]="MALIGNMARK",iIe[iIe.MARQUEE=64]="MARQUEE",iIe[iIe.MATH=65]="MATH",iIe[iIe.MENU=66]="MENU",iIe[iIe.META=67]="META",iIe[iIe.MGLYPH=68]="MGLYPH",iIe[iIe.MI=69]="MI",iIe[iIe.MO=70]="MO",iIe[iIe.MN=71]="MN",iIe[iIe.MS=72]="MS",iIe[iIe.MTEXT=73]="MTEXT",iIe[iIe.NAV=74]="NAV",iIe[iIe.NOBR=75]="NOBR",iIe[iIe.NOFRAMES=76]="NOFRAMES",iIe[iIe.NOEMBED=77]="NOEMBED",iIe[iIe.NOSCRIPT=78]="NOSCRIPT",iIe[iIe.OBJECT=79]="OBJECT",iIe[iIe.OL=80]="OL",iIe[iIe.OPTGROUP=81]="OPTGROUP",iIe[iIe.OPTION=82]="OPTION",iIe[iIe.P=83]="P",iIe[iIe.PARAM=84]="PARAM",iIe[iIe.PLAINTEXT=85]="PLAINTEXT",iIe[iIe.PRE=86]="PRE",iIe[iIe.RB=87]="RB",iIe[iIe.RP=88]="RP",iIe[iIe.RT=89]="RT",iIe[iIe.RTC=90]="RTC",iIe[iIe.RUBY=91]="RUBY",iIe[iIe.S=92]="S",iIe[iIe.SCRIPT=93]="SCRIPT",iIe[iIe.SEARCH=94]="SEARCH",iIe[iIe.SECTION=95]="SECTION",iIe[iIe.SELECT=96]="SELECT",iIe[iIe.SOURCE=97]="SOURCE",iIe[iIe.SMALL=98]="SMALL",iIe[iIe.SPAN=99]="SPAN",iIe[iIe.STRIKE=100]="STRIKE",iIe[iIe.STRONG=101]="STRONG",iIe[iIe.STYLE=102]="STYLE",iIe[iIe.SUB=103]="SUB",iIe[iIe.SUMMARY=104]="SUMMARY",iIe[iIe.SUP=105]="SUP",iIe[iIe.TABLE=106]="TABLE",iIe[iIe.TBODY=107]="TBODY",iIe[iIe.TEMPLATE=108]="TEMPLATE",iIe[iIe.TEXTAREA=109]="TEXTAREA",iIe[iIe.TFOOT=110]="TFOOT",iIe[iIe.TD=111]="TD",iIe[iIe.TH=112]="TH",iIe[iIe.THEAD=113]="THEAD",iIe[iIe.TITLE=114]="TITLE",iIe[iIe.TR=115]="TR",iIe[iIe.TRACK=116]="TRACK",iIe[iIe.TT=117]="TT",iIe[iIe.U=118]="U",iIe[iIe.UL=119]="UL",iIe[iIe.SVG=120]="SVG",iIe[iIe.VAR=121]="VAR",iIe[iIe.WBR=122]="WBR",iIe[iIe.XMP=123]="XMP";const cIe=new Map([[tIe.A,rIe.A],[tIe.ADDRESS,rIe.ADDRESS],[tIe.ANNOTATION_XML,rIe.ANNOTATION_XML],[tIe.APPLET,rIe.APPLET],[tIe.AREA,rIe.AREA],[tIe.ARTICLE,rIe.ARTICLE],[tIe.ASIDE,rIe.ASIDE],[tIe.B,rIe.B],[tIe.BASE,rIe.BASE],[tIe.BASEFONT,rIe.BASEFONT],[tIe.BGSOUND,rIe.BGSOUND],[tIe.BIG,rIe.BIG],[tIe.BLOCKQUOTE,rIe.BLOCKQUOTE],[tIe.BODY,rIe.BODY],[tIe.BR,rIe.BR],[tIe.BUTTON,rIe.BUTTON],[tIe.CAPTION,rIe.CAPTION],[tIe.CENTER,rIe.CENTER],[tIe.CODE,rIe.CODE],[tIe.COL,rIe.COL],[tIe.COLGROUP,rIe.COLGROUP],[tIe.DD,rIe.DD],[tIe.DESC,rIe.DESC],[tIe.DETAILS,rIe.DETAILS],[tIe.DIALOG,rIe.DIALOG],[tIe.DIR,rIe.DIR],[tIe.DIV,rIe.DIV],[tIe.DL,rIe.DL],[tIe.DT,rIe.DT],[tIe.EM,rIe.EM],[tIe.EMBED,rIe.EMBED],[tIe.FIELDSET,rIe.FIELDSET],[tIe.FIGCAPTION,rIe.FIGCAPTION],[tIe.FIGURE,rIe.FIGURE],[tIe.FONT,rIe.FONT],[tIe.FOOTER,rIe.FOOTER],[tIe.FOREIGN_OBJECT,rIe.FOREIGN_OBJECT],[tIe.FORM,rIe.FORM],[tIe.FRAME,rIe.FRAME],[tIe.FRAMESET,rIe.FRAMESET],[tIe.H1,rIe.H1],[tIe.H2,rIe.H2],[tIe.H3,rIe.H3],[tIe.H4,rIe.H4],[tIe.H5,rIe.H5],[tIe.H6,rIe.H6],[tIe.HEAD,rIe.HEAD],[tIe.HEADER,rIe.HEADER],[tIe.HGROUP,rIe.HGROUP],[tIe.HR,rIe.HR],[tIe.HTML,rIe.HTML],[tIe.I,rIe.I],[tIe.IMG,rIe.IMG],[tIe.IMAGE,rIe.IMAGE],[tIe.INPUT,rIe.INPUT],[tIe.IFRAME,rIe.IFRAME],[tIe.KEYGEN,rIe.KEYGEN],[tIe.LABEL,rIe.LABEL],[tIe.LI,rIe.LI],[tIe.LINK,rIe.LINK],[tIe.LISTING,rIe.LISTING],[tIe.MAIN,rIe.MAIN],[tIe.MALIGNMARK,rIe.MALIGNMARK],[tIe.MARQUEE,rIe.MARQUEE],[tIe.MATH,rIe.MATH],[tIe.MENU,rIe.MENU],[tIe.META,rIe.META],[tIe.MGLYPH,rIe.MGLYPH],[tIe.MI,rIe.MI],[tIe.MO,rIe.MO],[tIe.MN,rIe.MN],[tIe.MS,rIe.MS],[tIe.MTEXT,rIe.MTEXT],[tIe.NAV,rIe.NAV],[tIe.NOBR,rIe.NOBR],[tIe.NOFRAMES,rIe.NOFRAMES],[tIe.NOEMBED,rIe.NOEMBED],[tIe.NOSCRIPT,rIe.NOSCRIPT],[tIe.OBJECT,rIe.OBJECT],[tIe.OL,rIe.OL],[tIe.OPTGROUP,rIe.OPTGROUP],[tIe.OPTION,rIe.OPTION],[tIe.P,rIe.P],[tIe.PARAM,rIe.PARAM],[tIe.PLAINTEXT,rIe.PLAINTEXT],[tIe.PRE,rIe.PRE],[tIe.RB,rIe.RB],[tIe.RP,rIe.RP],[tIe.RT,rIe.RT],[tIe.RTC,rIe.RTC],[tIe.RUBY,rIe.RUBY],[tIe.S,rIe.S],[tIe.SCRIPT,rIe.SCRIPT],[tIe.SEARCH,rIe.SEARCH],[tIe.SECTION,rIe.SECTION],[tIe.SELECT,rIe.SELECT],[tIe.SOURCE,rIe.SOURCE],[tIe.SMALL,rIe.SMALL],[tIe.SPAN,rIe.SPAN],[tIe.STRIKE,rIe.STRIKE],[tIe.STRONG,rIe.STRONG],[tIe.STYLE,rIe.STYLE],[tIe.SUB,rIe.SUB],[tIe.SUMMARY,rIe.SUMMARY],[tIe.SUP,rIe.SUP],[tIe.TABLE,rIe.TABLE],[tIe.TBODY,rIe.TBODY],[tIe.TEMPLATE,rIe.TEMPLATE],[tIe.TEXTAREA,rIe.TEXTAREA],[tIe.TFOOT,rIe.TFOOT],[tIe.TD,rIe.TD],[tIe.TH,rIe.TH],[tIe.THEAD,rIe.THEAD],[tIe.TITLE,rIe.TITLE],[tIe.TR,rIe.TR],[tIe.TRACK,rIe.TRACK],[tIe.TT,rIe.TT],[tIe.U,rIe.U],[tIe.UL,rIe.UL],[tIe.SVG,rIe.SVG],[tIe.VAR,rIe.VAR],[tIe.WBR,rIe.WBR],[tIe.XMP,rIe.XMP]]);function dIe(e){var t;return null!==(t=cIe.get(e))&&void 0!==t?t:rIe.UNKNOWN}const fIe=rIe,pIe={[KAe.HTML]:new Set([fIe.ADDRESS,fIe.APPLET,fIe.AREA,fIe.ARTICLE,fIe.ASIDE,fIe.BASE,fIe.BASEFONT,fIe.BGSOUND,fIe.BLOCKQUOTE,fIe.BODY,fIe.BR,fIe.BUTTON,fIe.CAPTION,fIe.CENTER,fIe.COL,fIe.COLGROUP,fIe.DD,fIe.DETAILS,fIe.DIR,fIe.DIV,fIe.DL,fIe.DT,fIe.EMBED,fIe.FIELDSET,fIe.FIGCAPTION,fIe.FIGURE,fIe.FOOTER,fIe.FORM,fIe.FRAME,fIe.FRAMESET,fIe.H1,fIe.H2,fIe.H3,fIe.H4,fIe.H5,fIe.H6,fIe.HEAD,fIe.HEADER,fIe.HGROUP,fIe.HR,fIe.HTML,fIe.IFRAME,fIe.IMG,fIe.INPUT,fIe.LI,fIe.LINK,fIe.LISTING,fIe.MAIN,fIe.MARQUEE,fIe.MENU,fIe.META,fIe.NAV,fIe.NOEMBED,fIe.NOFRAMES,fIe.NOSCRIPT,fIe.OBJECT,fIe.OL,fIe.P,fIe.PARAM,fIe.PLAINTEXT,fIe.PRE,fIe.SCRIPT,fIe.SECTION,fIe.SELECT,fIe.SOURCE,fIe.STYLE,fIe.SUMMARY,fIe.TABLE,fIe.TBODY,fIe.TD,fIe.TEMPLATE,fIe.TEXTAREA,fIe.TFOOT,fIe.TH,fIe.THEAD,fIe.TITLE,fIe.TR,fIe.TRACK,fIe.UL,fIe.WBR,fIe.XMP]),[KAe.MATHML]:new Set([fIe.MI,fIe.MO,fIe.MN,fIe.MS,fIe.MTEXT,fIe.ANNOTATION_XML]),[KAe.SVG]:new Set([fIe.TITLE,fIe.FOREIGN_OBJECT,fIe.DESC]),[KAe.XLINK]:new Set,[KAe.XML]:new Set,[KAe.XMLNS]:new Set},hIe=new Set([fIe.H1,fIe.H2,fIe.H3,fIe.H4,fIe.H5,fIe.H6]);var mIe,gIe;tIe.STYLE,tIe.SCRIPT,tIe.XMP,tIe.IFRAME,tIe.NOEMBED,tIe.NOFRAMES,tIe.PLAINTEXT,(gIe=mIe||(mIe={}))[gIe.DATA=0]="DATA",gIe[gIe.RCDATA=1]="RCDATA",gIe[gIe.RAWTEXT=2]="RAWTEXT",gIe[gIe.SCRIPT_DATA=3]="SCRIPT_DATA",gIe[gIe.PLAINTEXT=4]="PLAINTEXT",gIe[gIe.TAG_OPEN=5]="TAG_OPEN",gIe[gIe.END_TAG_OPEN=6]="END_TAG_OPEN",gIe[gIe.TAG_NAME=7]="TAG_NAME",gIe[gIe.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",gIe[gIe.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",gIe[gIe.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",gIe[gIe.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",gIe[gIe.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",gIe[gIe.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",gIe[gIe.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",gIe[gIe.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",gIe[gIe.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",gIe[gIe.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",gIe[gIe.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",gIe[gIe.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",gIe[gIe.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",gIe[gIe.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",gIe[gIe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",gIe[gIe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",gIe[gIe.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",gIe[gIe.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",gIe[gIe.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",gIe[gIe.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",gIe[gIe.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",gIe[gIe.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",gIe[gIe.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",gIe[gIe.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",gIe[gIe.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",gIe[gIe.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",gIe[gIe.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",gIe[gIe.BOGUS_COMMENT=40]="BOGUS_COMMENT",gIe[gIe.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",gIe[gIe.COMMENT_START=42]="COMMENT_START",gIe[gIe.COMMENT_START_DASH=43]="COMMENT_START_DASH",gIe[gIe.COMMENT=44]="COMMENT",gIe[gIe.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",gIe[gIe.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",gIe[gIe.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",gIe[gIe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",gIe[gIe.COMMENT_END_DASH=49]="COMMENT_END_DASH",gIe[gIe.COMMENT_END=50]="COMMENT_END",gIe[gIe.COMMENT_END_BANG=51]="COMMENT_END_BANG",gIe[gIe.DOCTYPE=52]="DOCTYPE",gIe[gIe.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",gIe[gIe.DOCTYPE_NAME=54]="DOCTYPE_NAME",gIe[gIe.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",gIe[gIe.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",gIe[gIe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",gIe[gIe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",gIe[gIe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",gIe[gIe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",gIe[gIe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",gIe[gIe.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",gIe[gIe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",gIe[gIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",gIe[gIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",gIe[gIe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",gIe[gIe.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",gIe[gIe.CDATA_SECTION=68]="CDATA_SECTION",gIe[gIe.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",gIe[gIe.CDATA_SECTION_END=70]="CDATA_SECTION_END",gIe[gIe.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",gIe[gIe.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND";const yIe={DATA:mIe.DATA,RCDATA:mIe.RCDATA,RAWTEXT:mIe.RAWTEXT,SCRIPT_DATA:mIe.SCRIPT_DATA,PLAINTEXT:mIe.PLAINTEXT,CDATA_SECTION:mIe.CDATA_SECTION};function vIe(e){return e>=xAe.LATIN_CAPITAL_A&&e<=xAe.LATIN_CAPITAL_Z}function bIe(e){return function(e){return e>=xAe.LATIN_SMALL_A&&e<=xAe.LATIN_SMALL_Z}(e)||vIe(e)}function wIe(e){return bIe(e)||function(e){return e>=xAe.DIGIT_0&&e<=xAe.DIGIT_9}(e)}function _Ie(e){return e+32}function xIe(e){return e===xAe.SPACE||e===xAe.LINE_FEED||e===xAe.TABULATION||e===xAe.FORM_FEED}function EIe(e){return xIe(e)||e===xAe.SOLIDUS||e===xAe.GREATER_THAN_SIGN}class SIe{constructor(e,t){this.options=e,this.handler=t,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=mIe.DATA,this.returnState=mIe.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new PAe(t),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new lIe(BAe,(e,t)=>{this.preprocessor.pos=this.entityStartPos+t-1,this._flushCodePointConsumedAsCharacterReference(e)},t.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(RAe.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:e=>{this._err(RAe.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+e)},validateNumericCharacterReference:e=>{const t=function(e){return e===xAe.NULL?RAe.nullCharacterReference:e>1114111?RAe.characterReferenceOutsideUnicodeRange:OAe(e)?RAe.surrogateCharacterReference:DAe(e)?RAe.noncharacterCharacterReference:NAe(e)||e===xAe.CARRIAGE_RETURN?RAe.controlCharacterReference:null}(e);t&&this._err(t,1)}}:void 0)}_err(e,t=0){var n,r;null===(r=(n=this.handler).onParseError)||void 0===r||r.call(n,this.preprocessor.getError(e,t))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,this.inLoop||(this._runParsingLoop(),this.paused||null==e||e())}write(e,t,n){this.active=!0,this.preprocessor.write(e,t),this._runParsingLoop(),this.paused||null==n||n()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return!!this.preprocessor.endOfChunkHit&&(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0)}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let t=0;t<e;t++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,t){return!!this.preprocessor.startsWith(e,t)&&(this._advanceBy(e.length-1),!0)}_createStartTagToken(){this.currentToken={type:FAe.START_TAG,tagName:"",tagID:rIe.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:FAe.END_TAG,tagName:"",tagID:rIe.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:FAe.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:FAe.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,t){this.currentCharacterToken={type:e,chars:t,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,t;const n=this.currentToken;if(null===jAe(n,this.currentAttr.name)){if(n.attrs.push(this.currentAttr),n.location&&this.currentLocation){(null!==(e=(t=n.location).attrs)&&void 0!==e?e:t.attrs=Object.create(null))[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(RAe.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=dIe(e.tagName),e.type===FAe.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(RAe.endTagWithAttributes),e.selfClosing&&this._err(RAe.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case FAe.CHARACTER:this.handler.onCharacter(this.currentCharacterToken);break;case FAe.NULL_CHARACTER:this.handler.onNullCharacter(this.currentCharacterToken);break;case FAe.WHITESPACE_CHARACTER:this.handler.onWhitespaceCharacter(this.currentCharacterToken)}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:FAe.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,t){if(this.currentCharacterToken){if(this.currentCharacterToken.type===e)return void(this.currentCharacterToken.chars+=t);this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk()}this._createCharacterToken(e,t)}_emitCodePoint(e){const t=xIe(e)?FAe.WHITESPACE_CHARACTER:e===xAe.NULL?FAe.NULL_CHARACTER:FAe.CHARACTER;this._appendCharToCurrentCharacterToken(t,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(FAe.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=mIe.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?GAe.Attribute:GAe.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===mIe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===mIe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===mIe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case mIe.DATA:this._stateData(e);break;case mIe.RCDATA:this._stateRcdata(e);break;case mIe.RAWTEXT:this._stateRawtext(e);break;case mIe.SCRIPT_DATA:this._stateScriptData(e);break;case mIe.PLAINTEXT:this._statePlaintext(e);break;case mIe.TAG_OPEN:this._stateTagOpen(e);break;case mIe.END_TAG_OPEN:this._stateEndTagOpen(e);break;case mIe.TAG_NAME:this._stateTagName(e);break;case mIe.RCDATA_LESS_THAN_SIGN:this._stateRcdataLessThanSign(e);break;case mIe.RCDATA_END_TAG_OPEN:this._stateRcdataEndTagOpen(e);break;case mIe.RCDATA_END_TAG_NAME:this._stateRcdataEndTagName(e);break;case mIe.RAWTEXT_LESS_THAN_SIGN:this._stateRawtextLessThanSign(e);break;case mIe.RAWTEXT_END_TAG_OPEN:this._stateRawtextEndTagOpen(e);break;case mIe.RAWTEXT_END_TAG_NAME:this._stateRawtextEndTagName(e);break;case mIe.SCRIPT_DATA_LESS_THAN_SIGN:this._stateScriptDataLessThanSign(e);break;case mIe.SCRIPT_DATA_END_TAG_OPEN:this._stateScriptDataEndTagOpen(e);break;case mIe.SCRIPT_DATA_END_TAG_NAME:this._stateScriptDataEndTagName(e);break;case mIe.SCRIPT_DATA_ESCAPE_START:this._stateScriptDataEscapeStart(e);break;case mIe.SCRIPT_DATA_ESCAPE_START_DASH:this._stateScriptDataEscapeStartDash(e);break;case mIe.SCRIPT_DATA_ESCAPED:this._stateScriptDataEscaped(e);break;case mIe.SCRIPT_DATA_ESCAPED_DASH:this._stateScriptDataEscapedDash(e);break;case mIe.SCRIPT_DATA_ESCAPED_DASH_DASH:this._stateScriptDataEscapedDashDash(e);break;case mIe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataEscapedLessThanSign(e);break;case mIe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:this._stateScriptDataEscapedEndTagOpen(e);break;case mIe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:this._stateScriptDataEscapedEndTagName(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPE_START:this._stateScriptDataDoubleEscapeStart(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPED:this._stateScriptDataDoubleEscaped(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:this._stateScriptDataDoubleEscapedDash(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:this._stateScriptDataDoubleEscapedDashDash(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:this._stateScriptDataDoubleEscapedLessThanSign(e);break;case mIe.SCRIPT_DATA_DOUBLE_ESCAPE_END:this._stateScriptDataDoubleEscapeEnd(e);break;case mIe.BEFORE_ATTRIBUTE_NAME:this._stateBeforeAttributeName(e);break;case mIe.ATTRIBUTE_NAME:this._stateAttributeName(e);break;case mIe.AFTER_ATTRIBUTE_NAME:this._stateAfterAttributeName(e);break;case mIe.BEFORE_ATTRIBUTE_VALUE:this._stateBeforeAttributeValue(e);break;case mIe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:this._stateAttributeValueDoubleQuoted(e);break;case mIe.ATTRIBUTE_VALUE_SINGLE_QUOTED:this._stateAttributeValueSingleQuoted(e);break;case mIe.ATTRIBUTE_VALUE_UNQUOTED:this._stateAttributeValueUnquoted(e);break;case mIe.AFTER_ATTRIBUTE_VALUE_QUOTED:this._stateAfterAttributeValueQuoted(e);break;case mIe.SELF_CLOSING_START_TAG:this._stateSelfClosingStartTag(e);break;case mIe.BOGUS_COMMENT:this._stateBogusComment(e);break;case mIe.MARKUP_DECLARATION_OPEN:this._stateMarkupDeclarationOpen(e);break;case mIe.COMMENT_START:this._stateCommentStart(e);break;case mIe.COMMENT_START_DASH:this._stateCommentStartDash(e);break;case mIe.COMMENT:this._stateComment(e);break;case mIe.COMMENT_LESS_THAN_SIGN:this._stateCommentLessThanSign(e);break;case mIe.COMMENT_LESS_THAN_SIGN_BANG:this._stateCommentLessThanSignBang(e);break;case mIe.COMMENT_LESS_THAN_SIGN_BANG_DASH:this._stateCommentLessThanSignBangDash(e);break;case mIe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:this._stateCommentLessThanSignBangDashDash(e);break;case mIe.COMMENT_END_DASH:this._stateCommentEndDash(e);break;case mIe.COMMENT_END:this._stateCommentEnd(e);break;case mIe.COMMENT_END_BANG:this._stateCommentEndBang(e);break;case mIe.DOCTYPE:this._stateDoctype(e);break;case mIe.BEFORE_DOCTYPE_NAME:this._stateBeforeDoctypeName(e);break;case mIe.DOCTYPE_NAME:this._stateDoctypeName(e);break;case mIe.AFTER_DOCTYPE_NAME:this._stateAfterDoctypeName(e);break;case mIe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._stateAfterDoctypePublicKeyword(e);break;case mIe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:this._stateBeforeDoctypePublicIdentifier(e);break;case mIe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypePublicIdentifierDoubleQuoted(e);break;case mIe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypePublicIdentifierSingleQuoted(e);break;case mIe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:this._stateAfterDoctypePublicIdentifier(e);break;case mIe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break;case mIe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._stateAfterDoctypeSystemKeyword(e);break;case mIe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:this._stateBeforeDoctypeSystemIdentifier(e);break;case mIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:this._stateDoctypeSystemIdentifierDoubleQuoted(e);break;case mIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:this._stateDoctypeSystemIdentifierSingleQuoted(e);break;case mIe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:this._stateAfterDoctypeSystemIdentifier(e);break;case mIe.BOGUS_DOCTYPE:this._stateBogusDoctype(e);break;case mIe.CDATA_SECTION:this._stateCdataSection(e);break;case mIe.CDATA_SECTION_BRACKET:this._stateCdataSectionBracket(e);break;case mIe.CDATA_SECTION_END:this._stateCdataSectionEnd(e);break;case mIe.CHARACTER_REFERENCE:this._stateCharacterReference();break;case mIe.AMBIGUOUS_AMPERSAND:this._stateAmbiguousAmpersand(e);break;default:throw new Error("Unknown state")}}_stateData(e){switch(e){case xAe.LESS_THAN_SIGN:this.state=mIe.TAG_OPEN;break;case xAe.AMPERSAND:this._startCharacterReference();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitCodePoint(e);break;case xAe.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case xAe.AMPERSAND:this._startCharacterReference();break;case xAe.LESS_THAN_SIGN:this.state=mIe.RCDATA_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case xAe.LESS_THAN_SIGN:this.state=mIe.RAWTEXT_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateTagOpen(e){if(bIe(e))this._createStartTagToken(),this.state=mIe.TAG_NAME,this._stateTagName(e);else switch(e){case xAe.EXCLAMATION_MARK:this.state=mIe.MARKUP_DECLARATION_OPEN;break;case xAe.SOLIDUS:this.state=mIe.END_TAG_OPEN;break;case xAe.QUESTION_MARK:this._err(RAe.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=mIe.BOGUS_COMMENT,this._stateBogusComment(e);break;case xAe.EOF:this._err(RAe.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break;default:this._err(RAe.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=mIe.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(bIe(e))this._createEndTagToken(),this.state=mIe.TAG_NAME,this._stateTagName(e);else switch(e){case xAe.GREATER_THAN_SIGN:this._err(RAe.missingEndTagName),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break;default:this._err(RAe.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=mIe.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.BEFORE_ATTRIBUTE_NAME;break;case xAe.SOLIDUS:this.state=mIe.SELF_CLOSING_START_TAG;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentTagToken();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.tagName+=_Ae;break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:t.tagName+=String.fromCodePoint(vIe(e)?_Ie(e):e)}}_stateRcdataLessThanSign(e){e===xAe.SOLIDUS?this.state=mIe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=mIe.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){bIe(e)?(this.state=mIe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=mIe.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();this.currentToken.tagName=this.lastStartTagName;switch(this.preprocessor.peek(this.lastStartTagName.length)){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=mIe.BEFORE_ATTRIBUTE_NAME,!1;case xAe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=mIe.SELF_CLOSING_START_TAG,!1;case xAe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=mIe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=mIe.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===xAe.SOLIDUS?this.state=mIe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=mIe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){bIe(e)?(this.state=mIe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=mIe.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=mIe.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case xAe.SOLIDUS:this.state=mIe.SCRIPT_DATA_END_TAG_OPEN;break;case xAe.EXCLAMATION_MARK:this.state=mIe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break;default:this._emitChars("<"),this.state=mIe.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){bIe(e)?(this.state=mIe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=mIe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=mIe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===xAe.HYPHEN_MINUS?(this.state=mIe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=mIe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===xAe.HYPHEN_MINUS?(this.state=mIe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=mIe.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.state=mIe.SCRIPT_DATA_ESCAPED,this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=mIe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case xAe.HYPHEN_MINUS:this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.SCRIPT_DATA,this._emitChars(">");break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.state=mIe.SCRIPT_DATA_ESCAPED,this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=mIe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===xAe.SOLIDUS?this.state=mIe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:bIe(e)?(this._emitChars("<"),this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=mIe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){bIe(e)?(this.state=mIe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=mIe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=mIe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(CAe,!1)&&EIe(this.preprocessor.peek(CAe.length))){this._emitCodePoint(e);for(let e=0;e<CAe.length;e++)this._emitCodePoint(this._consume());this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=mIe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case xAe.HYPHEN_MINUS:this._emitChars("-");break;case xAe.LESS_THAN_SIGN:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break;case xAe.GREATER_THAN_SIGN:this.state=mIe.SCRIPT_DATA,this._emitChars(">");break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(_Ae);break;case xAe.EOF:this._err(RAe.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break;default:this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===xAe.SOLIDUS?(this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(CAe,!1)&&EIe(this.preprocessor.peek(CAe.length))){this._emitCodePoint(e);for(let e=0;e<CAe.length;e++)this._emitCodePoint(this._consume());this.state=mIe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=mIe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.SOLIDUS:case xAe.GREATER_THAN_SIGN:case xAe.EOF:this.state=mIe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case xAe.EQUALS_SIGN:this._err(RAe.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=mIe.ATTRIBUTE_NAME;break;default:this._createAttr(""),this.state=mIe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:case xAe.SOLIDUS:case xAe.GREATER_THAN_SIGN:case xAe.EOF:this._leaveAttrName(),this.state=mIe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break;case xAe.EQUALS_SIGN:this._leaveAttrName(),this.state=mIe.BEFORE_ATTRIBUTE_VALUE;break;case xAe.QUOTATION_MARK:case xAe.APOSTROPHE:case xAe.LESS_THAN_SIGN:this._err(RAe.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.currentAttr.name+=_Ae;break;default:this.currentAttr.name+=String.fromCodePoint(vIe(e)?_Ie(e):e)}}_stateAfterAttributeName(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.SOLIDUS:this.state=mIe.SELF_CLOSING_START_TAG;break;case xAe.EQUALS_SIGN:this.state=mIe.BEFORE_ATTRIBUTE_VALUE;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentTagToken();break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this._createAttr(""),this.state=mIe.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.QUOTATION_MARK:this.state=mIe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:this.state=mIe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.missingAttributeValue),this.state=mIe.DATA,this.emitCurrentTagToken();break;default:this.state=mIe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case xAe.QUOTATION_MARK:this.state=mIe.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case xAe.AMPERSAND:this._startCharacterReference();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.currentAttr.value+=_Ae;break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case xAe.APOSTROPHE:this.state=mIe.AFTER_ATTRIBUTE_VALUE_QUOTED;break;case xAe.AMPERSAND:this._startCharacterReference();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.currentAttr.value+=_Ae;break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this._leaveAttrValue(),this.state=mIe.BEFORE_ATTRIBUTE_NAME;break;case xAe.AMPERSAND:this._startCharacterReference();break;case xAe.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=mIe.DATA,this.emitCurrentTagToken();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this.currentAttr.value+=_Ae;break;case xAe.QUOTATION_MARK:case xAe.APOSTROPHE:case xAe.LESS_THAN_SIGN:case xAe.EQUALS_SIGN:case xAe.GRAVE_ACCENT:this._err(RAe.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this._leaveAttrValue(),this.state=mIe.BEFORE_ATTRIBUTE_NAME;break;case xAe.SOLIDUS:this._leaveAttrValue(),this.state=mIe.SELF_CLOSING_START_TAG;break;case xAe.GREATER_THAN_SIGN:this._leaveAttrValue(),this.state=mIe.DATA,this.emitCurrentTagToken();break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this._err(RAe.missingWhitespaceBetweenAttributes),this.state=mIe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case xAe.GREATER_THAN_SIGN:this.currentToken.selfClosing=!0,this.state=mIe.DATA,this.emitCurrentTagToken();break;case xAe.EOF:this._err(RAe.eofInTag),this._emitEOFToken();break;default:this._err(RAe.unexpectedSolidusInTag),this.state=mIe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const t=this.currentToken;switch(e){case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentComment(t);break;case xAe.EOF:this.emitCurrentComment(t),this._emitEOFToken();break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.data+=_Ae;break;default:t.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(SAe,!0)?(this._createCommentToken(SAe.length+1),this.state=mIe.COMMENT_START):this._consumeSequenceIfMatch(TAe,!1)?(this.currentLocation=this.getCurrentLocation(TAe.length+1),this.state=mIe.DOCTYPE):this._consumeSequenceIfMatch(kAe,!0)?this.inForeignNode?this.state=mIe.CDATA_SECTION:(this._err(RAe.cdataInHtmlContent),this._createCommentToken(kAe.length+1),this.currentToken.data="[CDATA[",this.state=mIe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(RAe.incorrectlyOpenedComment),this._createCommentToken(2),this.state=mIe.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.COMMENT_START_DASH;break;case xAe.GREATER_THAN_SIGN:{this._err(RAe.abruptClosingOfEmptyComment),this.state=mIe.DATA;const e=this.currentToken;this.emitCurrentComment(e);break}default:this.state=mIe.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const t=this.currentToken;switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.COMMENT_END;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.abruptClosingOfEmptyComment),this.state=mIe.DATA,this.emitCurrentComment(t);break;case xAe.EOF:this._err(RAe.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=mIe.COMMENT,this._stateComment(e)}}_stateComment(e){const t=this.currentToken;switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.COMMENT_END_DASH;break;case xAe.LESS_THAN_SIGN:t.data+="<",this.state=mIe.COMMENT_LESS_THAN_SIGN;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.data+=_Ae;break;case xAe.EOF:this._err(RAe.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const t=this.currentToken;switch(e){case xAe.EXCLAMATION_MARK:t.data+="!",this.state=mIe.COMMENT_LESS_THAN_SIGN_BANG;break;case xAe.LESS_THAN_SIGN:t.data+="<";break;default:this.state=mIe.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===xAe.HYPHEN_MINUS?this.state=mIe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=mIe.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===xAe.HYPHEN_MINUS?this.state=mIe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=mIe.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==xAe.GREATER_THAN_SIGN&&e!==xAe.EOF&&this._err(RAe.nestedComment),this.state=mIe.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const t=this.currentToken;switch(e){case xAe.HYPHEN_MINUS:this.state=mIe.COMMENT_END;break;case xAe.EOF:this._err(RAe.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="-",this.state=mIe.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const t=this.currentToken;switch(e){case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentComment(t);break;case xAe.EXCLAMATION_MARK:this.state=mIe.COMMENT_END_BANG;break;case xAe.HYPHEN_MINUS:t.data+="-";break;case xAe.EOF:this._err(RAe.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--",this.state=mIe.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const t=this.currentToken;switch(e){case xAe.HYPHEN_MINUS:t.data+="--!",this.state=mIe.COMMENT_END_DASH;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.incorrectlyClosedComment),this.state=mIe.DATA,this.emitCurrentComment(t);break;case xAe.EOF:this._err(RAe.eofInComment),this.emitCurrentComment(t),this._emitEOFToken();break;default:t.data+="--!",this.state=mIe.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.BEFORE_DOCTYPE_NAME;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break;case xAe.EOF:{this._err(RAe.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._err(RAe.missingWhitespaceBeforeDoctypeName),this.state=mIe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(vIe(e))this._createDoctypeToken(String.fromCharCode(_Ie(e))),this.state=mIe.DOCTYPE_NAME;else switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),this._createDoctypeToken(_Ae),this.state=mIe.DOCTYPE_NAME;break;case xAe.GREATER_THAN_SIGN:{this._err(RAe.missingDoctypeName),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this.state=mIe.DATA;break}case xAe.EOF:{this._err(RAe.eofInDoctype),this._createDoctypeToken(null);const e=this.currentToken;e.forceQuirks=!0,this.emitCurrentDoctype(e),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=mIe.DOCTYPE_NAME}}_stateDoctypeName(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.AFTER_DOCTYPE_NAME;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.name+=_Ae;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.name+=String.fromCodePoint(vIe(e)?_Ie(e):e)}}_stateAfterDoctypeName(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._consumeSequenceIfMatch(AAe,!1)?this.state=mIe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(IAe,!1)?this.state=mIe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(RAe.invalidCharacterSequenceAfterDoctypeName),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break;case xAe.QUOTATION_MARK:this._err(RAe.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=mIe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:this._err(RAe.missingWhitespaceAfterDoctypePublicKeyword),t.publicId="",this.state=mIe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.QUOTATION_MARK:t.publicId="",this.state=mIe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:t.publicId="",this.state=mIe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.missingDoctypePublicIdentifier),t.forceQuirks=!0,this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypePublicIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case xAe.QUOTATION_MARK:this.state=mIe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.publicId+=_Ae;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case xAe.APOSTROPHE:this.state=mIe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.publicId+=_Ae;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.abruptDoctypePublicIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break;case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.QUOTATION_MARK:this._err(RAe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:this._err(RAe.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.QUOTATION_MARK:t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:this.state=mIe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break;case xAe.QUOTATION_MARK:this._err(RAe.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:this._err(RAe.missingWhitespaceAfterDoctypeSystemKeyword),t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.QUOTATION_MARK:t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break;case xAe.APOSTROPHE:t.systemId="",this.state=mIe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.missingDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.DATA,this.emitCurrentDoctype(t);break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.missingQuoteBeforeDoctypeSystemIdentifier),t.forceQuirks=!0,this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const t=this.currentToken;switch(e){case xAe.QUOTATION_MARK:this.state=mIe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.systemId+=_Ae;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const t=this.currentToken;switch(e){case xAe.APOSTROPHE:this.state=mIe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter),t.systemId+=_Ae;break;case xAe.GREATER_THAN_SIGN:this._err(RAe.abruptDoctypeSystemIdentifier),t.forceQuirks=!0,this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:t.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const t=this.currentToken;switch(e){case xAe.SPACE:case xAe.LINE_FEED:case xAe.TABULATION:case xAe.FORM_FEED:break;case xAe.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.EOF:this._err(RAe.eofInDoctype),t.forceQuirks=!0,this.emitCurrentDoctype(t),this._emitEOFToken();break;default:this._err(RAe.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=mIe.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const t=this.currentToken;switch(e){case xAe.GREATER_THAN_SIGN:this.emitCurrentDoctype(t),this.state=mIe.DATA;break;case xAe.NULL:this._err(RAe.unexpectedNullCharacter);break;case xAe.EOF:this.emitCurrentDoctype(t),this._emitEOFToken()}}_stateCdataSection(e){switch(e){case xAe.RIGHT_SQUARE_BRACKET:this.state=mIe.CDATA_SECTION_BRACKET;break;case xAe.EOF:this._err(RAe.eofInCdata),this._emitEOFToken();break;default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===xAe.RIGHT_SQUARE_BRACKET?this.state=mIe.CDATA_SECTION_END:(this._emitChars("]"),this.state=mIe.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case xAe.GREATER_THAN_SIGN:this.state=mIe.DATA;break;case xAe.RIGHT_SQUARE_BRACKET:this._emitChars("]");break;default:this._emitChars("]]"),this.state=mIe.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0){if(!this.preprocessor.lastChunkWritten)return this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,void(this.preprocessor.endOfChunkHit=!0);e=this.entityDecoder.end()}0===e?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(xAe.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&wIe(this.preprocessor.peek(1))?mIe.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){wIe(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===xAe.SEMICOLON&&this._err(RAe.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const kIe=new Set([rIe.DD,rIe.DT,rIe.LI,rIe.OPTGROUP,rIe.OPTION,rIe.P,rIe.RB,rIe.RP,rIe.RT,rIe.RTC]),TIe=new Set([...kIe,rIe.CAPTION,rIe.COLGROUP,rIe.TBODY,rIe.TD,rIe.TFOOT,rIe.TH,rIe.THEAD,rIe.TR]),CIe=new Set([rIe.APPLET,rIe.CAPTION,rIe.HTML,rIe.MARQUEE,rIe.OBJECT,rIe.TABLE,rIe.TD,rIe.TEMPLATE,rIe.TH]),AIe=new Set([...CIe,rIe.OL,rIe.UL]),IIe=new Set([...CIe,rIe.BUTTON]),OIe=new Set([rIe.ANNOTATION_XML,rIe.MI,rIe.MN,rIe.MO,rIe.MS,rIe.MTEXT]),NIe=new Set([rIe.DESC,rIe.FOREIGN_OBJECT,rIe.TITLE]),DIe=new Set([rIe.TR,rIe.TEMPLATE,rIe.HTML]),RIe=new Set([rIe.TBODY,rIe.TFOOT,rIe.THEAD,rIe.TEMPLATE,rIe.HTML]),MIe=new Set([rIe.TABLE,rIe.TEMPLATE,rIe.HTML]),PIe=new Set([rIe.TD,rIe.TH]);class FIe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,t,n){this.treeAdapter=t,this.handler=n,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=rIe.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===rIe.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===KAe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,t){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=t,this.currentTagId=t,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,t,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,t){const n=this._indexOf(e);this.items[n]=t,n===this.stackTop&&(this.current=t)}insertAfter(e,t,n){const r=this._indexOf(e)+1;this.items.splice(r,0,t),this.tagIDs.splice(r,0,n),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&void 0!==this.currentTagId&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(e){let t=this.stackTop+1;do{t=this.tagIDs.lastIndexOf(e,t-1)}while(t>0&&this.treeAdapter.getNamespaceURI(this.items[t])!==KAe.HTML);this.shortenToLength(Math.max(t,0))}shortenToLength(e){for(;this.stackTop>=e;){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,this.stackTop<e)}}popUntilElementPopped(e){const t=this._indexOf(e);this.shortenToLength(Math.max(t,0))}popUntilPopped(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(Math.max(n,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(hIe,KAe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(PIe,KAe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,t){for(let n=this.stackTop;n>=0;n--)if(e.has(this.tagIDs[n])&&this.treeAdapter.getNamespaceURI(this.items[n])===t)return n;return-1}clearBackTo(e,t){const n=this._indexOfTagNames(e,t);this.shortenToLength(n+1)}clearBackToTableContext(){this.clearBackTo(MIe,KAe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(RIe,KAe.HTML)}clearBackToTableRowContext(){this.clearBackTo(DIe,KAe.HTML)}remove(e){const t=this._indexOf(e);t>=0&&(t===this.stackTop?this.pop():(this.items.splice(t,1),this.tagIDs.splice(t,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===rIe.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const t=this._indexOf(e)-1;return t>=0?this.items[t]:null}isRootHtmlElementCurrent(){return 0===this.stackTop&&this.tagIDs[0]===rIe.HTML}hasInDynamicScope(e,t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];switch(this.treeAdapter.getNamespaceURI(this.items[n])){case KAe.HTML:if(r===e)return!0;if(t.has(r))return!1;break;case KAe.SVG:if(NIe.has(r))return!1;break;case KAe.MATHML:if(OIe.has(r))return!1}}return!0}hasInScope(e){return this.hasInDynamicScope(e,CIe)}hasInListItemScope(e){return this.hasInDynamicScope(e,AIe)}hasInButtonScope(e){return this.hasInDynamicScope(e,IIe)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const t=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case KAe.HTML:if(hIe.has(t))return!0;if(CIe.has(t))return!1;break;case KAe.SVG:if(NIe.has(t))return!1;break;case KAe.MATHML:if(OIe.has(t))return!1}}return!0}hasInTableScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===KAe.HTML)switch(this.tagIDs[t]){case e:return!0;case rIe.TABLE:case rIe.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===KAe.HTML)switch(this.tagIDs[e]){case rIe.TBODY:case rIe.THEAD:case rIe.TFOOT:return!0;case rIe.TABLE:case rIe.HTML:return!1}return!0}hasInSelectScope(e){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===KAe.HTML)switch(this.tagIDs[t]){case e:return!0;case rIe.OPTION:case rIe.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;void 0!==this.currentTagId&&kIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;void 0!==this.currentTagId&&TIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;void 0!==this.currentTagId&&this.currentTagId!==e&&TIe.has(this.currentTagId);)this.pop()}}var LIe,jIe;(jIe=LIe||(LIe={}))[jIe.Marker=0]="Marker",jIe[jIe.Element=1]="Element";const BIe={type:LIe.Marker};class $Ie{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,t){const n=[],r=t.length,i=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let a=0;a<this.entries.length;a++){const e=this.entries[a];if(e.type===LIe.Marker)break;const{element:t}=e;if(this.treeAdapter.getTagName(t)===i&&this.treeAdapter.getNamespaceURI(t)===o){const e=this.treeAdapter.getAttrList(t);e.length===r&&n.push({idx:a,attrs:e})}}return n}_ensureNoahArkCondition(e){if(this.entries.length<3)return;const t=this.treeAdapter.getAttrList(e),n=this._getNoahArkConditionCandidates(e,t);if(n.length<3)return;const r=new Map(t.map(e=>[e.name,e.value]));let i=0;for(let o=0;o<n.length;o++){const e=n[o];e.attrs.every(e=>r.get(e.name)===e.value)&&(i+=1,i>=3&&this.entries.splice(e.idx,1))}}insertMarker(){this.entries.unshift(BIe)}pushElement(e,t){this._ensureNoahArkCondition(e),this.entries.unshift({type:LIe.Element,element:e,token:t})}insertElementAfterBookmark(e,t){const n=this.entries.indexOf(this.bookmark);this.entries.splice(n,0,{type:LIe.Element,element:e,token:t})}removeEntry(e){const t=this.entries.indexOf(e);-1!==t&&this.entries.splice(t,1)}clearToLastMarker(){const e=this.entries.indexOf(BIe);-1===e?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const t=this.entries.find(t=>t.type===LIe.Marker||this.treeAdapter.getTagName(t.element)===e);return t&&t.type===LIe.Element?t:null}getElementEntry(e){return this.entries.find(t=>t.type===LIe.Element&&t.element===e)}}const zIe={createDocument:()=>({nodeName:"#document",mode:JAe.NO_QUIRKS,childNodes:[]}),createDocumentFragment:()=>({nodeName:"#document-fragment",childNodes:[]}),createElement:(e,t,n)=>({nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}),createCommentNode:e=>({nodeName:"#comment",data:e,parentNode:null}),createTextNode:e=>({nodeName:"#text",value:e,parentNode:null}),appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent:e=>e.content,setDocumentType(e,t,n,r){const i=e.childNodes.find(e=>"#documentType"===e.nodeName);if(i)i.name=t,i.publicId=n,i.systemId=r;else{const i={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};zIe.appendChild(e,i)}},setDocumentMode(e,t){e.mode=t},getDocumentMode:e=>e.mode,detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(zIe.isTextNode(n))return void(n.value+=t)}zIe.appendChild(e,zIe.createTextNode(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&zIe.isTextNode(r)?r.value+=t:zIe.insertBefore(e,zIe.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(e=>e.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild:e=>e.childNodes[0],getChildNodes:e=>e.childNodes,getParentNode:e=>e.parentNode,getAttrList:e=>e.attrs,getTagName:e=>e.tagName,getNamespaceURI:e=>e.namespaceURI,getTextNodeContent:e=>e.value,getCommentNodeContent:e=>e.data,getDocumentTypeNodeName:e=>e.name,getDocumentTypeNodePublicId:e=>e.publicId,getDocumentTypeNodeSystemId:e=>e.systemId,isTextNode:e=>"#text"===e.nodeName,isCommentNode:e=>"#comment"===e.nodeName,isDocumentTypeNode:e=>"#documentType"===e.nodeName,isElementNode:e=>Object.prototype.hasOwnProperty.call(e,"tagName"),setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation:e=>e.sourceCodeLocation,updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},UIe="html",qIe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],HIe=[...qIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],VIe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),WIe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],GIe=[...WIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function YIe(e,t){return t.some(t=>e.startsWith(t))}const KIe="text/html",ZIe="application/xhtml+xml",QIe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),XIe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:KAe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:KAe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:KAe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:KAe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:KAe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:KAe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:KAe.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:KAe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:KAe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:KAe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:KAe.XMLNS}]]),JIe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),eOe=new Set([rIe.B,rIe.BIG,rIe.BLOCKQUOTE,rIe.BODY,rIe.BR,rIe.CENTER,rIe.CODE,rIe.DD,rIe.DIV,rIe.DL,rIe.DT,rIe.EM,rIe.EMBED,rIe.H1,rIe.H2,rIe.H3,rIe.H4,rIe.H5,rIe.H6,rIe.HEAD,rIe.HR,rIe.I,rIe.IMG,rIe.LI,rIe.LISTING,rIe.MENU,rIe.META,rIe.NOBR,rIe.OL,rIe.P,rIe.PRE,rIe.RUBY,rIe.S,rIe.SMALL,rIe.SPAN,rIe.STRONG,rIe.STRIKE,rIe.SUB,rIe.SUP,rIe.TABLE,rIe.TT,rIe.U,rIe.UL,rIe.VAR]);function tOe(e){for(let t=0;t<e.attrs.length;t++)if("definitionurl"===e.attrs[t].name){e.attrs[t].name="definitionURL";break}}function nOe(e){for(let t=0;t<e.attrs.length;t++){const n=QIe.get(e.attrs[t].name);null!=n&&(e.attrs[t].name=n)}}function rOe(e){for(let t=0;t<e.attrs.length;t++){const n=XIe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function iOe(e,t,n,r){return(!r||r===KAe.HTML)&&function(e,t,n){if(t===KAe.MATHML&&e===rIe.ANNOTATION_XML)for(let r=0;r<n.length;r++)if(n[r].name===QAe.ENCODING){const e=n[r].value.toLowerCase();return e===KIe||e===ZIe}return t===KAe.SVG&&(e===rIe.FOREIGN_OBJECT||e===rIe.DESC||e===rIe.TITLE)}(e,t,n)||(!r||r===KAe.MATHML)&&function(e,t){return t===KAe.MATHML&&(e===rIe.MI||e===rIe.MO||e===rIe.MN||e===rIe.MS||e===rIe.MTEXT)}(e,t)}var oOe,aOe;(aOe=oOe||(oOe={}))[aOe.INITIAL=0]="INITIAL",aOe[aOe.BEFORE_HTML=1]="BEFORE_HTML",aOe[aOe.BEFORE_HEAD=2]="BEFORE_HEAD",aOe[aOe.IN_HEAD=3]="IN_HEAD",aOe[aOe.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",aOe[aOe.AFTER_HEAD=5]="AFTER_HEAD",aOe[aOe.IN_BODY=6]="IN_BODY",aOe[aOe.TEXT=7]="TEXT",aOe[aOe.IN_TABLE=8]="IN_TABLE",aOe[aOe.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",aOe[aOe.IN_CAPTION=10]="IN_CAPTION",aOe[aOe.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",aOe[aOe.IN_TABLE_BODY=12]="IN_TABLE_BODY",aOe[aOe.IN_ROW=13]="IN_ROW",aOe[aOe.IN_CELL=14]="IN_CELL",aOe[aOe.IN_SELECT=15]="IN_SELECT",aOe[aOe.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",aOe[aOe.IN_TEMPLATE=17]="IN_TEMPLATE",aOe[aOe.AFTER_BODY=18]="AFTER_BODY",aOe[aOe.IN_FRAMESET=19]="IN_FRAMESET",aOe[aOe.AFTER_FRAMESET=20]="AFTER_FRAMESET",aOe[aOe.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",aOe[aOe.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET";const sOe={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},lOe=new Set([rIe.TABLE,rIe.TBODY,rIe.TFOOT,rIe.THEAD,rIe.TR]),uOe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:zIe,onParseError:null};class cOe{constructor(e,t,n=null,r=null){this.fragmentContext=n,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=oOe.INITIAL,this.originalInsertionMode=oOe.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...uOe,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=null!=t?t:this.treeAdapter.createDocument(),this.tokenizer=new SIe(this.options,this),this.activeFormattingElements=new $Ie(this.treeAdapter),this.fragmentContextID=n?dIe(this.treeAdapter.getTagName(n)):rIe.UNKNOWN,this._setContextModes(null!=n?n:this.document,this.fragmentContextID),this.openElements=new FIe(this.document,this.treeAdapter,this)}static parse(e,t){const n=new this(t);return n.tokenizer.write(e,!0),n.document}static getFragmentParser(e,t){const n={...uOe,...t};null!=e||(e=n.treeAdapter.createElement(tIe.TEMPLATE,KAe.HTML,[]));const r=n.treeAdapter.createElement("documentmock",KAe.HTML,[]),i=new this(n,r,e);return i.fragmentContextID===rIe.TEMPLATE&&i.tmplInsertionModeStack.unshift(oOe.IN_TEMPLATE),i._initTokenizerForFragmentParsing(),i._insertFakeRootElement(),i._resetInsertionMode(),i._findFormInFragmentContext(),i}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),t=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,t),t}_err(e,t,n){var r;if(!this.onParseError)return;const i=null!==(r=e.location)&&void 0!==r?r:sOe,o={code:t,startLine:i.startLine,startCol:i.startCol,startOffset:i.startOffset,endLine:n?i.startLine:i.endLine,endCol:n?i.startCol:i.endCol,endOffset:n?i.startOffset:i.endOffset};this.onParseError(o)}onItemPush(e,t,n){var r,i;null===(i=(r=this.treeAdapter).onItemPush)||void 0===i||i.call(r,e),n&&this.openElements.stackTop>0&&this._setContextModes(e,t)}onItemPop(e,t){var n,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),null===(r=(n=this.treeAdapter).onItemPop)||void 0===r||r.call(n,e,this.openElements.current),t){let e,t;0===this.openElements.stackTop&&this.fragmentContext?(e=this.fragmentContext,t=this.fragmentContextID):({current:e,currentTagId:t}=this.openElements),this._setContextModes(e,t)}}_setContextModes(e,t){const n=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===KAe.HTML;this.currentNotInHTML=!n,this.tokenizer.inForeignNode=!n&&void 0!==e&&void 0!==t&&!this._isIntegrationPoint(t,e)}_switchToTextParsing(e,t){this._insertElement(e,KAe.HTML),this.tokenizer.state=t,this.originalInsertionMode=this.insertionMode,this.insertionMode=oOe.TEXT}switchToPlaintextParsing(){this.insertionMode=oOe.TEXT,this.originalInsertionMode=oOe.IN_BODY,this.tokenizer.state=yIe.PLAINTEXT}_getAdjustedCurrentElement(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===tIe.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(this.fragmentContext&&this.treeAdapter.getNamespaceURI(this.fragmentContext)===KAe.HTML)switch(this.fragmentContextID){case rIe.TITLE:case rIe.TEXTAREA:this.tokenizer.state=yIe.RCDATA;break;case rIe.STYLE:case rIe.XMP:case rIe.IFRAME:case rIe.NOEMBED:case rIe.NOFRAMES:case rIe.NOSCRIPT:this.tokenizer.state=yIe.RAWTEXT;break;case rIe.SCRIPT:this.tokenizer.state=yIe.SCRIPT_DATA;break;case rIe.PLAINTEXT:this.tokenizer.state=yIe.PLAINTEXT}}_setDocumentType(e){const t=e.name||"",n=e.publicId||"",r=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,t,n,r),e.location){const t=this.treeAdapter.getChildNodes(this.document).find(e=>this.treeAdapter.isDocumentTypeNode(e));t&&this.treeAdapter.setNodeSourceCodeLocation(t,e.location)}}_attachElementToTree(e,t){if(this.options.sourceCodeLocationInfo){const n=t&&{...t,startTag:t};this.treeAdapter.setNodeSourceCodeLocation(e,n)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const t=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(null!=t?t:this.document,e)}}_appendElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location)}_insertElement(e,t){const n=this.treeAdapter.createElement(e.tagName,t,e.attrs);this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID)}_insertFakeElement(e,t){const n=this.treeAdapter.createElement(e,KAe.HTML,[]);this._attachElementToTree(n,null),this.openElements.push(n,t)}_insertTemplate(e){const t=this.treeAdapter.createElement(e.tagName,KAe.HTML,e.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(t,n),this._attachElementToTree(t,e.location),this.openElements.push(t,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(tIe.HTML,KAe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,rIe.HTML)}_appendCommentNode(e,t){const n=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(t,n),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(n,e.location)}_insertCharacters(e){let t,n;if(this._shouldFosterParentOnInsertion()?(({parent:t,beforeElement:n}=this._findFosterParentingLocation()),n?this.treeAdapter.insertTextBefore(t,e.chars,n):this.treeAdapter.insertText(t,e.chars)):(t=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(t,e.chars)),!e.location)return;const r=this.treeAdapter.getChildNodes(t),i=n?r.lastIndexOf(n):r.length,o=r[i-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:t,endCol:n,endOffset:r}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:t,endCol:n,endOffset:r})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,t){for(let n=this.treeAdapter.getFirstChild(e);n;n=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(t,n)}_setEndLocation(e,t){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&t.location){const n=t.location,r=this.treeAdapter.getTagName(e),i=t.type===FAe.END_TAG&&r===t.tagName?{endTag:{...n},endLine:n.endLine,endCol:n.endCol,endOffset:n.endOffset}:{endLine:n.startLine,endCol:n.startCol,endOffset:n.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,i)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let t,n;return 0===this.openElements.stackTop&&this.fragmentContext?(t=this.fragmentContext,n=this.fragmentContextID):({current:t,currentTagId:n}=this.openElements),(e.tagID!==rIe.SVG||this.treeAdapter.getTagName(t)!==tIe.ANNOTATION_XML||this.treeAdapter.getNamespaceURI(t)!==KAe.MATHML)&&(this.tokenizer.inForeignNode||(e.tagID===rIe.MGLYPH||e.tagID===rIe.MALIGNMARK)&&void 0!==n&&!this._isIntegrationPoint(n,t,KAe.HTML))}_processToken(e){switch(e.type){case FAe.CHARACTER:this.onCharacter(e);break;case FAe.NULL_CHARACTER:this.onNullCharacter(e);break;case FAe.COMMENT:this.onComment(e);break;case FAe.DOCTYPE:this.onDoctype(e);break;case FAe.START_TAG:this._processStartTag(e);break;case FAe.END_TAG:this.onEndTag(e);break;case FAe.EOF:this.onEof(e);break;case FAe.WHITESPACE_CHARACTER:this.onWhitespaceCharacter(e)}}_isIntegrationPoint(e,t,n){return iOe(e,this.treeAdapter.getNamespaceURI(t),this.treeAdapter.getAttrList(t),n)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const t=this.activeFormattingElements.entries.findIndex(e=>e.type===LIe.Marker||this.openElements.contains(e.element));for(let n=-1===t?e-1:t-1;n>=0;n--){const e=this.activeFormattingElements.entries[n];this._insertElement(e.token,this.treeAdapter.getNamespaceURI(e.element)),e.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=oOe.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(rIe.P),this.openElements.popUntilTagNamePopped(rIe.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(0===e&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case rIe.TR:return void(this.insertionMode=oOe.IN_ROW);case rIe.TBODY:case rIe.THEAD:case rIe.TFOOT:return void(this.insertionMode=oOe.IN_TABLE_BODY);case rIe.CAPTION:return void(this.insertionMode=oOe.IN_CAPTION);case rIe.COLGROUP:return void(this.insertionMode=oOe.IN_COLUMN_GROUP);case rIe.TABLE:return void(this.insertionMode=oOe.IN_TABLE);case rIe.BODY:return void(this.insertionMode=oOe.IN_BODY);case rIe.FRAMESET:return void(this.insertionMode=oOe.IN_FRAMESET);case rIe.SELECT:return void this._resetInsertionModeForSelect(e);case rIe.TEMPLATE:return void(this.insertionMode=this.tmplInsertionModeStack[0]);case rIe.HTML:return void(this.insertionMode=this.headElement?oOe.AFTER_HEAD:oOe.BEFORE_HEAD);case rIe.TD:case rIe.TH:if(e>0)return void(this.insertionMode=oOe.IN_CELL);break;case rIe.HEAD:if(e>0)return void(this.insertionMode=oOe.IN_HEAD)}this.insertionMode=oOe.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let t=e-1;t>0;t--){const e=this.openElements.tagIDs[t];if(e===rIe.TEMPLATE)break;if(e===rIe.TABLE)return void(this.insertionMode=oOe.IN_SELECT_IN_TABLE)}this.insertionMode=oOe.IN_SELECT}_isElementCausesFosterParenting(e){return lOe.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&void 0!==this.openElements.currentTagId&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const t=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case rIe.TEMPLATE:if(this.treeAdapter.getNamespaceURI(t)===KAe.HTML)return{parent:this.treeAdapter.getTemplateContent(t),beforeElement:null};break;case rIe.TABLE:{const n=this.treeAdapter.getParentNode(t);return n?{parent:n,beforeElement:t}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const t=this._findFosterParentingLocation();t.beforeElement?this.treeAdapter.insertBefore(t.parent,e,t.beforeElement):this.treeAdapter.appendChild(t.parent,e)}_isSpecialElement(e,t){const n=this.treeAdapter.getNamespaceURI(e);return pIe[n].has(t)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){e._insertCharacters(t),e.framesetOk=!1}(this,e);else switch(this.insertionMode){case oOe.INITIAL:wOe(this,e);break;case oOe.BEFORE_HTML:_Oe(this,e);break;case oOe.BEFORE_HEAD:xOe(this,e);break;case oOe.IN_HEAD:kOe(this,e);break;case oOe.IN_HEAD_NO_SCRIPT:TOe(this,e);break;case oOe.AFTER_HEAD:COe(this,e);break;case oOe.IN_BODY:case oOe.IN_CAPTION:case oOe.IN_CELL:case oOe.IN_TEMPLATE:OOe(this,e);break;case oOe.TEXT:case oOe.IN_SELECT:case oOe.IN_SELECT_IN_TABLE:this._insertCharacters(e);break;case oOe.IN_TABLE:case oOe.IN_TABLE_BODY:case oOe.IN_ROW:BOe(this,e);break;case oOe.IN_TABLE_TEXT:HOe(this,e);break;case oOe.IN_COLUMN_GROUP:YOe(this,e);break;case oOe.AFTER_BODY:rNe(this,e);break;case oOe.AFTER_AFTER_BODY:iNe(this,e)}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode)!function(e,t){t.chars=_Ae,e._insertCharacters(t)}(this,e);else switch(this.insertionMode){case oOe.INITIAL:wOe(this,e);break;case oOe.BEFORE_HTML:_Oe(this,e);break;case oOe.BEFORE_HEAD:xOe(this,e);break;case oOe.IN_HEAD:kOe(this,e);break;case oOe.IN_HEAD_NO_SCRIPT:TOe(this,e);break;case oOe.AFTER_HEAD:COe(this,e);break;case oOe.TEXT:this._insertCharacters(e);break;case oOe.IN_TABLE:case oOe.IN_TABLE_BODY:case oOe.IN_ROW:BOe(this,e);break;case oOe.IN_COLUMN_GROUP:YOe(this,e);break;case oOe.AFTER_BODY:rNe(this,e);break;case oOe.AFTER_AFTER_BODY:iNe(this,e)}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML)vOe(this,e);else switch(this.insertionMode){case oOe.INITIAL:case oOe.BEFORE_HTML:case oOe.BEFORE_HEAD:case oOe.IN_HEAD:case oOe.IN_HEAD_NO_SCRIPT:case oOe.AFTER_HEAD:case oOe.IN_BODY:case oOe.IN_TABLE:case oOe.IN_CAPTION:case oOe.IN_COLUMN_GROUP:case oOe.IN_TABLE_BODY:case oOe.IN_ROW:case oOe.IN_CELL:case oOe.IN_SELECT:case oOe.IN_SELECT_IN_TABLE:case oOe.IN_TEMPLATE:case oOe.IN_FRAMESET:case oOe.AFTER_FRAMESET:vOe(this,e);break;case oOe.IN_TABLE_TEXT:VOe(this,e);break;case oOe.AFTER_BODY:!function(e,t){e._appendCommentNode(t,e.openElements.items[0])}(this,e);break;case oOe.AFTER_AFTER_BODY:case oOe.AFTER_AFTER_FRAMESET:!function(e,t){e._appendCommentNode(t,e.document)}(this,e)}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case oOe.INITIAL:!function(e,t){e._setDocumentType(t);const n=t.forceQuirks?JAe.QUIRKS:function(e){if(e.name!==UIe)return JAe.QUIRKS;const{systemId:t}=e;if(t&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===t.toLowerCase())return JAe.QUIRKS;let{publicId:n}=e;if(null!==n){if(n=n.toLowerCase(),VIe.has(n))return JAe.QUIRKS;let e=null===t?HIe:qIe;if(YIe(n,e))return JAe.QUIRKS;if(e=null===t?WIe:GIe,YIe(n,e))return JAe.LIMITED_QUIRKS}return JAe.NO_QUIRKS}(t);(function(e){return e.name===UIe&&null===e.publicId&&(null===e.systemId||"about:legacy-compat"===e.systemId)})(t)||e._err(t,RAe.nonConformingDoctype);e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=oOe.BEFORE_HTML}(this,e);break;case oOe.BEFORE_HEAD:case oOe.IN_HEAD:case oOe.IN_HEAD_NO_SCRIPT:case oOe.AFTER_HEAD:this._err(e,RAe.misplacedDoctype);break;case oOe.IN_TABLE_TEXT:VOe(this,e)}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,RAe.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?function(e,t){if(function(e){const t=e.tagID;return t===rIe.FONT&&e.attrs.some(({name:e})=>e===QAe.COLOR||e===QAe.SIZE||e===QAe.FACE)||eOe.has(t)}(t))oNe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===KAe.MATHML?tOe(t):r===KAe.SVG&&(!function(e){const t=JIe.get(e.tagName);null!=t&&(e.tagName=t,e.tagID=dIe(e.tagName))}(t),nOe(t)),rOe(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case oOe.INITIAL:wOe(this,e);break;case oOe.BEFORE_HTML:!function(e,t){t.tagID===rIe.HTML?(e._insertElement(t,KAe.HTML),e.insertionMode=oOe.BEFORE_HEAD):_Oe(e,t)}(this,e);break;case oOe.BEFORE_HEAD:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.HEAD:e._insertElement(t,KAe.HTML),e.headElement=e.openElements.current,e.insertionMode=oOe.IN_HEAD;break;default:xOe(e,t)}}(this,e);break;case oOe.IN_HEAD:EOe(this,e);break;case oOe.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.BASEFONT:case rIe.BGSOUND:case rIe.HEAD:case rIe.LINK:case rIe.META:case rIe.NOFRAMES:case rIe.STYLE:EOe(e,t);break;case rIe.NOSCRIPT:e._err(t,RAe.nestedNoscriptInHead);break;default:TOe(e,t)}}(this,e);break;case oOe.AFTER_HEAD:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.BODY:e._insertElement(t,KAe.HTML),e.framesetOk=!1,e.insertionMode=oOe.IN_BODY;break;case rIe.FRAMESET:e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_FRAMESET;break;case rIe.BASE:case rIe.BASEFONT:case rIe.BGSOUND:case rIe.LINK:case rIe.META:case rIe.NOFRAMES:case rIe.SCRIPT:case rIe.STYLE:case rIe.TEMPLATE:case rIe.TITLE:e._err(t,RAe.abandonedHeadElementChild),e.openElements.push(e.headElement,rIe.HEAD),EOe(e,t),e.openElements.remove(e.headElement);break;case rIe.HEAD:e._err(t,RAe.misplacedStartTagForHeadElement);break;default:COe(e,t)}}(this,e);break;case oOe.IN_BODY:POe(this,e);break;case oOe.IN_TABLE:$Oe(this,e);break;case oOe.IN_TABLE_TEXT:VOe(this,e);break;case oOe.IN_CAPTION:!function(e,t){const n=t.tagID;WOe.has(n)?e.openElements.hasInTableScope(rIe.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(rIe.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oOe.IN_TABLE,$Oe(e,t)):POe(e,t)}(this,e);break;case oOe.IN_COLUMN_GROUP:GOe(this,e);break;case oOe.IN_TABLE_BODY:KOe(this,e);break;case oOe.IN_ROW:QOe(this,e);break;case oOe.IN_CELL:!function(e,t){const n=t.tagID;WOe.has(n)?(e.openElements.hasInTableScope(rIe.TD)||e.openElements.hasInTableScope(rIe.TH))&&(e._closeTableCell(),QOe(e,t)):POe(e,t)}(this,e);break;case oOe.IN_SELECT:JOe(this,e);break;case oOe.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===rIe.CAPTION||n===rIe.TABLE||n===rIe.TBODY||n===rIe.TFOOT||n===rIe.THEAD||n===rIe.TR||n===rIe.TD||n===rIe.TH?(e.openElements.popUntilTagNamePopped(rIe.SELECT),e._resetInsertionMode(),e._processStartTag(t)):JOe(e,t)}(this,e);break;case oOe.IN_TEMPLATE:!function(e,t){switch(t.tagID){case rIe.BASE:case rIe.BASEFONT:case rIe.BGSOUND:case rIe.LINK:case rIe.META:case rIe.NOFRAMES:case rIe.SCRIPT:case rIe.STYLE:case rIe.TEMPLATE:case rIe.TITLE:EOe(e,t);break;case rIe.CAPTION:case rIe.COLGROUP:case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:e.tmplInsertionModeStack[0]=oOe.IN_TABLE,e.insertionMode=oOe.IN_TABLE,$Oe(e,t);break;case rIe.COL:e.tmplInsertionModeStack[0]=oOe.IN_COLUMN_GROUP,e.insertionMode=oOe.IN_COLUMN_GROUP,GOe(e,t);break;case rIe.TR:e.tmplInsertionModeStack[0]=oOe.IN_TABLE_BODY,e.insertionMode=oOe.IN_TABLE_BODY,KOe(e,t);break;case rIe.TD:case rIe.TH:e.tmplInsertionModeStack[0]=oOe.IN_ROW,e.insertionMode=oOe.IN_ROW,QOe(e,t);break;default:e.tmplInsertionModeStack[0]=oOe.IN_BODY,e.insertionMode=oOe.IN_BODY,POe(e,t)}}(this,e);break;case oOe.AFTER_BODY:!function(e,t){t.tagID===rIe.HTML?POe(e,t):rNe(e,t)}(this,e);break;case oOe.IN_FRAMESET:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.FRAMESET:e._insertElement(t,KAe.HTML);break;case rIe.FRAME:e._appendElement(t,KAe.HTML),t.ackSelfClosing=!0;break;case rIe.NOFRAMES:EOe(e,t)}}(this,e);break;case oOe.AFTER_FRAMESET:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.NOFRAMES:EOe(e,t)}}(this,e);break;case oOe.AFTER_AFTER_BODY:!function(e,t){t.tagID===rIe.HTML?POe(e,t):iNe(e,t)}(this,e);break;case oOe.AFTER_AFTER_FRAMESET:!function(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.NOFRAMES:EOe(e,t)}}(this,e)}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?function(e,t){if(t.tagID===rIe.P||t.tagID===rIe.BR)return oNe(e),void e._endTagOutsideForeignContent(t);for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===KAe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case oOe.INITIAL:wOe(this,e);break;case oOe.BEFORE_HTML:!function(e,t){const n=t.tagID;n!==rIe.HTML&&n!==rIe.HEAD&&n!==rIe.BODY&&n!==rIe.BR||_Oe(e,t)}(this,e);break;case oOe.BEFORE_HEAD:!function(e,t){const n=t.tagID;n===rIe.HEAD||n===rIe.BODY||n===rIe.HTML||n===rIe.BR?xOe(e,t):e._err(t,RAe.endTagWithoutMatchingOpenElement)}(this,e);break;case oOe.IN_HEAD:!function(e,t){switch(t.tagID){case rIe.HEAD:e.openElements.pop(),e.insertionMode=oOe.AFTER_HEAD;break;case rIe.BODY:case rIe.BR:case rIe.HTML:kOe(e,t);break;case rIe.TEMPLATE:SOe(e,t);break;default:e._err(t,RAe.endTagWithoutMatchingOpenElement)}}(this,e);break;case oOe.IN_HEAD_NO_SCRIPT:!function(e,t){switch(t.tagID){case rIe.NOSCRIPT:e.openElements.pop(),e.insertionMode=oOe.IN_HEAD;break;case rIe.BR:TOe(e,t);break;default:e._err(t,RAe.endTagWithoutMatchingOpenElement)}}(this,e);break;case oOe.AFTER_HEAD:!function(e,t){switch(t.tagID){case rIe.BODY:case rIe.HTML:case rIe.BR:COe(e,t);break;case rIe.TEMPLATE:SOe(e,t);break;default:e._err(t,RAe.endTagWithoutMatchingOpenElement)}}(this,e);break;case oOe.IN_BODY:LOe(this,e);break;case oOe.TEXT:!function(e,t){var n;t.tagID===rIe.SCRIPT&&(null===(n=e.scriptHandler)||void 0===n||n.call(e,e.openElements.current));e.openElements.pop(),e.insertionMode=e.originalInsertionMode}(this,e);break;case oOe.IN_TABLE:zOe(this,e);break;case oOe.IN_TABLE_TEXT:VOe(this,e);break;case oOe.IN_CAPTION:!function(e,t){const n=t.tagID;switch(n){case rIe.CAPTION:case rIe.TABLE:e.openElements.hasInTableScope(rIe.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(rIe.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oOe.IN_TABLE,n===rIe.TABLE&&zOe(e,t));break;case rIe.BODY:case rIe.COL:case rIe.COLGROUP:case rIe.HTML:case rIe.TBODY:case rIe.TD:case rIe.TFOOT:case rIe.TH:case rIe.THEAD:case rIe.TR:break;default:LOe(e,t)}}(this,e);break;case oOe.IN_COLUMN_GROUP:!function(e,t){switch(t.tagID){case rIe.COLGROUP:e.openElements.currentTagId===rIe.COLGROUP&&(e.openElements.pop(),e.insertionMode=oOe.IN_TABLE);break;case rIe.TEMPLATE:SOe(e,t);break;case rIe.COL:break;default:YOe(e,t)}}(this,e);break;case oOe.IN_TABLE_BODY:ZOe(this,e);break;case oOe.IN_ROW:XOe(this,e);break;case oOe.IN_CELL:!function(e,t){const n=t.tagID;switch(n){case rIe.TD:case rIe.TH:e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=oOe.IN_ROW);break;case rIe.TABLE:case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:case rIe.TR:e.openElements.hasInTableScope(n)&&(e._closeTableCell(),XOe(e,t));break;case rIe.BODY:case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.HTML:break;default:LOe(e,t)}}(this,e);break;case oOe.IN_SELECT:eNe(this,e);break;case oOe.IN_SELECT_IN_TABLE:!function(e,t){const n=t.tagID;n===rIe.CAPTION||n===rIe.TABLE||n===rIe.TBODY||n===rIe.TFOOT||n===rIe.THEAD||n===rIe.TR||n===rIe.TD||n===rIe.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(rIe.SELECT),e._resetInsertionMode(),e.onEndTag(t)):eNe(e,t)}(this,e);break;case oOe.IN_TEMPLATE:!function(e,t){t.tagID===rIe.TEMPLATE&&SOe(e,t)}(this,e);break;case oOe.AFTER_BODY:nNe(this,e);break;case oOe.IN_FRAMESET:!function(e,t){t.tagID!==rIe.FRAMESET||e.openElements.isRootHtmlElementCurrent()||(e.openElements.pop(),e.fragmentContext||e.openElements.currentTagId===rIe.FRAMESET||(e.insertionMode=oOe.AFTER_FRAMESET))}(this,e);break;case oOe.AFTER_FRAMESET:!function(e,t){t.tagID===rIe.HTML&&(e.insertionMode=oOe.AFTER_AFTER_FRAMESET)}(this,e);break;case oOe.AFTER_AFTER_BODY:iNe(this,e)}}onEof(e){switch(this.insertionMode){case oOe.INITIAL:wOe(this,e);break;case oOe.BEFORE_HTML:_Oe(this,e);break;case oOe.BEFORE_HEAD:xOe(this,e);break;case oOe.IN_HEAD:kOe(this,e);break;case oOe.IN_HEAD_NO_SCRIPT:TOe(this,e);break;case oOe.AFTER_HEAD:COe(this,e);break;case oOe.IN_BODY:case oOe.IN_TABLE:case oOe.IN_CAPTION:case oOe.IN_COLUMN_GROUP:case oOe.IN_TABLE_BODY:case oOe.IN_ROW:case oOe.IN_CELL:case oOe.IN_SELECT:case oOe.IN_SELECT_IN_TABLE:jOe(this,e);break;case oOe.TEXT:!function(e,t){e._err(t,RAe.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}(this,e);break;case oOe.IN_TABLE_TEXT:VOe(this,e);break;case oOe.IN_TEMPLATE:tNe(this,e);break;case oOe.AFTER_BODY:case oOe.IN_FRAMESET:case oOe.AFTER_FRAMESET:case oOe.AFTER_AFTER_BODY:case oOe.AFTER_AFTER_FRAMESET:bOe(this,e)}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===xAe.LINE_FEED)){if(1===e.chars.length)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode)this._insertCharacters(e);else switch(this.insertionMode){case oOe.IN_HEAD:case oOe.IN_HEAD_NO_SCRIPT:case oOe.AFTER_HEAD:case oOe.TEXT:case oOe.IN_COLUMN_GROUP:case oOe.IN_SELECT:case oOe.IN_SELECT_IN_TABLE:case oOe.IN_FRAMESET:case oOe.AFTER_FRAMESET:this._insertCharacters(e);break;case oOe.IN_BODY:case oOe.IN_CAPTION:case oOe.IN_CELL:case oOe.IN_TEMPLATE:case oOe.AFTER_BODY:case oOe.AFTER_AFTER_BODY:case oOe.AFTER_AFTER_FRAMESET:IOe(this,e);break;case oOe.IN_TABLE:case oOe.IN_TABLE_BODY:case oOe.IN_ROW:BOe(this,e);break;case oOe.IN_TABLE_TEXT:qOe(this,e)}}}function dOe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):FOe(e,t),n}function fOe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(Math.max(r,0)),e.activeFormattingElements.removeEntry(t)),n}function pOe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let o=0,a=i;a!==n;o++,a=i){i=e.openElements.getCommonAncestor(a);const n=e.activeFormattingElements.getElementEntry(a),s=n&&o>=3;!n||s?(s&&e.activeFormattingElements.removeEntry(n),e.openElements.remove(a)):(a=hOe(e,n),r===t&&(e.activeFormattingElements.bookmark=n),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(a,r),r=a)}return r}function hOe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function mOe(e,t,n){const r=dIe(e.treeAdapter.getTagName(t));if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const i=e.treeAdapter.getNamespaceURI(t);r===rIe.TEMPLATE&&i===KAe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function gOe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,o=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,o),e.treeAdapter.appendChild(t,o),e.activeFormattingElements.insertElementAfterBookmark(o,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,o,i.tagID)}function yOe(e,t){for(let n=0;n<8;n++){const n=dOe(e,t);if(!n)break;const r=fOe(e,n);if(!r)break;e.activeFormattingElements.bookmark=n;const i=pOe(e,r,n.element),o=e.openElements.getCommonAncestor(n.element);e.treeAdapter.detachNode(i),o&&mOe(e,o,i),gOe(e,r,n)}}function vOe(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function bOe(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const n=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(n);if(r&&!r.endTag&&(e._setEndLocation(n,t),e.openElements.stackTop>=1)){const n=e.openElements.items[1],r=e.treeAdapter.getNodeSourceCodeLocation(n);r&&!r.endTag&&e._setEndLocation(n,t)}}}}function wOe(e,t){e._err(t,RAe.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,JAe.QUIRKS),e.insertionMode=oOe.BEFORE_HTML,e._processToken(t)}function _Oe(e,t){e._insertFakeRootElement(),e.insertionMode=oOe.BEFORE_HEAD,e._processToken(t)}function xOe(e,t){e._insertFakeElement(tIe.HEAD,rIe.HEAD),e.headElement=e.openElements.current,e.insertionMode=oOe.IN_HEAD,e._processToken(t)}function EOe(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.BASE:case rIe.BASEFONT:case rIe.BGSOUND:case rIe.LINK:case rIe.META:e._appendElement(t,KAe.HTML),t.ackSelfClosing=!0;break;case rIe.TITLE:e._switchToTextParsing(t,yIe.RCDATA);break;case rIe.NOSCRIPT:e.options.scriptingEnabled?e._switchToTextParsing(t,yIe.RAWTEXT):(e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_HEAD_NO_SCRIPT);break;case rIe.NOFRAMES:case rIe.STYLE:e._switchToTextParsing(t,yIe.RAWTEXT);break;case rIe.SCRIPT:e._switchToTextParsing(t,yIe.SCRIPT_DATA);break;case rIe.TEMPLATE:e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=oOe.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(oOe.IN_TEMPLATE);break;case rIe.HEAD:e._err(t,RAe.misplacedStartTagForHeadElement);break;default:kOe(e,t)}}function SOe(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==rIe.TEMPLATE&&e._err(t,RAe.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(rIe.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,RAe.endTagWithoutMatchingOpenElement)}function kOe(e,t){e.openElements.pop(),e.insertionMode=oOe.AFTER_HEAD,e._processToken(t)}function TOe(e,t){const n=t.type===FAe.EOF?RAe.openElementsLeftAfterEof:RAe.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=oOe.IN_HEAD,e._processToken(t)}function COe(e,t){e._insertFakeElement(tIe.BODY,rIe.BODY),e.insertionMode=oOe.IN_BODY,AOe(e,t)}function AOe(e,t){switch(t.type){case FAe.CHARACTER:OOe(e,t);break;case FAe.WHITESPACE_CHARACTER:IOe(e,t);break;case FAe.COMMENT:vOe(e,t);break;case FAe.START_TAG:POe(e,t);break;case FAe.END_TAG:LOe(e,t);break;case FAe.EOF:jOe(e,t)}}function IOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function OOe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function NOe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,KAe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function DOe(e){const t=jAe(e,QAe.TYPE);return null!=t&&"hidden"===t.toLowerCase()}function ROe(e,t){e._switchToTextParsing(t,yIe.RAWTEXT)}function MOe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML)}function POe(e,t){switch(t.tagID){case rIe.I:case rIe.S:case rIe.B:case rIe.U:case rIe.EM:case rIe.TT:case rIe.BIG:case rIe.CODE:case rIe.FONT:case rIe.SMALL:case rIe.STRIKE:case rIe.STRONG:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case rIe.A:!function(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(tIe.A);n&&(yOe(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case rIe.H1:case rIe.H2:case rIe.H3:case rIe.H4:case rIe.H5:case rIe.H6:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),void 0!==e.openElements.currentTagId&&hIe.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.P:case rIe.DL:case rIe.OL:case rIe.UL:case rIe.DIV:case rIe.DIR:case rIe.NAV:case rIe.MAIN:case rIe.MENU:case rIe.ASIDE:case rIe.CENTER:case rIe.FIGURE:case rIe.FOOTER:case rIe.HEADER:case rIe.HGROUP:case rIe.DIALOG:case rIe.DETAILS:case rIe.ADDRESS:case rIe.ARTICLE:case rIe.SEARCH:case rIe.SECTION:case rIe.SUMMARY:case rIe.FIELDSET:case rIe.BLOCKQUOTE:case rIe.FIGCAPTION:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.LI:case rIe.DD:case rIe.DT:!function(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const t=e.openElements.tagIDs[r];if(n===rIe.LI&&t===rIe.LI||(n===rIe.DD||n===rIe.DT)&&(t===rIe.DD||t===rIe.DT)){e.openElements.generateImpliedEndTagsWithExclusion(t),e.openElements.popUntilTagNamePopped(t);break}if(t!==rIe.ADDRESS&&t!==rIe.DIV&&t!==rIe.P&&e._isSpecialElement(e.openElements.items[r],t))break}e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.BR:case rIe.IMG:case rIe.WBR:case rIe.AREA:case rIe.EMBED:case rIe.KEYGEN:NOe(e,t);break;case rIe.HR:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._appendElement(t,KAe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}(e,t);break;case rIe.RB:case rIe.RTC:!function(e,t){e.openElements.hasInScope(rIe.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.RT:case rIe.RP:!function(e,t){e.openElements.hasInScope(rIe.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(rIe.RTC),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.PRE:case rIe.LISTING:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}(e,t);break;case rIe.XMP:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,yIe.RAWTEXT)}(e,t);break;case rIe.SVG:!function(e,t){e._reconstructActiveFormattingElements(),nOe(t),rOe(t),t.selfClosing?e._appendElement(t,KAe.SVG):e._insertElement(t,KAe.SVG),t.ackSelfClosing=!0}(e,t);break;case rIe.HTML:!function(e,t){0===e.openElements.tmplCount&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}(e,t);break;case rIe.BASE:case rIe.LINK:case rIe.META:case rIe.STYLE:case rIe.TITLE:case rIe.SCRIPT:case rIe.BGSOUND:case rIe.BASEFONT:case rIe.TEMPLATE:EOe(e,t);break;case rIe.BODY:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&0===e.openElements.tmplCount&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}(e,t);break;case rIe.FORM:!function(e,t){const n=e.openElements.tmplCount>0;e.formElement&&!n||(e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML),n||(e.formElement=e.openElements.current))}(e,t);break;case rIe.NOBR:!function(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(rIe.NOBR)&&(yOe(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,KAe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}(e,t);break;case rIe.MATH:!function(e,t){e._reconstructActiveFormattingElements(),tOe(t),rOe(t),t.selfClosing?e._appendElement(t,KAe.MATHML):e._insertElement(t,KAe.MATHML),t.ackSelfClosing=!0}(e,t);break;case rIe.TABLE:!function(e,t){e.treeAdapter.getDocumentMode(e.document)!==JAe.QUIRKS&&e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML),e.framesetOk=!1,e.insertionMode=oOe.IN_TABLE}(e,t);break;case rIe.INPUT:!function(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,KAe.HTML),DOe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}(e,t);break;case rIe.PARAM:case rIe.TRACK:case rIe.SOURCE:!function(e,t){e._appendElement(t,KAe.HTML),t.ackSelfClosing=!0}(e,t);break;case rIe.IMAGE:!function(e,t){t.tagName=tIe.IMG,t.tagID=rIe.IMG,NOe(e,t)}(e,t);break;case rIe.BUTTON:!function(e,t){e.openElements.hasInScope(rIe.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(rIe.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML),e.framesetOk=!1}(e,t);break;case rIe.APPLET:case rIe.OBJECT:case rIe.MARQUEE:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}(e,t);break;case rIe.IFRAME:!function(e,t){e.framesetOk=!1,e._switchToTextParsing(t,yIe.RAWTEXT)}(e,t);break;case rIe.SELECT:!function(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===oOe.IN_TABLE||e.insertionMode===oOe.IN_CAPTION||e.insertionMode===oOe.IN_TABLE_BODY||e.insertionMode===oOe.IN_ROW||e.insertionMode===oOe.IN_CELL?oOe.IN_SELECT_IN_TABLE:oOe.IN_SELECT}(e,t);break;case rIe.OPTION:case rIe.OPTGROUP:!function(e,t){e.openElements.currentTagId===rIe.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,KAe.HTML)}(e,t);break;case rIe.NOEMBED:case rIe.NOFRAMES:ROe(e,t);break;case rIe.FRAMESET:!function(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_FRAMESET)}(e,t);break;case rIe.TEXTAREA:!function(e,t){e._insertElement(t,KAe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=yIe.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=oOe.TEXT}(e,t);break;case rIe.NOSCRIPT:e.options.scriptingEnabled?ROe(e,t):MOe(e,t);break;case rIe.PLAINTEXT:!function(e,t){e.openElements.hasInButtonScope(rIe.P)&&e._closePElement(),e._insertElement(t,KAe.HTML),e.tokenizer.state=yIe.PLAINTEXT}(e,t);break;case rIe.COL:case rIe.TH:case rIe.TD:case rIe.TR:case rIe.HEAD:case rIe.FRAME:case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:case rIe.CAPTION:case rIe.COLGROUP:break;default:MOe(e,t)}}function FOe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const t=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==rIe.UNKNOWN||e.treeAdapter.getTagName(t)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(t,o))break}}function LOe(e,t){switch(t.tagID){case rIe.A:case rIe.B:case rIe.I:case rIe.S:case rIe.U:case rIe.EM:case rIe.TT:case rIe.BIG:case rIe.CODE:case rIe.FONT:case rIe.NOBR:case rIe.SMALL:case rIe.STRIKE:case rIe.STRONG:yOe(e,t);break;case rIe.P:!function(e){e.openElements.hasInButtonScope(rIe.P)||e._insertFakeElement(tIe.P,rIe.P),e._closePElement()}(e);break;case rIe.DL:case rIe.UL:case rIe.OL:case rIe.DIR:case rIe.DIV:case rIe.NAV:case rIe.PRE:case rIe.MAIN:case rIe.MENU:case rIe.ASIDE:case rIe.BUTTON:case rIe.CENTER:case rIe.FIGURE:case rIe.FOOTER:case rIe.HEADER:case rIe.HGROUP:case rIe.DIALOG:case rIe.ADDRESS:case rIe.ARTICLE:case rIe.DETAILS:case rIe.SEARCH:case rIe.SECTION:case rIe.SUMMARY:case rIe.LISTING:case rIe.FIELDSET:case rIe.BLOCKQUOTE:case rIe.FIGCAPTION:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case rIe.LI:!function(e){e.openElements.hasInListItemScope(rIe.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(rIe.LI),e.openElements.popUntilTagNamePopped(rIe.LI))}(e);break;case rIe.DD:case rIe.DT:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}(e,t);break;case rIe.H1:case rIe.H2:case rIe.H3:case rIe.H4:case rIe.H5:case rIe.H6:!function(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}(e);break;case rIe.BR:!function(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(tIe.BR,rIe.BR),e.openElements.pop(),e.framesetOk=!1}(e);break;case rIe.BODY:!function(e,t){if(e.openElements.hasInScope(rIe.BODY)&&(e.insertionMode=oOe.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}(e,t);break;case rIe.HTML:!function(e,t){e.openElements.hasInScope(rIe.BODY)&&(e.insertionMode=oOe.AFTER_BODY,nNe(e,t))}(e,t);break;case rIe.FORM:!function(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(rIe.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(rIe.FORM):n&&e.openElements.remove(n))}(e);break;case rIe.APPLET:case rIe.OBJECT:case rIe.MARQUEE:!function(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}(e,t);break;case rIe.TEMPLATE:SOe(e,t);break;default:FOe(e,t)}}function jOe(e,t){e.tmplInsertionModeStack.length>0?tNe(e,t):bOe(e,t)}function BOe(e,t){if(void 0!==e.openElements.currentTagId&&lOe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=oOe.IN_TABLE_TEXT,t.type){case FAe.CHARACTER:HOe(e,t);break;case FAe.WHITESPACE_CHARACTER:qOe(e,t)}else UOe(e,t)}function $Oe(e,t){switch(t.tagID){case rIe.TD:case rIe.TH:case rIe.TR:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(tIe.TBODY,rIe.TBODY),e.insertionMode=oOe.IN_TABLE_BODY,KOe(e,t)}(e,t);break;case rIe.STYLE:case rIe.SCRIPT:case rIe.TEMPLATE:EOe(e,t);break;case rIe.COL:!function(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(tIe.COLGROUP,rIe.COLGROUP),e.insertionMode=oOe.IN_COLUMN_GROUP,GOe(e,t)}(e,t);break;case rIe.FORM:!function(e,t){e.formElement||0!==e.openElements.tmplCount||(e._insertElement(t,KAe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}(e,t);break;case rIe.TABLE:!function(e,t){e.openElements.hasInTableScope(rIe.TABLE)&&(e.openElements.popUntilTagNamePopped(rIe.TABLE),e._resetInsertionMode(),e._processStartTag(t))}(e,t);break;case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_TABLE_BODY}(e,t);break;case rIe.INPUT:!function(e,t){DOe(t)?e._appendElement(t,KAe.HTML):UOe(e,t),t.ackSelfClosing=!0}(e,t);break;case rIe.CAPTION:!function(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_CAPTION}(e,t);break;case rIe.COLGROUP:!function(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_COLUMN_GROUP}(e,t);break;default:UOe(e,t)}}function zOe(e,t){switch(t.tagID){case rIe.TABLE:e.openElements.hasInTableScope(rIe.TABLE)&&(e.openElements.popUntilTagNamePopped(rIe.TABLE),e._resetInsertionMode());break;case rIe.TEMPLATE:SOe(e,t);break;case rIe.BODY:case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.HTML:case rIe.TBODY:case rIe.TD:case rIe.TFOOT:case rIe.TH:case rIe.THEAD:case rIe.TR:break;default:UOe(e,t)}}function UOe(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,AOe(e,t),e.fosterParentingEnabled=n}function qOe(e,t){e.pendingCharacterTokens.push(t)}function HOe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function VOe(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)UOe(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const WOe=new Set([rIe.CAPTION,rIe.COL,rIe.COLGROUP,rIe.TBODY,rIe.TD,rIe.TFOOT,rIe.TH,rIe.THEAD,rIe.TR]);function GOe(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.COL:e._appendElement(t,KAe.HTML),t.ackSelfClosing=!0;break;case rIe.TEMPLATE:EOe(e,t);break;default:YOe(e,t)}}function YOe(e,t){e.openElements.currentTagId===rIe.COLGROUP&&(e.openElements.pop(),e.insertionMode=oOe.IN_TABLE,e._processToken(t))}function KOe(e,t){switch(t.tagID){case rIe.TR:e.openElements.clearBackToTableBodyContext(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_ROW;break;case rIe.TH:case rIe.TD:e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(tIe.TR,rIe.TR),e.insertionMode=oOe.IN_ROW,QOe(e,t);break;case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE,$Oe(e,t));break;default:$Oe(e,t)}}function ZOe(e,t){const n=t.tagID;switch(t.tagID){case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE);break;case rIe.TABLE:e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE,zOe(e,t));break;case rIe.BODY:case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.HTML:case rIe.TD:case rIe.TH:case rIe.TR:break;default:zOe(e,t)}}function QOe(e,t){switch(t.tagID){case rIe.TH:case rIe.TD:e.openElements.clearBackToTableRowContext(),e._insertElement(t,KAe.HTML),e.insertionMode=oOe.IN_CELL,e.activeFormattingElements.insertMarker();break;case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:case rIe.TR:e.openElements.hasInTableScope(rIe.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE_BODY,KOe(e,t));break;default:$Oe(e,t)}}function XOe(e,t){switch(t.tagID){case rIe.TR:e.openElements.hasInTableScope(rIe.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE_BODY);break;case rIe.TABLE:e.openElements.hasInTableScope(rIe.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE_BODY,ZOe(e,t));break;case rIe.TBODY:case rIe.TFOOT:case rIe.THEAD:(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(rIe.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=oOe.IN_TABLE_BODY,ZOe(e,t));break;case rIe.BODY:case rIe.CAPTION:case rIe.COL:case rIe.COLGROUP:case rIe.HTML:case rIe.TD:case rIe.TH:break;default:zOe(e,t)}}function JOe(e,t){switch(t.tagID){case rIe.HTML:POe(e,t);break;case rIe.OPTION:e.openElements.currentTagId===rIe.OPTION&&e.openElements.pop(),e._insertElement(t,KAe.HTML);break;case rIe.OPTGROUP:e.openElements.currentTagId===rIe.OPTION&&e.openElements.pop(),e.openElements.currentTagId===rIe.OPTGROUP&&e.openElements.pop(),e._insertElement(t,KAe.HTML);break;case rIe.HR:e.openElements.currentTagId===rIe.OPTION&&e.openElements.pop(),e.openElements.currentTagId===rIe.OPTGROUP&&e.openElements.pop(),e._appendElement(t,KAe.HTML),t.ackSelfClosing=!0;break;case rIe.INPUT:case rIe.KEYGEN:case rIe.TEXTAREA:case rIe.SELECT:e.openElements.hasInSelectScope(rIe.SELECT)&&(e.openElements.popUntilTagNamePopped(rIe.SELECT),e._resetInsertionMode(),t.tagID!==rIe.SELECT&&e._processStartTag(t));break;case rIe.SCRIPT:case rIe.TEMPLATE:EOe(e,t)}}function eNe(e,t){switch(t.tagID){case rIe.OPTGROUP:e.openElements.stackTop>0&&e.openElements.currentTagId===rIe.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===rIe.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===rIe.OPTGROUP&&e.openElements.pop();break;case rIe.OPTION:e.openElements.currentTagId===rIe.OPTION&&e.openElements.pop();break;case rIe.SELECT:e.openElements.hasInSelectScope(rIe.SELECT)&&(e.openElements.popUntilTagNamePopped(rIe.SELECT),e._resetInsertionMode());break;case rIe.TEMPLATE:SOe(e,t)}}function tNe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(rIe.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):bOe(e,t)}function nNe(e,t){var n;if(t.tagID===rIe.HTML){if(e.fragmentContext||(e.insertionMode=oOe.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===rIe.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(null===(n=e.treeAdapter.getNodeSourceCodeLocation(r))||void 0===n?void 0:n.endTag)&&e._setEndLocation(r,t)}}else rNe(e,t)}function rNe(e,t){e.insertionMode=oOe.IN_BODY,AOe(e,t)}function iNe(e,t){e.insertionMode=oOe.IN_BODY,AOe(e,t)}function oNe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==KAe.HTML&&void 0!==e.openElements.currentTagId&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}tIe.AREA,tIe.BASE,tIe.BASEFONT,tIe.BGSOUND,tIe.BR,tIe.COL,tIe.EMBED,tIe.FRAME,tIe.HR,tIe.IMG,tIe.INPUT,tIe.KEYGEN,tIe.LINK,tIe.META,tIe.PARAM,tIe.SOURCE,tIe.TRACK,tIe.WBR;const aNe=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,sNe=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),lNe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function uNe(e,t){const n=function(e){const t="root"===e.type?e.children[0]:e;return Boolean(t&&("doctype"===t.type||"element"===t.type&&"html"===t.tagName.toLowerCase()))}(e),r=iTe("type",{handlers:{root:dNe,element:fNe,text:pNe,comment:gNe,doctype:hNe,raw:yNe},unknown:vNe}),i={parser:n?new cOe(lNe):cOe.getFragmentParser(void 0,lNe),handle(e){r(e,i)},stitches:!1,options:t||{}};r(e,i),bNe(i,q_e());const o=function(e,t){const n=t||{};return ACe({file:n.file||void 0,location:!1,schema:"svg"===n.space?C_e:T_e,verbose:n.verbose||!1},e)}(n?i.parser.document:i.parser.getFragment(),{file:i.options.file});return i.stitches&&RSe(o,"comment",function(e,t,n){const r=e;if(r.value.stitch&&n&&void 0!==t){return n.children[t]=r.value.stitch,t}}),"root"===o.type&&1===o.children.length&&o.children[0].type===e.type?o.children[0]:o}function cNe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function dNe(e,t){cNe(e.children,t)}function fNe(e,t){!function(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===yIe.PLAINTEXT)return;bNe(t,q_e(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:kCe.html;i===kCe.html&&"svg"===n&&(i=kCe.svg);const o=function(e,t){const n=(t||pAe).space;return mAe(e,"svg"===n?fAe:dAe)}({...e,children:[]},{space:i===kCe.svg?"svg":"html"}),a={type:FAe.START_TAG,tagName:n,tagID:dIe(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in o?o.attrs:[],location:_Ne(e)};t.parser.currentToken=a,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}(e,t),cNe(e.children,t),function(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&bAe.includes(n))return;if(t.parser.tokenizer.state===yIe.PLAINTEXT)return;bNe(t,U_e(e));const r={type:FAe.END_TAG,tagName:n,tagID:dIe(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:_Ne(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n!==t.parser.tokenizer.lastStartTagName||t.parser.tokenizer.state!==yIe.RCDATA&&t.parser.tokenizer.state!==yIe.RAWTEXT&&t.parser.tokenizer.state!==yIe.SCRIPT_DATA||(t.parser.tokenizer.state=yIe.DATA)}(e,t)}function pNe(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:FAe.CHARACTER,chars:e.value,location:_Ne(e)};bNe(t,q_e(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function hNe(e,t){const n={type:FAe.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:_Ne(e)};bNe(t,q_e(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function mNe(e,t){t.stitches=!0;const n=function(e){return ESe("children"in e?{...e,children:[]}:e)}(e);if("children"in e&&"children"in n){const r=uNe({type:"root",children:e.children},t.options);n.children=r.children}gNe({type:"comment",value:{stitch:n}},t)}function gNe(e,t){const n=e.value,r={type:FAe.COMMENT,data:n,location:_Ne(e)};bNe(t,q_e(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function yNe(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,wNe(t,q_e(e)),t.parser.tokenizer.write(t.options.tagfilter?e.value.replace(aNe,"&lt;$1$2"):e.value,!1),t.parser.tokenizer._runParsingLoop(),72===t.parser.tokenizer.state||78===t.parser.tokenizer.state){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const e=t.parser.tokenizer._consume();t.parser.tokenizer._callState(e)}}function vNe(e,t){const n=e;if(!t.options.passThrough||!t.options.passThrough.includes(n.type)){let e="";throw sNe.has(n.type)&&(e=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+e)}mNe(n,t)}function bNe(e,t){wNe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=yIe.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function wNe(e,t){if(t&&void 0!==t.offset){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=1-t.column,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function _Ne(e){const t=q_e(e)||{line:void 0,column:void 0,offset:void 0},n=U_e(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function xNe(e){return function(t,n){return uNe(t,{...e,file:n})}}const ENe=({className:e,type:t,content:n,children:r})=>w.jsxs("div",{className:zn("group relative px-5 py-2 text-xs",e,"error"===t&&"border-destructive rounded-md border py-4"),children:["error"===t&&w.jsxs(Xn,{variant:"secondary",className:zn("absolute left-2 top-[-12px] flex items-center gap-1 border text-xs","border-destructive bg-background"),children:[w.jsx(rbe,{className:"h-3 w-3 text-red-500"}),t]}),w.jsx("div",{className:"flex flex-col gap-5",children:r})]}),SNe=/<think>([\s\S]*?)<\/think>/g,kNe=/<think>([\s\S]*)$/,TNe=T.memo(({thinkContent:e,isExpanded:t,onToggleExpansion:n,className:r})=>{const{content:i,isComplete:o,index:a}=e,s=o&&!t?function(e,t=10){const n=e.split(" ");return n.length<=t?e:n.slice(0,t).join(" ")+"..."}(i,10):i,l=o&&i.split(" ").length>10;return w.jsxs("span",{className:zn("inline-block rounded-lg px-3 py-2 text-xs font-normal text-gray-100 dark:text-gray-400",t&&"bg-gray-50 dark:bg-gray-800/50",r),children:[w.jsx("span",{className:"inline-flex items-start gap-2",children:w.jsxs("span",{className:"text-gray-400",children:[w.jsx(nbe,{className:"mb-1 inline-block opacity-60 grayscale",size:12})," ",s]})})," ",l&&w.jsx("button",{onClick:()=>n(i),className:"text-xs text-gray-500 underline hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:t?"Show less":"Show more thinking"})]},`think-${a}`)});TNe.displayName="ThinkBlock";const CNe=T.memo(function(e){const[t,n]=k.useState(new Set),r=k.useCallback(e=>{n(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),{processedContent:i,thinkContents:o}=k.useMemo(()=>(e=>{const t=[];let n=e,r=0;return n=n.replace(SNe,(e,n)=>n?(t.push({content:n.trim(),isComplete:!0,index:r++}),`\n\n<think-block data-index="${r-1}"></think-block>\n\n`):e),n=n.replace(kNe,(e,n)=>n?(t.push({content:n.trim(),isComplete:!1,index:r++}),`\n\n<think-block data-index="${r-1}"></think-block>\n\n`):e),{processedContent:n,thinkContents:t}})(e.content),[e.content]),a=k.useCallback(e=>{var n;try{const i=parseInt((null==(n=e.props)?void 0:n["data-index"])||"0",10),a=o[i];if(!a)return null;const s=t.has(a.content);return w.jsx(TNe,{thinkContent:a,isExpanded:s,onToggleExpansion:r})}catch(i){return null}},[o,t,r]);return w.jsx("div",{className:"flex flex-col gap-5",children:w.jsx(ENe,{isSuccess:!0,type:e.isAnswer?"answer":"thinking",content:e,children:w.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:w.jsx(wke,{remarkPlugins:[gCe],rehypePlugins:[xNe],components:{"think-block":a},children:i})})})})});function ANe(e){return w.jsx(ENe,{isSuccess:!1,type:"error",content:e,children:w.jsx("div",{className:"prose dark:prose-invert max-w-none text-sm",children:w.jsx(wke,{remarkPlugins:[gCe],children:e.errorMessage})})})}class INe extends T.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var t,n;this.setState({error:e}),null==(n=(t=this.props).onError)||n.call(t)}render(){return this.state.hasError?w.jsxs("div",{className:"text-danger text-sm text-red-500",children:["Failed to render tool component. Please try again or contact support.",w.jsx("pre",{children:JSON.stringify(this.state.error,null,2)})]}):this.props.children}}const ONe=({toolInvocation:e,additionalData:t,isCompleted:n,errorMessage:r})=>{const{isOpen:i,onToggle:o}=Jx(!1),{toolName:a,args:s,state:l}=e,u="result"===l?e.result:null,c=s.reasoning||"",d=Fwe(e=>e.ai.findToolComponent(a)),f=s.reasoning,p="object"==typeof u&&null!==u&&"success"in u&&!0===u.success;return n?w.jsxs(ENe,{isSuccess:p,type:a,content:{toolName:a,args:s,llmResult:u,additionalData:t,isCompleted:n},children:[w.jsx("div",{className:"text-sm text-gray-500",children:f&&w.jsx("span",{children:f})}),d&&p&&n&&w.jsx(INe,{children:"function"==typeof d?w.jsx(d,{...u,...t}):d}),n&&(r||!p)&&w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx(er,{className:"w-fit",variant:"ghost",size:"xs",onClick:()=>o(),children:w.jsxs("p",{className:"flex items-center gap-2 text-xs text-orange-500",children:[w.jsx(ube,{}),"Tool call failed"]})}),i&&w.jsx("div",{className:"h-[300px] w-full overflow-hidden rounded-md border",children:w.jsx(see,{value:e,readOnly:!0,options:{lineNumbers:"off",minimap:{enabled:!1},scrollBeyondLastLine:!1,wordWrap:"on"}})})]})]}):w.jsx("div",{className:"text-sm text-gray-500",children:c})},NNe=({result:e,onDeleteAnalysisResult:t})=>{const{id:n,prompt:r,errorMessage:i,streamMessage:o}=e,a=o.parts,[s,l]=k.useState(!1);return w.jsxs("div",{className:"group flex w-full flex-col gap-2 text-sm",children:[w.jsx("div",{className:"mb-2 flex items-center gap-2 rounded-md text-gray-700 dark:text-gray-100",children:w.jsxs("div",{className:"bg-muted flex w-full items-center gap-2 rounded-md border p-2 text-sm",children:[w.jsx(obe,{className:"h-4 w-4"}),w.jsx("div",{className:"flex-1",children:r}),w.jsxs("div",{className:"flex gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[w.jsx(px,{text:r,variant:"ghost",size:"icon",className:"h-6 w-6",ariaLabel:"Copy prompt"}),w.jsx(er,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>l(!0),children:w.jsx(lbe,{className:"h-4 w-4"})}),w.jsx(ba,{open:s,onOpenChange:l,children:w.jsxs(xa,{className:"sm:max-w-[425px]",children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Confirm Deletion"}),w.jsx(Ta,{children:"Are you sure you want to delete this analysis result? This action cannot be undone."})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:()=>l(!1),children:"Cancel"}),w.jsx(er,{variant:"destructive",onClick:()=>{t(n),l(!1)},children:"Delete"})]})]})})]})]})}),null==a?void 0:a.map((t,n)=>{var r;return w.jsxs("div",{children:["text"===t.type&&w.jsx(CNe,{content:t.text,isAnswer:n===((null==(r=o.parts)?void 0:r.length)||0)-1}),"tool-invocation"===t.type&&w.jsx("div",{children:w.jsx(ONe,{toolInvocation:t.toolInvocation,additionalData:t.additionalData,isCompleted:e.isCompleted},t.toolInvocation.toolCallId)})]},n)}),i&&w.jsx(ANe,{errorMessage:i.error})]})},DNe=({isOpen:e,onClose:t,onDelete:n})=>w.jsx(ba,{open:e,onOpenChange:t,children:w.jsxs(xa,{children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Delete Session"}),w.jsx(Ta,{children:"Are you sure you want to delete this session? This action cannot be undone."})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:t,children:"Cancel"}),w.jsx(er,{variant:"destructive",onClick:n,children:"Delete"})]})]})}),RNe=({className:e})=>{const t=Fwe(e=>e.config.ai.sessions),n=Fwe(e=>e.config.ai.currentSessionId),r=Fwe(e=>e.ai.deleteSession),[i,o]=k.useState(null),[a,s]=k.useState(!1);return t.length<=1||!n?null:w.jsxs(w.Fragment,{children:[w.jsx(er,{variant:"outline",size:"sm",className:zn("text-destructive",e),onClick:()=>{n&&(o(n),s(!0))},children:w.jsx(sbe,{className:"h-4 w-4"})}),w.jsx(DNe,{isOpen:a,onClose:()=>{s(!1),o(null)},onDelete:()=>{i&&(r(i),s(!1),o(null))}})]})},MNe=({className:e})=>{const t=Fwe(e=>e.ai.createSession);return w.jsxs("div",{className:zn("flex items-center gap-2",e),children:[w.jsx(RNe,{}),w.jsxs(er,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>t(),children:[w.jsx(ibe,{className:"h-4 w-4"}),"New Session"]})]})},PNe={};function FNe(e,t){void 0===e&&(e=PNe),void 0===t&&(t=PNe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(n=>e[n]===t[n])}
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var LNe=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jNe=Object.prototype.hasOwnProperty;function BNe(e,t){return jNe.call(e,t)}function $Ne(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)BNe(e,i)&&r.push(i);return r}function zNe(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function UNe(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function qNe(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function HNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function VNe(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(VNe(e[t]))return!0}else if("object"==typeof e)for(var r=$Ne(e),i=r.length,o=0;o<i;o++)if(VNe(e[r[o]]))return!0;return!1}function WNe(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}var GNe=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,WNe(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=WNe(t,{name:n,index:r,operation:i,tree:o}),s}return LNe(t,e),t}(Error),YNe=GNe,KNe=zNe,ZNe={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=XNe(n,this.path);r&&(r=zNe(r));var i=JNe(n,{op:"remove",path:this.from}).removed;return JNe(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=XNe(n,this.from);return JNe(n,{op:"add",path:this.path,value:zNe(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:rDe(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},QNe={add:function(e,t,n){return UNe(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:ZNe.move,copy:ZNe.copy,test:ZNe.test,_get:ZNe._get};function XNe(e,t){if(""==t)return e;var n={op:"_get",path:t};return JNe(e,n),n.value}function JNe(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):tDe(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=XNe(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=rDe(e,t.value),!1===a.test)throw new YNe("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new YNe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=zNe(e));var s=(t.path||"").split("/"),l=e,u=1,c=s.length,d=void 0,f=void 0,p=void 0;for(p="function"==typeof n?n:tDe;;){if((f=s[u])&&-1!=f.indexOf("~")&&(f=HNe(f)),i&&("__proto__"==f||"prototype"==f&&u>0&&"constructor"==s[u-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===d&&(void 0===l[f]?d=s.slice(0,u).join("/"):u==c-1&&(d=t.path),void 0!==d&&p(t,0,e,d)),u++,Array.isArray(l)){if("-"===f)f=l.length;else{if(n&&!UNe(f))throw new YNe("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);UNe(f)&&(f=~~f)}if(u>=c){if(n&&"add"===t.op&&f>l.length)throw new YNe("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=QNe[t.op].call(t,l,f,e)).test)throw new YNe("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(u>=c){if(!1===(a=ZNe[t.op].call(t,l,f,e)).test)throw new YNe("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(l=l[f],n&&u<c&&(!l||"object"!=typeof l))throw new YNe("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}function eDe(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new YNe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=zNe(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=JNe(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function tDe(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new YNe("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!ZNe[e.op])throw new YNe("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new YNe("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new YNe('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new YNe("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new YNe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&VNe(e.value))throw new YNe("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new YNe("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new YNe("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=nDe([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new YNe("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function nDe(e,t,n){try{if(!Array.isArray(e))throw new YNe("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)eDe(zNe(t),zNe(e),n||!0);else{n=n||tDe;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(F0){if(F0 instanceof YNe)return F0;throw F0}}function rDe(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!==n--;)if(!rDe(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!==n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!==n--;)if(!rDe(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}const iDe=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:YNe,_areEquals:rDe,applyOperation:JNe,applyPatch:eDe,applyReducer:function(e,t,n){var r=JNe(e,t);if(!1===r.test)throw new YNe("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument},deepClone:KNe,getValueByPointer:XNe,validate:nDe,validator:tDe},Symbol.toStringTag,{value:"Module"}));
/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var oDe=new WeakMap,aDe=function(){return function(e){this.observers=new Map,this.obj=e}}(),sDe=function(){return function(e,t){this.callback=e,this.observer=t}}();function lDe(e,t){void 0===t&&(t=!1);var n=oDe.get(e.object);uDe(n.value,e.object,e.patches,"",t),e.patches.length&&eDe(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function uDe(e,t,n,r,i){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var o=$Ne(t),a=$Ne(e),s=!1,l=a.length-1;l>=0;l--){var u=e[d=a[l]];if(!BNe(t,d)||void 0===t[d]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+qNe(d),value:zNe(u)}),n.push({op:"remove",path:r+"/"+qNe(d)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}));else{var c=t[d];"object"==typeof u&&null!=u&&"object"==typeof c&&null!=c&&Array.isArray(u)===Array.isArray(c)?uDe(u,c,n,r+"/"+qNe(d),i):u!==c&&(i&&n.push({op:"test",path:r+"/"+qNe(d),value:zNe(u)}),n.push({op:"replace",path:r+"/"+qNe(d),value:zNe(c)}))}}if(s||o.length!=a.length)for(l=0;l<o.length;l++){var d;BNe(e,d=o[l])||void 0===t[d]||n.push({op:"add",path:r+"/"+qNe(d),value:zNe(t[d])})}}}const cDe=Object.freeze(Object.defineProperty({__proto__:null,compare:function(e,t,n){void 0===n&&(n=!1);var r=[];return uDe(e,t,r,"",n),r},generate:lDe,observe:function(e,t){var n,r=function(e){return oDe.get(e)}(e);if(r){var i=function(e,t){return e.observers.get(t)}(r,t);n=i&&i.observer}else r=new aDe(e),oDe.set(e,r);if(n)return n;if(n={},r.value=zNe(e),t){n.callback=t,n.next=null;var o=function(){lDe(n)},a=function(){clearTimeout(n.next),n.next=setTimeout(o)};"undefined"!=typeof window&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return n.patches=[],n.object=e,n.unobserve=function(){lDe(n),clearTimeout(n.next),function(e,t){e.observers.delete(t.callback)}(r,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},r.observers.set(t,new sDe(t,n)),n},unobserve:function(e,t){t.unobserve()}},Symbol.toStringTag,{value:"Module"}));var dDe,fDe;Object.assign({},iDe,cDe,{JsonPatchError:GNe,deepClone:zNe,escapePathComponent:qNe,unescapePathComponent:HNe});var pDe=function(){if(fDe)return dDe;fDe=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return dDe=function(t,n){var r,i,o;return n=n||{},r=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),i=""===r?1/0:void 0===n.maxLength?80:n.maxLength,o=n.replacer,function t(n,a,s){var l,u,c,d,f,p,h,m,g,y,v,b;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(v=JSON.stringify(n,o)))return v;if(h=i-a.length-s,v.length<=h&&(g=v.replace(e,function(e,t){return t||e+" "})).length<=h)return g;if(null!=o&&(n=JSON.parse(v),o=void 0),"object"==typeof n&&null!==n){if(m=a+r,c=[],u=0,Array.isArray(n))for(y="[",l="]",h=n.length;u<h;u++)c.push(t(n[u],m,u===h-1?0:1)||"null");else for(y="{",l="}",h=(p=Object.keys(n)).length;u<h;u++)d=p[u],f=JSON.stringify(d)+": ",void 0!==(b=t(n[d],m,f.length+(u===h-1?0:1)))&&c.push(f+b);if(c.length>0)return[y,r+c.join(",\n"+m),l].join("\n"+a)}return v}(t,"",0)},dDe}();const hDe=f(pDe);var mDe,gDe,yDe,vDe,bDe,wDe,_De,xDe,EDe,SDe,kDe,TDe,CDe,ADe,IDe,ODe,NDe,DDe,RDe,MDe,PDe,FDe,LDe,jDe,BDe,$De,zDe,UDe,qDe,HDe,VDe,WDe,GDe,YDe,KDe,ZDe,QDe,XDe,JDe,eRe,tRe,nRe,rRe,iRe,oRe,aRe,sRe,lRe,uRe,cRe,dRe,fRe,pRe,hRe,mRe,gRe,yRe,vRe,bRe,wRe,_Re,xRe,ERe,SRe,kRe,TRe,CRe,ARe,IRe,ORe,NRe,DRe,RRe,MRe,PRe,FRe,LRe,jRe,BRe,$Re,zRe,URe,qRe,HRe,VRe,WRe,GRe,YRe,KRe,ZRe={exports:{}};function QRe(){if(gDe)return mDe;gDe=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return mDe={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}function XRe(){if(vDe)return yDe;vDe=1;var e={};const t="object"==typeof process&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...e)=>{}:()=>{};return yDe=t}function JRe(){return bDe||(bDe=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=QRe(),o=XRe(),a=(t=e.exports={}).re=[],s=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],c=t.t={};let d=0;const f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",i],[f,r]],h=(e,t,n)=>{const r=(e=>{for(const[t,n]of p)e=e.split(`${t}*`).join(`${t}{0,${n}}`).split(`${t}+`).join(`${t}{1,${n}}`);return e})(t),i=d++;o(e,i,t),c[e]=i,l[i]=t,u[i]=r,a[i]=new RegExp(t,n?"g":void 0),s[i]=new RegExp(r,n?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),h("MAINVERSION",`(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})\\.(${l[c.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})\\.(${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${l[c.NONNUMERICIDENTIFIER]}|${l[c.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASE",`(?:-(${l[c.PRERELEASEIDENTIFIER]}(?:\\.${l[c.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${l[c.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[c.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${f}+`),h("BUILD",`(?:\\+(${l[c.BUILDIDENTIFIER]}(?:\\.${l[c.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${l[c.MAINVERSION]}${l[c.PRERELEASE]}?${l[c.BUILD]}?`),h("FULL",`^${l[c.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${l[c.MAINVERSIONLOOSE]}${l[c.PRERELEASELOOSE]}?${l[c.BUILD]}?`),h("LOOSE",`^${l[c.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${l[c.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${l[c.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:\\.(${l[c.XRANGEIDENTIFIER]})(?:${l[c.PRERELEASE]})?${l[c.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[c.XRANGEIDENTIFIERLOOSE]})(?:${l[c.PRERELEASELOOSE]})?${l[c.BUILD]}?)?)?`),h("XRANGE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${l[c.GTLT]}\\s*${l[c.XRANGEPLAINLOOSE]}$`),h("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),h("COERCE",`${l[c.COERCEPLAIN]}(?:$|[^\\d])`),h("COERCEFULL",l[c.COERCEPLAIN]+`(?:${l[c.PRERELEASE]})?(?:${l[c.BUILD]})?(?:$|[^\\d])`),h("COERCERTL",l[c.COERCE],!0),h("COERCERTLFULL",l[c.COERCEFULL],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${l[c.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${l[c.LONETILDE]}${l[c.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${l[c.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${l[c.LONECARET]}${l[c.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${l[c.LONECARET]}${l[c.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${l[c.GTLT]}\\s*(${l[c.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${l[c.GTLT]}\\s*(${l[c.LOOSEPLAIN]}|${l[c.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${l[c.XRANGEPLAIN]})\\s+-\\s+(${l[c.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${l[c.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[c.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(ZRe,ZRe.exports)),ZRe.exports}function eMe(){if(_De)return wDe;_De=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return wDe=n=>n?"object"!=typeof n?e:n:t,wDe}function tMe(){if(EDe)return xDe;EDe=1;const e=/^[0-9]+$/,t=(t,n)=>{const r=e.test(t),i=e.test(n);return r&&i&&(t=+t,n=+n),t===n?0:r&&!i?-1:i&&!r?1:t<n?-1:1};return xDe={compareIdentifiers:t,rcompareIdentifiers:(e,n)=>t(n,e)},xDe}function nMe(){if(kDe)return SDe;kDe=1;const e=XRe(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=QRe(),{safeRe:r,t:i}=JRe(),o=eMe(),{compareIdentifiers:a}=tMe();class s{constructor(a,l){if(l=o(l),a instanceof s){if(a.loose===!!l.loose&&a.includePrerelease===!!l.includePrerelease)return a;a=a.version}else if("string"!=typeof a)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",a,l),this.options=l,this.loose=!!l.loose,this.includePrerelease=!!l.includePrerelease;const u=a.trim().match(l.loose?r[i.LOOSE]:r[i.FULL]);if(!u)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<n)return t}return e}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof s)){if("string"==typeof t&&t===this.version)return 0;t=new s(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof s||(e=new s(e,this.options)),a(this.major,e.major)||a(this.minor,e.minor)||a(this.patch,e.patch)}comparePre(t){if(t instanceof s||(t=new s(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(e("prerelease compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return a(r,i)}while(++n)}compareBuild(t){t instanceof s||(t=new s(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(e("build compare",n,r,i),void 0===r&&void 0===i)return 0;if(void 0===i)return 1;if(void 0===r)return-1;if(r!==i)return a(r,i)}while(++n)}inc(e,t,n){if(e.startsWith("pre")){if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(n)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let r=this.prerelease.length;for(;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);if(-1===r){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let r=[t,e];!1===n&&(r=[t]),0===a(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=r):this.prerelease=r}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return SDe=s}function rMe(){if(CDe)return TDe;CDe=1;const e=nMe();return TDe=(t,n,r=!1)=>{if(t instanceof e)return t;try{return new e(t,n)}catch(i){if(!r)return null;throw i}},TDe}function iMe(){if(VDe)return HDe;VDe=1;const e=nMe();return HDe=(t,n,r)=>new e(t,r).compare(new e(n,r)),HDe}function oMe(){if(QDe)return ZDe;QDe=1;const e=nMe();return ZDe=(t,n,r)=>{const i=new e(t,r),o=new e(n,r);return i.compare(o)||i.compareBuild(o)},ZDe}function aMe(){if(rRe)return nRe;rRe=1;const e=iMe();return nRe=(t,n,r)=>e(t,n,r)>0,nRe}function sMe(){if(oRe)return iRe;oRe=1;const e=iMe();return iRe=(t,n,r)=>e(t,n,r)<0,iRe}function lMe(){if(sRe)return aRe;sRe=1;const e=iMe();return aRe=(t,n,r)=>0===e(t,n,r),aRe}function uMe(){if(uRe)return lRe;uRe=1;const e=iMe();return lRe=(t,n,r)=>0!==e(t,n,r),lRe}function cMe(){if(dRe)return cRe;dRe=1;const e=iMe();return cRe=(t,n,r)=>e(t,n,r)>=0,cRe}function dMe(){if(pRe)return fRe;pRe=1;const e=iMe();return fRe=(t,n,r)=>e(t,n,r)<=0,fRe}function fMe(){if(mRe)return hRe;mRe=1;const e=lMe(),t=uMe(),n=aMe(),r=cMe(),i=sMe(),o=dMe();return hRe=(a,s,l,u)=>{switch(s){case"===":return"object"==typeof a&&(a=a.version),"object"==typeof l&&(l=l.version),a===l;case"!==":return"object"==typeof a&&(a=a.version),"object"==typeof l&&(l=l.version),a!==l;case"":case"=":case"==":return e(a,l,u);case"!=":return t(a,l,u);case">":return n(a,l,u);case">=":return r(a,l,u);case"<":return i(a,l,u);case"<=":return o(a,l,u);default:throw new TypeError(`Invalid operator: ${s}`)}},hRe}function pMe(){if(_Re)return wRe;_Re=1;const e=/\s+/g;class t{constructor(n,o){if(o=r(o),n instanceof t)return n.loose===!!o.loose&&n.includePrerelease===!!o.includePrerelease?n:new t(n.raw,o);if(n instanceof i)return this.raw=n.value,this.set=[[n]],this.formatted=void 0,this;if(this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease,this.raw=n.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!h(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&m(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&f)|(this.options.loose&&p))+":"+e,r=n.get(t);if(r)return r;const a=this.options.loose,m=a?s[l.HYPHENRANGELOOSE]:s[l.HYPHENRANGE];e=e.replace(m,C(this.options.includePrerelease)),o("hyphen replace",e),e=e.replace(s[l.COMPARATORTRIM],u),o("comparator trim",e),e=e.replace(s[l.TILDETRIM],c),o("tilde trim",e),e=e.replace(s[l.CARETTRIM],d),o("caret trim",e);let g=e.split(" ").map(e=>y(e,this.options)).join(" ").split(/\s+/).map(e=>T(e,this.options));a&&(g=g.filter(e=>(o("loose invalid filter",e,this.options),!!e.match(s[l.COMPARATORLOOSE])))),o("range list",g);const v=new Map,b=g.map(e=>new i(e,this.options));for(const n of b){if(h(n))return[n];v.set(n.value,n)}v.size>1&&v.has("")&&v.delete("");const w=[...v.values()];return n.set(t,w),w}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(t=>g(t,n)&&e.set.some(e=>g(e,n)&&t.every(t=>e.every(e=>t.intersects(e,n)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new a(e,this.options)}catch(t){return!1}for(let n=0;n<this.set.length;n++)if(A(this.set[n],e,this.options))return!0;return!1}}wRe=t;const n=new(bRe?vRe:(bRe=1,vRe=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}})),r=eMe(),i=hMe(),o=XRe(),a=nMe(),{safeRe:s,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=JRe(),{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:p}=QRe(),h=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,g=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every(e=>i.intersects(e,t)),i=r.pop();return n},y=(e,t)=>(o("comp",e,t),e=_(e,t),o("caret",e),e=b(e,t),o("tildes",e),e=E(e,t),o("xrange",e),e=k(e,t),o("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{const n=t.loose?s[l.TILDELOOSE]:s[l.TILDE];return e.replace(n,(t,n,r,i,a)=>{let s;return o("tilde",e,t,n,r,i,a),v(n)?s="":v(r)?s=`>=${n}.0.0 <${+n+1}.0.0-0`:v(i)?s=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:a?(o("replaceTilde pr",a),s=`>=${n}.${r}.${i}-${a} <${n}.${+r+1}.0-0`):s=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,o("tilde return",s),s})},_=(e,t)=>e.trim().split(/\s+/).map(e=>x(e,t)).join(" "),x=(e,t)=>{o("caret",e,t);const n=t.loose?s[l.CARETLOOSE]:s[l.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,(t,n,i,a,s)=>{let l;return o("caret",e,t,n,i,a,s),v(n)?l="":v(i)?l=`>=${n}.0.0${r} <${+n+1}.0.0-0`:v(a)?l="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:s?(o("replaceCaret pr",s),l="0"===n?"0"===i?`>=${n}.${i}.${a}-${s} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}-${s} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a}-${s} <${+n+1}.0.0-0`):(o("no pr"),l="0"===n?"0"===i?`>=${n}.${i}.${a}${r} <${n}.${i}.${+a+1}-0`:`>=${n}.${i}.${a}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${a} <${+n+1}.0.0-0`),o("caret return",l),l})},E=(e,t)=>(o("replaceXRanges",e,t),e.split(/\s+/).map(e=>S(e,t)).join(" ")),S=(e,t)=>{e=e.trim();const n=t.loose?s[l.XRANGELOOSE]:s[l.XRANGE];return e.replace(n,(n,r,i,a,s,l)=>{o("xRange",e,n,r,i,a,s,l);const u=v(i),c=u||v(a),d=c||v(s),f=d;return"="===r&&f&&(r=""),l=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(c&&(a=0),s=0,">"===r?(r=">=",c?(i=+i+1,a=0,s=0):(a=+a+1,s=0)):"<="===r&&(r="<",c?i=+i+1:a=+a+1),"<"===r&&(l="-0"),n=`${r+i}.${a}.${s}${l}`):c?n=`>=${i}.0.0${l} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${a}.0${l} <${i}.${+a+1}.0-0`),o("xRange return",n),n})},k=(e,t)=>(o("replaceStars",e,t),e.trim().replace(s[l.STAR],"")),T=(e,t)=>(o("replaceGTE0",e,t),e.trim().replace(s[t.includePrerelease?l.GTE0PRE:l.GTE0],"")),C=e=>(t,n,r,i,o,a,s,l,u,c,d,f)=>`${n=v(r)?"":v(i)?`>=${r}.0.0${e?"-0":""}`:v(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${l=v(u)?"":v(c)?`<${+u+1}.0.0-0`:v(d)?`<${u}.${+c+1}.0-0`:f?`<=${u}.${c}.${d}-${f}`:e?`<${u}.${c}.${+d+1}-0`:`<=${l}`}`.trim(),A=(e,t,n)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(o(e[n].semver),e[n].semver!==i.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0};return wRe}function hMe(){if(ERe)return xRe;ERe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(r,i){if(i=n(i),r instanceof t){if(r.loose===!!i.loose)return r;r=r.value}r=r.trim().split(/\s+/).join(" "),a("comparator",r,i),this.options=i,this.loose=!!i.loose,this.parse(r),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(t){const n=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],o=t.match(n);if(!o)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==o[1]?o[1]:"","="===this.operator&&(this.operator=""),o[2]?this.semver=new s(o[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(a("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new s(t,this.options)}catch(n){return!1}return o(t,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new l(e.value,r).test(this.value):""===e.operator?""===e.value||new l(this.value,r).test(e.semver):(!(r=n(r)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(o(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(o(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}xRe=t;const n=eMe(),{safeRe:r,t:i}=JRe(),o=fMe(),a=XRe(),s=nMe(),l=pMe();return xRe}function mMe(){if(kRe)return SRe;kRe=1;const e=pMe();return SRe=(t,n,r)=>{try{n=new e(n,r)}catch(i){return!1}return n.test(t)},SRe}function gMe(){if(LRe)return FRe;LRe=1;const e=nMe(),t=hMe(),{ANY:n}=t,r=pMe(),i=mMe(),o=aMe(),a=sMe(),s=dMe(),l=cMe();return FRe=(u,c,d,f)=>{let p,h,m,g,y;switch(u=new e(u,f),c=new r(c,f),d){case">":p=o,h=s,m=a,g=">",y=">=";break;case"<":p=a,h=l,m=o,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(u,c,f))return!1;for(let e=0;e<c.set.length;++e){const r=c.set[e];let i=null,o=null;if(r.forEach(e=>{e.semver===n&&(e=new t(">=0.0.0")),i=i||e,o=o||e,p(e.semver,i.semver,f)?i=e:m(e.semver,o.semver,f)&&(o=e)}),i.operator===g||i.operator===y)return!1;if((!o.operator||o.operator===g)&&h(u,o.semver))return!1;if(o.operator===y&&m(u,o.semver))return!1}return!0},FRe}var yMe=function(){if(KRe)return YRe;KRe=1;const e=JRe(),t=QRe(),n=nMe(),r=tMe(),i=rMe(),o=function(){if(IDe)return ADe;IDe=1;const e=rMe();return ADe=(t,n)=>{const r=e(t,n);return r?r.version:null},ADe}(),a=function(){if(NDe)return ODe;NDe=1;const e=rMe();return ODe=(t,n)=>{const r=e(t.trim().replace(/^[=v]+/,""),n);return r?r.version:null},ODe}(),s=function(){if(RDe)return DDe;RDe=1;const e=nMe();return DDe=(t,n,r,i,o)=>{"string"==typeof r&&(o=i,i=r,r=void 0);try{return new e(t instanceof e?t.version:t,r).inc(n,i,o).version}catch(a){return null}},DDe}(),l=function(){if(PDe)return MDe;PDe=1;const e=rMe();return MDe=(t,n)=>{const r=e(t,null,!0),i=e(n,null,!0),o=r.compare(i);if(0===o)return null;const a=o>0,s=a?r:i,l=a?i:r,u=!!s.prerelease.length;if(l.prerelease.length&&!u){if(!l.patch&&!l.minor)return"major";if(0===l.compareMain(s))return l.minor&&!l.patch?"minor":"patch"}const c=u?"pre":"";return r.major!==i.major?c+"major":r.minor!==i.minor?c+"minor":r.patch!==i.patch?c+"patch":"prerelease"}}(),u=function(){if(LDe)return FDe;LDe=1;const e=nMe();return FDe=(t,n)=>new e(t,n).major,FDe}(),c=function(){if(BDe)return jDe;BDe=1;const e=nMe();return jDe=(t,n)=>new e(t,n).minor,jDe}(),d=function(){if(zDe)return $De;zDe=1;const e=nMe();return $De=(t,n)=>new e(t,n).patch,$De}(),f=function(){if(qDe)return UDe;qDe=1;const e=rMe();return UDe=(t,n)=>{const r=e(t,n);return r&&r.prerelease.length?r.prerelease:null},UDe}(),p=iMe(),h=function(){if(GDe)return WDe;GDe=1;const e=iMe();return WDe=(t,n,r)=>e(n,t,r),WDe}(),m=function(){if(KDe)return YDe;KDe=1;const e=iMe();return YDe=(t,n)=>e(t,n,!0),YDe}(),g=oMe(),y=function(){if(JDe)return XDe;JDe=1;const e=oMe();return XDe=(t,n)=>t.sort((t,r)=>e(t,r,n)),XDe}(),v=function(){if(tRe)return eRe;tRe=1;const e=oMe();return eRe=(t,n)=>t.sort((t,r)=>e(r,t,n)),eRe}(),b=aMe(),w=sMe(),_=lMe(),x=uMe(),E=cMe(),S=dMe(),k=fMe(),T=function(){if(yRe)return gRe;yRe=1;const e=nMe(),t=rMe(),{safeRe:n,t:r}=JRe();return gRe=(i,o)=>{if(i instanceof e)return i;if("number"==typeof i&&(i=String(i)),"string"!=typeof i)return null;let a=null;if((o=o||{}).rtl){const e=o.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let t;for(;(t=e.exec(i))&&(!a||a.index+a[0].length!==i.length);)a&&t.index+t[0].length===a.index+a[0].length||(a=t),e.lastIndex=t.index+t[1].length+t[2].length;e.lastIndex=-1}else a=i.match(o.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);if(null===a)return null;const s=a[2],l=a[3]||"0",u=a[4]||"0",c=o.includePrerelease&&a[5]?`-${a[5]}`:"",d=o.includePrerelease&&a[6]?`+${a[6]}`:"";return t(`${s}.${l}.${u}${c}${d}`,o)},gRe}(),C=hMe(),A=pMe(),I=mMe(),O=function(){if(CRe)return TRe;CRe=1;const e=pMe();return TRe=(t,n)=>new e(t,n).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" ")),TRe}(),N=function(){if(IRe)return ARe;IRe=1;const e=nMe(),t=pMe();return ARe=(n,r,i)=>{let o=null,a=null,s=null;try{s=new t(r,i)}catch(l){return null}return n.forEach(t=>{s.test(t)&&(o&&-1!==a.compare(t)||(o=t,a=new e(o,i)))}),o},ARe}(),D=function(){if(NRe)return ORe;NRe=1;const e=nMe(),t=pMe();return ORe=(n,r,i)=>{let o=null,a=null,s=null;try{s=new t(r,i)}catch(l){return null}return n.forEach(t=>{s.test(t)&&(o&&1!==a.compare(t)||(o=t,a=new e(o,i)))}),o},ORe}(),R=function(){if(RRe)return DRe;RRe=1;const e=nMe(),t=pMe(),n=aMe();return DRe=(r,i)=>{r=new t(r,i);let o=new e("0.0.0");if(r.test(o))return o;if(o=new e("0.0.0-0"),r.test(o))return o;o=null;for(let t=0;t<r.set.length;++t){const i=r.set[t];let a=null;i.forEach(t=>{const r=new e(t.semver.version);switch(t.operator){case">":0===r.prerelease.length?r.patch++:r.prerelease.push(0),r.raw=r.format();case"":case">=":a&&!n(r,a)||(a=r);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),!a||o&&!n(o,a)||(o=a)}return o&&r.test(o)?o:null},DRe}(),M=function(){if(PRe)return MRe;PRe=1;const e=pMe();return MRe=(t,n)=>{try{return new e(t,n).range||"*"}catch(r){return null}},MRe}(),P=gMe(),F=function(){if(BRe)return jRe;BRe=1;const e=gMe();return jRe=(t,n,r)=>e(t,n,">",r),jRe}(),L=function(){if(zRe)return $Re;zRe=1;const e=gMe();return $Re=(t,n,r)=>e(t,n,"<",r),$Re}(),j=function(){if(qRe)return URe;qRe=1;const e=pMe();return URe=(t,n,r)=>(t=new e(t,r),n=new e(n,r),t.intersects(n,r)),URe}(),B=function(){if(VRe)return HRe;VRe=1;const e=mMe(),t=iMe();return HRe=(n,r,i)=>{const o=[];let a=null,s=null;const l=n.sort((e,n)=>t(e,n,i));for(const t of l)e(t,r,i)?(s=t,a||(a=t)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);const u=[];for(const[e,t]of o)e===t?u.push(e):t||e!==l[0]?t?e===l[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const c=u.join(" || "),d="string"==typeof r.raw?r.raw:String(r);return c.length<d.length?c:r},HRe}(),$=function(){if(GRe)return WRe;GRe=1;const e=pMe(),t=hMe(),{ANY:n}=t,r=mMe(),i=iMe(),o=[new t(">=0.0.0-0")],a=[new t(">=0.0.0")],s=(e,t,s)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===n){if(1===t.length&&t[0].semver===n)return!0;e=s.includePrerelease?o:a}if(1===t.length&&t[0].semver===n){if(s.includePrerelease)return!0;t=a}const c=new Set;let d,f,p,h,m,g,y;for(const n of e)">"===n.operator||">="===n.operator?d=l(d,n,s):"<"===n.operator||"<="===n.operator?f=u(f,n,s):c.add(n.semver);if(c.size>1)return null;if(d&&f){if(p=i(d.semver,f.semver,s),p>0)return null;if(0===p&&(">="!==d.operator||"<="!==f.operator))return null}for(const n of c){if(d&&!r(n,String(d),s))return null;if(f&&!r(n,String(f),s))return null;for(const e of t)if(!r(n,String(e),s))return!1;return!0}let v=!(!f||s.includePrerelease||!f.semver.prerelease.length)&&f.semver,b=!(!d||s.includePrerelease||!d.semver.prerelease.length)&&d.semver;v&&1===v.prerelease.length&&"<"===f.operator&&0===v.prerelease[0]&&(v=!1);for(const n of t){if(y=y||">"===n.operator||">="===n.operator,g=g||"<"===n.operator||"<="===n.operator,d)if(b&&n.semver.prerelease&&n.semver.prerelease.length&&n.semver.major===b.major&&n.semver.minor===b.minor&&n.semver.patch===b.patch&&(b=!1),">"===n.operator||">="===n.operator){if(h=l(d,n,s),h===n&&h!==d)return!1}else if(">="===d.operator&&!r(d.semver,String(n),s))return!1;if(f)if(v&&n.semver.prerelease&&n.semver.prerelease.length&&n.semver.major===v.major&&n.semver.minor===v.minor&&n.semver.patch===v.patch&&(v=!1),"<"===n.operator||"<="===n.operator){if(m=u(f,n,s),m===n&&m!==f)return!1}else if("<="===f.operator&&!r(f.semver,String(n),s))return!1;if(!n.operator&&(f||d)&&0!==p)return!1}return!(d&&g&&!f&&0!==p||f&&y&&!d&&0!==p||b||v)},l=(e,t,n)=>{if(!e)return t;const r=i(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},u=(e,t,n)=>{if(!e)return t;const r=i(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};return WRe=(t,n,r={})=>{if(t===n)return!0;t=new e(t,r),n=new e(n,r);let i=!1;e:for(const e of t.set){for(const t of n.set){const n=s(e,t,r);if(i=i||null!==n,n)continue e}if(i)return!1}return!0},WRe}();return YRe={parse:i,valid:o,clean:a,inc:s,diff:l,major:u,minor:c,patch:d,prerelease:f,compare:p,rcompare:h,compareLoose:m,compareBuild:g,sort:y,rsort:v,gt:b,lt:w,eq:_,neq:x,gte:E,lte:S,cmp:k,coerce:T,Comparator:C,Range:A,satisfies:I,toComparators:O,maxSatisfying:N,minSatisfying:D,minVersion:R,validRange:M,outside:P,gtr:F,ltr:L,intersects:j,simplifyRange:B,subset:$,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers}}();function vMe(e,t,n){return e.fields=t||[],e.fname=n,e}function bMe(e){return null==e?null:e.fname}function wMe(e){return null==e?null:e.fields}function _Me(e){return 1===e.length?xMe(e[0]):EMe(e)}const xMe=e=>function(t){return t[e]},EMe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function SMe(e){throw Error(e)}function kMe(e){const t=[],n=e.length;let r,i,o,a=null,s=0,l="";function u(){t.push(l+e.substring(r,i)),l="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)l+=e.substring(r,i++),r=i;else if(o===a)u(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&u(),s=r=i+1):"]"===o&&(s||SMe("Access path missing open bracket: "+e),s>0&&u(),s=0,r=i+1):i>r?u():r=i+1}return s&&SMe("Access path missing closing bracket: "+e),a&&SMe("Access path missing closing quote: "+e),i>r&&(i++,u()),t}function TMe(e,t,n){const r=kMe(e);return e=1===r.length?r[0]:e,vMe((n&&n.get||_Me)(r),[e],t||e)}const CMe=TMe("id"),AMe=vMe(e=>e,[],"identity"),IMe=vMe(()=>0,[],"zero"),OMe=vMe(()=>1,[],"one"),NMe=vMe(()=>!0,[],"true"),DMe=vMe(()=>!1,[],"false");function RMe(e,t,n){[t].concat([].slice.call(n))}function MMe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RMe,r=e||0;return{level(e){return arguments.length?(r=+e,this):r},error(){return r>=1&&n(t||"error","ERROR",arguments),this},warn(){return r>=2&&n(t||"warn","WARN",arguments),this},info(){return r>=3&&n(t||"log","INFO",arguments),this},debug(){return r>=4&&n(t||"log","DEBUG",arguments),this}}}var PMe=Array.isArray;function FMe(e){return e===Object(e)}const LMe=e=>"__proto__"!==e;function jMe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((e,t)=>{for(const n in t)if("signals"===n)e.signals=$Me(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;BMe(e,n,t[n],r)}return e},{})}function BMe(e,t,n,r){if(!LMe(t))return;let i,o;if(FMe(n)&&!PMe(n))for(i in o=FMe(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?BMe(o,i,n[i]):LMe(i)&&(o[i]=n[i]);else e[t]=n}function $Me(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function zMe(e){return e[e.length-1]}function UMe(e){return null==e||""===e?null:+e}const qMe=e=>t=>e*Math.exp(t),HMe=e=>t=>Math.log(e*t),VMe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),WMe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,GMe=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function YMe(e,t,n,r){const i=n(e[0]),o=n(zMe(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function KMe(e,t){return YMe(e,t,UMe,AMe)}function ZMe(e,t){var n=Math.sign(e[0]);return YMe(e,t,HMe(n),qMe(n))}function QMe(e,t,n){return YMe(e,t,GMe(n),GMe(1/n))}function XMe(e,t,n){return YMe(e,t,VMe(n),WMe(n))}function JMe(e,t,n,r,i){const o=r(e[0]),a=r(zMe(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function ePe(e,t,n){return JMe(e,t,n,UMe,AMe)}function tPe(e,t,n){const r=Math.sign(e[0]);return JMe(e,t,n,HMe(r),qMe(r))}function nPe(e,t,n,r){return JMe(e,t,n,GMe(r),GMe(1/r))}function rPe(e,t,n,r){return JMe(e,t,n,VMe(r),WMe(r))}function iPe(e){return 1+~~(new Date(e).getMonth()/3)}function oPe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function aPe(e){return null!=e?PMe(e)?e:[e]:[]}function sPe(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function lPe(e){return"function"==typeof e}function uPe(e,t,n){n=n||{},t=aPe(t)||[];const r=[],i=[],o={},a=n.comparator||dPe;return aPe(e).forEach((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=lPe(e)?e:TMe(e,null,n)),(wMe(e)||[]).forEach(e=>o[e]=1))}),0===i.length?null:vMe(a(i,r),Object.keys(o))}const cPe=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),dPe=(e,t)=>1===e.length?fPe(e[0],t[0]):pPe(e,t,e.length),fPe=(e,t)=>function(n,r){return cPe(e(n),e(r))*t},pPe=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=cPe(o(r),o(i));return a*t[s]});function hPe(e){return lPe(e)?e:()=>e}function mPe(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gPe(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function yPe(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function vPe(e,t){const n=e.length;let r,i,o,a,s,l=-1;if(null==t){for(;++l<n;)if(i=e[l],null!=i&&i>=i){r=o=i;break}if(l===n)return[-1,-1];for(a=s=l;++l<n;)i=e[l],null!=i&&(r>i&&(r=i,a=l),o<i&&(o=i,s=l))}else{for(;++l<n;)if(i=t(e[l],l,e),null!=i&&i>=i){r=o=i;break}if(l===n)return[-1,-1];for(a=s=l;++l<n;)i=t(e[l],l,e),null!=i&&(r>i&&(r=i,a=l),o<i&&(o=i,s=l))}return[a,s]}function bPe(e,t){return Object.hasOwn(e,t)}const wPe={};function _Pe(e){let t,n={};function r(e){return bPe(n,e)&&n[e]!==wPe}const i={size:0,empty:0,object:n,has:r,get:e=>r(e)?n[e]:void 0,set(e,t){return r(e)||(++i.size,n[e]===wPe&&--i.empty),n[e]=t,this},delete(e){return r(e)&&(--i.size,++i.empty,n[e]=wPe),this},clear(){i.size=i.empty=0,i.object=n={}},test(e){return arguments.length?(t=e,i):t},clean(){const e={};let r=0;for(const i in n){const o=n[i];o===wPe||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach(t=>{i.set(t,e[t])}),i}function xPe(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,l=e[0],u=zMe(e);u<l&&(s=l,l=u,u=s),s=Math.abs(t-l);const c=Math.abs(u-t);return s<c&&s<=a?r:c<=a?i:o}function EPe(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gPe(r,n)}function SPe(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function kPe(e){return"boolean"==typeof e}function TPe(e){return"[object Date]"===Object.prototype.toString.call(e)}function CPe(e){return e&&lPe(e[Symbol.iterator])}function APe(e){return"number"==typeof e}function IPe(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function OPe(e){return"string"==typeof e}function NPe(e,t,n){e&&(e=t?aPe(e).map(e=>e.replace(/\\(.)/g,"$1")):aPe(e));const r=e&&e.length,i=n&&n.get||_Me,o=e=>i(t?[e]:kMe(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return vMe(a,e,"key")}function DPe(e,t){const n=e[0],r=zMe(e),i=+t;return i?1===i?r:n+i*(r-n):n}function RPe(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>bPe(t,e)||bPe(n,e),get:e=>bPe(t,e)?t[e]:bPe(n,e)?o(e,n[e]):void 0,set:(e,n)=>bPe(t,e)?t[e]=n:o(e,n)}}function MPe(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,l=0,u=0;for(;s<i&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<i;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function PPe(e,t){let n="";for(;--t>=0;)n+=e;return n}function FPe(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?PPe(i,a)+o:"center"===r?PPe(i,~~(a/2))+o+PPe(i,Math.ceil(a/2)):o+PPe(i,a)}function LPe(e){return e&&zMe(e)-e[0]||0}function jPe(e){return PMe(e)?"["+e.map(jPe)+"]":FMe(e)||OPe(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function BPe(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const $Pe=e=>APe(e)||TPe(e)?e:Date.parse(e);function zPe(e,t){return t=t||$Pe,null==e||""===e?null:t(e)}function UPe(e){return null==e||""===e?null:e+""}function qPe(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function HPe(e,t,n,r){const i=null!=r?r:"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function VPe(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}function WPe(e){return e}function GPe(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return YPe(e,t)})}:YPe(e,t)}function YPe(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=KPe(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function KPe(e,t){var n=function(e){if(null==e)return WPe;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var l=2,u=e.length,c=new Array(u);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;l<u;)c[l]=e[l],++l;return c}}(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(t)}function ZPe(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach(function(e){n[e<0?~e:e]=1}),o.push(i)}}return t.forEach(function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)}),t.forEach(function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],l=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=l,o=r[l]){delete r[o.start];var u=o===n?n:n.concat(o);r[u.start=n.start]=i[u.end=o.end]=u}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=l]=n}),s(i,r),s(r,i),t.forEach(function(e){n[e<0?~e:e]||o.push([e])}),o}function QPe(e){return KPe(e,XPe.apply(this,arguments))}function XPe(e,t,n){var r,i,o;if(arguments.length>1)r=function(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function l(e){e.forEach(s)}function u(e){e.forEach(l)}function c(e){switch(r=e,e.type){case"GeometryCollection":e.geometries.forEach(c);break;case"LineString":s(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":u(e.arcs)}}return c(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}(0,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:ZPe(e,r)}}const JPe="year",eFe="quarter",tFe="month",nFe="week",rFe="date",iFe="day",oFe="dayofyear",aFe="hours",sFe="minutes",lFe="seconds",uFe="milliseconds",cFe=[JPe,eFe,tFe,nFe,rFe,iFe,oFe,aFe,sFe,lFe,uFe],dFe=cFe.reduce((e,t,n)=>(e[t]=1+n,e),{});function fFe(e){const t=aPe(e).slice(),n={};t.length||SMe("Missing time unit."),t.forEach(e=>{bPe(dFe,e)?n[e]=1:SMe(`Invalid time unit: ${e}.`)});return(n[nFe]||n[iFe]?1:0)+(n[eFe]||n[tFe]||n[rFe]?1:0)+(n[oFe]?1:0)>1&&SMe(`Incompatible time units: ${e}`),t.sort((e,t)=>dFe[e]-dFe[t]),t}const pFe={[JPe]:"%Y ",[eFe]:"Q%q ",[tFe]:"%b ",[rFe]:"%d ",[nFe]:"W%U ",[iFe]:"%a ",[oFe]:"%j ",[aFe]:"%H:00",[sFe]:"00:%M",[lFe]:":%S",[uFe]:".%L",[`${JPe}-${tFe}`]:"%Y-%m ",[`${JPe}-${tFe}-${rFe}`]:"%Y-%m-%d ",[`${aFe}-${sFe}`]:"%H:%M"};function hFe(e,t){const n=gPe({},pFe,t),r=fFe(e),i=r.length;let o,a,s="",l=0;for(l=0;l<i;)for(o=r.length;o>l;--o)if(a=r.slice(l,o).join("-"),null!=n[a]){s+=n[a],l=o;break}return s.trim()}const mFe=new Date;function gFe(e){return mFe.setFullYear(e),mFe.setMonth(0),mFe.setDate(1),mFe.setHours(0,0,0,0),mFe}function yFe(e){return bFe(new Date(e))}function vFe(e){return wFe(new Date(e))}function bFe(e){return v3.count(gFe(e.getFullYear())-1,e)}function wFe(e){return x3.count(gFe(e.getFullYear())-1,e)}function _Fe(e){return gFe(e).getDay()}function xFe(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function EFe(e){return kFe(new Date(e))}function SFe(e){return TFe(new Date(e))}function kFe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return b3.count(t-1,e)}function TFe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return O3.count(t-1,e)}function CFe(e){return mFe.setTime(Date.UTC(e,0,1)),mFe.getUTCDay()}function AFe(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function IFe(e,t,n,r,i){const o=t||1,a=zMe(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),l=new Date,u=qPe(e),c=u[JPe]?s(JPe):hPe(2012),d=u[tFe]?s(tFe):u[eFe]?s(eFe):IMe,f=u[nFe]&&u[iFe]?s(iFe,1,nFe+iFe):u[nFe]?s(nFe,1):u[iFe]?s(iFe,1):u[rFe]?s(rFe,1):u[oFe]?s(oFe,1):OMe,p=u[aFe]?s(aFe):IMe,h=u[sFe]?s(sFe):IMe,m=u[lFe]?s(lFe):IMe,g=u[uFe]?s(uFe):IMe;return function(e){l.setTime(+e);const t=c(l);return i(t,d(l),f(l,t),p(l),h(l),m(l),g(l))}}function OFe(e,t,n){return t+7*e-(n+6)%7}const NFe={[JPe]:e=>e.getFullYear(),[eFe]:e=>Math.floor(e.getMonth()/3),[tFe]:e=>e.getMonth(),[rFe]:e=>e.getDate(),[aFe]:e=>e.getHours(),[sFe]:e=>e.getMinutes(),[lFe]:e=>e.getSeconds(),[uFe]:e=>e.getMilliseconds(),[oFe]:e=>bFe(e),[nFe]:e=>wFe(e),[nFe+iFe]:(e,t)=>OFe(wFe(e),e.getDay(),_Fe(t)),[iFe]:(e,t)=>OFe(1,e.getDay(),_Fe(t))},DFe={[eFe]:e=>3*e,[nFe]:(e,t)=>OFe(e,0,_Fe(t))};function RFe(e,t){return IFe(e,t||1,NFe,DFe,xFe)}const MFe={[JPe]:e=>e.getUTCFullYear(),[eFe]:e=>Math.floor(e.getUTCMonth()/3),[tFe]:e=>e.getUTCMonth(),[rFe]:e=>e.getUTCDate(),[aFe]:e=>e.getUTCHours(),[sFe]:e=>e.getUTCMinutes(),[lFe]:e=>e.getUTCSeconds(),[uFe]:e=>e.getUTCMilliseconds(),[oFe]:e=>kFe(e),[nFe]:e=>TFe(e),[iFe]:(e,t)=>OFe(1,e.getUTCDay(),CFe(t)),[nFe+iFe]:(e,t)=>OFe(TFe(e),e.getUTCDay(),CFe(t))},PFe={[eFe]:e=>3*e,[nFe]:(e,t)=>OFe(e,0,CFe(t))};function FFe(e,t){return IFe(e,t||1,MFe,PFe,AFe)}const LFe={[JPe]:B3,[eFe]:L3.every(3),[tFe]:L3,[nFe]:x3,[rFe]:v3,[iFe]:v3,[oFe]:v3,[aFe]:g3,[sFe]:h3,[lFe]:p3,[uFe]:o3},jFe={[JPe]:$3,[eFe]:j3.every(3),[tFe]:j3,[nFe]:O3,[rFe]:b3,[iFe]:b3,[oFe]:b3,[aFe]:y3,[sFe]:m3,[lFe]:p3,[uFe]:o3};function BFe(e){return LFe[e]}function $Fe(e){return jFe[e]}function zFe(e,t,n){return e?e.offset(t,n):void 0}function UFe(e,t,n){return zFe(BFe(e),t,n)}function qFe(e,t,n){return zFe($Fe(e),t,n)}function HFe(e,t,n,r){return e?e.range(t,n,r):void 0}function VFe(e,t,n,r){return HFe(BFe(e),t,n,r)}function WFe(e,t,n,r){return HFe($Fe(e),t,n,r)}const GFe=1e3,YFe=6e4,KFe=36e5,ZFe=864e5,QFe=2592e6,XFe=31536e6,JFe=[JPe,tFe,rFe,aFe,sFe,lFe,uFe],eLe=JFe.slice(0,-1),tLe=eLe.slice(0,-1),nLe=tLe.slice(0,-1),rLe=nLe.slice(0,-1),iLe=[JPe,tFe],oLe=[JPe],aLe=[[eLe,1,GFe],[eLe,5,5e3],[eLe,15,15e3],[eLe,30,3e4],[tLe,1,YFe],[tLe,5,3e5],[tLe,15,9e5],[tLe,30,18e5],[nLe,1,KFe],[nLe,3,108e5],[nLe,6,216e5],[nLe,12,432e5],[rLe,1,ZFe],[[JPe,nFe],1,6048e5],[iLe,1,QFe],[iLe,3,7776e6],[oLe,1,XFe]];function sLe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(LPe(t))/n;let i,o,a=q3(e=>e[2]).right(aLe,r);return a===aLe.length?(i=oLe,o=u4(t[0]/XFe,t[1]/XFe,n)):a?(a=aLe[r/aLe[a-1][2]<aLe[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=JFe,o=Math.max(u4(t[0],t[1],n),1)),{units:i,step:o}}function lLe(e){const t={};return n=>t[n]||(t[n]=e(n))}function uLe(e){const t=lLe(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(e){const n=$2(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan(e,r,i,o){o=$2(null==o?",f":o);const a=u4(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let l;if(null==o.precision)switch(o.type){case"s":return isNaN(l=X2(a,s))||(o.precision=l),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(l=J2(a,s))||(o.precision=l-("e"===o.type));break;case"f":case"%":isNaN(l=Q2(a))||(o.precision=l-2*("%"===o.type))}return t(o)}}}let cLe,dLe;function fLe(){return cLe=uLe({format:W2,formatPrefix:G2})}function pLe(e){return uLe(Z2(e))}function hLe(e){return arguments.length?cLe=pLe(e):cLe}function mLe(e,t,n){FMe(n=n||{})||SMe(`Invalid time multi-format specifier: ${n}`);const r=t(lFe),i=t(sFe),o=t(aFe),a=t(rFe),s=t(nFe),l=t(tFe),u=t(eFe),c=t(JPe),d=e(n[uFe]||".%L"),f=e(n[lFe]||":%S"),p=e(n[sFe]||"%I:%M"),h=e(n[aFe]||"%I %p"),m=e(n[rFe]||n[iFe]||"%a %d"),g=e(n[nFe]||"%b %d"),y=e(n[tFe]||"%B"),v=e(n[eFe]||"%B"),b=e(n[JPe]||"%Y");return e=>(r(e)<e?d:i(e)<e?f:o(e)<e?p:a(e)<e?h:l(e)<e?s(e)<e?m:g:c(e)<e?u(e)<e?y:v:b)(e)}function gLe(e){const t=lLe(e.format),n=lLe(e.utcFormat);return{timeFormat:e=>OPe(e)?t(e):mLe(t,BFe,e),utcFormat:e=>OPe(e)?n(e):mLe(n,$Fe,e),timeParse:lLe(e.parse),utcParse:lLe(e.utcParse)}}function yLe(){return dLe=gLe({format:N4,parse:D4,utcFormat:R4,utcParse:M4})}function vLe(e){return gLe(I4(e))}function bLe(e){return arguments.length?dLe=vLe(e):dLe}fLe(),yLe();const wLe=(e,t)=>gPe({},e,t);function _Le(e,t){const n=e?pLe(e):hLe(),r=t?vLe(t):bLe();return wLe(n,r)}function xLe(e,t){const n=arguments.length;return n&&2!==n&&SMe("defaultLocale expects either zero or two arguments."),n?wLe(hLe(e),bLe(t)):wLe(hLe(),bLe())}const ELe=/^(data:|([A-Za-z]+:)?\/\/)/,SLe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,kLe=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,TLe="file://";async function CLe(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function ALe(e,t){t=gPe({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=SLe.test(e.replace(kLe,""));null!=e&&"string"==typeof e&&s||SMe("Sanitize failure, invalid URI: "+jPe(e));const l=ELe.test(e);return(a=t.baseURL)&&!l&&(e.startsWith("/")||a.endsWith("/")||(e="/"+e),e=a+e),o=(i=e.startsWith(TLe))||"file"===t.mode||"http"!==t.mode&&!l&&n,i?e=e.slice(7):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function ILe(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(e,t)=>{e?r(e):n(t)})}):OLe}async function OLe(){SMe("No file system access.")}function NLe(e){return e?async function(t,n){const r=gPe({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?lPe(o[i])?o[i]():o.text():SMe(o.status+""+o.statusText)}:DLe}async function DLe(){SMe("No HTTP fetch method available.")}const RLe=e=>null!=e&&e==e,MLe=e=>!(Number.isNaN(+e)||e instanceof Date),PLe={boolean:BPe,integer:UMe,number:UMe,date:zPe,string:UPe,unknown:AMe},FLe=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>MLe(e)&&Number.isInteger(+e),MLe,e=>!Number.isNaN(Date.parse(e))],LLe=["boolean","integer","number","date"];function jLe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=FLe.length,i=FLe.map((e,t)=>t+1);for(let o,a,s=0,l=0;s<n;++s)for(a=t?e[s][t]:e[s],o=0;o<r;++o)if(i[o]&&RLe(a)&&!FLe[o](a)&&(i[o]=0,++l,l===FLe.length))return"string";return LLe[i.reduce((e,t)=>0===e?t:e,0)-1]}function BLe(e,t){return t.reduce((t,n)=>(t[n]=jLe(e,n),t),{})}function $Le(e){const t=function(t,n){const r={delimiter:e};return zLe(t,n?gPe(n,r):r)};return t.responseType="text",t}function zLe(e,t){return t.header&&(e=t.header.map(jPe).join(t.delimiter)+"\n"+e),See(t.delimiter).parse(e+"")}function ULe(e,t){const n=t&&t.property?TMe(t.property):AMe;return!FMe(e)||(r=e,"function"==typeof Buffer&&lPe(Buffer.isBuffer)&&Buffer.isBuffer(r))?n(JSON.parse(e)):function(e,t){!PMe(e)&&CPe(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}zLe.responseType="text",ULe.responseType="json";const qLe={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function HLe(e,t){let n,r,i,o;return e=ULe(e,t),t&&t.feature?(n=GPe,i=t.feature):t&&t.mesh?(n=QPe,i=t.mesh,o=qLe[t.filter]):SMe("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):SMe("Invalid TopoJSON object: "+i),r&&r.features||[r]}HLe.responseType="json";const VLe={dsv:zLe,csv:$Le(","),tsv:$Le("\t"),json:ULe,topojson:HLe};function WLe(e,t){return arguments.length>1?(VLe[e]=t,this):bPe(VLe,e)?VLe[e]:null}function GLe(e){const t=WLe(e);return t&&t.responseType||"text"}function YLe(e,t,n,r){const i=WLe((t=t||{}).type||"json");return i||SMe("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=bLe();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,l,u,c,d=e.columns||Object.keys(e[0]);"auto"===t&&(t=BLe(e,d));d=Object.keys(t);const f=d.map(e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!PLe[i])throw Error("Illegal format pattern: "+e+":"+i);return PLe[i]});for(s=0,u=e.length,c=d.length;s<u;++s)for(o=e[s],l=0;l<c;++l)a=d[l],o[a]=f[l](o[a])}(e,t.parse,n,r),bPe(e,"columns")&&delete e.columns,e}const KLe=(ZLe="undefined"!=typeof fetch&&fetch,QLe=null,e=>({options:e||{},sanitize:ALe,load:CLe,fileAccess:!1,file:ILe(QLe),http:NLe(ZLe)}));var ZLe,QLe;function XLe(e){const t=e||AMe,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function JLe(e,t){try{await t(e)}catch(HOt){e.error(HOt)}}const eje=Symbol("vega_id");let tje=1;function nje(e){return!(!e||!rje(e))}function rje(e){return e[eje]}function ije(e,t){return e[eje]=t,e}function oje(e){const t=e===Object(e)?e:{data:e};return rje(t)?t:ije(t,tje++)}function aje(e){return sje(e,oje({}))}function sje(e,t){for(const n in e)t[n]=e[n];return t}function lje(e,t){return ije(t,rje(e))}function uje(e,t){return e?t?(n,r)=>e(n,r)||rje(t(n))-rje(t(r)):(t,n)=>e(t,n)||rje(t)-rje(n):null}function cje(e){return e&&e.constructor===dje}function dje(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:dje,insert(t){const n=aPe(t),r=n.length;for(let i=0;i<r;++i)e.push(n[i]);return this},remove(e){const n=lPe(e)?r:t,i=aPe(e),o=i.length;for(let t=0;t<o;++t)n.push(i[t]);return this},modify(e,t,r){const o={field:t,value:hPe(r)};return lPe(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode(e,t){return lPe(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean(e){return o=e,this},reflow(){return a=!0,this},pulse(s,l){const u={},c={};let d,f,p,h,m,g;for(d=0,f=l.length;d<f;++d)u[rje(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[rje(m)]=-1;for(d=0,f=r.length;d<f;++d)h=r[d],l.forEach(e=>{h(e)&&(u[rje(e)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=rje(m),u[g]?u[g]=1:s.add.push(oje(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[rje(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[rje(e)]=e)}for(d=0,f=n.length;d<f;++d)p=n[d],m=p.tuple,h=p.field,g=u[rje(m)],g>0&&(y(m,h,p.value),s.modifies(h));for(d=0,f=i.length;d<f;++d)p=i[d],h=p.filter,l.forEach(e=>{h(e)&&u[rje(e)]>0&&y(e,p.field,p.value)}),s.modifies(p.field);if(a)s.mod=t.length||r.length?l.filter(e=>u[rje(e)]>0):l.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const fje="_:mod:_";function pje(){Object.defineProperty(this,fje,{writable:!0,value:{}})}pje.prototype={set(e,t,n,r){const i=this,o=i[e],a=i[fje];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=PMe(n)?1+n.length:-1),i},modified(e,t){const n=this[fje];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(PMe(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[fje]={},this}};let hje=0;const mje=new pje;function gje(e,t,n,r){this.id=++hje,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function yje(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}gje.prototype={targets(){return this._targets||(this._targets=XLe(CMe))},set(e){return this.value!==e?(this.value=e,1):0},skip:yje(1),modified:yje(2),parameters(e,t,n){t=!1!==t;const r=this._argval=this._argval||new pje,i=this._argops=this._argops||[],o=[];let a,s,l,u;const c=(e,n,a)=>{a instanceof gje?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)aPe(s).forEach(e=>{e instanceof gje?e!==this&&(e.targets().add(this),o.push(e)):SMe("Pulse parameters must be operator instances.")}),this.source=s;else if(PMe(s))for(r.set(a,-1,Array(l=s.length)),u=0;u<l;++u)c(a,u,s[u]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||mje,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let vje=0;function bje(e,t,n){this.id=++vje,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function wje(e,t,n){return new bje(e,t,n)}bje.prototype={_filter:NMe,_apply:AMe,targets(){return this._targets||(this._targets=XLe(CMe))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=wje(e);return this.targets().add(t),t},apply(e){const t=wje(null,e);return this.targets().add(t),t},merge(){const e=wje();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=wje();return this.targets().add(wje(null,null,mPe(e,e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()}))),t},between(e,t){let n=!1;return e.targets().add(wje(null,null,()=>n=!0)),t.targets().add(wje(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=NMe,this._targets=null}};const _je={skip:!0};function xje(e,t,n,r,i,o){const a=gPe({},o,_je);let s,l;lPe(n)||(n=hPe(n)),void 0===r?s=t=>e.touch(n(t)):lPe(r)?(l=new gje(null,r,i,!1),s=t=>{l.evaluate(t);const r=n(t),i=l.value;cje(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function Eje(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new gje(null,function(e,t){return t=lPe(t)?t:hPe(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const Sje={};function kje(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Tje(e,t){const n=[];return VPe(e,t,e=>n.push(e)),n}function Cje(e,t){const n={};return e.visit(t,e=>{n[rje(e)]=1}),e=>n[rje(e)]?null:e}function Aje(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function Ije(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const e=i.fields||(i.fields={});for(const t in a.fields)e[t]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}function Oje(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}kje.prototype={StopPropagation:Sje,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(e){return new kje(this.dataflow).init(this,e)},clone(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new kje(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,Cje(this,1))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return PMe(e)?e.forEach(e=>t[e]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?PMe(e)?e.some(e=>n[e]):n[e]:!!n)},filter(e,t){const n=this;return 1&e&&(n.addF=Aje(n.addF,t)),2&e&&(n.remF=Aje(n.remF,t)),4&e&&(n.modF=Aje(n.modF,t)),16&e&&(n.srcF=Aje(n.srcF,t)),n},materialize(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=Tje(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=Tje(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=Tje(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(16&e)return VPe(n.source,n.srcF,r),n;1&e&&VPe(n.add,n.addF,r),2&e&&VPe(n.rem,n.remF,r),4&e&&VPe(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||VPe(i,e?Cje(n,5):n.srcF,r)}return n}},EPe(Ije,kje,{fork(e){const t=new kje(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,e=>t.add.push(e)),e&t.REM&&this.visit(t.REM,e=>t.rem.push(e)),e&t.MOD&&this.visit(t.MOD,e=>t.mod.push(e))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?PMe(e)?e.some(e=>n[e]):n[e]:0},filter(){SMe("MultiPulse does not support filtering.")},materialize(){SMe("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const Nje={skip:!1,force:!1};function Dje(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Rje(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,Rje(e,r,t,n)}(t,0,e)):r=n,r}}}function Rje(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function Mje(){this.logger(MMe()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=xLe();try{this._loader=KLe()}catch(F0){}this._touched=XLe(CMe),this._input={},this._pulse=null,this._heap=Dje((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Pje(e){return function(){return this._log[e].apply(this,arguments)}}function Fje(e,t){gje.call(this,e,null,t)}Mje.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Pje("error"),warn:Pje("warn"),info:Pje("info"),debug:Pje("debug"),logLevel:Pje("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof gje?i=e:e&&e.prototype instanceof gje?i=new e:lPe(e)?i=new gje(null,e):(o=0,i=new gje(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&SMe("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||Nje);const r=new kje(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||Nje;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||Nje;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:dje,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return YLe(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise(e=>t=e);return n.requests=0,n.done=()=>{0===--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(NMe).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:GLe(t&&t.type)});try{r=n.parse(r,t)}catch(HOt){i=-2,n.warn("Data ingestion failed",e,HOt)}}catch(HOt){i=-1,n.warn("Loading failed",e,HOt)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=wje(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(t){i.error(t)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):aPe(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof gje?Eje:xje)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return Oje(r);if(r._pending&&await r._pending,t&&await JLe(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new kje(r,o,e),r._touched.forEach(e=>r._enqueue(e,!0)),r._touched=XLe(CMe);let a,s,l,u=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=Sje),s!==Sje&&a._targets&&a._targets.forEach(e=>r._enqueue(e)),++u):r._enqueue(a,!0)}catch(HOt){r._heap.clear(),l=HOt}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${u} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const e=r._postrun.sort((e,t)=>t.priority-e.priority);r._postrun=[];for(let t=0;t<e.length;++t)await JLe(r,e[t].callback)}return n&&await JLe(r,n),i.length&&Promise.all(i).then(e=>r.runAsync(null,()=>{e.forEach(e=>{try{e(r)}catch(HOt){r.error(HOt)}})})),r},run:function(e,t,n){return this._pulse?Oje(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(HOt){this.error(HOt)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&PMe(n)?new Ije(this,r,n.map(e=>e.pulse),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==Sje&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},EPe(Fje,gje,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(e=>this.pulse=e):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Lje={};function jje(e){const t=Bje(e);return t&&t.Definition||null}function Bje(e){return e=e&&e.toLowerCase(),bPe(Lje,e)?Lje[e]:null}function*$je(e,t){if(null==t)for(let n of e)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function zje(e,t,n){const r=Float64Array.from($je(e,n));return r.sort(z3),t.map(e=>m4(r,e))}function Uje(e,t){return zje(e,[.25,.5,.75],t)}function qje(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let a of e)null!=a&&(a=+a)>=a&&(n=a-i,i+=n/++r,o+=n*(a-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=Uje(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Hje(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,l,u,c,d=e.extent[0],f=e.extent[1];const p=e.span||f-d||Math.abs(d)||1;if(e.step)o=e.step;else if(e.steps){for(l=p/t,u=0,c=e.steps.length;u<c&&e.steps[u]<l;++u);o=e.steps[Math.max(0,u-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(p)/r)-a));Math.ceil(p/o)>t;)o*=n;for(u=0,c=i.length;u<c;++u)l=o/i[u],l>=s&&p/l<=t&&(o=l)}l=Math.log(o);const h=l>=0?0:1+~~(-l/r),m=Math.pow(n,-h-1);return(e.nice||void 0===e.nice)&&(l=Math.floor(d/o+m)*o,d=d<l?l-o:l,f=Math.ceil(f/o)*o),{start:d,stop:f===d?d+o:f,step:o}}var Vje=Math.random;function Wje(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from($je(e,r)),o=i.length,a=t;let s,l,u,c;for(u=0,c=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=i[~~(Vje()*o)];c[u]=s/o}return c.sort(z3),[h4(c,n/2),h4(c,1-n/2)]}function Gje(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,l=1,u=r(e[0]),c=u,d=u+t;for(;l<i;++l){if(a=r(e[l]),a>=d){for(c=(u+c)/2;s<l;++s)o[s]=c;d=a+t,u=a}c=a}for(c=(u+c)/2;s<l;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}const Yje=Math.sqrt(2*Math.PI),Kje=Math.SQRT2;let Zje=NaN;function Qje(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(Zje==Zje)i=Zje,Zje=NaN;else{do{i=2*Vje()-1,o=2*Vje()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,Zje=o*r}return e+i*t}function Xje(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*Yje)}function Jje(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function eBe(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*Kje*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function tBe(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>Qje(n,r),pdf:e=>Xje(e,n,r),cdf:e=>Jje(e,n,r),icdf:e=>eBe(e,n,r)};return i.mean(e).stdev(t)}function nBe(e,t){const n=tBe();let r=0;const i={data(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth(n){return arguments.length?(!(t=n)&&e&&(t=qje(e)),i):t},sample:()=>e[~~(Vje()*r)]+t*n.sample(),pdf(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function rBe(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+Qje()*t)}function iBe(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Yje*e)}function oBe(e,t,n){return Jje(Math.log(e),t,n)}function aBe(e,t,n){return Math.exp(eBe(e,t,n))}function sBe(e,t){let n,r;const i={mean(e){return arguments.length?(n=e||0,i):n},stdev(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>rBe(n,r),pdf:e=>iBe(e,n,r),cdf:e=>oBe(e,n,r),icdf:e=>aBe(e,n,r)};return i.mean(e).stdev(t)}function lBe(e,t){let n,r=0;const i={weights(e){return arguments.length?(n=function(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}(t=e||[]),i):t},distributions(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),i.weights(t)):e},sample(){const t=Vje();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf(){throw Error("Mixture icdf not supported.")}};return i.distributions(e).weights(t)}function uBe(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*Vje()}function cBe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function dBe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function fBe(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function pBe(e,t){let n,r;const i={min(e){return arguments.length?(n=e||0,i):n},max(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>uBe(n,r),pdf:e=>cBe(e,n,r),cdf:e=>dBe(e,n,r),icdf:e=>fBe(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function hBe(e,t,n){let r=0,i=0;for(const o of e){const e=n(o);null==t(o)||null==e||isNaN(e)||(r+=(e-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function mBe(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function gBe(e,t,n,r){e=e.filter(e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i}),r&&e.sort((e,n)=>t(e)-t(n));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,l,u,c=0,d=0,f=0;for(u of e)o[c]=s=+t(u),a[c]=l=+n(u),++c,d+=(s-d)/c,f+=(l-f)/c;for(c=0;c<i;++c)o[c]-=d,a[c]-=f;return[o,a,d,f]}function yBe(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function vBe(e,t,n,r,i){let o=0,a=0;return yBe(e,t,n,(e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s}),1-o/a}function bBe(e,t,n){let r=0,i=0,o=0,a=0,s=0;yBe(e,t,n,(e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s});const l=mBe(r,i,o,a),u=e=>l[0]+l[1]*e;return{coef:l,predict:u,rSquared:vBe(e,t,n,i,u)}}function wBe(e,t,n){let r=0,i=0,o=0,a=0,s=0;yBe(e,t,n,(e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s});const l=mBe(r,i,o,a),u=e=>l[0]+l[1]*Math.log(e);return{coef:l,predict:u,rSquared:vBe(e,t,n,i,u)}}function _Be(e,t,n){const[r,i,o,a]=gBe(e,t,n);let s,l,u,c=0,d=0,f=0,p=0,h=0;yBe(e,t,n,(e,t)=>{s=r[h++],l=Math.log(t),u=s*t,c+=(t*l-c)/h,d+=(u-d)/h,f+=(u*l-f)/h,p+=(s*u-p)/h});const[m,g]=mBe(d/a,c/a,f/a,p/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:vBe(e,t,n,a,y)}}function xBe(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0;yBe(e,t,n,(e,t)=>{const n=Math.log(e),u=Math.log(t);++l,r+=(n-r)/l,i+=(u-i)/l,o+=(n*u-o)/l,a+=(n*n-a)/l,s+=(t-s)/l});const u=mBe(r,i,o,a),c=e=>u[0]*Math.pow(e,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:vBe(e,t,n,s,c)}}function EBe(e,t,n){const[r,i,o,a]=gBe(e,t,n),s=r.length;let l,u,c,d,f=0,p=0,h=0,m=0,g=0;for(l=0;l<s;)u=r[l],c=i[l++],d=u*u,f+=(d-f)/l,p+=(d*u-p)/l,h+=(d*d-h)/l,m+=(u*c-m)/l,g+=(d*c-g)/l;const y=h-f*f,v=f*y-p*p,b=(g*f-m*p)/v,w=(m*y-g*p)/v,_=-b*f,x=e=>b*(e-=o)*e+w*e+_+a;return{coef:[_-w*o+b*o*o+a,w-2*b*o,b],predict:x,rSquared:vBe(e,t,n,a,x)}}function SBe(e,t,n,r){if(0===r)return hBe(e,t,n);if(1===r)return bBe(e,t,n);if(2===r)return EBe(e,t,n);const[i,o,a,s]=gBe(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,p,h,m,g;for(f=0;f<d;++f){for(h=0,m=0;h<l;++h)m+=Math.pow(i[h],f)*o[h];for(u.push(m),g=new Float64Array(d),p=0;p<d;++p){for(h=0,m=0;h<l;++h)m+=Math.pow(i[h],f+p);g[p]=m}c.push(g)}c.push(u);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(f=3;f<d;++f)t+=y[f]*Math.pow(e,f);return t};return{coef:kBe(d,y,-a,s),predict:v,rSquared:vBe(e,t,n,s,v)}}function kBe(e,t,n,r){const i=Array(e);let o,a,s,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,i[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*l;return i[0]+=r,i}function TBe(e,t,n,r){const[i,o,a,s]=gBe(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let p=-1;++p<=2;){const e=[0,u-1];for(let n=0;n<l;++n){const t=i[n],r=e[0],a=e[1],s=t-i[r]>i[a]-t?r:a;let l=0,u=0,p=0,h=0,m=0;const g=1/Math.abs(i[s]-t||1);for(let e=r;e<=a;++e){const n=i[e],r=o[e],a=CBe(Math.abs(t-n)*g)*f[e],s=n*a;l+=a,u+=s,p+=r*a,h+=r*s,m+=n*s}const[y,v]=mBe(u/l,p/l,h/l,m/l);c[n]=y+v*t,d[n]=Math.abs(o[n]-c[n]),ABe(i,n+1,e)}if(2===p)break;const t=g4(d);if(Math.abs(t)<1e-12)break;for(let n,r,i=0;i<l;++i)n=d[i]/(6*t),f[i]=n>=1?1e-12:(r=1-n*n)*r}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,l=0,u=[];for(;s<i;++s)a=e[s]+n,u[0]===a?u[1]+=(t[s]-u[1])/++l:(l=0,u[1]+=r,u=[a,t[s]],o.push(u));return u[1]+=r,o}(i,c,a,s)}function CBe(e){return(e=1-e*e*e)*e*e}function ABe(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const IBe=.5*Math.PI/180;function OBe(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,l=s/r,u=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)u.push(i(o+e/n*s));return u.push(i(a)),u}c.push(i(a));for(let m=n;--m>0;)c.push(i(o+m/n*s));let d=u[0],f=c[c.length-1];const p=1/s,h=function(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const e=t[o][1];e<n&&(n=e),e>r&&(r=e)}return 1/(r-n)}(d[1],c);for(;f;){const e=i((d[0]+f[0])/2);e[0]-d[0]>=l&&NBe(d,e,f,p,h)>IBe?c.push(e):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function NBe(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function DBe(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function RBe(e,t,n){return n||e+(t?"_"+t:"")}const MBe=()=>{},PBe={init:MBe,add:MBe,rem:MBe,idx:0},FBe={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},LBe=Object.keys(FBe).filter(e=>"__count__"!==e);function jBe(e,t,n){return FBe[e](n,t)}function BBe(e,t){return e.idx-t.idx}function $Be(){this.valid=0,this.missing=0,this._ops.forEach(e=>null==e.aggregate_param?e.init(this):e.init(this,e.aggregate_param))}function zBe(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t))):++this.missing}function UBe(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t))):--this.missing}function qBe(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function HBe(e,t){const n=t||AMe,r=function(e){const t={};e.forEach(e=>t[e.name]=e);const n=e=>{e.req&&e.req.forEach(e=>{t[e]||n(t[e]=FBe[e]())})};return e.forEach(n),Object.values(t).sort(BBe)}(e),i=e.slice().sort(BBe);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=$Be,o.prototype.add=zBe,o.prototype.rem=UBe,o.prototype.set=qBe,o.prototype.get=n,o.fields=e.map(e=>e.out),o}function VBe(e){this._key=e?TMe(e):rje,this.reset()}[...LBe,"__count__"].forEach(e=>{FBe[e]=function(e,t){return(n,r)=>gPe({name:e,aggregate_param:r,out:n||e},PBe,t)}(e,FBe[e])});const WBe=VBe.prototype;function GBe(e){Fje.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}WBe.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},WBe.add=function(e){this._add.push(e)},WBe.rem=function(e){this._rem.push(e)},WBe.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,l,u;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,l=0;s<r;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o},WBe.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",bPe(n,r)||(n[r]=1,++o);return o},WBe.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=vPe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},WBe.argmin=function(e){return this.extent(e)[0]||{}},WBe.argmax=function(e){return this.extent(e)[1]||{}},WBe.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},WBe.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},WBe.quartile=function(e){return this._get===e&&this._q||(this._q=Uje(this.values(),e),this._get=e),this._q},WBe.q1=function(e){return this.quartile(e)[0]},WBe.q2=function(e){return this.quartile(e)[1]},WBe.q3=function(e){return this.quartile(e)[2]},WBe.ci=function(e){return this._get===e&&this._ci||(this._ci=Wje(this.values(),1e3,.05,e),this._get=e),this._ci},WBe.ci0=function(e){return this.ci(e)[0]},WBe.ci1=function(e){return this.ci(e)[1]},GBe.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:LBe},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},EPe(GBe,Fje,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,e=>n.add(e))):(n.value=n.value||n.init(e),t.visit(t.REM,e=>n.rem(e)),t.visit(t.ADD,e=>n.add(e))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,l){const u=n[l],c=r[l++];for(const n in c){const r=a?a+"|"+n:n;s[u]=c[n],l<i?o(r,s,l):t[r]||e.cell(r,s)}}("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=aPe(wMe(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=aPe(e.groupby),this._dnames=this._dims.map(e=>{const t=bMe(e);return i(e),n.push(t),t}),this.cellkey=e.key?e.key:DBe(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=o.length,c={};let d,f,p,h,m,g,y;for(u!==a.length&&SMe("Unmatched number of fields and aggregate ops."),y=0;y<u;++y)d=o[y],f=a[y],p=s[y]||null,null==d&&"count"!==f&&SMe("Null aggregate field specified."),m=bMe(d),g=RBe(f,m,l[y]),n.push(g),"count"!==f?(h=c[m],h||(i(d),h=c[m]=[],h.field=d,this._measures.push(h)),"count"!==f&&(this._countOnly=!1),h.push(jBe(f,p,g))):this._counts.push(g);return this._measures=this._measures.map(e=>HBe(e,e.field)),Object.create(null)},cellkey:DBe(),cell(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new VBe),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?lje(t.tuple,o):oje(o)},clean(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],i&&!l.num||a.push(l.tuple);for(c=0,d=this._alen;c<d;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(0===l.num&&i?a:s).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function YBe(e){Fje.call(this,null,e)}function KBe(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter(e=>!a[r(e)]),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?MPe(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function ZBe(e){Fje.call(this,[],e)}function QBe(e){gje.call(this,null,XBe,e)}function XBe(e){return this.value&&!e.modified()?this.value:uPe(e.fields,e.orders)}function JBe(e){Fje.call(this,null,e)}function e$e(e){Fje.call(this,null,e)}YBe.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},EPe(YBe,Fje,{transform(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return u=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(wMe(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?e=>{const t=r(e);e[s]=t,e[l]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Hje(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const l=function(e){let n=UMe(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return l.start=a,l.stop=n.stop,l.step=r,this.value=vMe(l,wMe(t),e.name||"bin_"+bMe(t))}}),ZBe.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},EPe(ZBe,Fje,{transform(e,t){const n=t.fork(t.ALL),r=KBe(rje,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(uje(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),EPe(QBe,gje),JBe.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},EPe(JBe,Fje,{transform(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],l=0,u=i.length;l<u;++l)a.test(r=i[l])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(e=>i[e]=1+(i[e]||0)),c=n(e=>i[e]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=r[s],u=n[s]||0,!l&&u?(r[s]=l=oje({}),l[i]=s,l[o]=u,a.add.push(l)):0===u?(l&&a.rem.push(l),n[s]=null,r[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}}),e$e.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},EPe(e$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},l=e.length,u=0;u<l;++u)for(s[t]=o=e[u],i=0;i<l;++i)s[n]=e[i],r(s)&&(a.push(oje(s)),(s={})[t]=o);return a}(s,i,o,e.filter||NMe)):n.mod=s,n.source=this.value,n.modifies(r)}});const t$e={kde:nBe,mixture:lBe,normal:tBe,lognormal:sBe,uniform:pBe},n$e="function";function r$e(e,t){const n=e[n$e];bPe(t$e,n)||SMe("Unknown distribution function: "+n);const r=t$e[n]();for(const i in e)"field"===i?r.data((e.from||t()).map(e[i])):"distributions"===i?r[i](e[i].map(e=>r$e(e,t))):typeof r[i]===n$e&&r[i](e[i]);return r}function i$e(e){Fje.call(this,null,e)}const o$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],a$e={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:o$e},{name:"weights",type:"number",array:!0}]};function s$e(e,t){return e?e.map((e,n)=>t[n]||bMe(e)):null}function l$e(e,t,n){const r=[],i=e=>e(l);let o,a,s,l,u,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(i),c=o[u],c||(o[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}i$e.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:o$e.concat(a$e)},{name:"as",type:"string",array:!0,default:["value","density"]}]},EPe(i$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=r$e(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&SMe("Invalid density method: "+a),e.extent||r.data||SMe("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],l=OBe(a,e.extent||yPe(r.data()),i,o).map(e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],oje(t)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function u$e(e){Fje.call(this,null,e)}u$e.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function c$e(e){gje.call(this,null,d$e,e),this.modified(!0)}function d$e(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:vMe(n=>t(n,e),wMe(t),bMe(t))}function f$e(e){Fje.call(this,[void 0,void 0],e)}function p$e(e,t){gje.call(this,e),this.parent=t,this.count=0}function h$e(e){Fje.call(this,{},e),this._keys=_Pe();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function m$e(e){gje.call(this,null,g$e,e)}function g$e(e){return this.value&&!e.modified()?this.value:PMe(e.name)?aPe(e.name).map(e=>TMe(e)):TMe(e.name,e.as)}function y$e(e){Fje.call(this,_Pe(),e)}function v$e(e){Fje.call(this,[],e)}function b$e(e){Fje.call(this,[],e)}function w$e(e){Fje.call(this,null,e)}function _$e(e){Fje.call(this,[],e)}EPe(u$e,Fje,{transform(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=l$e(t.source,e.groupby,AMe),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>LPe(yPe(e,t))/30)(n,o),s=uje((e,t)=>o(e)-o(t)),l=e.as||"bin",u=r.length;let c,d=1/0,f=-1/0,p=0;for(;p<u;++p){const e=r[p].sort(s);c=-1;for(const t of Gje(e,a,i,o))t<d&&(d=t),t>f&&(f=t),e[++c][l]=t}return this.value={start:d,stop:f,step:a},t.reflow(!0).modifies(l)}}),EPe(c$e,gje),f$e.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},EPe(f$e,Fje,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,e=>{const t=UMe(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))}),!Number.isFinite(o)||!Number.isFinite(a)){let e=bMe(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),EPe(p$e,gje,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}}),EPe(h$e,Fje,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o,a,s=bPe(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new p$e(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter(e=>e&&e.count>0);this.initTargets(e)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,e=>{const t=rje(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))}),t.visit(t.ADD,e=>{const t=r(e);o.set(rje(e),t),s(t).add(e)}),a||t.modified(r.fields)?t.visit(t.MOD,e=>{const t=rje(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))}):t.changed(t.MOD)&&t.visit(t.MOD,e=>{s(o.get(rje(e))).mod(e)}),a&&t.visit(t.REFLOW,e=>{const t=rje(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),EPe(m$e,gje),y$e.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},EPe(y$e,Fje,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,l=e.expr;let u=!0;function c(t){const n=rje(t),i=l(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?u&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,e=>{const t=rje(e);r.has(t)?r.delete(t):a.push(e)}),t.visit(t.ADD,t=>{l(t,e)?o.push(t):r.set(rje(t),1)}),t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),v$e.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},EPe(v$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=s$e(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,e=>{const t=r.map(t=>t(e)),s=t.reduce((e,t)=>Math.max(e,t.length),0);let l,u,c,d=0;for(;d<s;++d){for(u=aje(e),l=0;l<a;++l)u[i[l]]=null==(c=t[l][d])?null:c;o&&(u[o]=d),n.add.push(u)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),b$e.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},EPe(b$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(bMe),o=e.as||["key","value"],a=o[0],s=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,e=>{for(let t,o=0;o<l;++o)t=aje(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)}),this.value=n.source=n.add,n.modifies(o)}}),w$e.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},EPe(w$e,Fje,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,t=>t[r]=n(t,e))}}),EPe(_$e,Fje,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,l=e.size-s.length;if(l>0){for(i=[];--l>=0;)i.push(a=oje(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-l),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-l);return n.source=this.value=s,n}});const x$e={value:"value",median:g4,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let i of e)null!=i&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:d4,max:c4},E$e=[];function S$e(e){Fje.call(this,[],e)}function k$e(e){GBe.call(this,e)}function T$e(e){Fje.call(this,null,e)}function C$e(e){gje.call(this,null,A$e,e)}function A$e(e){return this.value&&!e.modified()?this.value:NPe(e.fields,e.flat)}function I$e(e){Fje.call(this,[],e),this._pending=null}function O$e(e,t,n){n.forEach(oje);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function N$e(e){Fje.call(this,{},e)}function D$e(e){gje.call(this,null,R$e,e)}function R$e(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function M$e(e){gje.call(this,null,P$e,e)}function P$e(e){return this.value&&!e.modified()?this.value:e.values.reduce((e,t)=>e.concat(t),[])}function F$e(e){Fje.call(this,null,e)}function L$e(e){GBe.call(this,e)}function j$e(e){h$e.call(this,e)}function B$e(e){Fje.call(this,null,e)}function $$e(e){Fje.call(this,null,e)}function z$e(e){Fje.call(this,null,e)}S$e.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},EPe(S$e,Fje,{transform(e,t){var n,r,i,o,a,s,l,u,c,d,f=t.fork(t.ALL),p=function(e){var t,n=e.method||x$e.value;if(null!=x$e[n])return n===x$e.value?(t=void 0!==e.value?e.value:0,()=>t):x$e[n];SMe("Unrecognized imputation method: "+n)}(e),h=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=bMe(e.field),g=bMe(e.key),y=(e.groupby||[]).map(bMe),v=function(e,t,n,r){var i,o,a,s,l,u,c,d,f=e=>e(d),p=[],h=r?r.slice():[],m={},g={};for(h.forEach((e,t)=>m[e]=t+1),s=0,c=e.length;s<c;++s)u=n(d=e[s]),l=m[u]||(m[u]=h.push(u)),(a=g[o=(i=t?t.map(f):E$e)+""])||(a=g[o]=[],p.push(a),a.values=i),a[l-1]=d;return p.domain=h,p}(t.source,e.groupby,e.key,e.keyvals),b=[],w=this.value,_=v.domain.length;for(a=0,u=v.length;a<u;++a)for(i=(n=v[a]).values,r=NaN,l=0;l<_;++l)if(null==n[l]){for(o=v.domain[l],d={_impute:!0},s=0,c=i.length;s<c;++s)d[y[s]]=i[s];d[g]=o,d[m]=Number.isNaN(r)?r=p(n,h):r,b.push(oje(d))}return b.length&&(f.add=f.materialize(f.ADD).add.concat(b)),w.length&&(f.rem=f.materialize(f.REM).rem.concat(w)),this.value=b,f}}),k$e.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:LBe},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},EPe(k$e,GBe,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,e=>n.add(e))):(i=n.value=n.value||this.init(e),t.visit(t.REM,e=>n.rem(e)),t.visit(t.ADD,e=>n.add(e))),n.changes(),t.visit(t.SOURCE,e=>{gPe(e,i[n.cellkey(e)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),T$e.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},EPe(T$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=l$e(r,e.groupby,e.field),o=(e.groupby||[]).map(bMe),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&SMe("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=yPe(r,e.field)),d=f=e.steps||f),i.forEach(t=>{const n=nBe(t,a)[s],r=e.counts?t.length:1;OBe(n,c||yPe(t),d,f).forEach(e=>{const n={};for(let r=0;r<o.length;++r)n[o[r]]=t.dims[r];n[l[0]]=e[0],n[l[1]]=e[1]*r,u.push(oje(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),EPe(C$e,gje),EPe(I$e,Fje,{transform(e,t){const n=t.dataflow;if(this._pending)return O$e(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return O$e(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then(e=>(this._pending=aPe(e.data),e=>e.touch(this)))}}return n.request(e.url,e.format).then(e=>O$e(this,t,aPe(e.data)))}}),N$e.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},EPe(N$e,Fje,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let l,u,c,d=a?t.SOURCE:t.ADD,f=t,p=e.as;return i?(u=i.length,s>1&&!p&&SMe('Multi-field lookup requires explicit "as" parameter.'),p&&p.length!==s*u&&SMe('The "as" parameter has too few output field names.'),p=p||i.map(bMe),l=function(e){for(var t,a,l=0,c=0;l<s;++l)if(null==(a=r.get(n[l](e))))for(t=0;t<u;++t,++c)e[p[c]]=o;else for(t=0;t<u;++t,++c)e[p[c]]=i[t](a)}):(p||SMe("Missing output field names."),l=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[p[i]]=null==t?o:t}),a?f=t.reflow(!0):(c=n.some(e=>t.modified(e.fields)),d|=c?t.MOD:0),t.visit(d,l),f.modifies(p)}}),EPe(D$e,gje),EPe(M$e,gje),EPe(F$e,Fje,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),L$e.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:LBe,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},EPe(L$e,GBe,{_transform:GBe.prototype.transform,transform(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=wMe(n).concat(wMe(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))}),i.sort(cPe),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(e=>function(e,t,n,r){return vMe(r=>t(r)===e?n(r):NaN,r,e+"")}(e,n,r,o)),as:a.map(e=>e+""),modified:e.modified.bind(e)}}(e,t),t)}}),EPe(j$e,h$e,{transform(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(rje(e),n,t,e);return(e.modified("field")||r&&t.modified(wMe(r)))&&SMe("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,e=>{const t=i(e);r(e).forEach(e=>t.mod(e))}),t.visit(t.ADD,e=>{const t=i(e);r(e).forEach(e=>t.add(oje(e)))}),t.visit(t.REM,e=>{const t=i(e);r(e).forEach(e=>t.rem(e))})):(t.visit(t.MOD,e=>i(e).mod(e)),t.visit(t.ADD,e=>i(e).add(e)),t.visit(t.REM,e=>i(e).rem(e))),t.clean()&&t.runAfter(()=>this.clean()),t}}),B$e.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},EPe(B$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=s$e(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):sje;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,e=>{const t=rje(e);n.rem.push(a[t]),a[t]=null}),t.visit(t.ADD,e=>{const t=o(e,oje({}));a[rje(e)]=t,n.add.push(t)}),t.visit(t.MOD,e=>{n.mod.push(o(e,a[rje(e)]))}),n}}),EPe($$e,Fje,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),z$e.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function U$e(e){Fje.call(this,null,e)}function q$e(e){Fje.call(this,[],e),this.count=0}function H$e(e){Fje.call(this,null,e)}function V$e(e){Fje.call(this,null,e),this.modified(!0)}function W$e(e){Fje.call(this,null,e)}EPe(z$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=l$e(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(bMe),a=[],s=e.step||.01,l=e.probs||v4(s/2,1-1e-14,s),u=l.length;return i.forEach(e=>{const t=zje(e,l);for(let n=0;n<u;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=l[n],i[r[1]]=t[n],a.push(oje(i))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),EPe(U$e,Fje,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,e=>{const t=rje(e);n.rem.push(r[t]),r[t]=null}),t.visit(t.ADD,e=>{const t=aje(e);r[rje(e)]=t,n.add.push(t)}),t.visit(t.MOD,e=>{const t=r[rje(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)})),n}}),q$e.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},EPe(q$e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((e,t)=>(e[rje(t)]=1,e),{});let a=this.value,s=this.count,l=0;function u(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*Vje()),r<a.length&&r>=l&&(t=a[r],o[rje(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,e=>{const t=rje(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s}),a=a.filter(e=>-1!==o[rje(e)])),(t.rem.length||r)&&a.length<i&&t.source&&(l=s=a.length,t.visit(t.SOURCE,e=>{o[rje(e)]||u(e)}),l=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[rje(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,e=>{o[rje(e)]&&n.mod.push(e)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(e=>!o[rje(e)])),this.count=s,this.value=n.source=a,n}}),H$e.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},EPe(H$e,Fje,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=v4(e.start,e.stop,e.step||1).map(e=>{const t={};return t[r]=e,oje(t)}),n.add=t.add.concat(this.value),n}}),EPe(V$e,Fje,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const G$e=["unit0","unit1"];function Y$e(e){Fje.call(this,_Pe(),e)}function K$e(e){Fje.call(this,null,e)}W$e.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:cFe,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:G$e}]},EPe(W$e,Fje,{transform(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?$Fe:BFe)(o.unit).offset,s=e.as||G$e,l=s[0],u=s[1],c=o.step;let d=o.start||1/0,f=o.stop||-1/0,p=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(wMe(n)))&&(p=(t=t.reflow(!0)).SOURCE,d=1/0,f=-1/0),t.visit(p,e=>{const t=n(e);let i,s;null==t?(e[l]=null,r&&(e[u]=null)):(e[l]=i=s=o(t),r&&(e[u]=s=a(i,c)),i<d&&(d=i),s>f&&(f=s))}),o.start=d,o.stop=f,t.modifies(r?s:l)},_floor(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:sLe({extent:e.extent||yPe(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=fFe(r),a=this.value||{},s=(n?FFe:RFe)(o,i);return s.unit=zMe(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),EPe(Y$e,Fje,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,e=>i.delete(r(e))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),EPe(K$e,Fje,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(uje(e.sort)):t.source).map(e.field))}});const Z$e={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=Z$e.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||SMe("ntile num must be greater than zero.");const n=Z$e.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||SMe("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const Q$e=Object.keys(Z$e);function X$e(e){const t=aPe(e.ops),n=aPe(e.fields),r=aPe(e.params),i=aPe(e.aggregate_params),o=aPe(e.as),a=this.outputs=[],s=this.windows=[],l={},u={},c=[],d=[];let f=!0;function p(e){aPe(wMe(e)).forEach(e=>l[e]=1)}p(e.sort),t.forEach((e,t)=>{const l=n[t],h=r[t],m=i[t]||null,g=bMe(l),y=RBe(e,g,o[t]);if(p(l),a.push(y),bPe(Z$e,e))s.push(function(e,t,n,r){const i=Z$e[e](t,n);return{init:i.init||IMe,update:function(e,t){t[r]=i.next(e)}}}(e,l,h,y));else{if(null==l&&"count"!==e&&SMe("Null aggregate field specified."),"count"===e)return void c.push(y);f=!1;let t=u[g];t||(t=u[g]=[],t.field=l,d.push(t)),t.push(jBe(e,m,y))}}),(c.length||d.length)&&(this.cell=function(e,t,n){e=e.map(e=>HBe(e,e.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new VBe;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(d,c,f)),this.inputs=Object.keys(l)}const J$e=X$e.prototype;function eze(e){Fje.call(this,{},e),this._mlen=0,this._mods=[]}function tze(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),l=s.length,u=o?q3(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||hPe(-1)};t.init();for(let d=0;d<l;++d)nze(c,a,d,l),o&&rze(c,u),t.update(c,s[d])}function nze(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function rze(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}J$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()},J$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},eze.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Q$e.concat(LBe)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},EPe(eze,Fje,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=uje(e.sort),i=DBe(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new X$e(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,e=>o(e).add(e))):(t.visit(t.REM,e=>o(e).remove(e)),t.visit(t.ADD,e=>o(e).add(e)));for(let s=0,l=this._mlen;s<l;++s)tze(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=KBe(rje),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});const ize=Object.freeze(Object.defineProperty({__proto__:null,aggregate:GBe,bin:YBe,collect:ZBe,compare:QBe,countpattern:JBe,cross:e$e,density:i$e,dotbin:u$e,expression:c$e,extent:f$e,facet:h$e,field:m$e,filter:y$e,flatten:v$e,fold:b$e,formula:w$e,generate:_$e,impute:S$e,joinaggregate:k$e,kde:T$e,key:C$e,load:I$e,lookup:N$e,multiextent:D$e,multivalues:M$e,params:F$e,pivot:L$e,prefacet:j$e,project:B$e,proxy:$$e,quantile:z$e,relay:U$e,sample:q$e,sequence:H$e,sieve:V$e,subflow:p$e,timeunit:W$e,tupleindex:Y$e,values:K$e,window:eze},Symbol.toStringTag,{value:"Module"}));function oze(e){return function(){return e}}const aze=Math.abs,sze=Math.atan2,lze=Math.cos,uze=Math.max,cze=Math.min,dze=Math.sin,fze=Math.sqrt,pze=1e-12,hze=Math.PI,mze=hze/2,gze=2*hze;function yze(e){return e>=1?mze:e<=-1?-mze:Math.asin(e)}const vze=Math.PI,bze=2*vze,wze=1e-6,_ze=bze-wze;function xze(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}let Eze=class{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?xze:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xze;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,u=o-e,c=a-t,d=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(d>wze)if(Math.abs(c*s-l*u)>wze&&i){let f=n-o,p=r-a,h=s*s+l*l,m=f*f+p*p,g=Math.sqrt(h),y=Math.sqrt(d),v=i*Math.tan((vze-Math.acos((h+d-m)/(2*g*y)))/2),b=v/y,w=v/g;Math.abs(b-1)>wze&&this._append`L${e+b*u},${t+b*c}`,this._append`A${i},${i},0,0,${+(c*f>u*p)},${this._x1=e+w*s},${this._y1=t+w*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,u=t+s,c=1^o,d=o?r-i:i-r;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>wze||Math.abs(this._y1-u)>wze)&&this._append`L${l},${u}`,n&&(d<0&&(d=d%bze+bze),d>_ze?this._append`A${n},${n},0,1,${c},${e-a},${t-s}A${n},${n},0,1,${c},${this._x1=l},${this._y1=u}`:d>wze&&this._append`A${n},${n},0,${+(d>=vze)},${c},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}};function Sze(){return new Eze}function kze(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new Eze(t)}function Tze(e){return e.innerRadius}function Cze(e){return e.outerRadius}function Aze(e){return e.startAngle}function Ize(e){return e.endAngle}function Oze(e){return e&&e.padAngle}function Nze(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/fze(s*s+l*l),c=u*l,d=-u*s,f=e+c,p=t+d,h=n+c,m=r+d,g=(f+h)/2,y=(p+m)/2,v=h-f,b=m-p,w=v*v+b*b,_=i-o,x=f*m-h*p,E=(b<0?-1:1)*fze(uze(0,_*_*w-x*x)),S=(x*b-v*E)/w,k=(-x*v-b*E)/w,T=(x*b+v*E)/w,C=(-x*v+b*E)/w,A=S-g,I=k-y,O=T-g,N=C-y;return A*A+I*I>O*O+N*N&&(S=T,k=C),{cx:S,cy:k,x01:-c,y01:-d,x11:S*(i/_-1),y11:k*(i/_-1)}}function Dze(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Rze(e){this._context=e}function Mze(e){return new Rze(e)}function Pze(e){return e[0]}function Fze(e){return e[1]}function Lze(e,t){var n=oze(!0),r=null,i=Mze,o=null,a=kze(s);function s(s){var l,u,c,d=(s=Dze(s)).length,f=!1;for(null==r&&(o=i(c=a())),l=0;l<=d;++l)!(l<d&&n(u=s[l],l,s))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,l,s),+t(u,l,s));if(c)return o=null,c+""||null}return e="function"==typeof e?e:void 0===e?Pze:oze(e),t="function"==typeof t?t:void 0===t?Fze:oze(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:oze(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:oze(+e),s):t},s.defined=function(e){return arguments.length?(n="function"==typeof e?e:oze(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function jze(e,t,n){var r=null,i=oze(!0),o=null,a=Mze,s=null,l=kze(u);function u(u){var c,d,f,p,h,m=(u=Dze(u)).length,g=!1,y=new Array(m),v=new Array(m);for(null==o&&(s=a(h=l())),c=0;c<=m;++c){if(!(c<m&&i(p=u[c],c,u))===g)if(g=!g)d=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=d;--f)s.point(y[f],v[f]);s.lineEnd(),s.areaEnd()}g&&(y[c]=+e(p,c,u),v[c]=+t(p,c,u),s.point(r?+r(p,c,u):y[c],n?+n(p,c,u):v[c]))}if(h)return s=null,h+""||null}function c(){return Lze().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?Pze:oze(+e),t="function"==typeof t?t:oze(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?Fze:oze(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:oze(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:oze(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:oze(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:oze(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:oze(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:oze(+e),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:oze(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u}Sze.prototype=Eze.prototype,Rze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};const Bze={draw(e,t){const n=fze(t/hze);e.moveTo(n,0),e.arc(0,0,n,0,gze)}};function $ze(){}function zze(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Uze(e){this._context=e}function qze(e){this._context=e}function Hze(e){this._context=e}function Vze(e,t){this._basis=new Uze(e),this._beta=t}Uze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zze(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zze(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},qze.prototype={areaStart:$ze,areaEnd:$ze,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:zze(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Hze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:zze(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Vze.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*e[l]+(1-this._beta)*(i+r*a),this._beta*t[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Wze=function e(t){function n(e){return 1===t?new Uze(e):new Vze(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function Gze(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Yze(e,t){this._context=e,this._k=(1-t)/6}Yze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Gze(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Gze(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kze=function e(t){function n(e){return new Yze(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Zze(e,t){this._context=e,this._k=(1-t)/6}Zze.prototype={areaStart:$ze,areaEnd:$ze,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Gze(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qze=function e(t){function n(e){return new Zze(e,t)}return n.tension=function(t){return e(+t)},n}(0);function Xze(e,t){this._context=e,this._k=(1-t)/6}Xze.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Gze(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jze=function e(t){function n(e){return new Xze(e,t)}return n.tension=function(t){return e(+t)},n}(0);function eUe(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>pze){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>pze){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function tUe(e,t){this._context=e,this._alpha=t}tUe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:eUe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const nUe=function e(t){function n(e){return t?new tUe(e,t):new Yze(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function rUe(e,t){this._context=e,this._alpha=t}rUe.prototype={areaStart:$ze,areaEnd:$ze,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:eUe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const iUe=function e(t){function n(e){return t?new rUe(e,t):new Zze(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function oUe(e,t){this._context=e,this._alpha=t}oUe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:eUe(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const aUe=function e(t){function n(e){return t?new oUe(e,t):new Xze(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function sUe(e){this._context=e}function lUe(e){return e<0?-1:1}function uUe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(lUe(o)+lUe(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function cUe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function dUe(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function fUe(e){this._context=e}function pUe(e){this._context=new hUe(e)}function hUe(e){this._context=e}function mUe(e){this._context=e}function gUe(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function yUe(e,t){this._context=e,this._t=t}function vUe(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}sUe.prototype={areaStart:$ze,areaEnd:$ze,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},fUe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dUe(this,this._t0,cUe(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,dUe(this,cUe(this,n=uUe(this,e,t)),n);break;default:dUe(this,this._t0,n=uUe(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(pUe.prototype=Object.create(fUe.prototype)).point=function(e,t){fUe.prototype.point.call(this,t,e)},hUe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},mUe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=gUe(e),i=gUe(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},yUe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function bUe(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function wUe(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}const _Ue=Symbol("implicit");function xUe(){var e=new Z3,t=[],n=[],r=_Ue;function i(i){let o=e.get(i);if(void 0===o){if(r!==_Ue)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Z3;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return xUe(t,n).unknown(r)},bUe.apply(i,arguments),i}function EUe(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function SUe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return EUe((n-r/t)*t,a,i,o,s)}}function kUe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return EUe((n-r/t)*t,i,o,a,s)}}const TUe=e=>()=>e;function CUe(e,t){return function(n){return e+n*t}}function AUe(e,t){var n=t-e;return n?CUe(e,n>180||n<-180?n-360*Math.round(n/360):n):TUe(isNaN(e)?t:e)}function IUe(e){return 1===(e=+e)?OUe:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):TUe(isNaN(t)?n:t)}}function OUe(e,t){var n=t-e;return n?CUe(e,n):TUe(isNaN(e)?t:e)}const NUe=function e(t){var n=IUe(t);function r(e,t){var r=n((e=Y1(e)).r,(t=Y1(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=OUe(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function DUe(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Y1(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var RUe=DUe(SUe),MUe=DUe(kUe);function PUe(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function FUe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function LUe(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=HUe(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function jUe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function BUe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function $Ue(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=HUe(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var zUe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,UUe=new RegExp(zUe.source,"g");function qUe(e,t){var n,r,i,o=zUe.lastIndex=UUe.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=zUe.exec(e))&&(r=UUe.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:BUe(n,r)})),o=UUe.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function HUe(e,t){var n,r=typeof t;return null==t||"boolean"===r?TUe(t):("number"===r?BUe:"string"===r?(n=H1(t))?(t=n,NUe):qUe:t instanceof H1?NUe:t instanceof Date?jUe:FUe(t)?PUe:Array.isArray(t)?LUe:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?$Ue:BUe)(e,t)}function VUe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var WUe,GUe=180/Math.PI,YUe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function KUe(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*GUe,skewX:Math.atan(l)*GUe,scaleX:a,scaleY:s}}function ZUe(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],l=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var l=a.push("translate(",null,t,null,n);s.push({i:l-4,x:BUe(e,i)},{i:l-2,x:BUe(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:BUe(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,l),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:BUe(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,l),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:BUe(e,n)},{i:s-2,x:BUe(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(e){for(var t,n=-1,r=l.length;++n<r;)s[(t=l[n]).i]=t.x(e);return s.join("")}}}var QUe=ZUe(function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?YUe:KUe(t.a,t.b,t.c,t.d,t.e,t.f)},"px, ","px)","deg)"),XUe=ZUe(function(e){return null==e?YUe:(WUe||(WUe=document.createElementNS("http://www.w3.org/2000/svg","g")),WUe.setAttribute("transform",e),(e=WUe.transform.baseVal.consolidate())?KUe((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):YUe)},", ",")",")");function JUe(e){return((e=Math.exp(e))+1/e)/2}const eqe=function e(t,n,r){function i(e,i){var o,a,s=e[0],l=e[1],u=e[2],c=i[0],d=i[1],f=i[2],p=c-s,h=d-l,m=p*p+h*h;if(m<1e-12)a=Math.log(f/u)/t,o=function(e){return[s+e*p,l+e*h,u*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(f*f-u*u+r*m)/(2*u*n*g),v=(f*f-u*u-r*m)/(2*f*n*g),b=Math.log(Math.sqrt(y*y+1)-y),w=Math.log(Math.sqrt(v*v+1)-v);a=(w-b)/t,o=function(e){var r,i=e*a,o=JUe(b),c=u/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*p,l+c*h,u*o/JUe(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function tqe(e){return function(t,n){var r=e((t=r2(t)).h,(n=r2(n)).h),i=OUe(t.s,n.s),o=OUe(t.l,n.l),a=OUe(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}const nqe=tqe(AUe);var rqe=tqe(OUe);function iqe(e){return function(t,n){var r=e((t=E2(t)).h,(n=E2(n)).h),i=OUe(t.c,n.c),o=OUe(t.l,n.l),a=OUe(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}const oqe=iqe(AUe);var aqe=iqe(OUe);function sqe(e){return function t(n){function r(t,r){var i=e((t=M2(t)).h,(r=M2(r)).h),o=OUe(t.s,r.s),a=OUe(t.l,r.l),s=OUe(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}const lqe=sqe(AUe);var uqe=sqe(OUe);function cqe(e,t){void 0===t&&(t=e,e=HUe);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}const dqe=Object.freeze(Object.defineProperty({__proto__:null,interpolate:HUe,interpolateArray:function(e,t){return(FUe(t)?PUe:LUe)(e,t)},interpolateBasis:SUe,interpolateBasisClosed:kUe,interpolateCubehelix:lqe,interpolateCubehelixLong:uqe,interpolateDate:jUe,interpolateDiscrete:function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},interpolateHcl:oqe,interpolateHclLong:aqe,interpolateHsl:nqe,interpolateHslLong:rqe,interpolateHue:function(e,t){var n=AUe(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},interpolateLab:function(e,t){var n=OUe((e=y2(e)).l,(t=y2(t)).l),r=OUe(e.a,t.a),i=OUe(e.b,t.b),o=OUe(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}},interpolateNumber:BUe,interpolateNumberArray:PUe,interpolateObject:$Ue,interpolateRgb:NUe,interpolateRgbBasis:RUe,interpolateRgbBasisClosed:MUe,interpolateRound:VUe,interpolateString:qUe,interpolateTransformCss:QUe,interpolateTransformSvg:XUe,interpolateZoom:eqe,piecewise:cqe,quantize:function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}},Symbol.toStringTag,{value:"Module"}));function fqe(e){return+e}var pqe=[0,1];function hqe(e){return e}function mqe(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function gqe(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=mqe(i,r),o=n(a,o)):(r=mqe(r,i),o=n(o,a)),function(e){return o(r(e))}}function yqe(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=mqe(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=G3(e,t,1,r)-1;return o[n](i[n](t))}}function vqe(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function bqe(){var e,t,n,r,i,o,a=pqe,s=pqe,l=HUe,u=hqe;function c(){var e=Math.min(a.length,s.length);return u!==hqe&&(u=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?yqe:gqe,i=o=null,d}function d(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(u(t)))}return d.invert=function(n){return u(t((o||(o=r(s,a.map(e),BUe)))(n)))},d.domain=function(e){return arguments.length?(a=Array.from(e,fqe),c()):a.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=VUe,c()},d.clamp=function(e){return arguments.length?(u=!!e||hqe,c()):u!==hqe},d.interpolate=function(e){return arguments.length?(l=e,c()):l},d.unknown=function(e){return arguments.length?(n=e,d):n},function(n,r){return e=n,t=r,c()}}function wqe(){return bqe()(hqe,hqe)}function _qe(e,t,n,r){var i,o=u4(e,t,n);switch((r=$2(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=X2(o,a))||(r.precision=i),G2(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=J2(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Q2(o))||(r.precision=i-2*("%"===r.type))}return W2(r)}function xqe(e){var t=e.domain;return e.ticks=function(e){var n=t();return s4(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return _qe(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],u=o[s],c=10;for(u<l&&(i=l,l=u,u=i,i=a,a=s,s=i);c-- >0;){if((i=l4(l,u,n))===r)return o[a]=l,o[s]=u,t(o);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i}r=i}return e},e}function Eqe(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Sqe(e){return Math.log(e)}function kqe(e){return Math.exp(e)}function Tqe(e){return-Math.log(-e)}function Cqe(e){return-Math.exp(-e)}function Aqe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Iqe(e){return(t,n)=>-e(-t,n)}function Oqe(e){const t=e(Sqe,kqe),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?Aqe:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=Iqe(r),i=Iqe(i),e(Tqe,Cqe)):e(Sqe,kqe),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let u,c,d=r(a),f=r(s);const p=null==e?10:+e;let h=[];if(!(o%1)&&f-d<p){if(d=Math.floor(d),f=Math.ceil(f),a>0){for(;d<=f;++d)for(u=1;u<o;++u)if(c=d<0?u/i(-d):u*i(d),!(c<a)){if(c>s)break;h.push(c)}}else for(;d<=f;++d)for(u=o-1;u>=1;--u)if(c=d>0?u/i(-d):u*i(d),!(c<a)){if(c>s)break;h.push(c)}2*h.length<p&&(h=s4(a,s,p))}else h=s4(d,f,Math.min(f-d,p)).map(i);return l?h.reverse():h},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!=typeof n&&(o%1||null!=(n=$2(n)).precision||(n.trim=!0),n=W2(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(Eqe(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function Nqe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Dqe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Rqe(e){var t=1,n=e(Nqe(t),Dqe(t));return n.constant=function(n){return arguments.length?e(Nqe(t=+n),Dqe(t)):t},xqe(n)}function Mqe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pqe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fqe(e){return e<0?-e*e:e*e}function Lqe(e){var t=e(hqe,hqe),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(hqe,hqe):.5===n?e(Pqe,Fqe):e(Mqe(n),Mqe(1/n)):n},xqe(t)}function jqe(){var e=Lqe(bqe());return e.copy=function(){return vqe(e,jqe()).exponent(e.exponent())},bUe.apply(e,arguments),e}function Bqe(e){return new Date(e)}function $qe(e){return e instanceof Date?+e:+new Date(+e)}function zqe(e,t,n,r,i,o,a,s,l,u){var c=wqe(),d=c.invert,f=c.domain,p=u(".%L"),h=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),w=u("%Y");function _(e){return(l(e)<e?p:s(e)<e?h:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:w)(e)}return c.invert=function(e){return new Date(d(e))},c.domain=function(e){return arguments.length?f(Array.from(e,$qe)):f().map(Bqe)},c.ticks=function(t){var n=f();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?_:u(t)},c.nice=function(e){var n=f();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?f(Eqe(n,e)):c},c.copy=function(){return vqe(c,zqe(e,t,n,r,i,o,a,s,l,u))},c}function Uqe(){var e,t,n,r,i,o=0,a=1,s=hqe,l=!1;function u(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),u):[o,a]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.range=c(HUe),u.rangeRound=c(VUe),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),u}}function qqe(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Hqe(){var e=xqe(Uqe()(hqe));return e.copy=function(){return qqe(e,Hqe())},wUe.apply(e,arguments)}function Vqe(){var e=Lqe(Uqe());return e.copy=function(){return qqe(e,Vqe()).exponent(e.exponent())},wUe.apply(e,arguments)}function Wqe(){var e,t,n,r,i,o,a,s=0,l=.5,u=1,c=1,d=hqe,f=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),d(f?Math.max(0,Math.min(1,e)):e))}function h(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,d=cqe(e,[n,r,i]),p):[d(0),d(.5),d(1)]}}return p.domain=function(a){return arguments.length?([s,l,u]=a,e=o(s=+s),t=o(l=+l),n=o(u=+u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p):[s,l,u]},p.clamp=function(e){return arguments.length?(f=!!e,p):f},p.interpolator=function(e){return arguments.length?(d=e,p):d},p.range=h(HUe),p.rangeRound=h(VUe),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return o=a,e=a(s),t=a(l),n=a(u),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,p}}function Gqe(){var e=Lqe(Wqe());return e.copy=function(){return qqe(e,Gqe()).exponent(e.exponent())},wUe.apply(e,arguments)}function Yqe(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}const Kqe=Yqe("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zqe=Yqe("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Qqe=Yqe("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Xqe=Yqe("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Jqe=Yqe("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),eHe=Yqe("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),tHe=Yqe("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),nHe=Yqe("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),rHe=Yqe("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),iHe=Yqe("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function oHe(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const aHe="linear",sHe="log",lHe="pow",uHe="sqrt",cHe="symlog",dHe="time",fHe="utc",pHe="sequential",hHe="diverging",mHe="quantile",gHe="quantize",yHe="threshold",vHe="ordinal",bHe="point",wHe="band",_He="bin-ordinal",xHe="continuous",EHe="discrete",SHe="discretizing",kHe="interpolating",THe="temporal";function CHe(){const e=xUe().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,l=0,u=.5;function c(){const e=t().length,c=o[1]<o[0],d=o[1-c],f=oHe(e,s,l);let p=o[c-0];r=(d-p)/(f||1),a&&(r=Math.floor(r)),p+=(d-p-r*(e-s))*u,i=r*(1-s),a&&(p=Math.round(p),i=Math.round(i));const h=v4(e).map(e=>p+r*e);return n(c?h.reverse():h)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),s=l,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let l,u,c,d=+e[0],f=+e[1];return d!=d||f!=f||(f<d&&(c=d,d=f,f=c),f<a[0]||d>o[1-r])?void 0:(l=Math.max(0,G3(a,d)-1),u=d===f?l:G3(a,f)-1,d-a[l]>i+1e-10&&++l,r&&(c=l,l=s-u,u=s-c),l>u?void 0:t().slice(l,u+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return CHe().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(l).align(u)},c()}function AHe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return AHe(t())},e}var IHe=Array.prototype.map;const OHe=Array.prototype.slice;const NHe=new Map,DHe=Symbol("vega_scale");function RHe(e){return e[DHe]=!0,e}function MHe(e){return e&&!0===e[DHe]}function PHe(e,t,n){return arguments.length>1?(NHe.set(e,function(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],l=t[1],u=-1;for(l<s&&(i=s,s=l,l=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=l&&(u<0&&(u=o),r=o);if(!(u<0))return s=e.invertExtent(n[u]),l=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===l[1]?l[0]:l[1]]}}(n):void 0),n.type=e,RHe(n)};return r.metadata=qPe(aPe(n)),r}(e,t,n)),this):FHe(e)?NHe.get(e):void 0}function FHe(e){return NHe.has(e)}function LHe(e,t){const n=NHe.get(e);return n&&n.metadata[t]}function jHe(e){return LHe(e,xHe)}function BHe(e){return LHe(e,EHe)}function $He(e){return LHe(e,SHe)}function zHe(e){return LHe(e,sHe)}function UHe(e){return LHe(e,kHe)}function qHe(e){return LHe(e,mHe)}PHe("identity",function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,fqe),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,fqe):[0,1],xqe(r)}),PHe(aHe,function e(){var t=wqe();return t.copy=function(){return vqe(t,e())},bUe.apply(t,arguments),xqe(t)},xHe),PHe(sHe,function e(){const t=Oqe(bqe()).domain([1,10]);return t.copy=()=>vqe(t,e()).base(t.base()),bUe.apply(t,arguments),t},[xHe,sHe]),PHe(lHe,jqe,xHe),PHe(uHe,function(){return jqe.apply(null,arguments).exponent(.5)},xHe),PHe(cHe,function e(){var t=Rqe(bqe());return t.copy=function(){return vqe(t,e()).constant(t.constant())},bUe.apply(t,arguments)},xHe),PHe(dHe,function(){return bUe.apply(zqe(S4,k4,B3,L3,x3,v3,g3,h3,p3,N4).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[xHe,THe]),PHe(fHe,function(){return bUe.apply(zqe(x4,E4,$3,j3,O3,b3,y3,m3,p3,R4).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[xHe,THe]),PHe(pHe,Hqe,[xHe,kHe]),PHe(`${pHe}-${aHe}`,Hqe,[xHe,kHe]),PHe(`${pHe}-${sHe}`,function e(){var t=Oqe(Uqe()).domain([1,10]);return t.copy=function(){return qqe(t,e()).base(t.base())},wUe.apply(t,arguments)},[xHe,kHe,sHe]),PHe(`${pHe}-${lHe}`,Vqe,[xHe,kHe]),PHe(`${pHe}-${uHe}`,function(){return Vqe.apply(null,arguments).exponent(.5)},[xHe,kHe]),PHe(`${pHe}-${cHe}`,function e(){var t=Rqe(Uqe());return t.copy=function(){return qqe(t,e()).constant(t.constant())},wUe.apply(t,arguments)},[xHe,kHe]),PHe(`${hHe}-${aHe}`,function e(){var t=xqe(Wqe()(hqe));return t.copy=function(){return qqe(t,e())},wUe.apply(t,arguments)},[xHe,kHe]),PHe(`${hHe}-${sHe}`,function e(){var t=Oqe(Wqe()).domain([.1,1,10]);return t.copy=function(){return qqe(t,e()).base(t.base())},wUe.apply(t,arguments)},[xHe,kHe,sHe]),PHe(`${hHe}-${lHe}`,Gqe,[xHe,kHe]),PHe(`${hHe}-${uHe}`,function(){return Gqe.apply(null,arguments).exponent(.5)},[xHe,kHe]),PHe(`${hHe}-${cHe}`,function e(){var t=Rqe(Wqe());return t.copy=function(){return qqe(t,e()).constant(t.constant())},wUe.apply(t,arguments)},[xHe,kHe]),PHe(mHe,function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=m4(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[G3(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(z3),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},bUe.apply(a,arguments)},[SHe,mHe]),PHe(gHe,function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[G3(o,e,0,i)]:t}function l(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,l()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,l()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},bUe.apply(xqe(s),arguments)},SHe),PHe(yHe,function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[G3(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},bUe.apply(o,arguments)},SHe),PHe(_He,function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(G3(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=function(e){return IHe.call(e,UMe)}(e),r):t.slice()},r.range=function(e){return arguments.length?(n=OHe.call(e),r):n.slice()},r.tickFormat=function(e,n){return _qe(t[0],zMe(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r},[EHe,SHe]),PHe(vHe,xUe,EHe),PHe(wHe,CHe,EHe),PHe(bHe,function(){return AHe(CHe().paddingInner(1))},EHe);const HHe=["clamp","base","constant","exponent"];function VHe(e,t){const n=t[0],r=zMe(t)-n;return function(t){return e(n+t*r)}}function WHe(e,t,n){return cqe(KHe(t||"rgb",n),e)}function GHe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function YHe(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=PHe(o)().domain([t,n]).range([0,1]),HHe.forEach(t=>e[t]?a[t](e[t]()):0),a):hPe(.5)}function KHe(e,t){const n=dqe[function(e){return"interpolate"+e.toLowerCase().split("-").map(e=>e[0].toUpperCase()+e.slice(1)).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function ZHe(e){if(PMe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function QHe(e,t){for(const n in e)JHe(n,t(e[n]))}const XHe={};function JHe(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(XHe[e]=t,this):XHe[e]}QHe({accent:Zqe,category10:Kqe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Qqe,observable10:Xqe,paired:Jqe,pastel1:eHe,pastel2:tHe,set1:nHe,set2:rHe,set3:iHe,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"},ZHe),QHe({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},e=>WHe(ZHe(e)));const eVe="symbol",tVe=e=>PMe(e)?e.map(e=>String(e)):String(e),nVe=(e,t)=>e[1]-t[1],rVe=(e,t)=>t[1]-e[1];function iVe(e,t,n){let r;return APe(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(LPe(e.domain())/n||1)+1))),FMe(t)&&(r=t.step,t=t.interval),OPe(t)&&(t=e.type===dHe?BFe(t):e.type==fHe?$Fe(t):SMe("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function oVe(e,t,n){let r=e.range(),i=r[0],o=zMe(r),a=nVe;if(i>o&&(r=o,o=i,i=r,a=rVe),i=Math.floor(i),o=Math.ceil(o),t=t.map(t=>[t,e(t)]).filter(e=>i<=e[1]&&e[1]<=o).sort(a).map(e=>e[0]),n>0&&t.length>1){const e=[t[0],zMe(t)];for(;t.length>n&&t.length>=3;)t=t.filter((e,t)=>!(t%2));t.length<3&&(t=e)}return t}function aVe(e,t){return e.bins?oVe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function sVe(e,t,n,r,i,o){const a=t.type;let s=tVe;if(a===dHe||i===dHe)s=e.timeFormat(r);else if(a===fHe||i===fHe)s=e.utcFormat(r);else if(zHe(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=lVe(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function lVe(e,t,n){const r=aVe(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const uVe={[mHe]:"quantiles",[gHe]:"thresholds",[yHe]:"domain"},cVe={[mHe]:"quantiles",[gHe]:"domain"};function dVe(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=zMe(e),t}(e.bins):e.type===sHe?lVe(e,t,!0):uVe[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[uVe[e.type]]()):aVe(e,t)}function fVe(e,t,n,r,i,o,a){const s=cVe[t.type]&&o!==dHe&&o!==fHe?function(e,t,n){const r=t[cVe[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):sVe(e,t,n,i,o,a);return r===eVe&&(e=>uVe[e.type]||e.bins)(t)?pVe(s):"discrete"===r?mVe(s):gVe(s)}const pVe=e=>(t,n,r)=>{const i=hVe(r[n+1],hVe(r.max,1/0)),o=yVe(t,e),a=yVe(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},hVe=(e,t)=>null!=e?e:t,mVe=e=>(t,n)=>n?e(t):null,gVe=e=>t=>e(t),yVe=(e,t)=>Number.isFinite(e)?t(e):null;function vVe(e,t,n,r){const i=r||t.type;return OPe(n)&&LHe(i,THe)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==dHe?n||i!==fHe?fVe(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function bVe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=vVe(e,t,n.format,n.formatType);if($He(t.type)){const e=dVe(t).slice(1).map(i),n=e.length;return`${n} boundar${1===n?"y":"ies"}: ${e.join(", ")}`}if(BHe(t.type)){const e=t.domain(),n=e.length;return`${n} value${1===n?"":"s"}: ${n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ")}`}{const e=t.domain();return`values from ${i(e[0])} to ${i(zMe(e))}`}}let wVe=0;const _Ve="p_";function xVe(e){return e&&e.gradient}function EVe(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?_Ve:"";return i||(i=e.id="gradient_"+wVe++,"radial"===r?(e.x1=SVe(e.x1,.5),e.y1=SVe(e.y1,.5),e.r1=SVe(e.r1,0),e.x2=SVe(e.x2,.5),e.y2=SVe(e.y2,.5),e.r2=SVe(e.r2,.5),o=_Ve):(e.x1=SVe(e.x1,0),e.y1=SVe(e.y1,0),e.x2=SVe(e.x2,1),e.y2=SVe(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function SVe(e,t){return null!=e?e:t}function kVe(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const TVe={basis:{curve:function(e){return new Uze(e)}},"basis-closed":{curve:function(e){return new qze(e)}},"basis-open":{curve:function(e){return new Hze(e)}},bundle:{curve:Wze,tension:"beta",value:.85},cardinal:{curve:Kze,tension:"tension",value:0},"cardinal-open":{curve:Jze,tension:"tension",value:0},"cardinal-closed":{curve:Qze,tension:"tension",value:0},"catmull-rom":{curve:nUe,tension:"alpha",value:.5},"catmull-rom-closed":{curve:iUe,tension:"alpha",value:.5},"catmull-rom-open":{curve:aUe,tension:"alpha",value:.5},linear:{curve:Mze},"linear-closed":{curve:function(e){return new sUe(e)}},monotone:{horizontal:function(e){return new pUe(e)},vertical:function(e){return new fUe(e)}},natural:{curve:function(e){return new mUe(e)}},step:{curve:function(e){return new yUe(e,.5)}},"step-after":{curve:function(e){return new yUe(e,1)}},"step-before":{curve:function(e){return new yUe(e,0)}}};function CVe(e,t,n){var r=bPe(TVe,e)&&TVe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const AVe={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},IVe=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,OVe=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,NVe=/^((\s+,?\s*)|(,\s*))/,DVe=/^[01]/;function RVe(e){const t=[];return(e.match(IVe)||[]).forEach(e=>{let n=e[0];const r=n.toLowerCase(),i=AVe[r],o=function(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const t="a"!==e||3!==o&&4!==o?OVe:DVe,a=n.slice(i).match(t);if(null===a)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const s=n.slice(i).match(NVe);null!==s&&(i+=s[0].length)}return r}(r,i,e.slice(1).trim()),a=o.length;if(a<i||a&&a%i!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([n,...o.slice(0,i)]),a!==i){"m"===r&&(n="M"===n?"L":"l");for(let e=i;e<a;e+=i)t.push([n,...o.slice(e,e+i)])}}),t}const MVe=Math.PI/180,PVe=Math.PI/2,FVe=2*Math.PI,LVe=Math.sqrt(3)/2;var jVe={},BVe={},$Ve=[].join;function zVe(e){const t=$Ve.call(e);if(BVe[t])return BVe[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const c=u*a,d=-l*s,f=l*a,p=u*s,h=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),w=8/3*b*b/Math.sin(v),_=n+h-w*m,x=r+m+w*h,E=n+g,S=r+y,k=E+w*y,T=S-w*g;return BVe[t]=[c*_+d*x,f*_+p*x,c*k+d*T,f*k+p*T,c*E+d*S,f*E+p*S]}const UVe=["l",0,0,0,0,0,0,0];function qVe(e,t,n){const r=UVe[0]=e[0];if("a"===r||"A"===r)UVe[1]=t*e[1],UVe[2]=n*e[2],UVe[3]=e[3],UVe[4]=e[4],UVe[5]=e[5],UVe[6]=t*e[6],UVe[7]=n*e[7];else if("h"===r||"H"===r)UVe[1]=t*e[1];else if("v"===r||"V"===r)UVe[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)UVe[i]=(i%2==1?t:n)*e[i];return UVe}function HVe(e,t,n,r,i,o){var a,s,l,u,c,d=null,f=0,p=0,h=0,m=0,g=0,y=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(a=t[v],1===i&&1===o||(a=qVe(a,i,o)),a[0]){case"l":f+=a[1],p+=a[2],e.lineTo(f+n,p+r);break;case"L":f=a[1],p=a[2],e.lineTo(f+n,p+r);break;case"h":f+=a[1],e.lineTo(f+n,p+r);break;case"H":f=a[1],e.lineTo(f+n,p+r);break;case"v":p+=a[1],e.lineTo(f+n,p+r);break;case"V":p=a[1],e.lineTo(f+n,p+r);break;case"m":g=f+=a[1],y=p+=a[2],e.moveTo(f+n,p+r);break;case"M":g=f=a[1],y=p=a[2],e.moveTo(f+n,p+r);break;case"c":s=f+a[5],l=p+a[6],h=f+a[3],m=p+a[4],e.bezierCurveTo(f+a[1]+n,p+a[2]+r,h+n,m+r,s+n,l+r),f=s,p=l;break;case"C":f=a[5],p=a[6],h=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,h+n,m+r,f+n,p+r);break;case"s":s=f+a[3],l=p+a[4],h=2*f-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,f+a[1]+n,p+a[2]+r,s+n,l+r),h=f+a[1],m=p+a[2],f=s,p=l;break;case"S":s=a[3],l=a[4],h=2*f-h,m=2*p-m,e.bezierCurveTo(h+n,m+r,a[1]+n,a[2]+r,s+n,l+r),f=s,p=l,h=a[1],m=a[2];break;case"q":s=f+a[3],l=p+a[4],h=f+a[1],m=p+a[2],e.quadraticCurveTo(h+n,m+r,s+n,l+r),f=s,p=l;break;case"Q":s=a[3],l=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,l+r),f=s,p=l,h=a[1],m=a[2];break;case"t":s=f+a[1],l=p+a[2],null===d[0].match(/[QqTt]/)?(h=f,m=p):"t"===d[0]?(h=2*f-u,m=2*p-c):"q"===d[0]&&(h=2*f-h,m=2*p-m),u=h,c=m,e.quadraticCurveTo(h+n,m+r,s+n,l+r),p=l,h=(f=s)+a[1],m=p+a[2];break;case"T":s=a[1],l=a[2],h=2*f-h,m=2*p-m,e.quadraticCurveTo(h+n,m+r,s+n,l+r),f=s,p=l;break;case"a":VVe(e,f+n,p+r,[a[1],a[2],a[3],a[4],a[5],a[6]+f+n,a[7]+p+r]),f+=a[6],p+=a[7];break;case"A":VVe(e,f+n,p+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),f=a[6],p=a[7];break;case"z":case"Z":f=g,p=y,e.closePath()}d=a}}function VVe(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,l){const u=$Ve.call(arguments);if(jVe[u])return jVe[u];const c=a*MVe,d=Math.sin(c),f=Math.cos(c),p=f*(s-e)*.5+d*(l-t)*.5,h=f*(l-t)*.5-d*(s-e)*.5;let m=p*p/((n=Math.abs(n))*n)+h*h/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,y=d/n,v=-d/r,b=f/r,w=g*s+y*l,_=v*s+b*l,x=g*e+y*t,E=v*e+b*t;let S=1/((x-w)*(x-w)+(E-_)*(E-_))-.25;S<0&&(S=0);let k=Math.sqrt(S);o==i&&(k=-k);const T=.5*(w+x)-k*(E-_),C=.5*(_+E)+k*(x-w),A=Math.atan2(_-C,w-T);let I=Math.atan2(E-C,x-T)-A;I<0&&1===o?I+=FVe:I>0&&0===o&&(I-=FVe);const O=Math.ceil(Math.abs(I/(PVe+.001))),N=[];for(let D=0;D<O;++D){const e=A+D*I/O,t=A+(D+1)*I/O;N[D]=[T,C,e,t,n,r,d,f]}return jVe[u]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const t=zVe(i[o]);e.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])}}const WVe=.5773502691896257,GVe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,FVe)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n,i=r-n*WVe,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n,i=r-n*WVe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=LVe*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function YVe(e){return bPe(GVe,e)?GVe[e]:function(e){if(!bPe(KVe,e)){const t=RVe(e);KVe[e]={draw:function(e,n){HVe(e,t,0,0,Math.sqrt(n)/2)}}}return KVe[e]}(e)}var KVe={};const ZVe=.448084975506;function QVe(e){return e.x}function XVe(e){return e.y}function JVe(e){return e.width}function eWe(e){return e.height}function tWe(e){return"function"==typeof e?e:()=>+e}function nWe(e,t,n){return Math.max(t,Math.min(e,n))}function rWe(){var e=QVe,t=XVe,n=JVe,r=eWe,i=tWe(0),o=i,a=i,s=i,l=null;function u(u,c,d){var f,p=null!=c?c:+e.call(this,u),h=null!=d?d:+t.call(this,u),m=+n.call(this,u),g=+r.call(this,u),y=Math.min(m,g)/2,v=nWe(+i.call(this,u),0,y),b=nWe(+o.call(this,u),0,y),w=nWe(+a.call(this,u),0,y),_=nWe(+s.call(this,u),0,y);if(l||(l=f=Sze()),v<=0&&b<=0&&w<=0&&_<=0)l.rect(p,h,m,g);else{var x=p+m,E=h+g;l.moveTo(p+v,h),l.lineTo(x-b,h),l.bezierCurveTo(x-ZVe*b,h,x,h+ZVe*b,x,h+b),l.lineTo(x,E-_),l.bezierCurveTo(x,E-ZVe*_,x-ZVe*_,E,x-_,E),l.lineTo(p+w,E),l.bezierCurveTo(p+ZVe*w,E,p,E-ZVe*w,p,E-w),l.lineTo(p,h+v),l.bezierCurveTo(p,h+ZVe*v,p+ZVe*v,h,p+v,h),l.closePath()}if(f)return l=null,f+""||null}return u.x=function(t){return arguments.length?(e=tWe(t),u):e},u.y=function(e){return arguments.length?(t=tWe(e),u):t},u.width=function(e){return arguments.length?(n=tWe(e),u):n},u.height=function(e){return arguments.length?(r=tWe(e),u):r},u.cornerRadius=function(e,t,n,r){return arguments.length?(i=tWe(e),o=null!=t?tWe(t):i,s=null!=n?tWe(n):i,a=null!=r?tWe(r):o,u):i},u.context=function(e){return arguments.length?(l=null==e?null:e,u):l},u}function iWe(){var e,t,n,r,i,o,a,s,l=null;function u(e,t,n){const r=n/2;if(i){var u=a-t,c=e-o;if(u||c){var d=Math.hypot(u,c),f=(u/=d)*s,p=(c/=d)*s,h=Math.atan2(c,u);l.moveTo(o-f,a-p),l.lineTo(e-u*r,t-c*r),l.arc(e,t,r,h-Math.PI,h),l.lineTo(o+f,a+p),l.arc(o,a,s,h,h+Math.PI)}else l.arc(e,t,r,0,FVe);l.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,d=o.length,f=!1;for(null==l&&(l=c=Sze()),a=0;a<=d;++a)!(a<d&&r(s=o[a],a,o))===f&&(f=!f)&&(i=0),f&&u(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return l=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(l=null==e?null:e,c):l},c}function oWe(e,t){return null!=e?e:t}const aWe=e=>e.x||0,sWe=e=>e.y||0,lWe=e=>!(!1===e.defined),uWe=function(){var e=Tze,t=Cze,n=oze(0),r=null,i=Aze,o=Ize,a=Oze,s=null,l=kze(u);function u(){var u,c,d,f=+e.apply(this,arguments),p=+t.apply(this,arguments),h=i.apply(this,arguments)-mze,m=o.apply(this,arguments)-mze,g=aze(m-h),y=m>h;if(s||(s=u=l()),p<f&&(c=p,p=f,f=c),p>pze)if(g>gze-pze)s.moveTo(p*lze(h),p*dze(h)),s.arc(0,0,p,h,m,!y),f>pze&&(s.moveTo(f*lze(m),f*dze(m)),s.arc(0,0,f,m,h,y));else{var v,b,w=h,_=m,x=h,E=m,S=g,k=g,T=a.apply(this,arguments)/2,C=T>pze&&(r?+r.apply(this,arguments):fze(f*f+p*p)),A=cze(aze(p-f)/2,+n.apply(this,arguments)),I=A,O=A;if(C>pze){var N=yze(C/f*dze(T)),D=yze(C/p*dze(T));(S-=2*N)>pze?(x+=N*=y?1:-1,E-=N):(S=0,x=E=(h+m)/2),(k-=2*D)>pze?(w+=D*=y?1:-1,_-=D):(k=0,w=_=(h+m)/2)}var R=p*lze(w),M=p*dze(w),P=f*lze(E),F=f*dze(E);if(A>pze){var L,j=p*lze(_),B=p*dze(_),$=f*lze(x),z=f*dze(x);if(g<hze)if(L=function(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=a-i,d=s-o,f=d*l-c*u;if(!(f*f<pze))return[e+(f=(c*(t-o)-d*(e-i))/f)*l,t+f*u]}(R,M,$,z,j,B,P,F)){var U=R-L[0],q=M-L[1],H=j-L[0],V=B-L[1],W=1/dze(((d=(U*H+q*V)/(fze(U*U+q*q)*fze(H*H+V*V)))>1?0:d<-1?hze:Math.acos(d))/2),G=fze(L[0]*L[0]+L[1]*L[1]);I=cze(A,(f-G)/(W-1)),O=cze(A,(p-G)/(W+1))}else I=O=0}k>pze?O>pze?(v=Nze($,z,R,M,p,O,y),b=Nze(j,B,P,F,p,O,y),s.moveTo(v.cx+v.x01,v.cy+v.y01),O<A?s.arc(v.cx,v.cy,O,sze(v.y01,v.x01),sze(b.y01,b.x01),!y):(s.arc(v.cx,v.cy,O,sze(v.y01,v.x01),sze(v.y11,v.x11),!y),s.arc(0,0,p,sze(v.cy+v.y11,v.cx+v.x11),sze(b.cy+b.y11,b.cx+b.x11),!y),s.arc(b.cx,b.cy,O,sze(b.y11,b.x11),sze(b.y01,b.x01),!y))):(s.moveTo(R,M),s.arc(0,0,p,w,_,!y)):s.moveTo(R,M),f>pze&&S>pze?I>pze?(v=Nze(P,F,j,B,f,-I,y),b=Nze(R,M,$,z,f,-I,y),s.lineTo(v.cx+v.x01,v.cy+v.y01),I<A?s.arc(v.cx,v.cy,I,sze(v.y01,v.x01),sze(b.y01,b.x01),!y):(s.arc(v.cx,v.cy,I,sze(v.y01,v.x01),sze(v.y11,v.x11),!y),s.arc(0,0,f,sze(v.cy+v.y11,v.cx+v.x11),sze(b.cy+b.y11,b.cx+b.x11),y),s.arc(b.cx,b.cy,I,sze(b.y11,b.x11),sze(b.y01,b.x01),!y))):s.arc(0,0,f,E,x,y):s.lineTo(P,F)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-hze/2;return[lze(r)*n,dze(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:oze(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:oze(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:oze(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:oze(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:oze(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:oze(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:oze(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle(e=>e.startAngle||0).endAngle(e=>e.endAngle||0).padAngle(e=>e.padAngle||0).innerRadius(e=>e.innerRadius||0).outerRadius(e=>e.outerRadius||0).cornerRadius(e=>e.cornerRadius||0),cWe=jze().x(aWe).y1(sWe).y0(e=>(e.y||0)+(e.height||0)).defined(lWe),dWe=jze().y(sWe).x1(aWe).x0(e=>(e.x||0)+(e.width||0)).defined(lWe),fWe=Lze().x(aWe).y(sWe).defined(lWe),pWe=rWe().x(aWe).y(sWe).width(e=>e.width||0).height(e=>e.height||0).cornerRadius(e=>oWe(e.cornerRadiusTopLeft,e.cornerRadius)||0,e=>oWe(e.cornerRadiusTopRight,e.cornerRadius)||0,e=>oWe(e.cornerRadiusBottomRight,e.cornerRadius)||0,e=>oWe(e.cornerRadiusBottomLeft,e.cornerRadius)||0),hWe=function(e,t){let n=null,r=kze(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"==typeof e?e:oze(e||Bze),t="function"==typeof t?t:oze(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:oze(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:oze(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e=>YVe(e.shape||"circle")).size(e=>oWe(e.size,64)),mWe=iWe().x(aWe).y(sWe).defined(lWe).size(e=>e.size||1);function gWe(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function yWe(e,t,n,r){return pWe.context(e)(t,n,r)}var vWe=1;function bWe(){vWe=1}function wWe(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+vWe++),a=i.clipping[o]||(i.clipping[o]={id:o});return lPe(r)?a.path=r(null):gWe(n)?a.path=yWe(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function _We(e){this.clear(),e&&this.union(e)}function xWe(e){this.mark=e,this.bounds=this.bounds||new _We}function EWe(e){xWe.call(this,e),this.items=this.items||[]}_We.prototype={clone(){return new _We(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,c=n-t*l-n*s;return[s*r-l*i+u,l*r+s*i+c,s*r-l*a+u,l*r+s*a+c,s*o-l*i+u,l*o+s*i+c,s*o-l*a+u,l*o+s*a+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},EPe(EWe,xWe);class SWe{constructor(e){this._pending=0,this._loader=e||KLe()}pending(){return this._pending}sanitizeURL(e){const t=this;return kWe(t),t._loader.sanitize(e,{context:"href"}).then(e=>(TWe(t),e)).catch(()=>(TWe(t),null))}loadImage(e){const t=this,n="undefined"!=typeof Image?Image:null;return kWe(t),t._loader.sanitize(e,{context:"image"}).then(e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=bPe(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>TWe(t),i.onerror=()=>TWe(t),i.src=r,i}).catch(e=>(TWe(t),{complete:!1,width:0,height:0,src:e&&e.url||""}))}ready(){const e=this;return new Promise(t=>{!function n(r){e.pending()?setTimeout(()=>{n(!0)},10):t(r)}(!1)})}}function kWe(e){e._pending+=1}function TWe(e){e._pending-=1}function CWe(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}const AWe=FVe-1e-8;let IWe,OWe,NWe,DWe,RWe,MWe,PWe,FWe;const LWe=(e,t)=>IWe.add(e,t),jWe=(e,t)=>LWe(OWe=e,NWe=t),BWe=e=>LWe(e,IWe.y1),$We=e=>LWe(IWe.x1,e),zWe=(e,t)=>RWe*e+PWe*t,UWe=(e,t)=>MWe*e+FWe*t,qWe=(e,t)=>LWe(zWe(e,t),UWe(e,t)),HWe=(e,t)=>jWe(zWe(e,t),UWe(e,t));function VWe(e,t){return IWe=e,t?(DWe=t*MVe,RWe=FWe=Math.cos(DWe),MWe=Math.sin(DWe),PWe=-MWe):(RWe=FWe=1,DWe=MWe=PWe=0),WWe}const WWe={beginPath(){},closePath(){},moveTo:HWe,lineTo:HWe,rect(e,t,n,r){DWe?(qWe(e+n,t),qWe(e+n,t+r),qWe(e,t+r),HWe(e,t)):(LWe(e+n,t+r),jWe(e,t))},quadraticCurveTo(e,t,n,r){const i=zWe(e,t),o=UWe(e,t),a=zWe(n,r),s=UWe(n,r);GWe(OWe,i,a,BWe),GWe(NWe,o,s,$We),jWe(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=zWe(e,t),s=UWe(e,t),l=zWe(n,r),u=UWe(n,r),c=zWe(i,o),d=UWe(i,o);YWe(OWe,a,l,c,BWe),YWe(NWe,s,u,d,$We),jWe(c,d)},arc(e,t,n,r,i,o){if(r+=DWe,i+=DWe,OWe=n*Math.cos(i)+e,NWe=n*Math.sin(i)+t,Math.abs(i-r)>AWe)LWe(e-n,t-n),LWe(e+n,t+n);else{const a=r=>LWe(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,l;if(a(r),a(i),i!==r)if((r%=FVe)<0&&(r+=FVe),(i%=FVe)<0&&(i+=FVe),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=FVe,s=r-r%PVe,l=0;l<4&&s>i;++l,s-=PVe)a(s);else for(s=r-r%PVe+PVe,l=0;l<4&&s<i;++l,s+=PVe)a(s)}}};function GWe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function YWe(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let l,u=0,c=0;Math.abs(o)>1e-14?(l=a*a+s*o,l>=0&&(l=Math.sqrt(l),u=(-a+l)/o,c=(-a-l)/o)):u=.5*s/a,0<u&&u<1&&i(KWe(u,e,t,n,r)),0<c&&c<1&&i(KWe(c,e,t,n,r))}function KWe(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var ZWe=(ZWe=vUe(1,1))?ZWe.getContext("2d"):null;const QWe=new _We;function XWe(e){return function(t,n){if(!ZWe)return!0;e(ZWe,t),QWe.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=QWe;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(ZWe.isPointInPath(t,e))return!0;return!1}}function JWe(e,t){return t.contains(e.x||0,e.y||0)}function eGe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(QWe.set(n,r,n+i,r+o))}function tGe(e,t){const n=e.x||0,r=e.y||0;return nGe(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function nGe(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:l}=e,u=r-t,c=i-n;let d,f,p,h,m=0,g=1;for(h=0;h<4;++h){if(0===h&&(d=-u,f=-(o-t)),1===h&&(d=u,f=s-t),2===h&&(d=-c,f=-(a-n)),3===h&&(d=c,f=l-n),Math.abs(d)<1e-10&&f<0)return!1;if(p=f/d,d<0){if(p>g)return!1;p>m&&(m=p)}else if(d>0){if(p<m)return!1;p<g&&(g=p)}}return!0}function rGe(e,t){e.globalCompositeOperation=t.blend||"source-over"}function iGe(e,t){return null==e?t:e}function oGe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function aGe(e,t,n){return xVe(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+iGe(t.x1,.5)*r,n.y1+iGe(t.y1,.5)*i,Math.max(r,i)*iGe(t.r1,0),n.x1+iGe(t.x2,.5)*r,n.y1+iGe(t.y2,.5)*i,Math.max(r,i)*iGe(t.r2,.5));else{const a=iGe(t.x1,0),s=iGe(t.y1,0),l=iGe(t.x2,1),u=iGe(t.y2,0);if(a!==l&&s!==u&&r!==i){const n=vUe(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=oGe(o.createLinearGradient(a,s,l,u),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+l*r,n.y1+u*i)}return oGe(o,t.stops)}(e,n,t.bounds):n}function sGe(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=aGe(e,t,t.fill),!0)}var lGe=[];function uGe(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=aGe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||lGe),e.lineDashOffset=t.strokeDashOffset||0),!0))}function cGe(e,t){return e.zindex-t.zindex||e.index-t.index}function dGe(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(cGe)}function fGe(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=dGe(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function pGe(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=dGe(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function hGe(e){return function(t,n,r){fGe(n,n=>{r&&!r.intersects(n.bounds)||mGe(e,t,n,n)})}}function mGe(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(rGe(t,n),n.fill&&sGe(t,n,i)&&t.fill(),n.stroke&&uGe(t,n,i)&&t.stroke()))}function gGe(e){return e=e||NMe,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,pGe(n,n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0})}}function yGe(e,t){return function(n,r,i,o){var a,s,l=Array.isArray(r)?r[0]:r,u=null==t?l.fill:t,c=l.stroke&&n.isPointInStroke;return c&&(a=l.strokeWidth,s=l.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(u&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function vGe(e){return gGe(yGe(e))}function bGe(e,t){return"translate("+e+","+t+")"}function wGe(e){return"rotate("+e+")"}function _Ge(e){return bGe(e.x||0,e.y||0)}function xGe(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=MVe),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return bGe(e.x||0,e.y||0)+(e.angle?" "+wGe(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(VWe(e,n.angle),n),CWe(e,n).translate(n.x||0,n.y||0)},draw:hGe(r),pick:vGe(r),isect:n||XWe(r)}}var EGe=xGe("arc",function(e,t){return uWe.context(e)(t)});function SGe(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=yGe(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(VWe(e),r),CWe(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||mGe(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,l=t.bounds;return!s||!s.length||l&&!l.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:JWe,tip:n};var o}var kGe=SGe("area",function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?dWe:cWe).curve(CVe(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n});function TGe(e,t){e.beginPath(),gWe(t)?yWe(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function CGe(e){const t=iGe(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function AGe(e,t){const n=CGe(t);e("d",yWe(null,t,n,n))}function IGe(e,t,n,r){const i=CGe(t);e.beginPath(),yWe(e,t,(n||0)+i,(r||0)+i)}const OGe=yGe(IGe),NGe=yGe(IGe,!1),DGe=yGe(IGe,!0);var RGe={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",_Ge(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),CWe(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n,r){fGe(t,t=>{const i=t.x||0,o=t.y||0,a=t.strokeForeground,s=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&s&&(IGe(e,t,i,o),rGe(e,t),t.fill&&sGe(e,t,s)&&e.fill(),t.stroke&&!a&&uGe(e,t,s)&&e.stroke()),e.save(),e.translate(i,o),t.clip&&TGe(e,t),n&&n.translate(-i,-o),fGe(t,t=>{("group"===t.marktype||null==r||r.includes(t.marktype))&&this.draw(e,t,n,r)}),n&&n.translate(i,o),e.restore(),a&&t.stroke&&s&&(IGe(e,t,i,o),rGe(e,t),uGe(e,t,s)&&e.stroke())})},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return pGe(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,o))return;c=l.x||0,d=l.y||0;const p=c+(l.width||0),h=d+(l.height||0),m=l.clip;if(m&&(i<c||i>p||o<d||o>h))return;if(e.save(),e.translate(c,d),c=i-c,d=o-d,m&&gWe(l)&&!DGe(e,l,a,s))return e.restore(),null;const g=l.strokeForeground,y=!1!==t.interactive;return y&&g&&l.stroke&&NGe(e,l,a,s)?(e.restore(),l):(u=pGe(l,e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,d)?this.pick(e,n,r,c,d):null),!u&&y&&(l.fill||!g&&l.stroke)&&OGe(e,l,a,s)&&(u=l),e.restore(),u||null)})},isect:eGe,content:function(e,t,n){e("clip-path",t.clip?wWe(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),AGe(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?AGe(e,t):e("d","")}},MGe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function PGe(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(t=>{e.image=t,e.image.url=e.url})),n}function FGe(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function LGe(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function jGe(e,t){return"center"===e?t/2:"right"===e?t:0}function BGe(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var $Ge={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=PGe(t,n),i=FGe(t,r),o=LGe(t,r),a=(t.x||0)-jGe(t.align,i),s=(t.y||0)-BGe(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",MGe["xmlns:xlink"],"xlink:href"),e("transform",bGe(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=FGe(t,n),i=LGe(t,n),o=(t.x||0)-jGe(t.align,r),a=(t.y||0)-BGe(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){fGe(t,t=>{if(n&&!n.intersects(t.bounds))return;const r=PGe(t,this);let i=FGe(t,r),o=LGe(t,r);if(0===i||0===o)return;let a,s,l,u,c=(t.x||0)-jGe(t.align,i),d=(t.y||0)-BGe(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,l=t.width/t.height,s==s&&l==l&&s!==l&&(l<s?(u=i/s,d+=(o-u)/2,o=u):(u=o*s,c+=(i-u)/2,i=u))),(r.complete||r.toDataURL)&&(rGe(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,d,i,o))})},pick:gGe(),isect:NMe,get:PGe,xOffset:jGe,yOffset:BGe},zGe=SGe("line",function(e,t){const n=t[0],r=n.interpolate||"linear";return fWe.curve(CVe(r,n.orient,n.tension)).context(e)(t)},function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null});function UGe(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*MVe,l=t.pathCache;l&&l.path===n||((t.pathCache=l=RVe(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),HVe(e,l,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):HVe(e,l,r,i,o,a)}var qGe={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return bGe(e.x||0,e.y||0)+(e.angle?" "+wGe(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return UGe(VWe(e,t.angle),t)?e.set(0,0,0,0):CWe(e,t,!0)},draw:hGe(UGe),pick:vGe(UGe),isect:XWe(UGe)};function HGe(e,t){e.beginPath(),yWe(e,t)}var VGe={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",yWe(null,t))},bound:function(e,t){var n,r;return CWe(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:hGe(HGe),pick:vGe(HGe),isect:eGe};function WGe(e,t,n){var r,i,o,a;return!(!t.stroke||!uGe(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var GGe={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",_Ge(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return CWe(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){fGe(t,t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&WGe(e,t,r)&&(rGe(e,t),e.stroke())}})},pick:gGe(function(e,t,n,r){return!!e.isPointInStroke&&(WGe(e,t,1)&&e.isPointInStroke(n,r))}),isect:tGe},YGe=xGe("shape",function(e,t){return(t.mark.shape||t.shape).context(e)(t)}),KGe=xGe("symbol",function(e,t){return hWe.context(e)(t)},JWe);const ZGe=RPe();var QGe={height:rYe,measureWidth:tYe,estimateWidth:JGe,width:JGe,canvas:XGe};function XGe(e){QGe.width=e&&ZWe?tYe:JGe}function JGe(e,t){return eYe(sYe(e,t),rYe(e))}function eYe(e,t){return~~(.8*e.length*t)}function tYe(e,t){return rYe(e)<=0||!(t=sYe(e,t))?0:nYe(t,uYe(e))}function nYe(e,t){const n=`(${t}) ${e}`;let r=ZGe.get(n);return void 0===r&&(ZWe.font=t,r=ZWe.measureText(e).width,ZGe.set(n,r)),r}function rYe(e){return null!=e.fontSize?+e.fontSize||0:11}function iYe(e){return null!=e.lineHeight?e.lineHeight:rYe(e)+2}function oYe(e){return t=e.lineBreak&&e.text&&!PMe(e.text)?e.text.split(e.lineBreak):e.text,PMe(t)?t.length>1?t:t[0]:t;var t}function aYe(e){const t=oYe(e);return(PMe(t)?t.length-1:0)*iYe(e)}function sYe(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(QGe.width===tYe){const t=uYe(e);return e=>nYe(e,t)}if(QGe.width===JGe){const t=rYe(e);return e=>eYe(e,t)}return t=>QGe.width(e,t)}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"…",a="rtl"===e.dir,s=0,l=t.length;if(n-=r(o),a){for(;s<l;)i=s+l>>>1,r(t.slice(i))>n?s=i+1:l=i;return o+t.slice(s)}for(;s<l;)i=1+(s+l>>>1),r(t.slice(0,i))<n?s=i:l=i-1;return t.slice(0,s)+o}(e,n):n}function lYe(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function uYe(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+rYe(e)+"px "+lYe(e,t)}function cYe(e){var t=e.baseline,n=rYe(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*iYe(e):"line-bottom"===t?.29*n-.5*iYe(e):0)}XGe(!0);const dYe={left:"start",center:"middle",right:"end"},fYe=new _We;function pYe(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-PVe,n+=i*Math.cos(t),r+=i*Math.sin(t)),fYe.x1=n,fYe.y1=r,fYe}function hYe(e,t,n){var r,i=QGe.height(t),o=t.align,a=pYe(t),s=a.x1,l=a.y1,u=t.dx||0,c=(t.dy||0)+cYe(t)-Math.round(.8*i),d=oYe(t);if(PMe(d)?(i+=iYe(t)*(d.length-1),r=d.reduce((e,n)=>Math.max(e,QGe.width(t,n)),0)):r=QGe.width(t,d),"center"===o?u-=r/2:"right"===o&&(u-=r),e.set(u+=s,c+=l,u+r,c+i),t.angle&&!n)e.rotate(t.angle*MVe,s,l);else if(2===n)return e.rotatedPoints(t.angle*MVe,s,l);return e}var mYe={type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+cYe(t),o=pYe(t),a=o.x1,s=o.y1,l=t.angle||0;e("text-anchor",dYe[t.align]||"start"),l?(n=bGe(a,s)+" "+wGe(l),(r||i)&&(n+=" "+bGe(r,i))):n=bGe(a+r,s+i),e("transform",n)},bound:hYe,draw:function(e,t,n){fGe(t,t=>{var r,i,o,a,s,l,u,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=uYe(t),e.textAlign=t.align||"left",i=(r=pYe(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*MVe),i=o=0),i+=t.dx||0,o+=(t.dy||0)+cYe(t),l=oYe(t),rGe(e,t),PMe(l))for(s=iYe(t),a=0;a<l.length;++a)u=sYe(t,l[a]),t.fill&&sGe(e,t,c)&&e.fillText(u,i,o),t.stroke&&uGe(e,t,c)&&e.strokeText(u,i,o),o+=s;else u=sYe(t,l),t.fill&&sGe(e,t,c)&&e.fillText(u,i,o),t.stroke&&uGe(e,t,c)&&e.strokeText(u,i,o);t.angle&&e.restore()}})},pick:gGe(function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=pYe(t),s=a.x1,l=a.y1,u=hYe(fYe,t,1),c=-t.angle*MVe,d=Math.cos(c),f=Math.sin(c),p=d*i-f*o+(s-d*s+f*l),h=f*i+d*o+(l-f*s-d*l);return u.contains(p,h)}),isect:function(e,t){const n=hYe(fYe,e,2);return nGe(t,n[0],n[1],n[2],n[3])||nGe(t,n[0],n[1],n[4],n[5])||nGe(t,n[4],n[5],n[6],n[7])||nGe(t,n[2],n[3],n[6],n[7])}},gYe=SGe("trail",function(e,t){return mWe.context(e)(t)},function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}),yYe={arc:EGe,area:kGe,group:RGe,image:$Ge,line:zGe,path:qGe,rect:VGe,rule:GGe,shape:YGe,symbol:KGe,text:mYe,trail:gYe};function vYe(e,t,n){var r=yYe[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new _We),e,n)}var bYe={mark:null};function wYe(e,t,n){var r,i,o,a,s=yYe[e.marktype],l=s.bound,u=e.items,c=u&&u.length;if(s.nested)return c?o=u[0]:(bYe.mark=e,o=bYe),a=vYe(o,l,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new _We,c)for(r=0,i=u.length;r<i;++r)t.union(vYe(u[r],l,n));return e.bounds=t}const _Ye=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function xYe(e,t){return JSON.stringify(e,_Ye,t)}function EYe(e){return SYe("string"==typeof e?JSON.parse(e):e)}function SYe(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&SYe(o[n]);return i&&wYe(e),e}class kYe{constructor(e){arguments.length?this.root=EYe(e):(this.root=TYe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new EWe(this.root)])}toJSON(e){return xYe(this.root,e||0)}mark(e,t,n){const r=TYe(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}}function TYe(e,t){const n={bounds:new _We,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function CYe(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function AYe(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function IYe(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=CYe(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function OYe(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function NYe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function DYe(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}let RYe=class{constructor(e,t){this._active=null,this._handlers={},this._loader=e||KLe(),this._tooltip=t||MYe}initialize(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()}scene(e){return arguments.length?(this._scene=e,this):this._scene}on(){}off(){}_handlerIndex(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1}handlers(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const r in t)n.push(...t[r]);return n}eventName(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)}handleHref(e,t,n){this._loader.sanitize(n,{context:"href"}).then(t=>{const n=new MouseEvent(e.type,e),r=CYe(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)}).catch(()=>{})}handleTooltip(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=yYe[a.marktype]).tip){for((o=DYe(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}}getItemBoundingClientRect(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,l=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,l+=e.y||0;return{x:s,y:l,width:o,height:a,left:s,top:l,right:s+o,bottom:l+a}}};function MYe(e,t,n,r){e.element().setAttribute("title",r||"")}class PYe{constructor(e){this._el=null,this._bgcolor=null,this._loader=new SWe(e)}initialize(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)}resize(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this}dirty(){}render(e,t){const n=this;return n._call=function(){n._render(e,t)},n._call(),n._call=null,n}_render(){}renderAsync(e,t){const n=this.render(e,t);return this._ready?this._ready.then(()=>n):Promise.resolve(n)}_load(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then(t=>{t&&e(),n._ready=null})}return r}sanitizeURL(e){return this._load("sanitizeURL",e)}loadImage(e){return this._load("loadImage",e)}}const FYe="dragenter",LYe="dragleave",jYe="dragover",BYe="pointerdown",$Ye="pointermove",zYe="pointerout",UYe="pointerover",qYe="mousedown",HYe="mousemove",VYe="mouseout",WYe="mouseover",GYe="click",YYe="mousewheel",KYe="touchstart",ZYe="touchmove",QYe="touchend",XYe=["keydown","keypress","keyup",FYe,LYe,jYe,BYe,"pointerup",$Ye,zYe,UYe,qYe,"mouseup",HYe,VYe,WYe,GYe,"dblclick","wheel",YYe,KYe,ZYe,QYe],JYe=$Ye,eKe=VYe,tKe=GYe;class nKe extends RYe{constructor(e,t){super(e,t),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=XYe,this.pointermove=aKe([$Ye,HYe],[UYe,WYe],[zYe,VYe]),this.dragover=aKe([jYe],[FYe],[LYe]),this.pointerout=sKe([zYe,VYe]),this.dragleave=sKe([LYe])}initialize(e,t,n){return this._canvas=e&&AYe(e,"canvas"),[GYe,qYe,BYe,$Ye,zYe,LYe].forEach(e=>iKe(this,e)),super.initialize(e,t,n)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(e){this.fire(YYe,e)}pointerdown(e){this._down=this._active,this.fire(BYe,e)}mousedown(e){this._down=this._active,this.fire(qYe,e)}click(e){this._down===this._active&&(this.fire(GYe,e),this._down=null)}touchstart(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(KYe,e,!0)}touchmove(e){this.fire(ZYe,e,!0)}touchend(e){this.fire(QYe,e,!0),this._touch=null}fire(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===tKe&&r&&r.href?this.handleHref(t,r,r.href):e!==JYe&&e!==eKe||this.handleTooltip(t,r,e!==eKe),i)for(let o=0,a=i.length;o<a;++o)i[o].handler.call(this._obj,t,r)}on(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(iKe(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this}off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this}pickEvent(e){const t=DYe(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])}pick(e,t,n,r,i){const o=this.context();return yYe[e.marktype].pick.call(this,o,e,t,n,r,i)}}const rKe=e=>e===KYe||e===ZYe||e===QYe?[KYe,ZYe,QYe]:[e];function iKe(e,t){rKe(t).forEach(t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t))}function oKe(e,t,n){t.forEach(t=>e.fire(t,n))}function aKe(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||oKe(this,n,r),this._active=o,oKe(this,t,r)),oKe(this,e,r)}}function sKe(e){return function(t){oKe(this,e,t),this._active=null}}function lKe(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),l=a?"undefined"!=typeof window&&window.devicePixelRatio||1:i;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&1!==l&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class uKe extends PYe{constructor(e){super(e),this._options={},this._redraw=!1,this._dirty=new _We,this._tempb=new _We}initialize(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:vUe(1,1,this._options.type),e&&this._canvas&&(OYe(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(e,t,n,r,i)}resize(e,t,n,r){if(super.resize(e,t,n,r),this._canvas)lKe(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||SMe("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)}_render(e,t){const n=this.context(),r=this._origin,i=this._width,o=this._height,a=this._dirty,s=cKe(r,i,o);n.save();const l=this._redraw||a.empty()?(this._redraw=!1,s.expand(1)):function(e,t,n){t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio);return t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(n,s.intersect(a),r);return this.clear(-r[0],-r[1],i,o),this.draw(n,e,l,t),n.restore(),a.clear(),this}draw(e,t,n,r){if("group"!==t.marktype&&null!=r&&!r.includes(t.marktype))return;const i=yYe[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),lPe(n)?(e.beginPath(),n(e),e.clip()):TGe(e,t.group)}(e,t),i.draw.call(this,e,t,n,r),t.clip&&e.restore()}clear(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}}const cKe=(e,t,n)=>(new _We).set(0,0,t,n).translate(-e[0],-e[1]);class dKe extends RYe{constructor(e,t){super(e,t);const n=this;n._hrefHandler=fKe(n,(e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)}),n._tooltipHandler=fKe(n,(e,t)=>{n.handleTooltip(e,t,e.type!==eKe)})}initialize(e,t,n){let r=this._svg;return r&&(r.removeEventListener(tKe,this._hrefHandler),r.removeEventListener(JYe,this._tooltipHandler),r.removeEventListener(eKe,this._tooltipHandler)),this._svg=r=e&&AYe(e,"svg"),r&&(r.addEventListener(tKe,this._hrefHandler),r.addEventListener(JYe,this._tooltipHandler),r.addEventListener(eKe,this._tooltipHandler)),super.initialize(e,t,n)}canvas(){return this._svg}on(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:fKe(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this}off(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}}const fKe=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},pKe="aria-hidden",hKe="aria-label",mKe="role",gKe="aria-roledescription",yKe="graphics-object",vKe="graphics-symbol",bKe=(e,t,n)=>({[mKe]:e,[gKe]:t,[hKe]:n||void 0}),wKe=qPe(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),_Ke={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?TKe(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${BHe(s)?"discrete":s} scale with ${bVe(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?TKe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,l=a.dataflow.locale();return function(e){return e.length?e[0].toUpperCase()+e.slice(1):e}(r)+(n?` titled '${n}'`:"")+` for ${function(e){return e=e.map(e=>e+("fill"===e||"stroke"===e?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+zMe(e)}(o)} with ${bVe(l,s,e)}`}},"title-text":{desc:"title",caption:e=>`Title text '${kKe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${kKe(e)}'`}},xKe={ariaRole:mKe,ariaRoleDescription:gKe,description:hKe};function EKe(e,t){const n=!1===t.aria;if(e(pKe,n||void 0),n||null==t.description)for(const r in xKe)e(xKe[r],void 0);else{const n=t.mark.marktype;e(hKe,t.description),e(mKe,t.ariaRole||("group"===n?yKe:vKe)),e(gKe,t.ariaRoleDescription||`${n} mark`)}}function SKe(e){return!1===e.aria?{[pKe]:!0}:wKe[e.role]?null:_Ke[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return bKe(t.role||vKe,t.desc,n.description||r(n))}catch(HOt){return null}}(e,_Ke[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some(e=>null!=e.description&&!1!==e.aria);return bKe(n?yKe:vKe,`${t} mark container`,e.description)}(e)}function kKe(e){return aPe(e.text).join(" ")}function TKe(e){try{return aPe(zMe(e.items).items[0].text).join(" ")}catch(HOt){return null}}const CKe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function AKe(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,CKe(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open(s){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(var l=arguments.length,u=new Array(l>1?l-1:0),c=1;c<l;c++)u[c-1]=arguments[c];for(const e of u)for(const t in e)o(t,e[t]);return a},close(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=CKe(e),a),toString:()=>e};return a}const IKe=e=>OKe(AKe(),e)+"";function OKe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const t of n)3===t.nodeType?e.text(t.nodeValue):OKe(e,t)}return e.close()}const NKe={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},DKe={blend:"mix-blend-mode"},RKe={fill:"none","stroke-miterlimit":10},MKe="http://www.w3.org/2000/xmlns/",PKe=MGe.xmlns;class FKe extends PYe{constructor(e){super(e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=IYe(e,0,"svg",PKe),this._svg.setAttributeNS(MKe,"xmlns",PKe),this._svg.setAttributeNS(MKe,"xmlns:xlink",MGe["xmlns:xlink"]),this._svg.setAttribute("version",MGe.version),this._svg.setAttribute("class","marks"),OYe(e,1),this._root=IYe(this._svg,0,"g",PKe),WKe(this._root,RKe),OYe(this._svg,1)),this.background(this._bgcolor),super.initialize(e,t,n,r,i)}background(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),super.background(...arguments)}resize(e,t,n,r){return super.resize(e,t,n,r),this._svg&&(WKe(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=IYe(e,0,"rect",PKe),WKe(n,{width:this._width,height:this._height,fill:t}));const r=IKe(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r}_render(e,t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e,void 0,t),OYe(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))}isDirty(e){return this._dirtyAll||!e._svg||!e._svg.ownerSVGElement||e.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,l;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=yYe[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,LKe(n,t),r.items.forEach(e=>{e.dirty=t})),r.zdirty||(n.exit?(o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,LKe(n,t)),n._update=t)));return!this._dirtyAll}mark(e,t,n,r){if(!this.isDirty(t))return t._svg;const i=this._svg,o=t.marktype,a=yYe[o],s=!1===t.interactive?"none":null,l="g"===a.tag,u=$Ke(t,e,n,"g",i);if("group"!==o&&null!=r&&!r.includes(o))return OYe(u,0),t._svg;u.setAttribute("class",NYe(t));const c=SKe(t);for(const h in c)GKe(u,h,c[h]);l||GKe(u,"pointer-events",s),GKe(u,"clip-path",t.clip?wWe(this,t,t.group):null);let d=null,f=0;const p=e=>{const t=this.isDirty(e),n=$Ke(e,u,d,a.tag,i);t&&(this._update(a,n,e),l&&function(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;fGe(n,n=>{i=e.mark(t,n,i,r),++o}),OYe(t,1+o)}(this,n,e,r)),d=n,++f};return a.nested?t.items.length&&p(t.items[0]):fGe(t,p),OYe(u,f),u}_update(e,t,n){zKe=t,UKe=t.__values__,EKe(HKe,n),e.attr(HKe,n,this);const r=qKe[e.type];r&&r.call(this,e,t,n),zKe&&this.style(zKe,n)}style(e,t){if(null!=t){for(const n in NKe){let r="font"===n?lYe(t):t[n];if(r===UKe[n])continue;const i=NKe[n];null==r?e.removeAttribute(i):(xVe(r)&&(r=EVe(r,this._defs.gradient,YKe())),e.setAttribute(i,r+"")),UKe[n]=r}for(const n in DKe)VKe(e,DKe[n],t[n])}}defs(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=IYe(e,1,"defs",PKe)),r=jKe(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=IYe(e,1,"defs",PKe)),r=BKe(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):OYe(n,r))}_clearDefs(){const e=this._defs;e.gradient={},e.clipping={}}}function LKe(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function jKe(e,t,n){let r,i,o;if("radial"===t.gradient){let r=IYe(e,n++,"pattern",PKe);WKe(r,{id:_Ve+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=IYe(r,0,"rect",PKe),WKe(r,{width:1,height:1,fill:`url(${YKe()}#${t.id})`}),WKe(e=IYe(e,n++,"radialGradient",PKe),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else WKe(e=IYe(e,n++,"linearGradient",PKe),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=IYe(e,r,"stop",PKe),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return OYe(e,r),n}function BKe(e,t,n){let r;return(e=IYe(e,n,"clipPath",PKe)).setAttribute("id",t.id),t.path?(r=IYe(e,0,"path",PKe),r.setAttribute("d",t.path)):(r=IYe(e,0,"rect",PKe),WKe(r,{x:0,y:0,width:t.width,height:t.height})),OYe(e,1),n+1}function $Ke(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=CYe(o,r,PKe),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=CYe(o,"path",PKe);a.appendChild(t),t.__data__=e;const n=CYe(o,"g",PKe);a.appendChild(n),n.__data__=e;const r=CYe(o,"path",PKe);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}let zKe=null,UKe=null;const qKe={group(e,t,n){const r=zKe=t.childNodes[2];UKe=r.__values__,e.foreground(HKe,n,this),UKe=t.__values__,zKe=t.childNodes[1],e.content(HKe,n,this);const i=zKe=t.childNodes[0];e.background(HKe,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==UKe.events&&(GKe(r,"pointer-events",o),GKe(i,"pointer-events",o),UKe.events=o),n.strokeForeground&&n.stroke){const e=n.fill;GKe(r,"display",null),this.style(i,n),GKe(i,"stroke",null),e&&(n.fill=null),UKe=r.__values__,this.style(r,n),e&&(n.fill=e),zKe=null}else GKe(r,"display","none")},image(e,t,n){!1===n.smooth?(VKe(t,"image-rendering","optimizeSpeed"),VKe(t,"image-rendering","pixelated")):VKe(t,"image-rendering",null)},text(e,t,n){const r=oYe(n);let i,o,a,s;PMe(r)?(o=r.map(e=>sYe(n,e)),i=o.join("\n"),i!==UKe.text&&(OYe(t,0),a=t.ownerDocument,s=iYe(n),o.forEach((e,r)=>{const i=CYe(a,"tspan",PKe);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)}),UKe.text=i)):(o=sYe(n,r),o!==UKe.text&&(t.textContent=o,UKe.text=o)),GKe(t,"font-family",lYe(n)),GKe(t,"font-size",rYe(n)+"px"),GKe(t,"font-style",n.fontStyle),GKe(t,"font-variant",n.fontVariant),GKe(t,"font-weight",n.fontWeight)}};function HKe(e,t,n){t!==UKe[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(zKe,e,t,n):GKe(zKe,e,t),UKe[e]=t)}function VKe(e,t,n){n!==UKe[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),UKe[t]=n)}function WKe(e,t){for(const n in t)GKe(e,n,t[n])}function GKe(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function YKe(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class KKe extends PYe{constructor(e){super(e),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(e){const t=AKe();t.open("svg",gPe({},MGe,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",RKe,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this}mark(e,t){const n=yYe[t.marktype],r=n.tag,i=[EKe,n.attr];e.open("g",{class:NYe(t),"clip-path":t.clip?wWe(this,t,t.group):null},SKe(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=oYe(o);if(PMe(t)){const n={x:0,dy:iYe(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(sYe(o,t[r])).close()}else e.text(sYe(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),fGe(o,t=>this.mark(e,t)),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):fGe(t,o),e.close()}href(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then(e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e})}return null}attr(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach(e=>e(o,t,this)):n(o,t,this),r&&function(e,t,n,r,i){let o;if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]);"text"===r&&(e["font-family"]=lYe(t),e["font-size"]=rYe(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in NKe){let n=t[a];const r=NKe[a];("transparent"!==n||"fill"!==r&&"stroke"!==r)&&null!=n&&(xVe(n)&&(n=EVe(n,i.gradient,"")),e[r]=n)}for(const a in DKe){const e=t[a];null!=e&&(o=o||[],o.push(`${DKe[a]}: ${e};`))}o&&(e.style=o.join(" "))}(i,t,e,r,this._defs),i}defs(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:_Ve+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}}const ZKe={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};class QKe extends PYe{constructor(e){super(e),this._svgRenderer=new FKe(e),this._canvasRenderer=new uKe(e)}initialize(e,t,n,r,i){this._root_el=IYe(e,0,"div");const o=IYe(this._root_el,0,"div"),a=IYe(this._root_el,1,"div");return this._root_el.style.position="relative",ZKe.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ZKe.svgOnTop?a:o,this._canvasEl=ZKe.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,t,n,r,i),this._svgRenderer.initialize(this._svgEl,t,n,r,i),super.initialize(e,t,n,r,i)}dirty(e){return ZKe.svgMarkTypes.includes(e.mark.marktype)?this._svgRenderer.dirty(e):this._canvasRenderer.dirty(e),this}_render(e,t){const n=(t??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(e=>!ZKe.svgMarkTypes.includes(e));this._svgRenderer.render(e,ZKe.svgMarkTypes),this._canvasRenderer.render(e,n)}resize(e,t,n,r){return super.resize(e,t,n,r),this._svgRenderer.resize(e,t,n,r),this._canvasRenderer.resize(e,t,n,r),this}background(e){return ZKe.svgOnTop?this._canvasRenderer.background(e):this._svgRenderer.background(e),this}}class XKe extends nKe{constructor(e,t){super(e,t)}initialize(e,t,n){const r=IYe(IYe(e,0,"div"),ZKe.svgOnTop?0:1,"div");return super.initialize(r,t,n)}}const JKe="canvas",eZe="hybrid",tZe="none",nZe={Canvas:JKe,PNG:"png",SVG:"svg",Hybrid:eZe,None:tZe},rZe={};function iZe(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(rZe[e]=t,this):rZe[e]}function oZe(e,t,n){const r=[],i=(new _We).union(t),o=e.marktype;return o?aZe(e,i,n,r):"group"===o?sZe(e,i,n,r):SMe("Intersect scene must be mark node or group item.")}function aZe(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)sZe(i[s],t,n,r);else for(const e=yYe[o].isect;s<a;++s){const n=i[s];lZe(n,t,e)&&r.push(n)}}return r}function sZe(e,t,n,r){n&&n(e.mark)&&lZe(e,t,yYe.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)aZe(i[e],t,n,r);t.translate(a,s)}return r}function lZe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}rZe[JKe]=rZe.png={renderer:uKe,headless:uKe,handler:nKe},rZe.svg={renderer:FKe,headless:KKe,handler:dKe},rZe[eZe]={renderer:QKe,headless:QKe,handler:XKe},rZe[tZe]={};const uZe=new _We;function cZe(e){const t=e.clip;if(lPe(t))t(VWe(uZe.clear()));else{if(!t)return;uZe.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(uZe)}function dZe(e,t,n){return e===t||("path"===n?fZe(e,t):e instanceof Date&&t instanceof Date?+e===+t:APe(e)&&APe(t)?Math.abs(e-t)<=1e-9:e&&t&&(FMe(e)||FMe(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!dZe(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function fZe(e,t){return dZe(RVe(e),RVe(t))}const pZe="top",hZe="left",mZe="right",gZe="bottom",yZe="start",vZe="middle",bZe="end",wZe="group",_Ze="axis",xZe="title",EZe="frame",SZe="scope",kZe="legend",TZe="row-header",CZe="row-footer",AZe="row-title",IZe="column-header",OZe="column-footer",NZe="column-title",DZe="padding",RZe="fit",MZe="fit-x",PZe="fit-y",FZe="none",LZe="all",jZe="each",BZe="flush",$Ze="column",zZe="row";function UZe(e){Fje.call(this,null,e)}function qZe(e,t,n){return t(e.bounds.clear(),e,n)}EPe(UZe,Fje,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=yYe[i],a=o.bound;let s,l=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),l=qZe(r,a),r.items.forEach(e=>{e.bounds.clear().union(l)});else if(i===wZe||e.modified())switch(t.visit(t.MOD,e=>n.dirty(e)),l.clear(),r.items.forEach(e=>l.union(qZe(e,a))),r.role){case _Ze:case kZe:case xZe:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,e=>{l.union(qZe(e,a))}),t.visit(t.MOD,e=>{s=s||l.alignsWith(e.bounds),n.dirty(e),l.union(qZe(e,a))}),s&&(l.clear(),r.items.forEach(e=>l.union(e.bounds)));return cZe(r),t.modifies("bounds")}});const HZe=":vega_identifier:";function VZe(e){Fje.call(this,0,e)}function WZe(e){Fje.call(this,null,e)}function GZe(e){Fje.call(this,null,e)}VZe.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},EPe(VZe,Fje,{transform(e,t){const n=(i=t.dataflow)._signals[HZe]||(i._signals[HZe]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,e=>e[r]=e[r]||++o),n.set(this.value=o),t}}),EPe(WZe,Fje,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===wZe?EWe:xWe;return t.visit(t.ADD,e=>r.call(e,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const YZe={parity:e=>e.filter((e,t)=>t%2?e.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((e,r)=>r&&KZe(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1))}},KZe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),ZZe=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(KZe(o,n=e[r].bounds,t))return!0},QZe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},XZe=e=>(e.forEach(e=>e.opacity=1),e),JZe=(e,t)=>e.reflow(t.modified()).modifies("opacity");function eQe(e){Fje.call(this,null,e)}EPe(GZe,Fje,{transform(e,t){const n=YZe[e.method]||YZe.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(XZe(a),t=JZe(t,e)),t;if(a=a.filter(QZe),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=XZe(a),t=JZe(t,e),i.length>=3&&ZZe(i,r)){do{i=n(i,r)}while(i.length>=3&&ZZe(i,r));i.length<3&&!zMe(a).opacity&&(i.length>1&&(zMe(i).opacity=0),zMe(a).opacity=1)}var s,l,u,c,d;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,l=e.boundOrient,u=+e.boundTolerance,c=s.range(),d=new _We,l===pZe||l===gZe?d.set(c[0],-1/0,c[1],1/0):d.set(-1/0,c[0],1/0,c[1]),d.expand(u||1),o=e=>d.encloses(e.bounds),a.forEach(e=>{o(e)||(e.opacity=0)}));const f=i[0].mark.bounds.clear();return a.forEach(e=>{e.opacity&&f.union(e.bounds)}),t}}),EPe(eQe,Fje,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,e=>n.dirty(e)),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const tQe=new _We;function nQe(e,t,n){return e[t]===n?0:(e[t]=n,1)}function rQe(e){var t=e.items[0].orient;return t===hZe||t===mZe}function iQe(e,t,n,r){var i,o,a=t.items[0],s=a.datum,l=null!=a.translate?a.translate:.5,u=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),d=a.range,f=a.offset,p=a.position,h=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&aYe(g),w=0,_=0;switch(tQe.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),u){case pZe:w=p||0,_=-f,o=Math.max(h,Math.min(m,-v.y1)),v.add(0,-o).add(d,0),g&&oQe(e,g,o,y,b,0,-1,v);break;case hZe:w=-f,_=p||0,o=Math.max(h,Math.min(m,-v.x1)),v.add(-o,0).add(0,d),g&&oQe(e,g,o,y,b,1,-1,v);break;case mZe:w=n+f,_=p||0,o=Math.max(h,Math.min(m,v.x2)),v.add(0,0).add(o,d),g&&oQe(e,g,o,y,b,1,1,v);break;case gZe:w=p||0,_=r+f,o=Math.max(h,Math.min(m,v.y2)),v.add(0,0).add(d,o),g&&oQe(e,g,o,y,0,0,1,v);break;default:w=a.x,_=a.y}return CWe(v.translate(w,_),a),nQe(a,"x",w+l)|nQe(a,"y",_+l)&&(a.bounds=tQe,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function oQe(e,t,n,r,i,o,a,s){const l=t.bounds;if(t.auto){const s=a*(n+i+r);let u=0,c=0;e.dirty(t),o?u=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(l.translate(-u,-c)),e.dirty(t)}s.union(l)}const aQe=(e,t)=>Math.floor(Math.min(e,t)),sQe=(e,t)=>Math.ceil(Math.max(e,t));function lQe(e){return(new _We).set(0,0,e.width||0,e.height||0)}function uQe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function cQe(e,t,n){const r=FMe(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function dQe(e){return e<0?Math.ceil(-e):0}function fQe(e,t,n){var r,i,o,a,s,l,u,c,d,f,p,h=!n.nodirty,m=n.bounds===BZe?lQe:uQe,g=tQe.set(0,0,0,0),y=cQe(n.align,$Ze),v=cQe(n.align,zZe),b=cQe(n.padding,$Ze),w=cQe(n.padding,zZe),_=n.columns||t.length,x=_<=0?1:Math.ceil(t.length/_),E=t.length,S=Array(E),k=Array(_),T=0,C=Array(E),A=Array(x),I=0,O=Array(E),N=Array(E),D=Array(E);for(i=0;i<_;++i)k[i]=0;for(i=0;i<x;++i)A[i]=0;for(i=0;i<E;++i)l=t[i],s=D[i]=m(l),l.x=l.x||0,O[i]=0,l.y=l.y||0,N[i]=0,o=i%_,a=~~(i/_),T=Math.max(T,u=Math.ceil(s.x2)),I=Math.max(I,c=Math.ceil(s.y2)),k[o]=Math.max(k[o],u),A[a]=Math.max(A[a],c),S[i]=b+dQe(s.x1),C[i]=w+dQe(s.y1),h&&e.dirty(t[i]);for(i=0;i<E;++i)i%_===0&&(S[i]=0),i<_&&(C[i]=0);if(y===jZe)for(o=1;o<_;++o){for(p=0,i=o;i<E;i+=_)p<S[i]&&(p=S[i]);for(i=o;i<E;i+=_)S[i]=p+k[o-1]}else if(y===LZe){for(p=0,i=0;i<E;++i)i%_&&p<S[i]&&(p=S[i]);for(i=0;i<E;++i)i%_&&(S[i]=p+T)}else for(y=!1,o=1;o<_;++o)for(i=o;i<E;i+=_)S[i]+=k[o-1];if(v===jZe)for(a=1;a<x;++a){for(p=0,r=(i=a*_)+_;i<r;++i)p<C[i]&&(p=C[i]);for(i=a*_;i<r;++i)C[i]=p+A[a-1]}else if(v===LZe){for(p=0,i=_;i<E;++i)p<C[i]&&(p=C[i]);for(i=_;i<E;++i)C[i]=p+I}else for(v=!1,a=1;a<x;++a)for(r=(i=a*_)+_;i<r;++i)C[i]+=A[a-1];for(d=0,i=0;i<E;++i)d=S[i]+(i%_?d:0),O[i]+=d-t[i].x;for(o=0;o<_;++o)for(f=0,i=o;i<E;i+=_)f+=C[i],N[i]+=f-t[i].y;if(y&&cQe(n.center,$Ze)&&x>1)for(i=0;i<E;++i)(d=(s=y===LZe?T:k[i%_])-D[i].x2-t[i].x-O[i])>0&&(O[i]+=d/2);if(v&&cQe(n.center,zZe)&&1!==_)for(i=0;i<E;++i)(f=(s=v===LZe?I:A[~~(i/_)])-D[i].y2-t[i].y-N[i])>0&&(N[i]+=f/2);for(i=0;i<E;++i)g.union(D[i].translate(O[i],N[i]));switch(d=cQe(n.anchor,"x"),f=cQe(n.anchor,"y"),cQe(n.anchor,$Ze)){case bZe:d-=g.width();break;case vZe:d-=g.width()/2}switch(cQe(n.anchor,zZe)){case bZe:f-=g.height();break;case vZe:f-=g.height()/2}for(d=Math.round(d),f=Math.round(f),g.clear(),i=0;i<E;++i)t[i].mark.bounds.clear();for(i=0;i<E;++i)(l=t[i]).x+=O[i]+=d,l.y+=N[i]+=f,g.union(l.mark.bounds.union(l.bounds.translate(O[i],N[i]))),h&&e.dirty(l);return g}function pQe(e,t,n){var r,i,o,a,s,l,u,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===wZe)switch(t.role){case _Ze:case kZe:case xZe:break;case TZe:a.rowheaders.push(...n);break;case CZe:a.rowfooters.push(...n);break;case IZe:a.colheaders.push(...n);break;case OZe:a.colfooters.push(...n);break;case AZe:a.rowtitle=n[0];break;case NZe:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),d=c.marks,f=n.bounds===BZe?hQe:mQe,p=n.offset,h=n.columns||d.length,m=h<=0?1:Math.ceil(d.length/h),g=m*h;const y=fQe(e,d,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(l=cQe(n.headerBand,zZe,null),r=gQe(e,c.rowheaders,d,h,m,-cQe(p,"rowHeader"),aQe,0,f,"x1",0,h,1,l)),c.colheaders&&(l=cQe(n.headerBand,$Ze,null),i=gQe(e,c.colheaders,d,h,h,-cQe(p,"columnHeader"),aQe,1,f,"y1",0,1,h,l)),c.rowfooters&&(l=cQe(n.footerBand,zZe,null),o=gQe(e,c.rowfooters,d,h,m,cQe(p,"rowFooter"),sQe,0,f,"x2",h-1,h,1,l)),c.colfooters&&(l=cQe(n.footerBand,$Ze,null),a=gQe(e,c.colfooters,d,h,h,cQe(p,"columnFooter"),sQe,1,f,"y2",g-h,1,h,l)),c.rowtitle&&(s=cQe(n.titleAnchor,zZe),u=cQe(p,"rowTitle"),u=s===bZe?o+u:r-u,l=cQe(n.titleBand,zZe,.5),yQe(e,c.rowtitle,u,0,y,l)),c.coltitle&&(s=cQe(n.titleAnchor,$Ze),u=cQe(p,"columnTitle"),u=s===bZe?a+u:i-u,l=cQe(n.titleBand,$Ze,.5),yQe(e,c.coltitle,u,1,y,l))}function hQe(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function mQe(e,t){return e.bounds[t]}function gQe(e,t,n,r,i,o,a,s,l,u,c,d,f,p){var h,m,g,y,v,b,w,_,x,E=n.length,S=0,k=0;if(!E)return S;for(h=c;h<E;h+=d)n[h]&&(S=a(S,l(n[h],u)));if(!t.length)return S;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),S+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(h=c,m=0,y=t.length;m<y;++m,h+=d){for(v=(b=t[m]).mark.bounds,g=h;g>=0&&null==(w=n[g]);g-=f);s?(_=null==p?w.x:Math.round(w.bounds.x1+p*w.bounds.width()),x=S):(_=S,x=null==p?w.y:Math.round(w.bounds.y1+p*w.bounds.height())),v.union(b.bounds.translate(_-(b.x||0),x-(b.y||0))),b.x=_,b.y=x,e.dirty(b),k=a(k,v[u])}return k}function yQe(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function vQe(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),l=function(e,t){let n=-1/0;return e.forEach(e=>{null!=e.offset&&(n=Math.max(n,e.offset))}),n>-1/0?n:t}(e,s("offset",0)),u=s("anchor",yZe),c=u===bZe?1:u===vZe?.5:0,d={align:jZe,bounds:s("bounds",BZe),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case hZe:d.anchor={x:Math.floor(r.x1)-l,column:bZe,y:c*(a||r.height()+2*r.y1),row:u};break;case mZe:d.anchor={x:Math.ceil(r.x2)+l,y:c*(a||r.height()+2*r.y1),row:u};break;case pZe:d.anchor={y:Math.floor(i.y1)-l,row:bZe,x:c*(o||i.width()+2*i.x1),column:u};break;case gZe:d.anchor={y:Math.ceil(i.y2)+l,x:c*(o||i.width()+2*i.x1),column:u};break;case"top-left":d.anchor={x:l,y:l};break;case"top-right":d.anchor={x:o-l,y:l,column:bZe};break;case"bottom-left":d.anchor={x:l,y:a-l,row:bZe};break;case"bottom-right":d.anchor={x:o-l,y:a-l,column:bZe,row:bZe}}return d}function bQe(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,l=i.x,u=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=r-a.x,c=r-a.y;switch(a.orient){case hZe:i+=Math.ceil(a.bounds.width())+l;break;case mZe:case gZe:break;default:o+=a.bounds.height()+l}switch((i||o)&&_Qe(e,n,i,o),a.orient){case hZe:c+=wQe(t,n,a,s,1,1);break;case mZe:u+=wQe(t,n,a,bZe,0,0)+l,c+=wQe(t,n,a,s,1,1);break;case gZe:u+=wQe(t,n,a,s,0,0),c+=wQe(t,n,a,bZe,-1,0,1)+l;break;default:u+=wQe(t,n,a,s,0,0)}(u||c)&&_Qe(e,a,u,c),(u=Math.round(a.bounds.x1-r))<0&&(_Qe(e,n,-u,0),_Qe(e,a,-u,0))}else(i||o)&&_Qe(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach(e=>t.union(e.bounds)),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e),{});e.forEach(e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y})}(i.items[0].items[0].items[0].items),a!==FZe&&(i.x=l=0,i.y=u=0),i.width=n,i.height=r,CWe(s.set(l,u,l+n,u+r),i),i.mark.bounds.clear().union(s),i}function wQe(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,l=n.datum.vgrad,u=(!s||!o&&l||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=l&&o?u:0,d=l&&o?0:u,f=i<=0?0:aYe(n);return Math.round(r===yZe?c:r===bZe?d-f:.5*(u-f))}function _Qe(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function xQe(e){Fje.call(this,null,e)}EPe(xQe,Fje,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(t=>{e.layout&&pQe(n,t,e.layout),function(e,t,n){var r,i,o,a,s,l=t.items,u=Math.max(0,t.width||0),c=Math.max(0,t.height||0),d=(new _We).set(0,0,u,c),f=d.clone(),p=d.clone(),h=[];for(a=0,s=l.length;a<s;++a)switch((i=l[a]).role){case _Ze:(rQe(i)?f:p).union(iQe(e,i,u,c));break;case xZe:r=i;break;case kZe:h.push(bQe(e,i));break;case EZe:case SZe:case TZe:case CZe:case AZe:case IZe:case OZe:case NZe:f.union(i.bounds),p.union(i.bounds);break;default:d.union(i.bounds)}if(h.length){const t={};h.forEach(e=>{(o=e.orient||mZe)!==FZe&&(t[o]||(t[o]=[])).push(e)});for(const r in t){const i=t[r];fQe(e,i,vQe(i,r,n.legends,f,p,u,c))}h.forEach(t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),!n.autosize||n.autosize.type!==RZe&&n.autosize.type!==MZe&&n.autosize.type!==PZe)d.union(r);else switch(t.orient){case hZe:case mZe:d.add(r.x1,0).add(r.x2,0);break;case pZe:case gZe:d.add(0,r.y1).add(0,r.y2)}})}d.union(f).union(p),r&&d.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,l=a.orient,u=a.anchor,c=a.offset,d=a.padding,f=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],h=l===hZe||l===mZe?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==wZe?l===hZe?(m=i.y2,h=i.y1):l===mZe?(m=i.y1,h=i.y2):(m=i.x1,h=i.x2):l===hZe&&(m=r,h=0),o=u===yZe?m:u===bZe?h:(m+h)/2,p&&p.text){switch(l){case pZe:case gZe:b=f.bounds.height()+d;break;case hZe:v=f.bounds.width()+d;break;case mZe:v=-f.bounds.width()-d}tQe.clear().union(p.bounds),tQe.translate(v-(p.x||0),b-(p.y||0)),nQe(p,"x",v)|nQe(p,"y",b)&&(e.dirty(p),p.bounds.clear().union(tQe),p.mark.bounds.clear().union(tQe),e.dirty(p)),tQe.clear().union(p.bounds)}else tQe.clear();switch(tQe.union(f.bounds),l){case pZe:g=o,y=i.y1-tQe.height()-c;break;case hZe:g=i.x1-tQe.width()-c,y=o;break;case mZe:g=i.x2+tQe.width()+c,y=o;break;case gZe:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return nQe(a,"x",g)|nQe(a,"y",y)&&(tQe.translate(g,y),e.dirty(a),a.bounds.clear().union(tQe),t.bounds.clear().union(tQe),e.dirty(a)),a.bounds}(e,r,u,c,d));t.clip&&d.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),p=Math.max(0,Math.ceil(n.y2-c));if(i.contains===DZe){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===FZe?(u=0,d=0,l=a,c=s):o===RZe?(l=Math.max(0,a-u-f),c=Math.max(0,s-d-p)):o===MZe?(l=Math.max(0,a-u-f),s=c+d+p):o===PZe?(a=l+u+f,c=Math.max(0,s-d-p)):"pad"===o&&(a=l+u+f,s=c+d+p);e._resizeView(a,s,l,c,[u,d],i.resize)}(e,t,d,n)}(n,t,e)}),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}});const EQe=Object.freeze(Object.defineProperty({__proto__:null,bound:UZe,identifier:VZe,mark:WZe,overlap:GZe,render:eQe,viewlayout:xQe},Symbol.toStringTag,{value:"Module"}));function SQe(e){Fje.call(this,null,e)}function kQe(e){Fje.call(this,null,e)}function TQe(){return oje({})}function CQe(e){Fje.call(this,null,e)}function AQe(e){Fje.call(this,[],e)}EPe(SQe,Fje,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=iVe(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||sVe(n,o,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?oVe(o,e.values,a):aVe(o,a);return i&&(r.rem=i),i=l.map((e,t)=>oje({index:t/(l.length-1||1),value:e,label:s(e)})),e.extra&&i.length&&i.push(oje({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),EPe(kQe,Fje,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||TQe,o=e.key||rje,a=this.value;return PMe(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&SMe("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=_Pe().test(e=>e.exit);return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1}),t.visit(t.MOD,e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))}),t.visit(t.REM,e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),EPe(CQe,Fje,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(PMe(o)){if(!n.changed()&&!o.every(e=>i[e]))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||DMe,l=i.enter||DMe,u=i.exit||DMe,c=(o&&!a?i[o]:s)||DMe;if(t.changed(t.ADD)&&(t.visit(t.ADD,t=>{l(t,e),s(t,e)}),n.modifies(l.output),n.modifies(s.output),c!==DMe&&c!==s&&(t.visit(t.ADD,t=>{c(t,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==DMe&&(t.visit(t.REM,t=>{u(t,e)}),n.modifies(u.output)),a||c!==DMe){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,t=>{const i=l(t,e)||r;(c(t,e)||i)&&n.mod.push(t)}),n.mod.length&&n.modifies(l.output)):t.visit(i,t=>{(c(t,e)||r)&&n.mod.push(t)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),EPe(AQe,Fje,{transform(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),l=t.fork(t.NO_SOURCE|t.NO_FIELDS),u=this.value,c=e.type||eVe,d=e.scale,f=+e.limit,p=iVe(d,null==e.count?5:e.count,e.minstep),h=!!e.values||c===eVe,m=e.format||fVe(s,d,p,c,e.formatSpecifier,e.formatType,h),g=e.values||dVe(d,p);return u&&(l.rem=u),c===eVe?(f&&g.length>f?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),u=g.slice(0,f-1),a=!0):u=g,lPe(i=e.size)?(e.values||0!==d(u[0])||(u=u.slice(1)),o=u.reduce((t,n)=>Math.max(t,i(n,e)),0)):i=hPe(o=i||8),u=u.map((t,n)=>oje({index:n,label:m(t,n,u),value:t,offset:o,size:i(t,e)})),a&&(a=g[u.length],u.push(oje({index:u.length,label:`…${g.length-u.length} entries`,value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=d.domain(),r=YHe(d,n[0],zMe(n)),g.length<3&&!e.values&&n[0]!==zMe(n)&&(g=[n[0],zMe(n)]),u=g.map((e,t)=>oje({index:t,label:m(e,t,g),value:e,perc:r(e)}))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+zMe(t),o=i-r;if(e.type===yHe){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(d),u=g.map((e,t)=>oje({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])}))),l.source=u,l.add=u,this.value=u,l}});const IQe=e=>e.source.x,OQe=e=>e.source.y,NQe=e=>e.target.x,DQe=e=>e.target.y;function RQe(e){Fje.call(this,{},e)}RQe.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},EPe(RQe,Fje,{transform(e,t){var n=e.sourceX||IQe,r=e.sourceY||OQe,i=e.targetX||NQe,o=e.targetY||DQe,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=LQe.get(l+"-"+s)||LQe.get(l);return u||SMe("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,e=>{e[a]=u(n(e),r(e),i(e),o(e))}),t.reflow(e.modified()).modifies(a)}});const MQe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,PQe=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},FQe=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},LQe=_Pe({line:MQe,"line-radial":(e,t,n,r)=>MQe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:PQe,"arc-radial":(e,t,n,r)=>PQe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:FQe,"curve-radial":(e,t,n,r)=>FQe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*a+","+l*s+" "+r*a+","+r*s}});function jQe(e){Fje.call(this,null,e)}jQe.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},EPe(jQe,Fje,{transform(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],l=e.field||OMe,u=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,d=t.source,f=d.map(l),p=f.length,h=u,m=(c-u)/b4(f),g=v4(p);for(e.sort&&g.sort((e,t)=>f[e]-f[t]),n=0;n<p;++n)i=f[g[n]],(r=d[g[n]])[a]=h,r[s]=h+=i*m;return this.value=f,t.reflow(e.modified()).modifies(o)}});function BQe(e){return jHe(e)&&e!==pHe}const $Qe=qPe(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function zQe(e){Fje.call(this,null,e),this.modified(!0)}function UQe(e,t,n){zHe(e)&&(Math.abs(t.reduce((e,t)=>e+(t<0?-1:t>0?1:0),0))!==t.length&&n.warn("Log scale domain includes zero: "+jPe(t)));return t}function qQe(e,t,n){return lPe(e)&&(t||n)?VHe(e,HQe(t||[0,1],n)):e}function HQe(e,t){return t?e.slice().reverse():e}function VQe(e){Fje.call(this,null,e)}EPe(zQe,Fje,{transform(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===pHe)return pHe+"-"+aHe;(function(e){const t=e.type;return jHe(t)&&t!==dHe&&t!==fHe&&(e.scheme||e.range&&e.range.length&&e.range.every(OPe))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?pHe+"-":3===t?hHe+"-":"");return(r+n||aHe).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=PHe(i)()),e)if(!$Qe[i]){if("padding"===i&&BQe(r.type))continue;lPe(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==wHe&&e!==bHe&&SMe("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===bHe?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*oHe(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;PMe(t.scheme)?r=WHe(t.scheme,t.interpolate,t.interpolateGamma):(r=JHe(t.scheme.toLowerCase()))||SMe(`Unrecognized scheme name: ${t.scheme}`);return n=e===yHe?n+1:e===_He?n-1:e===mHe||e===gHe?+t.schemeCount||5:n,UHe(e)?qQe(r,i,t.reverse):lPe(r)?GHe(qQe(r,i),n):e===vHe?r:r.slice(0,n)}(r,t,n),lPe(o))){if(e.interpolator)return e.interpolator(o);SMe(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&UHe(r))return e.interpolator(WHe(HQe(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(KHe(t.interpolate,t.interpolateGamma)):lPe(e.round)?e.round(i):lPe(e.rangeRound)&&e.interpolate(i?VUe:HUe);o&&e.range(HQe(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!PMe(r)){const t=e.domain(),n=t[0],i=zMe(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||SMe("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=v4(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===_He&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(UQe(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,l=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===aHe||t===lHe||t===uHe)}(e);if(!a)return 0;if((l||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,l&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}BQe(s)&&t.padding&&a[0]!==zMe(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(zMe(n)-n[0]),s=a/(a-2*r),l=e===sHe?tPe(t,null,s):e===uHe?nPe(t,null,s,.5):e===lHe?nPe(t,null,s,i||1):e===cHe?rPe(t,null,s,o||1):ePe(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));e.domain(UQe(s,a,n)),s===vHe&&e.unknown(t.domainImplicit?_Ue:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&iVe(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),EPe(VQe,Fje,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(uje(e.sort)),this.modified(n),t}});const WQe="zero",GQe="center",YQe="normalize",KQe=["y0","y1"];function ZQe(e){Fje.call(this,null,e)}function QQe(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,l=0;l<s;++l)(o=e[l])[r]=a,o[i]=a+=Math.abs(n(o))}function XQe(e,t,n,r,i){for(var o,a=1/e.sum,s=0,l=e.length,u=0,c=0;u<l;++u)(o=e[u])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function JQe(e,t,n,r,i){for(var o,a,s=0,l=0,u=e.length,c=0;c<u;++c)(o=+n(a=e[c]))<0?(a[r]=l,a[i]=l+=o):(a[r]=s,a[i]=s+=o)}ZQe.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:WQe,values:[WQe,GQe,YQe]},{name:"as",type:"string",array:!0,length:2,default:KQe}]},EPe(ZQe,Fje,{transform(e,t){var n,r,i,o,a=e.as||KQe,s=a[0],l=a[1],u=uje(e.sort),c=e.field||OMe,d=e.offset===GQe?QQe:e.offset===YQe?XQe:JQe;for(n=function(e,t,n,r){var i,o,a,s,l,u,c,d,f,p=[],h=e=>e(l);if(null==t)p.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)l=e[o],(c=i[u=t.map(h)])||(i[u]=c=[],p.push(c)),c.push(l);for(u=0,f=0,s=p.length;u<s;++u){for(o=0,d=0,a=(c=p[u]).length;o<a;++o)d+=Math.abs(r(c[o]));c.sum=d,d>f&&(f=d),n&&c.sort(n)}return p.max=f,p}(t.source,e.groupby,u,c),r=0,i=n.length,o=n.max;r<i;++r)d(n[r],o,c,s,l);return t.reflow(e.modified()).modifies(a)}});const eXe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:SQe,datajoin:kQe,encode:CQe,legendentries:AQe,linkpath:RQe,pie:jQe,scale:zQe,sortitems:VQe,stack:ZQe},Symbol.toStringTag,{value:"Module"}));var tXe=1e-6,nXe=1e-12,rXe=Math.PI,iXe=rXe/2,oXe=rXe/4,aXe=2*rXe,sXe=180/rXe,lXe=rXe/180,uXe=Math.abs,cXe=Math.atan,dXe=Math.atan2,fXe=Math.cos,pXe=Math.ceil,hXe=Math.exp,mXe=Math.hypot,gXe=Math.log,yXe=Math.pow,vXe=Math.sin,bXe=Math.sign||function(e){return e>0?1:e<0?-1:0},wXe=Math.sqrt,_Xe=Math.tan;function xXe(e){return e>1?0:e<-1?rXe:Math.acos(e)}function EXe(e){return e>1?iXe:e<-1?-iXe:Math.asin(e)}function SXe(){}function kXe(e,t){e&&CXe.hasOwnProperty(e.type)&&CXe[e.type](e,t)}var TXe={Feature:function(e,t){kXe(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)kXe(n[r].geometry,t)}},CXe={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){AXe(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)AXe(n[r],t,0)},Polygon:function(e,t){IXe(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)IXe(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)kXe(n[r],t)}};function AXe(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function IXe(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)AXe(e[n],t,1);t.polygonEnd()}function OXe(e,t){e&&TXe.hasOwnProperty(e.type)?TXe[e.type](e,t):kXe(e,t)}var NXe,DXe,RXe,MXe,PXe,FXe,LXe,jXe,BXe,$Xe,zXe,UXe,qXe,HXe,VXe,WXe,GXe=new K3,YXe=new K3,KXe={point:SXe,lineStart:SXe,lineEnd:SXe,polygonStart:function(){GXe=new K3,KXe.lineStart=ZXe,KXe.lineEnd=QXe},polygonEnd:function(){var e=+GXe;YXe.add(e<0?aXe+e:e),this.lineStart=this.lineEnd=this.point=SXe},sphere:function(){YXe.add(aXe)}};function ZXe(){KXe.point=XXe}function QXe(){JXe(NXe,DXe)}function XXe(e,t){KXe.point=JXe,NXe=e,DXe=t,RXe=e*=lXe,MXe=fXe(t=(t*=lXe)/2+oXe),PXe=vXe(t)}function JXe(e,t){var n=(e*=lXe)-RXe,r=n>=0?1:-1,i=r*n,o=fXe(t=(t*=lXe)/2+oXe),a=vXe(t),s=PXe*a,l=MXe*o+s*fXe(i),u=s*r*vXe(i);GXe.add(dXe(u,l)),RXe=e,MXe=o,PXe=a}function eJe(e){return[dXe(e[1],e[0]),EXe(e[2])]}function tJe(e){var t=e[0],n=e[1],r=fXe(n);return[r*fXe(t),r*vXe(t),vXe(n)]}function nJe(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function rJe(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function iJe(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function oJe(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function aJe(e){var t=wXe(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var sJe,lJe,uJe,cJe,dJe,fJe,pJe,hJe,mJe,gJe,yJe,vJe,bJe,wJe,_Je,xJe,EJe={point:SJe,lineStart:TJe,lineEnd:CJe,polygonStart:function(){EJe.point=AJe,EJe.lineStart=IJe,EJe.lineEnd=OJe,HXe=new K3,KXe.polygonStart()},polygonEnd:function(){KXe.polygonEnd(),EJe.point=SJe,EJe.lineStart=TJe,EJe.lineEnd=CJe,GXe<0?(FXe=-(jXe=180),LXe=-(BXe=90)):HXe>tXe?BXe=90:HXe<-1e-6&&(LXe=-90),WXe[0]=FXe,WXe[1]=jXe},sphere:function(){FXe=-(jXe=180),LXe=-(BXe=90)}};function SJe(e,t){VXe.push(WXe=[FXe=e,jXe=e]),t<LXe&&(LXe=t),t>BXe&&(BXe=t)}function kJe(e,t){var n=tJe([e*lXe,t*lXe]);if(qXe){var r=rJe(qXe,n),i=rJe([r[1],-r[0],0],r);aJe(i),i=eJe(i);var o,a=e-$Xe,s=a>0?1:-1,l=i[0]*sXe*s,u=uXe(a)>180;u^(s*$Xe<l&&l<s*e)?(o=i[1]*sXe)>BXe&&(BXe=o):u^(s*$Xe<(l=(l+360)%360-180)&&l<s*e)?(o=-i[1]*sXe)<LXe&&(LXe=o):(t<LXe&&(LXe=t),t>BXe&&(BXe=t)),u?e<$Xe?NJe(FXe,e)>NJe(FXe,jXe)&&(jXe=e):NJe(e,jXe)>NJe(FXe,jXe)&&(FXe=e):jXe>=FXe?(e<FXe&&(FXe=e),e>jXe&&(jXe=e)):e>$Xe?NJe(FXe,e)>NJe(FXe,jXe)&&(jXe=e):NJe(e,jXe)>NJe(FXe,jXe)&&(FXe=e)}else VXe.push(WXe=[FXe=e,jXe=e]);t<LXe&&(LXe=t),t>BXe&&(BXe=t),qXe=n,$Xe=e}function TJe(){EJe.point=kJe}function CJe(){WXe[0]=FXe,WXe[1]=jXe,EJe.point=SJe,qXe=null}function AJe(e,t){if(qXe){var n=e-$Xe;HXe.add(uXe(n)>180?n+(n>0?360:-360):n)}else zXe=e,UXe=t;KXe.point(e,t),kJe(e,t)}function IJe(){KXe.lineStart()}function OJe(){AJe(zXe,UXe),KXe.lineEnd(),uXe(HXe)>tXe&&(FXe=-(jXe=180)),WXe[0]=FXe,WXe[1]=jXe,qXe=null}function NJe(e,t){return(t-=e)<0?t+360:t}function DJe(e,t){return e[0]-t[0]}function RJe(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var MJe={sphere:SXe,point:PJe,lineStart:LJe,lineEnd:$Je,polygonStart:function(){MJe.lineStart=zJe,MJe.lineEnd=UJe},polygonEnd:function(){MJe.lineStart=LJe,MJe.lineEnd=$Je}};function PJe(e,t){e*=lXe;var n=fXe(t*=lXe);FJe(n*fXe(e),n*vXe(e),vXe(t))}function FJe(e,t,n){++sJe,uJe+=(e-uJe)/sJe,cJe+=(t-cJe)/sJe,dJe+=(n-dJe)/sJe}function LJe(){MJe.point=jJe}function jJe(e,t){e*=lXe;var n=fXe(t*=lXe);wJe=n*fXe(e),_Je=n*vXe(e),xJe=vXe(t),MJe.point=BJe,FJe(wJe,_Je,xJe)}function BJe(e,t){e*=lXe;var n=fXe(t*=lXe),r=n*fXe(e),i=n*vXe(e),o=vXe(t),a=dXe(wXe((a=_Je*o-xJe*i)*a+(a=xJe*r-wJe*o)*a+(a=wJe*i-_Je*r)*a),wJe*r+_Je*i+xJe*o);lJe+=a,fJe+=a*(wJe+(wJe=r)),pJe+=a*(_Je+(_Je=i)),hJe+=a*(xJe+(xJe=o)),FJe(wJe,_Je,xJe)}function $Je(){MJe.point=PJe}function zJe(){MJe.point=qJe}function UJe(){HJe(vJe,bJe),MJe.point=PJe}function qJe(e,t){vJe=e,bJe=t,e*=lXe,t*=lXe,MJe.point=HJe;var n=fXe(t);wJe=n*fXe(e),_Je=n*vXe(e),xJe=vXe(t),FJe(wJe,_Je,xJe)}function HJe(e,t){e*=lXe;var n=fXe(t*=lXe),r=n*fXe(e),i=n*vXe(e),o=vXe(t),a=_Je*o-xJe*i,s=xJe*r-wJe*o,l=wJe*i-_Je*r,u=mXe(a,s,l),c=EXe(u),d=u&&-c/u;mJe.add(d*a),gJe.add(d*s),yJe.add(d*l),lJe+=c,fJe+=c*(wJe+(wJe=r)),pJe+=c*(_Je+(_Je=i)),hJe+=c*(xJe+(xJe=o)),FJe(wJe,_Je,xJe)}function VJe(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function WJe(e,t){return uXe(e)>rXe&&(e-=Math.round(e/aXe)*aXe),[e,t]}function GJe(e,t,n){return(e%=aXe)?t||n?VJe(KJe(e),ZJe(t,n)):KJe(e):t||n?ZJe(t,n):WJe}function YJe(e){return function(t,n){return uXe(t+=e)>rXe&&(t-=Math.round(t/aXe)*aXe),[t,n]}}function KJe(e){var t=YJe(e);return t.invert=YJe(-e),t}function ZJe(e,t){var n=fXe(e),r=vXe(e),i=fXe(t),o=vXe(t);function a(e,t){var a=fXe(t),s=fXe(e)*a,l=vXe(e)*a,u=vXe(t),c=u*n+s*r;return[dXe(l*i-c*o,s*n-u*r),EXe(c*i+l*o)]}return a.invert=function(e,t){var a=fXe(t),s=fXe(e)*a,l=vXe(e)*a,u=vXe(t),c=u*i-l*o;return[dXe(l*i+u*o,s*n+c*r),EXe(c*n-s*r)]},a}function QJe(e,t){(t=tJe(t))[0]-=e,aJe(t);var n=xXe(-t[1]);return((-t[2]<0?-n:n)+aXe-tXe)%aXe}function XJe(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:SXe,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function JJe(e,t){return uXe(e[0]-t[0])<tXe&&uXe(e[1]-t[1])<tXe}function e0e(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function t0e(e,t,n,r,i){var o,a,s=[],l=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(JJe(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new e0e(r,e,null,!0)),l.push(n.o=new e0e(r,null,n,!1)),s.push(n=new e0e(a,e,null,!1)),l.push(n.o=new e0e(a,null,n,!0))}}),s.length){for(l.sort(t),n0e(s),n0e(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,c,d=s[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;u=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=u.length;o<a;++o)i.point((c=u[o])[0],c[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(p)for(u=f.p.z,o=u.length-1;o>=0;--o)i.point((c=u[o])[0],c[1]);else r(f.x,f.p.x,-1,i);f=f.p}u=(f=f.o).z,p=!p}while(!f.v);i.lineEnd()}}}function n0e(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function r0e(e){return uXe(e[0])<=rXe?e[0]:bXe(e[0])*((uXe(e[0])+rXe)%aXe-rXe)}function i0e(e,t,n,r){return function(i){var o,a,s,l=t(i),u=XJe(),c=t(u),d=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=v,f.lineEnd=b,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=y4(a);var e=function(e,t){var n=r0e(t),r=t[1],i=vXe(r),o=[vXe(n),-fXe(n),0],a=0,s=0,l=new K3;1===i?r=iXe+tXe:-1===i&&(r=-iXe-tXe);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,p=d[f-1],h=r0e(p),m=p[1]/2+oXe,g=vXe(m),y=fXe(m),v=0;v<f;++v,h=w,g=x,y=E,p=b){var b=d[v],w=r0e(b),_=b[1]/2+oXe,x=vXe(_),E=fXe(_),S=w-h,k=S>=0?1:-1,T=k*S,C=T>rXe,A=g*x;if(l.add(dXe(A*k*vXe(T),y*E+A*fXe(T))),a+=C?S+k*aXe:S,C^h>=n^w>=n){var I=rJe(tJe(p),tJe(b));aJe(I);var O=rJe(o,I);aJe(O);var N=(C^S>=0?-1:1)*EXe(O[2]);(r>N||r===N&&(I[0]||I[1]))&&(s+=C^S>=0?1:-1)}}return(a<-1e-6||a<tXe&&l<-1e-12)^1&s}(o,r);a.length?(d||(i.polygonStart(),d=!0),t0e(a,a0e,e,n,i)):e&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(t,n){e(t,n)&&i.point(t,n)}function h(e,t){l.point(e,t)}function m(){f.point=h,l.lineStart()}function g(){f.point=p,l.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,l=c.clean(),f=u.result(),p=f.length;if(s.pop(),o.push(s),s=null,p)if(1&l){if((t=(n=f[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else p>1&&2&l&&f.push(f.pop().concat(f.shift())),a.push(f.filter(o0e))}return f}}function o0e(e){return e.length>1}function a0e(e,t){return((e=e.x)[0]<0?e[1]-iXe-tXe:iXe-e[1])-((t=t.x)[0]<0?t[1]-iXe-tXe:iXe-t[1])}WJe.invert=WJe;const s0e=i0e(function(){return!0},function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?rXe:-rXe,l=uXe(o-n);uXe(l-rXe)<tXe?(e.point(n,r=(r+a)/2>0?iXe:-iXe),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=rXe&&(uXe(n-i)<tXe&&(n-=i*tXe),uXe(o-s)<tXe&&(o-=s*tXe),r=function(e,t,n,r){var i,o,a=vXe(e-n);return uXe(a)>tXe?cXe((vXe(t)*(o=fXe(r))*vXe(n)-vXe(r)*(i=fXe(t))*vXe(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}},function(e,t,n,r){var i;if(null==e)i=n*iXe,r.point(-rXe,i),r.point(0,i),r.point(rXe,i),r.point(rXe,0),r.point(rXe,-i),r.point(0,-i),r.point(-rXe,-i),r.point(-rXe,0),r.point(-rXe,i);else if(uXe(e[0]-t[0])>tXe){var o=e[0]<t[0]?rXe:-rXe;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])},[-rXe,-iXe]);function l0e(e){var t=fXe(e),n=2*lXe,r=t>0,i=uXe(t)>tXe;function o(e,n){return fXe(e)*fXe(n)>t}function a(e,n,r){var i=[1,0,0],o=rJe(tJe(e),tJe(n)),a=nJe(o,o),s=o[0],l=a-s*s;if(!l)return!r&&e;var u=t*a/l,c=-t*s/l,d=rJe(i,o),f=oJe(i,u);iJe(f,oJe(o,c));var p=d,h=nJe(f,p),m=nJe(p,p),g=h*h-m*(nJe(f,f)-1);if(!(g<0)){var y=wXe(g),v=oJe(p,(-h-y)/m);if(iJe(v,f),v=eJe(v),!r)return v;var b,w=e[0],_=n[0],x=e[1],E=n[1];_<w&&(b=w,w=_,_=b);var S=_-w,k=uXe(S-rXe)<tXe;if(!k&&E<x&&(b=x,x=E,E=b),k||S<tXe?k?x+E>0^v[1]<(uXe(v[0]-w)<tXe?x:E):x<=v[1]&&v[1]<=E:S>rXe^(w<=v[0]&&v[0]<=_)){var T=oJe(p,(-h+y)/m);return iJe(T,f),[v,eJe(T)]}}}function s(t,n){var i=r?e:rXe-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return i0e(o,function(e){var t,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var p,h=[d,f],m=o(d,f),g=r?m?0:s(d,f):m?s(d+(d<0?rXe:-rXe),f):0;if(!t&&(u=l=m)&&e.lineStart(),m!==l&&(!(p=a(t,h))||JJe(t,p)||JJe(h,p))&&(h[2]=1),m!==l)c=0,m?(e.lineStart(),p=a(h,t),e.point(p[0],p[1])):(p=a(t,h),e.point(p[0],p[1],2),e.lineEnd()),t=p;else if(i&&t&&r^m){var y;g&n||!(y=a(h,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&JJe(t,h)||e.point(h[0],h[1]),t=h,l=m,n=g},lineEnd:function(){l&&e.lineEnd(),t=null},clean:function(){return c|(u&&l)<<1}}},function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=fXe(t),s=vXe(t),l=r*n;null==i?(i=t+r*aXe,o=t-l/2):(i=QJe(a,i),o=QJe(a,o),(r>0?i<o:i>o)&&(i+=r*aXe));for(var u,c=i;r>0?c>o:c<o;c-=l)u=eJe([a,-s*fXe(c),-s*vXe(c)]),e.point(u[0],u[1])}}(o,e,n,i,t,r)},r?[0,-e]:[-rXe,e-rXe])}var u0e=1e9,c0e=-u0e;function d0e(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,u){var c=0,d=0;if(null==i||(c=a(i,s))!==(d=a(o,s))||l(i,o)<0^s>0)do{u.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==d);else u.point(o[0],o[1])}function a(r,i){return uXe(r[0]-e)<tXe?i>0?0:3:uXe(r[0]-n)<tXe?i>0?2:1:uXe(r[1]-t)<tXe?i>0?1:0:i>0?3:2}function s(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var l,u,c,d,f,p,h,m,g,y,v,b=a,w=XJe(),_={point:x,lineStart:function(){_.point=E,u&&u.push(c=[]);y=!0,g=!1,h=m=NaN},lineEnd:function(){l&&(E(d,f),p&&g&&w.rejoin(),l.push(w.result()));_.point=x,g&&b.lineEnd()},polygonStart:function(){b=w,l=[],u=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=u.length;n<i;++n)for(var o,a,s=u[n],l=1,c=s.length,d=s[0],f=d[0],p=d[1];l<c;++l)o=f,a=p,f=(d=s[l])[0],p=d[1],a<=r?p>r&&(f-o)*(r-a)>(p-a)*(e-o)&&++t:p<=r&&(f-o)*(r-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,i=(l=y4(l)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&t0e(l,s,t,o,a),a.polygonEnd());b=a,l=u=c=null}};function x(e,t){i(e,t)&&b.point(e,t)}function E(o,a){var s=i(o,a);if(u&&c.push([o,a]),y)d=o,f=a,p=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var l=[h=Math.max(c0e,Math.min(u0e,h)),m=Math.max(c0e,Math.min(u0e,m))],w=[o=Math.max(c0e,Math.min(u0e,o)),a=Math.max(c0e,Math.min(u0e,a))];!function(e,t,n,r,i,o){var a,s=e[0],l=e[1],u=0,c=1,d=t[0]-s,f=t[1]-l;if(a=n-s,d||!(a>0)){if(a/=d,d<0){if(a<u)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>u&&(u=a)}if(a=i-s,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>u&&(u=a)}else if(d>0){if(a<u)return;a<c&&(c=a)}if(a=r-l,f||!(a>0)){if(a/=f,f<0){if(a<u)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>u&&(u=a)}if(a=o-l,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>u&&(u=a)}else if(f>0){if(a<u)return;a<c&&(c=a)}return u>0&&(e[0]=s+u*d,e[1]=l+u*f),c<1&&(t[0]=s+c*d,t[1]=l+c*f),!0}}}}}(l,w,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(l[0],l[1])),b.point(w[0],w[1]),s||b.lineEnd(),v=!1)}h=o,m=a,g=s}return _}}function f0e(e,t,n){var r=v4(e,t-tXe,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function p0e(e,t,n){var r=v4(e,t-tXe,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}const h0e=e=>e;var m0e,g0e,y0e,v0e,b0e=new K3,w0e=new K3,_0e={point:SXe,lineStart:SXe,lineEnd:SXe,polygonStart:function(){_0e.lineStart=x0e,_0e.lineEnd=k0e},polygonEnd:function(){_0e.lineStart=_0e.lineEnd=_0e.point=SXe,b0e.add(uXe(w0e)),w0e=new K3},result:function(){var e=b0e/2;return b0e=new K3,e}};function x0e(){_0e.point=E0e}function E0e(e,t){_0e.point=S0e,m0e=y0e=e,g0e=v0e=t}function S0e(e,t){w0e.add(v0e*e-y0e*t),y0e=e,v0e=t}function k0e(){S0e(m0e,g0e)}var T0e=1/0,C0e=T0e,A0e=-T0e,I0e=A0e,O0e={point:function(e,t){e<T0e&&(T0e=e);e>A0e&&(A0e=e);t<C0e&&(C0e=t);t>I0e&&(I0e=t)},lineStart:SXe,lineEnd:SXe,polygonStart:SXe,polygonEnd:SXe,result:function(){var e=[[T0e,C0e],[A0e,I0e]];return A0e=I0e=-(C0e=T0e=1/0),e}};var N0e,D0e,R0e,M0e,P0e=0,F0e=0,L0e=0,j0e=0,B0e=0,$0e=0,z0e=0,U0e=0,q0e=0,H0e={point:V0e,lineStart:W0e,lineEnd:K0e,polygonStart:function(){H0e.lineStart=Z0e,H0e.lineEnd=Q0e},polygonEnd:function(){H0e.point=V0e,H0e.lineStart=W0e,H0e.lineEnd=K0e},result:function(){var e=q0e?[z0e/q0e,U0e/q0e]:$0e?[j0e/$0e,B0e/$0e]:L0e?[P0e/L0e,F0e/L0e]:[NaN,NaN];return P0e=F0e=L0e=j0e=B0e=$0e=z0e=U0e=q0e=0,e}};function V0e(e,t){P0e+=e,F0e+=t,++L0e}function W0e(){H0e.point=G0e}function G0e(e,t){H0e.point=Y0e,V0e(R0e=e,M0e=t)}function Y0e(e,t){var n=e-R0e,r=t-M0e,i=wXe(n*n+r*r);j0e+=i*(R0e+e)/2,B0e+=i*(M0e+t)/2,$0e+=i,V0e(R0e=e,M0e=t)}function K0e(){H0e.point=V0e}function Z0e(){H0e.point=X0e}function Q0e(){J0e(N0e,D0e)}function X0e(e,t){H0e.point=J0e,V0e(N0e=R0e=e,D0e=M0e=t)}function J0e(e,t){var n=e-R0e,r=t-M0e,i=wXe(n*n+r*r);j0e+=i*(R0e+e)/2,B0e+=i*(M0e+t)/2,$0e+=i,z0e+=(i=M0e*e-R0e*t)*(R0e+e),U0e+=i*(M0e+t),q0e+=3*i,V0e(R0e=e,M0e=t)}function e1e(e){this._context=e}e1e.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,aXe)}},result:SXe};var t1e,n1e,r1e,i1e,o1e,a1e=new K3,s1e={point:SXe,lineStart:function(){s1e.point=l1e},lineEnd:function(){t1e&&u1e(n1e,r1e),s1e.point=SXe},polygonStart:function(){t1e=!0},polygonEnd:function(){t1e=null},result:function(){var e=+a1e;return a1e=new K3,e}};function l1e(e,t){s1e.point=u1e,n1e=i1e=e,r1e=o1e=t}function u1e(e,t){i1e-=e,o1e-=t,a1e.add(wXe(i1e*i1e+o1e*o1e)),i1e=e,o1e=t}let c1e,d1e,f1e,p1e;class h1e{constructor(e){this._append=null==e?m1e:function(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return m1e;if(t!==c1e){const e=10**t;c1e=t,d1e=function(t){let n=1;this._+=t[0];for(const r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return d1e}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==f1e||this._append!==d1e){const e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,f1e=e,d1e=this._append,p1e=this._,this._=t}this._+=p1e}}result(){const e=this._;return this._="",e.length?e:null}}function m1e(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function g1e(e,t){let n,r,i=3,o=4.5;function a(e){return e&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),OXe(e,n(r))),r.result()}return a.area=function(e){return OXe(e,n(_0e)),_0e.result()},a.measure=function(e){return OXe(e,n(s1e)),s1e.result()},a.bounds=function(e){return OXe(e,n(O0e)),O0e.result()},a.centroid=function(e){return OXe(e,n(H0e)),H0e.result()},a.projection=function(t){return arguments.length?(n=null==t?(e=null,h0e):(e=t).stream,a):e},a.context=function(e){return arguments.length?(r=null==e?(t=null,new h1e(i)):new e1e(t=e),"function"!=typeof o&&r.pointRadius(o),a):t},a.pointRadius=function(e){return arguments.length?(o="function"==typeof e?e:(r.pointRadius(+e),+e),a):o},a.digits=function(e){if(!arguments.length)return i;if(null==e)i=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);i=t}return null===t&&(r=new h1e(i)),a},a.projection(e).digits(i).context(t)}function y1e(e){return function(t){var n=new v1e;for(var r in e)n[r]=e[r];return n.stream=t,n}}function v1e(){}function b1e(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),OXe(n,e.stream(O0e)),t(O0e.result()),null!=r&&e.clipExtent(r),e}function w1e(e,t,n){return b1e(e,function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])},n)}function _1e(e,t,n){return w1e(e,[[0,0],t],n)}function x1e(e,t,n){return b1e(e,function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])},n)}function E1e(e,t,n){return b1e(e,function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])},n)}v1e.prototype={constructor:v1e,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var S1e=fXe(30*lXe);function k1e(e,t){return+t?function(e,t){function n(r,i,o,a,s,l,u,c,d,f,p,h,m,g){var y=u-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=a+f,_=s+p,x=l+h,E=wXe(w*w+_*_+x*x),S=EXe(x/=E),k=uXe(uXe(x)-1)<tXe||uXe(o-d)<tXe?(o+d)/2:dXe(_,w),T=e(k,S),C=T[0],A=T[1],I=C-r,O=A-i,N=v*I-y*O;(N*N/b>t||uXe((y*I+v*O)/b-.5)>.3||a*f+s*p+l*h<S1e)&&(n(r,i,o,a,s,l,C,A,k,w/=E,_/=E,x,m,g),g.point(C,A),n(C,A,k,w,_,x,u,c,d,f,p,h,m,g))}}return function(t){var r,i,o,a,s,l,u,c,d,f,p,h,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=w},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=tJe([r,i]),a=e(r,i);n(c,d,u,f,p,h,c=a[0],d=a[1],u=r,f=o[0],p=o[1],h=o[2],16,t),t.point(c,d)}function b(){m.point=g,t.lineEnd()}function w(){y(),m.point=_,m.lineEnd=x}function _(e,t){v(r=e,t),i=c,o=d,a=f,s=p,l=h,m.point=v}function x(){n(c,d,u,f,p,h,i,o,r,a,s,l,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return y1e({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var T1e=y1e({point:function(e,t){this.stream.point(e*lXe,t*lXe)}});function C1e(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=fXe(o),s=vXe(o),l=a*e,u=s*e,c=a/e,d=s/e,f=(s*n-a*t)/e,p=(s*t+a*n)/e;function h(e,o){return[l*(e*=r)-u*(o*=i)+t,n-u*e-l*o]}return h.invert=function(e,t){return[r*(c*e-d*t+f),i*(p-d*e-c*t)]},h}function A1e(e){return I1e(function(){return e})()}function I1e(e){var t,n,r,i,o,a,s,l,u,c,d=150,f=480,p=250,h=0,m=0,g=0,y=0,v=0,b=0,w=1,_=1,x=null,E=s0e,S=null,k=h0e,T=.5;function C(e){return l(e[0]*lXe,e[1]*lXe)}function A(e){return(e=l.invert(e[0],e[1]))&&[e[0]*sXe,e[1]*sXe]}function I(){var e=C1e(d,0,0,w,_,b).apply(null,t(h,m)),r=C1e(d,f-e[0],p-e[1],w,_,b);return n=GJe(g,y,v),s=VJe(t,r),l=VJe(n,s),a=k1e(s,T),O()}function O(){return u=c=null,C}return C.stream=function(e){return u&&c===e?u:u=T1e(function(e){return y1e({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(E(a(k(c=e)))))},C.preclip=function(e){return arguments.length?(E=e,x=void 0,O()):E},C.postclip=function(e){return arguments.length?(k=e,S=r=i=o=null,O()):k},C.clipAngle=function(e){return arguments.length?(E=+e?l0e(x=e*lXe):(x=null,s0e),O()):x*sXe},C.clipExtent=function(e){return arguments.length?(k=null==e?(S=r=i=o=null,h0e):d0e(S=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),O()):null==S?null:[[S,r],[i,o]]},C.scale=function(e){return arguments.length?(d=+e,I()):d},C.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],I()):[f,p]},C.center=function(e){return arguments.length?(h=e[0]%360*lXe,m=e[1]%360*lXe,I()):[h*sXe,m*sXe]},C.rotate=function(e){return arguments.length?(g=e[0]%360*lXe,y=e[1]%360*lXe,v=e.length>2?e[2]%360*lXe:0,I()):[g*sXe,y*sXe,v*sXe]},C.angle=function(e){return arguments.length?(b=e%360*lXe,I()):b*sXe},C.reflectX=function(e){return arguments.length?(w=e?-1:1,I()):w<0},C.reflectY=function(e){return arguments.length?(_=e?-1:1,I()):_<0},C.precision=function(e){return arguments.length?(a=k1e(s,T=e*e),O()):wXe(T)},C.fitExtent=function(e,t){return w1e(C,e,t)},C.fitSize=function(e,t){return _1e(C,e,t)},C.fitWidth=function(e,t){return x1e(C,e,t)},C.fitHeight=function(e,t){return E1e(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&A,I()}}function O1e(e){var t=0,n=rXe/3,r=I1e(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*lXe,n=e[1]*lXe):[t*sXe,n*sXe]},i}function N1e(e,t){var n=vXe(e),r=(n+vXe(t))/2;if(uXe(r)<tXe)return function(e){var t=fXe(e);function n(e,n){return[e*t,vXe(n)/t]}return n.invert=function(e,n){return[e/t,EXe(n*t)]},n}(e);var i=1+n*(2*r-n),o=wXe(i)/r;function a(e,t){var n=wXe(i-2*r*vXe(t))/r;return[n*vXe(e*=r),o-n*fXe(e)]}return a.invert=function(e,t){var n=o-t,a=dXe(e,uXe(n))*bXe(n);return n*r<0&&(a-=rXe*bXe(e)*bXe(n)),[a/r,EXe((i-(e*e+n*n)*r*r)/(2*r))]},a}function D1e(){return O1e(N1e).scale(155.424).center([0,33.6442])}function R1e(){return D1e().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function M1e(e){return function(t,n){var r=fXe(t),i=fXe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*vXe(t),o*vXe(n)]}}function P1e(e){return function(t,n){var r=wXe(t*t+n*n),i=e(r),o=vXe(i),a=fXe(i);return[dXe(t*o,r*a),EXe(r&&n*o/r)]}}var F1e=M1e(function(e){return wXe(2/(1+e))});F1e.invert=P1e(function(e){return 2*EXe(e/2)});var L1e=M1e(function(e){return(e=xXe(e))&&e/vXe(e)});function j1e(e,t){return[e,gXe(_Xe((iXe+t)/2))]}function B1e(e){var t,n,r,i=A1e(e),o=i.center,a=i.scale,s=i.translate,l=i.clipExtent,u=null;function c(){var o=rXe*a(),s=i(function(e){function t(t){return(t=e(t[0]*lXe,t[1]*lXe))[0]*=sXe,t[1]*=sXe,t}return e=GJe(e[0]*lXe,e[1]*lXe,e.length>2?e[2]*lXe:0),t.invert=function(t){return(t=e.invert(t[0]*lXe,t[1]*lXe))[0]*=sXe,t[1]*=sXe,t},t}(i.rotate()).invert([0,0]));return l(null==u?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===j1e?[[Math.max(s[0]-o,u),t],[Math.min(s[0]+o,n),r]]:[[u,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?u=t=n=r=null:(u=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==u?null:[[u,t],[n,r]]},c()}function $1e(e){return _Xe((iXe+e)/2)}function z1e(e,t){var n=fXe(e),r=e===t?vXe(e):gXe(n/fXe(t))/gXe($1e(t)/$1e(e)),i=n*yXe($1e(e),r)/r;if(!r)return j1e;function o(e,t){i>0?t<-iXe+tXe&&(t=-iXe+tXe):t>iXe-tXe&&(t=iXe-tXe);var n=i/yXe($1e(t),r);return[n*vXe(r*e),i-n*fXe(r*e)]}return o.invert=function(e,t){var n=i-t,o=bXe(r)*wXe(e*e+n*n),a=dXe(e,uXe(n))*bXe(n);return n*r<0&&(a-=rXe*bXe(e)*bXe(n)),[a/r,2*cXe(yXe(i/o,1/r))-iXe]},o}function U1e(e,t){return[e,t]}function q1e(e,t){var n=fXe(e),r=e===t?vXe(e):(n-fXe(t))/(t-e),i=n/r+e;if(uXe(r)<tXe)return U1e;function o(e,t){var n=i-t,o=r*e;return[n*vXe(o),i-n*fXe(o)]}return o.invert=function(e,t){var n=i-t,o=dXe(e,uXe(n))*bXe(n);return n*r<0&&(o-=rXe*bXe(e)*bXe(n)),[o/r,i-bXe(r)*wXe(e*e+n*n)]},o}L1e.invert=P1e(function(e){return e}),j1e.invert=function(e,t){return[e,2*cXe(hXe(t))-iXe]},U1e.invert=U1e;var H1e=1.340264,V1e=-.081106,W1e=893e-6,G1e=.003796,Y1e=wXe(3)/2;function K1e(e,t){var n=EXe(Y1e*vXe(t)),r=n*n,i=r*r*r;return[e*fXe(n)/(Y1e*(H1e+3*V1e*r+i*(7*W1e+9*G1e*r))),n*(H1e+V1e*r+i*(W1e+G1e*r))]}function Z1e(e,t){var n=fXe(t),r=fXe(e)*n;return[n*vXe(e)/r,vXe(t)/r]}function Q1e(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function X1e(e,t){return[fXe(t)*vXe(e),vXe(t)]}function J1e(e,t){var n=fXe(t),r=1+fXe(e)*n;return[n*vXe(e)/r,vXe(t)/r]}function e2e(e,t){return[gXe(_Xe((iXe+t)/2)),-e]}K1e.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(H1e+V1e*i+o*(W1e+G1e*i))-t)/(H1e+3*V1e*i+o*(7*W1e+9*G1e*i)))*r)*i*i,!(uXe(n)<nXe));++a);return[Y1e*e*(H1e+3*V1e*i+o*(7*W1e+9*G1e*i))/fXe(r),EXe(vXe(r)/Y1e)]},Z1e.invert=P1e(cXe),Q1e.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(uXe(n)>tXe&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},X1e.invert=P1e(EXe),J1e.invert=P1e(function(e){return 2*cXe(e)}),e2e.invert=function(e,t){return[-t,2*cXe(hXe(e))-iXe]};var t2e,n2e=Math.abs,r2e=Math.cos,i2e=Math.sin,o2e=Math.PI,a2e=o2e/2,s2e=(t2e=2)>0?Math.sqrt(t2e):0;function l2e(e){return e>1?a2e:e<-1?-a2e:Math.asin(e)}function u2e(e,t){var n,r=e*i2e(t),i=30;do{t-=n=(t+i2e(t)-r)/(1+r2e(t))}while(n2e(n)>1e-6&&--i>0);return t/2}var c2e=function(e,t,n){function r(r,i){return[e*r*r2e(i=u2e(n,i)),t*i2e(i)]}return r.invert=function(r,i){return i=l2e(i/t),[r/(e*r2e(i)),l2e((2*i+i2e(2*i))/n)]},r}(s2e/a2e,s2e,o2e);const d2e=g1e(),f2e=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function p2e(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(m2e[e]=function(e,t){return function n(){const r=t();return r.type=e,r.path=g1e().projection(r),r.copy=r.copy||function(){const e=n();return f2e.forEach(t=>{r[t]&&e[t](r[t]())}),e.path.pointRadius(r.path.pointRadius()),e},RHe(r)}}(e,t),this):m2e[e]||null}function h2e(e){return e&&e.path||d2e}const m2e={albers:R1e,albersusa:function(){var e,t,n,r,i,o,a=R1e(),s=D1e().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=D1e().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function d(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(e)},c.stream=function(n){return e&&t===n?e:e=function(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}([a.stream(t=n),s.stream(n),l.stream(n)])},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),l.precision(e),d()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),l.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(u),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+tXe,c+.12*t+tXe],[o-.214*t-tXe,c+.234*t-tXe]]).stream(u),i=l.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+tXe,c+.166*t+tXe],[o-.115*t-tXe,c+.234*t-tXe]]).stream(u),d()},c.fitExtent=function(e,t){return w1e(c,e,t)},c.fitSize=function(e,t){return _1e(c,e,t)},c.fitWidth=function(e,t){return x1e(c,e,t)},c.fitHeight=function(e,t){return E1e(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return A1e(F1e).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return A1e(L1e).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return O1e(z1e).scale(109.5).parallels([30,30])},conicequalarea:D1e,conicequidistant:function(){return O1e(q1e).scale(131.154).center([0,13.9389])},equalEarth:function(){return A1e(K1e).scale(177.158)},equirectangular:function(){return A1e(U1e).scale(152.63)},gnomonic:function(){return A1e(Z1e).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,l=0,u=0,c=1,d=1,f=0,p=null,h=1,m=1,g=y1e({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=h0e;function v(){return h=s*c,m=s*d,o=a=null,b}function b(n){var r=n[0]*h,i=n[1]*m;if(f){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+l,i+u]}return b.invert=function(n){var r=n[0]-l,i=n[1]-u;if(f){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/h,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,p=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(p=n=r=i=null,h0e):d0e(p=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==p?null:[[p,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(l=+e[0],u=+e[1],v()):[l,u]},b.angle=function(n){return arguments.length?(t=vXe(f=n%360*lXe),e=fXe(f),v()):f*sXe},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(d=e?-1:1,v()):d<0},b.fitExtent=function(e,t){return w1e(b,e,t)},b.fitSize=function(e,t){return _1e(b,e,t)},b.fitWidth=function(e,t){return x1e(b,e,t)},b.fitHeight=function(e,t){return E1e(b,e,t)},b},mercator:function(){return B1e(j1e).scale(961/aXe)},mollweide:function(){return A1e(c2e).scale(169.529)},naturalEarth1:function(){return A1e(Q1e).scale(175.295)},orthographic:function(){return A1e(X1e).scale(249.5).clipAngle(90.000001)},stereographic:function(){return A1e(J1e).scale(250).clipAngle(142)},transversemercator:function(){var e=B1e(e2e),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const Set in m2e)p2e(Set,m2e[Set]);function g2e(){}const y2e=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function v2e(){var e=1,t=1,n=a;function r(e,t){return t.map(t=>i(e,t))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,l,u,c,d,f=[],p=[];a=s=-1,u=n[0]>=r,y2e[u<<1].forEach(h);for(;++a<e-1;)l=u,u=n[a+1]>=r,y2e[l|u<<1].forEach(h);y2e[u|0].forEach(h);for(;++s<t-1;){for(a=-1,u=n[s*e+e]>=r,c=n[s*e]>=r,y2e[u<<1|c<<2].forEach(h);++a<e-1;)l=u,u=n[s*e+e+a+1]>=r,d=c,c=n[s*e+a+1]>=r,y2e[l|u<<1|c<<2|d<<3].forEach(h);y2e[u|c<<3].forEach(h)}a=-1,c=n[s*e]>=r,y2e[c<<2].forEach(h);for(;++a<e-1;)d=c,c=n[s*e+a+1]>=r,y2e[c<<2|d<<3].forEach(h);function h(e){var t,n,r=[e[0][0]+a,e[0][1]+s],l=[e[1][0]+a,e[1][1]+s],u=o(r),c=o(l);(t=p[u])?(n=f[c])?(delete p[t.end],delete f[n.start],t===n?(t.ring.push(l),i(t.ring)):f[t.start]=p[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete p[t.end],t.ring.push(l),p[t.end=c]=t):(t=f[c])?(n=p[u])?(delete f[t.start],delete p[n.end],t===n?(t.ring.push(l),i(t.ring)):f[n.start]=p[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete f[t.start],t.ring.unshift(r),f[t.start=u]=t):f[u]=p[c]={start:u,end:c,ring:[r,l]}}y2e[c<<3].forEach(h)}(r,i,e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)}),s.forEach(e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==b2e((t=a[n])[0],e))return void t.push(e)}),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach(n=>{var o,a=n[0],s=n[1],l=0|a,u=0|s,c=r[u*e+l];a>0&&a<e&&l===a&&(o=r[u*e+l-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&u===s&&(o=r[(u-1)*e+l],n[1]=s+(i-o)/(c-o)-.5)})}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||SMe("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:g2e,r):n===a},r}function b2e(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=w2e(e,t[r]))return n;return 0}function w2e(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],c=l[1],d=e[s],f=d[0],p=d[1];if(_2e(l,d,t))return 0;c>r!=p>r&&n<(f-u)*(r-c)/(p-c)+u&&(i=-i)}return i}function _2e(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function x2e(e,t,n){return function(r){var i=yPe(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,l=t?u4(o,a,e):s/(e+1);return v4(o+l,a,l)}}function E2e(e){Fje.call(this,null,e)}function S2e(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(e){e.forEach(u)}function u(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(l),e}}function k2e(e,t,n){const r=e>=0?e:qje(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function T2e(e){return lPe(e)?e:hPe(+e)}function C2e(){var e=e=>e[0],t=e=>e[1],n=OMe,r=[-1,-1],i=960,o=500,a=2;function s(s,l){const u=k2e(r[0],s,e)>>a,c=k2e(r[1],s,t)>>a,d=u?u+2:0,f=c?c+2:0,p=2*d+(i>>a),h=2*f+(o>>a),m=new Float32Array(p*h),g=new Float32Array(p*h);let y=m;s.forEach(r=>{const i=d+(+e(r)>>a),o=f+(+t(r)>>a);i>=0&&i<p&&o>=0&&o<h&&(m[i+o*p]+=+n(r))}),u>0&&c>0?(A2e(p,h,m,g,u),I2e(p,h,g,m,c),A2e(p,h,m,g,u),I2e(p,h,g,m,c),A2e(p,h,m,g,u),I2e(p,h,g,m,c)):u>0?(A2e(p,h,m,g,u),A2e(p,h,g,m,u),A2e(p,h,m,g,u),y=g):c>0&&(I2e(p,h,m,g,c),I2e(p,h,g,m,c),I2e(p,h,m,g,c),y=g);const v=l?Math.pow(2,-2*a):1/b4(y);for(let e=0,t=p*h;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:p,height:h,x1:d,y1:f,x2:d+(i>>a),y2:f+(o>>a)}}return s.x=function(t){return arguments.length?(e=T2e(t),s):e},s.y=function(e){return arguments.length?(t=T2e(e),s):t},s.weight=function(e){return arguments.length?(n=T2e(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||SMe("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||SMe("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=aPe(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&SMe("invalid bandwidth"),r=e,s):r},s}function A2e(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function I2e(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,l=0;s<t+i;++s)s<t&&(l+=n[a+s*e]),s>=i&&(s>=o&&(l-=n[a+(s-o)*e]),r[a+(s-i)*e]=l/Math.min(s+1,t-1+o-s,o))}function O2e(e){Fje.call(this,null,e)}E2e.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},EPe(E2e,Fje,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||AMe,o=v2e().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=x2e(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map(e=>c4(t(e).values)))}(r,i,e),s=null===e.as?null:e.as||"contour",l=[];return r.forEach(t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,PMe(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;lPe(i)&&(i=i(n,r));lPe(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(APe(i)?i:i[0])||1,s=(APe(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(S2e(t,a,s,l,u))}(r,n,t,e),r.forEach(e=>{l.push(sje(t,oje(null!=s?{[s]:e}:e)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),O2e.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const N2e=["x","y","weight","size","cellSize","bandwidth"];function D2e(e,t){return N2e.forEach(n=>null!=t[n]?e[n](t[n]):0),e}function R2e(e){Fje.call(this,null,e)}EPe(O2e,Fje,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,l=[],u=e=>e(o);if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(u)])||(n[a]=s=[],s.dims=a,l.push(s)),s.push(o);return l}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(bMe),a=D2e(C2e(),e),s=e.as||"grid";return n=i.map(t=>oje(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),R2e.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},EPe(R2e,Fje,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=v2e().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||x2e(e.count||10,e.nice,!!a),l=e.size;return a||(a=t.materialize(t.SOURCE).source,r=S2e(n=D2e(C2e(),e)(a,!0),n.scale||1,n.scale||1,0,0),l=[n.width,n.height],a=n.values),s=PMe(s)?s:s(a),a=o.size(l)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(oje),i}});const M2e="Feature",P2e="FeatureCollection";function F2e(e){Fje.call(this,null,e)}function L2e(e){Fje.call(this,null,e)}function j2e(e){Fje.call(this,null,e)}function B2e(e){Fje.call(this,null,e)}function $2e(e){Fje.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,l,u,c,d,f=10,p=f,h=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return v4(pXe(r/h)*h,n,h).map(c).concat(v4(pXe(s/m)*m,a,m).map(d)).concat(v4(pXe(t/f)*f,e,f).filter(function(e){return uXe(e%h)>tXe}).map(l)).concat(v4(pXe(o/p)*p,i,p).filter(function(e){return uXe(e%m)>tXe}).map(u))}return y.lines=function(){return v().map(function(e){return{type:"LineString",coordinates:e}})},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(d(a).slice(1),c(n).reverse().slice(1),d(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],y):[h,m]},y.stepMinor=function(e){return arguments.length?(f=+e[0],p=+e[1],y):[f,p]},y.precision=function(f){return arguments.length?(g=+f,l=f0e(o,i,90),u=p0e(t,e,g),c=f0e(s,a,90),d=p0e(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function z2e(e){Fje.call(this,null,e)}function U2e(e){if(!lPe(e))return!1;const t=qPe(wMe(e));return t.$x||t.$y||t.$value||t.$max}function q2e(e){Fje.call(this,null,e),this.modified(!0)}function H2e(e,t,n){lPe(e[t])&&e[t](n)}F2e.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},EPe(F2e,Fje,{transform(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],l=e.geojson||!o&&AMe,u=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(wMe(l))||a&&t.modified(wMe(a))||s&&t.modified(wMe(s)),this.value&&!n||(u=t.SOURCE,this._features=r=[],this._points=i=[]),l&&t.visit(u,e=>r.push(l(e))),a&&s&&(t.visit(u,e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])}),r=r.concat({type:M2e,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:P2e,features:r}}}),L2e.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},EPe(L2e,Fje,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||AMe,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=h2e(e.projection),n.materialize().reflow()):a=i===AMe||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,e=>e[o]=r(i(e))),r.pointRadius(s),n.modifies(o)}}),j2e.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},EPe(j2e,Fje,{transform(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],l=a[1];function u(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[l]=t[1]):(e[s]=void 0,e[l]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,u)),t.modifies(a)}}),B2e.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},EPe(B2e,Fje,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}(h2e(e.projection),e.field||TMe("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,e=>e[i]=r),n.modifies(i)}}),$2e.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},EPe($2e,Fje,{transform(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const o in e)lPe(i[o])&&i[o](e[o]);return n=i(),r.length?t.mod.push(lje(r[0],n)):t.add.push(oje(n)),r[0]=n,t}}),z2e.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},EPe(z2e,Fje,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||AMe,o=function(e,t){let n;lPe(e)?(n=n=>e(n,t),n.dep=U2e(e)):e?n=hPe(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;lPe(e)?(n=n=>Y1(e(n,t)),n.dep=U2e(e)):n=hPe(Y1(e||"#888"));return n}(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?c4(n.map(e=>c4(i(e).values))):0};return n.forEach(e=>{const t=i(e),n=gPe({},e,l);r||(n.$max=c4(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||i,u=e.y2||o,c=e.values,d=c?e=>c[e]:IMe,f=vUe(l-a,u-s),p=f.getContext("2d"),h=p.getImageData(0,0,l-a,u-s),m=h.data;for(let g=s,y=0;g<u;++g){t.$y=g-s;for(let e=a,o=g*i;e<l;++e,y+=4){t.$x=e-a,t.$value=d(e+o);const i=n(t);m[y+0]=i.r,m[y+1]=i.g,m[y+2]=i.b,m[y+3]=~~(255*r(t))}}return p.putImageData(h,0,0),f}(t,n,a.dep?a:hPe(a(n)),o.dep?o:hPe(o(n)))}),t.reflow(!0).modifies(s)}}),EPe(q2e,Fje,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=p2e((e||"mercator").toLowerCase());t||SMe("Unrecognized projection type: "+e);return t()}(e.type),f2e.forEach(t=>{null!=e[t]&&H2e(n,t,e[t])})):f2e.forEach(t=>{e.modified(t)&&H2e(n,t,e[t])}),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return e=aPe(e),1===e.length?e[0]:{type:P2e,features:e.reduce((e,t)=>e.concat(function(e){return e.type===P2e?e.features:aPe(e).filter(e=>null!=e).map(e=>e.type===M2e?e:{type:M2e,geometry:e})}(t)),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});const V2e=Object.freeze(Object.defineProperty({__proto__:null,contour:R2e,geojson:F2e,geopath:L2e,geopoint:j2e,geoshape:B2e,graticule:$2e,heatmap:z2e,isocontour:E2e,kde2d:O2e,projection:q2e},Symbol.toStringTag,{value:"Module"}));function W2e(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,u,c,d,f,p=e._root,h={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!p)return e._root=h,e;for(;p.length;)if((u=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=p,!(p=p[d=c<<1|u]))return i[d]=h,e;if(s=+e._x.call(null,p.data),l=+e._y.call(null,p.data),t===s&&n===l)return h.next=p,i?i[d]=h:e._root=h,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(u=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((d=c<<1|u)==(f=(l>=a)<<1|s>=o));return i[f]=p,i[d]=h,e}function G2e(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Y2e(e){return e[0]}function K2e(e){return e[1]}function Z2e(e,t,n){var r=new Q2e(null==t?Y2e:t,null==n?K2e:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Q2e(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function X2e(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var J2e=Z2e.prototype=Q2e.prototype;function e3e(e){return function(){return e}}function t3e(e){return 1e-6*(e()-.5)}function n3e(e){return e.x+e.vx}function r3e(e){return e.y+e.vy}function i3e(e){return e.index}function o3e(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}J2e.copy=function(){var e,t,n=new Q2e(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=X2e(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=X2e(t));return n},J2e.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return W2e(this.cover(t,n),t,n,e)},J2e.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>d&&(d=i));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<o;++n)W2e(this,a[n],s[n],e[n]);return this},J2e.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,u=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=u,u=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},J2e.data=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},J2e.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},J2e.find=function(e,t,n){var r,i,o,a,s,l,u,c=this._x0,d=this._y0,f=this._x1,p=this._y1,h=[],m=this._root;for(m&&h.push(new G2e(m,c,d,f,p)),null==n?n=1/0:(c=e-n,d=t-n,f=e+n,p=t+n,n*=n);l=h.pop();)if(!(!(m=l.node)||(i=l.x0)>f||(o=l.y0)>p||(a=l.x1)<c||(s=l.y1)<d))if(m.length){var g=(i+a)/2,y=(o+s)/2;h.push(new G2e(m[3],g,y,a,s),new G2e(m[2],i,y,g,s),new G2e(m[1],g,o,a,y),new G2e(m[0],i,o,g,y)),(u=(t>=y)<<1|e>=g)&&(l=h[h.length-1],h[h.length-1]=h[h.length-1-u],h[h.length-1-u]=l)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),w=v*v+b*b;if(w<n){var _=Math.sqrt(n=w);c=e-_,d=t-_,f=e+_,p=t+_,r=m.data}}return r},J2e.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,u,c,d,f,p=this._root,h=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!p)return this;if(p.length)for(;;){if((u=o>=(s=(h+g)/2))?h=s:g=s,(c=a>=(l=(m+y)/2))?m=l:y=l,t=p,!(p=p[d=c<<1|u]))return this;if(!p.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,f=d)}for(;p.data!==e;)if(r=p,!(p=p.next))return this;return(i=p.next)&&delete p.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(p=t[0]||t[1]||t[2]||t[3])&&p===(t[3]||t[2]||t[1]||t[0])&&!p.length&&(n?n[f]=p:this._root=p),this):(this._root=i,this)},J2e.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},J2e.root=function(){return this._root},J2e.size=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},J2e.visit=function(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new G2e(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var u=(r+o)/2,c=(i+a)/2;(n=l[3])&&s.push(new G2e(n,u,c,o,a)),(n=l[2])&&s.push(new G2e(n,r,c,u,a)),(n=l[1])&&s.push(new G2e(n,u,i,o,c)),(n=l[0])&&s.push(new G2e(n,r,i,u,c))}return this},J2e.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new G2e(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(a+l)/2,d=(s+u)/2;(o=i[0])&&n.push(new G2e(o,a,s,c,d)),(o=i[1])&&n.push(new G2e(o,c,s,l,d)),(o=i[2])&&n.push(new G2e(o,a,d,c,u)),(o=i[3])&&n.push(new G2e(o,c,d,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},J2e.x=function(e){return arguments.length?(this._x=e,this):this._x},J2e.y=function(e){return arguments.length?(this._y=e,this):this._y};var a3e={value:()=>{}};function s3e(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new l3e(r)}function l3e(e){this._=e}function u3e(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function c3e(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=a3e,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}l3e.prototype=s3e.prototype={constructor:l3e,on:function(e,t){var n,r,i=this._,o=(r=i,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<s;)if(n=(e=o[a]).type)i[n]=c3e(i[n],e.name,t);else if(null==t)for(n in i)i[n]=c3e(i[n],e.name,null);return this}for(;++a<s;)if((n=(e=o[a]).type)&&(n=u3e(i[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new l3e(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var d3e,f3e,p3e=0,h3e=0,m3e=0,g3e=0,y3e=0,v3e=0,b3e="object"==typeof performance&&performance.now?performance:Date,w3e="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function _3e(){return y3e||(w3e(x3e),y3e=b3e.now()+v3e)}function x3e(){y3e=0}function E3e(){this._call=this._time=this._next=null}function S3e(e,t,n){var r=new E3e;return r.restart(e,t,n),r}function k3e(){y3e=(g3e=b3e.now())+v3e,p3e=h3e=0;try{!function(){_3e(),++p3e;for(var e,t=d3e;t;)(e=y3e-t._time)>=0&&t._call.call(void 0,e),t=t._next;--p3e}()}finally{p3e=0,function(){var e,t,n=d3e,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:d3e=t);f3e=e,C3e(r)}(),y3e=0}}function T3e(){var e=b3e.now(),t=e-g3e;t>1e3&&(v3e-=t,g3e=e)}function C3e(e){p3e||(h3e&&(h3e=clearTimeout(h3e)),e-y3e>24?(e<1/0&&(h3e=setTimeout(k3e,e-b3e.now()-v3e)),m3e&&(m3e=clearInterval(m3e))):(m3e||(g3e=b3e.now(),m3e=setInterval(T3e,1e3)),p3e=1,w3e(k3e)))}E3e.prototype=S3e.prototype={constructor:E3e,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?_3e():+n)+(null==t?0:+t),this._next||f3e===this||(f3e?f3e._next=this:d3e=this,f3e=this),this._call=e,this._time=n,C3e()},stop:function(){this._call&&(this._call=null,this._time=1/0,C3e())}};const A3e=4294967296;function I3e(e){return e.x}function O3e(e){return e.y}var N3e=Math.PI*(3-Math.sqrt(5));function D3e(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=S3e(d),u=s3e("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%A3e)/A3e}();function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(r){var l,u,c=e.length;void 0===r&&(r=1);for(var d=0;d<r;++d)for(n+=(o-n)*i,s.forEach(function(e){e(n)}),l=0;l<c;++l)null==(u=e[l]).fx?u.x+=u.vx*=a:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=a:(u.y=u.fy,u.vy=0);return t}function p(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*N3e;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function h(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),p(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,p(),s.forEach(h),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(h),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,h(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(a=(i=t-(s=e[u]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(e,n){return arguments.length>1?(u.on(e,n),t):u.on(e)}}}const R3e={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,l=0;for(i=0;i<a;++i)s+=(o=n[i]).x,l+=o.y;for(s=(s/a-e)*r,l=(l/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=l}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,l,u,c,d,f,p=t.length,h=0;h<o;++h)for(a=Z2e(t,n3e,r3e).visitAfter(s),e=0;e<p;++e)l=t[e],d=n[l.index],f=d*d,u=l.x+l.vx,c=l.y+l.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,p=e.r,h=d+p;if(!s)return t>u+h||o<u-h||n>c+h||a<c-h;if(s.index>l.index){var m=u-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<h*h&&(0===m&&(y+=(m=t3e(r))*m),0===g&&(y+=(g=t3e(r))*g),y=(h-(y=Math.sqrt(y)))/y*i,l.vx+=(m*=y)*(h=(p*=p)/(f+p)),l.vy+=(g*=y)*h,s.vx-=m*(h=1-h),s.vy-=g*h)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=e3e(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,l()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:e3e(+t),l(),a):e},a},nbody:function(){var e,t,n,r,i,o=e3e(-30),a=1,s=1/0,l=.81;function u(n){var i,o=e.length,a=Z2e(e,I3e,O3e).visitAfter(d);for(r=n,i=0;i<o;++i)t=e[i],a.visit(f)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function d(e){var t,n,r,o,a,s=0,l=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,o+=n*t.y);e.x=r/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function f(e,o,u,c){if(!e.value)return!0;var d=e.x-t.x,f=e.y-t.y,p=c-o,h=d*d+f*f;if(p*p/l<h)return h<s&&(0===d&&(h+=(d=t3e(n))*d),0===f&&(h+=(f=t3e(n))*f),h<a&&(h=Math.sqrt(a*h)),t.vx+=d*e.value*r/h,t.vy+=f*e.value*r/h),!0;if(!(e.length||h>=s)){(e.data!==t||e.next)&&(0===d&&(h+=(d=t3e(n))*d),0===f&&(h+=(f=t3e(n))*f),h<a&&(h=Math.sqrt(a*h)));do{e.data!==t&&(p=i[e.data.index]*r/h,t.vx+=d*p,t.vy+=f*p)}while(e=e.next)}}return u.initialize=function(t,r){e=t,n=r,c()},u.strength=function(e){return arguments.length?(o="function"==typeof e?e:e3e(+e),c(),u):o},u.distanceMin=function(e){return arguments.length?(a=e*e,u):Math.sqrt(a)},u.distanceMax=function(e){return arguments.length?(s=e*e,u):Math.sqrt(s)},u.theta=function(e){return arguments.length?(l=e*e,u):Math.sqrt(l)},u},link:function(e){var t,n,r,i,o,a,s=i3e,l=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},u=e3e(30),c=1;function d(r){for(var i=0,s=e.length;i<c;++i)for(var l,u,d,f,p,h,m,g=0;g<s;++g)u=(l=e[g]).source,f=(d=l.target).x+d.vx-u.x-u.vx||t3e(a),p=d.y+d.vy-u.y-u.vy||t3e(a),f*=h=((h=Math.sqrt(f*f+p*p))-n[g])/h*r*t[g],p*=h,d.vx-=f*(m=o[g]),d.vy-=p*m,u.vx+=f*(m=1-m),u.vy+=p*m}function f(){if(r){var a,l,u=r.length,c=e.length,d=new Map(r.map((e,t)=>[s(e,t,r),e]));for(a=0,i=new Array(u);a<c;++a)(l=e[a]).index=a,"object"!=typeof l.source&&(l.source=o3e(d,l.source)),"object"!=typeof l.target&&(l.target=o3e(d,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)l=e[a],o[a]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(c),p(),n=new Array(c),h()}}function p(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+l(e[n],n,e)}function h(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+u(e[t],t,e)}return null==e&&(e=[]),d.initialize=function(e,t){r=e,a=t,f()},d.links=function(t){return arguments.length?(e=t,f(),d):e},d.id=function(e){return arguments.length?(s=e,d):s},d.iterations=function(e){return arguments.length?(c=+e,d):c},d.strength=function(e){return arguments.length?(l="function"==typeof e?e:e3e(+e),p(),d):l},d.distance=function(e){return arguments.length?(u="function"==typeof e?e:e3e(+e),h(),d):u},d},x:function(e){var t,n,r,i=e3e(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=e3e(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:e3e(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:e3e(+t),a(),o):e},o},y:function(e){var t,n,r,i=e3e(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=e3e(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:e3e(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:e3e(+t),a(),o):e},o}},M3e="forces",P3e=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],F3e=["static","iterations"],L3e=["x","y","vx","vy"];function j3e(e){Fje.call(this,null,e)}function B3e(e,t,n,r){var i,o,a,s,l=aPe(t.forces);for(i=0,o=P3e.length;i<o;++i)(a=P3e[i])!==M3e&&t.modified(a)&&e[a](t[a]);for(i=0,o=l.length;i<o;++i)s=M3e+i,(a=n||t.modified(M3e,i)?z3e(l[i]):r&&$3e(l[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(M3e+i,null);return e.numForces=l.length,e}function $3e(e,t){var n,r;for(n in e)if(lPe(r=e[n])&&t.modified(wMe(r)))return 1;return 0}function z3e(e){var t,n;for(n in bPe(R3e,e.force)||SMe("Unrecognized force: "+e.force),t=R3e[e.force](),e)lPe(t[n])&&U3e(t[n],e[n],e);return t}function U3e(e,t,n){e(lPe(t)?e=>t(e,n):t)}j3e.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:L3e}]},EPe(j3e,Fje,{transform(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(P3e),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&B3e(i,e,0,t)):(this.value=i=function(e,t){const n=D3e(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),B3e(n,t,!0).on("end",()=>o=!0)}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(F3e)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s,l=this._argops,u=0,c=l.length;u<c;++u)if(s=l[u],s.name===M3e&&"link"===s.op._argval.force)for(var r,i=s.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(L3e)}});const q3e=Object.freeze(Object.defineProperty({__proto__:null,force:j3e},Symbol.toStringTag,{value:"Module"}));function H3e(e,t){return e.parent===t.parent?1:2}function V3e(e,t){return e+t.x}function W3e(e,t){return Math.max(e,t.y)}function G3e(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function Y3e(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=Z3e)):void 0===t&&(t=K3e);for(var n,r,i,o,a,s=new J3e(e),l=[s];n=l.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new J3e(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(X3e)}function K3e(e){return e.children}function Z3e(e){return Array.isArray(e)?e[1]:null}function Q3e(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function X3e(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function J3e(e){this.data=e,this.depth=this.height=0,this.parent=null}function e4e(e){return null==e?null:t4e(e)}function t4e(e){if("function"!=typeof e)throw new Error;return e}function n4e(){return 0}function r4e(e){return function(){return e}}J3e.prototype=Y3e.prototype={constructor:J3e,count:function(){return this.eachAfter(G3e)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++l,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})},sort:function(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e},links:function(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t},copy:function(){return Y3e(this).eachBefore(Q3e)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};const i4e=4294967296;function o4e(e,t){var n,r;if(l4e(t,e))return[t];for(n=0;n<e.length;++n)if(a4e(t,e[n])&&l4e(c4e(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(a4e(c4e(e[n],e[r]),t)&&a4e(c4e(e[n],t),e[r])&&a4e(c4e(e[r],t),e[n])&&l4e(d4e(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function a4e(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function s4e(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function l4e(e,t){for(var n=0;n<t.length;++n)if(!s4e(e,t[n]))return!1;return!0}function u4e(e){switch(e.length){case 1:return function(e){return{x:e.x,y:e.y,r:e.r}}(e[0]);case 2:return c4e(e[0],e[1]);case 3:return d4e(e[0],e[1],e[2])}}function c4e(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-r,c=s-i,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*c)/2,y:(r+a+u/d*c)/2,r:(d+i+s)/2}}function d4e(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-a,p=r-u,h=i-s,m=i-c,g=l-o,y=d-o,v=r*r+i*i-o*o,b=v-a*a-s*s+l*l,w=v-u*u-c*c+d*d,_=p*h-f*m,x=(h*w-m*b)/(2*_)-r,E=(m*g-h*y)/_,S=(p*b-f*w)/(2*_)-i,k=(f*y-p*g)/_,T=E*E+k*k-1,C=2*(o+x*E+S*k),A=x*x+S*S-o*o,I=-(Math.abs(T)>1e-6?(C+Math.sqrt(C*C-4*T*A))/(2*T):A/C);return{x:r+x+E*I,y:i+S+k*I,r:I}}function f4e(e,t,n){var r,i,o,a,s=e.x-t.x,l=e.y-t.y,u=s*s+l*l;u?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(u+a-i)/(2*u),o=Math.sqrt(Math.max(0,a/u-r*r)),n.x=e.x-r*s-o*l,n.y=e.y-r*l+o*s):(r=(u+i-a)/(2*u),o=Math.sqrt(Math.max(0,i/u-r*r)),n.x=t.x+r*s-o*l,n.y=t.y+r*l+o*s)):(n.x=t.x+n.r,n.y=t.y)}function p4e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function h4e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function m4e(e){this._=e,this.next=null,this.previous=null}function g4e(e,t){if(!(o=(e=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}(e)).length))return 0;var n,r,i,o,a,s,l,u,c,d,f;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;f4e(r,n,i=e[2]),n=new m4e(n),r=new m4e(r),i=new m4e(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){f4e(n._,r._,i=e[l]),i=new m4e(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do{if(d<=f){if(p4e(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(p4e(c._,i._)){(n=c).next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=h4e(n);(i=i.next)!==r;)(s=h4e(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=function(e,t){for(var n,r,i=0,o=(e=function(e,t){let n,r,i=e.length;for(;i;)r=t()*i--|0,n=e[i],e[i]=e[r],e[r]=n;return e}(Array.from(e),t)).length,a=[];i<o;)n=e[i],r&&s4e(r,n)?++i:(r=u4e(a=o4e(a,n)),i=0);return r}(n,t),l=0;l<o;++l)(n=e[l]).x-=i.x,n.y-=i.y;return i.r}function y4e(e){return Math.sqrt(e.value)}function v4e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function b4e(e,t,n){return function(r){if(i=r.children){var i,o,a,s=i.length,l=e(r)*t||0;if(l)for(o=0;o<s;++o)i[o].r+=l;if(a=g4e(i,n),l)for(o=0;o<s;++o)i[o].r-=l;r.r=a+l}}}function w4e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function _4e(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function x4e(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(r-t)/e.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}var E4e={depth:-1},S4e={},k4e={};function T4e(e){return e.id}function C4e(e){return e.parentId}function A4e(){var e,t=T4e,n=C4e;function r(r){var i,o,a,s,l,u,c,d,f=Array.from(r),p=t,h=n,m=new Map;if(null!=e){const t=f.map((t,n)=>function(e){e=`${e}`;let t=e.length;O4e(e,t-1)&&!O4e(e,t-2)&&(e=e.slice(0,-1));return"/"===e[0]?e:`/${e}`}(e(t,n,r))),n=t.map(I4e),i=new Set(t).add("");for(const e of n)i.has(e)||(i.add(e),t.push(e),n.push(I4e(e)),f.push(k4e));p=(e,n)=>t[n],h=(e,t)=>n[t]}for(a=0,i=f.length;a<i;++a)o=f[a],u=f[a]=new J3e(o),null!=(c=p(o,a,r))&&(c+="")&&(d=u.id=c,m.set(d,m.has(d)?S4e:u)),null!=(c=h(o,a,r))&&(c+="")&&(u.parent=c);for(a=0;a<i;++a)if(c=(u=f[a]).parent){if(!(l=m.get(c)))throw new Error("missing: "+c);if(l===S4e)throw new Error("ambiguous: "+c);l.children?l.children.push(u):l.children=[u],u.parent=l}else{if(s)throw new Error("multiple roots");s=u}if(!s)throw new Error("no root");if(null!=e){for(;s.data===k4e&&1===s.children.length;)s=s.children[0],--i;for(let e=f.length-1;e>=0&&(u=f[e]).data===k4e;--e)u.data=null}if(s.parent=E4e,s.eachBefore(function(e){e.depth=e.parent.depth+1,--i}).eachBefore(X3e),s.parent=null,i>0)throw new Error("cycle");return s}return r.id=function(e){return arguments.length?(t=e4e(e),r):t},r.parentId=function(e){return arguments.length?(n=e4e(e),r):n},r.path=function(t){return arguments.length?(e=e4e(t),r):e},r}function I4e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!O4e(e,t););return e.slice(0,t)}function O4e(e,t){if("/"===e[t]){let n=0;for(;t>0&&"\\"===e[--t];)++n;if(!(1&n))return!0}return!1}function N4e(e,t){return e.parent===t.parent?1:2}function D4e(e){var t=e.children;return t?t[0]:e.t}function R4e(e){var t=e.children;return t?t[t.length-1]:e.t}function M4e(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function P4e(e,t,n){return e.a.parent===t.parent?e.a:n}function F4e(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}function L4e(e,t,n,r,i){for(var o,a=e.children,s=-1,l=a.length,u=e.value&&(i-n)/e.value;++s<l;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}F4e.prototype=Object.create(J3e.prototype);var j4e=(1+Math.sqrt(5))/2;function B4e(e,t,n,r,i,o){for(var a,s,l,u,c,d,f,p,h,m,g,y=[],v=t.children,b=0,w=0,_=v.length,x=t.value;b<_;){l=i-n,u=o-r;do{c=v[w++].value}while(!c&&w<_);for(d=f=c,g=c*c*(m=Math.max(u/l,l/u)/(x*e)),h=Math.max(f/g,g/d);w<_;++w){if(c+=s=v[w].value,s<d&&(d=s),s>f&&(f=s),g=c*c*m,(p=Math.max(f/g,g/d))>h){c-=s;break}h=p}y.push(a={value:c,dice:l<u,children:v.slice(b,w)}),a.dice?x4e(a,n,r,i,x?r+=u*c/x:o):L4e(a,n,r,x?n+=l*c/x:i,o),x-=c,b=w}return y}const $4e=function e(t){function n(e,n,r,i,o){B4e(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(j4e);const z4e=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,l,u,c,d=-1,f=a.length,p=e.value;++d<f;){for(l=(s=a[d]).children,u=s.value=0,c=l.length;u<c;++u)s.value+=l[u].value;s.dice?x4e(s,n,r,i,p?r+=(o-r)*s.value/p:o):L4e(s,n,r,p?n+=(i-n)*s.value/p:i,o),p-=s.value}else e._squarify=a=B4e(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(j4e);function U4e(e,t,n){const r={};return e.each(e=>{const i=e.data;n(i)&&(r[t(i)]=e)}),e.lookup=r,e}function q4e(e){Fje.call(this,null,e)}q4e.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const H4e=e=>e.values;function V4e(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let l,u,c,d=-1;for(;++d<i;)l=o(u=t[d])+"",(c=a[l])?c.push(u):a[l]=[u];for(l in a)s[l]=n(a[l],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function W4e(e){Fje.call(this,null,e)}EPe(q4e,Fje,{transform(e,t){t.source||SMe("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(e=>{e.children&&nje(e.data)&&i.rem.push(e.data)}),this.value=o=Y3e({values:aPe(e.keys).reduce((e,t)=>(e.key(t),e),V4e()).entries(i.source)},H4e),n&&o.each(e=>{e.children&&(e=oje(e.data),i.add.push(e),i.source.push(e))}),U4e(o,rje,rje)),i.source.root=o,i}});const G4e=(e,t)=>e.parent===t.parent?1:2;EPe(W4e,Fje,{transform(e,t){t.source&&t.source.root||SMe(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(uje(e.sort,e=>e.data)),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?G4e:OMe);try{this.value=n(i)}catch(HOt){SMe(HOt)}return i.each(e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const Y4e=["x","y","r","depth","children"];function K4e(e){W4e.call(this,e)}K4e.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Y4e.length,default:Y4e}]},EPe(K4e,W4e,{layout:function(){var e=null,t=1,n=1,r=n4e;function i(i){const o=function(){let e=1;return()=>(e=(1664525*e+1013904223)%i4e)/i4e}();return i.x=t/2,i.y=n/2,e?i.eachBefore(v4e(e)).eachAfter(b4e(r,.5,o)).eachBefore(w4e(1)):i.eachBefore(v4e(y4e)).eachAfter(b4e(n4e,1,o)).eachAfter(b4e(r,i.r/Math.min(t,n),o)).eachBefore(w4e(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=e4e(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:r4e(+e),i):r},i},params:["radius","size","padding"],fields:Y4e});const Z4e=["x0","y0","x1","y1","depth","children"];function Q4e(e){W4e.call(this,e)}function X4e(e){Fje.call(this,null,e)}Q4e.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Z4e.length,default:Z4e}]},EPe(Q4e,W4e,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&x4e(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(_4e),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:Z4e}),X4e.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},EPe(X4e,Fje,{transform(e,t){t.source||SMe("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?U4e(A4e().id(e.key).parentId(e.parentKey)(i.source),e.key,NMe):U4e(A4e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const J4e={tidy:function(){var e=N4e,t=1,n=1,r=null;function i(i){var l=function(e){for(var t,n,r,i,o,a=new F4e(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new F4e(r[i],i)),n.parent=t;return(a.parent=new F4e(null,0)).children=[a],a}(i);if(l.eachAfter(o),l.parent.m=-l.z,l.eachBefore(a),r)i.eachBefore(s);else{var u=i,c=i,d=i;i.eachBefore(function(e){e.x<u.x&&(u=e),e.x>c.x&&(c=e),e.depth>d.depth&&(d=e)});var f=u===c?1:e(u,c)/2,p=f-u.x,h=t/(c.x+f+p),m=n/(d.depth||1);i.eachBefore(function(e){e.x=(e.x+p)*h,e.y=e.depth*m})}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,l=o.parent.children[0],u=o.m,c=a.m,d=s.m,f=l.m;s=R4e(s),o=D4e(o),s&&o;)l=D4e(l),(a=R4e(a)).a=t,(i=s.z+d-o.z-u+e(s._,o._))>0&&(M4e(P4e(s,t,r),t,i),u+=i,c+=i),d+=s.m,u+=o.m,f+=l.m,c+=a.m;s&&!R4e(a)&&(a.t=s,a.m+=d-c),o&&!D4e(l)&&(l.t=o,l.m+=u-f,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=H3e,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(t){var n=t.children;n?(t.x=function(e){return e.reduce(V3e,0)/e.length}(n),t.y=function(e){return 1+e.reduce(W3e,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)});var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),l=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),u=s.x-e(s,l)/2,c=l.x+e(l,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-u)/(c-u)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},e5e=["x","y","depth","children"];function t5e(e){W4e.call(this,e)}function n5e(e){Fje.call(this,[],e)}t5e.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:e5e.length,default:e5e}]},EPe(t5e,W4e,{layout(e){const t=e||"tidy";if(bPe(J4e,t))return J4e[t]();SMe("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:e5e}),n5e.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},EPe(n5e,Fje,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||SMe("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,e=>o[rje(e)]=1),r.each(e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[rje(t)]&&o[rje(n)]&&i.add.push(oje({source:n,target:t}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,e=>o[rje(e)]=1),n.forEach(e=>{(o[rje(e.source)]||o[rje(e.target)])&&i.mod.push(e)})),i}});const r5e={binary:function(e,t,n,r,i){var o,a,s=e.children,l=s.length,u=new Array(l+1);for(u[0]=a=o=0;o<l;++o)u[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,l){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=l)}var d=u[t],f=r/2+d,p=t+1,h=n-1;for(;p<h;){var m=p+h>>>1;u[m]<f?p=m+1:h=m}f-u[p-1]<u[p]-f&&t+1<p&&--p;var g=u[p]-d,y=r-g;if(a-i>l-o){var v=r?(i*y+a*g)/r:a;e(t,p,g,i,o,v,l),e(p,n,y,v,o,a,l)}else{var b=r?(o*y+l*g)/r:l;e(t,p,g,i,o,a,b),e(p,n,y,i,b,a,l)}}(0,l,e.value,t,n,r,i)},dice:x4e,slice:L4e,slicedice:function(e,t,n,r,i){(1&e.depth?L4e:x4e)(e,t,n,r,i)},squarify:$4e,resquarify:z4e},i5e=["x0","y0","x1","y1","depth","children"];function o5e(e){W4e.call(this,e)}o5e.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:i5e.length,default:i5e}]},EPe(o5e,W4e,{layout(){const e=function(){var e=$4e,t=!1,n=1,r=1,i=[0],o=n4e,a=n4e,s=n4e,l=n4e,u=n4e;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(d),i=[0],t&&e.eachBefore(_4e),e}function d(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,d=t.x1-n,f=t.y1-n;d<r&&(r=d=(r+d)/2),f<c&&(c=f=(c+f)/2),t.x0=r,t.y0=c,t.x1=d,t.y1=f,t.children&&(n=i[t.depth+1]=o(t)/2,r+=u(t)-n,c+=a(t)-n,(d-=s(t)-n)<r&&(r=d=(r+d)/2),(f-=l(t)-n)<c&&(c=f=(c+f)/2),e(t,r,c,d,f))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=t4e(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:r4e(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:r4e(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:r4e(+e),c):s},c.paddingBottom=function(e){return arguments.length?(l="function"==typeof e?e:r4e(+e),c):l},c.paddingLeft=function(e){return arguments.length?(u="function"==typeof e?e:r4e(+e),c):u},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{bPe(r5e,t)?e.tile(r5e[t]):SMe("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:i5e});const a5e=Object.freeze(Object.defineProperty({__proto__:null,nest:q4e,pack:K4e,partition:Q4e,stratify:X4e,tree:t5e,treelinks:n5e,treemap:o5e},Symbol.toStringTag,{value:"Module"})),s5e=4278190080;function l5e(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function u5e(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach(t=>{t.items.forEach(t=>u5e(e,t.items,n))}):yYe[r].draw(e,{items:n?t.map(c5e):t})}function c5e(e){const t=sje(e,{});return t.stroke&&0!==t.strokeOpacity||t.fill&&0!==t.fillOpacity?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const d5e=31,f5e=new Uint32Array(33),p5e=new Uint32Array(33);p5e[0]=0,f5e[0]=~p5e[0];for(let Set=1;Set<=32;++Set)p5e[Set]=p5e[Set-1]<<1|1,f5e[Set]=~p5e[Set];function h5e(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&d5e)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&d5e))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&d5e)))},getRange:(t,r,i,o)=>{let a,s,l,u,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,l=a>>>5,u=s>>>5,l===u){if(n[l]&f5e[a&d5e]&p5e[1+(s&d5e)])return!0}else{if(n[l]&f5e[a&d5e])return!0;if(n[u]&p5e[1+(s&d5e)])return!0;for(let e=l+1;e<u;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,l,u,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,l=a>>>5,u=s>>>5,l===u)r(l,f5e[a&d5e]&p5e[1+(s&d5e)]);else for(r(l,f5e[a&d5e]),r(u,p5e[1+(s&d5e)]),c=l+1;c<u;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,l,u,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,l=a>>>5,u=s>>>5,l===u)i(l,p5e[a&d5e]|f5e[1+(s&d5e)]);else for(i(l,p5e[a&d5e]),i(u,f5e[1+(s&d5e)]),c=l+1;c<u;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function m5e(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function g5e(e,t,n,r,i,o,a,s){const l=i*o/(2*r),u=e(t-l),c=e(t+l),d=e(n-(o/=2)),f=e(n+o);return a.outOfBounds(u,d,c,f)||a.getRange(u,d,c,f)||s&&s.getRange(u,d,c,f)}const y5e=[-1,-1,1,1],v5e=[-1,1,-1,1];const b5e=["right","center","left"],w5e=["bottom","middle","top"];function _5e(e,t,n,r,i,o,a,s,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&o||i).getRange(e,n,t,r))}const x5e={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},E5e={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=QGe.width(e.datum,e.datum.text);let l,u,c,d,f,p,h,m=0;for(let r=0;r<n;++r)l=t[r].x,c=t[r].y,u=void 0===t[r].x2?l:t[r].x2,d=void 0===t[r].y2?c:t[r].y2,f=(l+u)/2,p=(c+d)/2,h=Math.abs(u-l+d-c),h>=m&&(m=h,e.x=f,e.y=p);return f=s/2,p=a/2,l=e.x-f,u=e.x+f,c=e.y-p,d=e.y+p,e.align="center",l<0&&u<=i?e.align="left":0<=l&&i<u&&(e.align="right"),e.baseline="middle",c<0&&d<=o?e.baseline="top":0<=c&&o<d&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function l(t,n,r,l,u){const c=e.invert(t),d=e.invert(n);let f,p=r,h=o;if(!m5e(c,d,l,u,i,o)&&!g5e(e,c,d,u,l,p,a,s)&&!g5e(e,c,d,u,l,u,a,null)){for(;h-p>=1;)f=(p+h)/2,g5e(e,c,d,u,l,f,a,s)?h=f:p=f;if(p>r)return[c,d,p,!0]}}return function(t){const s=t.datum.datum.items[r].items,u=s.length,c=t.datum.fontSize,d=QGe.width(t.datum,t.datum.text);let f,p,h,m,g,y,v,b,w,_,x,E,S,k,T,C,A,I=n?c:0,O=!1,N=!1,D=0;for(let r=0;r<u;++r){for(f=s[r].x,h=s[r].y,p=void 0===s[r].x2?f:s[r].x2,m=void 0===s[r].y2?h:s[r].y2,f>p&&(A=f,f=p,p=A),h>m&&(A=h,h=m,m=A),w=e(f),x=e(p),_=~~((w+x)/2),E=e(h),k=e(m),S=~~((E+k)/2),v=_;v>=w;--v)for(b=S;b>=E;--b)C=l(v,b,I,d,c),C&&([t.x,t.y,I,O]=C);for(v=_;v<=x;++v)for(b=S;b<=k;++b)C=l(v,b,I,d,c),C&&([t.x,t.y,I,O]=C);O||n||(T=Math.abs(p-f+m-h),g=(f+p)/2,y=(h+m)/2,T>=D&&!m5e(g,y,d,c,i,o)&&!g5e(e,g,y,c,d,c,a,null)&&(D=T,t.x=g,t.y=y,N=!0))}return!(!O&&!N)&&(g=d/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(t){const u=t.datum.datum.items[r].items,c=u.length,d=t.datum.fontSize,f=QGe.width(t.datum,t.datum.text),p=[];let h,m,g,y,v,b,w,_,x,E,S,k,T=n?d:0,C=!1,A=!1,I=0;for(let r=0;r<c;++r){for(h=u[r].x,g=u[r].y,m=void 0===u[r].x2?h:u[r].x2,y=void 0===u[r].y2?g:u[r].y2,p.push([e((h+m)/2),e((g+y)/2)]);p.length;)if([w,_]=p.pop(),!(a.get(w,_)||s.get(w,_)||l.get(w,_))){l.set(w,_);for(let e=0;e<4;++e)v=w+y5e[e],b=_+v5e[e],l.outOfBounds(v,b,v,b)||p.push([v,b]);if(v=e.invert(w),b=e.invert(_),x=T,E=o,!m5e(v,b,f,d,i,o)&&!g5e(e,v,b,d,f,x,a,s)&&!g5e(e,v,b,d,f,d,a,null)){for(;E-x>=1;)S=(x+E)/2,g5e(e,v,b,d,f,S,a,s)?E=S:x=S;x>T&&(t.x=v,t.y=b,T=x,C=!0)}}C||n||(k=Math.abs(m-h+y-g),v=(h+m)/2,b=(g+y)/2,k>=I&&!m5e(v,b,f,d,i,o)&&!g5e(e,v,b,d,f,d,a,null)&&(I=k,t.x=v,t.y=b,A=!0))}return!(!C&&!A)&&(v=f/2,b=d/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function S5e(e,t,n,r,i,o,a,s,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=function(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}(r,d),p=function(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=x5e[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}(i,d),h=(w=e[0].datum)&&w.mark&&w.mark.marktype,m="group"===h&&e[0].datum.items[l].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(h,m,s,l),v=null===u||u===1/0,b=g&&"naive"===c;var w;let _=-1,x=-1;const E=e.map(e=>{const t=v?QGe.width(e,e.text):void 0;return _=Math.max(_,t),x=Math.max(x,e.fontSize),{datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e),textWidth:t}});u=null===u||u===1/0?Math.max(_,x)+Math.max(...r):u;const S=h5e(t[0],t[1],u);let k;if(!b){n&&E.sort((e,t)=>n(e.datum,t.datum));let t=!1;for(let e=0;e<p.length&&!t;++e)t=5===p[e]||f[e]<0;const r=(h&&a||g)&&e.map(e=>e.datum);k=o.length||r?function(e,t,n,r,i){const o=e.width,a=e.height,s=r||i,l=vUe(o,a).getContext("2d"),u=vUe(o,a).getContext("2d"),c=s&&vUe(o,a).getContext("2d");n.forEach(e=>u5e(l,e,!1)),u5e(u,t,!1),s&&u5e(c,t,!0);const d=l5e(l,o,a),f=l5e(u,o,a),p=s&&l5e(c,o,a),h=e.bitmap(),m=s&&e.bitmap();let g,y,v,b,w,_,x,E;for(y=0;y<a;++y)for(g=0;g<o;++g)w=y*o+g,_=d[w]&s5e,E=f[w]&s5e,x=s&&p[w]&s5e,(_||x||E)&&(v=e(g),b=e(y),i||!_&&!E||h.set(v,b),s&&(_||x)&&m.set(v,b));return[h,m]}(S,r||[],o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach(t=>n.set(e(t.boundary[0]),e(t.boundary[3]))),[n,void 0]}(S,a&&E)}const T=g?E5e[c](S,k,a,l):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=r.length;return function(t){const u=t.boundary,c=t.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>i||u[3]>o)return!1;let d,f,p,h,m,g,y,v,b,w,_,x,E,S,k,T=t.textWidth??0;for(let i=0;i<l;++i){if(d=(3&n[i])-1,f=(n[i]>>>2&3)-1,p=0===d&&0===f||r[i]<0,h=d&&f?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=u[1+d]+r[i]*d*h,_=u[4+f]+m*c*f/2+r[i]*f*h,v=_-c/2,b=_+c/2,x=e(g),S=e(v),k=e(b),!T){if(!_5e(x,x,S,k,a,s,0,0,0,0,0,p))continue;T=QGe.width(t.datum,t.datum.text)}if(w=g+m*T*d/2,g=w-T/2,y=w+T/2,x=e(g),E=e(y),_5e(x,E,S,k,a,s,0,0,0,0,0,p))return t.x=d?d*m<0?y:g:w,t.y=f?f*m<0?b:v:_,t.align=b5e[d*m+1],t.baseline=w5e[f*m+1],a.setRange(x,S,E,k),!0}return!1}}(S,k,p,f);return E.forEach(e=>e.opacity=+T(e)),E}const k5e=["x","y","opacity","align","baseline"],T5e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function C5e(e){Fje.call(this,null,e)}C5e.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:T5e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:k5e.length,default:k5e}]},EPe(C5e,Fje,{transform(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return lPe(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||SMe("Size parameter should be specified as a [width, height] array.");const r=e.as||k5e;return S5e(t.materialize(t.SOURCE).source||[],e.size,e.sort,aPe(null==e.offset?1:e.offset),aPe(e.anchor||T5e),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,void 0===e.padding?0:e.padding,e.method||"naive").forEach(e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline}),t.reflow(n).modifies(r)}});const A5e=Object.freeze(Object.defineProperty({__proto__:null,label:C5e},Symbol.toStringTag,{value:"Module"}));function I5e(e,t){var n,r,i,o,a,s,l=[],u=function(e){return e(o)};if(null==t)l.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(u)])||(n[a]=s=[],s.dims=a,l.push(s)),s.push(o);return l}function O5e(e){Fje.call(this,null,e)}O5e.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},EPe(O5e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=I5e(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(bMe),o=i.length,a=e.as||[bMe(e.x),bMe(e.y)],s=[];r.forEach(t=>{TBe(t,e.x,e.y,e.bandwidth||.3).forEach(e=>{const n={};for(let r=0;r<o;++r)n[i[r]]=t.dims[r];n[a[0]]=e[0],n[a[1]]=e[1],s.push(oje(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const N5e={constant:hBe,linear:bBe,log:wBe,exp:_Be,pow:xBe,quad:EBe,poly:SBe};function D5e(e){Fje.call(this,null,e)}D5e.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(N5e)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},EPe(D5e,Fje,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=I5e(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(bMe),o=e.method||"linear",a=null==e.order?3:e.order,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),l=e.as||[bMe(e.x),bMe(e.y)],u=N5e[o],c=[];let d=e.extent;bPe(N5e,o)||SMe("Invalid regression method: "+o),null!=d&&"log"===o&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),r.forEach(n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=u(n,e.x,e.y,a);if(e.params)return void c.push(oje({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const f=d||yPe(n,e.x),p=e=>{const t={};for(let r=0;r<i.length;++r)t[i[r]]=n.dims[r];t[l[0]]=e[0],t[l[1]]=e[1],c.push(oje(t))};"linear"===o||"constant"===o?f.forEach(e=>p([e,r.predict(e)])):OBe(r.predict,f,25,200).forEach(p)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const R5e=Object.freeze(Object.defineProperty({__proto__:null,loess:O5e,regression:D5e},Symbol.toStringTag,{value:"Module"})),M5e=134217729;function P5e(e,t,n,r,i){let o,a,s,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(o=u,u=t[++d]):(o=c,c=r[++f]);let p=0;if(d<e&&f<n)for(c>u==c>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=c+o,s=o-(a-c),c=r[++f]),o=a,0!==s&&(i[p++]=s);d<e&&f<n;)c>u==c>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f]),o=a,0!==s&&(i[p++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,0!==s&&(i[p++]=s);for(;f<n;)a=o+c,l=a-o,s=o-(a-l)+(c-l),c=r[++f],o=a,0!==s&&(i[p++]=s);return 0===o&&0!==p||(i[p++]=o),p}function F5e(e){return new Float64Array(e)}const L5e=F5e(4),j5e=F5e(8),B5e=F5e(12),$5e=F5e(16),z5e=F5e(4);function U5e(e,t,n,r,i,o){const a=(t-o)*(n-i),s=(e-i)*(r-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=33306690738754716e-32*u?l:-function(e,t,n,r,i,o,a){let s,l,u,c,d,f,p,h,m,g,y,v,b,w,_,x,E,S;const k=e-i,T=n-i,C=t-o,A=r-o;w=k*A,f=M5e*k,p=f-(f-k),h=k-p,f=M5e*A,m=f-(f-A),g=A-m,_=h*g-(w-p*m-h*m-p*g),x=C*T,f=M5e*C,p=f-(f-C),h=C-p,f=M5e*T,m=f-(f-T),g=T-m,E=h*g-(x-p*m-h*m-p*g),y=_-E,d=_-y,L5e[0]=_-(y+d)+(d-E),v=w+y,d=v-w,b=w-(v-d)+(y-d),y=b-x,d=b-y,L5e[1]=b-(y+d)+(d-x),S=v+y,d=S-v,L5e[2]=v-(S-d)+(y-d),L5e[3]=S;let I=function(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}(4,L5e),O=22204460492503146e-32*a;if(I>=O||-I>=O)return I;if(d=e-k,s=e-(k+d)+(d-i),d=n-T,u=n-(T+d)+(d-i),d=t-C,l=t-(C+d)+(d-o),d=r-A,c=r-(A+d)+(d-o),0===s&&0===l&&0===u&&0===c)return I;if(O=11093356479670487e-47*a+33306690738754706e-32*Math.abs(I),I+=k*c+A*s-(C*u+T*l),I>=O||-I>=O)return I;w=s*A,f=M5e*s,p=f-(f-s),h=s-p,f=M5e*A,m=f-(f-A),g=A-m,_=h*g-(w-p*m-h*m-p*g),x=l*T,f=M5e*l,p=f-(f-l),h=l-p,f=M5e*T,m=f-(f-T),g=T-m,E=h*g-(x-p*m-h*m-p*g),y=_-E,d=_-y,z5e[0]=_-(y+d)+(d-E),v=w+y,d=v-w,b=w-(v-d)+(y-d),y=b-x,d=b-y,z5e[1]=b-(y+d)+(d-x),S=v+y,d=S-v,z5e[2]=v-(S-d)+(y-d),z5e[3]=S;const N=P5e(4,L5e,4,z5e,j5e);w=k*c,f=M5e*k,p=f-(f-k),h=k-p,f=M5e*c,m=f-(f-c),g=c-m,_=h*g-(w-p*m-h*m-p*g),x=C*u,f=M5e*C,p=f-(f-C),h=C-p,f=M5e*u,m=f-(f-u),g=u-m,E=h*g-(x-p*m-h*m-p*g),y=_-E,d=_-y,z5e[0]=_-(y+d)+(d-E),v=w+y,d=v-w,b=w-(v-d)+(y-d),y=b-x,d=b-y,z5e[1]=b-(y+d)+(d-x),S=v+y,d=S-v,z5e[2]=v-(S-d)+(y-d),z5e[3]=S;const D=P5e(N,j5e,4,z5e,B5e);w=s*c,f=M5e*s,p=f-(f-s),h=s-p,f=M5e*c,m=f-(f-c),g=c-m,_=h*g-(w-p*m-h*m-p*g),x=l*u,f=M5e*l,p=f-(f-l),h=l-p,f=M5e*u,m=f-(f-u),g=u-m,E=h*g-(x-p*m-h*m-p*g),y=_-E,d=_-y,z5e[0]=_-(y+d)+(d-E),v=w+y,d=v-w,b=w-(v-d)+(y-d),y=b-x,d=b-y,z5e[1]=b-(y+d)+(d-x),S=v+y,d=S-v,z5e[2]=v-(S-d)+(y-d),z5e[3]=S;const R=P5e(D,B5e,4,z5e,$5e);return $5e[R-1]}(e,t,n,r,i,o,u)}const q5e=Math.pow(2,-52),H5e=new Uint32Array(512);class V5e{static from(e,t=Q5e,n=X5e){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new V5e(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,l=-1/0,u=-1/0;for(let S=0;S<o;S++){const t=e[2*S],n=e[2*S+1];t<a&&(a=t),n<s&&(s=n),t>l&&(l=t),n>u&&(u=n),this._ids[S]=S}const c=(a+l)/2,d=(s+u)/2;let f,p,h;for(let S=0,k=1/0;S<o;S++){const t=W5e(c,d,e[2*S],e[2*S+1]);t<k&&(f=S,k=t)}const m=e[2*f],g=e[2*f+1];for(let S=0,k=1/0;S<o;S++){if(S===f)continue;const t=W5e(m,g,e[2*S],e[2*S+1]);t<k&&t>0&&(p=S,k=t)}let y=e[2*p],v=e[2*p+1],b=1/0;for(let S=0;S<o;S++){if(S===f||S===p)continue;const t=Y5e(m,g,y,v,e[2*S],e[2*S+1]);t<b&&(h=S,b=t)}let w=e[2*h],_=e[2*h+1];if(b===1/0){for(let r=0;r<o;r++)this._dists[r]=e[2*r]-e[0]||e[2*r+1]-e[1];K5e(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e],o=this._dists[i];o>r&&(t[n++]=i,r=o)}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(U5e(m,g,y,v,w,_)<0){const e=p,t=y,n=v;p=h,y=w,v=_,h=e,w=t,_=n}const x=function(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,d=l*l+u*u,f=.5/(a*u-s*l),p=e+(u*c-s*d)*f;return{x:p,y:t+(a*d-l*c)*f}}(m,g,y,v,w,_);this._cx=x.x,this._cy=x.y;for(let S=0;S<o;S++)this._dists[S]=W5e(e[2*S],e[2*S+1],x.x,x.y);K5e(this._ids,this._dists,0,o-1),this._hullStart=f;let E=3;n[f]=t[h]=p,n[p]=t[f]=h,n[h]=t[p]=f,r[f]=0,r[p]=1,r[h]=2,i.fill(-1),i[this._hashKey(m,g)]=f,i[this._hashKey(y,v)]=p,i[this._hashKey(w,_)]=h,this.trianglesLen=0,this._addTriangle(f,p,h,-1,-1,-1);for(let S,k,T=0;T<this._ids.length;T++){const o=this._ids[T],a=e[2*o],s=e[2*o+1];if(T>0&&Math.abs(a-S)<=q5e&&Math.abs(s-k)<=q5e)continue;if(S=a,k=s,o===f||o===p||o===h)continue;let l=0;for(let e=0,t=this._hashKey(a,s);e<this._hashSize&&(l=i[(t+e)%this._hashSize],-1===l||l===n[l]);e++);l=t[l];let u,c=l;for(;u=n[c],U5e(a,s,e[2*c],e[2*c+1],e[2*u],e[2*u+1])>=0;)if(c=u,c===l){c=-1;break}if(-1===c)continue;let d=this._addTriangle(c,o,n[c],-1,-1,r[c]);r[o]=this._legalize(d+2),r[c]=d,E++;let m=n[c];for(;u=n[m],U5e(a,s,e[2*m],e[2*m+1],e[2*u],e[2*u+1])<0;)d=this._addTriangle(m,o,u,r[o],-1,r[m]),r[o]=this._legalize(d+2),n[m]=m,E--,m=u;if(c===l)for(;u=t[c],U5e(a,s,e[2*u],e[2*u+1],e[2*c],e[2*c+1])<0;)d=this._addTriangle(u,o,c,-1,r[c],r[u]),this._legalize(d+2),r[u]=d,n[c]=c,E--,c=u;this._hullStart=t[o]=c,n[c]=t[m]=o,n[o]=m,i[this._hashKey(a,s)]=o,i[this._hashKey(e[2*c],e[2*c+1])]=c}this.hull=new Uint32Array(E);for(let S=0,k=this._hullStart;S<E;S++)this.hull[S]=k,k=n[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=H5e[--i];continue}const l=a-a%3,u=s+(e+1)%3,c=l+(a+2)%3,d=t[o],f=t[e],p=t[u],h=t[c];if(G5e(r[2*d],r[2*d+1],r[2*f],r[2*f+1],r[2*p],r[2*p+1],r[2*h],r[2*h+1])){t[e]=h,t[a]=d;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=l+(a+1)%3;i<H5e.length&&(H5e[i++]=s)}else{if(0===i)break;e=H5e[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function W5e(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function G5e(e,t,n,r,i,o,a,s){const l=e-a,u=t-s,c=n-a,d=r-s,f=i-a,p=o-s,h=c*c+d*d,m=f*f+p*p;return l*(d*m-h*p)-u*(c*m-h*f)+(l*l+u*u)*(c*p-d*f)<0}function Y5e(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,c=a*a+s*s,d=l*l+u*u,f=.5/(a*u-s*l),p=(u*c-s*d)*f,h=(a*d-l*c)*f;return p*p+h*h}function K5e(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;Z5e(e,n+r>>1,i),t[e[n]]>t[e[r]]&&Z5e(e,n,r),t[e[i]]>t[e[r]]&&Z5e(e,i,r),t[e[n]]>t[e[i]]&&Z5e(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;Z5e(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(K5e(e,t,i,r),K5e(e,t,n,o-1)):(K5e(e,t,n,o-1),K5e(e,t,i,r))}}function Z5e(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Q5e(e){return e[0]}function X5e(e){return e[1]}const J5e=1e-6;class e6e{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>J5e||Math.abs(this._y1-i)>J5e)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class t6e{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}let n6e=class{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let i,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let h,m,g=0,y=0,v=n.length;g<v;g+=3,y+=2){const r=2*n[g],s=2*n[g+1],l=2*n[g+2],u=e[r],c=e[r+1],d=e[s],f=e[s+1],p=e[l],v=e[l+1],b=d-u,w=f-c,_=p-u,x=v-c,E=2*(b*x-w*_);if(Math.abs(E)<1e-9){if(void 0===i){i=o=0;for(const n of t)i+=e[2*n],o+=e[2*n+1];i/=t.length,o/=t.length}const n=1e9*Math.sign((i-u)*x-(o-c)*_);h=(u+p)/2-n*x,m=(c+v)/2+n*_}else{const e=1/E,t=b*b+w*w,n=_*_+x*x;h=u+(x*t-w*n)*e,m=c+(b*n-_*t)*e}a[y]=h,a[y+1]=m}let s,l,u,c=t[t.length-1],d=4*c,f=e[2*c],p=e[2*c+1];r.fill(0);for(let h=0;h<t.length;++h)c=t[h],s=d,l=f,u=p,d=4*c,f=e[2*c],p=e[2*c+1],r[s+2]=r[d]=u-p,r[s+3]=r[d+1]=f-l}render(e){const t=null==e?e=new e6e:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let u=0,c=n.length;u<c;++u){const t=n[u];if(t<u)continue;const r=2*Math.floor(u/3),i=2*Math.floor(t/3),a=o[r],s=o[r+1],l=o[i],c=o[i+1];this._renderSegment(a,s,l,c,e)}let s,l=i[i.length-1];for(let u=0;u<i.length;++u){s=l,l=i[u];const t=2*Math.floor(r[l]/3),n=o[t],c=o[t+1],d=4*s,f=this._project(n,c,a[d+2],a[d+3]);f&&this._renderSegment(n,c,f[0],f[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new e6e:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new e6e:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let o=2;o<i;o+=2)r[o]===r[o-2]&&r[o+1]===r[o-1]||t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new t6e;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]===e[o]&&t[r+1]===e[o+1]&&t[(r+2)%i]===e[(o+a-2)%a]&&t[(r+3)%i]===e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r,i,o,a,s=null,l=t[n-2],u=t[n-1],c=this._regioncode(l,u),d=0;for(let f=0;f<n;f+=2)if(r=l,i=u,l=t[f],u=t[f+1],o=c,c=this._regioncode(l,u),0===o&&0===c)a=d,d=0,s?s.push(l,u):s=[l,u];else{let t,n,f,p,h;if(0===o){if(null===(t=this._clipSegment(r,i,l,u,o,c)))continue;[n,f,p,h]=t}else{if(null===(t=this._clipSegment(l,u,r,i,c,o)))continue;[p,h,n,f]=t,a=d,d=this._edgecode(n,f),a&&d&&this._edge(e,a,d,s,s.length),s?s.push(n,f):s=[n,f]}a=d,d=this._edgecode(p,h),a&&d&&this._edge(e,a,d,s,s.length),s?s.push(p,h):s=[p,h]}if(s)a=d,d=this._edgecode(s[0],s[1]),a&&d&&this._edge(e,a,d,s,s.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(e,t,n,r,i,o){const a=i<o;for(a&&([e,t,n,r,i,o]=[n,r,e,t,o,i]);;){if(0===i&&0===o)return a?[n,r,e,t]:[e,t,n,r];if(i&o)return null;let s,l,u=i||o;8&u?(s=e+(n-e)*(this.ymax-t)/(r-t),l=this.ymax):4&u?(s=e+(n-e)*(this.ymin-t)/(r-t),l=this.ymin):2&u?(l=t+(r-t)*(this.xmax-e)/(n-e),s=this.xmax):(l=t+(r-t)*(this.xmin-e)/(n-e),s=this.xmin),i?(e=s,t=l,i=this._regioncode(e,t)):(n=s,r=l,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let l,u=0,c=s.length,d=this._edgecode(s[c-2],s[c-1]);u<c;u+=2)l=d,d=this._edgecode(s[u],s[u+1]),l&&d&&(u=this._edge(e,l,d,s,u),c=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}};const r6e=2*Math.PI,i6e=Math.pow;function o6e(e){return e[0]}function a6e(e){return e[1]}function s6e(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class l6e{static from(e,t=o6e,n=a6e,r){return new l6e("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new V5e(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const e=2*t[r],i=2*t[r+1],o=2*t[r+2];if((n[o]-n[e])*(n[i+1]-n[e+1])-(n[i]-n[e])*(n[o+1]-n[e+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},(e,t)=>t).sort((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]);const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let o=0,a=t.length/2;o<a;++o){const e=s6e(t[2*o],t[2*o+1],i);t[2*o]=e[0],t[2*o+1]=e[1]}this._delaunator=new V5e(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let s=0,l=n.length;s<l;++s){const e=i[s%3==2?s-2:s+1];-1!==n[s]&&-1!==o[e]||(o[e]=s)}for(let s=0,l=r.length;s<l;++s)a[r[s]]=s;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,2===r.length&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new n6e(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let l=s,u=-1;do{if(yield u=o[l],l=l%3==2?l-2:l+1,o[l]!==e)return;if(l=i[l],-1===l){const t=n[(r[e]+1)%n.length];return void(t!==u&&(yield t))}}while(l!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:l}=this;if(-1===r[e]||!l.length)return(e+1)%(l.length>>1);let u=e,c=i6e(t-l[2*e],2)+i6e(n-l[2*e+1],2);const d=r[e];let f=d;do{let r=s[f];const d=i6e(t-l[2*r],2)+i6e(n-l[2*r+1],2);if(d<c&&(c=d,u=r),f=f%3==2?f-2:f+1,s[f]!==e)break;if(f=a[f],-1===f){if(f=i[(o[e]+1)%i.length],f!==r&&i6e(t-l[2*f],2)+i6e(n-l[2*f+1],2)<c)return f;break}}while(f!==d);return u}render(e){const t=null==e?e=new e6e:void 0,{points:n,halfedges:r,triangles:i}=this;for(let o=0,a=r.length;o<a;++o){const t=r[o];if(t<o)continue;const a=2*i[o],s=2*i[t];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){void 0!==t||e&&"function"==typeof e.moveTo||(t=e,e=null),t=null==t?2:+t;const n=null==e?e=new e6e:void 0,{points:r}=this;for(let i=0,o=r.length;i<o;i+=2){const n=r[i],o=r[i+1];e.moveTo(n+t,o),e.arc(n,o,t,0,r6e)}return n&&n.value()}renderHull(e){const t=null==e?e=new e6e:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let a=1;a<o;++a){const t=2*n[a];e.lineTo(r[t],r[t+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new t6e;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new e6e:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new t6e;return this.renderTriangle(e,t),t.value()}}function u6e(e){Fje.call(this,null,e)}u6e.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const c6e=[-1e5,-1e5,1e5,1e5];function d6e(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function f6e(e){return 2===e.length&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}EPe(u6e,Fje,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:c6e;const o=this.value=l6e.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const e=o.cellPolygon(a);r[a][n]=e&&!f6e(e)?d6e(e):null}return t.reflow(e.modified()).modifies(n)}});const p6e=Object.freeze(Object.defineProperty({__proto__:null,voronoi:u6e},Symbol.toStringTag,{value:"Module"}));var h6e=Math.PI/180,m6e=2048;function g6e(){var e,t,n,r,i,o,a,s=[256,256],l=_6e,u=[],c=Math.random,d={};function f(e,t,n){for(var r,i,o,a=t.x,u=t.y,d=Math.hypot(s[0],s[1]),f=l(s),p=c()<.5?1:-1,h=-p;(r=f(h+=p))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=d));)if(t.x=a+i,t.y=u+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1])&&(!n||!v6e(t,e,s[0]))&&(!n||w6e(t,n))){for(var m,g=t.sprite,y=t.width>>5,v=s[0]>>5,b=t.x-(y<<4),w=127&b,_=32-w,x=t.y1-t.y0,E=(t.y+t.y0)*v+(b>>5),S=0;S<x;S++){m=0;for(var k=0;k<=y;k++)e[E+k]|=m<<_|(k<y?(m=g[S*y+k])>>>w:0);E+=v}return t.sprite=null,!0}return!1}return d.layout=function(){for(var l=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=m6e/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(vUe()),d=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),p=null,h=u.length,m=-1,g=[],y=u.map(s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s})).sort((e,t)=>t.size-e.size);++m<h;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,y6e(l,v,y,m),v.hasText&&f(d,v,p)&&(g.push(v),p?b6e(p,v):p=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},d.words=function(e){return arguments.length?(u=e,d):u},d.size=function(e){return arguments.length?(s=[+e[0],+e[1]],d):s},d.font=function(e){return arguments.length?(t=x6e(e),d):t},d.fontStyle=function(e){return arguments.length?(r=x6e(e),d):r},d.fontWeight=function(e){return arguments.length?(i=x6e(e),d):i},d.rotate=function(e){return arguments.length?(o=x6e(e),d):o},d.text=function(t){return arguments.length?(e=x6e(t),d):e},d.spiral=function(e){return arguments.length?(l=E6e[e]||e,d):l},d.fontSize=function(e){return arguments.length?(n=x6e(e),d):n},d.padding=function(e){return arguments.length?(a=x6e(e),d):a},d.random=function(e){return arguments.length?(c=e,d):c},d}function y6e(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,m6e/o);var a,s,l,u,c,d=0,f=0,p=0,h=n.length;for(--r;++r<h;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,l=t.size<<1,t.rotate){var m=Math.sin(t.rotate*h6e),g=Math.cos(t.rotate*h6e),y=a*g,v=a*m,b=l*g,w=l*m;a=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,l=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(l>p&&(p=l),d+a>=2048&&(d=0,f+=p,p=0),f+l>=m6e)break;i.translate((d+(a>>1))/o,(f+(l>>1))/o),t.rotate&&i.rotate(t.rotate*h6e),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=l,t.xoff=d,t.yoff=f,t.x1=a>>1,t.y1=l>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,d+=a}for(var _=i.getImageData(0,0,2048/o,m6e/o).data,x=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,l=t.y1-t.y0,u=0;u<l*s;u++)x[u]=0;if(null==(d=t.xoff))return;f=t.yoff;var E=0,S=-1;for(c=0;c<l;c++){for(u=0;u<a;u++){var k=s*c+(u>>5),T=_[2048*(f+c)+(d+u)<<2]?1<<31-u%32:0;x[k]|=T,E|=T}E?S=c:(t.y0++,l--,c--,f++)}t.y1=t.y0+S,t.sprite=x.slice(0,(t.y1-t.y0)*s)}}}function v6e(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,l=32-s,u=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),d=0;d<u;d++){r=0;for(var f=0;f<=o;f++)if((r<<l|(f<o?(r=i[d*o+f])>>>s:0))&t[c+f])return!0;c+=n}return!1}function b6e(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function w6e(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function _6e(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function x6e(e){return"function"==typeof e?e:function(){return e}}var E6e={archimedean:_6e,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const S6e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],k6e=["text","font","rotate","fontSize","fontStyle","fontWeight"];function T6e(e){Fje.call(this,g6e(),e)}T6e.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:S6e}]},EPe(T6e,Fje,{transform(e,t){!e.size||e.size[0]&&e.size[1]||SMe("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||k6e.some(function(n){const r=e[n];return lPe(r)&&t.modified(r.fields)})))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||S6e;let a,s=e.fontSize||14;if(lPe(s)?a=e.fontSizeRange:s=hPe(s),a){const e=s,t=PHe("sqrt")().domain(yPe(r,e)).range(a);s=n=>t(e(n))}r.forEach(e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0});const l=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Vje).layout(),u=i.size(),c=u[0]>>1,d=u[1]>>1,f=l.length;for(let p,h,m=0;m<f;++m)p=l[m],h=p.datum,h[o[0]]=p.x+c,h[o[1]]=p.y+d,h[o[2]]=p.font,h[o[3]]=p.size,h[o[4]]=p.style,h[o[5]]=p.weight,h[o[6]]=p.rotate;return t.reflow(n).modifies(o)}});const C6e=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:T6e},Symbol.toStringTag,{value:"Module"})),A6e=e=>new Uint8Array(e),I6e=e=>new Uint16Array(e),O6e=e=>new Uint32Array(e);function N6e(e,t,n){const r=(t<257?A6e:t<65537?I6e:O6e)(e);return n&&r.set(n),r}function D6e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],l=o.length;let u;for(u=0;u<a;++u)t[o[u]]|=r;for(u=s;u<l;++u)t[o[u]]|=r;return n}}}function R6e(){let e=O6e(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,l=O6e(s);let u,c,d,f=Array(s);for(d=0;d<s;++d)f[d]=r(i[d]),l[d]=d;if(f=function(e,t){return e.sort.call(t,(t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0}),function(e,t){return Array.from(t,t=>e[t])}(e,t)}(f,l),a)u=t,c=e,t=Array(a+s),e=O6e(a+s),function(e,t,n,r,i,o,a,s,l){let u,c=0,d=0;for(u=0;c<r&&d<a;++u)t[c]<i[d]?(s[u]=t[c],l[u]=n[c++]):(s[u]=i[d],l[u]=o[d++]+e);for(;c<r;++c,++u)s[u]=t[c],l[u]=n[c];for(;d<a;++d,++u)s[u]=i[d],l[u]=o[d]+e}(o,u,c,a,f,l,s,t,e);else{if(o>0)for(d=0;d<s;++d)l[d]+=o;t=f,e=l}return n=a+s,{index:l,value:f}},remove:function(r,i){const o=n;let a,s,l;for(s=0;!i[e[s]]&&s<o;++s);for(l=s;s<o;++s)i[a=e[s]]||(e[l]=a,t[l]=t[s],++l);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[Y3(r,e[0],0,i),G3(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function M6e(e){Fje.call(this,function(){let e=8,t=[],n=O6e(0),r=N6e(0,e),i=N6e(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove(e,n){const o=t.length,a=Array(o-e),s=t;let l,u,c;for(u=0;!n[u]&&u<o;++u)a[u]=t[u],s[u]=u;for(c=u;u<o;++u)l=t[u],n[u]?s[u]=-1:(s[u]=c,r[c]=r[u],i[c]=i[u],a[c]=l,l._index=c++),r[u]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set(e,t){r[e]|=t},clear(e,t){r[e]&=~t},resize(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=N6e(t,e,r),i=N6e(t,e))}}}(),e),this._indices=null,this._dims=null}function P6e(e){Fje.call(this,null,e)}M6e.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},EPe(M6e,Fje,{transform(e,t){return this._dims?e.modified("fields")||e.fields.some(e=>t.modified(e.fields))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,l,u=0;for(;u<a;++u)s=n[u].fname,l=i[s]||(i[s]=R6e()),o.push(D6e(l,u,r[u]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),c=s.all(),d=n.rem=n.add,f=n.mod,p=i.length,h={};let m,g,y,v,b,w,_,x,E;if(u.set(l),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(w={},v=t.mod,_=0,x=v.length;_<x;++_)w[v[_]._index]=1;for(_=0;_<p;++_)E=r[_],(!a[_]||e.modified("fields",_)||t.modified(E.fields))&&(y=E.fname,(m=h[y])||(o[y]=g=R6e(),h[y]=m=g.insert(E,t.source,0)),a[_]=D6e(g,_,i[_]).onAdd(m,l));for(_=0,x=s.data().length;_<x;++_)b[_]||(u[_]!==l[_]?d.push(_):w[_]&&l[_]!==c&&f.push(_));return s.mask=(1<<p)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,c=i.size()+r.length,d=o.length;let f,p,h,m=i.size();i.resize(c,d),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(f=0;f<d;++f)p=s[f].fname,h=l[p]||(l[p]=a[p].insert(s[f],r,m)),o[f].onAdd(h,g);for(;m<c;++m)y[m]=v,g[m]!==v&&u.push(m)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),l={},u=n.rem,c=t.rem;let d,f,p,h;for(d=0,f=c.length;d<f;++d)p=c[d]._index,l[p]=1,a[p]=h=o[p],o[p]=s,h!==s&&u.push(p);for(p in r)r[p].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,l,u=0;for(n.filters=0,l=0;l<a;++l)e.modified("query",l)&&(s=l,++u);if(1===u)u=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(l=0,u=0;l<a;++l)e.modified("query",l)&&(u|=r[l].one,this.incrementAll(r[l],i[l],o,n.add),n.rem=n.add);return u},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],p=u[0],h=u[1],m=e.one;let g,y,v;if(d<p)for(g=d,y=Math.min(p,f);g<y;++g)v=l[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d>p)for(g=p,y=Math.min(d,h);g<y;++g)v=l[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(f>h)for(g=Math.max(d,h),y=f;g<y;++g)v=l[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f<h)for(g=Math.max(p,f),y=h;g<y;++g)v=l[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),l=s[0],u=s[1],c=a[0],d=a[1],f=e.one;let p,h,m;if(l<c)for(p=l,h=Math.min(c,u);p<h;++p)m=o[p],i[m]^=f,n.push(m);else if(l>c)for(p=c,h=Math.min(l,d);p<h;++p)m=o[p],i[m]^=f,r.push(m);if(u>d)for(p=Math.max(l,d),h=u;p<h;++p)m=o[p],i[m]^=f,n.push(m);else if(u<d)for(p=Math.max(c,u),h=d;p<h;++p)m=o[p],i[m]^=f,r.push(m);e.range=t.slice()}}),P6e.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},EPe(P6e,Fje,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0===(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),l=r.prev(),u=e=>s[e]&n?null:a[e];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,e=>{const t=s[e]&n;return!t&&t^l[e]&n?a[e]:null}),o.filter(o.REM,e=>{const t=s[e]&n;return t&&!(t^t^l[e]&n)?a[e]:null})):(o.filter(o.ADD,u),o.filter(o.REM,e=>(s[e]&n)===i?a[e]:null)),o.filter(o.SOURCE,e=>u(e._index))}});const F6e=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:M6e,resolvefilter:P6e},Symbol.toStringTag,{value:"Module"})),L6e="Literal",j6e="Property",B6e="ArrayExpression",$6e="BinaryExpression",z6e="CallExpression",U6e="ConditionalExpression",q6e="LogicalExpression",H6e="MemberExpression",V6e="ObjectExpression",W6e="UnaryExpression";function G6e(e){this.type=e}var Y6e,K6e,Z6e,Q6e,X6e;G6e.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case B6e:return e.elements;case $6e:case q6e:return[e.left,e.right];case z6e:return[e.callee].concat(e.arguments);case U6e:return[e.test,e.consequent,e.alternate];case H6e:return[e.object,e.property];case V6e:return e.properties;case j6e:return[e.key,e.value];case W6e:return[e.argument];default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(Y6e={})[1]="Boolean",Y6e[2]="<end>",Y6e[3]="Identifier",Y6e[4]="Keyword",Y6e[5]="Null",Y6e[6]="Numeric",Y6e[7]="Punctuator",Y6e[8]="String",Y6e[9]="RegularExpression";var J6e="Identifier",e8e="Unexpected token %0",t8e="Invalid regular expression",n8e="Invalid regular expression: missing /",r8e="Octal literals are not allowed in strict mode.",i8e="ILLEGAL",o8e="Disabled.",a8e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),s8e=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function l8e(e,t){if(!e)throw new Error("ASSERT: "+t)}function u8e(e){return e>=48&&e<=57}function c8e(e){return"0123456789abcdefABCDEF".includes(e)}function d8e(e){return"01234567".includes(e)}function f8e(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function p8e(e){return 10===e||13===e||8232===e||8233===e}function h8e(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&a8e.test(String.fromCharCode(e))}function m8e(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&s8e.test(String.fromCharCode(e))}const g8e={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function y8e(){for(;Z6e<Q6e;){const e=K6e.charCodeAt(Z6e);if(!f8e(e)&&!p8e(e))break;++Z6e}}function v8e(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Z6e<Q6e&&c8e(K6e[Z6e])?(r=K6e[Z6e++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):M8e({},e8e,i8e);return String.fromCharCode(i)}function b8e(){var e,t,n,r;for(t=0,"}"===(e=K6e[Z6e])&&M8e({},e8e,i8e);Z6e<Q6e&&c8e(e=K6e[Z6e++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&M8e({},e8e,i8e),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function w8e(){var e,t;for(e=K6e.charCodeAt(Z6e++),t=String.fromCharCode(e),92===e&&(117!==K6e.charCodeAt(Z6e)&&M8e({},e8e,i8e),++Z6e,(e=v8e("u"))&&"\\"!==e&&h8e(e.charCodeAt(0))||M8e({},e8e,i8e),t=e);Z6e<Q6e&&m8e(e=K6e.charCodeAt(Z6e));)++Z6e,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==K6e.charCodeAt(Z6e)&&M8e({},e8e,i8e),++Z6e,(e=v8e("u"))&&"\\"!==e&&m8e(e.charCodeAt(0))||M8e({},e8e,i8e),t+=e);return t}function _8e(){var e,t;return e=Z6e,t=92===K6e.charCodeAt(Z6e)?w8e():function(){var e,t;for(e=Z6e++;Z6e<Q6e;){if(92===(t=K6e.charCodeAt(Z6e)))return Z6e=e,w8e();if(!m8e(t))break;++Z6e}return K6e.slice(e,Z6e)}(),{type:1===t.length?3:g8e.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:Z6e}}function x8e(){var e,t,n,r,i=Z6e,o=K6e.charCodeAt(Z6e),a=K6e[Z6e];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Z6e,{type:7,value:String.fromCharCode(o),start:i,end:Z6e};default:if(61===(e=K6e.charCodeAt(Z6e+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Z6e+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:Z6e};case 33:case 61:return Z6e+=2,61===K6e.charCodeAt(Z6e)&&++Z6e,{type:7,value:K6e.slice(i,Z6e),start:i,end:Z6e}}}return">>>="===(r=K6e.substr(Z6e,4))?{type:7,value:r,start:i,end:Z6e+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:Z6e+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".includes(a)||"=>"===t?{type:7,value:t,start:i,end:Z6e+=2}:("//"===t&&M8e({},e8e,i8e),"<>=!+-*%&|^/".includes(a)?{type:7,value:a,start:i,end:++Z6e}:void M8e({},e8e,i8e))}function E8e(){var e,t,n;if(l8e(u8e((n=K6e[Z6e]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Z6e,e="","."!==n){if(e=K6e[Z6e++],n=K6e[Z6e],"0"===e){if("x"===n||"X"===n)return++Z6e,function(e){let t="";for(;Z6e<Q6e&&c8e(K6e[Z6e]);)t+=K6e[Z6e++];return 0===t.length&&M8e({},e8e,i8e),h8e(K6e.charCodeAt(Z6e))&&M8e({},e8e,i8e),{type:6,value:parseInt("0x"+t,16),start:e,end:Z6e}}(t);if(d8e(n))return function(e){let t="0"+K6e[Z6e++];for(;Z6e<Q6e&&d8e(K6e[Z6e]);)t+=K6e[Z6e++];return(h8e(K6e.charCodeAt(Z6e))||u8e(K6e.charCodeAt(Z6e)))&&M8e({},e8e,i8e),{type:6,value:parseInt(t,8),octal:!0,start:e,end:Z6e}}(t);n&&u8e(n.charCodeAt(0))&&M8e({},e8e,i8e)}for(;u8e(K6e.charCodeAt(Z6e));)e+=K6e[Z6e++];n=K6e[Z6e]}if("."===n){for(e+=K6e[Z6e++];u8e(K6e.charCodeAt(Z6e));)e+=K6e[Z6e++];n=K6e[Z6e]}if("e"===n||"E"===n)if(e+=K6e[Z6e++],"+"!==(n=K6e[Z6e])&&"-"!==n||(e+=K6e[Z6e++]),u8e(K6e.charCodeAt(Z6e)))for(;u8e(K6e.charCodeAt(Z6e));)e+=K6e[Z6e++];else M8e({},e8e,i8e);return h8e(K6e.charCodeAt(Z6e))&&M8e({},e8e,i8e),{type:6,value:parseFloat(e),start:t,end:Z6e}}function S8e(){var e,t,n,r;return X6e=null,y8e(),e=Z6e,t=function(){var e,t,n,r;for(l8e("/"===(e=K6e[Z6e]),"Regular expression literal must start with a slash"),t=K6e[Z6e++],n=!1,r=!1;Z6e<Q6e;)if(t+=e=K6e[Z6e++],"\\"===e)p8e((e=K6e[Z6e++]).charCodeAt(0))&&M8e({},n8e),t+=e;else if(p8e(e.charCodeAt(0)))M8e({},n8e);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||M8e({},n8e),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";Z6e<Q6e&&m8e((e=K6e[Z6e]).charCodeAt(0));)++Z6e,"\\"===e&&Z6e<Q6e?M8e({},e8e,i8e):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&M8e({},t8e,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(e,t)=>{if(parseInt(t,16)<=1114111)return"x";M8e({},t8e)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(F0){M8e({},t8e)}try{return new RegExp(e,t)}catch(r){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Z6e}}function k8e(){if(y8e(),Z6e>=Q6e)return{type:2,start:Z6e,end:Z6e};const e=K6e.charCodeAt(Z6e);return h8e(e)?_8e():40===e||41===e||59===e?x8e():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(l8e("'"===(e=K6e[Z6e])||'"'===e,"String literal must starts with a quote"),t=Z6e,++Z6e;Z6e<Q6e;){if((n=K6e[Z6e++])===e){e="";break}if("\\"===n)if((n=K6e[Z6e++])&&p8e(n.charCodeAt(0)))"\r"===n&&"\n"===K6e[Z6e]&&++Z6e;else switch(n){case"u":case"x":"{"===K6e[Z6e]?(++Z6e,i+=b8e()):i+=v8e(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:d8e(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),Z6e<Q6e&&d8e(K6e[Z6e])&&(o=!0,r=8*r+"01234567".indexOf(K6e[Z6e++]),"0123".includes(n)&&Z6e<Q6e&&d8e(K6e[Z6e])&&(r=8*r+"01234567".indexOf(K6e[Z6e++]))),i+=String.fromCharCode(r)):i+=n}else{if(p8e(n.charCodeAt(0)))break;i+=n}}return""!==e&&M8e({},e8e,i8e),{type:8,value:i,octal:o,start:t,end:Z6e}}():46===e?u8e(K6e.charCodeAt(Z6e+1))?E8e():x8e():u8e(e)?E8e():x8e()}function T8e(){const e=X6e;return Z6e=e.end,X6e=k8e(),Z6e=e.end,e}function C8e(){const e=Z6e;X6e=k8e(),Z6e=e}function A8e(e,t,n){const r=new G6e("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function I8e(e,t){const n=new G6e("CallExpression");return n.callee=e,n.arguments=t,n}function O8e(e){const t=new G6e(J6e);return t.name=e,t}function N8e(e){const t=new G6e("Literal");return t.value=e.value,t.raw=K6e.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function D8e(e,t,n){const r=new G6e("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function R8e(e,t,n){const r=new G6e("Property");return r.key=t,r.value=n,r.kind=e,r}function M8e(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(e,t)=>(l8e(t<r.length,"Message reference must be in range"),r[t]));throw(n=new Error(i)).index=Z6e,n.description=i,n}function P8e(e){2===e.type&&M8e(e,"Unexpected end of input"),6===e.type&&M8e(e,"Unexpected number"),8===e.type&&M8e(e,"Unexpected string"),3===e.type&&M8e(e,"Unexpected identifier"),4===e.type&&M8e(e,"Unexpected reserved word"),M8e(e,e8e,e.value)}function F8e(e){const t=T8e();7===t.type&&t.value===e||P8e(t)}function L8e(e){return 7===X6e.type&&X6e.value===e}function j8e(e){return 4===X6e.type&&X6e.value===e}function B8e(){const e=[];for(Z6e=X6e.start,F8e("[");!L8e("]");)L8e(",")?(T8e(),e.push(null)):(e.push(Q8e()),L8e("]")||F8e(","));return T8e(),function(e){const t=new G6e("ArrayExpression");return t.elements=e,t}(e)}function $8e(){Z6e=X6e.start;const e=T8e();return 8===e.type||6===e.type?(e.octal&&M8e(e,r8e),N8e(e)):O8e(e.value)}function z8e(){var e,t,n;return Z6e=X6e.start,3===(e=X6e).type?(n=$8e(),F8e(":"),R8e("init",n,Q8e())):2!==e.type&&7!==e.type?(t=$8e(),F8e(":"),R8e("init",t,Q8e())):void P8e(e)}function U8e(){var e,t,n=[],r={},i=String;for(Z6e=X6e.start,F8e("{");!L8e("}");)t="$"+((e=z8e()).key.type===J6e?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?M8e({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),L8e("}")||F8e(",");return F8e("}"),function(e){const t=new G6e("ObjectExpression");return t.properties=e,t}(n)}const q8e={if:1};function H8e(){var e,t,n;if(L8e("("))return function(){F8e("(");const e=X8e();return F8e(")"),e}();if(L8e("["))return B8e();if(L8e("{"))return U8e();if(e=X6e.type,Z6e=X6e.start,3===e||q8e[X6e.value])n=O8e(T8e().value);else if(8===e||6===e)X6e.octal&&M8e(X6e,r8e),n=N8e(T8e());else{if(4===e)throw new Error(o8e);1===e?((t=T8e()).value="true"===t.value,n=N8e(t)):5===e?((t=T8e()).value=null,n=N8e(t)):L8e("/")||L8e("/=")?(n=N8e(S8e()),C8e()):P8e(T8e())}return n}function V8e(){const e=[];if(F8e("("),!L8e(")"))for(;Z6e<Q6e&&(e.push(Q8e()),!L8e(")"));)F8e(",");return F8e(")"),e}function W8e(){return F8e("."),function(){Z6e=X6e.start;const e=T8e();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||P8e(e),O8e(e.value)}()}function G8e(){F8e("[");const e=X8e();return F8e("]"),e}function Y8e(){const e=function(){var e;for(e=H8e();;)if(L8e("."))e=D8e(".",e,W8e());else if(L8e("("))e=I8e(e,V8e());else{if(!L8e("["))break;e=D8e("[",e,G8e())}return e}();if(7===X6e.type&&(L8e("++")||L8e("--")))throw new Error(o8e);return e}function K8e(){var e,t;if(7!==X6e.type&&4!==X6e.type)t=Y8e();else{if(L8e("++")||L8e("--"))throw new Error(o8e);if(L8e("+")||L8e("-")||L8e("~")||L8e("!"))e=T8e(),t=K8e(),t=function(e,t){const n=new G6e("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(j8e("delete")||j8e("void")||j8e("typeof"))throw new Error(o8e);t=Y8e()}}return t}function Z8e(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function Q8e(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,l,u;if(e=X6e,l=K8e(),0===(i=Z8e(r=X6e)))return l;for(r.prec=i,T8e(),t=[e,X6e],o=[l,r,a=K8e()];(i=Z8e(X6e))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=A8e(s,l,a),o.push(n);(r=T8e()).prec=i,o.push(r),t.push(X6e),n=K8e(),o.push(n)}for(n=o[u=o.length-1],t.pop();u>1;)t.pop(),n=A8e(o[u-1].value,o[u-2],n),u-=2;return n}(),L8e("?")&&(T8e(),t=Q8e(),F8e(":"),e=function(e,t,n){const r=new G6e("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,Q8e())),e}function X8e(){const e=Q8e();if(L8e(","))throw new Error(o8e);return e}function J8e(e){Z6e=0,Q6e=(K6e=e).length,X6e=null,C8e();const t=X8e();if(2!==X6e.type)throw new Error("Unexpect token after expression.");return t}var e9e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function t9e(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&SMe("Missing arguments to clamp function."),t.length>3&&SMe("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),btoa:"btoa",atob:"atob",regexp:i,test:t("test",i),if:function(t){t.length<3&&SMe("Missing arguments to if function."),t.length>3&&SMe("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function n9e(e){const t=(e=e||{}).allowed?qPe(e.allowed):{},n=e.forbidden?qPe(e.forbidden):{},r=e.constants||e9e,i=(e.functions||t9e)(d),o=e.globalvar,a=e.fieldvar,s=lPe(o)?o:e=>`${o}["${e}"]`;let l={},u={},c=0;function d(e){if(OPe(e))return e;const t=f[e.type];return null==t&&SMe("Unsupported type: "+e.type),t(e)}const f={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:bPe(n,i)?SMe("Illegal identifier: "+i):bPe(r,i)?r[i]:bPe(t,i)?i:(l[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=d(e.object);t&&(c+=1);const r=d(e.property);return n===a&&(u[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&SMe("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=bPe(i,t)&&i[t];return r||SMe("Unrecognized function: "+t),lPe(r)?r(n):r+"("+n.map(d).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(d).join(",")+"]",BinaryExpression:e=>"("+d(e.left)+" "+e.operator+" "+d(e.right)+")",UnaryExpression:e=>"("+e.operator+d(e.argument)+")",ConditionalExpression:e=>"("+d(e.test)+"?"+d(e.consequent)+":"+d(e.alternate)+")",LogicalExpression:e=>"("+d(e.left)+e.operator+d(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(d).join(",")+"}",Property:e=>{c+=1;const t=d(e.key);return c-=1,t+":"+d(e.value)}};function p(e){const t={code:d(e),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},t}return p.functions=i,p.constants=r,p}const r9e=Symbol("vega_selection_getter");function i9e(e){return e.getter&&e.getter[r9e]||(e.getter=TMe(e.field),e.getter[r9e]=!0),e.getter}const o9e="intersect",a9e="union",s9e="or",l9e="and",u9e="_vgsid_",c9e=TMe(u9e),d9e="index:unit";function f9e(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if(TPe(n=i9e(r=i[s])(e))&&(n=UMe(n)),TPe(o[s])&&(o[s]=UMe(o[s])),PMe(o[s])&&TPe(o[s][0])&&(o[s]=o[s].map(UMe)),"E"===r.type){if(PMe(o[s])?!o[s].includes(n):n!==o[s])return!1}else if("R"===r.type){if(!SPe(n,o[s]))return!1}else if("R-RE"===r.type){if(!SPe(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!SPe(n,o[s],!1,!1))return!1}else if("R-LE"===r.type){if(!SPe(n,o[s],!1,!0))return!1}else if("E-LT"===r.type){if(n>=o[s])return!1}else if("E-LTE"===r.type){if(n>o[s])return!1}else if("E-GT"===r.type){if(n<=o[s])return!1}else if("E-GTE"===r.type){if(n<o[s])return!1}else if("E-VALID"===r.type){if(null===n||isNaN(n))return!1}else if("E-ONE"===r.type&&-1===o[s].indexOf(n))return!1;return!0}const p9e=q3(c9e),h9e=p9e.left,m9e=p9e.right;var g9e={[`${u9e}_union`]:function(...e){const t=new Q3;for(const n of e)for(const e of n)t.add(e);return t},[`${u9e}_intersect`]:function(e,...t){e=new Q3(e),t=t.map(w4);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e},E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(e=>t.includes(e)):t},R_union:function(e,t){var n=UMe(t[0]),r=UMe(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=UMe(t[0]),r=UMe(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function y9e(e,t,n,r){t[0].type!==L6e&&SMe("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@"+o,s=":"+i;(t.length>=2&&zMe(t).value)!==o9e||bPe(r,a)||(r[a]=n.getData(i).indataRef(n,o)),bPe(r,s)||(r[s]=n.getData(i).tuplesRef())}function v9e(e){const t=this.context.data[e];return t?t.values.value:[]}const b9e=e=>function(t,n){const r=this.context.dataflow.locale();return null===t?"null":r[e](n)(t)},w9e=b9e("format"),_9e=b9e("timeFormat"),x9e=b9e("utcFormat"),E9e=b9e("timeParse"),S9e=b9e("utcParse"),k9e=new Date(2e3,0,1);function T9e(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(k9e.setYear(2e3),k9e.setMonth(e),k9e.setDate(t),_9e.call(this,k9e,n)):""}function C9e(e,t,n,r){t[0].type!==L6e&&SMe("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!bPe(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(HOt){}}function A9e(e,t,n,r){if(t[0].type===L6e)I9e(n,r,t[0].value);else for(e in n.scales)I9e(n,r,e)}function I9e(e,t,n){const r="%"+n;if(!bPe(t,r))try{t[r]=e.scaleRef(n)}catch(HOt){}}function O9e(e,t){if(OPe(e)){const n=t.scales[e];return n&&MHe(n.value)?n.value:void 0}if(lPe(e))return MHe(e)?e:void 0}function N9e(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=A9e,n._range=A9e,n._scale=A9e;const r=t=>"_["+(t.type===L6e?jPe("%"+t.value):jPe("%")+"+"+e(t))+"]";return{_bandwidth:e=>`this.__bandwidth(${r(e[0])})`,_range:e=>`${r(e[0])}.range()`,_scale:t=>`${r(t[0])}(${e(t[1])})`}}function D9e(e,t){return function(n,r,i){if(n){const t=O9e(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const R9e=D9e("area",function(e){return YXe=new K3,OXe(e,KXe),2*YXe}),M9e=D9e("bounds",function(e){var t,n,r,i,o,a,s;if(BXe=jXe=-(FXe=LXe=1/0),VXe=[],OXe(e,EJe),n=VXe.length){for(VXe.sort(DJe),t=1,o=[r=VXe[0]];t<n;++t)RJe(r,(i=VXe[t])[0])||RJe(r,i[1])?(NJe(r[0],i[1])>NJe(r[0],r[1])&&(r[1]=i[1]),NJe(i[0],r[1])>NJe(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=NJe(r[1],i[0]))>a&&(a=s,FXe=i[0],jXe=r[1])}return VXe=WXe=null,FXe===1/0||LXe===1/0?[[NaN,NaN],[NaN,NaN]]:[[FXe,LXe],[jXe,BXe]]}),P9e=D9e("centroid",function(e){sJe=lJe=uJe=cJe=dJe=fJe=pJe=hJe=0,mJe=new K3,gJe=new K3,yJe=new K3,OXe(e,MJe);var t=+mJe,n=+gJe,r=+yJe,i=mXe(t,n,r);return i<nXe&&(t=fJe,n=pJe,r=hJe,lJe<tXe&&(t=uJe,n=cJe,r=dJe),(i=mXe(t,n,r))<nXe)?[NaN,NaN]:[dXe(n,t)*sXe,EXe(r/i)*sXe]});function F9e(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(HOt){e.warn(HOt)}return n[n.length-1]}function L9e(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function j9e(e){const t=Y1(e);return.2126*L9e(t.r)+.7152*L9e(t.g)+.0722*L9e(t.b)}function B9e(e,t){return e===t||e!=e&&t!=t||(PMe(e)?!(!PMe(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!B9e(e[n],t[n]))return!1;return!0}(e,t):!(!FMe(e)||!FMe(t))&&$9e(e,t))}function $9e(e,t){for(const n in e)if(!B9e(e[n],t[n]))return!1;return!0}function z9e(e){return t=>$9e(e,t)}const U9e={};function q9e(e){return PMe(e)||ArrayBuffer.isView(e)?e:null}function H9e(e){return q9e(e)||(OPe(e)?e:null)}const V9e=e=>e.data;function W9e(e,t){const n=v9e.call(t,e);return n.root&&n.root.lookup||{}}const G9e=()=>"undefined"!=typeof window&&window||null;function Y9e(e,t,n){if(!e)return[];const[r,i]=e,o=(new _We).set(r[0],r[1],i[0],i[1]);return oZe(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=aPe(e.marktype),r=aPe(e.markname);t=e=>(!n.length||n.some(t=>e.marktype===t))&&(!r.length||r.some(t=>e.name===t))}return t}(t))}const K9e={random:()=>Vje(),cumulativeNormal:Jje,cumulativeLogNormal:oBe,cumulativeUniform:dBe,densityNormal:Xje,densityLogNormal:iBe,densityUniform:cBe,quantileNormal:eBe,quantileLogNormal:aBe,quantileUniform:fBe,sampleNormal:Qje,sampleLogNormal:rBe,sampleUniform:uBe,isArray:PMe,isBoolean:kPe,isDate:TPe,isDefined:e=>void 0!==e,isNumber:APe,isObject:FMe,isRegExp:IPe,isString:OPe,isTuple:nje,isValid:e=>null!=e&&e==e,toBoolean:BPe,toDate:e=>zPe(e),toNumber:UMe,toString:UPe,indexof:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H9e(e).indexOf(...n)},join:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return q9e(e).join(...n)},lastindexof:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H9e(e).lastIndexOf(...n)},replace:function(e,t,n){return lPe(n)&&SMe("Function argument passed to replace."),OPe(t)||IPe(t)||SMe("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)},reverse:function(e){return q9e(e).slice().reverse()},sort:function(e){return q9e(e).slice().sort(cPe)},slice:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return H9e(e).slice(...n)},flush:xPe,lerp:DPe,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),gPe(...e)},pad:FPe,peek:zMe,pluck:function(e,t){const n=U9e[t]||(U9e[t]=TMe(t));return PMe(e)?e.map(n):n(e)},span:LPe,inrange:SPe,truncate:HPe,rgb:Y1,lab:y2,hcl:E2,hsl:r2,luminance:j9e,contrast:function(e,t){const n=j9e(e),r=j9e(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:v4,format:w9e,utcFormat:x9e,utcParse:S9e,utcOffset:qFe,utcSequence:WFe,timeFormat:_9e,timeParse:E9e,timeOffset:UFe,timeSequence:VFe,timeUnitSpecifier:hFe,monthFormat:function(e){return T9e.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return T9e.call(this,e,1,"%b")},dayFormat:function(e){return T9e.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return T9e.call(this,0,2+e,"%a")},quarter:iPe,utcquarter:oPe,week:vFe,utcweek:SFe,dayofyear:yFe,utcdayofyear:EFe,warn:function(){return F9e(this.context.dataflow,"warn",arguments)},info:function(){return F9e(this.context.dataflow,"info",arguments)},debug:function(){return F9e(this.context.dataflow,"debug",arguments)},extent:e=>yPe(e),inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:Y9e,clampRange:sPe,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=G9e();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=G9e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return oHe(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(NMe).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?HVe(n,t=t||RVe(e)):e}},panLinear:KMe,panLog:ZMe,panPow:QMe,panSymlog:XMe,zoomLinear:ePe,zoomLog:tPe,zoomPow:nPe,zoomSymlog:rPe,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let c,d,f=s.changes;if(!1===a._trigger||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(s.changes=f=a.changeset(),f.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,f).run()},!0,1)),n&&(c=!0===n?NMe:PMe(n)||nje(n)?n:z9e(n),f.remove(c)),t&&f.insert(t),r&&(c=z9e(r),l.value.some(c)?f.remove(c):f.insert(r)),i)for(d in o)f.modify(i,d,o[d]);return 1},lassoAppend:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const i=(e=aPe(e))[e.length-1];return void 0===i||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e},lassoPath:function(e){return aPe(e).reduce((t,n,r)=>{let[i,o]=n;return t+(0==r?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `)},"")},intersectLasso:function(e,t,n){const{x:r,y:i,mark:o}=n,a=(new _We).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[s,l]of t)s<a.x1&&(a.x1=s),s>a.x2&&(a.x2=s),l<a.y1&&(a.y1=l),l>a.y2&&(a.y2=l);return a.translate(r,i),Y9e([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(e=>function(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,s]=n[o],[l,u]=n[i];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&r++}return 1&r}(e.x,e.y,t))}},Z9e=["view","item","group","xy","x","y"],Q9e="this.",X9e={},J9e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${jPe("$"+e)}]`,functions:function(e){const t=t9e(e);Z9e.forEach(e=>t[e]="event.vega."+e);for(const n in K9e)t[n]=Q9e+n;return gPe(t,N9e(e,K9e,X9e)),t},constants:e9e,visitors:X9e},e7e=n9e(J9e);function t7e(e,t,n){return 1===arguments.length?K9e[e]:(K9e[e]=t,n&&(X9e[e]=n),e7e&&(e7e.functions[e]=Q9e+e),this)}function n7e(e,t){const n={};let r;try{r=J8e(e=OPe(e)?e:jPe(e)+"")}catch(HOt){SMe("Expression parse error: "+e)}r.visit(e=>{if(e.type!==z6e)return;const r=e.callee.name,i=J9e.visitors[r];i&&i(r,e.arguments,t,n)});const i=e7e(r);return i.globals.forEach(e=>{const r="$"+e;!bPe(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))}),{$expr:gPe({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}t7e("bandwidth",function(e,t){const n=O9e(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0},A9e),t7e("copy",function(e,t){const n=O9e(e,(t||this).context);return n?n.copy():void 0},A9e),t7e("domain",function(e,t){const n=O9e(e,(t||this).context);return n?n.domain():[]},A9e),t7e("range",function(e,t){const n=O9e(e,(t||this).context);return n&&n.range?n.range():[]},A9e),t7e("invert",function(e,t,n){const r=O9e(e,(n||this).context);return r?PMe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0},A9e),t7e("scale",function(e,t,n){const r=O9e(e,(n||this).context);return r?r(t):void 0},A9e),t7e("gradient",function(e,t,n,r,i){e=O9e(e,(i||this).context);const o=kVe(t,n);let a=e.domain(),s=a[0],l=zMe(a),u=AMe;return l-s?u=YHe(e,s,l):e=(e.interpolator?PHe("sequential")().interpolator(e.interpolator()):PHe("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),l!==zMe(a)&&a.push(l)),a.forEach(t=>o.stop(u(t),e(t))),o},A9e),t7e("geoArea",R9e,A9e),t7e("geoBounds",M9e,A9e),t7e("geoCentroid",P9e,A9e),t7e("geoShape",function(e,t,n){const r=O9e(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}},A9e),t7e("geoScale",function(e,t){const n=O9e(e,(t||this).context);return n&&n.scale()},A9e),t7e("indata",function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i},function(e,t,n,r){t[0].type!==L6e&&SMe("First argument to indata must be a string literal."),t[1].type!==L6e&&SMe("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;bPe(a,r)||(r[a]=n.getData(i).indataRef(n,o))}),t7e("data",v9e,C9e),t7e("treePath",function(e,t,n){const r=W9e(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(V9e):void 0},C9e),t7e("treeAncestors",function(e,t){const n=W9e(e,this)[t];return n?n.ancestors().map(V9e):void 0},C9e),t7e("vlSelectionTest",function(e,t,n){for(var r,i,o,a,s,l=this.context.data[e],u=l?l.values.value:[],c=l?l[d9e]&&l[d9e].value:void 0,d=n===o9e,f=u.length,p=0;p<f;++p)if(r=u[p],c&&d){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=f9e(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(d^(s=f9e(t,r)))return s;return f&&d},y9e),t7e("vlSelectionIdTest",function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[d9e]&&r[d9e].value:void 0,a=n===o9e,s=c9e(t),l=h9e(i,s);if(l===i.length)return!1;if(c9e(i[l])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(m9e(i,s)-l<o.size)return!1}return!0},y9e),t7e("vlSelectionResolve",function(e,t,n,r){for(var i,o,a,s,l,u,c,d,f,p,h,m,g=this.context.data[e],y=g?g.values.value:[],v={},b={},w={},_=y.length,x=0;x<_;++x)if(s=(i=y[x]).unit,o=i.fields,a=i.values,o&&a){for(h=0,m=o.length;h<m;++h)l=o[h],d=(c=v[l.field]||(v[l.field]={}))[s]||(c[s]=[]),w[l.field]=f=l.type.charAt(0),p=g9e[`${f}_union`],c[s]=p(d,aPe(a[h]));n&&(d=b[s]||(b[s]=[])).push(aPe(a).reduce((e,t,n)=>(e[o[n].field]=t,e),{}))}else l=u9e,u=c9e(i),(d=(c=v[l]||(v[l]={}))[s]||(c[s]=[])).push(u),n&&(d=b[s]||(b[s]=[])).push({[u9e]:u});if(t=t||a9e,v[u9e]?v[u9e]=g9e[`${u9e}_${t}`](...Object.values(v[u9e])):Object.keys(v).forEach(e=>{v[e]=Object.keys(v[e]).map(t=>v[e][t]).reduce((n,r)=>void 0===n?r:g9e[`${w[e]}_${t}`](n,r))}),y=Object.keys(b),n&&y.length){v[r?"vlPoint":"vlMulti"]=t===a9e?{[s9e]:y.reduce((e,t)=>(e.push(...b[t]),e),[])}:{[l9e]:y.map(e=>({[s9e]:b[e]}))}}return v},y9e),t7e("vlSelectionTuples",function(e,t){return e.map(e=>gPe(t.fields?{values:t.fields.map(t=>i9e(t)(e.datum))}:{[u9e]:c9e(e.datum)},t))});const r7e=qPe(["rule"]),i7e=qPe(["group","image","rect"]);function o7e(e){return(e+"").toLowerCase()}function a7e(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var s7e={operator:(e,t)=>a7e(e,["_"],t.code),parameter:(e,t)=>a7e(e,["datum","_"],t.code),event:(e,t)=>a7e(e,["event"],t.code),handler:(e,t)=>a7e(e,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const e="o["+jPe(o)+"]";i+=`$=${r[o].code};if(${e}!==$)${e}=$,m=1;`}return i+=function(e,t){let n="";return r7e[t]||(e.x2&&(e.x?(i7e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(i7e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",a7e(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(jPe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=Function("a","b","var u, v; return "+e.map((e,r)=>{const i=t[r];let o,a;return e.path?(o=`a${e.path}`,a=`b${e.path}`):((n=n||{})["f"+r]=e,o=`this.f${r}(a)`,a=`this.f${r}(b)`),function(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}\n  : (u > v || v == null) && u != null ? ${r}\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n  : v !== v && u === u ? ${r} : `}(o,a,-i,i)}).join("")+"0;");return n?r.bind(n):r}}};function l7e(e,t,n){if(!e||!FMe(e))return e;for(let r,i=0,o=u7e.length;i<o;++i)if(r=u7e[i],bPe(e,r.key))return r.parse(e,t,n);return e}var u7e=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||SMe("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=NPe(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=vMe(t.parameterExpression(e.$expr),e.$fields))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=TMe(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const i in n){const e=n[i];r[i]=vMe(t.encodeExpression(e.$expr),e.$fields),r[i].output=e.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=aPe(e.$compare).map(e=>e&&e.$tupleid?rje:e);return t.fn[n]||(t.fn[n]=uPe(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return rje}}];const c7e={skip:!0};function d7e(e,t,n,r){return new f7e(e,t,n,r)}function f7e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||s7e,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function p7e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function h7e(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}f7e.prototype=p7e.prototype={fork(){const e=new p7e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(t=>t!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===o7e(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push(()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const r=n.data[o]||(n.data[o]={});e.data[o].forEach(e=>r[e]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[o7e(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(e=>t.parseOperator(e)),n.forEach(e=>t.parseOperatorParameters(e)),(e.streams||[]).forEach(e=>t.parseStream(e)),(e.updates||[]).forEach(e=>t.parseUpdate(e)),t.resolve()},parseOperator:function(e){const t=this;"operator"!==o7e(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||SMe("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=PMe(i)?i.map(e=>l7e(e,n,t)):l7e(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map(e=>n.get(e)))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map(e=>n.get(e)),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&SMe("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=FMe(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||SMe("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)})}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map(t=>t.getState(e))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(e=>{n.update(t.signals[e],i[e],c7e)}),Object.keys(r||{}).forEach(e=>{n.pulse(t.data[e].input,n.changeset().remove(NMe).insert(r[e]))}),(e.subcontext||[]).forEach((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)})}};const m7e="default";function g7e(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function y7e(e,t){var n=e._runtime.data;return bPe(n,t)||SMe("Unrecognized data set: "+t),n[t]}function v7e(e,t){cje(t)||SMe("Second argument to changes must be a changeset.");const n=y7e(this,e);return n.modified=!0,this.pulse(n.input,t)}function b7e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function w7e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function _7e(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function x7e(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=_7e(e),(r=DYe(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;OPe(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:hPe(e),item:hPe(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const E7e="view",S7e={trap:!1};function k7e(e,t,n,r){e._eventListeners.push({type:n,sources:aPe(t),handler:r})}function T7e(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||FMe(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function C7e(e){return e.item}function A7e(e){return e.item.mark.source}function I7e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function O7e(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return null!=n&&(r.textContent=n),r}function N7e(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),k7e(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function D7e(e,t,n,r){const i=r.signal(n.signal),o=O7e("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(O7e("label"));a.appendChild(O7e("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=R7e;switch(n.input){case"checkbox":s=M7e;break;case"select":s=P7e;break;case"radio":s=F7e;break;case"range":s=L7e}s(e,a,n,i)}function R7e(e,t,n,r){const i=O7e("input");for(const o in n)"signal"!==o&&"element"!==o&&i.setAttribute("input"===o?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=e=>i.value=e}function M7e(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=O7e("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=e=>o.checked=!!e||null}function P7e(e,t,n,r){const i=O7e("select",{name:n.signal}),o=n.labels||[];n.options.forEach((e,t)=>{const n={value:e};j7e(e,r)&&(n.selected=!0),i.appendChild(O7e("option",n,(o[t]||e)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(j7e(n.options[t],e))return void(i.selectedIndex=t)}}function F7e(e,t,n,r){const i=O7e("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((t,a)=>{const s={type:"radio",name:n.signal,value:t};j7e(t,r)&&(s.checked=!0);const l=O7e("input",s);l.addEventListener("change",()=>e.update(t));const u=O7e("label",{},(o[a]||t)+"");return u.prepend(l),i.appendChild(u),l}),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)j7e(n[e].value,t)&&(n[e].checked=!0)}}function L7e(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||u4(o,i,100),s=O7e("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const l=O7e("span",{},+r);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=e=>{s.value=e,l.textContent=e}}function j7e(e,t){return e===t||e+""==t+""}function B7e(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,b7e(e),w7e(e),_7e(e),i,o).background(e.background())}function $7e(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function z7e(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.textContent=""}catch(F0){t=null,e.error(F0)}return t}const U7e=e=>+e||0;function q7e(e){return FMe(e)?{top:U7e(e.top),bottom:U7e(e.bottom),left:U7e(e.left),right:U7e(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(U7e(e))}async function H7e(e,t,n,r){const i=iZe(t),o=i&&i.headless;return o||SMe("Unrecognized renderer type: "+t),await e.runAsync(),B7e(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var V7e="width",W7e="height",G7e="padding",Y7e={skip:!0};function K7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===G7e?r.left+r.right:0)}function Z7e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===G7e?r.top+r.bottom:0)}function Q7e(e,t){return t.modified&&PMe(t.input.value)&&!e.startsWith("_:vega:_")}function X7e(e,t){return!("parent"===e||t instanceof Lje.proxy)}function J7e(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":PMe(e)?eet(e):FMe(e)&&!TPe(e)?(t=e,Object.keys(t).map(e=>{const n=t[e];return e+": "+(PMe(n)?eet(n):tet(n))}).join("\n")):e+"";var t}(r))}function eet(e){return"["+e.map(tet).join(", ")+"]"}function tet(e){return PMe(e)?"[…]":FMe(e)&&!TPe(e)?"{…}":e}function net(e,t){const n=this;if(t=t||{},Mje.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=gPe({},e.locale,t.locale);n.locale(_Le(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||nZe.Canvas,n._scenegraph=new kYe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||J7e,n._redraw=!0,n._handler=(new nKe).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=gPe({defaults:{}},e),n=(e,t)=>{t.forEach(t=>{PMe(e[t])&&(e[t]=qPe(e[t]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return d7e(e,Lje,K9e,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(e=>({state:null,param:gPe({},e)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=K7e(n,n._width),n._viewHeight=Z7e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t[V7e],r=t[W7e],i=t[G7e];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,t=>{e._width=t.size,e._viewWidth=K7e(e,t.size),o()},{size:n}),e._resizeHeight=e.add(null,t=>{e._height=t.size,e._viewHeight=Z7e(e,t.size),o()},{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:m7e,item:null}));e.on(e.events("view","pointermove"),t,(e,n)=>{const r=t.value,i=r?OPe(r)?r:r.user:m7e,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}}),e.add(null,function(t){let n=t.cursor,r=this.value;return OPe(n)||(r=n.item,n=n.user),g7e(e,n&&n!==m7e?n:r||n),r},{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function ret(e,t){return bPe(e._signals,t)?e._signals[t]:SMe("Unrecognized signal name: "+jPe(t))}function iet(e,t){const n=(e._targets||[]).filter(e=>e._update&&e._update.handler===t);return n.length?n[0]:null}function oet(e,t,n,r){let i=iet(n,r);return i||(i=$7e(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function aet(e,t,n){const r=iet(t,n);return r&&t._targets.remove(r),e}EPe(net,Mje,{async evaluate(e,t,n){if(await Mje.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=_7e(r=this),o=b7e(r),a=w7e(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach(e=>{try{e(o,a)}catch(t){r.error(t)}})),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(F0){this.error(F0)}var r,i,o,a;return n&&JLe(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&h7e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=ret(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",q7e(e)):q7e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(iZe(e)||SMe("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Mje.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(ret(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(V7e,n,Y7e),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(W7e,r,Y7e),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(e=>e.resize())},!1,1)},addEventListener(e,t,n){let r=t;return n&&!1===n.trap||(r=$7e(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return oet(this,e,ret(this,e),t)},removeSignalListener(e,t){return aet(this,ret(this,e),t)},addDataListener(e,t){return oet(this,e,y7e(this,e).values,t)},removeDataListener(e,t){return aet(this,y7e(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=g7e(this,null);this._globalCursor=!!e,t&&g7e(this,t)}return this}return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new E3e,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?_3e():+n,r._restart(function o(a){a+=i,r._restart(o,i+=t,n),e(a)},t,n)},r.restart(e,t,n),r)}(function(t){e({timestamp:Date.now(),elapsed:t})},t))},events:function(e,t,n){var r,i=this,o=new bje(n),a=function(n,r){i.runAsync(null,()=>{e===E7e&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(x7e(i,n,r))})};if("timer"===e)T7e(i,"timer",t)&&i.timer(a,t);else if(e===E7e)T7e(i,"view",t)&&i.addEventListener(t,a,S7e);else if("window"===e?T7e(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&T7e(i,"selector",t)&&(r=Array.from(document.querySelectorAll(e))),r){for(var s=0,l=r.length;s<l;++s)r[s].addEventListener(t,a);k7e(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r,i,o=this._tooltip,a=this._timers,s=this._handler.handlers(),l=this._eventListeners;for(e=a.length;--e>=0;)a[e].stop();for(e=l.length;--e>=0;)for(t=(n=l[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);for(o&&o.call(this,this._handler,null,null,null),e=s.length;--e>=0;)i=s[e].type,r=s[e].handler,this._handler.off(i,r);return this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","pointerover",C7e),A7e,I7e(e)),this.on(this.events("view","pointerout",C7e),A7e,I7e(t)),this},data:function(e,t){return arguments.length<2?y7e(this,e).values.value:v7e.call(this,e,dje().remove(NMe).insert(t))},change:v7e,insert:function(e,t){return v7e.call(this,e,dje().insert(t))},remove:function(e,t){return v7e.call(this,e,dje().remove(t))},scale:function(e){var t=this._runtime.scales;return bPe(t,e)||SMe("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=iZe(r);e=n._el=e?z7e(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),h7e(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||nKe,s=e?o.renderer:o.headless;return n._renderer=s?B7e(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),$7e(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,_7e(e),e);return t&&t.handlers().forEach(e=>{i.on(e.type,e.handler)}),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=z7e(n,t,!0):e.appendChild(O7e("form",{class:"vega-bindings"})),n._bind.forEach(e=>{e.param.element&&"container"!==i&&(e.element=z7e(n,e.param.element,!!e.param.input))}),n._bind.forEach(e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,t)})}},r.debounce&&(i.update=mPe(r.debounce,i.update))),(null==r.input&&r.element?N7e:D7e)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0)}(n,e.element||t,e)})),n},toImageURL:async function(e,t){e!==nZe.Canvas&&e!==nZe.SVG&&e!==nZe.PNG&&SMe("Unrecognized image type: "+e);const n=await H7e(this,e,t);return e===nZe.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await H7e(this,nZe.Canvas,e,t)).canvas()},toSVG:async function(e){return(await H7e(this,nZe.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:Q7e,signals:X7e,recurse:!0})},setState:function(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},e=>{e._trigger=!0}),this},_watchPixelRatio:function(){if("canvas"===this.renderer()&&this._renderer._canvas){let e=null;const t=()=>{null!=e&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}});const set="[",uet="]",cet=/[[\]{}]/,det={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let fet,pet;function het(e,t,n){return fet=t||"view",pet=n||det,get(e.trim()).map(yet)}function met(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function get(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=met(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function yet(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=met(e,r,uet,set,uet),r===t)throw"Empty between selector: "+e;if(n=get(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(e=e.slice(r+1).trim(),">"!==e[0])throw"Expected '>' after between selector: "+e;n=n.map(yet);const i=yet(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:fet},n=[];let r,i,o=[0,0],a=0,s=0,l=e.length,u=0;if("}"===e[l-1]){if(u=e.lastIndexOf("{"),!(u>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map(t=>{const n=+t;if(n!=n)throw e;return n})}(e.substring(u+1,l-1))}catch(F0){throw"Invalid throttle specification: "+e}l=(e=e.slice(0,u).trim()).length,u=0}if(!l)throw e;"@"===e[0]&&(a=++u);r=met(e,u,":"),r<l&&(n.push(e.substring(s,r).trim()),s=u=++r);if(u=met(e,u,set),u===l)n.push(e.substring(s,l).trim());else if(n.push(e.substring(s,u).trim()),i=[],s=++u,s===l)throw"Unmatched left bracket: "+e;for(;u<l;){if(u=met(e,u,uet),u===l)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,u).trim()),u<l-1&&e[++u]!==set)throw"Expected left bracket: "+e;s=++u}if(!(l=n.length)||cet.test(n[l-1]))throw"Invalid event selector: "+e;l>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],pet[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function vet(e){return FMe(e)?e:{type:e||"pad"}}const bet=e=>+e||0;function wet(e){return FMe(e)?e.signal?e:{top:bet(e.top),bottom:bet(e.bottom),left:bet(e.left),right:bet(e.right)}:{top:t=bet(e),bottom:t,left:t,right:t};var t}const _et=e=>FMe(e)&&!PMe(e)?gPe({},e):{value:e};function xet(e,t,n,r){if(null!=n){return FMe(n)&&!PMe(n)||PMe(n)&&n.length&&FMe(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function Eet(e,t,n){for(const r in t)xet(e,r,t[r]);for(const r in n)xet(e,r,n[r],"update")}function ket(e,t,n){for(const r in t)n&&bPe(n,r)||(e[r]=gPe(e[r]||{},t[r]));return e}function Tet(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Cet="mark",Aet="frame",Iet="scope",Oet="legend-label",Net="title-text",Det="title-subtitle";function Ret(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Met=e=>OPe(e)?jPe(e):e.signal?`(${e.signal})`:jet(e);function Pet(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map(e=>null==e?null:jPe(e));for(;t.length&&null==zMe(t);)t.pop();return t.unshift(Met(e.gradient)),`gradient(${t.join(",")})`}(e);let t=e.signal?`(${e.signal})`:e.color?function(e){return e.c?Fet("hcl",e.h,e.c,e.l):e.h||e.s?Fet("hsl",e.h,e.s,e.l):e.l||e.a?Fet("lab",e.l,e.a,e.b):e.r||e.g||e.b?Fet("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?jet(e.field):void 0!==e.value?jPe(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=Met(e.scale);null!=e.range?t=`lerp(_range(${n}), ${+e.range})`:(void 0!==t&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(1===+e.band?"":"*"+Let(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t=`pow(${t},${Let(e.exponent)})`),null!=e.mult&&(t+=`*${Let(e.mult)}`),null!=e.offset&&(t+=`+${Let(e.offset)}`),e.round&&(t=`round(${t})`),t}const Fet=(e,t,n,r)=>`(${e}(${[t,n,r].map(Pet).join(",")})+'')`;function Let(e){return FMe(e)?"("+Pet(e)+")":e}function jet(e){return Bet(FMe(e)?e:{datum:e})}function Bet(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):SMe("Invalid field reference: "+jPe(e));return e.signal||(r=OPe(r)?kMe(r).map(jPe).join("]["):Bet(r)),t+"["+r+"]"}function $et(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,l,u,c;for(l in l="lineBreak","text"!==t||null==i[l]||Tet(l,e)||Ret(o,l,i[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===Aet?i.group:n===Cet?gPe({},i.mark,i[t]):null,c)u=Tet(l,e)||("fill"===l||"stroke"===l)&&(Tet("fill",e)||Tet("stroke",e)),u||Ret(o,l,c[l]);for(l in aPe(r).forEach(t=>{const n=i.style&&i.style[t];for(const r in n)Tet(r,e)||Ret(o,r,n[r])}),e=gPe({},e),o)c=o[l],c.signal?(s=s||{})[l]=c:a[l]=c;return e.enter=gPe(a,e.enter),s&&(e.update=gPe(s,e.update)),e}(e,t,n,r,i.config);for(const s in e)a[s]=zet(e[s],t,o,i);return o}function zet(e,t,n,r){const i={},o={};for(const a in e)null!=e[a]&&(i[a]=qet(Uet(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function Uet(e){return PMe(e)?function(e){let t="";return e.forEach(e=>{const n=Pet(e);t+=e.test?`(${e.test})?${n}:`:n}),":"===zMe(t)&&(t+="null"),t}(e):Pet(e)}function qet(e,t,n,r){const i=n7e(e,t);return i.$fields.forEach(e=>r[e]=1),gPe(n,i.$params),i.$expr}const Het=["value","update","init","react","bind"];function Vet(e,t){SMe(e+' for "outer" push: '+jPe(t))}function Wet(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||Vet("No prior signal definition",n),Het.forEach(t=>{void 0!==e[t]&&Vet("Invalid property ",t)});else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Get(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Yet(e,t,n,r){return new Get(e,t,n,r)}function Ket(e,t){return Yet("operator",e,t)}function Zet(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Qet(e,t){return t?{$field:e,$name:t}:{$field:e}}const Xet=Qet("key");function Jet(e,t){return{$compare:e,$order:t}}function ett(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ttt="scope",ntt="view";function rtt(e){return e&&e.signal}function itt(e){if(rtt(e))return!0;if(FMe(e))for(const t in e)if(itt(e[t]))return!0;return!1}function ott(e,t){return null!=e?e:t}function att(e){return e&&e.signal||e}const stt="timer";function ltt(e,t){return(e.merge?utt:e.stream?ctt:e.type?dtt:SMe("Invalid stream specification: "+jPe(e)))(e,t)}function utt(e,t){const n=e.merge.map(e=>ltt(e,t)),r=ftt({merge:n},e,t);return t.addStream(r).id}function ctt(e,t){const n=ftt({stream:ltt(e.stream,t)},e,t);return t.addStream(n).id}function dtt(e,t){let n;var r;e.type===stt?(n=t.event(stt,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===ttt?ntt:r||ntt,e.type);const i=ftt({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function ftt(e,t,n){let r=t.between;return r&&(2!==r.length&&SMe('Stream "between" parameter must have 2 entries: '+jPe(t)),e.between=[ltt(r[0],n),ltt(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===ttt&&r.push("inScope(event.item)"),r.length&&(e.filter=n7e("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const ptt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function htt(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||SMe("Signal update missing events specification."),OPe(o)&&(o=het(o,t.isSubscope()?ttt:ntt)),o=aPe(o).filter(e=>e.signal||e.scale?(s.push(e),0):1),s.length>1&&(s=[mtt(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&SMe("Signal encode and update are mutually exclusive."),a="encode(item(),"+jPe(r)+")"),i.update=OPe(a)?n7e(a,t):null!=a.expr?n7e(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:ptt,$params:{$value:t.signalRef(a.signal)}}:SMe("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(e=>t.addUpdate(gPe(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):ltt(e,t)}}(e,t),i)))}function mtt(e){return{signal:"["+e.map(e=>e.scale?'scale("'+e.scale+'")':e.signal)+"]"}}const gtt=e=>(t,n,r)=>Yet(e,n,t||void 0,r),ytt=gtt("aggregate"),vtt=gtt("axisticks"),btt=gtt("bound"),wtt=gtt("collect"),_tt=gtt("compare"),xtt=gtt("datajoin"),Ett=gtt("encode"),Stt=gtt("expression"),ktt=gtt("facet"),Ttt=gtt("field"),Ctt=gtt("key"),Att=gtt("legendentries"),Itt=gtt("load"),Ott=gtt("mark"),Ntt=gtt("multiextent"),Dtt=gtt("multivalues"),Rtt=gtt("overlap"),Mtt=gtt("params"),Ptt=gtt("prefacet"),Ftt=gtt("projection"),Ltt=gtt("proxy"),jtt=gtt("relay"),Btt=gtt("render"),$tt=gtt("scale"),ztt=gtt("sieve"),Utt=gtt("sortitems"),qtt=gtt("viewlayout"),Htt=gtt("values");let Vtt=0;const Wtt={min:"min",max:"max",count:"sum"};function Gtt(e,t){const n=t.getScale(e.name).params;let r;for(r in n.domain=Qtt(e.domain,e,t),null!=e.range&&(n.range=ont(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=Ytt(e.type||e),null!=e.gamma&&(t.interpolateGamma=Ytt(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=function(e,t){return e.signal?t.signalRef(e.signal):FMe(e)?{interval:Ytt(e.interval),step:Ytt(e.step)}:Ytt(e)}(e.nice,t)),null!=e.bins&&(n.bins=function(e,t){return e.signal||PMe(e)?Ktt(e,t):t.objectProperty(e)}(e.bins,t)),e)bPe(n,r)||"name"===r||(n[r]=Ytt(e[r],t))}function Ytt(e,t){return FMe(e)?e.signal?t.signalRef(e.signal):SMe("Unsupported object: "+jPe(e)):e}function Ktt(e,t){return e.signal?t.signalRef(e.signal):e.map(e=>Ytt(e,t))}function Ztt(e){SMe("Can not find data set: "+jPe(e))}function Qtt(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(PMe(e)?Xtt:e.fields?ent:Jtt)(e,t,n);null==t.domainMin&&null==t.domainMax||SMe("No scale domain defined for domainMin/domainMax to override.")}function Xtt(e,t,n){return e.map(e=>Ytt(e,n))}function Jtt(e,t,n){const r=n.getData(e.data);return r||Ztt(e.data),BHe(t.type)?r.valuesRef(n,e.field,nnt(e.sort,!1)):qHe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ent(e,t,n){const r=e.data,i=e.fields.reduce((e,t)=>(t=OPe(t)?{data:r,field:t}:PMe(t)||t.signal?function(e,t){const n="_:vega:_"+Vtt++,r=wtt({});if(PMe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+jPe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ztt({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e),[]);return(BHe(t.type)?tnt:qHe(t.type)?rnt:int)(e,n,i)}function tnt(e,t,n){const r=nnt(e.sort,!0);let i,o;const a=n.map(e=>{const n=t.getData(e.data);return n||Ztt(e.data),n.countsRef(t,e.field,r)}),s={groupby:Xet,pulse:a};r&&(i=r.op||"count",o=r.field?ett(i,r.field):"count",s.ops=[Wtt[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(ytt(s));const l=t.add(wtt({pulse:Zet(i)}));return o=t.add(Htt({field:Xet,sort:t.sortRef(r),pulse:Zet(l)})),Zet(o)}function nnt(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!Wtt[e.op]&&SMe("Multiple domain scales can not be sorted using "+e.op):SMe("No field provided for sort aggregate op: "+e.op):FMe(e)?e.field="key":e={field:"key"}),e}function rnt(e,t,n){const r=n.map(e=>{const n=t.getData(e.data);return n||Ztt(e.data),n.domainRef(t,e.field)});return Zet(t.add(Dtt({values:r})))}function int(e,t,n){const r=n.map(e=>{const n=t.getData(e.data);return n||Ztt(e.data),n.extentRef(t,e.field)});return Zet(t.add(Ntt({extents:r})))}function ont(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(OPe(i)){if(r&&bPe(r,i))return ont(e=gPe({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=BHe(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:SMe("Unrecognized scale range value: "+jPe(i))}else{if(i.scheme)return n.scheme=PMe(i.scheme)?Ktt(i.scheme,t):Ytt(i.scheme,t),i.extent&&(n.schemeExtent=Ktt(i.extent,t)),void(i.count&&(n.schemeCount=Ytt(i.count,t)));if(i.step)return void(n.rangeStep=Ytt(i.step,t));if(BHe(e.type)&&!PMe(i))return Qtt(i,e,t);PMe(i)||SMe("Unsupported range type: "+jPe(i))}return i.map(e=>(PMe(e)?Ktt:Ytt)(e,t))}function ant(e,t,n){return PMe(e)?e.map(e=>ant(e,t,n)):FMe(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:SMe("Unsupported parameter object: "+jPe(e)):e}const snt="top",lnt="left",unt="right",cnt="bottom",dnt="center",fnt="index",pnt="label",hnt="perc",mnt="value",gnt="guide-label",ynt="guide-title",vnt="group-title",bnt="group-subtitle",wnt="symbol",_nt="gradient",xnt="discrete",Ent="size",Snt=[Ent,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],knt={name:1,style:1,interactive:1},Tnt={value:0},Cnt={value:1},Ant="group",Int="rect",Ont="rule",Nnt="text";function Dnt(e){return e.type=Ant,e.interactive=e.interactive||!1,e}function Rnt(e,t){const n=(n,r)=>ott(e[n],ott(t[n],r));return n.isVertical=n=>"vertical"===ott(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ott(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ott(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ott(e.columns,ott(t.columns,+n.isVertical(!0))),n}function Mnt(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function Pnt(e,t,n){return`item.anchor === 'start' ? ${e} : item.anchor === 'end' ? ${t} : ${n}`}const Fnt=Pnt(jPe(lnt),jPe(unt),jPe(dnt));function Lnt(e,t){return t?e?FMe(e)?Object.assign({},e,{offset:Lnt(e.offset,t)}):{value:e,offset:t}:t:e}function jnt(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=ket(e.encode,t,knt)):e.interactive=!1,e}function Bnt(e,t,n,r){const i=Rnt(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let l,u,c,d,f;o?(u=[0,1],c=[0,0],d=a,f=s):(u=[0,0],c=[1,0],d=s,f=a);const p={enter:l={opacity:Tnt,x:Tnt,y:Tnt,width:_et(d),height:_et(f)},update:gPe({},l,{opacity:Cnt,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:Tnt}};return Eet(p,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),jnt({type:Int,role:"legend-gradient",encode:p},r)}function $nt(e,t,n,r,i){const o=Rnt(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,c,d,f,p="";a?(u="y",d="y2",c="x",f="width",p="1-"):(u="x",d="x2",c="y",f="height");const h={opacity:Tnt,fill:{scale:t,field:mnt}};h[u]={signal:p+"datum."+hnt,mult:l},h[c]=Tnt,h[d]={signal:p+"datum.perc2",mult:l},h[f]=_et(s);const m={enter:h,update:gPe({},h,{opacity:Cnt}),exit:{opacity:Tnt}};return Eet(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),jnt({type:Int,role:"legend-band",key:mnt,from:i,encode:m},r)}const znt=`datum.${hnt}<=0?"${lnt}":datum.${hnt}>=1?"${unt}":"${dnt}"`,Unt=`datum.${hnt}<=0?"${cnt}":datum.${hnt}>=1?"${snt}":"middle"`;function qnt(e,t,n,r){const i=Rnt(e,t),o=i.isVertical(),a=_et(i.gradientThickness()),s=i.gradientLength();let l,u,c,d,f=i("labelOverlap"),p="";const h={enter:l={opacity:Tnt},update:u={opacity:Cnt,text:{field:pnt}},exit:{opacity:Tnt}};return Eet(h,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ott(e.labelLimit,t.gradientLabelLimit)}),o?(l.align={value:"left"},l.baseline=u.baseline={signal:Unt},c="y",d="x",p="1-"):(l.align=u.align={signal:znt},l.baseline={value:"top"},c="x",d="y"),l[c]=u[c]={signal:p+"datum."+hnt,mult:s},l[d]=u[d]=a,a.offset=ott(e.labelOffset,t.gradientLabelOffset)||0,f=f?{separation:i("labelSeparation"),method:f,order:"datum."+fnt}:void 0,jnt({type:Nnt,role:Oet,style:gnt,key:mnt,from:r,encode:h,overlap:f},n)}function Hnt(e,t,n,r,i){const o=Rnt(e,t),a=n.entries,s=!(!a||!a.interactive),l=a?a.name:void 0,u=o("clipHeight"),c=o("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.offset : datum.${Ent}`,p=u?_et(u):{field:Ent},h=`datum.${fnt}`,m=`max(1, ${i})`;let g,y,v,b,w;p.mult=.5,g={enter:y={opacity:Tnt,x:{signal:f,mult:.5,offset:c},y:p},update:v={opacity:Cnt,x:y.x,y:y.y},exit:{opacity:Tnt}};let _=null,x=null;e.fill||(_=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),Eet(g,{fill:o("symbolFillColor",_),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",x),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Snt.forEach(t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:mnt})});const E=jnt({type:"symbol",role:"legend-symbol",key:mnt,from:d,clip:!!u||void 0,encode:g},n.symbols),S=_et(c);S.offset=o("labelOffset"),g={enter:y={opacity:Tnt,x:{signal:f,offset:S},y:p},update:v={opacity:Cnt,text:{field:pnt},x:y.x,y:y.y},exit:{opacity:Tnt}},Eet(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const k=jnt({type:Nnt,role:Oet,style:gnt,key:mnt,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:Tnt,height:u?_et(u):Tnt,opacity:Tnt},exit:{opacity:Tnt},update:v={opacity:Cnt,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${h}%${b}`,v.column.signal=`floor(${h} / ${b})`,w={field:["row",h]}):(v.row.signal=`floor(${h} / ${m})`,v.column.signal=`${h} % ${m}`,w={field:h}),v.column.signal=`(${i})?${v.column.signal}:${h}`,Dnt({role:Iet,from:r={facet:{data:r,name:"value",groupby:fnt}},encode:ket(g,a,knt),marks:[E,k],name:l,interactive:s,sort:w})}const Vnt='item.orient === "left"',Wnt='item.orient === "right"',Gnt=`(${Vnt} || ${Wnt})`,Ynt=`datum.vgrad && ${Gnt}`,Knt=Pnt('"top"','"bottom"','"middle"'),Znt=`datum.vgrad && ${Wnt} ? (${Pnt('"right"','"left"','"center"')}) : (${Gnt} && !(datum.vgrad && ${Vnt})) ? "left" : ${Fnt}`,Qnt=`item._anchor || (${Gnt} ? "middle" : "start")`,Xnt=`${Ynt} ? (${Vnt} ? -90 : 90) : 0`,Jnt=`${Gnt} ? (datum.vgrad ? (${Wnt} ? "bottom" : "top") : ${Knt}) : "top"`;function ert(e,t){let n;return FMe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+trt(e.path)+")":e.sphere&&(n="geoShape("+trt(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function trt(e){return FMe(e)&&e.signal?e.signal:jPe(e)}function nrt(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Ant?Iet:t||Cet}function rrt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||nrt(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function irt(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function ort(e,t){const n=jje(e.type);n||SMe("Unrecognized transform type: "+jPe(e.type));const r=Yet(n.type.toLowerCase(),null,art(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function art(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=srt(i,t,n)}return r}function srt(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){OPe(t.from)||SMe('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(PMe(r)||SMe("Expected an array of sub-parameters. Instead: "+jPe(r)),r.map(t=>urt(e,t,n))):urt(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!rtt(i)?i.map(t=>lrt(e,t,n)):lrt(e,i,n):void(e.required&&SMe("Missing required "+jPe(t.type)+" parameter: "+jPe(e.name)))}function lrt(e,t,n){const r=e.type;if(rtt(t))return prt(r)?SMe("Expression references can not be signals."):hrt(r)?n.fieldRef(t):mrt(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||hrt(r);return i&&crt(t)?n.exprRef(t.expr,t.as):i&&drt(t)?Qet(t.field,t.as):prt(r)?n7e(t,n):frt(r)?Zet(n.getData(t).values):hrt(r)?Qet(t):mrt(r)?n.compareRef(t):t}}function urt(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||SMe("Unsupported parameter: "+jPe(t));const o=gPe(art(i,t,n),i.key);return Zet(n.add(Mtt(o)))}const crt=e=>e&&e.expr,drt=e=>e&&e.field,frt=e=>"data"===e,prt=e=>"expr"===e,hrt=e=>"field"===e,mrt=e=>"compare"===e;function grt(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Zet(t.getData(e.data).output)}function yrt(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function vrt(e){return OPe(e)?e:null}function brt(e,t,n){const r=ett(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function wrt(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),l=function(e){return FMe(e)?("descending"===e.order?"-":"+")+ett(e.op,e.field):""}(o);let u,c,d=vrt(i);if(null!=d&&(e=t.scope,d+=l?"|"+l:"",u=s[d]),!u){const n=o?{field:Xet,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Zet(t.output)};l&&(n.sort=e.sortRef(o)),c=e.add(Yet(r,void 0,n)),a&&(t.index[i]=c),u=Zet(c),null!=d&&(s[d]=u)}return u}function _rt(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(Ket()),u=n7e("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(e=>null==e?"null":e).join(",")+"),0)",t);l.update=u.$expr,l.params=u.$params}function xrt(e,t){const n=nrt(e),r=e.type===Ant,i=e.from&&e.from.facet,o=e.overlap;let a,s,l,u,c,d,f,p=e.layout||n===Iet||n===Aet;const h=n===Cet||p||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||SMe("Only group marks can be faceted."),null!=r.field?a=s=grt(r,n):(e.data?s=Zet(n.getData(e.data).aggregate):(o=ort(gPe({type:"aggregate",groupby:aPe(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=grt(r,n),a=s=Zet(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Zet(n.add(wtt(null,[{}]))),a||(a=grt(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(xtt({key:m.key||(e.key?Qet(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Zet(s);s=l=t.add(wtt({pulse:g})),s=t.add(Ott({markdef:rrt(e),interactive:irt(e.interactive,t),clip:ert(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Zet(s)}));const y=Zet(s);s=u=t.add(Ett($et(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach(e=>{const n=ort(e,t),r=n.metadata;(r.generates||r.changes)&&SMe("Mark transforms should not generate new data."),r.nomod||(u.params.mod=!0),n.params.pulse=Zet(s),t.add(s=n)}),e.sort&&(s=t.add(Utt({sort:t.compareRef(e.sort),pulse:Zet(s)})));const v=Zet(s);(i||p)&&(p=t.add(qtt({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Zet(p));const b=t.add(btt({mark:y,pulse:d||v}));f=Zet(b),r&&(h&&(a=t.operators,a.pop(),p&&a.pop()),t.pushState(v,d||f,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=grt(r,t);let a;r.name||SMe("Facet must have a name: "+jPe(r)),r.data||SMe("Facet must reference a data set: "+jPe(r)),r.field?a=t.add(Ptt({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(ktt({key:t.keyRef(r.groupby),group:Zet(t.proxy(n.parent)),pulse:o})):SMe("Facet must specify groupby or field: "+jPe(r));const s=t.fork(),l=s.add(wtt()),u=s.add(ztt({pulse:Zet(l)}));s.addData(i,new yrt(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):h?function(e,t,n){const r=t.add(Ptt({pulse:n.pulse})),i=t.fork();i.add(ztt()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),h&&(p&&a.push(p),a.push(b))),o&&(f=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:rtt(o)?n.signalRef(o.signal):o,method:rtt(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=rtt(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Zet(n.add(Rtt(a)))}(o,f,t));const w=t.add(Btt({pulse:f})),_=t.add(ztt({pulse:Zet(w)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new yrt(t,l,w,_)),e.on&&e.on.forEach(e=>{(e.insert||e.remove||e.toggle)&&SMe("Marks only support modify triggers."),_rt(e,t,c)}))}function Ert(e,t){const n=t.config.legend,r=e.encode||{},i=Rnt(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let c,d,f,p=0;Snt.forEach(t=>e[t]?(u[t]=e[t],p=p||e[t]):0),p||SMe("Missing valid scale for legend.");const h=function(e,t){let n=e.type||wnt;e.type||1!==function(e){return Snt.reduce((t,n)=>t+(e[n]?1:0),0)}(e)||!e.fill&&!e.stroke||(n=jHe(t)?_nt:$He(t)?xnt:wnt);return n!==_nt?n:$He(t)?xnt:_nt}(e,t.scaleType(p)),m={title:null!=e.title,scales:u,type:h,vgrad:"symbol"!==h&&i.isVertical()},g=Zet(t.add(wtt(null,[m]))),y=Zet(t.add(Att(d={type:h,scale:t.scaleRef(p),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return h===_nt?(f=[Bnt(e,p,n,r.gradient),qnt(e,n,r.labels,y)],d.count=d.count||t.signalRef(`max(2,2*floor((${att(i.gradientLength())})/100))`)):h===xnt?f=[$nt(e,p,n,r.gradient,y),qnt(e,n,r.labels,y)]:(c=function(e,t){const n=Rnt(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),f=[Hnt(e,n,r,y,att(c.columns))],d.size=function(e,t,n){const r=att(krt("size",e,n)),i=att(krt("strokeWidth",e,n)),o=att(function(e,t,n){return Mnt("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,gnt));return n7e(`max(ceil(sqrt(${r})+${i}),${o})`,t)}(e,t,f[0].marks)),f=[Dnt({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:f,layout:c,interactive:s})],m.title&&f.push(function(e,t,n,r){const i=Rnt(e,t),o={enter:{opacity:Tnt},update:{opacity:Cnt,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Tnt}};return Eet(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:Qnt},angle:{signal:Xnt},align:{signal:Znt},baseline:{signal:Jnt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),jnt({type:Nnt,role:"legend-title",style:ynt,from:r,encode:o},n)}(e,n,r.title,g)),xrt(Dnt({role:"legend",from:g,encode:ket(Srt(i,e,n),o,knt),marks:f,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:l}),t)}function Srt(e,t,n){const r={enter:{},update:{}};return Eet(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function krt(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Mnt(e,n[0].encode)}yrt.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Zet(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new yrt(e,o,i,r,a)},yrt.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=vrt(t);let a,s,l;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&brt(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Zet(r.output)},n&&n.field&&brt(e,l,n),s=e.add(ytt(l)),a=e.add(wtt({pulse:Zet(s)})),a={agg:s,ref:Zet(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef(){return Zet(this.values)},extentRef(e,t){return wrt(e,this,"extent","extent",t,!1)},domainRef(e,t){return wrt(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return wrt(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return wrt(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return wrt(e,this,"indata","tupleindex",t,!0,!0)}};const Trt=`item.orient==="${lnt}"?-90:item.orient==="${unt}"?90:0`;function Crt(e,t){const n=Rnt(e=OPe(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,l=[],u=Zet(t.add(wtt(null,[{}])));return l.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Eet(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jnt({type:Nnt,role:Net,style:vnt,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||gPe({name:e.name,interactive:e.interactive,style:e.style},t)}(e),u)),e.subtitle&&l.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Eet(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),jnt({type:Nnt,role:Det,style:bnt,from:r,encode:a},n)}(e,n,r.subtitle,u)),xrt(Dnt({role:"title",from:u,encode:Art(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function Art(e,t){const n={enter:{},update:{}};return Eet(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Fnt},angle:{signal:Trt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),ket(n,t,knt)}function Irt(e,t){const n=[];e.transform&&e.transform.forEach(e=>{n.push(ort(e,t))}),e.on&&e.on.forEach(n=>{_rt(n,t,e.name)}),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,l,u=null,c=!1,d=!1;e.values?rtt(e.values)||itt(e.format)?(r.push(Nrt(t,e)),r.push(u=Ort())):r.push(u=Ort({$ingest:e.values,$format:e.format})):e.url?itt(e.url)||itt(e.format)?(r.push(Nrt(t,e)),r.push(u=Ort())):r.push(u=Ort({$request:e.url,$format:e.format})):e.source&&(u=i=aPe(e.source).map(e=>Zet(t.getData(e).output)),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],l=s.metadata,u||l.source||r.push(u=Ort()),r.push(s),l.generates&&(d=!0),l.modifies&&!d&&(c=!0),l.source?u=s:l.changes&&(u=null);i&&(a=i.length-1,r[0]=jtt({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,Ort()));u||r.push(Ort());return r.push(ztt({})),r}(e,t,n))}function Ort(e){const t=wtt({},e);return t.metadata={source:!0},t}function Nrt(e,t){return Itt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Drt=e=>e===cnt||e===snt,Rrt=(e,t,n)=>rtt(e)?Brt(e.signal,t,n):e===lnt||e===snt?t:n,Mrt=(e,t,n)=>rtt(e)?Lrt(e.signal,t,n):Drt(e)?t:n,Prt=(e,t,n)=>rtt(e)?jrt(e.signal,t,n):Drt(e)?n:t,Frt=(e,t,n)=>rtt(e)?$rt(e.signal,t,n):e===snt?{value:t}:{value:n},Lrt=(e,t,n)=>Urt(`${e} === '${snt}' || ${e} === '${cnt}'`,t,n),jrt=(e,t,n)=>Urt(`${e} !== '${snt}' && ${e} !== '${cnt}'`,t,n),Brt=(e,t,n)=>Hrt(`${e} === '${lnt}' || ${e} === '${snt}'`,t,n),$rt=(e,t,n)=>Hrt(`${e} === '${snt}'`,t,n),zrt=(e,t,n)=>Hrt(`${e} === '${unt}'`,t,n),Urt=(e,t,n)=>(t=null!=t?_et(t):t,n=null!=n?_et(n):n,qrt(t)&&qrt(n)?{signal:`${e} ? (${t=t?t.signal||jPe(t.value):null}) : (${n=n?n.signal||jPe(n.value):null})`}:[gPe({test:e},t)].concat(n||[])),qrt=e=>null==e||1===Object.keys(e).length,Hrt=(e,t,n)=>({signal:`${e} ? (${Wrt(t)}) : (${Wrt(n)})`}),Vrt=(e,t,n,r,i)=>({signal:(null!=r?`${e} === '${lnt}' ? (${Wrt(r)}) : `:"")+(null!=n?`${e} === '${cnt}' ? (${Wrt(n)}) : `:"")+(null!=i?`${e} === '${unt}' ? (${Wrt(i)}) : `:"")+(null!=t?`${e} === '${snt}' ? (${Wrt(t)}) : `:"")+"(null)"}),Wrt=e=>rtt(e)?e.signal:null==e?null:jPe(e),Grt=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Yrt(e,t,n,r){let i;if(t&&bPe(t,e))return t[e];if(bPe(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[ynt][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[gnt][i]}return null}function Krt(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function Zrt(e,t){return{scale:e.scale,range:t}}function Qrt(e,t,n,r,i){const o=Rnt(e,t),a=e.orient,s=e.gridScale,l=Rrt(a,1,-1),u=function(e,t){if(1===t);else if(FMe(e)){let n=e=gPe({},e);for(;null!=n.mult;){if(!FMe(n.mult))return n.mult=rtt(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n=n.mult=gPe({},n.mult)}n.mult=t}else e=rtt(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);return e}(e.offset,l);let c,d,f;const p={enter:c={opacity:Tnt},update:f={opacity:Cnt},exit:d={opacity:Tnt}};Eet(p,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const h={scale:e.scale,field:mnt,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=Mrt(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},y=s?{scale:s,range:1,mult:l,offset:u}:gPe(m,{mult:l,offset:u});return c.x=f.x=Mrt(a,h,g),c.y=f.y=Prt(a,h,g),c.x2=f.x2=Prt(a,y),c.y2=f.y2=Mrt(a,y),d.x=Mrt(a,h),d.y=Prt(a,h),jnt({type:Ont,role:"axis-grid",key:mnt,from:r,encode:p},n)}function Xrt(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Jrt(e,t,n,r,i,o){const a=Rnt(e,t),s=e.orient,l=e.scale,u=Rrt(s,-1,1),c=att(a("labelFlush")),d=att(a("labelFlushOffset")),f=a("labelAlign"),p=a("labelBaseline");let h,m=0===c||!!c;const g=_et(i);g.mult=u,g.offset=_et(a("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:mnt,band:.5,offset:Lnt(o.offset,a("labelOffset"))},v=Mrt(s,m?Xrt(l,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>rtt(e)?zrt(e.signal,t,n):e===unt?{value:t}:{value:n})(s,"left","right")),b=Mrt(s,Frt(s,"bottom","top"),m?Xrt(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=Xrt(l,c,`-(${d})`,d,0);m=m&&d;const _={opacity:Tnt,x:Mrt(s,y,g),y:Prt(s,y,g)},x={enter:_,update:h={opacity:Cnt,text:{field:pnt},x:_.x,y:_.y,align:v,baseline:b},exit:{opacity:Tnt,x:_.x,y:_.y}};Eet(x,{dx:!f&&m?Mrt(s,w):null,dy:!p&&m?Prt(s,w):null}),Eet(x,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:f,baseline:p});const E=a("labelBound");let S=a("labelOverlap");return S=S||E?{separation:a("labelSeparation"),method:S,order:"datum.index",bound:E?{scale:l,orient:s,tolerance:E}:null}:void 0,h.align!==v&&(h.align=Grt(h.align,v)),h.baseline!==b&&(h.baseline=Grt(h.baseline,b)),jnt({type:Nnt,role:"axis-label",style:gnt,key:mnt,from:r,encode:x,overlap:S},n)}function eit(e,t,n,r){const i=Rnt(e,t),o=e.orient,a=Rrt(o,-1,1);let s,l;const u={enter:s={opacity:Tnt,anchor:_et(i("titleAnchor",null)),align:{signal:Fnt}},update:l=gPe({},s,{opacity:Cnt,text:_et(e.title)}),exit:{opacity:Tnt}},c={signal:`lerp(range("${e.scale}"), ${Pnt(0,1,.5)})`};return l.x=Mrt(o,c),l.y=Prt(o,c),s.angle=Mrt(o,Tnt,((e,t)=>0===t?0:rtt(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t})(a,90)),s.baseline=Mrt(o,Frt(o,cnt,snt),{value:cnt}),l.angle=s.angle,l.baseline=s.baseline,Eet(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=Grt(_et(e),n.update[t]),!1):!Tet(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?_et(a):Mrt(t,_et(a),_et(o))}(i,o,u,n),u.update.align=Grt(u.update.align,s.align),u.update.angle=Grt(u.update.angle,s.angle),u.update.baseline=Grt(u.update.baseline,s.baseline),jnt({type:Nnt,role:"axis-title",style:ynt,from:r,encode:u},n)}function tit(e,t){const n=function(e,t){var n,r,i,o=t.config,a=o.style,s=o.axis,l="band"===t.scaleType(e.scale)&&o.axisBand,u=e.orient;if(rtt(u)){const e=Krt([o.axisX,o.axisY]),t=Krt([o.axisTop,o.axisBottom,o.axisLeft,o.axisRight]);for(i of(n={},e))n[i]=Mrt(u,Yrt(i,o.axisX,s,a),Yrt(i,o.axisY,s,a));for(i of(r={},t))r[i]=Vrt(u.signal,Yrt(i,o.axisTop,s,a),Yrt(i,o.axisBottom,s,a),Yrt(i,o.axisLeft,s,a),Yrt(i,o.axisRight,s,a))}else n=u===snt||u===cnt?o.axisX:o.axisY,r=o["axis"+u[0].toUpperCase()+u.slice(1)];return n||r||l?gPe({},s,n,r,l):s}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,l=Rnt(e,n),u=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},FMe(i)||(i={signal:`(${t.signal}) === 'extent' ? 0 : ${i}`})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=e.title},d=Zet(t.add(wtt({},[c]))),f=Zet(t.add(vtt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),p=[];let h;return c.grid&&p.push(Qrt(e,n,r.grid,f,u)),c.ticks&&(h=l("tickSize"),p.push(function(e,t,n,r,i,o){const a=Rnt(e,t),s=e.orient,l=Rrt(s,-1,1);let u,c,d;const f={enter:u={opacity:Tnt},update:d={opacity:Cnt},exit:c={opacity:Tnt}};Eet(f,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const p=_et(i);p.mult=l;const h={scale:e.scale,field:mnt,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=Mrt(s,Tnt,h),d.y2=u.y2=Mrt(s,p),c.x=Mrt(s,h),d.x=u.x=Prt(s,Tnt,h),d.x2=u.x2=Prt(s,p),c.y=Prt(s,h),jnt({type:Ont,role:"axis-tick",key:mnt,from:r,encode:f},n)}(e,n,r.ticks,f,h,u))),c.labels&&(h=c.ticks?h:0,p.push(Jrt(e,n,r.labels,f,h,u))),c.domain&&p.push(function(e,t,n,r){const i=Rnt(e,t),o=e.orient;let a,s;const l={enter:a={opacity:Tnt},update:s={opacity:Cnt},exit:{opacity:Tnt}};Eet(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Zrt(e,0),c=Zrt(e,1);return a.x=s.x=Mrt(o,u,Tnt),a.x2=s.x2=Mrt(o,c),a.y=s.y=Prt(o,u,Tnt),a.y2=s.y2=Prt(o,c),jnt({type:Ont,role:"axis-domain",from:r,encode:l},n)}(e,n,r.domain,d)),c.title&&p.push(eit(e,n,r.title,d)),xrt(Dnt({role:"axis",from:d,encode:ket(nit(l,e),i,knt),marks:p,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function nit(e,t){const n={enter:{},update:{}};return Eet(n,{orient:e("orient"),offset:e("offset")||0,position:ott(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function rit(e,t,n){const r=aPe(e.signals),i=aPe(e.scales);return n||r.forEach(e=>Wet(e,t)),aPe(e.projections).forEach(e=>function(e,t){const n=t.config.projection||{},r={};for(const i in e)"name"!==i&&(r[i]=ant(e[i],i,t));for(const i in n)null==r[i]&&(r[i]=ant(n[i],i,t));t.addProjection(e.name,r)}(e,t)),i.forEach(e=>function(e,t){const n=e.type||"linear";FHe(n)||SMe("Unrecognized scale type: "+jPe(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t)),aPe(e.data).forEach(e=>Irt(e,t)),i.forEach(e=>Gtt(e,t)),(n||r).forEach(e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?SMe("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=n7e(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(e=>htt(e,t,n.id))}(e,t)),aPe(e.axes).forEach(e=>tit(e,t)),aPe(e.marks).forEach(e=>xrt(e,t)),aPe(e.legends).forEach(e=>Ert(e,t)),e.title&&Crt(e.title,t),t.parseLambdas(),t}function iit(e,t){const n=t.config,r=Zet(t.root=t.add(Ket())),i=function(e,t){const n=n=>ott(e[n],t[n]),r=[oit("background",n("background")),oit("autosize",vet(n("autosize"))),oit("padding",wet(n("padding"))),oit("width",n("width")||0),oit("height",n("height")||0)],i=r.reduce((e,t)=>(e[t.name]=t,e),{}),o={};return aPe(e.signals).forEach(e=>{bPe(i,e.name)?e=gPe(i[e.name],e):r.push(e),o[e.name]=e}),aPe(t.signals).forEach(e=>{bPe(o,e.name)||bPe(i,e.name)||r.push(e)}),r}(e,n);i.forEach(e=>Wet(e,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(wtt()),a=t.add(Ett($et((e=>ket({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),Ant,Aet,e.style,t,{pulse:Zet(o)}))),s=t.add(qtt({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Zet(a)}));t.operators.pop(),t.pushState(Zet(a),Zet(s),null),rit(e,t,i),t.operators.push(s);let l=t.add(btt({mark:r,pulse:Zet(s)}));return l=t.add(Btt({pulse:Zet(l)})),l=t.add(ztt({pulse:Zet(l)})),t.addData("root",new yrt(t,o,o,l)),t}function oit(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function ait(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function sit(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function lit(e){return(PMe(e)?uit:cit)(e)}function uit(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(FMe(t)?t.signal||lit(t):jPe(t))}return n+"]"}function cit(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+jPe(t)+":"+(FMe(n)?n.signal||lit(n):jPe(n));return r+"}"}ait.prototype=sit.prototype={parse(e){return rit(e,this)},fork(){return new sit(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Get?Zet(e):e;return this.add(Ltt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Zet(this.add(ztt({pulse:e})))),this._parent.push(t),this._lookup.push(n?Zet(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return zMe(this._parent)},encode(){return zMe(this._encode)},lookup(){return zMe(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(OPe(e))return Qet(e,t);e.signal||SMe("Unsupported field reference: "+jPe(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=Zet(this.add(Ttt(e)))}return r},compareRef(e){let t=!1;const n=e=>rtt(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=aPe(e.field).map(n),i=aPe(e.order).map(n);return t?Zet(this.add(_tt({fields:r,orders:i}))):Jet(r,i)},keyRef(e,t){let n=!1;const r=this.signals;return e=aPe(e).map(e=>rtt(e)?(n=!0,Zet(r[e.signal])):e),n?Zet(this.add(Ctt({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef(e){if(!e)return e;const t=ett(e.op,e.field),n=e.order||"ascending";return n.signal?Zet(this.add(_tt({fields:t,orders:this.signalRef(n.signal)}))):Jet(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return bPe(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&SMe("Duplicate signal name: "+jPe(e));const n=t instanceof Get?t:this.add(Ket(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||SMe("Unrecognized signal name: "+jPe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Zet(this.signals[e]):(bPe(this.lambdas,e)||(this.lambdas[e]=this.add(Ket(null))),Zet(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=n7e(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return e&&FMe(e)?this.signalRef(e.signal||lit(e)):e},exprRef(e,t){const n={expr:n7e(e,this)};return t&&(n.expr.$name=t),Zet(this.add(Stt(n)))},addBinding(e,t){this.bindings||SMe("Nested signals do not support binding: "+jPe(e)),this.bindings.push(gPe({signal:e},t))},addScaleProj(e,t){bPe(this.scales,e)&&SMe("Duplicate scale or projection name: "+jPe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,$tt(t))},addProjection(e,t){this.addScaleProj(e,Ftt(t))},getScale(e){return this.scales[e]||SMe("Unrecognized scale name: "+jPe(e)),this.scales[e]},scaleRef(e){return Zet(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return bPe(this.data,e)&&SMe("Duplicate data set name: "+jPe(e)),this.data[e]=t},getData(e){return this.data[e]||SMe("Undefined data set name: "+jPe(e)),this.data[e]},addDataPipeline(e,t){return bPe(this.data,e)&&SMe("Duplicate data set name: "+jPe(e)),this.addData(e,yrt.fromEntries(this,t))}};gPe(Lje,ize,EQe,eXe,V2e,q3e,A5e,a5e,R5e,p6e,C6e,F6e);const dit=Object.freeze(Object.defineProperty({__proto__:null,Bounds:_We,CanvasHandler:nKe,CanvasRenderer:uKe,DATE:rFe,DAY:iFe,DAYOFYEAR:oFe,Dataflow:Mje,Debug:4,Error:1,EventStream:bje,Gradient:kVe,GroupItem:EWe,HOURS:aFe,Handler:RYe,HybridHandler:XKe,HybridRenderer:QKe,Info:3,Item:xWe,MILLISECONDS:uFe,MINUTES:sFe,MONTH:tFe,Marks:yYe,MultiPulse:Ije,None:0,Operator:gje,Parameters:pje,Pulse:kje,QUARTER:eFe,RenderType:nZe,Renderer:PYe,ResourceLoader:SWe,SECONDS:lFe,SVGHandler:dKe,SVGRenderer:FKe,SVGStringRenderer:KKe,Scenegraph:kYe,TIME_UNITS:cFe,Transform:Fje,View:net,WEEK:nFe,Warn:2,YEAR:JPe,accessor:vMe,accessorFields:wMe,accessorName:bMe,array:aPe,ascending:cPe,bandwidthNRD:qje,bin:Hje,bootstrapCI:Wje,boundClip:cZe,boundContext:VWe,boundItem:vYe,boundMark:wYe,boundStroke:CWe,changeset:dje,clampRange:sPe,codegenExpression:n9e,compare:uPe,constant:hPe,cumulativeLogNormal:oBe,cumulativeNormal:Jje,cumulativeUniform:dBe,dayofyear:yFe,debounce:mPe,defaultLocale:xLe,definition:jje,densityLogNormal:iBe,densityNormal:Xje,densityUniform:cBe,domChild:IYe,domClear:OYe,domCreate:CYe,domFind:AYe,dotbin:Gje,error:SMe,expressionFunction:t7e,extend:gPe,extent:yPe,extentIndex:vPe,falsy:DMe,fastmap:_Pe,field:TMe,flush:xPe,font:uYe,fontFamily:lYe,fontSize:rYe,format:VLe,formatLocale:hLe,formats:WLe,hasOwnProperty:bPe,id:CMe,identity:AMe,inferType:jLe,inferTypes:BLe,ingest:oje,inherits:EPe,inrange:SPe,interpolate:KHe,interpolateColors:WHe,interpolateRange:VHe,intersect:oZe,intersectBoxLine:nGe,intersectPath:XWe,intersectPoint:JWe,intersectRule:tGe,isArray:PMe,isBoolean:kPe,isDate:TPe,isFunction:lPe,isIterable:CPe,isNumber:APe,isObject:FMe,isRegExp:IPe,isString:OPe,isTuple:nje,key:NPe,lerp:DPe,lineHeight:iYe,loader:KLe,locale:_Le,logger:MMe,lruCache:RPe,markup:AKe,merge:MPe,mergeConfig:jMe,multiLineOffset:aYe,one:OMe,pad:FPe,panLinear:KMe,panLog:ZMe,panPow:QMe,panSymlog:XMe,parse:function(e,t,n){return FMe(e)||SMe("Input Vega specification must be an object."),iit(e,new ait(t=jMe(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()},parseExpression:J8e,parseSelector:het,path:Sze,pathCurves:CVe,pathEqual:fZe,pathParse:RVe,pathRectangle:rWe,pathRender:HVe,pathSymbols:YVe,pathTrail:iWe,peek:zMe,point:DYe,projection:p2e,quantileLogNormal:aBe,quantileNormal:eBe,quantileUniform:fBe,quantiles:zje,quantizeInterpolator:GHe,quarter:iPe,quartiles:Uje,get random(){return Vje},randomInteger:function(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min(e){return arguments.length?(n=e||0,i=r-n,o):n},max(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:()=>n+Math.floor(i*Vje()),pdf:e=>e===Math.floor(e)&&e>=n&&e<r?1/i:0,cdf(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:e=>e>=0&&e<=1?n-1+Math.floor(e*i):NaN};return o.min(e).max(t)},randomKDE:nBe,randomLCG:function(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}},randomLogNormal:sBe,randomMixture:lBe,randomNormal:tBe,randomUniform:pBe,read:YLe,regressionConstant:hBe,regressionExp:_Be,regressionLinear:bBe,regressionLoess:TBe,regressionLog:wBe,regressionPoly:SBe,regressionPow:xBe,regressionQuad:EBe,renderModule:iZe,repeat:PPe,resetDefaultLocale:function(){return fLe(),yLe(),xLe()},resetSVGClipId:bWe,resetSVGDefIds:function(){bWe(),wVe=0},responseType:GLe,runtimeContext:d7e,sampleCurve:OBe,sampleLogNormal:rBe,sampleNormal:Qje,sampleUniform:uBe,scale:PHe,sceneEqual:dZe,sceneFromJSON:EYe,scenePickVisit:pGe,sceneToJSON:xYe,sceneVisit:fGe,sceneZOrder:dGe,scheme:JHe,serializeXML:IKe,setHybridRendererOptions:function(e){ZKe.svgMarkTypes=e.svgMarkTypes??["text"],ZKe.svgOnTop=e.svgOnTop??!0,ZKe.debug=e.debug??!1},setRandom:function(e){Vje=e},span:LPe,splitAccessPath:kMe,stringValue:jPe,textMetrics:QGe,timeBin:sLe,timeFloor:RFe,timeFormatLocale:bLe,timeInterval:BFe,timeOffset:UFe,timeSequence:VFe,timeUnitSpecifier:hFe,timeUnits:fFe,toBoolean:BPe,toDate:zPe,toNumber:UMe,toSet:qPe,toString:UPe,transform:Bje,transforms:Lje,truncate:HPe,truthy:NMe,tupleid:rje,typeParsers:PLe,utcFloor:FFe,utcInterval:$Fe,utcOffset:qFe,utcSequence:WFe,utcdayofyear:EFe,utcquarter:oPe,utcweek:SFe,version:"5.33.0",visitArray:VPe,week:vFe,writeConfig:BMe,zero:IMe,zoomLinear:ePe,zoomLog:tPe,zoomPow:nPe,zoomSymlog:rPe},Symbol.toStringTag,{value:"Module"})),fit="5.23.0";function pit(e){return sot(e,"or")}function hit(e){return sot(e,"and")}function mit(e){return sot(e,"not")}function git(e,t){if(mit(e))git(e.not,t);else if(hit(e))for(const n of e.and)git(n,t);else if(pit(e))for(const n of e.or)git(n,t);else t(e)}function yit(e,t){return mit(e)?{not:yit(e.not,t)}:hit(e)?{and:e.and.map(e=>yit(e,t))}:pit(e)?{or:e.or.map(e=>yit(e,t))}:t(e)}const vit=structuredClone;function bit(e){throw new Error(e)}function wit(e,t){const n={};for(const r of t)bPe(e,r)&&(n[r]=e[r]);return n}function _it(e,t){const n={...e};for(const r of t)delete n[r];return n}function xit(e){if(APe(e))return e;const t=OPe(e)?e:aot(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){n=(n<<5)-n+t.charCodeAt(r),n&=n}return n}function Eit(e){return!1===e||null===e}function Sit(e,t){return e.includes(t)}function kit(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Tit(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function Cit(e,...t){for(const n of t)Ait(e,n??{});return e}function Ait(e,t){for(const n of Pit(t))BMe(e,n,t[n],!0)}function Iit(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function Oit(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Nit(e,t){for(const n of e)if(t.has(n))return!0;return!1}function Dit(e){const t=new Set;for(const n of e){const e=kMe(n).map((e,t)=>0===t?e:`[${e}]`),r=e.map((t,n)=>e.slice(0,n+1).join(""));for(const n of r)t.add(n)}return t}function Rit(e,t){return void 0===e||void 0===t||Nit(Dit(e),Dit(t))}function Mit(e){return 0===Pit(e).length}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>aot(e)).join(",")})`};const Pit=Object.keys,Fit=Object.values,Lit=Object.entries;function jit(e){return!0===e||!1===e}function Bit(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function $it(e,t){return mit(e)?`!(${$it(e.not,t)})`:hit(e)?`(${e.and.map(e=>$it(e,t)).join(") && (")})`:pit(e)?`(${e.or.map(e=>$it(e,t)).join(") || (")})`:t(e)}function zit(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&zit(e[n],t)&&delete e[n],Mit(e)}function Uit(e){return e.charAt(0).toUpperCase()+e.substr(1)}function qit(e,t="datum"){const n=kMe(e),r=[];for(let i=1;i<=n.length;i++){const e=`[${n.slice(0,i).map(jPe).join("][")}]`;r.push(`${t}${e}`)}return r.join(" && ")}function Hit(e,t="datum"){return`${t}[${jPe(kMe(e).join("."))}]`}function Vit(e){return`datum['${e.replaceAll("'","\\'")}']`}function Wit(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Git(e){return`${kMe(e).map(Wit).join("\\.")}`}function Yit(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Kit(e){return`${kMe(e).join(".")}`}function Zit(e){return e?kMe(e).length:0}function Qit(...e){return e.find(e=>void 0!==e)}let Xit=42;function Jit(e){const t=++Xit;return e?String(e)+t:t}function eot(e){return tot(e)?e:`__${e}`}function tot(e){return e.startsWith("__")}function not(e){if(void 0!==e)return(e%360+360)%360}function rot(e){return!!APe(e)||!isNaN(e)&&!isNaN(parseFloat(e))}const iot=Object.getPrototypeOf(structuredClone({}));function oot(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;0!==r--;)if(!oot(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;for(const n of e.entries())if(!oot(n[1],t.get(n[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;0!==r--;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==iot.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==iot.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;0!==r--;){const n=i[r];if(!oot(e[n],t[n]))return!1}return!0}return e!=e&&t!=t}function aot(e){const t=[];return function e(n){if(n&&n.toJSON&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===n)return;if("number"==typeof n)return isFinite(n)?""+n:"null";if("object"!=typeof n)return JSON.stringify(n);let r,i;if(Array.isArray(n)){for(i="[",r=0;r<n.length;r++)r&&(i+=","),i+=e(n[r])||"null";return i+"]"}if(null===n)return"null";if(t.includes(n))throw new TypeError("Converting circular structure to JSON");const o=t.push(n)-1,a=Object.keys(n).sort();for(i="",r=0;r<a.length;r++){const t=a[r],o=e(n[t]);o&&(i&&(i+=","),i+=JSON.stringify(t)+":"+o)}return t.splice(o,1),`{${i}}`}(e)}function sot(e,t){return FMe(e)&&bPe(e,t)&&void 0!==e[t]}const lot="row",uot="column",cot="facet",dot="x",fot="y",pot="x2",hot="y2",mot="xOffset",got="yOffset",yot="radius",vot="radius2",bot="theta",wot="theta2",_ot="latitude",xot="longitude",Eot="latitude2",Sot="longitude2",kot="time",Tot="color",Cot="fill",Aot="stroke",Iot="shape",Oot="size",Not="angle",Dot="opacity",Rot="fillOpacity",Mot="strokeOpacity",Pot="strokeWidth",Fot="strokeDash",Lot="text",jot="order",Bot="detail",$ot="key",zot="tooltip",Uot="href",qot="url",Hot="description",Vot={theta:1,theta2:1,radius:1,radius2:1};function Wot(e){return bPe(Vot,e)}const Got={longitude:1,longitude2:1,latitude:1,latitude2:1};function Yot(e){switch(e){case _ot:return"y";case Eot:return"y2";case xot:return"x";case Sot:return"x2"}}function Kot(e){return bPe(Got,e)}const Zot=Pit(Got),Qot={x:1,y:1,x2:1,y2:1,...Vot,...Got,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Xot(e){return e===Tot||e===Cot||e===Aot}const Jot={row:1,column:1,facet:1},eat=Pit(Jot),tat={...Qot,...Jot},nat=Pit(tat),{order:rat,detail:iat,tooltip:oat,...aat}=tat,{row:sat,column:lat,facet:uat,...cat}=aat;function dat(e){return bPe(cat,e)}function fat(e){return bPe(tat,e)}const pat=[pot,hot,Eot,Sot,wot,vot];function hat(e){return mat(e)!==e}function mat(e){switch(e){case pot:return dot;case hot:return fot;case Eot:return _ot;case Sot:return xot;case wot:return bot;case vot:return yot}return e}function gat(e){if(Wot(e))switch(e){case bot:return"startAngle";case wot:return"endAngle";case yot:return"outerRadius";case vot:return"innerRadius"}return e}function yat(e){switch(e){case dot:return pot;case fot:return hot;case _ot:return Eot;case xot:return Sot;case bot:return wot;case yot:return vot}}function vat(e){switch(e){case dot:case pot:return"width";case fot:case hot:return"height"}}function bat(e){switch(e){case dot:return"xOffset";case fot:return"yOffset";case pot:return"x2Offset";case hot:return"y2Offset";case bot:return"thetaOffset";case yot:return"radiusOffset";case wot:return"theta2Offset";case vot:return"radius2Offset"}}function wat(e){switch(e){case dot:return"xOffset";case fot:return"yOffset"}}function _at(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const xat=Pit(Qot),{x:Eat,y:Sat,x2:kat,y2:Tat,xOffset:Cat,yOffset:Aat,latitude:Iat,longitude:Oat,latitude2:Nat,longitude2:Dat,theta:Rat,theta2:Mat,radius:Pat,radius2:Fat,...Lat}=Qot,jat=Pit(Lat),Bat={x:1,y:1},$at=Pit(Bat);function zat(e){return bPe(Bat,e)}const Uat={theta:1,radius:1},qat=Pit(Uat);function Hat(e){return"width"===e?dot:fot}const Vat={xOffset:1,yOffset:1};function Wat(e){return bPe(Vat,e)}const Gat={time:1};function Yat(e){return e in Gat}const{text:Kat,tooltip:Zat,href:Qat,url:Xat,description:Jat,detail:est,key:tst,order:nst,...rst}=Lat,ist=Pit(rst);const ost={...Bat,...Uat,...Vat,...rst},ast=Pit(ost);function sst(e){return bPe(ost,e)}function lst(e,t){return function(e){switch(e){case Tot:case Cot:case Aot:case Hot:case Bot:case $ot:case zot:case Uot:case jot:case Dot:case Rot:case Mot:case Pot:case cot:case lot:case uot:return ust;case dot:case fot:case mot:case got:case _ot:case xot:case kot:return dst;case pot:case hot:case Eot:case Sot:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Oot:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Fot:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Iot:return{point:"always",geoshape:"always"};case Lot:return{text:"always"};case Not:return{point:"always",square:"always",text:"always"};case qot:return{image:"always"};case bot:case yot:return{text:"always",arc:"always"};case wot:case vot:return{arc:"always"}}}(e)[t]}const ust={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:cst,...dst}=ust;function fst(e){switch(e){case dot:case fot:case bot:case yot:case mot:case got:case Oot:case Not:case Pot:case Dot:case Rot:case Mot:case kot:case pot:case hot:case wot:case vot:return;case cot:case lot:case uot:case Iot:case Fot:case Lot:case zot:case Uot:case qot:case Hot:return"discrete";case Tot:case Cot:case Aot:return"flexible";case _ot:case xot:case Eot:case Sot:case Bot:case $ot:case jot:return}}const pst={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},hst={count:1,min:1,max:1};function mst(e){return sot(e,"argmin")}function gst(e){return sot(e,"argmax")}function yst(e){return OPe(e)&&bPe(pst,e)}const vst=new Set(["count","valid","missing","distinct"]);function bst(e){return OPe(e)&&vst.has(e)}const wst=new Set(["count","sum","distinct","valid","missing"]),_st=new Set(["mean","average","median","q1","q3","min","max"]);function xst(e){return kPe(e)&&(e=Hdt(e,void 0)),"bin"+Pit(e).map(t=>Tst(e[t])?Bit(`_${t}_${Lit(e[t])}`):Bit(`_${t}_${e[t]}`)).join("")}function Est(e){return!0===e||kst(e)&&!e.binned}function Sst(e){return"binned"===e||kst(e)&&!0===e.binned}function kst(e){return FMe(e)}function Tst(e){return sot(e,"param")}function Cst(e){switch(e){case lot:case uot:case Oot:case Tot:case Cot:case Aot:case Pot:case Dot:case Rot:case Mot:case Iot:return 6;case Fot:return 4;default:return 10}}function Ast(e){return sot(e,"expr")}function Ist(e,{level:t}={level:0}){const n=Pit(e||{}),r={};for(const i of n)r[i]=0===t?Bst(e[i]):Ist(e[i],{level:t-1});return r}function Ost(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:p,subtitlePadding:h,...m}=e,g={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...void 0!==o?{angle:o}:{},...void 0!==a?{limit:a}:{}},y={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...p?{subtitleLineHeight:p}:{},...h?{subtitlePadding:h}:{}};return{titleMarkConfig:{...m,...s?{fill:s}:{}},subtitleMarkConfig:wit(e,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:g,subtitle:y}}function Nst(e){return OPe(e)||PMe(e)&&OPe(e[0])}function Dst(e){return sot(e,"signal")}function Rst(e){return sot(e,"step")}function Mst(e){return!PMe(e)&&(sot(e,"field")&&sot(e,"data"))}const Pst=Pit({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),Fst={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Lst=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function jst(e){const t=PMe(e.condition)?e.condition.map($st):$st(e.condition);return{...Bst(e),condition:t}}function Bst(e){if(Ast(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function $st(e){if(Ast(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function zst(e){if(Ast(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Dst(e)?e:void 0!==e?{value:e}:void 0}function Ust(e){return Dst(e)?e.signal:jPe(e.value)}function qst(e){return Dst(e)?e.signal:null==e?null:jPe(e)}function Hst(e,t,n){for(const r of n){const n=Gst(r,t.markDef,t.config);void 0!==n&&(e[r]=zst(n))}return e}function Vst(e){return[].concat(e.type,e.style??[])}function Wst(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&sot(t,i)?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?Gst(e,t,n,r):void 0}function Gst(e,t,n,{vgChannel:r}={}){const i=Yst(e,t,n.style);return Qit(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function Yst(e,t,n){return Kst(e,Vst(t),n)}function Kst(e,t,n){let r;t=aPe(t);for(const i of t){const t=n[i];sot(t,e)&&(r=t[e])}return r}function Zst(e,t){return aPe(e).reduce((e,n)=>(e.field.push(Odt(n,t)),e.order.push(n.sort??"ascending"),e),{field:[],order:[]})}function Qst(e,t){const n=[...e];return t.forEach(e=>{for(const t of n)if(oot(t,e))return;n.push(e)}),n}function Xst(e,t){return oot(e,t)||!t?e:e?[...aPe(e),...aPe(t)].join(", "):t}function Jst(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((Nst(n)||Dst(n))&&(Nst(r)||Dst(r)))return{explicit:e.explicit,value:Xst(n,r)};if(Nst(n)||Dst(n))return{explicit:e.explicit,value:n};if(Nst(r)||Dst(r))return{explicit:e.explicit,value:r};if(!(Nst(n)||Dst(n)||Nst(r)||Dst(r)))return{explicit:e.explicit,value:Qst(n,r)};throw new Error("It should never reach here")}function elt(e){return`Invalid specification ${aot(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const tlt='Autosize "fit" only works for single views and layered views.';function nlt(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function rlt(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function ilt(e){return e?`Dropping "fit-${e}" because spec has discrete ${vat(e)}.`:'Dropping "fit" because spec has discrete size.'}function olt(e){return`Unknown field for ${e}. Cannot calculate view size.`}function alt(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function slt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function llt(e){return`Selection not supported for ${e} yet.`}const ult="The same selection must be used to override scale domains in a layered view.";function clt(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const dlt="Animation involving facet, layer, or concat is currently unsupported.";function flt(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}function plt(e){return`Ignoring an invalid transform: ${aot(e)}.`}function hlt(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function mlt(e){return`${e}Offset dropped because ${e} is continuous`}function glt(e){return`Invalid field type "${e}".`}function ylt(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function vlt(e,t){return`Dropping ${aot(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}function blt(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function wlt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function _lt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function xlt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Elt(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function Slt(e){return`Using unaggregated domain with raw field has no effect (${aot(e)}).`}function klt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Tlt(e){return`Unaggregated domain is currently unsupported for log scale (${aot(e)}).`}function Clt(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Alt(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}const Ilt="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function Olt(e,t){return`Invalid ${e}: ${aot(t)}.`}function Nlt(e){return`1D error band does not support ${e}.`}function Dlt(e){return`Channel ${e} is required for "binned" bin.`}const Rlt=MMe(2);let Mlt=Rlt;function Plt(...e){Mlt.error(...e)}function Flt(...e){Mlt.warn(...e)}function Llt(e){if(e&&FMe(e))for(const t of Vlt)if(sot(e,t))return!0;return!1}const jlt=["january","february","march","april","may","june","july","august","september","october","november","december"],Blt=jlt.map(e=>e.substr(0,3)),$lt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],zlt=$lt.map(e=>e.substr(0,3));function Ult(e,t){const n=[];if(t&&void 0!==e.day&&Pit(e).length>1&&(Flt(function(e){return`Dropping day from datetime ${aot(e)} as day cannot be combined with other units.`}(e)),delete(e=vit(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(rot(e)&&(e=+e),APe(e))return e-1;{const t=e.toLowerCase(),n=jlt.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=Blt.indexOf(r);if(-1!==i)return i;throw new Error(Olt("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(rot(e)&&(e=+e),APe(e))return e>4&&Flt(Olt("quarter",e)),e-1;throw new Error(Olt("quarter",e))}(e.quarter):e.quarter;n.push(APe(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(rot(e)&&(e=+e),APe(e))return e%7;{const t=e.toLowerCase(),n=$lt.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=zlt.indexOf(r);if(-1!==i)return i;throw new Error(Olt("day",e))}}(e.day):e.day;n.push(APe(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const t=e[r];n.push(void 0===t?0:t)}return n}function qlt(e){const t=Ult(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const Hlt={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Vlt=Pit(Hlt);function Wlt(e){return FMe(e)?e.binned:Glt(e)}function Glt(e){return e&&e.startsWith("binned")}function Ylt(e){return e.startsWith("utc")}const Klt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Zlt(e){return Vlt.filter(t=>Xlt(e,t))}function Qlt(e){const t=Zlt(e);return t[t.length-1]}function Xlt(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function Jlt(e,t,{end:n}={end:!1}){const r=qit(t),i=Ylt(e)?"utc":"";function o(e){return"quarter"===e?`(${i}quarter(${r})-1)`:`${i}${e}(${r})`}let a;const s={};for(const l of Vlt)Xlt(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),function(e){const t=Ult(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(s)}function eut(e){if(!e)return;return`timeUnitSpecifier(${aot(Zlt(e))}, ${aot(Klt)})`}function tut(e){if(!e)return;let t;return OPe(e)?t=Glt(e)?{unit:e.substring(6),binned:!0}:{unit:e}:FMe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Ylt(t.unit)&&(t.utc=!0,t.unit=function(e){return e.substring(3)}(t.unit)),t}function nut(e,t=e=>e){const n=tut(e),r=Qlt(n.unit);if(r&&"day"!==r){const e={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:i,part:o}=iut(r,n.step);return`${t(qlt({...e,[o]:+e[o]+i}))} - ${t(qlt(e))}`}}const rut={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function iut(e,t=1){if(function(e){return bPe(rut,e)}(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:3*t};case"week":return{part:"date",step:7*t}}}function out(e){return!!(null==e?void 0:e.field)&&void 0!==e.equal}function aut(e){return!!(null==e?void 0:e.field)&&void 0!==e.lt}function sut(e){return!!(null==e?void 0:e.field)&&void 0!==e.lte}function lut(e){return!!(null==e?void 0:e.field)&&void 0!==e.gt}function uut(e){return!!(null==e?void 0:e.field)&&void 0!==e.gte}function cut(e){if(null==e?void 0:e.field){if(PMe(e.range)&&2===e.range.length)return!0;if(Dst(e.range))return!0}return!1}function dut(e){return!!(null==e?void 0:e.field)&&(PMe(e.oneOf)||PMe(e.in))}function fut(e){return dut(e)||out(e)||cut(e)||aut(e)||lut(e)||sut(e)||uut(e)}function put(e,t){return Gdt(e,{timeUnit:t,wrapTime:!0})}function hut(e,t=!0){const{field:n}=e,r=tut(e.timeUnit),{unit:i,binned:o}=r||{},a=Odt(e,{expr:"datum"}),s=i?`time(${o?a:Jlt(i,n)})`:a;if(out(e))return`${s}===${put(e.equal,i)}`;if(aut(e)){return`${s}<${put(e.lt,i)}`}if(lut(e)){return`${s}>${put(e.gt,i)}`}if(sut(e)){return`${s}<=${put(e.lte,i)}`}if(uut(e)){return`${s}>=${put(e.gte,i)}`}if(dut(e))return`indexof([${(l=e.oneOf,u=i,l.map(e=>put(e,u))).join(",")}], ${s}) !== -1`;if(function(e){return!!(null==e?void 0:e.field)&&void 0!==e.valid}(e))return mut(s,e.valid);if(cut(e)){const{range:n}=Ist(e),r=Dst(n)?{signal:`${n.signal}[0]`}:n[0],o=Dst(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==r&&null!==o&&t)return"inrange("+s+", ["+put(r,i)+", "+put(o,i)+"])";const a=[];return null!==r&&a.push(`${s} >= ${put(r,i)}`),null!==o&&a.push(`${s} <= ${put(o,i)}`),a.length>0?a.join(" && "):"true"}var l,u;throw new Error(`Invalid field predicate: ${aot(e)}`)}function mut(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function gut(e){return fut(e)&&e.timeUnit?{...e,timeUnit:tut(e.timeUnit)}:e}function yut(e){return"quantitative"===e||"temporal"===e}function vut(e){return"ordinal"===e||"nominal"===e}const but="quantitative",wut="ordinal",_ut="temporal",xut="nominal",Eut="geojson";const Sut="linear",kut="log",Tut="pow",Cut="sqrt",Aut="time",Iut="utc",Out="point",Nut="band",Dut={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Rut(e,t){const n=Dut[e],r=Dut[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const Mut={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Put(e){return Mut[e]}const Fut=new Set(["linear","log","pow","sqrt","symlog"]),Lut=new Set([...Fut,"time","utc"]);function jut(e){return Fut.has(e)}const But=new Set(["quantile","quantize","threshold"]),$ut=new Set([...Lut,...But,"sequential","identity"]),zut=new Set(["ordinal","bin-ordinal","point","band"]);function Uut(e){return zut.has(e)}function qut(e){return $ut.has(e)}function Hut(e){return Lut.has(e)}function Vut(e){return But.has(e)}function Wut(e){return sot(e,"param")}const{type:Gut,domain:Yut,range:Kut,rangeMax:Zut,rangeMin:Qut,scheme:Xut,...Jut}={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},ect=Pit(Jut);function tct(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Hut(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Hut(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Hut(e);case"nice":return Hut(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return qut(e)&&!Sit(["log","time","utc","threshold","quantile"],e)}}function nct(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Xot(e)?void 0:`Cannot use the scale property "${t}" with non-color channel.`;case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const rct={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},ict=rct.arc,oct=rct.area,act=rct.bar,sct=rct.image,lct=rct.line,uct=rct.point,cct=rct.rect,dct=rct.rule,fct=rct.text,pct=rct.tick,hct=rct.trail,mct=rct.circle,gct=rct.square,yct=rct.geoshape;function vct(e){return["line","area","trail"].includes(e)}function bct(e){return["rect","bar","image","arc","tick"].includes(e)}const wct=new Set(Pit(rct));function _ct(e){return sot(e,"type")}const xct=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Ect=Pit({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Sct=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],kct={area:["line","point"],bar:Sct,rect:Sct,line:["point"],tick:["bandSize","thickness",...Sct]},Tct=Pit({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Cct(e){return sot(e,"band")}const Act={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Ict={binSpacing:0,continuousBandSize:5,minBandSize:.25,timeUnitBandPosition:.5},Oct={...Ict,binSpacing:1},Nct={...Ict,thickness:1};function Dct(e,{isPath:t}){return void 0===e||"break-paths-show-path-domains"===e?t?"break-paths-show-domains":"filter":null===e?"show":e}function Rct({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var o,a;if(!r||!qut(r)||i)return"always-valid";const s=Dct(Wst("invalid",e,t),{isPath:vct(e.type)});return void 0!==(null==(a=null==(o=t.scale)?void 0:o.invalid)?void 0:a[n])?"show":s}function Mct({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,a=t.domainHasZero();if("definitely"===a)return{scale:e,value:0};if("maybe"===a){return{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${"zeroOrMin"===n?i:o})`}}return{signal:`scale('${e}', ${"zeroOrMin"===n?i:o})`}}function Pct({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){var a;const s=null==n?void 0:n.get("type"),l=Bdt(t),u=Rct({scaleChannel:e,markDef:i,config:o,scaleType:s,isCountAggregate:bst(null==l?void 0:l.aggregate)});if(l&&"show"===u){const t=(null==(a=o.scale.invalid)?void 0:a[e])??"zero-or-min";return{test:mut(Odt(l,{expr:"datum"}),!1),...Fct(t,n,r)}}}function Fct(e,t,n){if(FMe(r=e)&&"value"in r){const{value:t}=e;return Dst(t)?{signal:t.signal}:{value:t}}var r;return Mct({scale:t,scaleName:n,mode:"zeroOrMin"})}function Lct(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:a}=e,s=mat(t),l=$ct(e),u=Pct({scaleChannel:s,channelDef:n,scale:i,scaleName:o,markDef:r,config:a});return void 0!==u?[u,l]:l}function jct(e,t,n,r){const i={};if(t&&(i.scale=t),vdt(e)){const{datum:t}=e;Llt(t)?i.signal=qlt(t):Dst(t)?i.signal=t.signal:Ast(t)?i.signal=t.expr:i.value=t}else i.field=Odt(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function Bct({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){const s=!Dst(a)&&0<a&&a<1?"datum":void 0,l=Odt(t,{expr:s,suffix:i}),u=void 0!==n?Odt(n,{expr:s}):Odt(t,{suffix:o,expr:s}),c={};if(0===a||1===a){c.scale=e;const t=0===a?l:u;c.field=t}else{const t=Dst(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${u}`:`${1-a} * ${l} + ${a} * ${u}`;c.signal=`scale("${e}", ${t})`}return r&&(c.offset=r),c}function $ct({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:c}){if(t){if(xdt(t)){const u=null==a?void 0:a.get("type");if(Edt(t)){c??(c=udt({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:d,type:f}=t;if(Est(a)||c&&d&&f===_ut)return(null==s?void 0:s.impute)?jct(t,o,{binSuffix:"mid"},{offset:l}):c&&!Uut(u)?Bct({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:l}):jct(t,o,Kdt(t,e)?{binSuffix:"range"}:{},{offset:l});if(Sst(a)){if(gdt(n))return Bct({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});Flt(Dlt(e===dot?pot:hot))}}return jct(t,o,Uut(u)?{binSuffix:"range"}:{},{offset:l,band:"band"===u?c??t.bandPosition??.5:void 0})}if(Sdt(t)){const n=l?{offset:l}:{};return{...zct(e,t.value),...n}}}return lPe(u)&&(u=u()),u?{...u,...l?{offset:l}:{}}:u}function zct(e,t){return Sit(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:Sit(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:zst(t)}function Uct(e){return e&&"number"!==e&&"time"!==e}function qct(e,t,n){return`${e}(${t}${n?`, ${aot(n)}`:""})`}function Hct({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){var a,s;if(Uct(n))return Wct({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const l=Vct(e,r,i),u=ydt(e);if(void 0===t&&void 0===n&&o.customFormatTypes){if("quantitative"===u){if(i&&o.normalizedNumberFormatType)return Wct({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return Wct({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if("temporal"===u&&o.timeFormatType&&gdt(e)&&void 0===e.timeUnit)return Wct({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}if(Wdt(e)){const n=function({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:`${o?"utc":"time"}Format(${e}, '${n=OPe(n)?n:i}')`:function(e,t,n){if(!e)return;const r=eut(e);return`${n||Ylt(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,o)}({field:l,timeUnit:gdt(e)?null==(a=tut(e.timeUnit))?void 0:a.unit:void 0,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:kdt(e)&&(null==(s=e.scale)?void 0:s.type)===Iut});return n?{signal:n}:void 0}if(t=Kct({type:u,specifiedFormat:t,config:o,normalizeStack:i}),gdt(e)&&Est(e.bin)){return{signal:Xct(l,Odt(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===ydt(e)?{signal:`${Zct(l,t)}`}:{signal:`isValid(${l}) ? ${l} : ""+${l}`}}function Vct(e,t,n){return gdt(e)?n?`${Odt(e,{expr:t,suffix:"end"})}-${Odt(e,{expr:t,suffix:"start"})}`:Odt(e,{expr:t}):function(e){const{datum:t}=e;return Llt(t)?qlt(t):`${aot(t)}`}(e)}function Wct({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=Vct(e,r,i)),"datum.value"!==a&&gdt(e)&&Est(e.bin)){return{signal:Xct(a,Odt(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:qct(n,a,t)}}function Gct(e,t,n,r,i,o){var a;if(!OPe(r)||!Uct(r)){if(void 0===n&&void 0===r&&i.customFormatTypes&&"quantitative"===ydt(e)){if(i.normalizedNumberFormatType&&Tdt(e)&&"normalize"===e.stack)return;if(i.numberFormatType)return}if(Tdt(e)&&"normalize"===e.stack&&i.normalizedNumberFormat)return Kct({type:"quantitative",config:i,normalizeStack:!0});if(Wdt(e)){const t=gdt(e)?null==(a=tut(e.timeUnit))?void 0:a.unit:void 0;if(void 0===t&&i.customFormatTypes&&i.timeFormatType)return;return function({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){if(e)return e;if(t)return{signal:eut(t)};return r?void 0:n.timeFormat}({specifiedFormat:n,timeUnit:t,config:i,omitTimeFormatConfig:o})}return Kct({type:t,specifiedFormat:n,config:i})}}function Yct(e,t,n){var r;return e&&(Dst(e)||"number"===e||"time"===e)?e:Wdt(t)&&"time"!==n&&"utc"!==n?gdt(t)&&(null==(r=tut(null==t?void 0:t.timeUnit))?void 0:r.utc)?"utc":"time":void 0}function Kct({type:e,specifiedFormat:t,config:n,normalizeStack:r}){return OPe(t)?t:e===but?r?n.normalizedNumberFormat:n.numberFormat:void 0}function Zct(e,t){return`format(${e}, "${t||""}")`}function Qct(e,t,n,r){return Uct(n)?qct(n,e,t):Zct(e,(OPe(t)?t:void 0)??r.numberFormat)}function Xct(e,t,n,r,i){if(void 0===n&&void 0===r&&i.customFormatTypes&&i.numberFormatType)return Xct(e,t,i.numberFormat,i.numberFormatType,i);const o=Qct(e,n,r,i),a=Qct(t,n,r,i);return`${mut(e,!1)} ? "null" : ${o} + " – " + ${a}`}const Jct="min",edt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function tdt(e){return bPe(edt,e)}function ndt(e){return e&&("count"===e.op||sot(e,"field"))}function rdt(e){return e&&PMe(e)}function idt(e){return sot(e,"row")||sot(e,"column")}function odt(e){return sot(e,"header")}function adt(e){return sot(e,"facet")}function sdt(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function ldt(e){return sot(e,"sort")}function udt({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(xdt(e)&&void 0!==e.bandPosition)return e.bandPosition;if(gdt(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return Gst("timeUnitBandPosition",n,r);if(Est(o))return.5}}function cdt({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){var s,l,u;const c=vat(e),d=Wst(a?"size":c,r,i,{vgChannel:c});if(void 0!==d)return d;if(gdt(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:Gst("timeUnitBandSize",r,i)};if(Est(a)&&!Uut(o))return{band:1}}return bct(r.type)?o?Uut(o)?(null==(s=i[r.type])?void 0:s.discreteBandSize)||{band:1}:null==(l=i[r.type])?void 0:l.continuousBandSize:null==(u=i[r.type])?void 0:u.discreteBandSize:void 0}function ddt(e,t,n,r){return!!(Est(e.bin)||e.timeUnit&&Edt(e)&&"temporal"===e.type)&&void 0!==udt({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function fdt(e){return sot(e,"sort")&&!sot(e,"field")}function pdt(e){return sot(e,"condition")}function hdt(e){const t=null==e?void 0:e.condition;return!!t&&!PMe(t)&&gdt(t)}function mdt(e){const t=null==e?void 0:e.condition;return!!t&&!PMe(t)&&xdt(t)}function gdt(e){return sot(e,"field")||"count"===(null==e?void 0:e.aggregate)}function ydt(e){return null==e?void 0:e.type}function vdt(e){return sot(e,"datum")}function bdt(e){return Edt(e)&&!Ndt(e)||_dt(e)}function wdt(e){return Edt(e)&&"quantitative"===e.type&&!e.bin||_dt(e)}function _dt(e){return vdt(e)&&APe(e.datum)}function xdt(e){return gdt(e)||vdt(e)}function Edt(e){return e&&(sot(e,"field")||"count"===e.aggregate)&&sot(e,"type")}function Sdt(e){return sot(e,"value")}function kdt(e){return sot(e,"scale")||sot(e,"sort")}function Tdt(e){return sot(e,"axis")||sot(e,"stack")||sot(e,"impute")}function Cdt(e){return sot(e,"legend")}function Adt(e){return sot(e,"format")||sot(e,"formatType")}function Idt(e){return _it(e,["legend","axis","header","scale"])}function Odt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=eot("count");else{let r;if(!t.nofn)if(function(e){return sot(e,"op")}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:l}=e;Est(a)?(r=xst(a),i=(t.binSuffix??"")+(t.suffix??"")):s?gst(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):mst(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):l&&!Wlt(l)&&(r=function(e){const{utc:t,...n}=tut(e);return n.unit?(t?"utc":"")+Pit(n).map(e=>Bit(`${"unit"===e?"":`_${e}_`}${n[e]}`)).join(""):(t?"utc":"")+"timeunit"+Pit(n).map(e=>Bit(`_${e}_${n[e]}`)).join("")}(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?Kit(n):t.expr?Hit(n,t.expr)+o:Git(n)+o}function Ndt(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gdt(e)&&!!e.bin;case"temporal":return!1}throw new Error(glt(e.type))}const Ddt=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(gst(t))return`${i} for argmax(${t.argmax})`;if(mst(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Wlt(r)?tut(r):void 0,a=t||(null==o?void 0:o.unit)||(null==o?void 0:o.maxbins)&&"timeunit"||Est(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){var n;const{field:r,bin:i,timeUnit:o,aggregate:a}=e;if("count"===a)return t.countTitle;if(Est(i))return`${r} (binned)`;if(o&&!Wlt(o)){const e=null==(n=tut(o))?void 0:n.unit;if(e)return`${r} (${Zlt(e).join("-")})`}else if(a)return gst(a)?`${r} for max ${a.argmax}`:mst(a)?`${r} for min ${a.argmin}`:`${Uit(a)} of ${r}`;return r}(e,t)}};let Rdt=Ddt;function Mdt(e){Rdt=e}function Pdt(e,t,{allowDisabling:n,includeDefault:r=!0}){var i;const o=null==(i=Fdt(e))?void 0:i.title;if(!gdt(e))return o??e.title;const a=e,s=r?Ldt(a,t):void 0;return n?Qit(o,a.title,s):o??a.title??s}function Fdt(e){return Tdt(e)&&e.axis?e.axis:Cdt(e)&&e.legend?e.legend:odt(e)&&e.header?e.header:void 0}function Ldt(e,t){return Rdt(e,t)}function jdt(e){if(Adt(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Fdt(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Bdt(e){return gdt(e)?e:hdt(e)?e.condition:void 0}function $dt(e){return xdt(e)?e:mdt(e)?e.condition:void 0}function zdt(e,t,n,r={}){if(OPe(e)||APe(e)||kPe(e)){return Flt(function(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${aot(n)}}.`}(t,OPe(e)?"string":APe(e)?"number":"boolean",e)),{value:e}}return xdt(e)?Udt(e,t,n,r):mdt(e)?{...e,condition:Udt(e.condition,t,n,r)}:e}function Udt(e,t,n,r){if(Adt(e)){const{format:i,formatType:o,...a}=e;if(Uct(o)&&!n.customFormatTypes)return Flt(hlt(t)),Udt(a,t,n,r)}else{const i=Tdt(e)?"axis":Cdt(e)?"legend":odt(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(Uct(a)&&!n.customFormatTypes)return Flt(hlt(t)),Udt({...e,[i]:s},t,n,r)}}return gdt(e)?qdt(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=APe(n)?"quantitative":OPe(n)?"nominal":Llt(n)?"temporal":void 0,{...e,type:t}}(e)}function qdt(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||yst(r)||gst(r)||mst(r)||(Flt(function(e){return`Invalid aggregation operator "${e}".`}(r)),delete s.aggregate),i&&(s.timeUnit=tut(i)),a&&(s.field=`${a}`),Est(o)&&(s.bin=Hdt(o,t)),Sst(o)&&!zat(t)&&Flt(function(e){return`Channel ${e} should not be used with "binned" bin.`}(t)),Edt(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case but:return"quantitative";case"t":case _ut:return"temporal";case"o":case wut:return"ordinal";case"n":case xut:return"nominal";case Eut:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&bst(r)&&(Flt(function(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}(e,r)),s.type="quantitative")}else if(!hat(t)){const e=function(e,t){var n;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ldt(e)&&PMe(e.sort))return"ordinal";const{aggregate:r,bin:i,timeUnit:o}=e;if(o)return"temporal";if(i||r&&!gst(r)&&!mst(r))return"quantitative";if(kdt(e)&&(null==(n=e.scale)?void 0:n.type))switch(Dut[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(Edt(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case lot:case uot:case cot:return Ndt(e)?Vdt:{compatible:!1,warning:_lt(t)};case dot:case fot:case mot:case got:case Tot:case Cot:case Aot:case Lot:case Bot:case $ot:case zot:case Uot:case qot:case Not:case bot:case yot:case Hot:return Vdt;case xot:case Sot:case _ot:case Eot:return n!==but?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Vdt;case Dot:case Rot:case Mot:case Pot:case Oot:case wot:case vot:case pot:case hot:case kot:return"nominal"!==n||e.sort?Vdt:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case Iot:case Fot:return Ndt(e)||kdt(r=e)&&Vut(null==(i=r.scale)?void 0:i.type)?Vdt:{compatible:!1,warning:xlt(t)};case jot:return"nominal"!==e.type||"sort"in e?Vdt:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r,i}(s,t)||{};!1===e&&Flt(n)}if(ldt(s)&&OPe(s.sort)){const{sort:e}=s;if(tdt(e))return{...s,sort:{encoding:e}};const t=e.substring(1);if("-"===e.charAt(0)&&tdt(t))return{...s,sort:{encoding:t,order:"descending"}}}if(odt(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function Hdt(e,t){return kPe(e)?{maxbins:Cst(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Cst(t)}}const Vdt={compatible:!0};function Wdt(e){const{formatType:t}=jdt(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||gdt(n)&&!!n.timeUnit));var n}function Gdt(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var o;const a=t&&(null==(o=tut(t))?void 0:o.unit);let s,l=a||"temporal"===n;return Ast(e)?s=e.expr:Dst(e)?s=e.signal:Llt(e)?(l=!0,s=qlt(e)):(OPe(e)||APe(e))&&l&&(s=`datetime(${aot(e)})`,function(e){return bPe(Hlt,e)}(a)&&(APe(e)&&e<1e4||OPe(e)&&isNaN(Date.parse(e)))&&(s=qlt({[a]:e}))),s?r&&l?`time(${s})`:s:i?void 0:aot(e)}function Ydt(e,t){const{type:n}=e;return t.map(t=>{const r=Gdt(t,{timeUnit:gdt(e)&&!Wlt(e.timeUnit)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t})}function Kdt(e,t){return!!Est(e.bin)&&(sst(t)&&["ordinal","nominal"].includes(e.type))}const Zdt={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Qdt(e){return null==e?void 0:e.condition}const Xdt=["domain","grid","labels","ticks","title"],Jdt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},eft={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},tft={...eft,style:1,labelExpr:1,encoding:1};function nft(e){return bPe(tft,e)}const rft=Pit({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function ift(e){return sot(e,"mark")}class oft{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!ift(e)&&(_ct(t=e.mark)?t.type:t)===this.name;var t}}function aft(e,t){const n=e&&e[t];return!!n&&(PMe(n)?kit(n,e=>!!e.field):gdt(n)||hdt(n))}function sft(e,t){const n=e&&e[t];return!!n&&(PMe(n)?kit(n,e=>!!e.field):gdt(n)||vdt(n)||mdt(n))}function lft(e,t){if(zat(t)){const n=e[t];if((gdt(n)||vdt(n))&&(vut(n.type)||gdt(n)&&n.timeUnit)){return sft(e,wat(t))}}return!1}function uft(e){return kit(nat,t=>{if(aft(e,t)){const n=e[t];if(PMe(n))return kit(n,e=>!!e.aggregate);{const e=Bdt(n);return e&&!!e.aggregate}}return!1})}function cft(e,t){const n=[],r=[],i=[],o=[],a={};return pft(e,(s,l)=>{if(gdt(s)){const{field:u,aggregate:c,bin:d,timeUnit:f,...p}=s;if(c||f||d){const e=Fdt(s),h=null==e?void 0:e.title;let m=Odt(s,{forAs:!0});const g={...h?[]:{title:Pdt(s,t,{allowDisabling:!0})},...p,field:m};if(c){let e;if(gst(c)?(e="argmax",m=Odt({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${u}`):mst(c)?(e="argmin",m=Odt({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};u&&(t.field=u),o.push(t)}}else if(n.push(m),Edt(s)&&Est(d)){if(r.push({bin:d,field:u,as:m}),n.push(Odt(s,{binSuffix:"end"})),Kdt(s,l)&&n.push(Odt(s,{binSuffix:"range"})),zat(l)){const e={field:`${m}_end`};a[`${l}2`]=e}g.bin="binned",hat(l)||(g.type=but)}else if(f&&!Wlt(f)){i.push({timeUnit:f,field:u,as:m});const e=Edt(s)&&s.type!==_ut&&"time";e&&(l===Lot||l===zot?g.formatType=e:!function(e){return bPe(Lat,e)}(l)?zat(l)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[l]=g}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function dft(e,t,n){const r=lst(t,n);if(!r)return!1;if("binned"===r){const n=e[t===pot?dot:fot];return!!(gdt(n)&&gdt(e[t])&&Sst(n.bin))}return!0}function fft(e,t){const n={};for(const r of Pit(e)){const i=zdt(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function pft(e,t,n){if(e)for(const r of Pit(e)){const i=e[r];if(PMe(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function hft(e,t){return Pit(t).reduce((n,r)=>{switch(r){case dot:case fot:case Uot:case Hot:case qot:case pot:case hot:case mot:case got:case bot:case wot:case yot:case vot:case kot:case _ot:case xot:case Eot:case Sot:case Lot:case Iot:case Not:case zot:return n;case jot:if("line"===e||"trail"===e)return n;case Bot:case $ot:{const e=t[r];if(PMe(e)||gdt(e))for(const t of aPe(e))t.aggregate||n.push(Odt(t,{}));return n}case Oot:if("trail"===e)return n;case Tot:case Cot:case Aot:case Dot:case Rot:case Mot:case Fot:case Pot:{const e=Bdt(t[r]);return e&&!e.aggregate&&n.push(Odt(e,{})),n}}},[])}function mft(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map(({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${gft(t)}`:"";return{field:e+t.field,type:t.type,title:Dst(n)?{signal:`${n}"${escape(i)}"`}:n+i}}),...Iit(function(e){const t=[];for(const n of Pit(e))if(aft(e,n)){const r=aPe(e[n]);for(const e of r)gdt(e)?t.push(e):hdt(e)&&t.push(e.condition)}return t}(n).map(Idt),xit)]}}function gft(e){const{title:t,field:n}=e;return Qit(t,n)}function yft(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:c,extraEncoding:d={}})=>{const f=gft(n);return vft(e,s,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...OPe(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function vft(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},..._ct(r.mark)?r.mark:{type:r.mark},style:`${s}-${String(t)}`,...kPe(e[t])?{}:e[t]}}]:[]}function bft(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:wft(o,n),continuousAxisChannelDef2:wft(a,n),continuousAxisChannelDefError:wft(s,n),continuousAxisChannelDefError2:wft(l,n),continuousAxis:i}}function wft(e,t){if(null==e?void 0:e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Flt(function(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}(n,t)),r}return e}function _ft(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(_ct(n)&&n.orient)return n.orient;if(bdt(i)){if(bdt(o)){const e=gdt(i)&&i.aggregate,n=gdt(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return Wdt(o)&&!Wdt(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(bdt(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const xft="boxplot",Eft=new oft(xft,kft);function Sft(e){return APe(e)?"tukey":e}function kft(e,{config:t}){e={...e,encoding:fft(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=_ct(n)?n:{type:n};i&&Flt(llt("boxplot"));const l=s.extent??t.boxplot.extent,u=Wst("size",s,t),c=s.invalid,d=Sft(l),{bins:f,timeUnits:p,transform:h,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:_,customTooltipWithoutAggregatedField:x}=function(e,t,n){const r=_ft(e,xft),{continuousAxisChannelDef:i,continuousAxis:o}=bft(e,r,xft),a=i.field,s=Kit(a),l=Sft(t),u=[...Tft(a),{op:"median",field:a,as:`mid_box_${s}`},{op:"min",field:a,as:("min-max"===l?"lower_whisker_":"min_")+s},{op:"max",field:a,as:("min-max"===l?"upper_whisker_":"max_")+s}],c="min-max"===l||"tukey"===l?[]:[{calculate:`${Vit(`upper_box_${s}`)} - ${Vit(`lower_box_${s}`)}`,as:`iqr_${s}`},{calculate:`min(${Vit(`upper_box_${s}`)} + ${Vit(`iqr_${s}`)} * ${t}, ${Vit(`max_${s}`)})`,as:`upper_whisker_${s}`},{calculate:`max(${Vit(`lower_box_${s}`)} - ${Vit(`iqr_${s}`)} * ${t}, ${Vit(`min_${s}`)})`,as:`lower_whisker_${s}`}],{[o]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:p,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(PMe(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return PMe(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=cft(h,n),w="vertical"===r?"horizontal":"vertical",_=r,x=[...m,...g,{aggregate:[...y,...u],groupby:v},...c];return{bins:m,timeUnits:g,transform:x,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:_,customTooltipWithoutAggregatedField:p}}(e,l,t),E=Kit(m.field),{color:S,size:k,...T}=b,C=e=>yft(s,g,m,e,t.boxplot),A=C(T),I=C(b),O=(FMe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",N=C({...T,...k?{size:k}:{},color:{condition:{test:`${Vit(`lower_box_${m.field}`)} >= ${Vit(`upper_box_${m.field}`)}`,...S||{value:O}}}}),D=mft([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),R={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},M="min-max"===d?D:mft([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),P=[...A({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:M}),...A({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:M}),...A({partName:"ticks",mark:R,positionPrefix:"lower_whisker",extraEncoding:M}),...A({partName:"ticks",mark:R,positionPrefix:"upper_whisker",extraEncoding:M})],F=[..."tukey"!==d?P:[],...I({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:_,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...N({partName:"median",mark:{type:"tick",invalid:c,...FMe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if("min-max"===d)return{...a,transform:(a.transform??[]).concat(h),layer:F};const L=Vit(`lower_box_${m.field}`),j=Vit(`upper_box_${m.field}`),B=`(${j} - ${L})`,$=`${L} - ${l} * ${B}`,z=`${j} + ${l} * ${B}`,U=Vit(m.field),q={joinaggregate:Tft(m.field),groupby:y},H={transform:[{filter:`(${$} <= ${U}) && (${U} <= ${z})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${E}`},{op:"max",field:m.field,as:`upper_whisker_${E}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${E}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${E}`},...v],groupby:y}],layer:P},{tooltip:V,...W}=T,{scale:G,axis:Y}=m,K=gft(m),Z=_it(Y,["title"]),Q=vft(s,"outliers",t.boxplot,{transform:[{filter:`(${U} < ${$}) || (${U} > ${z})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...void 0!==K?{title:K}:{},...void 0!==G?{scale:G}:{},...Mit(Z)?{}:{axis:Z}},...W,...S?{color:S}:{},...x?{tooltip:x}:{}}})[0];let X;const J=[...f,...p,q];return Q?X={transform:J,layer:[Q,H]}:(X=H,X.transform.unshift(...J)),{...a,layer:[X,{transform:h,layer:F}]}}function Tft(e){const t=Kit(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}const Cft="errorbar",Aft=new oft(Cft,Ift);function Ift(e,{config:t}){e={...e,encoding:fft(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=Nft(e,Cft,t);delete o.size;const c=yft(s,i,r,o,t.errorbar),d=s.thickness,f=s.size,p={type:"tick",orient:a,aria:!1,...void 0!==d?{thickness:d}:{},...void 0!==f?{size:f}:{}},h=[...c({partName:"ticks",mark:p,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:p,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==d?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...h.length>1?{layer:h}:{...h[0]}}}function Oft(e,t){const{encoding:n}=e;if(function(e){return(xdt(e.x)||xdt(e.y))&&!xdt(e.x2)&&!xdt(e.y2)&&!xdt(e.xError)&&!xdt(e.xError2)&&!xdt(e.yError)&&!xdt(e.yError2)}(n))return{orient:_ft(e,t),inputType:"raw"};const r=function(e){return xdt(e.x2)||xdt(e.y2)}(n),i=function(e){return xdt(e.xError)||xdt(e.xError2)||xdt(e.yError)||xdt(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(xdt(e)&&xdt(r))throw new Error(`${t} cannot have both x2 and y2`);if(xdt(e)){if(bdt(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(xdt(r)){if(bdt(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(xdt(r)&&!xdt(e))throw new Error(`${t} cannot have xError2 without xError`);if(xdt(s)&&!xdt(i))throw new Error(`${t} cannot have yError2 without yError`);if(xdt(e)&&xdt(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(xdt(e)){if(bdt(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(xdt(i)){if(bdt(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Nft(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,l=_ct(r)?r:{type:r};o&&Flt(llt(t));const{orient:u,inputType:c}=Oft(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:h,continuousAxis:m}=bft(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let l=[],u=[];const c=t.field;let d,f=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&Flt(function(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}(t,n,a)),"stderr"===n||"stdev"===n)l=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],u=[{calculate:`${Vit(`center_${c}`)} + ${Vit(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${Vit(`center_${c}`)} - ${Vit(`extent_${c}`)}`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:Uit(t)},{fieldPrefix:"upper_",titlePrefix:Dft(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:Dft(t,n,"-")}],f=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),l=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:Pdt({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Pdt({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Pdt({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Flt((p=e.center,`${(h=e.extent)?"extent ":""}${h&&p?"and ":""}${p?"center ":""}${h&&p?"are ":"is "}not needed when data are aggregated.`)),"aggregated-upper-lower"===o?(d=[],u=[{calculate:Vit(n.field),as:`upper_${c}`},{calculate:Vit(c),as:`lower_${c}`}]):"aggregated-error"===o&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`${Vit(c)} + ${Vit(r.field)}`,as:`upper_${c}`}],i?u.push({calculate:`${Vit(c)} + ${Vit(i.field)}`,as:`lower_${c}`}):u.push({calculate:`${Vit(c)} - ${Vit(r.field)}`,as:`lower_${c}`}));for(const e of u)d.push({fieldPrefix:e.as.substring(0,6),titlePrefix:Yit(Yit(e.calculate,"datum['",""),"']","")})}var p,h;return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}(l,d,f,p,h,c,t,n),{[m]:w,["x"===m?"x2":"y2"]:_,["x"===m?"xError":"yError"]:x,["x"===m?"xError2":"yError2"]:E,...S}=i,{bins:k,timeUnits:T,aggregate:C,groupby:A,encoding:I}=cft(S,n),O=[...C,...g],N="raw"!==c?[]:A,D=mft(v,d,I,b);return{transform:[...s.transform??[],...k,...T,...0===O.length?[]:[{aggregate:O,groupby:N}],...y],groupby:N,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:I,ticksOrient:"vertical"===u?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:D}}function Dft(e,t,n){return`${Uit(e)} ${n} ${t}`}const Rft="errorband",Mft=new oft(Rft,Pft);function Pft(e,{config:t}){e={...e,encoding:fft(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=Nft(e,Rft,t),u=a,c=yft(u,i,r,o,t.errorband),d=void 0!==e.encoding.x&&void 0!==e.encoding.y;let f={type:d?"area":"rect"},p={type:d?"line":"rule"};const h={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...h,ariaRoleDescription:"errorband"},p={...p,...h,aria:!1}):u.interpolate?Flt(Nlt("interpolate")):u.tension&&Flt(Nlt("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:p,positionPrefix:"upper",extraEncoding:l})]}}const Fft={};function Lft(e,t,n){const r=new oft(e,t);Fft[e]={normalizer:r,parts:n}}Lft(xft,kft,["box","median","outliers","rule","ticks"]),Lft(Cft,Ift,["ticks","rule"]),Lft(Rft,Pft,["band","borders"]);const jft=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Bft={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},$ft={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},zft=Pit(Bft),Uft=Pit($ft),qft=Pit({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Hft=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Vft="_vgsid_",Wft={point:{on:"click",fields:[Vft],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Gft(e){return"legend"===e||!!(null==e?void 0:e.legend)}function Yft(e){return Gft(e)&&FMe(e)}function Kft(e){return!!(null==e?void 0:e.select)}function Zft(e){const t=[];for(const n of e||[]){if(Kft(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function Qft(e){return sot(e,"concat")}function Xft(e){return sot(e,"vconcat")}function Jft(e){return sot(e,"hconcat")}function ept({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function tpt(e){return sot(e,"step")}function npt(e){return sot(e,"view")||sot(e,"width")||sot(e,"height")}const rpt=Pit({align:1,bounds:1,center:1,columns:1,spacing:1});function ipt(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function opt(e,t){const n=apt(e,t);return tpt(n)?n.step:spt}function apt(e,t){return Qit(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const spt=20,lpt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:spt},mark:{color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},arc:{},area:{},bar:Oct,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ict,rule:{color:"black"},square:{},text:{color:"black"},tick:Nct,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Wft,style:{},title:{},facet:{spacing:20},concat:{spacing:20},normalizedNumberFormat:".0%"},upt=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],cpt={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},dpt={blue:upt[0],orange:upt[1],red:upt[2],teal:upt[3],green:upt[4],yellow:upt[5],purple:upt[6],pink:upt[7],brown:upt[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function fpt(e){const t=Pit(e||{}),n={};for(const r of t){const t=e[r];n[r]=Qdt(t)?jst(t):Bst(t)}return n}const ppt=[...Tct,...rft,...qft,"background","padding","legend","lineBreak","scale","style","title","view"];function hpt(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,a=jMe({},vit(lpt),n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:FMe(e)?{...dpt,...e}:dpt}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:FMe(e)?{...cpt,...e}:cpt}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},o||{});i&&BMe(a,"selection",i,!0);const s=_it(a,ppt);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=Bst(a[l]));for(const l of Tct)a[l]&&(s[l]=Ist(a[l]));for(const l of rft)a[l]&&(s[l]=fpt(a[l]));for(const l of qft)a[l]&&(s[l]=Ist(a[l]));if(a.legend&&(s.legend=Ist(a.legend)),a.scale){const{invalid:e,...t}=a.scale,n=Ist(e,{level:1});s.scale={...Ist(t),...Pit(n).length>0?{invalid:n}:{}}}return a.style&&(s.style=function(e){const t=Pit(e),n={};for(const r of t)n[r]=fpt(e[r]);return n}(a.style)),a.title&&(s.title=Ist(a.title)),a.view&&(s.view=Ist(a.view)),s}const mpt=new Set(["view",...wct]),gpt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],ypt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...kct};function vpt(e){e=vit(e);for(const t of gpt)delete e[t];if(e.axis)for(const t in e.axis)Qdt(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of jft)delete e.legend[t];if(e.mark){for(const t of Ect)delete e.mark[t];e.mark.tooltip&&FMe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Zft(e.params)),delete e.params);for(const t of mpt){for(const r of Ect)delete e[t][r];const n=ypt[t];if(n)for(const r of n)delete e[t][r];bpt(e,t)}for(const t of Pit(Fft))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Ost(e.title);Mit(t)||(e.style["group-title"]={...e.style["group-title"],...t});Mit(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});Mit(r)?delete e.title:e.title=r}(e);for(const t in e)FMe(e[t])&&Mit(e[t])&&delete e[t];return Mit(e)?void 0:e}function bpt(e,t,n,r){"view"===t&&(n="cell");const i={...e[t],...e.style[n??t]};Mit(i)||(e.style[n??t]=i),delete e[t]}function wpt(e){return sot(e,"layer")}class _pt{map(e,t){return adt(e)?this.mapFacet(e,t):function(e){return sot(e,"repeat")}(e)?this.mapRepeat(e,t):Jft(e)?this.mapHConcat(e,t):Xft(e)?this.mapVConcat(e,t):Qft(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(wpt(e))return this.mapLayer(e,t);if(ift(e))return this.mapUnit(e,t);throw new Error(elt(e))}mapLayer(e,t){return{...e,layer:e.layer.map(e=>this.mapLayerOrUnit(e,t))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map(e=>this.map(e,t))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map(e=>this.map(e,t))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map(e=>this.map(e,t))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const xpt={zero:1,center:1,normalize:1};const Ept=new Set([ict,act,oct,dct,uct,mct,gct,lct,fct,pct]),Spt=new Set([act,oct,ict]);function kpt(e){return gdt(e)&&"quantitative"===ydt(e)&&!e.bin}function Tpt(e,t,{orient:n,type:r}){const i="x"===t?"y":"radius",o="x"===t&&["bar","area"].includes(r),a=e[t],s=e[i];if(gdt(a)&&gdt(s))if(kpt(a)&&kpt(s)){if(a.stack)return t;if(s.stack)return i;const e=gdt(a)&&!!a.aggregate;if(e!==(gdt(s)&&!!s.aggregate))return e?t:i;if(o){if("vertical"===n)return i;if("horizontal"===n)return t}}else{if(kpt(a))return t;if(kpt(s))return i}else{if(kpt(a)){if(o&&"vertical"===n)return;return t}if(kpt(s)){if(o&&"horizontal"===n)return;return i}}}function Cpt(e,t){var n,r;const i=_ct(e)?e:{type:e},o=i.type;if(!Ept.has(o))return null;const a=Tpt(t,"x",i)||Tpt(t,"theta",i);if(!a)return null;const s=t[a],l=gdt(s)?Odt(s,{}):void 0,u=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(a),c=[],d=new Set;if(t[u]){const e=t[u],n=gdt(e)?Odt(e,{}):void 0;n&&n!==l&&(c.push(u),d.add(n))}const f="x"===u?"xOffset":"yOffset",p=t[f],h=gdt(p)?Odt(p,{}):void 0;h&&h!==l&&(c.push(f),d.add(h));const m=jat.reduce((e,n)=>{if("tooltip"!==n&&aft(t,n)){const r=t[n];for(const t of aPe(r)){const r=Bdt(t);if(r.aggregate)continue;const i=Odt(r,{});i&&d.has(i)||e.push({channel:n,fieldDef:r})}}return e},[]);let g;return void 0!==s.stack?g=kPe(s.stack)?s.stack?"zero":null:s.stack:Spt.has(o)&&(g="zero"),g&&function(e){return bPe(xpt,e)}(g)?uft(t)&&0===m.length?null:((null==(n=null==s?void 0:s.scale)?void 0:n.type)&&(null==(r=null==s?void 0:s.scale)?void 0:r.type)!==Sut&&(null==s?void 0:s.stack)&&Flt(`Stack is applied to a non-linear scale (${s.scale.type}).`),xdt(t[yat(a)])?(void 0!==s.stack&&Flt(`Cannot stack "${y=a}" if there is already "${y}2".`),null):(gdt(s)&&s.aggregate&&!wst.has(s.aggregate)&&Flt(`Stacking is applied even though the aggregate function is non-summative ("${s.aggregate}").`),{groupbyChannels:c,groupbyFields:d,fieldChannel:a,impute:null!==s.impute&&vct(o),stackBy:m,offset:g})):null;var y}function Apt(e,t,n){const r=Ist(e),i=Wst("orient",r,n);if(r.orient=function(e,t,n){switch(e){case uct:case mct:case gct:case fct:case cct:case sct:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case act:if(gdt(r)&&(Sst(r.bin)||gdt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gdt(i)&&(Sst(i.bin)||gdt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(gdt(r)&&r.type===but&&!Est(r.bin)||_dt(r))&&gdt(i)&&Sst(i.bin)?"horizontal":"vertical";if(!a)return(gdt(i)&&i.type===but&&!Est(i.bin)||_dt(i))&&gdt(r)&&Sst(r.bin)?"vertical":"horizontal"}case dct:if(o&&(!gdt(r)||!Sst(r.bin))&&a&&(!gdt(i)||!Sst(i.bin)))return;case oct:if(a)return gdt(i)&&Sst(i.bin)?"horizontal":"vertical";if(o)return gdt(r)&&Sst(r.bin)?"vertical":"horizontal";if(e===dct){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case lct:case pct:{const t=wdt(r),o=wdt(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o)return"vertical";{const e=Edt(r)&&r.type===_ut,t=Edt(i)&&i.type===_ut;if(e&&!t)return"vertical";if(!e&&t)return"horizontal"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&Flt(`Specified orient "${r.orient}" overridden with "${i}".`),"bar"===r.type&&r.orient){const e=Wst("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:Act[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}const o=Wst("opacity",r,n),a=Wst("fillOpacity",r,n);void 0===o&&void 0===a&&(r.opacity=function(e,t){if(Sit([uct,pct,mct,gct],e)&&!uft(t))return.7;return}(r.type,t));return void 0===Wst("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||Wst("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function Ipt(e){const{point:t,line:n,...r}=e;return Pit(r).length>1?r:r.type}function Opt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:_it(e[t],["point","line"])});return e}function Npt(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?FMe(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?FMe(t.point)?t.point:{}:void 0}function Dpt(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class Rpt{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(ift(e)){const{mark:n,encoding:r}=e,i=_ct(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!Npt(i,t[i.type],r);case"area":return!!Npt(i,t[i.type],r)||!!Dpt(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,name:s,encoding:l,...u}=e,c=fft(l,r),d=_ct(a)?a:{type:a},f=Npt(d,r[d.type],c),p="area"===d.type&&Dpt(d,r[d.type]),h=[{name:s,...i?{params:i}:{},mark:Ipt({..."area"===d.type&&void 0===d.opacity&&void 0===d.fillOpacity?{opacity:.7}:{},...d}),encoding:_it(c,["shape"])}],m=Cpt(Apt(d,c,r),c);let g=c;if(m){const{fieldChannel:e,offset:t}=m;g={...c,[e]:{...c[e],...t?{stack:t}:{}}}}return g=_it(g,["y2","x2"]),p&&h.push({...o?{projection:o}:{},mark:{type:"line",...wit(d,["clip","interpolate","tension","tooltip"]),...p},encoding:g}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...wit(d,["clip","tooltip"]),...f},encoding:g}),n({...u,layer:h},{...t,config:Opt(r)})}}function Mpt(e,t){return t?idt(e)?$pt(e,t):Lpt(e,t):e}function Ppt(e,t){return t?$pt(e,t):e}function Fpt(e,t,n){const r=t[e];return!OPe(i=r)&&sot(i,"repeat")?r.repeat in n?{...t,[e]:n[r.repeat]}:void Flt(function(e){return`Unknown repeated value "${e}".`}(r.repeat)):t;var i}function Lpt(e,t){if(void 0!==(e=Fpt("field",e,t))){if(null===e)return null;if(ldt(e)&&ndt(e.sort)){const n=Fpt("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function jpt(e,t){if(gdt(e))return Lpt(e,t);{const n=Fpt("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function Bpt(e,t){if(!xdt(e)){if(mdt(e)){const n=jpt(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=jpt(e,t);if(n)return n;if(pdt(e))return{condition:e.condition}}}function $pt(e,t){const n={};for(const r in e)if(sot(e,r)){const i=e[r];if(PMe(i))n[r]=i.map(e=>Bpt(e,t)).filter(e=>e);else{const e=Bpt(i,t);void 0!==e&&(n[r]=e)}}return n}class zpt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(ift(e)){const{encoding:t,mark:n}=e;if("line"===n||_ct(n)&&"line"===n.type)for(const e of pat){const n=t[mat(e)];if(t[e]&&(gdt(n)&&!Sst(n.bin)||vdt(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;var o,a;return Flt((o=!!r.x2,a=!!r.y2,`Line mark is for continuous lines and thus cannot be used with ${o&&a?"x2 and y2":o?"x2":"y2"}. We will use the rule mark (line segments) instead.`)),n({...e,mark:FMe(i)?{...i,type:"rule"}:"rule"},t)}}function Upt({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Pit(e),...Pit(t)]);for(const o of i){const i=t[o],a=e[o];if(xdt(i)){const e={...a,...i};r[o]=e}else mdt(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||Sdt(a)||Dst(a)||xdt(a)||PMe(a))&&(r[o]=a)}}else r=t;return!r||Mit(r)?void 0:r}function qpt(e){const{parentProjection:t,projection:n}=e;return t&&n&&Flt(function(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${aot(t)} is overridden by a child projection ${aot(n)}.`}({parentProjection:t,projection:n})),n??t}function Hpt(e){return sot(e,"filter")}function Vpt(e){return sot(e,"stop")}function Wpt(e){return sot(e,"lookup")}function Gpt(e){return sot(e,"pivot")}function Ypt(e){return sot(e,"density")}function Kpt(e){return sot(e,"quantile")}function Zpt(e){return sot(e,"regression")}function Qpt(e){return sot(e,"loess")}function Xpt(e){return sot(e,"sample")}function Jpt(e){return sot(e,"window")}function eht(e){return sot(e,"joinaggregate")}function tht(e){return sot(e,"flatten")}function nht(e){return sot(e,"calculate")}function rht(e){return sot(e,"bin")}function iht(e){return sot(e,"impute")}function oht(e){return sot(e,"timeUnit")}function aht(e){return sot(e,"aggregate")}function sht(e){return sot(e,"stack")}function lht(e){return sot(e,"fold")}function uht(e){return sot(e,"extent")&&!sot(e,"density")&&!sot(e,"regression")}function cht(e,t){const{transform:n,...r}=e;if(n){const e=n.map(e=>{if(Hpt(e))return{filter:pht(e,t)};if(rht(e)&&kst(e.bin))return{...e,bin:fht(e.bin)};if(Wpt(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e});return{...r,transform:e}}return e}function dht(e,t){var n,r;const i=vit(e);if(gdt(i)&&kst(i.bin)&&(i.bin=fht(i.bin)),kdt(i)&&(null==(r=null==(n=i.scale)?void 0:n.domain)?void 0:r.selection)){const{selection:e,...t}=i.scale.domain;i.scale.domain={...t,...e?{param:e}:{}}}if(pdt(i))if(PMe(i.condition))i.condition=i.condition.map(e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:pht(e,t)}});else{const{selection:e,param:n,test:r,...o}=dht(i.condition,t);i.condition=n?i.condition:{...o,test:pht(i.condition,t)}}return i}function fht(e){const t=e.extent;if(null==t?void 0:t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function pht(e,t){const n=e=>yit(e,e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r});return e.selection?n(e.selection):yit(e.test||e.filter,e=>e.selection?n(e.selection):e)}class hht extends _pt{map(e,t){const n=t.selections??[];if(e.params&&!ift(e)){const t=[];for(const r of e.params)Kft(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,t)}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const o of n)if(o.views&&o.views.length)for(const t of o.views)(OPe(t)&&(t===e.name||r.includes(t))||PMe(t)&&t.map(e=>r.indexOf(e)).every((e,t,n)=>-1!==e&&(0===t||e>n[t-1])))&&i.push(o);else i.push(o);return i.length&&(e.params=i),e}}for(const Set of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const e=hht.prototype[Set];hht.prototype[Set]=function(t,n){return e.call(this,t,mht(t,n))}}function mht(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function ght(e,t){void 0===t&&(t=hpt(e.config));const n=function(e,t={}){const n={config:t};return bht.map(yht.map(vht.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=ift(e)||wpt(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(Flt(nlt("width")),r=void 0),"container"==i&&(Flt(nlt("height")),i=void 0));const s={type:"pad",...a,...n?wht(n.autosize):{},...wht(e.autosize)};"fit"!==s.type||o||(Flt(tlt),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&Flt(rlt("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&Flt(rlt("height"));if(oot(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const yht=new class extends _pt{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Eft,Aft,Mft,new Rpt,new zpt]}map(e,t){if(ift(e)){const n=aft(e.encoding,lot),r=aft(e.encoding,uot),i=aft(e.encoding,cot);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=Ppt(e.encoding,t.repeater),o={...e,...e.name?{name:[t.repeaterPrefix,e.name].filter(e=>e).join("_")}:{},...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const s of this.nonFacetUnitNormalizers)if(s.hasMatchingType(o,t.config))return s.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!PMe(e.repeat)&&sot(e.repeat,"layer")}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:l={},repeaterPrefix:u=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map(e=>{const n={...l,layer:e},i=`${(r.name?`${r.name}_`:"")+u}child__layer_${Bit(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o})}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!PMe(n)&&e.columns&&(e=_it(e,["columns"]),Flt(clt("repeat")));const a=[],{repeater:s={},repeaterPrefix:l=""}=t,u=!PMe(n)&&n.row||[s?s.row:null],c=!PMe(n)&&n.column||[s?s.column:null],d=PMe(n)&&n||[s?s.repeat:null];for(const p of d)for(const e of u)for(const i of c){const o={repeat:p,row:e,column:i,layer:s.layer},u=(r.name?`${r.name}_`:"")+l+"child__"+(PMe(n)?`${Bit(p)}`:(n.row?`row_${Bit(e)}`:"")+(n.column?`column_${Bit(i)}`:"")),c=this.map(r,{...t,repeater:o,repeaterPrefix:u});c.name=u,a.push(_it(c,["data"]))}const f=PMe(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:f,concat:a}}mapFacet(e,t){const{facet:n}=e;return idt(n)&&e.columns&&(e=_it(e,["columns"]),Flt(clt("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=qpt({parentProjection:o,projection:r}),l=Upt({parentEncoding:i,encoding:Ppt(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:l,height:u,view:c,params:d,encoding:f,...p}=e,{facetMapping:h,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=Ppt(o,t.repeater);return this.mapFacet({...p,...m,facet:h,spec:{...s?{width:s}:{},...u?{height:u}:{},...c?{view:c}:{},...l?{projection:l}:{},mark:a,encoding:g,...d?{params:d}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&Flt(`Facet encoding dropped as ${(o=[...n?[lot]:[],...r?[uot]:[]]).join(" and ")} ${o.length>1?"are":"is"} also specified.`);const t={},a={};for(const n of[lot,uot]){const r=e[n];if(r){const{align:e,center:i,spacing:o,columns:s,...l}=r;t[n]=l;for(const t of["align","center","spacing"])void 0!==r[t]&&(a[t]??(a[t]={}),a[t][n]=r[t])}}return{facetMapping:t,layout:a}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:Mpt(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}var o}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:Upt({parentEncoding:t,encoding:i,layer:!0}),parentProjection:qpt({parentProjection:n,projection:o})};return super.mapLayer({...a,...e.name?{name:[s.repeaterPrefix,e.name].filter(e=>e).join("_")}:{}},s)}},vht=new class extends _pt{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=cht(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=cht(e,t)).encoding){const n={};for(const[r,i]of Lit(e.encoding))n[r]=dht(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:Lit(n).map(([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const s of Fit(t.selectionPredicates[e]??{}))s.empty="none"!==o;return{name:e,value:r,select:a,bind:i}})}:e}},bht=new hht;function wht(e){return OPe(e)?{type:e}:e??{}}const _ht=["background","padding"];function xht(e,t){const n={};for(const r of _ht)e&&void 0!==e[r]&&(n[r]=Bst(e[r]));return t&&(n.params=e.params),n}class Eht{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new Eht(vit(this.explicit),vit(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return Qit(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of Pit(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function Sht(e){return{explicit:!0,value:e}}function kht(e){return{explicit:!1,value:e}}function Tht(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:Cht(t,n,r,i)}}function Cht(e,t,n,r){return e.explicit&&t.explicit&&Flt(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${aot(n)} and ${aot(r)}). Using ${aot(n)}.`}(n,r,e.value,t.value)),e}function Aht(e,t,n,r,i=Cht){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:oot(e.value,t.value)?e:i(e,t,n,r)}class Iht extends Eht{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function Oht(e){return sot(e,"url")}function Nht(e){return sot(e,"values")}function Dht(e){return sot(e,"name")&&!Oht(e)&&!Nht(e)&&!Rht(e)}function Rht(e){return e&&(Mht(e)||Pht(e)||Fht(e))}function Mht(e){return sot(e,"sequence")}function Pht(e){return sot(e,"sphere")}function Fht(e){return sot(e,"graticule")}var Lht,jht;function Bht({invalid:e,isPath:t}){switch(Dct(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}(jht=Lht||(Lht={}))[jht.Raw=0]="Raw",jht[jht.Main=1]="Main",jht[jht.Row=2]="Row",jht[jht.Column=3]="Column",jht[jht.Lookup=4]="Lookup",jht[jht.PreFilterInvalid=5]="PreFilterInvalid",jht[jht.PostFilterInvalid=6]="PostFilterInvalid";class $ht{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?Flt("Attempt to add the same child twice."):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const r of this._children)r.parent=e;this._children=[],e.removeChild(this);const n=e.parent.removeChild(e);this._parent=t,t.addChild(this,n),e.parent=this}}class zht extends $ht{clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${Jit()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}function Uht(e){return void 0!==e.as}function qht(e){return`${e}_end`}class Hht extends $ht{clone(){return new Hht(null,vit(this.timeUnits))}constructor(e,t){super(e),this.timeUnits=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef((e,n,r)=>{const{field:i,timeUnit:o}=n;if(o){let a;if(Wlt(o)){if(bwt(t)){const{mark:e,markDef:r,config:s}=t,l=udt({fieldDef:n,markDef:r,config:s});(bct(e)||l)&&(a={timeUnit:tut(o),field:i})}}else a={as:Odt(n,{forAs:!0}),field:i,timeUnit:o};if(bwt(t)){const{mark:e,markDef:i,config:o}=t,s=udt({fieldDef:n,markDef:i,config:o});bct(e)&&zat(r)&&.5!==s&&(a.rectBandPosition=s)}a&&(e[xit(a)]=a)}return e},{});return Mit(n)?null:new Hht(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:tut(n)};return new Hht(e,{[xit(i)]:i})}merge(e){this.timeUnits={...this.timeUnits};for(const t in e.timeUnits)this.timeUnits[t]||(this.timeUnits[t]=e.timeUnits[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of Lit(this.timeUnits)){const i=Uht(r)?r.as:`${r.field}_end`;e.has(i)||(t[n]=r)}this.timeUnits=t}producedFields(){return new Set(Fit(this.timeUnits).map(e=>Uht(e)?e.as:qht(e.field)))}dependentFields(){return new Set(Fit(this.timeUnits).map(e=>e.field))}hash(){return`TimeUnit ${xit(this.timeUnits)}`}assemble(){const e=[];for(const t of Fit(this.timeUnits)){const{rectBandPosition:n}=t,r=tut(t.timeUnit);if(Uht(t)){const{field:i,as:o}=t,{unit:a,utc:s,...l}=r,u=[o,`${o}_end`];e.push({field:Git(i),type:"timeunit",...a?{units:Zlt(a)}:{},...s?{timezone:"utc"}:{},...l,as:u}),e.push(...Yht(u,n,r))}else if(t){const{field:i}=t,o=i.replaceAll("\\.","."),a=Ght({timeUnit:r,field:o}),s=qht(o);e.push({type:"formula",expr:a,as:s}),e.push(...Yht([o,s],n,r))}}return e}}const Vht="offsetted_rect_start",Wht="offsetted_rect_end";function Ght({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=Qlt(r),{part:a,step:s}=iut(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', ${Vit(t)}, ${n?-s:s})`}function Yht([e,t],n,r){if(void 0!==n&&.5!==n){const i=Vit(e),o=Vit(t);return[{type:"formula",expr:Kht([Ght({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${Vht}`},{type:"formula",expr:Kht([i,o],n+.5),as:`${e}_${Wht}`}]}return[]}function Kht([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Zht="_tuple_fields";class Qht{constructor(...e){this.items=e,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Xht={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Qht),o={},a={},s=new Set,l=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=Bit(`${r}_${n}`);for(let o=1;s.has(i);o++)i=Bit(`${r}_${n}_${o}`);return s.add(i),{[t]:i}},u=t.type,c=e.config.selection[u],d=void 0!==n.value?aPe(n.value):null;let{fields:f,encodings:p}=FMe(n.select)?n.select:{};if(!f&&!p&&d)for(const h of d)if(FMe(h))for(const e of Pit(h))dat(e)?(p||(p=[])).push(e):"interval"===u?(Flt('Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.'),p=c.encodings):(f??(f=[])).push(e);f||p||(p=c.encodings,"fields"in c&&(f=c.fields));for(const h of p??[]){const t=e.fieldDef(h);if(t){let n=t.field;if(t.aggregate){Flt(slt(h,t.aggregate));continue}if(!n){Flt(alt(h));continue}if(t.timeUnit&&!Wlt(t.timeUnit)){n=e.vgField(h);const r={timeUnit:t.timeUnit,as:n,field:t.field};a[xit(r)]=r}if(!o[n]){const r={field:n,channel:h,type:"interval"===u&&sst(h)&&qut(e.getScaleComponent(h).get("type"))?"R":t.bin?"R-RE":"E",index:i.items.length};r.signals={...l(r,"data"),...l(r,"visual")},i.items.push(o[n]=r),i.hasField[n]=o[n],i.hasSelectionId=i.hasSelectionId||n===Vft,Kot(h)?(r.geoChannel=h,r.channel=Yot(h),i.hasChannel[r.channel]=o[n]):i.hasChannel[h]=o[n]}}else Flt(alt(h))}for(const h of f??[]){if(i.hasField[h])continue;const e={type:"E",field:h,index:i.items.length};e.signals={...l(e,"data")},i.items.push(e),i.hasField[h]=e,i.hasSelectionId=i.hasSelectionId||h===Vft}d&&(t.init=d.map(e=>i.items.map(t=>FMe(e)?void 0!==e[t.geoChannel||t.channel]?e[t.geoChannel||t.channel]:e[t.field]:e))),Mit(a)||(i.timeUnit=new Hht(null,a))},signals:(e,t,n)=>{const r=t.name+Zht,i=n.filter(e=>e.name===r);return i.length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(umt)})}},Jht="_curr",emt="anim_value",tmt="anim_clock",nmt="eased_anim_clock",rmt="min_extent",imt="max_range_extent",omt="last_tick_at",amt="is_playing",smt=1/60*1e3,lmt={defined:e=>"point"===e.type,topLevelSignals:(e,t,n)=>(Sgt(t)&&(n=n.concat([{name:tmt,init:"0",on:[{events:{type:"timer",throttle:smt},update:`${amt} ? (${tmt} + (now() - ${omt}) > ${imt} ? 0 : ${tmt} + (now() - ${omt})) : ${tmt}`}]},{name:omt,init:"now()",on:[{events:[{signal:tmt},{signal:amt}],update:"now()"}]},{name:amt,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+Zht,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=Fit(e.component.selection??{}).reduce((e,t)=>"interval"===t.type?e.concat(t.name+vmt):e,[]).map(e=>`indexof(item().mark.name, '${e}') < 0`).join(" && "),l="datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0"+(s?` && ${s}`:"");let u=`unit: ${_gt(e)}, `;if(t.project.hasSelectionId)u+=`${Vft}: ${a}[${jPe(Vft)}]`;else if(Sgt(t))u+=`fields: ${i}, values: [${emt} ? ${emt} : ${rmt}]`;else{u+=`fields: ${i}, values: [${o.items.map(t=>{const n=e.fieldDef(t.channel);return(null==n?void 0:n.bin)?`[${a}[${jPe(e.vgField(t.channel,{}))}], ${a}[${jPe(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${jPe(t.field)}]`}).join(", ")}]`}if(Sgt(t))return n.concat((c=t.name,d=e.scaleName(kot),[{name:nmt,update:tmt},{name:`${c}_domain`,init:`domain('${d}')`},{name:rmt,init:`extent(${c}_domain)[0]`},{name:imt,init:`extent(range('${d}'))[1]`},{name:emt,update:`invert('${d}', ${nmt})`}]),[{name:r+ygt,on:[{events:[{signal:nmt},{signal:emt}],update:`{${u}}`,force:!0}]}]);{const e=t.events;return n.concat([{name:r+ygt,on:e?[{events:e,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}var c,d}};function umt(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Git(i.field),i}function cmt(e,t=!0,n=AMe){if(PMe(e)){const r=e.map(e=>cmt(e,t,n));return t?`[${r.join(", ")}]`:r}return Llt(e)?n(t?qlt(e):function(e){const t=Ult(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(aot(e)):e}function dmt(e,t){for(const n of Fit(e.component.selection??{})){const r=n.name;let i=`${r}${ygt}, ${"global"===n.resolve?"true":`{unit: ${_gt(e)}}`}`;for(const o of wgt)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+vgt,on:[{events:{signal:n.name+ygt},update:`modify(${jPe(n.name+ggt)}, ${i})`}]})}return hmt(t)}function fmt(e,t){if(e.component.selection&&Pit(e.component.selection).length){const n=jPe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:het("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return hmt(t)}function pmt(e,t){for(const n of Fit(e.component.selection??{}))for(const r of wgt)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function hmt(e){return e.map(e=>(e.on&&!e.on.length&&delete e.on,e))}const mmt={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!sst(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;"sequential"==a&&Flt("Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc"),o&&qut(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):Flt("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(e=>0===n.filter(t=>t.name===e.signals.data).length);if(!e.parent||ymt(e)||0===r.length)return n;const i=n.find(e=>e.name===t.name);let o=i.update;if(o.includes(bgt))i.update=`{${r.map(e=>`${jPe(Git(e.field))}: ${e.signals.data}`).join(", ")}}`;else{for(const e of r){const t=`${jPe(Git(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map(e=>({name:e.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ymt(e))for(const r of t.scales){const e=n.find(e=>e.name===r.signals.data);e.push="outer",delete e.value,delete e.update}return n}};function gmt(e,t){return`domain(${jPe(e.scaleName(t))})`}function ymt(e){return e.parent&&xwt(e.parent)&&(!e.parent.parent||ymt(e.parent.parent))}const vmt="_brush",bmt="_scale_trigger",wmt="geo_interval_init_tick",_mt="_init",xmt={defined:e=>"interval"===e.type,parse:(e,t,n)=>{var r;if(e.hasProjection){const e={...FMe(n.select)?n.select:{}};e.fields=[Vft],e.encodings||(e.encodings=n.value?Pit(n.value):[xot,_ot]),n.select={type:"interval",...e}}if(t.translate&&!mmt.defined(t)){const e=`!event.item || event.item.mark.name !== ${jPe(t.name+vmt)}`;for(const n of t.events){if(!n.between){Flt(`${n} is not an ordered event stream for interval selections.`);continue}const t=aPe((r=n.between[0]).filter??(r.filter=[]));t.includes(e)||t.push(e)}}},signals:(e,t,n)=>{const r=t.name,i=r+ygt,o=Fit(t.project.hasChannel).filter(e=>e.channel===dot||e.channel===fot),a=t.init?t.init[0]:null;if(n.push(...o.reduce((n,r)=>n.concat(function(e,t,n,r){const i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=jPe(i?e.scaleName(o):e.projectionName()),l=e=>`scale(${s}, ${e})`,u=e.getSizeSignalRef(o===dot?"width":"height").signal,c=`${o}(unit)`,d=t.events.reduce((e,t)=>[...e,{events:t.between[0],update:`[${c}, ${c}]`},{events:t,update:`[${a}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const i=n.signals.data,u=mmt.defined(t),c=e.getScaleComponent(o),f=c?c.get("type"):void 0,p=r?{init:cmt(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+bmt},update:qut(f)?`[${l(`${i}[0]`)}, ${l(`${i}[1]`)}]`:"[0, 0]"}),u?[{name:i,on:[]}]:[{name:a,...p,on:d},{name:i,...r?{init:cmt(r)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}{const e=o===dot?0:1,n=t.name+_mt;return[{name:a,...r?{init:`[${n}[0][${e}], ${n}[1][${e}]]`}:{value:[]},on:d}]}}(e,t,r,a&&a[r.index])),[])),e.hasProjection){const s=jPe(e.projectionName()),l=e.projectionName()+"_center",{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,p=u?a&&a[u.index]:`${l}[0]`,h=c?a&&a[c.index]:`${l}[1]`,m=t=>e.getSizeSignalRef(t).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;if(a&&(n.unshift({name:r+_mt,init:`[scale(${s}, [${u?p[0]:p}, ${c?h[0]:h}]), scale(${s}, [${u?p[1]:p}, ${c?h[1]:h}])]`}),!u||!c)){const e=n.find(e=>e.name===l);e||n.unshift({name:l,update:`invert(${s}, [${m("width")}/2, ${m("height")}/2])`})}const y=`vlSelectionTuples(${`intersect(${g}, {markname: ${jPe(e.getName("marks"))}}, unit.mark)`}, ${`{unit: ${_gt(e)}}`})`,v=o.map(e=>e.signals.visual);return n.concat({name:i,on:[{events:[...v.length?[{signal:v.join(" || ")}]:[],...a?[{signal:wmt}]:[]],update:y}]})}{if(!mmt.defined(t)){const t=r+bmt,i=o.map(t=>{const n=t.channel,{data:r,visual:i}=t.signals,o=jPe(e.scaleName(n)),a=qut(e.getScaleComponent(n).get("type"))?"+":"";return`(!isArray(${r}) || (${a}invert(${o}, ${i})[0] === ${a}${r}[0] && ${a}invert(${o}, ${i})[1] === ${a}${r}[1]))`});i.length&&n.push({name:t,value:{},on:[{events:o.map(t=>({scale:e.scaleName(t.channel)})),update:i.join(" && ")+` ? ${t} : {}`}]})}const s=o.map(e=>e.signals.data),l=`unit: ${_gt(e)}, fields: ${r+Zht}, values`;return n.concat({name:i,...a?{init:`{${l}: ${cmt(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>{if(bwt(e)&&e.hasProjection&&t.init){const e=n.filter(e=>e.name===wmt);e.length||n.unshift({name:wmt,value:null,on:[{events:"timer{1}",update:`${wmt} === null ? {} : ${wmt}`}]})}return n},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=null==i?void 0:i.signals.visual,s=null==o?void 0:o.signals.visual,l=`data(${jPe(t.name+ggt)})`;if(mmt.defined(t)||!i&&!o)return n;const u={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const g of Pit(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${_gt(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...p}=t.mark,h=Pit(p).reduce((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter(e=>e).join(" && "),value:p[t]},{value:null}],e),{}),m=f??(t.translate?"move":null);return[{name:`${r+vmt}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+vmt,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...h}}}]}};function Emt({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=pdt(t)&&t.condition;let a=[];if(o){a=aPe(o).map(t=>{const n=i(t);if(function(e){return sot(e,"param")}(t)){const{param:r,empty:i}=t;return{test:Hyt(e,{param:r,empty:i}),...n}}return{test:Wyt(e,t.test),...n}})}void 0!==r&&a.push(r);const s=i(t);return void 0!==s&&a.push(s),a.length>1||1===a.length&&Boolean(a[0].test)?{[n]:a}:1===a.length?{[n]:a[0]}:{}}function Smt(e,t="text"){const n=e.encoding[t];return Emt({model:e,channelDef:n,vgChannel:t,mainRefFn:t=>kmt(t,e.config),invalidValueRef:void 0})}function kmt(e,t,n="datum"){if(e){if(Sdt(e))return zst(e.value);if(xdt(e)){const{format:r,formatType:i}=jdt(e);return Hct({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Tmt(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(PMe(a))return{tooltip:Amt({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Emt({model:e,channelDef:a,vgChannel:"tooltip",mainRefFn:e=>{const a=kmt(e,i,s);if(a)return a;if(null===e)return;let l=Wst("tooltip",r,i);return!0===l&&(l={content:"encoding"}),OPe(l)?{value:l}:FMe(l)?Dst(l)?l:"encoding"===l.content?Amt(n,o,i,t):{signal:s}:void 0},invalidValueRef:void 0})}}function Cmt(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,a=r?"datum.datum":"datum",s=[];function l(n,r){const l=mat(r),u=Edt(n)?n:{...n,type:e[l].type},c=aPe(u.title||Ldt(u,i)).join(", ").replaceAll(/"/g,'\\"');let d;if(zat(r)){const t="x"===r?"x2":"y2",n=Bdt(e[t]);if(Sst(u.bin)&&n){const e=Odt(u,{expr:a}),r=Odt(n,{expr:a}),{format:s,formatType:l}=jdt(u);d=Xct(e,r,s,l,i),o.add(t)}}if((zat(r)||r===bot||r===yot)&&t&&t.fieldChannel===r&&"normalize"===t.offset){const{format:e,formatType:t}=jdt(u);d=Hct({fieldOrDatumDef:u,format:e,formatType:t,expr:a,config:i,normalizeStack:!0}).signal}d??(d=kmt(u,i,a).signal),s.push({channel:r,key:c,value:d})}pft(e,(e,t)=>{gdt(e)?l(e,t):hdt(e)&&l(e.condition,t)});const u={};for(const{channel:c,key:d,value:f}of s)o.has(c)||u[d]||(u[d]=f);return u}function Amt(e,t,n,{reactiveGeom:r}={}){const i=Cmt(e,t,n,{reactiveGeom:r}),o=Lit(i).map(([e,t])=>`"${e}": ${t}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Imt(e){const{markDef:t,config:n}=e,r=Wst("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...Omt(e),...Nmt(e)}}function Omt(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=Wst("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:bPe(Fst,t)?{}:{ariaRoleDescription:{value:t}}}function Nmt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Emt({model:e,channelDef:o,vgChannel:"description",mainRefFn:t=>kmt(t,e.config),invalidValueRef:void 0});const a=Wst("description",n,r);if(null!=a)return{description:zst(a)};if(!1===r.aria)return{};const s=Cmt(t,i,r);return Mit(s)?void 0:{description:{signal:Lit(s).map(([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`).join(" + ")}}}function Dmt(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;const u=i[e];void 0===s&&(l??(l=Wst(e,r,o,{vgChannel:a,ignoreVgConfig:!pdt(u)})),void 0!==l&&(s=zst(l)));const c={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=Pct({...c,scaleChannel:e,channelDef:u});return Emt({model:t,channelDef:u,vgChannel:a??e,invalidValueRef:d,mainRefFn:t=>$ct({...c,channel:e,channelDef:t,stack:null,defaultRef:s})})}function Rmt(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Wst("filled",n,i),s=Sit(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Wst(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,u=Wst(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",d={...l?{fill:zst(l)}:{},...u?{stroke:zst(u)}:{}};return n.color&&(a?n.fill:n.stroke)&&Flt(ylt("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...Dmt("color",e,{vgChannel:c,defaultValue:a?l:u}),...Dmt("fill",e,{defaultValue:r.fill?l:void 0}),...Dmt("stroke",e,{defaultValue:r.stroke?u:void 0})}}function Mmt(e){const{encoding:t,mark:n}=e,r=t.order;return!vct(n)&&Sdt(r)?Emt({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:e=>zst(e.value),invalidValueRef:void 0}):{}}function Pmt({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if(("xOffset"===o||"yOffset"===o)&&s){return{offsetType:"encoding",offset:$ct({channel:o,channelDef:s,markDef:t,config:null==r?void 0:r.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:zst(a),bandPosition:i})}}const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Fmt(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,l=i[e],u=i[yat(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:p}=Pmt({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),h=Lmt({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&zat(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(xdt(n)&&i&&t===i.fieldChannel){if(gdt(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return Bct({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return jct(n,r,{suffix:"end"},{offset:o})}return Lct(e)}({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:c,scale:d,stack:s,offset:f,defaultRef:h,bandPosition:"encoding"===p?0:void 0});return m?{[r||e]:m}:void 0}function Lmt({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=mat(n),l=gat(n),u=Wst(n,o,a,{vgChannel:l});if(void 0!==u)return zct(n,u);switch(t){case"zeroOrMin":return jmt({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:s,config:a});case"zeroOrMax":return jmt({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:s,config:a});case"mid":return{...e[vat(n)],mult:.5}}}}function jmt({mainChannel:e,config:t,...n}){const r=Mct(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if("zeroOrMin"===i)return{value:0};const{widthSignal:e,heightSignal:t}=i.zeroOrMax;return{signal:`min(${e},${t})/2`}}case"theta":return"zeroOrMin"===i?{value:0}:{signal:"2*PI"};case"x":return"zeroOrMin"===i?{value:0}:{field:{group:"width"}};case"y":return"zeroOrMin"===i?{field:{group:"height"}}:{value:0}}}const Bmt={left:"x",center:"xc",right:"x2"},$mt={top:"y",middle:"yc",bottom:"y2"};function zmt(e,t,n,r="middle"){if("radius"===e||"theta"===e)return gat(e);const i="x"===e?"align":"baseline",o=Wst(i,t,n);let a;return Dst(o)?(Flt(function(e){return`The ${e} for range marks cannot be an expression`}(i)),a=void 0):a=o,"x"===e?Bmt[a||("top"===r?"left":"center")]:$mt[a||r]}function Umt(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?qmt(e,t,{defaultPos:n,defaultPos2:r}):Fmt(e,t,{defaultPos:n})}function qmt(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=yat(e),s=vat(e),l=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,l=mat(n),u=vat(n),c=gat(n),d=r[l],f=e.scaleName(l),p=e.getScaleComponent(l),{offset:h}=Pmt(n in r||n in o?{channel:n,markDef:o,encoding:r,model:e}:{channel:l,markDef:o,encoding:r,model:e});if(!d&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=vat(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){if(xdt(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return jct(t,o,{suffix:"start"},{offset:l});return Lct({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:l,defaultRef:u})}({channel:n,channelDef:d,channel2Def:r[n],markDef:o,config:s,scaleName:f,scale:p,stack:a,offset:h,defaultRef:void 0});if(void 0!==m)return{[c]:m};return Hmt(n,o)||Hmt(n,{[n]:Yst(n,o,s.style),[u]:Yst(u,o,s.style)})||Hmt(n,s[i])||Hmt(n,s.mark)||{[c]:Lmt({model:e,defaultPos:t,channel:n,scaleName:f,scale:p})()}}(t,r,a);return{...Fmt(e,t,{defaultPos:n,vgChannel:l[s]?zmt(e,i,o):gat(e)}),...l}}function Hmt(e,t){const n=vat(e),r=gat(e);if(void 0!==t[r])return{[r]:zct(e,t[r])};if(void 0!==t[e])return{[r]:zct(e,t[e])};if(t[n]){const r=t[n];if(!Cct(r))return{[n]:zct(e,r)};Flt(function(e){return`Position range does not support relative band size for ${e}.`}(n))}}function Vmt(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,a=yat(t),s=vat(t),l=r[t],u=r[a],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,p=r[s]??r.size??Wst("size",i,n,{vgChannel:s}),h=bat(t),m="bar"===o&&("x"===t?"vertical"===f:"horizontal"===f)||"tick"===o&&("y"===t?"vertical"===f:"horizontal"===f);return!gdt(l)||!(Est(l.bin)||Sst(l.bin)||l.timeUnit&&!u)||p&&!Cct(p)||r[h]||Uut(d)?(xdt(l)&&Uut(d)||m)&&!u?function(e,t,n){var r,i;const{markDef:o,encoding:a,config:s,stack:l}=n,u=o.orient,c=n.scaleName(t),d=n.getScaleComponent(t),f=vat(t),p=yat(t),h=bat(t),m=n.scaleName(h),g=n.getScaleComponent(wat(t)),y="tick"===o.type||"horizontal"===u&&"y"===t||"vertical"===u&&"x"===t;let v;(a.size||o.size)&&(y?v=Dmt("size",n,{vgChannel:f,defaultRef:zst(o.size)}):Flt(function(e){return`Cannot apply size to non-oriented mark "${e}".`}(o.type)));const b=!!v,w=cdt({channel:t,fieldDef:e,markDef:o,config:s,scaleType:null==(r=d||g)?void 0:r.get("type"),useVlSizeChannel:y});v=v||{[f]:Wmt(f,m||c,g||d,s,w,!!e,o.type)};const _="band"===(null==(i=d||g)?void 0:i.get("type"))&&Cct(w)&&!b?"top":"middle",x=zmt(t,o,s,_),E="xc"===x||"yc"===x,{offset:S,offsetType:k}=Pmt({channel:t,markDef:o,encoding:a,model:n,bandPosition:E?.5:0}),T=Lct({channel:t,channelDef:e,markDef:o,config:s,scaleName:c,scale:d,stack:l,offset:S,defaultRef:Lmt({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:d}),bandPosition:E?"encoding"===k?0:.5:Dst(w)?{signal:`(1-${w})/2`}:Cct(w)?(1-w.band)/2:0});if(f)return{[x]:T,...v};{const e=gat(p),t=v[f],n=S?{...t,offset:S}:t;return{[x]:T,[e]:PMe(T)?[T[0],{...T[1],offset:n}]:{...T,offset:n}}}}(l,t,e):qmt(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"}):function({fieldDef:e,fieldDef2:t,channel:n,model:r}){var i;const{config:o,markDef:a,encoding:s}=r,l=r.getScaleComponent(n),u=r.scaleName(n),c=l?l.get("type"):void 0,d=l.get("reverse"),f=cdt({channel:n,fieldDef:e,markDef:a,config:o,scaleType:c}),p=null==(i=r.component.axes[n])?void 0:i[0],h=(null==p?void 0:p.get("translate"))??.5,m=zat(n)?Wst("binSpacing",a,o)??0:0,g=yat(n),y=gat(n),v=gat(g),b=Gst("minBandSize",a,o),{offset:w}=Pmt({channel:n,markDef:a,encoding:s,model:r,bandPosition:0}),{offset:_}=Pmt({channel:g,markDef:a,encoding:s,model:r,bandPosition:0}),x=function({scaleName:e,fieldDef:t}){const n=Odt(t,{expr:"datum"});return`abs(scale("${e}", ${Odt(t,{expr:"datum",suffix:"end"})}) - scale("${e}", ${n}))`}({fieldDef:e,scaleName:u}),E=Gmt(n,m,d,h,w,b,x),S=Gmt(g,m,d,h,_??w,b,x),k=Dst(f)?{signal:`(1-${f.signal})/2`}:Cct(f)?(1-f.band)/2:.5,T=udt({fieldDef:e,fieldDef2:t,markDef:a,config:o});if(Est(e.bin)||e.timeUnit){const t=e.timeUnit&&.5!==T;return{[v]:Ymt({fieldDef:e,scaleName:u,bandPosition:k,offset:S,useRectOffsetField:t}),[y]:Ymt({fieldDef:e,scaleName:u,bandPosition:Dst(k)?{signal:`1-${k.signal}`}:1-k,offset:E,useRectOffsetField:t})}}if(Sst(e.bin)){const n=jct(e,u,{},{offset:S});if(gdt(t))return{[v]:n,[y]:jct(t,u,{},{offset:E})};if(kst(e.bin)&&e.bin.step)return{[v]:n,[y]:{signal:`scale("${u}", ${Odt(e,{expr:"datum"})} + ${e.bin.step})`,offset:E}}}return void Flt(Dlt(g))}({fieldDef:l,fieldDef2:u,channel:t,model:e})}function Wmt(e,t,n,r,i,o,a){if(Cct(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e){let e=`bandwidth('${t}')`;1!==i.band&&(e=`${i.band} * ${e}`);const n=Gst("minBandSize",{type:a},r);return{signal:n?`max(${qst(n)}, ${e})`:e}}1!==i.band&&(Flt(function(e){return`Cannot use the relative band size with ${e} scale.`}(e)),i=void 0)}}else{if(Dst(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(Rst(e)&&APe(e.step))return{value:e.step-2}}if(!o){const{bandPaddingInner:t,barBandPaddingInner:n,rectBandPaddingInner:i,tickBandPaddingInner:o}=r.scale,s=Qit(t,"tick"===a?o:"bar"===a?n:i);if(Dst(s))return{signal:`(1 - (${s.signal})) * ${e}`};if(APe(s))return{signal:`${1-s} * ${e}`}}return{value:opt(r.view,e)-2}}function Gmt(e,t,n,r,i,o,a){if(Wot(e))return 0;const s="x"===e||"y2"===e,l=s?-t/2:t/2;if(Dst(n)||Dst(i)||Dst(r)||o){const e=qst(n),t=qst(i),u=qst(r),c=qst(o),d=o?`(${a} < ${c} ? ${s?"":"-"}0.5 * (${c} - (${a})) : ${l})`:l;return{signal:(u?`${u} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${d})`:d)}}return i=i||0,r+(n?-i-l:+i+l)}function Ymt({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return Bct({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:Vht,endSuffix:Wht}:{}})}const Kmt=new Set(["aria","width","height"]);function Zmt(e,t){const{fill:n,stroke:r}="include"===t.color?Rmt(e):{};return{...Xmt(e.markDef,t),...Qmt("fill",n),...Qmt("stroke",r),...Dmt("opacity",e),...Dmt("fillOpacity",e),...Dmt("strokeOpacity",e),...Dmt("strokeWidth",e),...Dmt("strokeDash",e),...Mmt(e),...Tmt(e),...Smt(e,"href"),...Imt(e)}}function Qmt(e,t){return t?{[e]:t}:{}}function Xmt(e,t){return Pst.reduce((n,r)=>(!Kmt.has(r)&&sot(e,r)&&"ignore"!==t[r]&&(n[r]=zst(e[r])),n),{})}function Jmt(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{var a;let s;if(!sst(o)||!(s=e.getScaleType(o)))return;const l=bst(i.aggregate),u=Rct({scaleChannel:o,markDef:n,config:t,scaleType:s,isCountAggregate:l});if("break-paths-filter-domains"===(c=u)||"break-paths-show-domains"===c){const t=e.vgField(o,{expr:"datum",binSuffix:(null==(a=e.stack)?void 0:a.impute)?"mid":void 0});t&&r.add(t)}var c}),r.size>0){return{defined:{signal:[...r].map(e=>mut(e,!0)).join(" && ")}}}}function egt(e,t){if(void 0!==t)return{[e]:zst(t)}}const tgt="voronoi",ngt={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(tgt)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(vct(o))return Flt(`The "nearest" transform is not supported for ${o} marks.`),n;const a={name:e.getName(tgt),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Tmt(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.includes(tgt)&&(l=!0)}),l||n.splice(s+1,0,a),n}},rgt={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Gft(e.bind),parse:(e,t,n)=>Egt(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=ngt.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((e,i)=>{const l=Bit(`${r}_${e.field}`),u=n.filter(e=>e.name===l);u.length||n.unshift({name:l,...a?{init:cmt(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${jPe(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(e=>e.name===r+ygt),a=r+Zht,s=i.items.map(e=>Bit(`${r}_${e.field}`)),l=s.map(e=>`${e} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},igt="_toggle",ogt={defined:e=>"point"===e.type&&!Sgt(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+igt,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ygt,r=t.name+igt;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${_gt(e)}}, `)+`${r} ? ${n} : null`}},agt={defined:e=>void 0!==e.clear&&!1!==e.clear&&!Sgt(e),parse:(e,t)=>{t.clear&&(t.clear=OPe(t.clear)?het(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(rgt.defined(t))for(const r of t.project.items){const e=n.findIndex(e=>e.name===Bit(`${t.name}_${r.field}`));-1!==e&&n[e].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const i of t.project.items){const e=n.findIndex(e=>e.name===i.signals.visual);if(r(e,"[0, 0]"),-1===e){const e=n.findIndex(e=>e.name===i.signals.data);r(e,"null")}}else{let e=n.findIndex(e=>e.name===t.name+ygt);r(e,"null"),ogt.defined(t)&&(e=n.findIndex(e=>e.name===t.name+igt),r(e,"false"))}return n}},sgt={defined:e=>{const t="global"===e.resolve&&e.bind&&Gft(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Vft;return t&&!n&&Flt("Legend bindings are only supported for selections over an individual field or encoding channel."),t&&n},parse:(e,t,n)=>{const r=vit(n);if(r.select=OPe(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Egt(t,r),FMe(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=aPe(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=Yft(t.bind)?t.bind.legend:"click",o=OPe(i)?het(i,"view"):aPe(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Yft(t.bind)&&t.bind.legend,o=e=>t=>{const n=vit(t);return n.markname=e,n};for(const a of t.project.items){if(!a.hasLegend)continue;const e=`${Bit(a.field)}_legend`,s=`${r}_${e}`,l=n.filter(e=>e.name===s);if(0===l.length){const r=i.merge.map(o(`${e}_symbols`)).concat(i.merge.map(o(`${e}_labels`))).concat(i.merge.map(o(`${e}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:r,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(e=>e.name===r+ygt),a=r+Zht,s=i.items.filter(e=>e.hasLegend).map(e=>Bit(`${r}_${Bit(e.field)}_legend`)),l=`${s.map(e=>`${e} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(e=>({signal:e})),update:l}):s.length>0&&(o.update=l,delete o.value,delete o.on);const u=n.find(e=>e.name===r+igt),c=Yft(t.bind)&&t.bind.legend;return u&&(t.events?u.on.push({...u.on[0],events:c}):u.on[0].events=c),n}};const lgt="_translate_anchor",ugt="_translate_delta",cgt={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=mmt.defined(t),o=r+lgt,{x:a,y:s}=t.project.hasChannel;let l=het(t.translate,"scope");return i||(l=l.map(e=>(e.between[0].markname=r+vmt,e))),n.push({name:o,value:{},on:[{events:l.map(e=>e.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?gmt(e,dot):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?gmt(e,fot):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+ugt,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&dgt(e,t,a,"width",n),void 0!==s&&dgt(e,t,s,"height",n),n}};function dgt(e,t,n,r,i){const o=t.name,a=o+lgt,s=o+ugt,l=n.channel,u=mmt.defined(t),c=i.find(e=>e.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),p=f&&f.get("type"),h=f&&f.get("reverse"),m=`${a}.extent_${l}`,g=`${u&&f?"log"===p?"panLog":"symlog"===p?"panSymlog":"pow"===p?"panPow":"panLinear":"panLinear"}(${m}, ${`${u?l===dot?h?"":"-":h?"-":"":""}${s}.${l} / ${u?`${d}`:`span(${m})`}`}${u?"pow"===p?`, ${f.get("exponent")??1}`:"symlog"===p?`, ${f.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:u?g:`clampRange(${g}, 0, ${d})`})}const fgt="_zoom_anchor",pgt="_zoom_delta",hgt={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=mmt.defined(t),o=r+pgt,{x:a,y:s}=t.project.hasChannel,l=jPe(e.scaleName(dot)),u=jPe(e.scaleName(fot));let c=het(t.zoom,"scope");return i||(c=c.map(e=>(e.markname=r+vmt,e))),n.push({name:r+fgt,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(e=>e).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&mgt(e,t,a,"width",n),void 0!==s&&mgt(e,t,s,"height",n),n}};function mgt(e,t,n,r,i){const o=t.name,a=n.channel,s=mmt.defined(t),l=i.find(e=>e.name===n.signals[s?"data":"visual"]),u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),d=c&&c.get("type"),f=s?gmt(e,a):l.name,p=o+pgt,h=`${s&&c?"log"===d?"zoomLog":"symlog"===d?"zoomSymlog":"pow"===d?"zoomPow":"zoomLinear":"zoomLinear"}(${f}, ${`${o}${fgt}.${a}`}, ${p}${s?"pow"===d?`, ${c.get("exponent")??1}`:"symlog"===d?`, ${c.get("constant")??1}`:"":""})`;l.on.push({events:{signal:p},update:s?h:`clampRange(${h}, 0, ${u})`})}const ggt="_store",ygt="_tuple",vgt="_modify",bgt="vlSelectionResolve",wgt=[lmt,xmt,Xht,ogt,rgt,mmt,sgt,agt,cgt,hgt,ngt];function _gt(e,{escape:t}={escape:!0}){let n=t?jPe(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!wwt(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of eat)e[t]&&(n+=` + '__facet_${t}_' + (facet[${jPe(r.vgField(t))}])`)}return n}function xgt(e){return Fit(e.component.selection??{}).reduce((e,t)=>e||t.project.hasSelectionId,!1)}function Egt(e,t){!OPe(t.select)&&t.select.on||delete e.events,!OPe(t.select)&&t.select.clear||delete e.clear,!OPe(t.select)&&t.select.toggle||delete e.toggle}function Sgt(e){var t;return null==(t=e.events)?void 0:t.find(e=>"type"in e&&"timer"===e.type)}const kgt="Property",Tgt="ArrayExpression",Cgt="BinaryExpression",Agt="CallExpression",Igt="ConditionalExpression",Ogt="LogicalExpression",Ngt="MemberExpression",Dgt="ObjectExpression",Rgt="UnaryExpression";function Mgt(e){this.type=e}var Pgt,Fgt,Lgt,jgt,Bgt;Mgt.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case Tgt:return e.elements;case Cgt:case Ogt:return[e.left,e.right];case Agt:return[e.callee].concat(e.arguments);case Igt:return[e.test,e.consequent,e.alternate];case Ngt:return[e.object,e.property];case Dgt:return e.properties;case kgt:return[e.key,e.value];case Rgt:return[e.argument];default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(Pgt={})[1]="Boolean",Pgt[2]="<end>",Pgt[3]="Identifier",Pgt[4]="Keyword",Pgt[5]="Null",Pgt[6]="Numeric",Pgt[7]="Punctuator",Pgt[8]="String",Pgt[9]="RegularExpression";var $gt="Identifier",zgt="Unexpected token %0",Ugt="Invalid regular expression",qgt="Invalid regular expression: missing /",Hgt="Octal literals are not allowed in strict mode.",Vgt="ILLEGAL",Wgt="Disabled.",Ggt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Ygt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Kgt(e,t){if(!e)throw new Error("ASSERT: "+t)}function Zgt(e){return e>=48&&e<=57}function Qgt(e){return"0123456789abcdefABCDEF".includes(e)}function Xgt(e){return"01234567".includes(e)}function Jgt(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function eyt(e){return 10===e||13===e||8232===e||8233===e}function tyt(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&Ggt.test(String.fromCharCode(e))}function nyt(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&Ygt.test(String.fromCharCode(e))}const ryt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function iyt(){for(;Lgt<jgt;){const e=Fgt.charCodeAt(Lgt);if(!Jgt(e)&&!eyt(e))break;++Lgt}}function oyt(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)Lgt<jgt&&Qgt(Fgt[Lgt])?(r=Fgt[Lgt++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):_yt({},zgt,Vgt);return String.fromCharCode(i)}function ayt(){var e,t,n,r;for(t=0,"}"===(e=Fgt[Lgt])&&_yt({},zgt,Vgt);Lgt<jgt&&Qgt(e=Fgt[Lgt++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&_yt({},zgt,Vgt),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function syt(){var e,t;for(e=Fgt.charCodeAt(Lgt++),t=String.fromCharCode(e),92===e&&(117!==Fgt.charCodeAt(Lgt)&&_yt({},zgt,Vgt),++Lgt,(e=oyt("u"))&&"\\"!==e&&tyt(e.charCodeAt(0))||_yt({},zgt,Vgt),t=e);Lgt<jgt&&nyt(e=Fgt.charCodeAt(Lgt));)++Lgt,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==Fgt.charCodeAt(Lgt)&&_yt({},zgt,Vgt),++Lgt,(e=oyt("u"))&&"\\"!==e&&nyt(e.charCodeAt(0))||_yt({},zgt,Vgt),t+=e);return t}function lyt(){var e,t;return e=Lgt,t=92===Fgt.charCodeAt(Lgt)?syt():function(){var e,t;for(e=Lgt++;Lgt<jgt;){if(92===(t=Fgt.charCodeAt(Lgt)))return Lgt=e,syt();if(!nyt(t))break;++Lgt}return Fgt.slice(e,Lgt)}(),{type:1===t.length?3:ryt.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:Lgt}}function uyt(){var e,t,n,r,i=Lgt,o=Fgt.charCodeAt(Lgt),a=Fgt[Lgt];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Lgt,{type:7,value:String.fromCharCode(o),start:i,end:Lgt};default:if(61===(e=Fgt.charCodeAt(Lgt+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Lgt+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:Lgt};case 33:case 61:return Lgt+=2,61===Fgt.charCodeAt(Lgt)&&++Lgt,{type:7,value:Fgt.slice(i,Lgt),start:i,end:Lgt}}}return">>>="===(r=Fgt.substr(Lgt,4))?{type:7,value:r,start:i,end:Lgt+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:Lgt+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".includes(a)||"=>"===t?{type:7,value:t,start:i,end:Lgt+=2}:("//"===t&&_yt({},zgt,Vgt),"<>=!+-*%&|^/".includes(a)?{type:7,value:a,start:i,end:++Lgt}:void _yt({},zgt,Vgt))}function cyt(){var e,t,n;if(Kgt(Zgt((n=Fgt[Lgt]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=Lgt,e="","."!==n){if(e=Fgt[Lgt++],n=Fgt[Lgt],"0"===e){if("x"===n||"X"===n)return++Lgt,function(e){let t="";for(;Lgt<jgt&&Qgt(Fgt[Lgt]);)t+=Fgt[Lgt++];return 0===t.length&&_yt({},zgt,Vgt),tyt(Fgt.charCodeAt(Lgt))&&_yt({},zgt,Vgt),{type:6,value:parseInt("0x"+t,16),start:e,end:Lgt}}(t);if(Xgt(n))return function(e){let t="0"+Fgt[Lgt++];for(;Lgt<jgt&&Xgt(Fgt[Lgt]);)t+=Fgt[Lgt++];return(tyt(Fgt.charCodeAt(Lgt))||Zgt(Fgt.charCodeAt(Lgt)))&&_yt({},zgt,Vgt),{type:6,value:parseInt(t,8),octal:!0,start:e,end:Lgt}}(t);n&&Zgt(n.charCodeAt(0))&&_yt({},zgt,Vgt)}for(;Zgt(Fgt.charCodeAt(Lgt));)e+=Fgt[Lgt++];n=Fgt[Lgt]}if("."===n){for(e+=Fgt[Lgt++];Zgt(Fgt.charCodeAt(Lgt));)e+=Fgt[Lgt++];n=Fgt[Lgt]}if("e"===n||"E"===n)if(e+=Fgt[Lgt++],"+"!==(n=Fgt[Lgt])&&"-"!==n||(e+=Fgt[Lgt++]),Zgt(Fgt.charCodeAt(Lgt)))for(;Zgt(Fgt.charCodeAt(Lgt));)e+=Fgt[Lgt++];else _yt({},zgt,Vgt);return tyt(Fgt.charCodeAt(Lgt))&&_yt({},zgt,Vgt),{type:6,value:parseFloat(e),start:t,end:Lgt}}function dyt(){var e,t,n,r;return Bgt=null,iyt(),e=Lgt,t=function(){var e,t,n,r;for(Kgt("/"===(e=Fgt[Lgt]),"Regular expression literal must start with a slash"),t=Fgt[Lgt++],n=!1,r=!1;Lgt<jgt;)if(t+=e=Fgt[Lgt++],"\\"===e)eyt((e=Fgt[Lgt++]).charCodeAt(0))&&_yt({},qgt),t+=e;else if(eyt(e.charCodeAt(0)))_yt({},qgt);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||_yt({},qgt),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";Lgt<jgt&&nyt((e=Fgt[Lgt]).charCodeAt(0));)++Lgt,"\\"===e&&Lgt<jgt?_yt({},zgt,Vgt):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&_yt({},Ugt,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(e,t)=>{if(parseInt(t,16)<=1114111)return"x";_yt({},Ugt)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(F0){_yt({},Ugt)}try{return new RegExp(e,t)}catch(r){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Lgt}}function fyt(){if(iyt(),Lgt>=jgt)return{type:2,start:Lgt,end:Lgt};const e=Fgt.charCodeAt(Lgt);return tyt(e)?lyt():40===e||41===e||59===e?uyt():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(Kgt("'"===(e=Fgt[Lgt])||'"'===e,"String literal must starts with a quote"),t=Lgt,++Lgt;Lgt<jgt;){if((n=Fgt[Lgt++])===e){e="";break}if("\\"===n)if((n=Fgt[Lgt++])&&eyt(n.charCodeAt(0)))"\r"===n&&"\n"===Fgt[Lgt]&&++Lgt;else switch(n){case"u":case"x":"{"===Fgt[Lgt]?(++Lgt,i+=ayt()):i+=oyt(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:Xgt(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),Lgt<jgt&&Xgt(Fgt[Lgt])&&(o=!0,r=8*r+"01234567".indexOf(Fgt[Lgt++]),"0123".includes(n)&&Lgt<jgt&&Xgt(Fgt[Lgt])&&(r=8*r+"01234567".indexOf(Fgt[Lgt++]))),i+=String.fromCharCode(r)):i+=n}else{if(eyt(n.charCodeAt(0)))break;i+=n}}return""!==e&&_yt({},zgt,Vgt),{type:8,value:i,octal:o,start:t,end:Lgt}}():46===e?Zgt(Fgt.charCodeAt(Lgt+1))?cyt():uyt():Zgt(e)?cyt():uyt()}function pyt(){const e=Bgt;return Lgt=e.end,Bgt=fyt(),Lgt=e.end,e}function hyt(){const e=Lgt;Bgt=fyt(),Lgt=e}function myt(e,t,n){const r=new Mgt("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function gyt(e,t){const n=new Mgt("CallExpression");return n.callee=e,n.arguments=t,n}function yyt(e){const t=new Mgt($gt);return t.name=e,t}function vyt(e){const t=new Mgt("Literal");return t.value=e.value,t.raw=Fgt.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function byt(e,t,n){const r=new Mgt("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function wyt(e,t,n){const r=new Mgt("Property");return r.key=t,r.value=n,r.kind=e,r}function _yt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(e,t)=>(Kgt(t<r.length,"Message reference must be in range"),r[t]));throw(n=new Error(i)).index=Lgt,n.description=i,n}function xyt(e){2===e.type&&_yt(e,"Unexpected end of input"),6===e.type&&_yt(e,"Unexpected number"),8===e.type&&_yt(e,"Unexpected string"),3===e.type&&_yt(e,"Unexpected identifier"),4===e.type&&_yt(e,"Unexpected reserved word"),_yt(e,zgt,e.value)}function Eyt(e){const t=pyt();7===t.type&&t.value===e||xyt(t)}function Syt(e){return 7===Bgt.type&&Bgt.value===e}function kyt(e){return 4===Bgt.type&&Bgt.value===e}function Tyt(){const e=[];for(Lgt=Bgt.start,Eyt("[");!Syt("]");)Syt(",")?(pyt(),e.push(null)):(e.push(jyt()),Syt("]")||Eyt(","));return pyt(),function(e){const t=new Mgt("ArrayExpression");return t.elements=e,t}(e)}function Cyt(){Lgt=Bgt.start;const e=pyt();return 8===e.type||6===e.type?(e.octal&&_yt(e,Hgt),vyt(e)):yyt(e.value)}function Ayt(){var e,t,n;return Lgt=Bgt.start,3===(e=Bgt).type?(n=Cyt(),Eyt(":"),wyt("init",n,jyt())):2!==e.type&&7!==e.type?(t=Cyt(),Eyt(":"),wyt("init",t,jyt())):void xyt(e)}function Iyt(){var e,t,n=[],r={},i=String;for(Lgt=Bgt.start,Eyt("{");!Syt("}");)t="$"+((e=Ayt()).key.type===$gt?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?_yt({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),Syt("}")||Eyt(",");return Eyt("}"),function(e){const t=new Mgt("ObjectExpression");return t.properties=e,t}(n)}const Oyt={if:1};function Nyt(){var e,t,n;if(Syt("("))return function(){Eyt("(");const e=Byt();return Eyt(")"),e}();if(Syt("["))return Tyt();if(Syt("{"))return Iyt();if(e=Bgt.type,Lgt=Bgt.start,3===e||Oyt[Bgt.value])n=yyt(pyt().value);else if(8===e||6===e)Bgt.octal&&_yt(Bgt,Hgt),n=vyt(pyt());else{if(4===e)throw new Error(Wgt);1===e?((t=pyt()).value="true"===t.value,n=vyt(t)):5===e?((t=pyt()).value=null,n=vyt(t)):Syt("/")||Syt("/=")?(n=vyt(dyt()),hyt()):xyt(pyt())}return n}function Dyt(){const e=[];if(Eyt("("),!Syt(")"))for(;Lgt<jgt&&(e.push(jyt()),!Syt(")"));)Eyt(",");return Eyt(")"),e}function Ryt(){return Eyt("."),function(){Lgt=Bgt.start;const e=pyt();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||xyt(e),yyt(e.value)}()}function Myt(){Eyt("[");const e=Byt();return Eyt("]"),e}function Pyt(){const e=function(){var e;for(e=Nyt();;)if(Syt("."))e=byt(".",e,Ryt());else if(Syt("("))e=gyt(e,Dyt());else{if(!Syt("["))break;e=byt("[",e,Myt())}return e}();if(7===Bgt.type&&(Syt("++")||Syt("--")))throw new Error(Wgt);return e}function Fyt(){var e,t;if(7!==Bgt.type&&4!==Bgt.type)t=Pyt();else{if(Syt("++")||Syt("--"))throw new Error(Wgt);if(Syt("+")||Syt("-")||Syt("~")||Syt("!"))e=pyt(),t=Fyt(),t=function(e,t){const n=new Mgt("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(kyt("delete")||kyt("void")||kyt("typeof"))throw new Error(Wgt);t=Pyt()}}return t}function Lyt(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function jyt(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,l,u;if(e=Bgt,l=Fyt(),0===(i=Lyt(r=Bgt)))return l;for(r.prec=i,pyt(),t=[e,Bgt],o=[l,r,a=Fyt()];(i=Lyt(Bgt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=myt(s,l,a),o.push(n);(r=pyt()).prec=i,o.push(r),t.push(Bgt),n=Fyt(),o.push(n)}for(n=o[u=o.length-1],t.pop();u>1;)t.pop(),n=myt(o[u-1].value,o[u-2],n),u-=2;return n}(),Syt("?")&&(pyt(),t=jyt(),Eyt(":"),e=function(e,t,n){const r=new Mgt("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,jyt())),e}function Byt(){const e=jyt();if(Syt(","))throw new Error(Wgt);return e}function $yt(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...$yt(e.object)),t.push(...$yt(e.property))),t)}function zyt(e){return"MemberExpression"===e.object.type?zyt(e.object):"datum"===e.object.name}function Uyt(e){const t=function(e){Lgt=0,jgt=(Fgt=e).length,Bgt=null,hyt();const t=Byt();if(2!==Bgt.type)throw new Error("Unexpect token after expression.");return t}(e),n=new Set;return t.visit(e=>{"MemberExpression"===e.type&&zyt(e)&&n.add($yt(e).slice(1).join("."))}),n}class qyt extends $ht{clone(){return new qyt(null,this.model,vit(this.filter))}constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Wyt(this.model,this.filter,this),this._dependentFields=Uyt(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Hyt(e,t,n,r="datum"){const i=OPe(t)?t:t.param,o=Bit(i),a=jPe(o+ggt);let s;try{s=e.getSelectionComponent(o,i)}catch(F0){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const l=`${s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest("}${a}, ${r}${"global"===s.resolve?")":`, ${jPe(s.resolve)})`}`,u=`length(data(${a}))`;return!1===t.empty?`${u} && ${l}`:`!${u} || ${l}`}function Vyt(e,t,n){const r=Bit(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(F0){return r}if(i||a){if(i&&!a){const e=o.project.items.filter(e=>e.channel===i);!e.length||e.length>1?(a=o.project.items[0].field,Flt(function(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${jPe(t)} encoding found for selection ${jPe(n.param)}. Using "field": ${jPe(r)}.`}(e,i,n,a))):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&Flt(function(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${jPe(e)}.`}(a));return`${o.name}[${jPe(Git(a))}]`}function Wyt(e,t,n){return $it(t,t=>OPe(t)?t:function(e){return sot(e,"param")}(t)?Hyt(e,t,n):hut(t))}function Gyt(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Yyt(e,t,n,r={header:!1}){var i,o;const{disable:a,orient:s,scale:l,labelExpr:u,title:c,zindex:d,...f}=e.combine();if(!a){for(const e in f){const n=e,r=Jdt[n],i=f[n];if(r&&r!==t&&"both"!==r)delete f[n];else if(Qdt(i)){const{condition:e,...t}=i,r=aPe(e),o=Zdt[n];if(o){const{vgProp:e,part:i}=o,a=[...r.map(e=>{const{test:t,...n}=e;return{test:Wyt(null,t),...n}}),t];Gyt(f,i,e,a),delete f[n]}else if(null===o){const e={signal:r.map(e=>{const{test:t,...n}=e;return`${Wyt(null,t)} ? ${Ust(n)} : `}).join("")+Ust(t)};f[n]=e}}else if(Dst(i)){const e=Zdt[n];if(e){const{vgProp:t,part:r}=e;Gyt(f,r,t,i),delete f[n]}}Sit(["labelAlign","labelBaseline"],n)&&null===f[n]&&delete f[n]}if("grid"===t){if(!f.grid)return;if(f.encode){const{grid:e}=f.encode;f.encode={...e?{grid:e}:{}},Mit(f.encode)&&delete f.encode}return{scale:l,orient:s,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Qit(d,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==u){let e=u;(null==(o=null==(i=f.encode)?void 0:i.labels)?void 0:o.update)&&Dst(f.encode.labels.update.text)&&(e=Yit(u,"datum.label",f.encode.labels.update.text.signal)),Gyt(f,"labels","text",{signal:e})}if(null===f.labelAlign&&delete f.labelAlign,f.encode){for(const t of Xdt)e.hasAxisPart(t)||delete f.encode[t];Mit(f.encode)&&delete f.encode}const t=function(e,t){if(e)return PMe(e)&&!Nst(e)?e.map(e=>Ldt(e,t)).join(", "):e}(c,n);return{scale:l,orient:s,grid:!1,...t?{title:t}:{},...f,...!1===n.aria?{aria:!1}:{},zindex:Qit(d,0)}}}}function Kyt(e){const{axes:t}=e.component,n=[];for(const r of $at)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function Zyt(e,t,n,r){return Object.assign.apply(null,[{},...e.map(e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...Pit(i),...Pit(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${qst(i[t])} : ${qst(o[t])}`};return s}return t[e]})])}function Qyt(e,t){var n;const r=[{}];for(const i of e){let e=null==(n=t[i])?void 0:n.style;if(e){e=aPe(e);for(const n of e)r.push(t.style[n])}}return Object.assign.apply(null,r)}function Xyt(e,t,n,r={}){var i;const o=Kst(e,n,t);if(void 0!==o)return{configFrom:"style",configValue:o};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==(null==(i=r[a])?void 0:i[e]))return{configFrom:a,configValue:r[a][e]};return{}}const Jyt={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!Uut(e)&&gdt(t)&&!Est(null==t?void 0:t.bin)&&!Sst(null==t?void 0:t.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||nvt(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||tvt(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&Sit(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!FMe(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,gdt(t)&&!!t.timeUnit,gdt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Uut(t)&&"log"!==t){if(gdt(e)){if(Est(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Sit(["month","hours","day","quarter"],null==(i=tut(e.timeUnit))?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:function({format:e,fieldOrDatumDef:t}){if("d"===e)return 1;if(gdt(t)){const{timeUnit:e}=t;if(e){const t=nut(e);if(t)return{signal:t}}}return},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=rvt(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return Qst(i?[sdt(i)]:[],gdt(a)?[sdt(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(PMe(n))return Ydt(t,n);if(Dst(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&Ndt(t))return 1;return 0}(n,t)};function evt(e){return`(((${e.signal} % 360) + 360) % 360)`}function tvt(e,t,n,r){if(void 0!==e){if("x"===n){if(Dst(e)){const n=evt(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${Dst(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Dst(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Dst(e)){const n=evt(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${Dst(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Dst(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function nvt(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(Dst(e)){const n=evt(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${Dst(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(Dst(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function rvt(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?Xst(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class ivt extends $ht{clone(){return new ivt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this._dependentFields=Uyt(this.transform.calculate)}static parseAllForSortIndex(e,t){return t.forEachFieldDef((t,n)=>{if(kdt(t)&&rdt(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map((e,t)=>`${hut({field:r,timeUnit:i,equal:e})} ? ${t} : `).join("")+o.length;e=new ivt(e,{calculate:a,as:ovt(t,n,{forAs:!0})})}}),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${xit(this.transform)}`}}function ovt(e,t,n){return Odt(e,{prefix:t,suffix:"sort_index",...n})}function avt(e,t){return Sit(["top","bottom"],t)?"column":Sit(["left","right"],t)||"row"===e?"row":"column"}function svt(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return Qit((t||{})[e],i[e],n.header[e])}function lvt(e,t,n,r){const i={};for(const o of e){const e=svt(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const uvt=["row","column"],cvt=["header","footer"];function dvt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=lvt(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=avt(t,s),u=not(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...pvt(u,l),...fvt(l,u,o),...wvt(r,i,t,zft,Bft)}}}function fvt(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=nvt(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function pvt(e,t){const n=tvt(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function hvt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of cvt)if(n[i])for(const o of n[i]){const a=yvt(e,t,i,n,o);null!=a&&r.push(a)}return r}function mvt(e,t){const{sort:n}=e;return ndt(n)?{field:Odt(n,{expr:"datum"}),order:n.order??"ascending"}:PMe(n)?{field:ovt(e,t,{expr:"datum"}),order:"ascending"}:{field:Odt(e,{expr:"datum"}),order:n??"ascending"}}function gvt(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=lvt(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=Hct({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=avt(t,s);return{text:{signal:l?Yit(Yit(l,"datum.label",u),"datum.value",Odt(e,{expr:"parent"})):u},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...pvt(o,c),...fvt(c,o,a),...wvt(n,e,t,Uft,$ft)}}function yvt(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=lvt(["labelOrient"],a.header,s,t);("row"===t&&!Sit(["top","bottom"],e)||"column"===t&&!Sit(["left","right"],e))&&(o=gvt(a,t,s))}const l=wwt(e)&&!idt(e.facet),u=i.axes,c=(null==u?void 0:u.length)>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:mvt(a,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const vvt={column:{start:0,end:1},row:{start:1,end:0}};function bvt(e,t){return vvt[t][e]}function wvt(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=svt(a,null==t?void 0:t.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function _vt(e){return[...xvt(e,"width"),...xvt(e,"height"),...xvt(e,"childWidth"),...xvt(e,"childHeight")]}function xvt(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(Uut(r)&&Rst(o)){const r=e.scaleName(n);if(wwt(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Evt(r,o)]}return[Evt(r,o),{name:i,update:Svt(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${ipt(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Evt(e,t){const n=`${e}_step`;return Dst(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Svt(e,t,n){const r=t.get("type"),i=t.get("padding"),o=Qit(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${qst(a)}, ${qst(o)}) * ${e}_step`}function kvt(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Tvt(e,t){return Pit(e).reduce((n,r)=>({...n,...Emt({model:t,channelDef:e[r],vgChannel:r,mainRefFn:e=>zst(e.value),invalidValueRef:void 0})}),{})}function Cvt(e,t){if(wwt(t))return"theta"===e?"independent":"shared";if(xwt(t))return"shared";if(_wt(t))return zat(e)||"theta"===e||"radius"===e?"independent":"shared";throw new Error("invalid model type for resolve")}function Avt(e,t){const n=e.scale[t],r=zat(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&Flt(function(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}(t)),"independent"):e[r][t]||"shared"}const Ivt=Pit({aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1});class Ovt extends Eht{}const Nvt={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:l,mark:u}=n,c=a.filled&&"trail"!==u;let d={...Hst({},n,xct),...Rmt(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,p=i.get("symbolFillColor")??l.legend.symbolFillColor,h=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=void 0===f?Dvt(s.opacity)??a.opacity:void 0;if(d.fill)if("fill"===r||c&&r===Tot)delete d.fill;else if(sot(d.fill,"field"))p?delete d.fill:(d.fill=zst(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=zst(m??1));else if(PMe(d.fill)){const e=Rvt(s.fill??s.color)??a.fill??(c&&a.color);e&&(d.fill=zst(e))}if(d.stroke)if("stroke"===r||!c&&r===Tot)delete d.stroke;else if(sot(d.stroke,"field")||h)delete d.stroke;else if(PMe(d.stroke)){const e=Qit(Rvt(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(d.stroke={value:e})}if(r!==Dot){const e=gdt(t)&&Pvt(n,i,t);e?d.opacity=[{test:e,...zst(m??1)},zst(l.legend.unselectedOpacity)]:m&&(d.opacity=zst(m))}return d={...d,...e},Mit(d)?void 0:d},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const l=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?Dvt(a.opacity)||o.opacity:void 0;l&&(s.opacity=zst(l));return s={...s,...e},Mit(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=gdt(t)?Pvt(n,i,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=o;let d;Uct(c)?d=Wct({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:a}):void 0===u&&void 0===c&&a.customFormatTypes&&("quantitative"===t.type&&a.numberFormatType?d=Wct({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):"temporal"===t.type&&a.timeFormatType&&gdt(t)&&void 0===t.timeUnit&&(d=Wct({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Mit(f)?void 0:f},entries:function(e,{legendCmpt:t}){const n=t.get("selections");return(null==n?void 0:n.length)?{...e,fill:{value:"transparent"}}:e}};function Dvt(e){return Mvt(e,(e,t)=>Math.max(e,t.value))}function Rvt(e){return Mvt(e,(e,t)=>Qit(e,t.value))}function Mvt(e,t){return function(e){const t=null==e?void 0:e.condition;return!!t&&(PMe(t)||Sdt(t))}(e)?aPe(e.condition).reduce(t,e.value):Sdt(e)?e.value:void 0}function Pvt(e,t,n){const r=t.get("selections");if(!(null==r?void 0:r.length))return;const i=jPe(n.field);return r.map(e=>`(!length(data(${jPe(Bit(e)+ggt)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`).join(" || ")}const Fvt={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Gct(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Yct(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(Hut(i))return"horizontal"===n?"top"===r||"bottom"===r?jvt(t,"width",a,o):a:jvt(t,"height",l,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(Sit(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=Rvt(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Pdt(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Xot(n)&&Hut(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(PMe(n))return Ydt(t,n);if(Dst(n))return n;return}(t,e)};function Lvt(e){const{legend:t}=e;return Qit(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(Xot(e)){if(Sit(["quarter","month","day"],t))return"symbol";if(Hut(n))return"gradient"}return"symbol"}(e))}function jvt(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Bvt(e){const t=bwt(e)?function(e){const{encoding:t}=e,n={};for(const r of[Tot,...Hft]){const i=$dt(t[r]);i&&e.getScaleComponent(r)&&(r===Iot&&gdt(i)&&i.type===Eut||(n[r]=zvt(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Bvt(r);for(const i of Pit(r.component.legends))n.legend[i]=Avt(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Uvt(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Pit(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function $vt(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!(null==n?void 0:n.values);case"title":if("title"===t&&e===(null==r?void 0:r.title))return!0}return e===(n||{})[t]}function zvt(e,t){var n;let r=e.legend(t);const{markDef:i,encoding:o,config:a}=e,s=a.legend,l=new Ovt({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){var r;const i=null==(r=e.fieldDef(t))?void 0:r.field;for(const o of Fit(e.component.selection??{})){const e=o.project.hasField[i]??o.project.hasChannel[t];if(e&&sgt.defined(o)){const t=n.get("selections")??[];t.push(o.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,l);const u=void 0!==r?!r:s.disable;if(l.set("disable",u,void 0!==r),u)return l;r=r||{};const c=e.getScaleComponent(t).get("type"),d=$dt(o[t]),f=gdt(d)?null==(n=tut(d.timeUnit))?void 0:n.unit:void 0,p=r.orient||a.legend.orient||"right",h=Lvt({legend:r,channel:t,timeUnit:f,scaleType:c}),m=function({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}({legend:r,legendType:h,orient:p,legendConfig:s}),g={legend:r,channel:t,model:e,markDef:i,encoding:o,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:c,orient:p,legendType:h,direction:m};for(const _ of Ivt){if("gradient"===h&&_.startsWith("symbol")||"symbol"===h&&_.startsWith("gradient"))continue;const n=_ in Fvt?Fvt[_](g):r[_];if(void 0!==n){const i=$vt(n,_,r,e.fieldDef(t));(i||void 0===a.legend[_])&&l.set(_,n,i)}}const y=(null==r?void 0:r.encoding)??{},v=l.get("selections"),b={},w={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:l,legendType:h};for(const _ of["labels","legend","title","symbols","gradient","entries"]){const t=Tvt(y[_]??{},e),n=_ in Nvt?Nvt[_](t,w):t;void 0===n||Mit(n)||(b[_]={...(null==v?void 0:v.length)&&gdt(d)?{name:`${Bit(d.field)}_legend_${_}`}:{},...(null==v?void 0:v.length)?{interactive:!!v}:{},update:n})}return Mit(b)||l.set("encode",b,!!(null==r?void 0:r.encoding)),l}function Uvt(e,t){var n,r,i,o;if(!e)return t.clone();const a=e.getWithExplicit("orient"),s=t.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;let l=!1;for(const u of Ivt){const n=Aht(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(e,t)=>{switch(u){case"symbolType":return qvt(e,t);case"title":return Jst(e,t);case"type":return l=!0,kht("symbol")}return Cht(e,t,u,"legend")});e.setWithExplicit(u,n)}return l&&((null==(r=null==(n=e.implicit)?void 0:n.encode)?void 0:r.gradient)&&zit(e.implicit,["encode","gradient"]),(null==(o=null==(i=e.explicit)?void 0:i.encode)?void 0:o.gradient)&&zit(e.explicit,["encode","gradient"])),e}function qvt(e,t){return"circle"===t.value?t:e}function Hvt(e){const t=e.component.legends,n={};for(const i of Pit(t)){const r=aot(e.getScaleComponent(i).get("domains"));if(n[r])for(const e of n[r]){Uvt(e,t[i])||n[r].push(t[i])}else n[r]=[t[i].clone()]}const r=Fit(n).flat().map(t=>function(e,t){var n,r,i;const{disable:o,labelExpr:a,selections:s,...l}=e.combine();if(o)return;!1===t.aria&&null==l.aria&&(l.aria=!1);if(null==(n=l.encode)?void 0:n.symbols){const e=l.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||l.stroke||(e.stroke={value:"transparent"});for(const t of Hft)l[t]&&delete e[t]}l.title||delete l.title;if(void 0!==a){let e=a;(null==(i=null==(r=l.encode)?void 0:r.labels)?void 0:i.update)&&Dst(l.encode.labels.update.text)&&(e=Yit(a,"datum.label",l.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(l,"labels","text",{signal:e})}return l}(t,e.config)).filter(e=>void 0!==e);return r}function Vvt(e){return xwt(e)||_wt(e)?function(e){return e.children.reduce((e,t)=>e.concat(t.assembleProjections()),Wvt(e))}(e):Wvt(e)}function Wvt(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(e=>e.signal).join(", ")}]`},o=t.data.reduce((t,n)=>{const r=Dst(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return Sit(t,r)||t.push(r),t},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Gvt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Yvt extends Eht{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Kvt(e){e.component.projection=bwt(e)?function(e){if(e.hasProjection){const t=Ist(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[xot,_ot],[Sot,Eot]])($dt(n[r[0]])||$dt(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(Iot)&&e.typedFieldDef(Iot).type===Eut&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(Lht.Main));return t}(e):void 0,o=new Yvt(e.projectionName(!0),{...Ist(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const r of e.children)Kvt(r);const n=Tit(e.children,e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=Tit(Gvt,n=>!bPe(e.explicit,n)&&!bPe(t.explicit,n)||!!(bPe(e.explicit,n)&&bPe(t.explicit,n)&&oot(e.get(n),t.get(n))));if(oot(e.size,t.size)){if(n)return e;if(oot(e.explicit,{}))return t;if(oot(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0});if(t&&n){const n=e.projectionName(!0),r=new Yvt(n,t.specifiedProjection,t.size,vit(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function Zvt(e,t,n,r){if(Kdt(t,n)){const i=bwt(e)?e.axis(n)??e.legend(n)??{}:{},o=Odt(t,{expr:"datum"}),a=Odt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Odt(t,{binSuffix:"range",forAs:!0}),formula:Xct(o,a,i.format,i.formatType,r)}}return{}}function Qvt(e,t){return`${xst(e)}_${t}`}function Xvt(e,t,n){const r=Qvt(Hdt(n,void 0)??{},t);return e.getName(`${r}_bins`)}function Jvt(e,t,n){let r,i;r=function(e){return"as"in e}(e)?OPe(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[Odt(e,{forAs:!0}),Odt(e,{binSuffix:"end",forAs:!0})];const o={...Hdt(t,void 0)},a=Qvt(o,e.field),{signal:s,extentSignal:l}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(Tst(o.extent)){const e=o.extent;i=Vyt(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}}}}class ebt extends $ht{clone(){return new ebt(null,vit(this.bins))}constructor(e,t){super(e),this.bins=t}static makeFromEncoding(e,t){const n=t.reduceFieldDef((e,n,r)=>{if(Edt(n)&&Est(n.bin)){const{key:i,binComponent:o}=Jvt(n,n.bin,t);e[i]={...o,...e[i],...Zvt(t,n,r,t.config)}}return e},{});return Mit(n)?null:new ebt(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=Jvt(t,t.bin,n);return new ebt(e,{[r]:i})}merge(e,t){for(const n of Pit(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=Iit([...this.bins[n].as,...e.bins[n].as],xit)):this.bins[n]=e.bins[n];for(const n of e.children)e.removeChild(n),n.parent=this;e.remove()}producedFields(){return new Set(Fit(this.bins).map(e=>e.as).flat(2))}dependentFields(){return new Set(Fit(this.bins).map(e=>e.field))}hash(){return`Bin ${xit(this.bins)}`}assemble(){return Fit(this.bins).flatMap(e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:Git(e.field),as:n,signal:e.signal,...Tst(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:Git(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const s of r)for(let e=0;e<2;e++)t.push({type:"formula",expr:Odt({field:n[e]},{expr:"datum"}),as:s[e]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t})}}function tbt(e,t,n,r){var i;const o=bwt(r)?r.encoding[yat(t)]:void 0;if(Edt(n)&&bwt(r)&&ddt(n,o,r.markDef,r.config)){e.add(Odt(n,{})),e.add(Odt(n,{suffix:"end"}));const{mark:i,markDef:o,config:a}=r,s=udt({fieldDef:n,markDef:o,config:a});bct(i)&&.5!==s&&zat(t)&&(e.add(Odt(n,{suffix:Vht})),e.add(Odt(n,{suffix:Wht}))),n.bin&&Kdt(n,t)&&e.add(Odt(n,{binSuffix:"range"}))}else if(Kot(t)){const n=Yot(t);e.add(r.getName(n))}else e.add(Odt(n));var a;return kdt(n)&&(FMe(a=null==(i=n.scale)?void 0:i.range)&&"field"in a)&&e.add(n.scale.range.field),e}class nbt extends $ht{clone(){return new nbt(null,new Set(this.dimensions),vit(this.measures))}constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef(e=>{e.aggregate&&(n=!0)});const r={},i=new Set;return n?(t.forEachFieldDef((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([Odt(e,{forAs:!0})]);else{if(mst(o)||gst(o)){const e=mst(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([Odt({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([Odt(e,{forAs:!0})]);sst(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([Odt({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([Odt({field:a,aggregate:"max"},{forAs:!0})]))}else tbt(i,n,e,t)}),i.size+Pit(r).length===0?null:new nbt(e,i,r)):null}static makeFromTransform(e,t){var n;const r=new Set,i={};for(const o of t.aggregate){const{op:e,field:t,as:r}=o;e&&("count"===e?(i["*"]??(i["*"]={}),i["*"].count=new Set([r||Odt(o,{forAs:!0})])):(i[t]??(i[t]={}),(n=i[t])[e]??(n[e]=new Set),i[t][e].add(r||Odt(o,{forAs:!0}))))}for(const o of t.groupby??[])r.add(o);return r.size+Pit(i).length===0?null:new nbt(e,r,i)}merge(e){return Oit(this.dimensions,e.dimensions)?(function(e,t){for(const n of Pit(t)){const r=t[n];for(const t of Pit(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(function(...e){Mlt.debug(...e)}("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Pit(this.measures)])}producedFields(){const e=new Set;for(const t of Pit(this.measures))for(const n of Pit(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${xit({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of Pit(this.measures))for(const i of Pit(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:Git(r));return{type:"aggregate",groupby:[...this.dimensions].map(Git),ops:e,fields:t,as:n}}}class rbt extends $ht{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const i of eat){const e=t.facet[i];if(e){const{bin:n,sort:r}=e;this[i]={name:t.getName(`${i}_domain`),fields:[Odt(e),...Est(n)?[Odt(e,{binSuffix:"end"})]:[]],...ndt(r)?{sortField:r}:PMe(r)?{sortIndexField:ovt(e,i)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of eat)this[t]&&(e+=` ${t.charAt(0)}:${xit(this[t])}`);return e}get fields(){var e;const t=[];for(const n of eat)(null==(e=this[n])?void 0:e.fields)&&t.push(...this[n].fields);return t}dependentFields(){const e=new Set(this.fields);for(const t of eat)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of $at){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(Uut(r)&&Rst(i)){const n=Zbt(Qbt(this.childModel,t));n?e[t]=n:Flt(olt(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:l}=this[e];if(s){const{op:e=Jct,field:t}=s;i.push(t),o.push(e),a.push(Odt(s,{forAs:!0}))}else l&&(i.push(l),o.push("max"),a.push(l));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){var t;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of uvt){for(const e of cvt){const n=(r[l]&&r[l][e])??[];for(const e of n)if((null==(t=e.axes)?void 0:t.length)>0){o[l]=!0;break}}if(o[l]){const e=`length(data("${this.facet.name}"))`,t="row"===l?n?{signal:`ceil(${e} / ${n})`}:1:n?{signal:`min(${e}, ${n})`}:{signal:e};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:t}]})}}const{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,e)),i}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map(()=>"distinct");e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const a of[uot,lot])this[a]&&e.push(this.assembleRowColumnHeaderData(a,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function ibt(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function obt(e){const t={};return git(e.filter,e=>{if(fut(e)){let n=null;out(e)?n=Bst(e.equal):sut(e)?n=Bst(e.lte):aut(e)?n=Bst(e.lt):lut(e)?n=Bst(e.gt):uut(e)?n=Bst(e.gte):cut(e)?n=e.range[0]:dut(e)&&(n=(e.oneOf??e.in)[0]),n&&(Llt(n)?t[e.field]="date":APe(n)?t[e.field]="number":OPe(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}}),t}function abt(e){const t={};function n(e){var n;Wdt(e)?t[e.field]="date":"quantitative"===e.type&&(OPe(n=e.aggregate)&&Sit(["min","max"],n))?t[e.field]="number":Zit(e.field)>1?e.field in t||(t[e.field]="flatten"):kdt(e)&&ndt(e.sort)&&Zit(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((bwt(e)||wwt(e))&&e.forEachFieldDef((t,r)=>{if(Edt(t))n(t);else{const i=mat(r),o=e.fieldDef(i);n({...t,type:o.type})}}),bwt(e)){const{mark:n,markDef:r,encoding:i}=e;if(vct(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];gdt(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class sbt extends $ht{clone(){return new sbt(null,vit(this._parse))}constructor(e,t){super(e),this._parse=t}hash(){return`Parse ${xit(this._parse)}`}static makeExplicit(e,t,n){var r;let i={};const o=t.data;return!Rht(o)&&(null==(r=null==o?void 0:o.format)?void 0:r.parse)&&(i=o.format.parse),this.makeWithAncestors(e,i,{},n)}static makeWithAncestors(e,t,n,r){for(const a of Pit(n)){const e=r.getWithExplicit(a);void 0!==e.value&&(e.explicit||e.value===n[a]||"derived"===e.value||"flatten"===n[a]?delete n[a]:Flt(flt(a,n[a],e.value)))}for(const a of Pit(t)){const e=r.get(a);void 0!==e&&(e===t[a]?delete t[a]:Flt(flt(a,t[a],e)))}const i=new Eht(t,n);r.copyAll(i);const o={};for(const a of Pit(i.combine())){const e=i.get(a);null!==e&&(o[a]=e)}return 0===Pit(o).length||r.parseNothing?null:new sbt(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of Pit(this._parse)){const n=this._parse[t];1===Zit(t)&&(e[t]=n)}return e}producedFields(){return new Set(Pit(this._parse))}dependentFields(){return new Set(Pit(this._parse))}assembleTransforms(e=!1){return Pit(this._parse).filter(t=>!e||Zit(t)>1).map(e=>{const t=function(e,t){const n=qit(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${ibt(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${ibt(t.slice(4,t.length))}')`;return Flt(`Unrecognized parse "${t}".`),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:Kit(e)}}).filter(e=>null!==e)}}class lbt extends $ht{clone(){return new lbt(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Vft])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Vft}}}class ubt extends $ht{clone(){return new ubt(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${xit(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class cbt extends $ht{clone(){return new cbt(null,this.params)}constructor(e,t){super(e),this.params=t}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${xit(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class dbt extends $ht{constructor(e){let t;if(super(null),e??(e={name:"source"}),Rht(e)||(t=e.format?{..._it(e.format,["parse"])}:{}),Nht(e))this._data={values:e.values};else if(Oht(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];Sit(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else Pht(e)?this._data={values:[{type:"Sphere"}]}:(Dht(e)||Rht(e))&&(this._data={});this._generator=Rht(e),e.name&&(this._name=e.name),t&&!Mit(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var fbt,pbt=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n};function hbt(e){return e instanceof dbt||e instanceof ubt||e instanceof cbt}class mbt{constructor(){fbt.set(this,void 0),pbt(this,fbt,!1,"f")}setModified(){pbt(this,fbt,!0,"f")}get modifiedFlag(){return function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}(this,fbt,"f")}}fbt=new WeakMap;class gbt extends mbt{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort((e,t)=>t[1]-e[1]);for(const n of t)this.run(n[0]);return this.modifiedFlag}}class ybt extends mbt{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}class vbt extends ybt{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map(e=>e.hash()),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const r of Pit(n))n[r].length>1&&(this.setModified(),this.mergeNodes(e,n[r]))}}class bbt extends ybt{constructor(e){super(),this.requiresSelectionId=e&&xgt(e)}run(e){e instanceof lbt&&(this.requiresSelectionId&&(hbt(e.parent)||e.parent instanceof nbt||e.parent instanceof sbt)||(this.setModified(),e.remove()))}}class wbt extends mbt{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof Hht&&(n=e.producedFields(),Nit(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class _bt extends ybt{constructor(){super()}run(e){e instanceof zht&&!e.isRequired()&&(this.setModified(),e.remove())}}class xbt extends gbt{run(e){if(!(hbt(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof sbt)if(e instanceof sbt)this.setModified(),e.merge(t);else{if(Rit(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class Ebt extends gbt{run(e){const t=[...e.children],n=e.children.filter(e=>e instanceof sbt);if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of Pit(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!Mit(r)){this.setModified();const n=new sbt(e,r);for(const i of t){if(i instanceof sbt)for(const e of Pit(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof sbt&&0===Pit(i.parse).length&&i.remove()}}}}}class Sbt extends gbt{run(e){e instanceof zht||e.numChildren()>0||e instanceof rbt||e instanceof dbt||(this.setModified(),e.remove())}}class kbt extends gbt{run(e){const t=e.children.filter(e=>e instanceof Hht),n=t.pop();for(const r of t)this.setModified(),n.merge(r)}}class Tbt extends gbt{run(e){const t=e.children.filter(e=>e instanceof nbt),n={};for(const r of t){const e=xit(r.groupBy);e in n||(n[e]=[]),n[e].push(r)}for(const r of Pit(n)){const t=n[r];if(t.length>1){const n=t.pop();for(const r of t)n.merge(r)&&(e.removeChild(r),r.parent=n,r.remove(),this.setModified())}}}}class Cbt extends gbt{constructor(e){super(),this.model=e}run(e){const t=!(hbt(e)||e instanceof qyt||e instanceof sbt||e instanceof lbt),n=[],r=[];for(const i of e.children)i instanceof ebt&&(t&&!Rit(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof ebt?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class Abt extends gbt{run(e){const t=[...e.children];if(!kit(t,e=>e instanceof zht)||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof zht){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof zht))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class Ibt extends $ht{clone(){return new Ibt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=Iit(this.transform.groupby.concat(e),e=>e)}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map(e=>e.field).filter(e=>void 0!==e).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??Odt(e)}hash(){return`JoinAggregateTransform ${xit(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const i of this.transform.joinaggregate)t.push(i.op),n.push(this.getDefaultName(i)),e.push(void 0===i.field?null:i.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class Obt extends $ht{clone(){return new Obt(null,{...this.filter})}constructor(e,t){super(e),this.filter=t}static make(e,t,n){const{config:r,markDef:i}=t,{marks:o,scales:a}=n;if("include-invalid-values"===o&&"include-invalid-values"===a)return null;const s=t.reduceFieldDef((e,n,o)=>{const a=sst(o)&&t.getScaleComponent(o);if(a){const t=a.get("type"),{aggregate:s}=n,l=Rct({scaleChannel:o,markDef:i,config:r,scaleType:t,isCountAggregate:bst(s)});"show"!==l&&"always-valid"!==l&&(e[n.field]=n)}return e},{});return Pit(s).length?new Obt(e,s):null}dependentFields(){return new Set(Pit(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${xit(this.filter)}`}assemble(){const e=Pit(this.filter).reduce((e,t)=>{const n=this.filter[t],r=Odt(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (${Nbt(r)}))`):"quantitative"===n.type&&e.push(Nbt(r))),e},[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}function Nbt(e){return`isValid(${e}) && isFinite(+${e})`}class Dbt extends $ht{clone(){return new Dbt(null,vit(this._stack))}constructor(e,t){super(e),this._stack=t}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const c of t.sort)a.push(c.field),s.push(Qit(c.order,"ascending"));const l={field:a,order:s};let u;return u=function(e){return PMe(e)&&e.every(e=>OPe(e))&&e.length>1}(i)?i:OPe(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Dbt(e,{dimensionFieldDefs:[],stackField:n,groupby:r,offset:o,sort:l,facetby:[],as:u})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannels:i,fieldChannel:o,offset:a,impute:s}=n,l=i.map(e=>Bdt(r[e])).filter(e=>!!e),u=function(e){return e.stack.stackBy.reduce((e,t)=>{const n=Odt(t.fieldDef);return n&&e.push(n),e},[])}(t),c=t.encoding.order;let d;if(PMe(c)||gdt(c))d=Zst(c);else{const e=fdt(c)?c.sort:"y"===o?"descending":"ascending";d=u.reduce((t,n)=>(t.field.includes(n)||(t.field.push(n),t.order.push(e)),t),{field:[],order:[]})}return new Dbt(e,{dimensionFieldDefs:l,stackField:t.vgField(o),facetby:[],stackby:u,sort:d,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${xit(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:e,impute:t,groupby:n}=this._stack;return e.length>0?e.map(e=>e.bin?t?[Odt(e,{binSuffix:"mid"})]:[Odt(e,{}),Odt(e,{binSuffix:"end"})]:[Odt(e)]).flat():n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDefs:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:l}=this._stack;if(s)for(const u of n){const{bandPosition:n=.5,bin:o}=u;if(o){const t=Odt(u,{expr:"datum"}),r=Odt(u,{expr:"datum",binSuffix:"end"});e.push({type:"formula",expr:`${Nbt(t)} ? ${n}*${t}+${1-n}*${r} : ${t}`,as:Odt(u,{binSuffix:"mid",forAs:!0})})}e.push({type:"impute",field:r,groupby:[...i,...t],key:Odt(u,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:l,offset:a}),e}}class Rbt extends $ht{clone(){return new Rbt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=Iit(this.transform.groupby.concat(e),e=>e)}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach(t=>e.add(t.field)),this.transform.window.map(e=>e.field).filter(e=>void 0!==e).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??Odt(e)}hash(){return`WindowTransform ${xit(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const c of this.transform.window)t.push(c.op),n.push(this.getDefaultName(c)),r.push(void 0===c.param?null:c.param),e.push(void 0===c.field?null:c.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every(e=>yst(e)))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const c of this.transform.sort)a.push(c.field),s.push(c.order??"ascending");const l={field:a,order:s},u=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:l,...void 0!==u?{ignorePeers:u}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Mbt(e){if(e instanceof rbt)if(1!==e.numChildren()||e.children[0]instanceof zht){const n=e.model.component.data.main;Pbt(n);const r=(t=e,function e(n){if(!(n instanceof rbt)){const r=n.clone();if(r instanceof zht){const e=Fbt+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof nbt||r instanceof Dbt||r instanceof Rbt||r instanceof Ibt)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof nbt||t instanceof Dbt||t instanceof Rbt||t instanceof Ibt)&&t.addDimensions(e.fields),t.swapWithParent(),Mbt(e)}else e.children.map(Mbt);var t}function Pbt(e){if(e instanceof zht&&e.type===Lht.Main&&1===e.numChildren()){const t=e.children[0];t instanceof rbt||(t.swapWithParent(),Pbt(e))}}const Fbt="scale_";function Lbt(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Lbt(t.children))return!1}return!0}function jbt(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Bbt(e,t,n){let r=e.sources,i=!1;return i=jbt(new _bt,r)||i,i=jbt(new bbt(t),r)||i,r=r.filter(e=>e.numChildren()>0),i=jbt(new Sbt,r)||i,r=r.filter(e=>e.numChildren()>0),n||(i=jbt(new xbt,r)||i,i=jbt(new Cbt(t),r)||i,i=jbt(new wbt,r)||i,i=jbt(new Ebt,r)||i,i=jbt(new Tbt,r)||i,i=jbt(new kbt,r)||i,i=jbt(new vbt,r)||i,i=jbt(new Abt,r)||i),e.sources=r,i}class $bt{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new $bt(()=>e(t))}}function zbt(e){bwt(e)?function(e){const t=e.component.scales;for(const n of Pit(t)){const r=Ubt(e,n);if(t[n].setWithExplicit("domains",r),Wbt(e,n),e.component.data.isFaceted){let t=e;for(;!wwt(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)Mst(e)&&(e.data=Fbt+e.data.replace(Fbt,""))}}}(e):function(e){for(const n of e.children)zbt(n);const t=e.component.scales;for(const n of Pit(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):Aht(r,e.getWithExplicit("domains"),"domains","scale",Ybt);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&Flt(ult),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Ubt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=Gbt(t,n);if(!e)return void Flt(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=Gbt(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&$dt(r.x2)?$dt(r.x)?Aht(Hbt(n,i,e,"x"),Hbt(n,i,e,"x2"),"domain","scale",Ybt):Hbt(n,i,e,"x2"):"y"===t&&$dt(r.y2)?$dt(r.y)?Aht(Hbt(n,i,e,"y"),Hbt(n,i,e,"y2"),"domain","scale",Ybt):Hbt(n,i,e,"y2"):Hbt(n,i,e,t)}function qbt(e,t,n){var r;const i=null==(r=tut(n))?void 0:r.unit;return"temporal"===t||i?function(e,t,n){return e.map(e=>({signal:`{data: ${Gdt(e,{timeUnit:n,type:t})}}`}))}(e,t,i):[e]}function Hbt(e,t,n,r){const{encoding:i,markDef:o,mark:a,config:s,stack:l}=n,u=$dt(i[r]),{type:c}=u,d=u.timeUnit,f=function(e){const{marks:t,scales:n}=Bht(e);return t===n?Lht.Main:"include-invalid-values"===n?Lht.PreFilterInvalid:Lht.PostFilterInvalid}({invalid:Gst("invalid",o,s),isPath:vct(a)});if(function(e){return sot(e,"unionWith")}(t)){const i=Hbt(e,void 0,n,r);return Sht([...qbt(t.unionWith,c,d),...i.value])}if(Dst(t))return Sht([t]);if(t&&"unaggregated"!==t&&!Wut(t))return Sht(qbt(t,c,d));if(l&&r===l.fieldChannel){if("normalize"===l.offset)return kht([[0,1]]);const e=n.requestDataName(f);return kht([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const p=sst(r)&&gdt(u)?function(e,t,n){if(!Uut(n))return;const r=e.fieldDef(t),i=r.sort;if(rdt(i))return{op:"min",field:ovt(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(e=>e.fieldDef.field)]):void 0;if(ndt(i)){return Vbt(i,o&&!a.has(i.field))}if(function(e){return sot(e,"encoding")}(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:l}=r,u=o&&!a.has(l);if(mst(s)||gst(s))return Vbt({field:Odt(r),order:n},u);if(yst(s)||!s)return Vbt({op:s,field:l,order:n},u)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(Sit(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(vdt(u)){return kht(qbt([u.datum],c,d))}const h=u;if("unaggregated"===t){const{field:e}=u;return kht([{data:n.requestDataName(f),field:Odt({field:e,aggregate:"min"})},{data:n.requestDataName(f),field:Odt({field:e,aggregate:"max"})}])}if(Est(h.bin)){if(Uut(e))return kht("bin-ordinal"===e?[]:[{data:jit(p)?n.requestDataName(f):n.requestDataName(Lht.Raw),field:n.vgField(r,Kdt(h,r)?{binSuffix:"range"}:{}),sort:!0!==p&&FMe(p)?p:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=h;if(Est(e)){const t=Xvt(n,h.field,e);return kht([new $bt(()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`})])}return kht([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}if(h.timeUnit&&Sit(["time","utc"],e)){const e=i[yat(r)];if(ddt(h,e,o,s)){const t=n.requestDataName(f),i=udt({fieldDef:h,fieldDef2:e,markDef:o,config:s}),l=bct(a)&&.5!==i&&zat(r);return kht([{data:t,field:n.vgField(r,l?{suffix:Vht}:{})},{data:t,field:n.vgField(r,{suffix:l?Wht:"end"})}])}}return kht(p?[{data:jit(p)?n.requestDataName(f):n.requestDataName(Lht.Raw),field:n.vgField(r),sort:p}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function Vbt(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Jct),...r?{field:Git(r)}:{},...i?{order:i}:{}}}function Wbt(e,t){var n;const r=e.component.scales[t],i=e.specifiedScales[t].domain,o=null==(n=e.fieldDef(t))?void 0:n.bin,a=Wut(i)?i:void 0,s=kst(o)&&Tst(o.extent)?o.extent:void 0;(a||s)&&r.set("selectionExtent",a??s,!0)}function Gbt(e,t){const{aggregate:n,type:r}=e;return n?OPe(n)&&!_st.has(n)?{valid:!1,reason:klt(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:Tlt(e)}:{valid:!0}:{valid:!1,reason:Slt(e)}}function Ybt(e,t,n,r){return e.explicit&&t.explicit&&Flt(function(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${aot(n)} and ${aot(r)}). Using the union of the two domains.`}(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Kbt(e){const t=Iit(e.map(e=>{if(Mst(e)){const{sort:t,...n}=e;return n}return e}),xit),n=Iit(e.map(e=>{if(Mst(e)){const t=e.sort;return void 0===t||jit(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}}).filter(e=>void 0!==e),xit);if(0===t.length)return;if(1===t.length){const t=e[0];if(Mst(t)&&n.length>0){let e=n[0];if(n.length>1){Flt(Ilt);const t=n.filter(e=>FMe(e)&&"op"in e&&"min"!==e.op);e=!n.every(e=>FMe(e)&&"op"in e)||1!==t.length||t[0]}else if(FMe(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=Iit(n.map(e=>jit(e)||!("op"in e)||OPe(e.op)&&bPe(hst,e.op)?e:(Flt(function(e){return`Dropping sort property ${aot(e)} as unioned domains only support boolean or op "count", "min", and "max".`}(e)),!0)),xit);let i;1===r.length?i=r[0]:r.length>1&&(Flt(Ilt),i=!0);const o=Iit(e.map(e=>Mst(e)?e.data:null),e=>e);if(1===o.length&&null!==o[0]){return{data:o[0],fields:t.map(e=>e.field),...i?{sort:i}:{}}}return{fields:t,...i?{sort:i}:{}}}function Zbt(e){if(Mst(e)&&OPe(e.field))return e.field;if(function(e){return!PMe(e)&&sot(e,"fields")&&!sot(e,"data")}(e)){let t;for(const n of e.fields)if(Mst(n)&&OPe(n.field))if(t){if(t!==n.field)return Flt("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),t}else t=n.field;return Flt("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),t}if(function(e){return!PMe(e)&&sot(e,"fields")&&sot(e,"data")}(e)){Flt("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const t=e.fields[0];return OPe(t)?t:void 0}}function Qbt(e,t){return Kbt(e.component.scales[t].get("domains").map(t=>(Mst(t)&&(t.data=e.lookupDataSource(t.data)),t)))}function Xbt(e){return xwt(e)||_wt(e)?e.children.reduce((e,t)=>e.concat(Xbt(t)),Jbt(e)):Jbt(e)}function Jbt(e){return Pit(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:c,...d}=i,f=function(e,t,n,r){if(zat(n)){if(Rst(e))return{step:{signal:`${t}_step`}}}else if(FMe(e)&&Mst(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),p=Qbt(e,n),h=s?function(e,t,n,r){const i=Vyt(e,t.param,t);return{signal:qut(n.get("type"))&&PMe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,p):null;return t.push({name:o,type:a,...p?{domain:p}:{},...h?{domainRaw:h}:{},range:f,...void 0!==c?{reverse:c}:{},...d}),t},[])}class ewt extends Eht{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainHasZero(){const e=this.get("type");if(Sit([kut,Aut,Iut],e))return"definitely-not";const t=this.get("zero");if(!0===t||void 0===t&&Sit([Sut,Cut,Tut],e))return"definitely";const n=this.get("domains");if(n.length>0){let e=!1,t=!1,r=!1;for(const i of n){if(PMe(i)){const n=i[0],r=i[i.length-1];if(APe(n)&&APe(r)){if(n<=0&&r>=0){e=!0;continue}t=!0;continue}}r=!0}if(e)return"definitely";if(t&&!r)return"definitely-not"}return"maybe"}}const twt=["range","scheme"];function nwt(e,t){const n=e.fieldDef(t);if(null==n?void 0:n.bin){const{bin:r,field:i}=n,o=vat(t),a=e.getName(o);if(FMe(r)&&r.binned&&void 0!==r.step)return new $bt(()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`});if(Est(r)){const t=Xvt(e,i,r);return new $bt(()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`})}}}function rwt(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const c of twt)if(void 0!==n[c]){const r=tct(i,c),o=nct(e,c);if(r)if(o)Flt(o);else switch(c){case"range":{const r=n.range;if(PMe(r)){if(zat(e))return Sht(r.map(e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return $bt.fromName(r,n)}return e}))}else if(FMe(r))return Sht({data:t.requestDataName(Lht.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return Sht(r)}case"scheme":return Sht(iwt(n[c]))}else Flt(Clt(i,c,e))}const o=e===dot||"xOffset"===e?"width":"height",a=r[o];if(tpt(a))if(zat(e))if(Uut(i)){const n=awt(a,t,e);if(n)return Sht({step:n})}else Flt(Alt(o));else if(Wat(e)){const n=e===mot?"x":"y";if("band"===t.getScaleComponent(n).get("type")){const e=swt(a,i);if(e)return Sht(e)}}const{rangeMin:s,rangeMax:l}=n,u=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:a}=$dt(o[e]),s=t.getScaleComponent(e),l=s.get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case dot:case fot:if(Sit(["point","band"],l)){const i=lwt(e,n,r.view);if(tpt(i)){return{step:awt(i,t,e)}}}return owt(e,t,l);case mot:case got:return function(e,t,n){const r=e===mot?"x":"y",i=t.getScaleComponent(r);if(!i)return owt(r,t,n,{center:!0});const o=i.get("type"),a=t.scaleName(r),{markDef:s,config:l}=t;if("band"===o){const e=lwt(r,t.size,t.config.view);if(tpt(e)){const t=swt(e,n);if(t)return t}return[0,{signal:`bandwidth('${a}')`}]}{const n=t.encoding[r];if(gdt(n)&&n.timeUnit){const e=nut(n.timeUnit,e=>`scale('${a}', ${e})`),r=t.config.scale.bandWithNestedOffsetPaddingInner,i=udt({fieldDef:n,markDef:s,config:l})-.5,o=0!==i?` + ${i}`:"";if(r){return[{signal:`${Dst(r)?`${r.signal}/2`+o:`${r/2+i}`} * (${e})`},{signal:`${Dst(r)?`(1 - ${r.signal}/2)`+o:`${1-r/2+i}`} * (${e})`}]}return[0,{signal:e}]}return bit(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}(e,t,l);case Oot:{const o=function(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(blt("size",e))}(i,r),a=function(e,t,n,r){const i={x:nwt(n,"x"),y:nwt(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=cwt(t,i,r.view);return APe(e)?e-1:new $bt(()=>`${e.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=cwt(t,i,r.view);return APe(e)?Math.pow(uwt*e,2):new $bt(()=>`pow(${uwt} * ${e.signal}, 2)`)}}throw new Error(blt("size",e))}(i,n,t,r);return Vut(l)?function(e,t,n){const r=()=>{const r=qst(t),i=qst(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return Dst(t)?new $bt(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&PMe(n)?n.length+1:(Flt(function(e){return`Domain for ${e} is required for threshold scale.`}(r)),3)}}(l,r,u,e)):[o,a]}case bot:return[0,2*Math.PI];case Not:return[0,360];case yot:return[0,new $bt(()=>`min(${t.getSignalName(wwt(t.parent)?"child_width":"width")},${t.getSignalName(wwt(t.parent)?"child_height":"height")})/2`)];case kot:return{step:1e3/r.scale.framesPerSecond};case Pot:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Fot:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Iot:return"symbol";case Tot:case Cot:case Aot:return"ordinal"===l?"nominal"===a?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case Dot:case Rot:case Mot:return[r.scale.minOpacity,r.scale.maxOpacity]}}(e,t);return(void 0!==s||void 0!==l)&&tct(i,"rangeMin")&&PMe(u)&&2===u.length?Sht([s??u[0],l??u[1]]):kht(u)}function iwt(e){return function(e){return!OPe(e)&&sot(e,"name")}(e)?{scheme:e.name,..._it(e,["name"])}:{scheme:e}}function owt(e,t,n,{center:r}={}){const i=vat(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===fot&&qut(n)?r?[$bt.fromName(e=>`${a(e)}/2`,o),$bt.fromName(e=>`-${a(e)}/2`,o)]:[$bt.fromName(a,o),0]:r?[$bt.fromName(e=>`-${a(e)}/2`,o),$bt.fromName(e=>`${a(e)}/2`,o)]:[0,$bt.fromName(a,o)]}function awt(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=wat(n),a=r[o];if("offset"===ept({step:e,offsetIsDiscrete:xdt(a)&&vut(a.type)})&&sft(r,o)){const n=t.getScaleComponent(o);let r=`domain('${t.scaleName(o)}').length`;if("band"===n.get("type")){r=`bandspace(${r}, ${n.get("paddingInner")??n.get("padding")??0}, ${n.get("paddingOuter")??n.get("padding")??0})`}const a=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${r} / (1-${s=a,Dst(s)?s.signal:jPe(s)})`}}return e.step;var s}function swt(e,t){if("offset"===ept({step:e,offsetIsDiscrete:Uut(t)}))return{step:e.step}}function lwt(e,t,n){const r=e===dot?"width":"height",i=t[r];return i||apt(n,r)}const uwt=.95;function cwt(e,t,n){const r=tpt(e.width)?e.width.step:opt(n,"width"),i=tpt(e.height)?e.height.step:opt(n,"height");return t.x||t.y?new $bt(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function dwt(e,t){bwt(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of Pit(n)){const l=a[s],u=n[s],c=e.getScaleComponent(s),d=$dt(i[s]),f=l[t],p=c.get("type"),h=c.get("padding"),m=c.get("paddingInner"),g=tct(p,t),y=nct(s,t);if(void 0!==f&&(g?y&&Flt(y):Flt(Clt(p,t,s))),g&&void 0===y)if(void 0!==f){const e=d.timeUnit,n=d.type;switch(t){case"domainMax":case"domainMin":Llt(l[t])||"temporal"===n||e?u.set(t,{signal:Gdt(l[t],{type:n,timeUnit:e})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const n=sot(fwt,t)?fwt[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:p,scalePadding:h,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:lft(i,s),hasSecondaryRangeChannel:!!i[yat(s)]}):r.scale[t];void 0!==n&&u.set(t,n,!1)}}}(e,t):hwt(e,t)}const fwt={bins:({model:e,fieldOrDatumDef:t})=>gdt(t)?function(e,t){const n=t.bin;if(Est(n)){const r=Xvt(e,t.field,n);return new $bt(()=>e.getSignalName(r))}if(Sst(n)&&kst(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(Sit([Tot,Cot,Aot],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>function(e,t,n,r,i,o){var a;if((null==(a=Bdt(o))?void 0:a.bin)||PMe(n)||null!=i||null!=r||Sit([Aut,Iut],e))return;return!!zat(t)||void 0}(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(zat(e)){if(Hut(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!gdt(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===Out)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>function(e,t,n,r,i,o=!1){if(void 0!==e)return;if(zat(t)){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:r,tickBandPaddingInner:a,bandWithNestedOffsetPaddingInner:s}=i;return o?s:Qit(e,"bar"===n?t:"tick"===n?a:r)}if(Wat(t)&&r===Nut)return i.offsetBandPaddingInner;return}(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>function(e,t,n,r,i,o=!1){if(void 0!==e)return;if(zat(t)){const{bandPaddingOuter:e,bandWithNestedOffsetPaddingOuter:t}=i;if(o)return t;if(n===Nut)return Qit(e,Dst(r)?{signal:`${r.signal}/2`}:r/2)}else if(Wat(t)){if(n===Out)return.5;if(n===Nut)return i.offsetBandPaddingOuter}return}(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return qut(e)&&"descending"===t?Dst(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(qut(e)&&"descending"===t)return!0;return}(t,gdt(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>function(e,t,n,r,i,o,a){if(n&&"unaggregated"!==n&&qut(i)){if(PMe(n)){const e=n[0],t=n[n.length-1];if(APe(e)&&e<=0&&APe(t)&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Vut(i))return!0;if((!gdt(t)||!t.bin)&&Sit([...$at,...qat],e)){const{orient:t,type:n}=r;return(!Sit(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e))&&(!(!Sit(["bar","area"],n)||a)||(null==o?void 0:o.zero))}return!1}(e,t,n,r,i,o.scale,a)};function pwt(e){bwt(e)?function(e){const t=e.component.scales;for(const n of ast){const r=t[n];if(!r)continue;const i=rwt(n,e);r.setWithExplicit("range",i)}}(e):hwt(e,"range")}function hwt(e,t){const n=e.component.scales;for(const r of e.children)"range"===t?pwt(r):dwt(r,t);for(const r of Pit(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=Aht(i,e.getWithExplicit(t),t,"scale",Tht((e,n)=>"range"===t&&e.step&&n.step?e.step-n.step:0))}}n[r].setWithExplicit(t,i)}}function mwt(e,t,n,r,i=!1){const o=function(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":if(Xot(e)||"discrete"===fst(e))return"shape"===e&&"ordinal"===t.type&&Flt(Elt(e,"ordinal")),"ordinal";if(Yat(e))return"band";if(zat(e)||Wat(e)){if(Sit(["rect","bar","image","rule","tick"],n.type))return"band";if(r)return"band"}else if("arc"===n.type&&e in Uat)return"band";return Cct(n[vat(e)])||Tdt(t)&&(null==(i=t.axis)?void 0:i.tickBand)?"band":"point";case"temporal":return Xot(e)?"time":"discrete"===fst(e)?(Flt(Elt(e,"temporal")),"ordinal"):gdt(t)&&t.timeUnit&&tut(t.timeUnit).utc?"utc":Yat(e)?"band":"time";case"quantitative":return Xot(e)?gdt(t)&&Est(t.bin)?"bin-ordinal":"linear":"discrete"===fst(e)?(Flt(Elt(e,"quantitative")),"ordinal"):Yat(e)?"band":"linear";case"geojson":return}throw new Error(glt(t.type))}(t,n,r,i),{type:a}=e;return sst(t)?void 0!==a?function(e,t,n=!1){if(!sst(e))return!1;switch(e){case dot:case fot:case mot:case got:case bot:case yot:return!!Hut(t)||"band"===t||"point"===t&&!n;case kot:return Sit(["linear","band"],t);case Oot:case Pot:case Dot:case Rot:case Mot:case Not:return Hut(t)||Vut(t)||Sit(["band","point","ordinal"],t);case Tot:case Cot:case Aot:return"band"!==t;case Fot:case Iot:return"ordinal"===t||Vut(t)}}(t,a)?gdt(n)&&(s=a,l=n.type,!(Sit([wut,xut],l)?void 0===s||Uut(s):l===_ut?Sit([Aut,Iut,void 0],s):l!==but||jut(s)||Vut(s)||void 0===s))?(Flt(function(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}(a,o)),o):a:(Flt(function(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}(t,a,o)),o):o:null;var s,l}function gwt(e){bwt(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of ast){const a=$dt(t[o]);if(a&&n===yct&&o===Iot&&a.type===Eut)continue;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const n=mwt(s,o,a,r,lft(t,o));i[o]=new ewt(e.scaleName(`${o}`,!0),{value:n,explicit:s.type===n})}}return i}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const o of e.children){gwt(o);for(const n of Pit(o.component.scales))if((t=i.scale)[n]??(t[n]=Cvt(n,e)),"shared"===i.scale[n]){const e=r[n],t=o.component.scales[n].getWithExplicit("type");e?Rut(e.value,t.value)?r[n]=Aht(e,t,"type","scale",ywt):(i.scale[n]="independent",delete r[n]):r[n]=t}}for(const o of Pit(r)){const t=e.scaleName(o,!0),i=r[o];n[o]=new ewt(t,i);for(const n of e.children){const e=n.component.scales[o];e&&(n.renameScale(e.get("name"),t),e.merged=!0)}}return n}(e)}const ywt=Tht((e,t)=>Put(e)-Put(t));class vwt{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function bwt(e){return"unit"===(null==e?void 0:e.type)}function wwt(e){return"facet"===(null==e?void 0:e.type)}function _wt(e){return"concat"===(null==e?void 0:e.type)}function xwt(e){return"layer"===(null==e?void 0:e.type)}class Ewt{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.parent=n,this.config=i,this.view=Ist(a),this.name=e.name??r,this.title=Nst(e.title)?{text:e.title}:e.title?Ist(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new vwt,this.projectionNameMap=n?n.projectionNameMap:new vwt,this.signalNameMap=n?n.signalNameMap:new vwt,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map(e=>Hpt(e)?{filter:yit(e.filter,gut)}:e),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(adt(e)&&!idt(e.facet)||Qft(e))&&(i.columns=a),Xft(e)&&(i.columns=1);for(const s of rpt)if(void 0!==e[s])if("spacing"===s){const t=e[s];i[s]=APe(t)?t:{row:t.row??o,column:t.column??o}}else i[s]=e[s];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:adt(e)||(null==n?void 0:n.component.data.isFaceted)&&void 0===e.data},layoutSize:new Eht,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?vit(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){gwt(e),zbt(e);for(const n of ect)dwt(e,n);t||pwt(e)}(this)}parseProjection(){Kvt(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Bvt(this)}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const i of Pit(n)){const e=n[i];void 0!==e&&(r[i]=zst(e))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=zst(this.description)),"unit"!==this.type&&"layer"!==this.type)?Mit(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of eat){const i=e[r];if(null==i?void 0:i.facetFieldDef){const{titleAnchor:e,titleOrient:o}=lvt(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=avt(r,o),s=bvt(e,a);void 0!==s&&(n[a]=s)}}return Mit(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of eat)e[n].title&&t.push(dvt(this,n));for(const n of uvt)t=t.concat(hvt(this,n));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(e=>Yyt(e,"grid",t)),...r.map(e=>Yyt(e,"grid",t)),...n.map(e=>Yyt(e,"main",t)),...r.map(e=>Yyt(e,"main",t))].filter(e=>e)}(this.component.axes,this.config)}assembleLegends(){return Hvt(this)}assembleProjections(){return Vvt(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...Ost(this.config.title).nonMarkTitleProperties,...t,...e?{encode:{update:e}}:{}};if(n.text)return Sit(["unit","layer"],this.type)?Sit(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),Mit(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||wwt(this.parent)?Xbt(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return Bit((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Lht[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(wwt(this.parent)){const t=Hat(kvt(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(Uut(e)&&Rst(r)){const e=n.get("name"),r=Zbt(Qbt(this,t));if(r){return{signal:Svt(e,n,Odt({aggregate:"distinct",field:r},{expr:"datum"}))}}return Flt(olt(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):fat(e)&&sst(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getScaleType(e){const t=this.getScaleComponent(e);return t?t.get("type"):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(`Cannot find a selection named "${t}".`);return n}hasAxisOrientSignalRef(){var e,t;return(null==(e=this.component.axes.x)?void 0:e.some(e=>e.hasOrientSignalRef()))||(null==(t=this.component.axes.y)?void 0:t.some(e=>e.hasOrientSignalRef()))}}class Swt extends Ewt{vgField(e,t={}){const n=this.fieldDef(e);if(n)return Odt(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?Pit(e).reduce((n,i)=>{const o=e[i];return PMe(o)?o.reduce((e,n)=>t.call(r,e,n,i),n):t.call(r,n,o,i)},n):n}(this.getMapping(),(t,n,r)=>{const i=Bdt(n);return i?e(t,i,r):t},t)}forEachFieldDef(e,t){pft(this.getMapping(),(t,n)=>{const r=Bdt(t);r&&e(r,n)},t)}}class kwt extends $ht{clone(){return new kwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${xit(this.transform)}`}assemble(){const{density:e,...t}=this.transform,n={type:"kde",field:e,...t};return n.resolve=this.transform.resolve,n}}class Twt extends $ht{clone(){return new Twt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${xit(this.transform)}`}assemble(){const{extent:e,param:t}=this.transform;return{type:"extent",field:e,signal:t}}}class Cwt extends $ht{clone(){return new Cwt(this.parent,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map((e,t)=>r[t]??e)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${xit(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class Awt extends $ht{clone(){return new Awt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${xit(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Iwt extends $ht{clone(){return new Iwt(null,vit(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[xot,_ot],[Sot,Eot]]){const i=r.map(e=>{const n=$dt(t.encoding[e]);return gdt(n)?n.field:vdt(n)?{expr:`${n.datum}`}:Sdt(n)?{expr:`${n.value}`}:void 0});(i[0]||i[1])&&(e=new Iwt(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(Iot)){const r=t.typedFieldDef(Iot);r.type===Eut&&(e=new Iwt(e,null,r.field,t.getName("geojson_"+n++)))}return e}constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}dependentFields(){const e=(this.fields??[]).filter(OPe);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${xit(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Owt extends $ht{clone(){return new Owt(null,this.projection,vit(this.fields),vit(this.as))}constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[xot,_ot],[Sot,Eot]]){const r=n.map(e=>{const n=$dt(t.encoding[e]);return gdt(n)?n.field:vdt(n)?{expr:`${n.datum}`}:Sdt(n)?{expr:`${n.value}`}:void 0}),i=n[0]===Sot?"2":"";(r[0]||r[1])&&(e=new Owt(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(OPe))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${xit(this.fields)} ${xit(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Nwt extends $ht{clone(){return new Nwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new Nwt(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(gdt(r)&&gdt(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:l,frame:u,keyvals:c}=o.impute,d=hft(t.mark,n);return new Nwt(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==l?{value:l}:{},...u?{frame:u}:{},...void 0!==c?{keyvals:c}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${xit(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:Vpt(n)?this.processSequence(n):n}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Dwt extends $ht{clone(){return new Dwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${xit(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class Rwt extends $ht{clone(){return new Rwt(null,vit(this.transform),this.secondary)}constructor(e,t,n){super(e),this.transform=t,this.secondary=n}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return sot(e,"data")}(o)){let e=Ywt(o.data,i);e||(e=new dbt(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new zht(e,n,Lht.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return sot(e,"param")}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(Bit(e),e)}catch(F0){throw new Error(`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`)}if(a=r.materialized,!a)throw new Error(function(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}(e))}return new Rwt(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?aPe(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${xit({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:aPe(this.transform.as)}:{}};else{let t=this.transform.as;OPe(t)||(Flt('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class Mwt extends $ht{clone(){return new Mwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${xit(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class Pwt extends $ht{clone(){return new Pwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t,this.transform=vit(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${xit(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class Fwt extends $ht{clone(){return new Fwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t}addDimensions(e){this.transform.groupby=Iit((this.transform.groupby??[]).concat(e),e=>e)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${xit(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Lwt extends $ht{clone(){return new Lwt(null,vit(this.transform))}constructor(e,t){super(e),this.transform=t}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${xit(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function jwt(e){let t=0;return function n(r,i){if(r instanceof dbt&&!r.isGenerator&&!Oht(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof sbt&&(r.parent instanceof dbt&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof rbt)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof ubt||r instanceof cbt||r instanceof Obt||r instanceof qyt||r instanceof ivt||r instanceof Owt||r instanceof nbt||r instanceof Rwt||r instanceof Rbt||r instanceof Ibt||r instanceof Awt||r instanceof Cwt||r instanceof kwt||r instanceof Dwt||r instanceof Mwt||r instanceof Pwt||r instanceof lbt||r instanceof Lwt||r instanceof Fwt||r instanceof Twt)&&i.transform.push(r.assemble()),(r instanceof ebt||r instanceof Hht||r instanceof Nwt||r instanceof Dbt||r instanceof Iwt)&&i.transform.push(...r.assemble()),r instanceof zht)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof zht)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof zht&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Bwt(e){return"top"===e||"left"===e||Dst(e)?"header":"footer"}function $wt(e,t){var n;const{facet:r,config:i,child:o,component:a}=e;if(e.channelHasField(t)){const s=r[t],l=svt("title",null,i,t);let u=Pdt(s,i,{allowDisabling:!0,includeDefault:void 0===l||!!l});o.component.layoutHeaders[t].title&&(u=PMe(u)?u.join(", "):u,u+=` / ${o.component.layoutHeaders[t].title}`,o.component.layoutHeaders[t].title=null);const c=svt("labelOrient",s.header,i,t),d=null!==s.header&&Qit(null==(n=s.header)?void 0:n.labels,i.header.labels,!0),f=Sit(["bottom","right"],c)?"footer":"header";a.layoutHeaders[t]={title:null!==s.header?u:null,facetFieldDef:s,[f]:"facet"===t?[]:[zwt(e,t,d)]}}}function zwt(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Uwt(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Avt(i,t),"shared"===i.axis[t]){const i="x"===t?"column":"row",o=r[i];for(const r of n.component.axes[t]){const t=Bwt(r.get("orient"));o[t]??(o[t]=[zwt(e,i,!1)]);const n=Yyt(r,"main",e.config,{header:!0});n&&o[t][0].axes.push(n),r.mainExtracted=!0}}}}function qwt(e){for(const t of e.children)t.parseLayoutSize()}function Hwt(e,t){const n=kvt(t),r=Hat(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const t=s.component.layoutSize.getWithExplicit(n),o=i.scale[r]??Cvt(r,e);if("independent"===o&&"step"===t.value){a=void 0;break}if(a){if("independent"===o&&a.value!==t.value){a=void 0;break}a=Aht(a,t,n,"")}else a=t}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Vwt(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(Uut(e)){const e=apt(r.view,t);return Rst(n)||tpt(e)?"step":e}return ipt(r.view,t)}if(e.hasProjection||"arc"===e.mark)return ipt(r.view,t);{const e=apt(r.view,t);return tpt(e)?e.step:e}}function Wwt(e,t,n){return Odt(t,{suffix:`by_${Odt(e)}`,...n})}class Gwt extends Swt{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=v_t(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!idt(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=Pit(e),n={};for(const r of t){if(![lot,uot].includes(r)){Flt(blt(r,"facet"));break}const t=e[r];if(void 0===t.field){Flt(vlt(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=qdt(e,t);return n.header?n.header=Ist(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return sot(this.facet,e)}fieldDef(e){return this.facet[e]}parseData(){this.component.data=Kwt(this),this.child.parseData()}parseLayoutSize(){qwt(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(e=>Sgt(e))&&Plt(dlt)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of eat)$wt(e,t);Uwt(e,"x"),Uwt(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of eat)for(const n of cvt){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=svt("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=avt(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(null==i?void 0:i[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Gwt)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroupStyle(){}assembleGroup(e){return this.parent&&this.parent instanceof Gwt?{...this.channelHasField("column")?{encode:{update:{columns:{field:Odt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Gwt){if(this.child.channelHasField("column")){const r=Odt(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of $at){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(Uut(o)&&Rst(a)){const i=Zbt(Qbt(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):Flt(olt(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const u of eat){const e=this.facet[u];if(e){s.push(Odt(e));const{bin:t,sort:l}=e;if(Est(t)&&s.push(Odt(e,{binSuffix:"end"})),ndt(l)){const{field:t,op:s=Jct}=l,u=Wwt(e,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(t),o.push(s),a.push(u))}else if(PMe(l)){const t=ovt(e,u);i.push(t),o.push("max"),a.push(t)}}}const l=!!n&&!!r;return{name:e,data:t,groupby:s,...l||i.length>0?{aggregate:{...l?{cross:l}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?ndt(n.sort)?[Wwt(n,n.sort,{expr:"datum"})]:PMe(n.sort)?[ovt(n,e,{expr:"datum"})]:[Odt(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(ndt(e)?e.order:!PMe(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){var e;const{facet:t,config:n}=this;if(t.facet)return gvt(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of uvt)if(t[i]){const o=svt("labelOrient",null==(e=t[i])?void 0:e.header,n,i);if(r[i].includes(o))return gvt(t[i],i,n)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=jwt(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle(),o={name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:eat.map(e=>this.facetSortFields(e)).flat(),order:eat.map(e=>this.facetSortOrder(e)).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(fmt(this,[]))};return[o]}getMapping(){return this.facet}}function Ywt(e,t){var n,r,i,o;for(const a of t){const t=a.data;if(e.name&&a.hasName()&&e.name!==a.dataName)continue;const s=null==(n=e.format)?void 0:n.mesh,l=null==(r=t.format)?void 0:r.feature;if(s&&l)continue;const u=null==(i=e.format)?void 0:i.feature;if((u||l)&&u!==l)continue;const c=null==(o=t.format)?void 0:o.mesh;if(!s&&!c||s===c)if(Nht(e)&&Nht(t)){if(oot(e.values,t.values))return a}else if(Oht(e)&&Oht(t)){if(e.url===t.url)return a}else if(Dht(e)&&e.name===a.dataName)return a}return null}function Kwt(e){var t;let n=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new dbt({values:[]});return t.push(e),e}const n=Ywt(e.data,t);if(n)return Rht(e.data)||(n.data.format=Cit({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new dbt(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:r,outputNodeRefCounts:i}=e.component.data,o=e.data,a=!(o&&(Rht(o)||Oht(o)||Nht(o)))&&e.parent?e.parent.component.data.ancestorParse.clone():new Iht;Rht(o)?(Mht(o)?n=new cbt(n,o.sequence):Fht(o)&&(n=new ubt(n,o.graticule)),a.parseNothing=!0):null===(null==(t=null==o?void 0:o.format)?void 0:t.parse)&&(a.parseNothing=!0),n=sbt.makeExplicit(n,e,a)??n,n=new lbt(n);const s=e.parent&&xwt(e.parent);(bwt(e)||wwt(e))&&s&&(n=ebt.makeFromEncoding(n,e)??n),e.transforms.length>0&&(n=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(nht(i))a=e=new ivt(e,i),o="derived";else if(Hpt(i)){const r=obt(i);a=e=sbt.makeWithAncestors(e,{},r,n)??e,e=new qyt(e,t,i.filter)}else if(rht(i))a=e=ebt.makeFromTransform(e,i,t),o="number";else if(oht(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new sbt(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Hht.makeFromTransform(e,i);else if(aht(i))a=e=nbt.makeFromTransform(e,i),o="number",xgt(t)&&(e=new lbt(e));else if(Wpt(i))a=e=Rwt.make(e,t,i,r++),o="derived";else if(Jpt(i))a=e=new Rbt(e,i),o="number";else if(eht(i))a=e=new Ibt(e,i),o="number";else if(sht(i))a=e=Dbt.makeFromTransform(e,i),o="derived";else if(lht(i))a=e=new Awt(e,i),o="derived";else if(uht(i))a=e=new Twt(e,i),o="derived";else if(tht(i))a=e=new Cwt(e,i),o="derived";else if(Gpt(i))a=e=new Fwt(e,i),o="derived";else if(Xpt(i))e=new Lwt(e,i);else if(iht(i))a=e=Nwt.makeFromTransform(e,i),o="derived";else if(Ypt(i))a=e=new kwt(e,i),o="derived";else if(Kpt(i))a=e=new Mwt(e,i),o="derived";else if(Zpt(i))a=e=new Pwt(e,i),o="derived";else{if(!Qpt(i)){Flt(plt(i));continue}a=e=new Dwt(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(n,e,a));const l=function(e){const t={};if(bwt(e)&&e.component.selection)for(const n of Pit(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&Zit(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=abt(e);n=sbt.makeWithAncestors(n,{},{...l,...u},a)??n,bwt(e)&&(n=Iwt.parseAll(n,e),n=Owt.parseAll(n,e)),(bwt(e)||wwt(e))&&(s||(n=ebt.makeFromEncoding(n,e)??n),n=Hht.makeFromEncoding(n,e)??n,n=ivt.parseAllForSortIndex(n,e));const c=n=Zwt(Lht.Raw,e,n);if(bwt(e)){const t=nbt.makeFromEncoding(n,e);t&&(n=t,xgt(e)&&(n=new lbt(n))),n=Nwt.makeFromEncoding(n,e)??n,n=Dbt.makeFromEncoding(n,e)??n}let d,f;if(bwt(e)){const{markDef:t,mark:r,config:i}=e,o=Wst("invalid",t,i),{marks:a,scales:s}=f=Bht({invalid:o,isPath:vct(r)});a!==s&&"include-invalid-values"===s&&(d=n=Zwt(Lht.PreFilterInvalid,e,n)),"exclude-invalid-values"===a&&(n=Obt.make(n,e,f)??n)}const p=n=Zwt(Lht.Main,e,n);let h;if(bwt(e)&&f){const{marks:t,scales:r}=f;"include-invalid-values"===t&&"exclude-invalid-values"===r&&(n=Obt.make(n,e,f)??n,h=n=Zwt(Lht.PostFilterInvalid,e,n))}bwt(e)&&function(e,t){for(const[n,r]of Lit(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new zht(new qyt(t,e,{param:n}),i,Lht.Lookup,e.component.data.outputNodeRefCounts)}}(e,p);let m=null;if(wwt(e)){const t=e.getName("facet");n=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(ndt(i.sort)){const{field:n,op:r=Jct}=i.sort;e=t=new Ibt(e,{joinaggregate:[{op:r,field:n,as:Wwt(i,i.sort,{forAs:!0})}],groupby:[Odt(i)]})}return t}return null}(n,e.facet)??n,m=new rbt(n,e,t,p.getSource()),r[t]=m}return{...e.component.data,outputNodes:r,outputNodeRefCounts:i,raw:c,main:p,facetRoot:m,ancestorParse:a,preFilterInvalid:d,postFilterInvalid:h}}function Zwt(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),a=new zht(n,o,e,i);return r[o]=a,a}class Qwt extends Ewt{constructor(e,t,n,r){var i,o,a,s;super(e,"concat",t,n,r,e.resolve),"shared"!==(null==(o=null==(i=e.resolve)?void 0:i.axis)?void 0:o.x)&&"shared"!==(null==(s=null==(a=e.resolve)?void 0:a.axis)?void 0:s.y)||Flt("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(e).map((e,t)=>v_t(e,this,this.getName(`concat_${t}`),void 0,r))}parseData(){this.component.data=Kwt(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of Pit(e.component.selection))this.component.selection[t]=e.component.selection[t]}Object.values(this.component.selection).some(e=>Sgt(e))&&Plt(dlt)}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Xft(e)?e.vconcat:Jft(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){qwt(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Hwt(e,t),Hwt(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce((e,t)=>t.assembleSelectionTopLevelSignals(e),e)}assembleSignals(){return this.children.forEach(e=>e.assembleSignals()),[]}assembleLayoutSignals(){const e=_vt(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce((e,t)=>t.assembleSelectionData(e),e)}assembleMarks(){return this.children.map(e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const Xwt={disable:1,gridScale:1,scale:1,...eft,labelExpr:1,encode:1},Jwt=Pit(Xwt);class e_t extends Eht{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new e_t(vit(this.explicit),vit(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return Dst(this.explicit.orient)}}const t_t={bottom:"top",top:"bottom",left:"right",right:"left"};function n_t(e,t){if(!e)return t.map(e=>e.clone());{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=r_t(n,i)}}}return e}function r_t(e,t){for(const n of Jwt){const r=Aht(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(e,t)=>{switch(n){case"title":return Jst(e,t);case"gridScale":return{explicit:e.explicit,value:Qit(e.value,t.value)}}return Cht(e,t,n,"axis")});e.setWithExplicit(n,r)}return e}function i_t(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Dst(n.labelAngle)?n.labelAngle:not(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===rvt(r,i))return!0}return e===n[t]}const o_t=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function a_t(e,t){var n,r;let i=t.axis(e);const o=new e_t,a=$dt(t.encoding[e]),{mark:s,config:l}=t,u=(null==i?void 0:i.orient)||(null==(n=l["x"===e?"axisX":"axisY"])?void 0:n.orient)||(null==(r=l.axis)?void 0:r.orient)||function(e){return"x"===e?"bottom":"left"}(e),c=t.getScaleComponent(e).get("type"),d=function(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:jut(t)?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[],o="x"===e?"axisX":"axisY",a=Dst(n)?"axisOrient":`axis${Uit(n)}`,s=[...i,...i.map(e=>o+e.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:Zyt(s,r,e,n),vgAxisConfig:Zyt(l,r,e,n),axisConfigStyle:Qyt([...l,...s],r)}}(e,c,u,t.config),f=void 0!==i?!i:Xyt("disable",l.style,null==i?void 0:i.style,d).configValue;if(o.set("disable",f,void 0!==i),f)return o;i=i||{};const p=function(e,t,n,r,i){const o=null==t?void 0:t.labelAngle;if(void 0!==o)return Dst(o)?o:not(o);{const{configValue:o}=Xyt("labelAngle",r,null==t?void 0:t.style,i);return void 0!==o?not(o):n!==dot||!Sit([xut,wut],e.type)||gdt(e)&&e.timeUnit?void 0:270}}(a,i,e,l.style,d),h=Yct(i.formatType,a,c),m=Gct(a,a.type,i.format,i.formatType,l,!0),g={fieldOrDatumDef:a,axis:i,channel:e,model:t,scaleType:c,orient:u,labelAngle:p,format:m,formatType:h,mark:s,config:l};for(const b of Jwt){const n=b in Jyt?Jyt[b](g):nft(b)?i[b]:void 0,r=void 0!==n,a=i_t(n,b,i,t,e);if(r&&a)o.set(b,n,a);else{const{configValue:e,configFrom:t}=nft(b)&&"values"!==b?Xyt(b,l.style,i.style,d):{},s=void 0!==e;r&&!s?o.set(b,n,a):("vgAxisConfig"!==t||o_t.has(b)&&s||Qdt(e)||Dst(e))&&o.set(b,e,!1)}}const y=i.encoding??{},v=Xdt.reduce((n,r)=>{if(!o.hasAxisPart(r))return n;const i=Tvt(y[r]??{},t),a="labels"===r?function(e,t,n){const{encoding:r,config:i}=e,o=$dt(r[t])??$dt(r[yat(t)]),a=e.axis(t)||{},{format:s,formatType:l}=a;if(Uct(l))return{text:Wct({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:i}),...n};if(void 0===s&&void 0===l&&i.customFormatTypes){if("quantitative"===ydt(o)){if(Tdt(o)&&"normalize"===o.stack&&i.normalizedNumberFormatType)return{text:Wct({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Wct({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if("temporal"===ydt(o)&&i.timeFormatType&&gdt(o)&&!o.timeUnit)return{text:Wct({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}(t,e,i):i;return void 0===a||Mit(a)||(n[r]={update:a}),n},{});return Mit(v)||o.set("encode",v,!!i.encoding||void 0!==i.labelAngle),o}function s_t(e,t){const{config:n}=e;return{...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Fmt("x",e,{defaultPos:"mid"}),...Fmt("y",e,{defaultPos:"mid"}),...Dmt("size",e),...Dmt("angle",e),...l_t(e,n,t)}}function l_t(e,t,n){return n?{shape:{value:n}}:Dmt("shape",e)}function u_t(e,t,n){if(void 0===Wst("align",e,n))return"center"}function c_t(e,t,n){if(void 0===Wst("baseline",e,n))return"middle"}const d_t={arc:{vgMark:"arc",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Fmt("x",e,{defaultPos:"mid"}),...Fmt("y",e,{defaultPos:"mid"}),...Vmt(e,"radius"),...Vmt(e,"theta")})},area:{vgMark:"area",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Umt("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...Umt("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...Jmt(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Vmt(e,"x"),...Vmt(e,"y")})},circle:{vgMark:"symbol",encodeEntry:e=>s_t(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gdt(n)&&n.type===Eut?{field:Odt(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Vmt(e,"x"),...Vmt(e,"y"),...Smt(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Fmt("x",e,{defaultPos:"mid"}),...Fmt("y",e,{defaultPos:"mid"}),...Dmt("size",e,{vgChannel:"strokeWidth"}),...Jmt(e)})},point:{vgMark:"symbol",encodeEntry:e=>s_t(e)},rect:{vgMark:"rect",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Vmt(e,"x"),...Vmt(e,"y")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Umt("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...Umt("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...Dmt("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>s_t(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Zmt(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Fmt("x",e,{defaultPos:"mid"}),...Fmt("y",e,{defaultPos:"mid"}),...Smt(e),...Dmt("size",e,{vgChannel:"fontSize"}),...Dmt("angle",e),...egt("align",u_t(e.markDef,n,t)),...egt("baseline",c_t(e.markDef,n,t)),...Fmt("radius",e,{defaultPos:null}),...Fmt("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"x":"y",o="horizontal"===r?"y":"x",a="horizontal"===r?"height":"width";return{...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Vmt(e,i),...Fmt(o,e,{defaultPos:"mid",vgChannel:"y"===o?"yc":"xc"}),[a]:zst(Wst("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...Zmt(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Fmt("x",e,{defaultPos:"mid"}),...Fmt("y",e,{defaultPos:"mid"}),...Dmt("size",e),...Jmt(e)})}};function f_t(e){if(Sit([lct,oct,hct],e.mark)){const t=hft(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:p_t+e.requestDataName(Lht.Main),data:e.requestDataName(Lht.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:m_t(e,{fromPrefix:p_t})}]}(e,t)}else if(e.mark===act){const t=Lst.some(t=>Wst(t,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return function(e){var t;const[n]=m_t(e,{fromPrefix:h_t}),r=e.scaleName(e.stack.fieldChannel),i=(t={})=>e.vgField(e.stack.fieldChannel,t),o=(e,t)=>`${e}(${[i({prefix:"min",suffix:"start",expr:t}),i({prefix:"max",suffix:"start",expr:t}),i({prefix:"min",suffix:"end",expr:t}),i({prefix:"max",suffix:"end",expr:t})].map(e=>`scale('${r}',${e})`).join(",")})`;let a,s;"x"===e.stack.fieldChannel?(a={...wit(n.encode.update,["y","yc","y2","height",...Lst]),x:{signal:o("min","datum")},x2:{signal:o("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},n.encode.update={..._it(n.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...wit(n.encode.update,["x","xc","x2","width"]),y:{signal:o("min","datum")},y2:{signal:o("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},n.encode.update={..._it(n.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of Lst){const t=Gst(u,e.markDef,e.config);n.encode.update[u]?(a[u]=n.encode.update[u],delete n.encode.update[u]):t&&(a[u]=zst(t)),t&&(n.encode.update[u]={value:0})}const l=[];if((null==(t=e.stack.groupbyChannels)?void 0:t.length)>0)for(const u of e.stack.groupbyChannels){const t=e.fieldDef(u),n=Odt(t);n&&l.push(n),((null==t?void 0:t.bin)||(null==t?void 0:t.timeUnit))&&l.push(Odt(t,{binSuffix:"end"}))}a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((t,r)=>{if(n.encode.update[r])return{...t,[r]:n.encode.update[r]};{const n=Gst(r,e.markDef,e.config);return void 0!==n?{...t,[r]:zst(n)}:t}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(Lht.Main),name:h_t+e.requestDataName(Lht.Main),groupby:l,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[n]}]}]}(e)}return m_t(e)}const p_t="faceted_path_";const h_t="stack_group_";function m_t(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=Qit(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!(!(null==t?void 0:t.get("selectionExtent"))&&!(null==n?void 0:n.get("selectionExtent")))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=Vst(r),l=i.key,u=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!PMe(a)&&Sdt(a)&&Eit(a.value)||!a&&Eit(Wst("order",i,o)))){if((PMe(a)||gdt(a))&&!n)return Zst(a,{expr:"datum"});if(vct(r)){const e="horizontal"===i.orient?"y":"x";if(gdt(t[e]))return{field:e}}}}(e),c=function(e){if(!e.component.selection)return null;const t=Pit(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=Pit(r.component.selection).length,r=r.parent;return n?{interactive:t>0||"geoshape"===e.mark||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}(e),d=Wst("aria",r,o),f=d_t[n].postEncodingTransform?d_t[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:d_t[n].vgMark,...a?{clip:a}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...!1===d?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(Lht.Main)},encode:{update:d_t[n].encodeEntry(e)},...f?{transform:f}:{}}]}class g_t extends Swt{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,npt(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=e=>{var t,n,r;return(null==(t=e.from)?void 0:t.data)&&(e.from.data=this.lookupDataSource(e.from.data),"time"in this.encoding&&(e.from.data=e.from.data+Jht)),(null==(r=null==(n=e.from)?void 0:n.facet)?void 0:r.data)&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e};const o=_ct(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=Gst("filled",e,t),i=e.type;return Qit(r,i!==uct&&i!==lct&&i!==dct)}(o,i,{graticule:e.data&&Fht(e.data)}));const s=this.encoding=function(e,t,n,r){const i={};for(const o of Pit(e))fat(o)||Flt(wlt(o));for(let o of xat){if(!e[o])continue;const a=e[o];if(Wat(o)){const e=_at(o),t=i[e];if(gdt(t)&&yut(t.type)&&gdt(a)&&!t.timeUnit){Flt(mlt(e));continue}}if("angle"!==o||"arc"!==t||e.theta||(Flt("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=bot),dft(e,o,t)){if(o===Oot&&"line"===t){const t=Bdt(e[o]);if(null==t?void 0:t.aggregate){Flt("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.");continue}}if(o===Tot&&(n?"fill"in e:"stroke"in e))Flt(ylt("encoding",{fill:"fill"in e,stroke:"stroke"in e}));else if(o===Bot||o===jot&&!PMe(a)&&!Sdt(a)||o===zot&&PMe(a)){if(a){if(o===jot){const t=e[o];if(fdt(t)){i[o]=t;continue}}i[o]=aPe(a).reduce((e,t)=>(gdt(t)?e.push(qdt(t,o)):Flt(vlt(t,o)),e),[])}}else{if(o===zot&&null===a)i[o]=null;else if(!(gdt(a)||vdt(a)||Sdt(a)||pdt(a)||Dst(a))){Flt(vlt(a,o));continue}i[o]=zdt(a,o,r)}}else Flt(blt(o,t))}return i}(e.encoding||{},a,o.filled,i);this.markDef=Apt(o,s,i),this.size=function({encoding:e,size:t}){for(const n of $at){const r=vat(n);tpt(t[r])&&bdt(e[n])&&(delete t[r],Flt(Alt(r)))}return t}({encoding:s,size:npt(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=Cpt(this.markDef,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter(e=>Kft(e))}get hasProjection(){const{encoding:e}=this,t=this.mark===yct,n=e&&Zot.some(t=>xdt(e[t]));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return ast.reduce((e,n)=>{const r=$dt(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e},{})}initScale(e){const{domain:t,range:n}=e,r=Ist(e);return PMe(t)&&(r.domain=t.map(Bst)),PMe(n)&&(r.range=n.map(Bst)),r}initAxes(e){return $at.reduce((t,n)=>{const r=e[n];if(xdt(r)||n===dot&&xdt(e.x2)||n===fot&&xdt(e.y2)){const e=xdt(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t},{})}initAxis(e){const t=Pit(e),n={};for(const r of t){const t=e[r];n[r]=Qdt(t)?jst(t):Bst(t)}return n}initLegends(e){return ist.reduce((t,n)=>{const r=$dt(e[n]);if(r&&function(e){switch(e){case Tot:case Cot:case Aot:case Oot:case Iot:case Dot:case Pot:case Fot:return!0;case Rot:case Mot:case Not:case kot:return!1}}(n)){const e=r.legend;t[n]=e?Ist(e):e}return t},{})}parseData(){this.component.data=Kwt(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of $at){const i=vat(r);if(t[i]){const e=t[i];n.layoutSize.set(i,tpt(e)?"step":e,!0)}else{const t=Vwt(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const t=Bit(o.name),a=o.select,s=OPe(a)?a:a.type,l=FMe(a)?vit(a):{type:s},u=r[s];for(const e in u)"fields"!==e&&"encodings"!==e&&("mark"===e&&(l.mark={...u.mark,...l.mark}),void 0!==l[e]&&!0!==l[e]||(l[e]=vit(u[e]??l[e])));const c=n[t]={...l,name:t,type:s,init:o.value,bind:o.bind,events:OPe(l.on)?het(l.on,"scope"):aPe(vit(l.on))};if(Sgt(c)&&(i++,i>1)){delete n[t];continue}const d=vit(o);for(const n of wgt)n.defined(c)&&n.parse&&n.parse(e,c,d)}return i>1&&Flt("Multiple timer selections in one unit spec are not supported. Ignoring all but the first."),n}(this,this.selection)}parseMarkGroup(){this.component.mark=f_t(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,$at.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[a_t(n,e)]),t),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of Fit(e.component.selection??{})){const i=r.name,o=jPe(i+ggt),a=t.filter(e=>e.name===i);if(0===a.length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${bgt}(${o}, ${jPe(e)}${n}`})}n=!0;for(const n of wgt)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}if(n){const e=t.filter(e=>"unit"===e.name);0===e.length&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]})}return hmt(t)}(this,e)}assembleSignals(){return[...Kyt(this),...dmt(this,[])]}assembleSelectionData(e){return function(e,t){const n=[],r=[],i=_gt(e,{escape:!1});for(const o of Fit(e.component.selection??{})){const a={name:o.name+ggt};if(o.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:Vft}}]),o.init){const e=o.project.items.map(umt);a.values=o.project.hasSelectionId?o.init.map(e=>({unit:i,[Vft]:cmt(e,!1)[0]})):o.init.map(t=>({unit:i,fields:e,values:cmt(t,!1)}))}if([...n,...t].filter(e=>e.name===o.name+ggt).length||n.push(a),Sgt(o)&&t.length){const n=e.lookupDataSource(e.getDataName(Lht.Main)),i=t.find(e=>e.name===n),o=i.transform.find(e=>"filter"===e.type&&e.expr.includes("vlSelectionTest"));if(o){i.transform=i.transform.filter(e=>e!==o);const e={name:i.name+Jht,source:i.name,transform:[o]};r.push(e)}}}return n.concat(t,r)}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return _vt(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&xwt(this.parent)||(e=pmt(this,e)),e.map(this.correctDataNames)}assembleGroupStyle(){const{style:e}=this.view||{};return void 0!==e?e:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return aft(this.encoding,e)}fieldDef(e){return Bdt(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return Edt(t)?t:null}}class y_t extends Ewt{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map((e,t)=>{if(wpt(e))return new y_t(e,this,this.getName(`layer_${t}`),o,i);if(ift(e))return new g_t(e,this,this.getName(`layer_${t}`),o,i);throw new Error(elt(e))})}parseData(){this.component.data=Kwt(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;qwt(e=this),Hwt(e,"width"),Hwt(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of Pit(e.component.selection))this.component.selection[t]=e.component.selection[t]}Object.values(this.component.selection).some(e=>Sgt(e))&&Plt(dlt)}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const r of Pit(i.component.axes))n.axis[r]=Avt(e.component.resolve,r),"shared"===n.axis[r]&&(t[r]=n_t(t[r],i.component.axes[r]),t[r]||(n.axis[r]="independent",delete t[r]))}for(const i of $at){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!Dst(t)){if(r[t]>0&&!n){const n=t_t[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const[e,n]of(t[i]||[]).entries())e>0&&n.get("grid")&&!n.explicit.grid&&(n.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce((e,t)=>t.assembleSelectionTopLevelSignals(e),e)}assembleSignals(){return this.children.reduce((e,t)=>e.concat(t.assembleSignals()),Kyt(this))}assembleLayoutSignals(){return this.children.reduce((e,t)=>e.concat(t.assembleLayoutSignals()),_vt(this))}assembleSelectionData(e){return this.children.reduce((e,t)=>t.assembleSelectionData(e),e)}assembleGroupStyle(){const e=new Set;for(const n of this.children)for(const t of aPe(n.assembleGroupStyle()))e.add(t);const t=Array.from(e);return t.length>1?t:1===t.length?t[0]:void 0}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)bwt(n)&&(t=pmt(n,t));return t}(this,this.children.flatMap(e=>e.assembleMarks()))}assembleLegends(){return this.children.reduce((e,t)=>e.concat(t.assembleLegends()),Hvt(this))}}function v_t(e,t,n,r,i){if(adt(e))return new Gwt(e,t,n,i);if(wpt(e))return new y_t(e,t,n,r,i);if(ift(e))return new g_t(e,t,n,r,i);if(function(e){return Xft(e)||Jft(e)||Qft(e)}(e))return new Qwt(e,t,n,i);throw new Error(elt(e))}const b_t=fit,w_t=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Zit,accessPathWithDatum:qit,accessWithDatumToUnescapedPath:Vit,compile:function(e,t={}){var n;t.logger&&(n=t.logger,Mlt=n),t.fieldTitle&&Mdt(t.fieldTitle);try{const n=hpt(jMe(t.config,e.config)),r=ght(e,n),i=v_t(r,null,"",void 0,n);i.parse(),function(e,t){Lbt(e.sources);let n=0,r=0;for(let i=0;i<5&&Bbt(e,t,!0);i++)n++;e.sources.map(Mbt);for(let i=0;i<5&&Bbt(e,t,!1);i++)r++;Lbt(e.sources),5===Math.max(n,r)&&Flt("Maximum optimization runs(5) reached.")}(i.component.data,i);const o=function(e,t,n={},r){const i=e.config?vpt(e.config):void 0,o=function(e,t){const n=[],r=jwt(n);let i=0;for(const a of e.sources){a.hasName()||(a.dataName="source_"+i++);const e=a.assemble();r(a,e)}for(const a of n)0===a.transform.length&&delete a.transform;let o=0;for(const[a,s]of n.entries())0!==(s.transform??[]).length||s.source||n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const t of a.transform??[])"lookup"===t.type&&(t.from=e.outputNodes[t.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}(e.component.data,n),a=e.assembleSelectionData(o),s=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1));const{params:f,...p}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...p,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:a,...s.length>0?{projections:s}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...Zft(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):OPe(t)&&(t={type:t});if(i&&o&&(a=t.type,["fit","fit-x","fit-y"].includes(a)))if("step"===i&&"step"===o)Flt(ilt()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";Flt(ilt(Hat(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${Hat(e)}`:"fit"}(n)}var a;return{...1===Pit(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...xht(n,!1),...xht(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta);return{spec:o,normalized:r}}finally{t.logger&&(Mlt=Rlt),t.fieldTitle&&Mdt(Ddt)}},contains:Sit,deepEqual:oot,deleteNestedProperty:zit,duplicate:vit,entries:Lit,every:Tit,fieldIntersection:Rit,flatAccessWithDatum:Hit,getFirstDefined:Qit,hasIntersection:Nit,hasProperty:sot,hash:xit,internalField:eot,isBoolean:jit,isEmpty:Mit,isEqual:function(e,t){const n=Pit(e),r=Pit(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0},isInternalField:tot,isNullOrFalse:Eit,isNumeric:rot,keys:Pit,logicalExpr:$it,mergeDeep:Cit,never:bit,normalize:ght,normalizeAngle:not,omit:_it,pick:wit,prefixGenerator:Dit,removePathFromField:Kit,replaceAll:Yit,replacePathInField:Git,resetIdCounter:function(){Xit=42},setEqual:Oit,some:kit,stringify:aot,titleCase:Uit,unique:Iit,uniqueId:Jit,vals:Fit,varName:Bit,version:b_t},Symbol.toStringTag,{value:"Module"}));var __t,x_t={};const E_t=f((__t||(__t=1,Object.defineProperty(x_t,"__esModule",{value:!0}),x_t.default=function(e){var t=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t[0],version:t[1]}}),x_t));var S_t="2.15.0";const k_t="#fff",T_t="#888",C_t={background:"#333",view:{stroke:T_t},title:{color:k_t,subtitleColor:k_t},style:{"guide-label":{fill:k_t},"guide-title":{fill:k_t}},axis:{domainColor:k_t,gridColor:T_t,tickColor:k_t}},A_t="#4572a7",I_t={background:"#fff",arc:{fill:A_t},area:{fill:A_t},line:{stroke:A_t,strokeWidth:2},path:{stroke:A_t},rect:{fill:A_t},shape:{stroke:A_t},symbol:{fill:A_t,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},O_t="#30a2da",N_t="#cbcbcb",D_t="#f0f0f0",R_t="#333",M_t={arc:{fill:O_t},area:{fill:O_t},axis:{domainColor:N_t,grid:!0,gridColor:N_t,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:N_t,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:D_t,group:{fill:D_t},legend:{labelColor:R_t,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:R_t,titleFontSize:14,titlePadding:10},line:{stroke:O_t,strokeWidth:2},path:{stroke:O_t,strokeWidth:.5},rect:{fill:O_t},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:O_t},bar:{binSpacing:2,fill:O_t,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},P_t="#000",F_t={group:{fill:"#e5e5e5"},arc:{fill:P_t},area:{fill:P_t},line:{stroke:P_t},path:{stroke:P_t},rect:{fill:P_t},shape:{stroke:P_t},symbol:{fill:P_t,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},L_t="Benton Gothic, sans-serif",j_t="#82c6df",B_t="Benton Gothic Bold, sans-serif",$_t="normal",z_t={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},U_t={background:"#ffffff",title:{anchor:"start",color:"#000000",font:B_t,fontSize:22,fontWeight:"normal"},arc:{fill:j_t},area:{fill:j_t},line:{stroke:j_t,strokeWidth:2},path:{stroke:j_t},rect:{fill:j_t},shape:{stroke:j_t},symbol:{fill:j_t,size:30},axis:{labelFont:L_t,labelFontSize:11.5,labelFontWeight:"normal",titleFont:B_t,titleFontSize:13,titleFontWeight:$_t},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:L_t,labelFontSize:11.5,symbolType:"square",titleFont:B_t,titleFontSize:13,titleFontWeight:$_t},range:{category:z_t["category-6"],diverging:z_t["fireandice-6"],heatmap:z_t["fire-7"],ordinal:z_t["fire-7"],ramp:z_t["fire-7"]}},q_t="#ab5787",H_t="#979797",V_t={background:"#f9f9f9",arc:{fill:q_t},area:{fill:q_t},line:{stroke:q_t},path:{stroke:q_t},rect:{fill:q_t},shape:{stroke:q_t},symbol:{fill:q_t,size:30},axis:{domainColor:H_t,domainWidth:.5,gridWidth:.2,labelColor:H_t,tickColor:H_t,tickWidth:.2,titleColor:H_t},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},W_t="#3e5c69",G_t={background:"#fff",arc:{fill:W_t},area:{fill:W_t},line:{stroke:W_t},path:{stroke:W_t},rect:{fill:W_t},shape:{stroke:W_t},symbol:{fill:W_t},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Y_t="#1696d2",K_t="#000000",Z_t="Lato",Q_t="Lato",X_t={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},J_t={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Z_t},axisX:{domain:!0,domainColor:K_t,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Q_t,labelAngle:0,tickColor:K_t,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Z_t},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Q_t,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Z_t,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Q_t,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Z_t,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:X_t["six-groups-cat-1"],diverging:X_t["diverging-colors"],heatmap:X_t["diverging-colors"],ordinal:X_t["six-groups-seq"],ramp:X_t["shades-blue"]},area:{fill:Y_t},rect:{fill:Y_t},line:{color:Y_t,stroke:Y_t,strokeWidth:5},trail:{color:Y_t,stroke:Y_t,strokeWidth:0,size:1},path:{stroke:Y_t,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Y_t,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Y_t,stroke:null}},arc:{fill:Y_t},shape:{stroke:Y_t},symbol:{fill:Y_t,size:30}},ext="#3366CC",txt="#ccc",nxt="Arial, sans-serif",rxt={arc:{fill:ext},area:{fill:ext},path:{stroke:ext},rect:{fill:ext},shape:{stroke:ext},symbol:{stroke:ext},circle:{fill:ext},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:nxt,fontSize:12},"guide-title":{font:nxt,fontSize:12},"group-title":{font:nxt,fontSize:12}},title:{font:nxt,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:txt,tickColor:txt,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ixt=e=>e*(1/3+1),oxt=ixt(9),axt=ixt(10),sxt=ixt(12),lxt="Segoe UI",uxt="wf_standard-font, helvetica, arial, sans-serif",cxt="#252423",dxt="#605E5C",fxt="transparent",pxt="#118DFF",hxt="#DEEFFF",mxt=[hxt,pxt],gxt={view:{stroke:fxt},background:fxt,font:lxt,header:{titleFont:uxt,titleFontSize:sxt,titleColor:cxt,labelFont:lxt,labelFontSize:axt,labelColor:dxt},axis:{ticks:!1,grid:!1,domain:!1,labelColor:dxt,labelFontSize:oxt,titleFont:uxt,titleColor:cxt,titleFontSize:sxt,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:"#C8C6C4",gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:pxt},line:{stroke:pxt,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:lxt,fontSize:oxt,fill:dxt},arc:{fill:pxt},area:{fill:pxt,line:!0,opacity:.6},path:{stroke:pxt},rect:{fill:pxt},point:{fill:pxt,filled:!0,size:75},shape:{stroke:pxt},symbol:{fill:pxt,strokeWidth:1.5,size:50},legend:{titleFont:lxt,titleFontWeight:"bold",titleColor:dxt,labelFont:lxt,labelFontSize:axt,labelColor:dxt,symbolType:"circle",symbolSize:75},range:{category:[pxt,"#12239E","#E66C37","#6B007B","#E044A7","#744EC2","#D9B300","#D64550"],diverging:mxt,heatmap:mxt,ordinal:[hxt,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",pxt]}},yxt='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',vxt={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},bxt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],wxt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function _xt({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=vxt.gridBg[e],i=vxt.textPrimary[e],o=vxt.textSecondary[e],a="dark"===n?bxt:wxt,s="dark"===n?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:yxt,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:'IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',labelFontWeight:400,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:vxt.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:yxt,fill:o,fontWeight:400},"guide-title":{font:yxt,fill:o,fontWeight:400}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const xxt=_xt({theme:"white",background:"#ffffff"}),Ext=_xt({theme:"g10",background:"#f4f4f4"}),Sxt=_xt({theme:"g90",background:"#262626"}),kxt=_xt({theme:"g100",background:"#161616"}),Txt=S_t,Cxt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Ext,carbong100:kxt,carbong90:Sxt,carbonwhite:xxt,dark:C_t,excel:I_t,fivethirtyeight:M_t,ggplot2:F_t,googlecharts:rxt,latimes:U_t,powerbi:gxt,quartz:V_t,urbaninstitute:J_t,version:Txt,vox:G_t},Symbol.toStringTag,{value:"Module"})),Axt="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n",Ixt="vg-tooltip-element",Oxt={offsetX:10,offsetY:10,id:Ixt,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function Nxt(e,t,n){if(PMe(e))return`[${e.map(e=>t(OPe(e)?e:Dxt(e,n))).join(", ")}]`;if(FMe(e)){let r="";const i=e,{title:o}=i,a=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title"]);o&&(r+=`<h2>${t(o)}</h2>`);const s=Object.keys(a);if(s.length>0){r+="<table>";for(const e of s){let i=a[e];void 0!==i&&(FMe(i)&&(i=Dxt(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function Dxt(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class Rxt{constructor(e){this.options=Object.assign(Object.assign({},Oxt),e);const t=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Axt.toString().replace(Ixt,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}this.el=document.getElementById(t),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(e,t,n,r){if(null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=Nxt(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}const Mxt='.vega-embed {\n  position: relative;\n  display: inline-block; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: scroll;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function Pxt(e,...t){for(const n of t)Fxt(e,n);return e}function Fxt(e,t){for(const n of Object.keys(t))BMe(e,n,t[n],!0)}var Lxt;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const jxt=dit;let Bxt=w_t;const $xt="undefined"!=typeof window?window:void 0;void 0===Bxt&&(null===(Lxt=null==$xt?void 0:$xt.vl)||void 0===Lxt?void 0:Lxt.compile)&&(Bxt=$xt.vl);const zxt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Uxt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},qxt={vega:"Vega","vega-lite":"Vega-Lite"},Hxt={vega:jxt.version,"vega-lite":Bxt?Bxt.version:"not available"},Vxt={vega:e=>e,"vega-lite":(e,t)=>Bxt.compile(e,{config:t}).spec},Wxt='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>';function Gxt(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${qxt[r]} JSON Source`}function Yxt(e,t,n={}){var r,i,o;return ii(this,void 0,void 0,function*(){const a=function(e){return!(!e||!("load"in e))}(n.loader)?n.loader:jxt.loader(n.loader),s=OPe(t)?JSON.parse(yield a.load(t)):t,l=yield Kxt(null!==(r=s.usermeta&&s.usermeta.embedOptions)&&void 0!==r?r:{},a),u=yield Kxt(n,a),c=Object.assign(Object.assign({},Pxt(u,l)),{config:jMe(null!==(i=u.config)&&void 0!==i?i:{},null!==(o=l.config)&&void 0!==o?o:{})});return yield function(e,t,n={},r){var i,o,a,s,l,u;return ii(this,void 0,void 0,function*(){const c=n.theme?jMe(Cxt[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,d=kPe(n.actions)?n.actions:Pxt({},zxt,null!==(o=n.actions)&&void 0!==o?o:{}),f=Object.assign(Object.assign({},Uxt),n.i18n),p=null!==(a=n.renderer)&&void 0!==a?a:"canvas",h=null!==(s=n.logLevel)&&void 0!==s?s:jxt.Warn,m=null!==(l=n.downloadFileName)&&void 0!==l?l:"visualization";if(!1!==n.defaultStyle){const e="vega-embed-style";if(!document.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?Mxt.toString():n.defaultStyle,document.head.appendChild(t)}}const g=function(e,t){if(e.$schema){const n=E_t(e.$schema);t&&n.library;const r=n.library;return yMe.satisfies(Hxt[r],`^${n.version.slice(1)}`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let y=Vxt[g](t,c);if("vega-lite"===g&&y.$schema){const e=E_t(y.$schema);yMe.satisfies(Hxt.vega,`^${e.version.slice(1)}`)}const v="string"==typeof e?document.querySelector(e):e;if(!v)throw Error(`${e} does not exist`);v.classList.add("vega-embed"),d&&v.classList.add("has-actions"),v.innerHTML="";const b=n.patch;b&&(y=b instanceof Function?b(y):eDe(y,b,!0,!1).newDocument),n.formatLocale&&jxt.formatLocale(n.formatLocale),n.timeFormatLocale&&jxt.timeFormatLocale(n.timeFormatLocale);const w=jxt.parse(y,"vega-lite"===g?{}:c),_=new jxt.View(w,{loader:r,logLevel:h,renderer:p});if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new Rxt(!0===n.tooltip?{}:n.tooltip).call,_.tooltip(e)}let x,{hover:E}=n;if(void 0===E&&(E="vega"===g),E){const{hoverSet:e,updateSet:t}="boolean"==typeof E?{}:E;_.hover(e,t)}if(n&&(null!=n.width&&_.width(n.width),null!=n.height&&_.height(n.height),null!=n.padding&&_.padding(n.padding)),yield _.initialize(e).runAsync(),!1!==d){let e=v;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=f.CLICK_TO_VIEW_ACTIONS,v.append(t),e=t;const n=document.createElement("summary");n.innerHTML=Wxt,t.append(n),x=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",x)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===d||!1!==d.export)for(const t of["svg","png"])if(!0===d||!0===d.export||d.export[t]){const e=f[`${t.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=e,i.href="#",i.target="_blank",i.download=`${m}.${t}`,i.addEventListener("mousedown",function(e){return ii(this,void 0,void 0,function*(){e.preventDefault();const r=yield _.toImageURL(t,n.scaleFactor);this.href=r})}),r.append(i)}if(!0===d||!1!==d.source){const e=document.createElement("a");e.text=f.SOURCE_ACTION,e.href="#",e.addEventListener("mousedown",function(e){var r,i;Gxt(hDe(t),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",g),e.preventDefault()}),r.append(e)}if("vega-lite"===g&&(!0===d||!1!==d.compiled)){const e=document.createElement("a");e.text=f.COMPILED_ACTION,e.href="#",e.addEventListener("mousedown",function(e){var t,r;Gxt(hDe(y),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()}),r.append(e)}if(!0===d||!1!==d.editor){const e=null!==(u=n.editorUrl)&&void 0!==u?u:"https://vega.github.io/editor/",i=document.createElement("a");i.text=f.EDITOR_ACTION,i.href="#",i.addEventListener("mousedown",function(n){!function(e,t,n){const r=e.open(t);let i=40;e.addEventListener("message",function t(n){n.source===r&&(i=0,e.removeEventListener("message",t,!1))},!1),setTimeout(function e(){i<=0||(r.postMessage(n,"*"),setTimeout(e,250),i-=1)},250)}(window,e,{config:c,mode:g,renderer:p,spec:hDe(t)}),n.preventDefault()}),r.append(i)}}function S(){x&&document.removeEventListener("click",x),_.finalize()}return{view:_,spec:t,vgSpec:y,finalize:S}})}(e,s,c,a)})}function Kxt(e,t){var n;return ii(this,void 0,void 0,function*(){const r=OPe(e.config)?JSON.parse(yield t.load(e.config)):null!==(n=e.config)&&void 0!==n?n:{},i=OPe(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function Zxt(e,t){Object.keys(t).forEach(n=>{!function(e,t,n){var r;n&&((r=n)&&"[object Function]"==={}.toString.call(r)?n(e.data(t)):e.change(t,jxt.changeset().remove(()=>!0).insert(n)))}(e,n,t[n])})}function Qxt(e){const t=new Set;return e.forEach(e=>{Object.keys(e).forEach(e=>{t.add(e)})}),t}const Xxt=()=>{};function Jxt(e,t){const n=Object.keys(t);return n.forEach(n=>{try{e.addSignalListener(n,t[n])}catch(r){}}),n.length>0}function eEt(e,t){const n=Object.keys(t);return n.forEach(n=>{try{e.removeSignalListener(n,t[n])}catch(r){}}),n.length>0}function tEt(e){const{spec:t,width:n,height:r}=e;return void 0!==n&&void 0!==r?{...t,width:n,height:r}:void 0!==n?{...t,width:n}:void 0!==r?{...t,height:r}:t}function nEt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class rEt extends T.PureComponent{constructor(){super(...arguments),nEt(this,"containerRef",T.createRef()),nEt(this,"resultPromise",void 0),nEt(this,"handleError",e=>{const{onError:t=Xxt}=this.props;t(e,this.containerRef.current)}),nEt(this,"modifyView",e=>{this.resultPromise&&this.resultPromise.then(t=>(t&&e(t.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(e){const t=Qxt([this.props,e]);if(t.delete("className"),t.delete("signalListeners"),t.delete("spec"),t.delete("style"),t.delete("width"),t.delete("height"),Array.from(t).some(t=>this.props[t]!==e[t]))this.clearView(),this.createView();else{const t=function(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Qxt([e,t]);return!r.has("width")||"width"in e&&"width"in t&&e.width===t.width||("width"in e&&"number"==typeof e.width?n.width=e.width:n.isExpensive=!0),!r.has("height")||"height"in e&&"height"in t&&e.height===t.height||("height"in e&&"number"==typeof e.height?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(n=>!(n in e)||!(n in t)||!Ej(e[n],t[n]))&&(n.isExpensive=!0),!(!1===n.width&&!1===n.height&&!n.isExpensive)&&n}(tEt(this.props),tEt(e)),{signalListeners:n}=this.props,{signalListeners:r}=e;if(t)if(t.isExpensive)this.clearView(),this.createView();else{const e=!FNe(n,r);this.modifyView(i=>{!1!==t.width&&i.width(t.width),!1!==t.height&&i.height(t.height),e&&(r&&eEt(i,r),n&&Jxt(i,n)),i.run()})}else FNe(n,r)||this.modifyView(e=>{r&&eEt(e,r),n&&Jxt(e,n),e.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:e,onNewView:t,signalListeners:n={},width:r,height:i,...o}=this.props;if(this.containerRef.current){const e=tEt(this.props);this.resultPromise=Yxt(this.containerRef.current,e,o).then(e=>{if(e){const{view:t}=e;Jxt(t,n)&&t.run()}return e}).catch(this.handleError),t&&this.modifyView(t)}}clearView(){return this.resultPromise&&this.resultPromise.then(e=>{e&&e.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:e,style:t}=this.props;return T.createElement("div",{ref:this.containerRef,className:e,style:t})}}function iEt(){return iEt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iEt.apply(this,arguments)}function oEt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}nEt(rEt,"propTypes",{className:cB.string,onError:cB.func});class aEt extends T.PureComponent{constructor(){super(...arguments),oEt(this,"vegaEmbed",T.createRef()),oEt(this,"handleNewView",e=>{this.update();const{onNewView:t=Xxt}=this.props;t(e)})}componentDidMount(){this.update()}componentDidUpdate(e){FNe(this.props.data,e.data)||this.update()}update(){const{data:e}=this.props;this.vegaEmbed.current&&e&&Object.keys(e).length>0&&this.vegaEmbed.current.modifyView(t=>{Zxt(t,e),t.resize().run()})}render(){const{data:e,...t}=this.props;return T.createElement(rEt,iEt({ref:this.vegaEmbed},t,{onNewView:this.handleNewView}))}}function sEt(){return sEt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sEt.apply(this,arguments)}function lEt(e){return T.createElement(aEt,sEt({},e,{mode:"vega-lite"}))}oEt(aEt,"defaultProps",{data:{}});const uEt="queryResult",cEt=({className:e,width:t="auto",height:n="auto",aspectRatio:r=1.5,sqlQuery:i,spec:o})=>{const a=k.useRef(null),s=function({width:e,height:t,aspectRatio:n,containerRef:r}){const{width:i=0}=Qx({ref:r,box:"border-box"});return k.useMemo(()=>"auto"!==e&&"auto"!==t?{width:e,height:t}:"auto"!==e?{width:e,height:e/n}:"auto"!==t?{width:t*n,height:t}:{width:i,height:i/n},[i,n,e,t])}({containerRef:a,width:t,height:n,aspectRatio:r}),l=k.useMemo(()=>{const e="string"==typeof o?I6(o):o;return e?{...e,data:{name:uEt},width:s.width,height:s.height,autosize:{type:"fit",contains:"padding"}}:null},[o,s]),u=i8({query:i}),c=k.useMemo(()=>u.data?{[uEt]:n8(u.data.arrowTable)}:null,[u.data]);return w.jsxs("div",{ref:a,className:zn("flex h-full w-full flex-col gap-2 overflow-hidden",e),children:[u.error&&w.jsx("div",{className:"whitespace-pre-wrap font-mono text-sm text-red-500",children:u.error.message}),w.jsx(Zn,{ratio:r,children:l&&c&&w.jsx(lEt,{spec:l,data:c})})]})};function dEt({className:e,sqlQuery:t,vegaLiteSpec:n}){return w.jsx(w.Fragment,{children:n&&w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx(cbe,{title:"Query",sqlQuery:t}),w.jsx(k.Suspense,{fallback:w.jsx("div",{className:"flex h-full w-full items-center justify-center",children:w.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-blue-600"})}),children:w.jsx(cEt,{className:zn("max-w-[600px]",e),aspectRatio:16/9,sqlQuery:t,spec:n})})]})})}const fEt=oA({sqlQuery:XC(),vegaLiteSpec:XC(),reasoning:XC()});function pEt({description:e='A tool for creating VegaLite charts based on the schema of the SQL query result from the "query" tool.\nIn the response:\n- omit the data from the vegaLiteSpec\n- provide an sql query in sqlQuery instead.'}={}){return{description:e,parameters:fEt,execute:async({sqlQuery:e,vegaLiteSpec:t})=>{try{return{llmResult:{success:!0,details:"Chart created successfully."},additionalData:{sqlQuery:e,vegaLiteSpec:JSON.parse(t)}}}catch(n){return{llmResult:{success:!1,details:`Not a valid JSON object: ${n}`}}}},component:dEt}}function hEt(e,t){let n;try{n=e()}catch(F0){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),i=null!=(t=n.getItem(e))?t:null;return i instanceof Promise?i.then(r):r(i)},setItem:(e,t)=>n.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>n.removeItem(e)}}const mEt=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then:e=>mEt(e)(n),catch(e){return this}}}catch(F0){return{then(e){return this},catch:t=>mEt(t)(F0)}}},gEt=(e,t)=>(n,r,i)=>{let o={storage:hEt(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},a=!1;const s=new Set,l=new Set;let u=o.storage;if(!u)return e((...e)=>{n(...e)},r,i);const c=()=>{const e=o.partialize({...r()});return u.setItem(o.name,{state:e,version:o.version})},d=i.setState;i.setState=(e,t)=>(d(e,t),c());const f=e((...e)=>(n(...e),c()),r,i);let p;i.getInitialState=()=>f;const h=()=>{var e,t;if(!u)return;a=!1,s.forEach(e=>{var t;return e(null!=(t=r())?t:f)});const i=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=r())?e:f))||void 0;return mEt(u.getItem.bind(u))(o.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];if(o.migrate){const t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}}return[!1,void 0]}).then(e=>{var t;const[i,a]=e;if(p=o.merge(a,null!=(t=r())?t:f),n(p,!0),i)return c()}).then(()=>{null==i||i(p,void 0),p=r(),a=!0,l.forEach(e=>e(p))}).catch(e=>{null==i||i(void 0,e)})};return i.persist={setOptions:e=>{o={...o,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>h(),hasHydrated:()=>a,onHydrate:e=>(s.add(e),()=>{s.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},o.skipHydration||h(),p||f},yEt=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function vEt(e,t,n){const r=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const n=t.split(".").pop().toLowerCase(),r=yEt.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:i}=e,o="string"==typeof t?t:"string"==typeof i&&i.length>0?i:`./${e.name}`;return"string"!=typeof r.path&&bEt(r,"path",o),bEt(r,"relativePath",o),r}function bEt(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const wEt=[".DS_Store","Thumbs.db"];function _Et(e){return"object"==typeof e&&null!==e}function xEt(e){return e.filter(e=>-1===wEt.indexOf(e.name))}function EEt(e){if(null===e)return[];const t=[];for(let n=0;n<e.length;n++){const r=e[n];t.push(r)}return t}function SEt(e){if("function"!=typeof e.webkitGetAsEntry)return TEt(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?AEt(t):TEt(e,t)}function kEt(e){return e.reduce((e,t)=>[...e,...Array.isArray(t)?kEt(t):[t]],[])}function TEt(e,t){return ii(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error(`${e} is not a File`);if(void 0!==t){const e=yield t.getFile();return e.handle=t,vEt(e)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return vEt(r,null!==(n=null==t?void 0:t.fullPath)&&void 0!==n?n:void 0)})}function CEt(e){return ii(this,void 0,void 0,function*(){return e.isDirectory?AEt(e):function(e){return ii(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(n=>{const r=vEt(n,e.fullPath);t(r)},e=>{n(e)})})})}(e)})}function AEt(e){const t=e.createReader();return new Promise((e,n)=>{const r=[];!function i(){t.readEntries(t=>ii(this,void 0,void 0,function*(){if(t.length){const e=Promise.all(t.map(CEt));r.push(e),i()}else try{const t=yield Promise.all(r);e(t)}catch(HOt){n(HOt)}}),e=>{n(e)})}()})}var IEt,OEt={};const NEt=f((IEt||(IEt=1,OEt.__esModule=!0,OEt.default=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(0===n.length)return!0;var r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some(function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t})}return!0}),OEt));function DEt(e){return function(e){if(Array.isArray(e))return jEt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||LEt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function REt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function MEt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?REt(Object(n),!0).forEach(function(t){PEt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):REt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PEt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function FEt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||LEt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LEt(e,t){if(e){if("string"==typeof e)return jEt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jEt(e,t):void 0}}function jEt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var BEt="function"==typeof NEt?NEt:NEt.default,$Et=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:"file-invalid-type",message:"File type must be ".concat(t)}},zEt=function(e){return{code:"file-too-large",message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},UEt=function(e){return{code:"file-too-small",message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},qEt={code:"too-many-files",message:"Too many files"};function HEt(e,t){var n="application/x-moz-file"===e.type||BEt(e,t);return[n,n?null:$Et(t)]}function VEt(e,t,n){if(WEt(e.size))if(WEt(t)&&WEt(n)){if(e.size>n)return[!1,zEt(n)];if(e.size<t)return[!1,UEt(t)]}else{if(WEt(t)&&e.size<t)return[!1,UEt(t)];if(WEt(n)&&e.size>n)return[!1,zEt(n)]}return[!0,null]}function WEt(e){return null!=e}function GEt(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function YEt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(e){return"Files"===e||"application/x-moz-file"===e}):!!e.target&&!!e.target.files}function KEt(e){e.preventDefault()}function ZEt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some(function(t){return!GEt(e)&&t&&t.apply(void 0,[e].concat(r)),GEt(e)})}}function QEt(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function XEt(e){return/^.*\.[\w]+$/.test(e)}var JEt=["children"],eSt=["open"],tSt=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],nSt=["refKey","onChange","onClick"];function rSt(e){return function(e){if(Array.isArray(e))return aSt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||oSt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iSt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(HOt){s=!0,i=HOt}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}(e,t)||oSt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oSt(e,t){if(e){if("string"==typeof e)return aSt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?aSt(e,t):void 0}}function aSt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sSt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function lSt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sSt(Object(n),!0).forEach(function(t){uSt(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sSt(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uSt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cSt(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var dSt=k.forwardRef(function(e,t){var n=e.children,r=hSt(cSt(e,JEt)),i=r.open,o=cSt(r,eSt);return k.useImperativeHandle(t,function(){return{open:i}},[i]),T.createElement(k.Fragment,null,n(lSt(lSt({},o),{},{open:i})))});dSt.displayName="Dropzone";var fSt={disabled:!1,getFilesFromEvent:function(e){return ii(this,void 0,void 0,function*(){return _Et(e)&&_Et(e.dataTransfer)?function(e,t){return ii(this,void 0,void 0,function*(){if(e.items){const n=EEt(e.items).filter(e=>"file"===e.kind);if("drop"!==t)return n;return xEt(kEt(yield Promise.all(n.map(SEt))))}return xEt(EEt(e.files).map(e=>vEt(e)))})}(e.dataTransfer,e.type):function(e){return _Et(e)&&_Et(e.target)}(e)?function(e){return EEt(e.target.files).map(e=>vEt(e))}(e):Array.isArray(e)&&e.every(e=>"getFile"in e&&"function"==typeof e.getFile)?function(e){return ii(this,void 0,void 0,function*(){return(yield Promise.all(e.map(e=>e.getFile()))).map(e=>vEt(e))})}(e):[]})},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};dSt.defaultProps=fSt,dSt.propTypes={children:cB.func,accept:cB.objectOf(cB.arrayOf(cB.string)),multiple:cB.bool,preventDropOnDocument:cB.bool,noClick:cB.bool,noKeyboard:cB.bool,noDrag:cB.bool,noDragEventsBubbling:cB.bool,minSize:cB.number,maxSize:cB.number,maxFiles:cB.number,disabled:cB.bool,getFilesFromEvent:cB.func,onFileDialogCancel:cB.func,onFileDialogOpen:cB.func,useFsAccessApi:cB.bool,autoFocus:cB.bool,onDragEnter:cB.func,onDragLeave:cB.func,onDragOver:cB.func,onDrop:cB.func,onDropAccepted:cB.func,onDropRejected:cB.func,onError:cB.func,validator:cB.func};var pSt={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function hSt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=lSt(lSt({},fSt),e),n=t.accept,r=t.disabled,i=t.getFilesFromEvent,o=t.maxSize,a=t.minSize,s=t.multiple,l=t.maxFiles,u=t.onDragEnter,c=t.onDragLeave,d=t.onDragOver,f=t.onDrop,p=t.onDropAccepted,h=t.onDropRejected,m=t.onFileDialogCancel,g=t.onFileDialogOpen,y=t.useFsAccessApi,v=t.autoFocus,b=t.preventDropOnDocument,w=t.noClick,_=t.noKeyboard,x=t.noDrag,E=t.noDragEventsBubbling,S=t.onError,T=t.validator,C=k.useMemo(function(){return function(e){if(WEt(e))return Object.entries(e).reduce(function(e,t){var n=FEt(t,2),r=n[0],i=n[1];return[].concat(DEt(e),[r],DEt(i))},[]).filter(function(e){return QEt(e)||XEt(e)}).join(",")}(n)},[n]),A=k.useMemo(function(){return function(e){return WEt(e)?[{description:"Files",accept:Object.entries(e).filter(function(e){var t=FEt(e,2),n=t[0],r=t[1],i=!0;return QEt(n)||(i=!1),Array.isArray(r)&&r.every(XEt)||(i=!1),i}).reduce(function(e,t){var n=FEt(t,2),r=n[0],i=n[1];return MEt(MEt({},e),{},PEt({},r,i))},{})}]:e}(n)},[n]),I=k.useMemo(function(){return"function"==typeof g?g:gSt},[g]),O=k.useMemo(function(){return"function"==typeof m?m:gSt},[m]),N=k.useRef(null),D=k.useRef(null),R=iSt(k.useReducer(mSt,pSt),2),M=R[0],P=R[1],F=M.isFocused,L=M.isFileDialogActive,j=k.useRef("undefined"!=typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),B=function(){!j.current&&L&&setTimeout(function(){D.current&&(D.current.files.length||(P({type:"closeDialog"}),O()))},300)};k.useEffect(function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}},[D,L,O,j]);var $=k.useRef([]),z=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),$.current=[])};k.useEffect(function(){return b&&(document.addEventListener("dragover",KEt,!1),document.addEventListener("drop",z,!1)),function(){b&&(document.removeEventListener("dragover",KEt),document.removeEventListener("drop",z))}},[N,b]),k.useEffect(function(){return!r&&v&&N.current&&N.current.focus(),function(){}},[N,v,r]);var U=k.useCallback(function(e){S&&S(e)},[S]),q=k.useCallback(function(e){e.preventDefault(),e.persist(),ne(e),$.current=[].concat(rSt($.current),[e.target]),YEt(e)&&Promise.resolve(i(e)).then(function(t){if(!GEt(e)||E){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,a=e.maxFiles,s=e.validator;return!(!o&&t.length>1||o&&a>=1&&t.length>a)&&t.every(function(e){var t=FEt(HEt(e,n),1)[0],o=FEt(VEt(e,r,i),1)[0],a=s?s(e):null;return t&&o&&!a})}({files:t,accept:C,minSize:a,maxSize:o,multiple:s,maxFiles:l,validator:T});P({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}}).catch(function(e){return U(e)})},[i,u,U,E,C,a,o,s,l,T]),H=k.useCallback(function(e){e.preventDefault(),e.persist(),ne(e);var t=YEt(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1},[d,E]),V=k.useCallback(function(e){e.preventDefault(),e.persist(),ne(e);var t=$.current.filter(function(e){return N.current&&N.current.contains(e)}),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),$.current=t,t.length>0||(P({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),YEt(e)&&c&&c(e))},[N,c,E]),W=k.useCallback(function(e,t){var n=[],r=[];e.forEach(function(e){var t=iSt(HEt(e,C),2),i=t[0],s=t[1],l=iSt(VEt(e,a,o),2),u=l[0],c=l[1],d=T?T(e):null;if(i&&u&&!d)n.push(e);else{var f=[s,c];d&&(f=f.concat(d)),r.push({file:e,errors:f.filter(function(e){return e})})}}),(!s&&n.length>1||s&&l>=1&&n.length>l)&&(n.forEach(function(e){r.push({file:e,errors:[qEt]})}),n.splice(0)),P({acceptedFiles:n,fileRejections:r,isDragReject:r.length>0,type:"setFiles"}),f&&f(n,r,t),r.length>0&&h&&h(r,t),n.length>0&&p&&p(n,t)},[P,s,C,a,o,l,f,p,h,T]),G=k.useCallback(function(e){e.preventDefault(),e.persist(),ne(e),$.current=[],YEt(e)&&Promise.resolve(i(e)).then(function(t){GEt(e)&&!E||W(t,e)}).catch(function(e){return U(e)}),P({type:"reset"})},[i,W,U,E]),Y=k.useCallback(function(){if(j.current){P({type:"openDialog"}),I();var e={multiple:s,types:A};window.showOpenFilePicker(e).then(function(e){return i(e)}).then(function(e){W(e,null),P({type:"closeDialog"})}).catch(function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(O(e),P({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?U(e):(j.current=!1,D.current?(D.current.value=null,D.current.click()):U(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))})}else D.current&&(P({type:"openDialog"}),I(),D.current.value=null,D.current.click())},[P,I,O,y,W,U,A,s]),K=k.useCallback(function(e){N.current&&N.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),Y()))},[N,Y]),Z=k.useCallback(function(){P({type:"focus"})},[]),Q=k.useCallback(function(){P({type:"blur"})},[]),X=k.useCallback(function(){w||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?Y():setTimeout(Y,0))},[w,Y]),J=function(e){return r?null:e},ee=function(e){return _?null:J(e)},te=function(e){return x?null:J(e)},ne=function(e){E&&e.stopPropagation()},re=k.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,i=e.role,o=e.onKeyDown,a=e.onFocus,s=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,d=e.onDragLeave,f=e.onDrop,p=cSt(e,tSt);return lSt(lSt(uSt({onKeyDown:ee(ZEt(o,K)),onFocus:ee(ZEt(a,Z)),onBlur:ee(ZEt(s,Q)),onClick:J(ZEt(l,X)),onDragEnter:te(ZEt(u,q)),onDragOver:te(ZEt(c,H)),onDragLeave:te(ZEt(d,V)),onDrop:te(ZEt(f,G)),role:"string"==typeof i&&""!==i?i:"presentation"},n,N),r||_?{}:{tabIndex:0}),p)}},[N,K,Z,Q,X,q,H,V,G,_,x,r]),ie=k.useCallback(function(e){e.stopPropagation()},[]),oe=k.useMemo(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,i=e.onClick,o=cSt(e,nSt);return lSt(lSt({},uSt({accept:C,multiple:s,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:J(ZEt(r,G)),onClick:J(ZEt(i,ie)),tabIndex:-1},n,D)),o)}},[D,n,s,G,r]);return lSt(lSt({},M),{},{isFocused:F&&!r,getRootProps:re,getInputProps:oe,rootRef:N,inputRef:D,open:J(Y)})}function mSt(e,t){switch(t.type){case"focus":return lSt(lSt({},e),{},{isFocused:!0});case"blur":return lSt(lSt({},e),{},{isFocused:!1});case"openDialog":return lSt(lSt({},pSt),{},{isFileDialogActive:!0});case"closeDialog":return lSt(lSt({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return lSt(lSt({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return lSt(lSt({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return lSt({},pSt);default:return e}}function gSt(){}const ySt=e=>{const{isInvalid:t,onDrop:n,multiple:r=!0,className:i,acceptedFormats:o,children:a}=e,[s,l]=k.useState(!1),{getRootProps:u,getInputProps:c,isDragActive:d,open:f}=hSt({onDrop:async e=>{l(!0);try{await n(e)}finally{l(!1)}},accept:o,multiple:r,noClick:!0,noKeyboard:!0});return w.jsx("div",{className:zn("relative flex h-full min-h-[180px] cursor-pointer flex-col overflow-hidden rounded-lg border-2 border-dashed p-2 transition-colors",d?"border-muted bg-muted/50":"border-muted",t&&"border-destructive",!s&&"hover:border-muted",i),...u(),onClick:s?void 0:f,children:s?w.jsxs("div",{className:"text-muted-foreground flex h-full w-full items-center justify-center gap-4 text-xs",children:[w.jsx(nw,{className:"h-4 w-4"}),"Adding files..."]}):w.jsxs(w.Fragment,{children:[w.jsx("input",{...c()}),w.jsx("div",{className:"relative flex h-full flex-col",children:w.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-2",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Rt,{className:"h-6 w-6"}),w.jsx("p",{className:"text-muted-foreground text-sm",children:d?"Drop here ...":"Add files"})]}),o&&w.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[w.jsx("p",{className:"text-xs font-bold",children:"Supported formats:"}),w.jsx("p",{className:"text-muted-foreground text-xs",children:Object.values(o).flat().join(", ")})]}),a]})})]})})};let vSt=null;const bSt=e=>{if(!(e=>{const t=((null==e?void 0:e.message)||(null==e?void 0:e.toString())||"").toLowerCase();return t.includes("out of memory")||t.includes("failed to allocate")||t.includes("3.1 gib/3.1 gib used")||t.includes("memory limit exceeded")||t.includes("unused blocks cannot be evicted")})(e))return!1;return!!vSt&&(vSt({type:"out_of_memory",message:"The operation requires more memory than available. This typically happens with very large files or complex queries.",originalError:e,timestamp:new Date}),!0)};function wSt(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var _St,xSt={exports:{}};
/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var ESt=(_St||(_St=1,xSt.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){if(!s&&wSt)return wSt(a);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){return i(t[a][1][e]||e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o=wSt,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){var r=e("./utils"),i=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,a,s,l,u,c=[],d=0,f=e.length,p=f,h="string"!==r.getTypeOf(e);d<e.length;)p=f-d,i=h?(t=e[d++],n=d<f?e[d++]:0,d<f?e[d++]:0):(t=e.charCodeAt(d++),n=d<f?e.charCodeAt(d++):0,d<f?e.charCodeAt(d++):0),a=t>>2,s=(3&t)<<4|n>>4,l=1<p?(15&n)<<2|i>>6:64,u=2<p?63&i:64,c.push(o.charAt(a)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},n.decode=function(e){var t,n,r,a,s,l,u=0,c=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&p--,e.charAt(e.length-2)===o.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=i.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)t=o.indexOf(e.charAt(u++))<<2|(a=o.indexOf(e.charAt(u++)))>>4,n=(15&a)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(l=o.indexOf(e.charAt(u++))),f[c++]=t,64!==s&&(f[c++]=n),64!==l&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,t,n){var r=e("./external"),i=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),a=e("./stream/DataLengthProbe");function s(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}s.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new a("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,t,n){return e.pipe(new o).pipe(new a("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new a("compressedSize")).withStreamInfo("compression",t)},t.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var o=i,a=r+n;e^=-1;for(var s=r;s<a;s++)e=e>>>8^o[255&(e^t.charCodeAt(s))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),o=e("./utils"),a=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,t){a.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",o.inherits(l,a),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){a.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new l("Deflate",e)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,a,c){var d,f,p=e.file,h=e.compression,m=c!==s.utf8encode,g=o.transformTo("string",c(p.name)),y=o.transformTo("string",s.utf8encode(p.name)),v=p.comment,b=o.transformTo("string",c(v)),w=o.transformTo("string",s.utf8encode(v)),_=y.length!==p.name.length,x=w.length!==v.length,E="",S="",k="",T=p.dir,C=p.date,A={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(A.crc32=e.crc32,A.compressedSize=e.compressedSize,A.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),m||!_&&!x||(I|=2048);var O,N,D,R=0,M=0;T&&(R|=16),"UNIX"===a?(M=798,R|=(O=p.unixPermissions,N=T,D=O,O||(D=N?16893:33204),(65535&D)<<16)):(M=20,R|=function(e){return 63&(e||0)}(p.dosPermissions)),d=C.getUTCHours(),d<<=6,d|=C.getUTCMinutes(),d<<=5,d|=C.getUTCSeconds()/2,f=C.getUTCFullYear()-1980,f<<=4,f|=C.getUTCMonth()+1,f<<=5,f|=C.getUTCDate(),_&&(S=r(1,1)+r(l(g),4)+y,E+="up"+r(S.length,2)+S),x&&(k=r(1,1)+r(l(b),4)+w,E+="uc"+r(k.length,2)+k);var P="";return P+="\n\0",P+=r(I,2),P+=h.magic,P+=r(d,2),P+=r(f,2),P+=r(A.crc32,4),P+=r(A.compressedSize,4),P+=r(A.uncompressedSize,4),P+=r(g.length,2),P+=r(E.length,2),{fileRecord:u.LOCAL_FILE_HEADER+P+g+E,dirRecord:u.CENTRAL_FILE_HEADER+r(M,2)+P+r(b.length,2)+"\0\0\0\0"+r(R,4)+r(i,4)+g+E+b}}var o=e("../utils"),a=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),u=e("../signature");function c(e,t,n,r){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,a),c.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,a.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var t,n=this.streamFiles&&!e.file.dir,o=i(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),n)this.push({data:(t=e,u.DATA_DESCRIPTOR+r(t.crc32,4)+r(t.compressedSize,4)+r(t.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n,i,a,s,l,c,d=this.bytesWritten-e,f=(n=this.dirRecords.length,i=d,a=e,s=this.zipComment,l=this.encodeFileName,c=o.transformTo("string",l(s)),u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(n,2)+r(n,2)+r(i,4)+r(a,4)+r(c.length,2)+c);this.push({data:f,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(e){t.error(e)}),this},c.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var t=this._sources;if(!a.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(r){}return!0},c.prototype.lock=function(){a.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var o=new i(t.streamFiles,n,t.platform,t.encodeFileName),a=0;try{e.forEach(function(e,n){a++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),s=n.options.compressionOptions||t.compressionOptions||{},l=n.dir,u=n.date;n._compressWorker(i,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)}),o.entriesCount=a}catch(s){o.error(s)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){var r=e("./utils"),i=e("./external"),o=e("./utf8"),a=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new i.Promise(function(t,n){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",function(e){n(e)}).on("end",function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(e){var n=new a(t);return n.load(e),n}).then(function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var o=0;o<r.length;o++)n.push(u(r[o]));return i.Promise.all(n)}).then(function(e){for(var i=e.shift(),o=i.files,a=0;a<o.length;a++){var s=o[a],l=s.fileNameStr,u=r.resolve(s.fileNameStr);n.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:t.createFolders}),s.dir||(n.file(u).unsafeOriginalName=l)}return i.zipComment.length&&(n.comment=i.zipComment),n})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){var r=e("../utils"),i=e("../stream/GenericWorker");function o(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(o,i),o.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",function(e){t.push({data:e,meta:{percent:0}})}).on("error",function(e){t.isPaused?this.generatedError=e:t.error(e)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})},o.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",function(e,t){i.push(e)||i._helper.pause(),n&&n(t)}).on("error",function(e){i.emit("error",e)}).on("end",function(){i.push(null)})}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){function r(e,t,n){var r,i=o.getTypeOf(t),s=o.extend(n||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=h(e))&&g.call(this,r,!0);var d="string"===i&&!1===s.binary&&!1===s.base64;n&&void 0!==n.binary||(s.binary=!d),(t instanceof u&&0===t.uncompressedSize||s.dir||!t||0===t.length)&&(s.base64=!1,s.binary=!0,t="",s.compression="STORE",i="string");var y=null;y=t instanceof u||t instanceof a?t:f.isNode&&f.isStream(t)?new p(e,t):o.prepareContent(e,t,s.binary,s.optimizedBinaryString,s.base64);var v=new c(e,y,s);this.files[e]=v}var i=e("./utf8"),o=e("./utils"),a=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach(function(n,r){e(n,r)&&t.push(r)}),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(y(e)){var i=e;return this.filter(function(e,t){return!t.dir&&i.test(e)})}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(y(e))return this.filter(function(t,n){return n.dir&&e.test(t)});var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter(function(t,n){return n.name.slice(0,e.length)===e}),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=d.generateWorker(this,n,r)}catch(l){(t=new a("error")).error(l)}return new s(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===t&&this.data[o+1]===n&&this.data[o+2]===r&&this.data[o+3]===i)return o-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),o=this.readData(4);return t===o[0]&&n===o[1]&&r===o[2]&&i===o[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){var r=e("../utils"),i=e("../support"),o=e("./ArrayReader"),a=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new s(e):i.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new a(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){var r=e("./GenericWorker"),i=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){var r=e("./GenericWorker"),i=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,i),o.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){var r=e("../utils"),i=e("./GenericWorker");function o(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()},function(e){t.error(e)})}r.inherits(o,i),o.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(e){t.processChunk(e)}),e.on("end",function(){t.end()}),e.on("error",function(e){t.error(e)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){var r=e("../utils"),i=e("./ConvertWorker"),o=e("./GenericWorker"),a=e("../base64"),s=e("../support"),l=e("../external"),u=null;if(s.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(f){}function c(e,t){return new l.Promise(function(n,i){var o=[],s=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",function(e,n){o.push(e),t&&t(n)}).on("error",function(e){o=[],i(e)}).on("end",function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return a.encode(t);default:return r.transformTo(e,t)}}(l,function(e,t){var n,r=0,i=null,o=0;for(n=0;n<t.length;n++)o+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(o),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),u);n(e)}catch(t){i(t)}o=[]}).resume()})}function d(e,t,n){var a=t;switch(t){case"blob":case"arraybuffer":a="uint8array";break;case"base64":a="string"}try{this._internalType=a,this._outputType=t,this._mimeType=n,r.checkSupport(a),this._worker=e.pipe(new i(a)),e.lock()}catch(s){this._worker=new o("error"),this._worker.error(s)}}d.prototype={accumulate:function(e){return c(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,function(e){t.call(n,e.data,e.meta)}):this._worker.on(e,function(){r.delay(t,arguments,n)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(o){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(a){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(o){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){for(var r=e("./utils"),i=e("./support"),o=e("./nodejsUtils"),a=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){a.call(this,"utf-8 decode"),this.leftOver=null}function c(){a.call(this,"utf-8 encode")}s[254]=s[254]=1,n.utf8encode=function(e){return i.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var t,n,r,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,o,a=e.length,l=new Array(2*a);for(t=n=0;t<a;)if((i=e[t++])<128)l[n++]=i;else if(4<(o=s[i]))l[n++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&t<a;)i=i<<6|63&e[t++],o--;1<o?l[n++]=65533:i<65536?l[n++]=i:(i-=65536,l[n++]=55296|i>>10&1023,l[n++]=56320|1023&i)}return l.length!==n&&(l.subarray?l=l.subarray(0,n):l.length=n),r.applyFromCharCode(l)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(u,a),u.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var o=t;(t=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),t.set(o,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var a=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}(t),l=t;a!==t.length&&(i.uint8array?(l=t.subarray(0,a),this.leftOver=t.subarray(a,t.length)):(l=t.slice(0,a),this.leftOver=t.slice(a,t.length))),this.push({data:n.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=u,r.inherits(c,a),c.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){var r=e("./support"),i=e("./base64"),o=e("./nodejsUtils"),a=e("./external");function s(e){return e}function l(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(i){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(o){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,t,n){var r=[],i=0,o=e.length;if(o<=n)return String.fromCharCode.apply(null,e);for(;i<o;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,o)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,o)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=u.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return u.stringifyByChunk(e,r,t)}catch(o){t=Math.floor(t/2)}return u.stringifyByChar(e)}function d(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=c;var f={};f.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},f.array={string:c,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},f.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},f.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return f[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate(function(){e.apply(n||null,t||[])})},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,o,s,u){return a.Promise.resolve(t).then(function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new a.Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)}):e}).then(function(t){var c,d=n.getTypeOf(t);return d?("arraybuffer"===d?t=n.transformTo("uint8array",t):"string"===d&&(u?t=i.decode(t):o&&!0!==s&&(t=l(c=t,r.uint8array?new Uint8Array(c.length):new Array(c.length)))),t):a.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./signature"),a=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=s.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new a({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){var r=e("./reader/readerFor"),i=e("./utils"),o=e("./compressedObject"),a=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,t){this.options=e,this.loadOptions=t}c.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||a(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readData(e.length-5))}return null}},t.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),a=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(t=t.pipe(new a.Utf8EncodeWorker)),!o&&r&&(t=t.pipe(new a.Utf8DecodeWorker))}catch(s){(t=new l("error")).error(s)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new a.Utf8EncodeWorker)),s.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=c;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(e){var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var o=0,a=new i(c),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),n=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){c(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,n=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}t.exports=function(e){1!==u.push(e)||r||n()}}).call(this,void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){var r=e("immediate");function i(){}var o={},a=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function c(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r(function(){var r;try{r=t(n)}catch(i){return o.reject(e,i)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)})}function f(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,o.reject(e,t))}function i(t){n||(n=!0,o.resolve(e,t))}var a=h(function(){t(i,r)});"error"===a.status&&r(a.value)}function h(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}(t.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})})},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!=typeof e&&this.state===s||"function"!=typeof t&&this.state===a)return this;var n=new this.constructor(i);return this.state!==l?d(n,this.state===s?e:t,this.outcome):this.queue.push(new c(n,e,t)),n},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,t){var n=h(f,t);if("error"===n.status)return o.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=s,e.outcome=t;for(var i=-1,a=e.queue.length;++i<a;)e.queue[i].callFulfilled(t)}return e},o.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(i),e)},u.reject=function(e){var t=new this(i);return o.reject(t,e)},u.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,l=-1,u=new this(i);++l<n;)c(e[l],l);return u;function c(e,i){t.resolve(e).then(function(e){a[i]=e,++s!==n||r||(r=!0,o.resolve(u,a))},function(e){r||(r=!0,o.reject(u,e))})}},u.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a,s=-1,l=new this(i);++s<n;)a=e[s],t.resolve(a).then(function(e){r||(r=!0,o.resolve(l,e))},function(e){r||(r=!0,o.reject(l,e))});return l}},{immediate:36}],38:[function(e,t,n){var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){var r=e("./zlib/deflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,u=0,c=-1,d=0,f=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==u)throw new Error(a[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var h;if(h="string"==typeof t.dictionary?o.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,h))!==u)throw new Error(a[n]);this._dict_set=!0}}function h(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}p.prototype.push=function(e,t){var n,a,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=t===~~t?t:!0===t?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new i.Buf8(c),s.next_out=0,s.avail_out=c),1!==(n=r.deflate(s,a))&&n!==u)return this.onEnd(n),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(o.buf2binstring(i.shrinkBuf(s.output,s.next_out))):this.onData(i.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),!(s.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=h,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,h(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,h(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){var r=e("./zlib/inflate"),i=e("./utils/common"),o=e("./utils/strings"),a=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==a.Z_OK)throw new Error(s[n]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function f(e,t){var n=new d(t);if(n.push(e,!0),n.err)throw n.msg||s[n.err];return n.result}d.prototype.push=function(e,t){var n,s,l,u,d,f,p=this.strm,h=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=t===~~t?t:!0===t?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof e?p.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(h),p.next_out=0,p.avail_out=h),(n=r.inflate(p,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(f="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,f)),n===a.Z_BUF_ERROR&&!0===g&&(n=a.Z_OK,g=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==a.Z_STREAM_END&&(0!==p.avail_in||s!==a.Z_FINISH&&s!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(p.output,p.next_out),u=p.next_out-l,d=o.buf2string(p.output,l),p.next_out=u,p.avail_out=h-u,u&&i.arraySet(p.output,p.output,l,u,0),this.onData(d)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(s=a.Z_FINISH),s===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):s!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=d,n.inflate=f,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){var t,n,r,i,o,a;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(a=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,n,r,i){for(var o=0;o<r;o++)e[i+o]=t[n+o]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(r)},{}],42:[function(e,t,n){var r=e("./common"),i=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(u){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(u){o=!1}for(var a=new r.Buf8(256),s=0;s<256;s++)a[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n}a[254]=a[254]=1,n.string2buf=function(e){var t,n,i,o,a,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(l),o=a=0;a<l;o++)55296==(64512&(n=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(i=e.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?t[a++]=n:(n<2048?t[a++]=192|n>>>6:(n<65536?t[a++]=224|n>>>12:(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63),t[a++]=128|n>>>6&63),t[a++]=128|63&n);return t},n.buf2binstring=function(e){return l(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,o,s=t||e.length,u=new Array(2*s);for(n=r=0;n<s;)if((i=e[n++])<128)u[r++]=i;else if(4<(o=a[i]))u[r++]=65533,n+=o-1;else{for(i&=2===o?31:3===o?15:7;1<o&&n<s;)i=i<<6|63&e[n++],o--;1<o?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return l(u,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){t.exports=function(e,t,n,r){for(var i=65535&e,o=e>>>16&65535,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+t[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16}},{}],44:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var o=r,a=i+n;e^=-1;for(var s=i;s<a;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],46:[function(e,t,n){var r,i=e("../utils/common"),o=e("./trees"),a=e("./adler32"),s=e("./crc32"),l=e("./messages"),u=0,c=4,d=0,f=-2,p=-1,h=4,m=2,g=8,y=9,v=286,b=30,w=19,_=2*v+1,x=15,E=3,S=258,k=S+E+1,T=42,C=113,A=1,I=2,O=3,N=4;function D(e,t){return e.msg=l[t],t}function R(e){return(e<<1)-(4<e?9:0)}function M(e){for(var t=e.length;0<=--t;)e[t]=0}function P(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function F(e,t){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,P(e.strm)}function L(e,t){e.pending_buf[e.pending++]=t}function j(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function B(e,t){var n,r,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-k?e.strstart-(e.w_size-k):0,u=e.window,c=e.w_mask,d=e.prev,f=e.strstart+S,p=u[o+a-1],h=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(n=t)+a]===h&&u[n+a-1]===p&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<f);if(r=S-(f-o),o=f-S,a<r){if(e.match_start=t,s<=(a=r))break;p=u[o+a-1],h=u[o+a]}}}while((t=d[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function $(e){var t,n,r,o,l,u,c,d,f,p,h=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-k)){for(i.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,t=n=e.hash_size;r=e.head[--t],e.head[t]=h<=r?r-h:0,--n;);for(t=n=h;r=e.prev[--t],e.prev[t]=h<=r?r-h:0,--n;);o+=h}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,p=void 0,(f=o)<(p=u.avail_in)&&(p=f),n=0===p?0:(u.avail_in-=p,i.arraySet(c,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=a(u.adler,c,p,d):2===u.state.wrap&&(u.adler=s(u.adler,c,p,d)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=E)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+E-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<E)););}while(e.lookahead<k&&0!==e.strm.avail_in)}function z(e,t){for(var n,r;;){if(e.lookahead<k){if($(e),e.lookahead<k&&t===u)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-k&&(e.match_length=B(e,n)),e.match_length>=E)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-E),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=E){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(F(e,!1),0===e.strm.avail_out))return A}return e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(F(e,!0),0===e.strm.avail_out?O:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?A:I}function U(e,t){for(var n,r,i;;){if(e.lookahead<k){if($(e),e.lookahead<k&&t===u)return A;if(0===e.lookahead)break}if(n=0,e.lookahead>=E&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=E-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-k&&(e.match_length=B(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===E&&4096<e.strstart-e.match_start)&&(e.match_length=E-1)),e.prev_length>=E&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-E,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-E),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+E-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=E-1,e.strstart++,r&&(F(e,!1),0===e.strm.avail_out))return A}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&F(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return A}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<E-1?e.strstart:E-1,t===c?(F(e,!0),0===e.strm.avail_out?O:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?A:I}function q(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*_),this.dyn_dtree=new i.Buf16(2*(2*b+1)),this.bl_tree=new i.Buf16(2*(2*w+1)),M(this.dyn_ltree),M(this.dyn_dtree),M(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(x+1),this.heap=new i.Buf16(2*v+1),M(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*v+1),M(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?T:C,e.adler=2===t.wrap?0:1,t.last_flush=u,o._tr_init(t),d):D(e,f)}function W(e){var t,n=V(e);return n===d&&((t=e.state).window_size=2*t.w_size,M(t.head),t.max_lazy_match=r[t.level].max_lazy,t.good_match=r[t.level].good_length,t.nice_match=r[t.level].nice_length,t.max_chain_length=r[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=E-1,t.match_available=0,t.ins_h=0),n}function G(e,t,n,r,o,a){if(!e)return f;var s=1;if(t===p&&(t=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||y<o||n!==g||r<8||15<r||t<0||9<t||a<0||h<a)return D(e,f);8===r&&(r=9);var l=new H;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+E-1)/E),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,W(e)}r=[new q(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if($(e),0===e.lookahead&&t===u)return A;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,F(e,!1),0===e.strm.avail_out))return A;if(e.strstart-e.block_start>=e.w_size-k&&(F(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:N):(e.strstart>e.block_start&&(F(e,!1),e.strm.avail_out),A)}),new q(4,4,8,4,z),new q(4,5,16,8,z),new q(4,6,32,32,z),new q(4,4,16,16,U),new q(8,16,32,32,U),new q(8,16,128,128,U),new q(8,32,128,256,U),new q(32,128,258,1024,U),new q(32,258,258,4096,U)],n.deflateInit=function(e,t){return G(e,t,g,15,8,0)},n.deflateInit2=G,n.deflateReset=W,n.deflateResetKeep=V,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=t,d):f},n.deflate=function(e,t){var n,i,a,l;if(!e||!e.state||5<t||t<0)return e?D(e,f):f;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==c)return D(e,0===e.avail_out?-5:f);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===T)if(2===i.wrap)e.adler=0,L(i,31),L(i,139),L(i,8),i.gzhead?(L(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),L(i,255&i.gzhead.time),L(i,i.gzhead.time>>8&255),L(i,i.gzhead.time>>16&255),L(i,i.gzhead.time>>24&255),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(L(i,255&i.gzhead.extra.length),L(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=s(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(L(i,0),L(i,0),L(i,0),L(i,0),L(i,0),L(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),L(i,3),i.status=C);else{var p=g+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=C,j(i,p),0!==i.strstart&&(j(i,e.adler>>>16),j(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),P(e),a=i.pending,i.pending!==i.pending_buf_size));)L(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),P(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),P(e),a=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,L(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>a&&(e.adler=s(e.adler,i.pending_buf,i.pending-a,a)),0===l&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&P(e),i.pending+2<=i.pending_buf_size&&(L(i,255&e.adler),L(i,e.adler>>8&255),e.adler=0,i.status=C)):i.status=C),0!==i.pending){if(P(e),0===e.avail_out)return i.last_flush=-1,d}else if(0===e.avail_in&&R(t)<=R(n)&&t!==c)return D(e,-5);if(666===i.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==u&&666!==i.status){var h=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&($(e),0===e.lookahead)){if(t===u)return A;break}if(e.match_length=0,n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(F(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?A:I}(i,t):3===i.strategy?function(e,t){for(var n,r,i,a,s=e.window;;){if(e.lookahead<=S){if($(e),e.lookahead<=S&&t===u)return A;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=E&&0<e.strstart&&(r=s[i=e.strstart-1])===s[++i]&&r===s[++i]&&r===s[++i]){a=e.strstart+S;do{}while(r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&r===s[++i]&&i<a);e.match_length=S-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=E?(n=o._tr_tally(e,1,e.match_length-E),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(F(e,!1),0===e.strm.avail_out))return A}return e.insert=0,t===c?(F(e,!0),0===e.strm.avail_out?O:N):e.last_lit&&(F(e,!1),0===e.strm.avail_out)?A:I}(i,t):r[i.level].func(i,t);if(h!==O&&h!==N||(i.status=666),h===A||h===O)return 0===e.avail_out&&(i.last_flush=-1),d;if(h===I&&(1===t?o._tr_align(i):5!==t&&(o._tr_stored_block(i,0,0,!1),3===t&&(M(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),P(e),0===e.avail_out))return i.last_flush=-1,d}return t!==c?d:i.wrap<=0?1:(2===i.wrap?(L(i,255&e.adler),L(i,e.adler>>8&255),L(i,e.adler>>16&255),L(i,e.adler>>24&255),L(i,255&e.total_in),L(i,e.total_in>>8&255),L(i,e.total_in>>16&255),L(i,e.total_in>>24&255)):(j(i,e.adler>>>16),j(i,65535&e.adler)),P(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?d:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==T&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?D(e,f):(e.state=null,t===C?D(e,-3):d):f},n.deflateSetDictionary=function(e,t){var n,r,o,s,l,u,c,p,h=t.length;if(!e||!e.state)return f;if(2===(s=(n=e.state).wrap)||1===s&&n.status!==T||n.lookahead)return f;for(1===s&&(e.adler=a(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===s&&(M(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,h-n.w_size,n.w_size,0),t=p,h=n.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,$(n);n.lookahead>=E;){for(r=n.strstart,o=n.lookahead-(E-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+E-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--o;);n.strstart=r,n.lookahead=E-1,$(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=E-1,n.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,n.wrap=s,d},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){t.exports=function(e,t){var n,r,i,o,a,s,l,u,c,d,f,p,h,m,g,y,v,b,w,_,x,E,S,k,T;n=e.state,r=e.next_in,k=e.input,i=r+(e.avail_in-5),o=e.next_out,T=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=n.dmax,u=n.wsize,c=n.whave,d=n.wnext,f=n.window,p=n.hold,h=n.bits,m=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;e:do{h<15&&(p+=k[r++]<<h,h+=8,p+=k[r++]<<h,h+=8),b=m[p&y];t:for(;;){if(p>>>=w=b>>>24,h-=w,0==(w=b>>>16&255))T[o++]=65535&b;else{if(!(16&w)){if(!(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}_=65535&b,(w&=15)&&(h<w&&(p+=k[r++]<<h,h+=8),_+=p&(1<<w)-1,p>>>=w,h-=w),h<15&&(p+=k[r++]<<h,h+=8,p+=k[r++]<<h,h+=8),b=g[p&v];n:for(;;){if(p>>>=w=b>>>24,h-=w,!(16&(w=b>>>16&255))){if(!(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&b,h<(w&=15)&&(p+=k[r++]<<h,(h+=8)<w&&(p+=k[r++]<<h,h+=8)),l<(x+=p&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=w,h-=w,(w=o-a)<x){if(c<(w=x-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(S=f,(E=0)===d){if(E+=u-w,w<_){for(_-=w;T[o++]=f[E++],--w;);E=o-x,S=T}}else if(d<w){if(E+=u+d-w,(w-=d)<_){for(_-=w;T[o++]=f[E++],--w;);if(E=0,d<_){for(_-=w=d;T[o++]=f[E++],--w;);E=o-x,S=T}}}else if(E+=d-w,w<_){for(_-=w;T[o++]=f[E++],--w;);E=o-x,S=T}for(;2<_;)T[o++]=S[E++],T[o++]=S[E++],T[o++]=S[E++],_-=3;_&&(T[o++]=S[E++],1<_&&(T[o++]=S[E++]))}else{for(E=o-x;T[o++]=T[E++],T[o++]=T[E++],T[o++]=T[E++],2<(_-=3););_&&(T[o++]=T[E++],1<_&&(T[o++]=T[E++]))}break}}break}}while(r<i&&o<s);r-=_=h>>3,p&=(1<<(h-=_<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=o<s?s-o+257:257-(o-s),n.hold=p,n.bits=h}},{}],49:[function(e,t,n){var r=e("../utils/common"),i=e("./adler32"),o=e("./crc32"),a=e("./inffast"),s=e("./inftrees"),l=1,u=2,c=0,d=-2,f=1,p=852,h=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=f,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(h),t.sane=1,t.back=-1,c):d}function v(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,y(e)):d}function b(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?d:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,v(e))):d}function w(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=b(e,t))!==c&&(e.state=null),n):d}var _,x,E=!0;function S(e){if(E){var t;for(_=new r.Buf32(512),x=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(s(l,e.lens,0,288,_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;s(u,e.lens,0,32,x,0,e.work,{bits:5}),E=!1}e.lencode=_,e.lenbits=9,e.distcode=x,e.distbits=5}function k(e,t,n,i){var o,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i<(o=a.wsize-a.wnext)&&(o=i),r.arraySet(a.window,t,n-i,o,a.wnext),(i-=o)?(r.arraySet(a.window,t,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=o,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=o))),0}n.inflateReset=v,n.inflateReset2=b,n.inflateResetKeep=y,n.inflateInit=function(e){return w(e,15)},n.inflateInit2=w,n.inflate=function(e,t){var n,p,h,g,y,v,b,w,_,x,E,T,C,A,I,O,N,D,R,M,P,F,L,j,B=0,$=new r.Buf8(4),z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(n=e.state).mode&&(n.mode=13),y=e.next_out,h=e.output,b=e.avail_out,g=e.next_in,p=e.input,v=e.avail_in,w=n.hold,_=n.bits,x=v,E=b,F=c;e:for(;;)switch(n.mode){case f:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(2&n.wrap&&35615===w){$[n.check=0]=255&w,$[1]=w>>>8&255,n.check=o(n.check,$,2,0),_=w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",n.mode=30;break}if(_-=4,P=8+(15&(w>>>=4)),0===n.wbits)n.wbits=P;else if(P>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<P,e.adler=n.check=1,n.mode=512&w?10:12,_=w=0;break;case 2:for(;_<16;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(n.flags=w,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&($[0]=255&w,$[1]=w>>>8&255,n.check=o(n.check,$,2,0)),_=w=0,n.mode=3;case 3:for(;_<32;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.head&&(n.head.time=w),512&n.flags&&($[0]=255&w,$[1]=w>>>8&255,$[2]=w>>>16&255,$[3]=w>>>24&255,n.check=o(n.check,$,4,0)),_=w=0,n.mode=4;case 4:for(;_<16;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&($[0]=255&w,$[1]=w>>>8&255,n.check=o(n.check,$,2,0)),_=w=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&($[0]=255&w,$[1]=w>>>8&255,n.check=o(n.check,$,2,0)),_=w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(v<(T=n.length)&&(T=v),T&&(n.head&&(P=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,T,P)),512&n.flags&&(n.check=o(n.check,p,T,g)),v-=T,g+=T,n.length-=T),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===v)break e;for(T=0;P=p[g+T++],n.head&&P&&n.length<65536&&(n.head.name+=String.fromCharCode(P)),P&&T<v;);if(512&n.flags&&(n.check=o(n.check,p,T,g)),v-=T,g+=T,P)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===v)break e;for(T=0;P=p[g+T++],n.head&&P&&n.length<65536&&(n.head.comment+=String.fromCharCode(P)),P&&T<v;);if(512&n.flags&&(n.check=o(n.check,p,T,g)),v-=T,g+=T,P)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(w!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}_=w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}e.adler=n.check=m(w),_=w=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,n.hold=w,n.bits=_,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){w>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}switch(n.last=1&w,_-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(S(n),n.mode=20,6!==t)break;w>>>=2,_-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}w>>>=2,_-=2;break;case 14:for(w>>>=7&_,_-=7&_;_<32;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,_=w=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(T=n.length){if(v<T&&(T=v),b<T&&(T=b),0===T)break e;r.arraySet(h,p,g,T,y),v-=T,g+=T,b-=T,y+=T,n.length-=T;break}n.mode=12;break;case 17:for(;_<14;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(n.nlen=257+(31&w),w>>>=5,_-=5,n.ndist=1+(31&w),w>>>=5,_-=5,n.ncode=4+(15&w),w>>>=4,_-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.lens[z[n.have++]]=7&w,w>>>=3,_-=3}for(;n.have<19;)n.lens[z[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,L={bits:n.lenbits},F=s(0,n.lens,0,19,n.lencode,0,n.work,L),n.lenbits=L.bits,F){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;O=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,N=65535&B,!((I=B>>>24)<=_);){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(N<16)w>>>=I,_-=I,n.lens[n.have++]=N;else{if(16===N){for(j=I+2;_<j;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(w>>>=I,_-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}P=n.lens[n.have-1],T=3+(3&w),w>>>=2,_-=2}else if(17===N){for(j=I+3;_<j;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}_-=I,P=0,T=3+(7&(w>>>=I)),w>>>=3,_-=3}else{for(j=I+7;_<j;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}_-=I,P=0,T=11+(127&(w>>>=I)),w>>>=7,_-=7}if(n.have+T>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;T--;)n.lens[n.have++]=P}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,L={bits:n.lenbits},F=s(l,n.lens,0,n.nlen,n.lencode,0,n.work,L),n.lenbits=L.bits,F){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,L={bits:n.distbits},F=s(u,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,L),n.distbits=L.bits,F){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=v&&258<=b){e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,n.hold=w,n.bits=_,a(e,E),y=e.next_out,h=e.output,b=e.avail_out,g=e.next_in,p=e.input,v=e.avail_in,w=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;O=(B=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,N=65535&B,!((I=B>>>24)<=_);){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(O&&!(240&O)){for(D=I,R=O,M=N;O=(B=n.lencode[M+((w&(1<<D+R)-1)>>D)])>>>16&255,N=65535&B,!(D+(I=B>>>24)<=_);){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}w>>>=D,_-=D,n.back+=D}if(w>>>=I,_-=I,n.back+=I,n.length=N,0===O){n.mode=26;break}if(32&O){n.back=-1,n.mode=12;break}if(64&O){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&O,n.mode=22;case 22:if(n.extra){for(j=n.extra;_<j;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;O=(B=n.distcode[w&(1<<n.distbits)-1])>>>16&255,N=65535&B,!((I=B>>>24)<=_);){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(!(240&O)){for(D=I,R=O,M=N;O=(B=n.distcode[M+((w&(1<<D+R)-1)>>D)])>>>16&255,N=65535&B,!(D+(I=B>>>24)<=_);){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}w>>>=D,_-=D,n.back+=D}if(w>>>=I,_-=I,n.back+=I,64&O){e.msg="invalid distance code",n.mode=30;break}n.offset=N,n.extra=15&O,n.mode=24;case 24:if(n.extra){for(j=n.extra;_<j;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break e;if(T=E-b,n.offset>T){if((T=n.offset-T)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}C=T>n.wnext?(T-=n.wnext,n.wsize-T):n.wnext-T,T>n.length&&(T=n.length),A=n.window}else A=h,C=y-n.offset,T=n.length;for(b<T&&(T=b),b-=T,n.length-=T;h[y++]=A[C++],--T;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break e;h[y++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===v)break e;v--,w|=p[g++]<<_,_+=8}if(E-=b,e.total_out+=E,n.total+=E,E&&(e.adler=n.check=n.flags?o(n.check,h,E,y-E):i(n.check,h,E,y-E)),E=b,(n.flags?w:m(w))!==n.check){e.msg="incorrect data check",n.mode=30;break}_=w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===v)break e;v--,w+=p[g++]<<_,_+=8}if(w!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}_=w=0}n.mode=29;case 29:F=1;break e;case 30:F=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,n.hold=w,n.bits=_,(n.wsize||E!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&k(e,e.output,e.next_out,E-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,E-=e.avail_out,e.total_in+=x,e.total_out+=E,n.total+=E,n.wrap&&E&&(e.adler=n.check=n.flags?o(n.check,h,E,e.next_out-E):i(n.check,h,E,e.next_out-E)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===E||4===t)&&F===c&&(F=-5),F)},n.inflateEnd=function(e){if(!e||!e.state)return d;var t=e.state;return t.window&&(t.window=null),e.state=null,c},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,c):d},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?d:11===n.mode&&i(1,t,r,0)!==n.check?-3:k(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,c):d},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,l,u,c,d,f){var p,h,m,g,y,v,b,w,_,x=f.bits,E=0,S=0,k=0,T=0,C=0,A=0,I=0,O=0,N=0,D=0,R=null,M=0,P=new r.Buf16(16),F=new r.Buf16(16),L=null,j=0;for(E=0;E<=15;E++)P[E]=0;for(S=0;S<l;S++)P[t[n+S]]++;for(C=x,T=15;1<=T&&0===P[T];T--);if(T<C&&(C=T),0===T)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(k=1;k<T&&0===P[k];k++);for(C<k&&(C=k),E=O=1;E<=15;E++)if(O<<=1,(O-=P[E])<0)return-1;if(0<O&&(0===e||1!==T))return-1;for(F[1]=0,E=1;E<15;E++)F[E+1]=F[E]+P[E];for(S=0;S<l;S++)0!==t[n+S]&&(d[F[t[n+S]]++]=S);if(v=0===e?(R=L=d,19):1===e?(R=i,M-=257,L=o,j-=257,256):(R=a,L=s,-1),E=k,y=c,I=S=D=0,m=-1,g=(N=1<<(A=C))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(b=E-I,_=d[S]<v?(w=0,d[S]):d[S]>v?(w=L[j+d[S]],R[M+d[S]]):(w=96,0),p=1<<E-I,k=h=1<<A;u[y+(D>>I)+(h-=p)]=b<<24|w<<16|_,0!==h;);for(p=1<<E-1;D&p;)p>>=1;if(0!==p?(D&=p-1,D+=p):D=0,S++,0==--P[E]){if(E===T)break;E=t[n+d[S]]}if(C<E&&(D&g)!==m){for(0===I&&(I=C),y+=k,O=1<<(A=E-I);A+I<T&&!((O-=P[A+I])<=0);)A++,O<<=1;if(N+=1<<A,1===e&&852<N||2===e&&592<N)return 1;u[m=D&g]=C<<24|A<<16|y-c}}return 0!==D&&(u[y+D]=E-I<<24|64<<16),f.bits=C,0}},{"../utils/common":41}],51:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){var r=e("../utils/common"),i=0,o=1;function a(e){for(var t=e.length;0<=--t;)e[t]=0}var s=0,l=29,u=256,c=u+1+l,d=30,f=19,p=2*c+1,h=15,m=16,g=7,y=256,v=16,b=17,w=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(c+2));a(k);var T=new Array(2*d);a(T);var C=new Array(512);a(C);var A=new Array(256);a(A);var I=new Array(l);a(I);var O,N,D,R=new Array(d);function M(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function F(e){return e<256?C[e]:C[256+(e>>>7)]}function L(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function j(e,t,n){e.bi_valid>m-n?(e.bi_buf|=t<<e.bi_valid&65535,L(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=n-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function B(e,t,n){j(e,n[2*t],n[2*t+1])}function $(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function z(e,t,n){var r,i,o=new Array(h+1),a=0;for(r=1;r<=h;r++)o[r]=a=a+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=$(o[s]++,s))}}function U(e){var t;for(t=0;t<c;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<f;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function q(e){8<e.bi_valid?L(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function H(e,t,n,r){var i=2*t,o=2*n;return e[i]<e[o]||e[i]===e[o]&&r[t]<=r[n]}function V(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&H(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!H(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function W(e,t,n){var r,i,o,a,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],i=e.pending_buf[e.l_buf+s],s++,0===r?B(e,i,t):(B(e,(o=A[i])+u+1,t),0!==(a=_[o])&&j(e,i-=I[o],a),B(e,o=F(--r),n),0!==(a=x[o])&&j(e,r-=R[o],a)),s<e.last_lit;);B(e,y,t)}function G(e,t){var n,r,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<l;n++)0!==o[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):o[2*n+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;1<=n;n--)V(e,o,n);for(i=l;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],V(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,o[2*i]=o[2*n]+o[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,o[2*n+1]=o[2*r+1]=i,e.heap[1]=i++,V(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,d=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,y=0;for(o=0;o<=h;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)g<(o=l[2*l[2*(r=e.heap[n])+1]+1]+1)&&(o=g,y++),l[2*r+1]=o,u<r||(e.bl_count[o]++,a=0,m<=r&&(a=f[r-m]),s=l[2*r],e.opt_len+=s*(o+a),d&&(e.static_len+=s*(c[2*r+1]+a)));if(0!==y){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,y-=2}while(0<y);for(o=g;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(i=e.heap[--n])||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(e,t),z(o,u,e.bl_count)}function Y(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=t[2*(r+1)+1],++s<l&&i===a||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*v]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function K(e,t,n){var r,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=t[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;B(e,i,e.bl_tree),0!=--s;);else 0!==i?(i!==o&&(B(e,i,e.bl_tree),s--),B(e,v,e.bl_tree),j(e,s-3,2)):s<=10?(B(e,b,e.bl_tree),j(e,s-3,3)):(B(e,w,e.bl_tree),j(e,s-11,7));o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}a(R);var Z=!1;function Q(e,t,n,i){var o,a,l;j(e,(s<<1)+(i?1:0),3),a=t,l=n,q(o=e),L(o,l),L(o,~l),r.arraySet(o.pending_buf,o.window,a,l,o.pending),o.pending+=l}n._tr_init=function(e){Z||(function(){var e,t,n,r,i,o=new Array(h+1);for(r=n=0;r<l-1;r++)for(I[r]=n,e=0;e<1<<_[r];e++)A[n++]=r;for(A[n-1]=r,r=i=0;r<16;r++)for(R[r]=i,e=0;e<1<<x[r];e++)C[i++]=r;for(i>>=7;r<d;r++)for(R[r]=i<<7,e=0;e<1<<x[r]-7;e++)C[256+i++]=r;for(t=0;t<=h;t++)o[t]=0;for(e=0;e<=143;)k[2*e+1]=8,e++,o[8]++;for(;e<=255;)k[2*e+1]=9,e++,o[9]++;for(;e<=279;)k[2*e+1]=7,e++,o[7]++;for(;e<=287;)k[2*e+1]=8,e++,o[8]++;for(z(k,c+1,o),e=0;e<d;e++)T[2*e+1]=5,T[2*e]=$(e,5);O=new M(k,_,u+1,c,h),N=new M(T,x,0,d,h),D=new M(new Array(0),E,0,f,g)}(),Z=!0),e.l_desc=new P(e.dyn_ltree,O),e.d_desc=new P(e.dyn_dtree,N),e.bl_desc=new P(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,U(e)},n._tr_stored_block=Q,n._tr_flush_block=function(e,t,n,r){var a,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(t=32;t<u;t++)if(0!==e.dyn_ltree[2*t])return o;return i}(e)),G(e,e.l_desc),G(e,e.d_desc),l=function(e){var t;for(Y(e,e.dyn_ltree,e.l_desc.max_code),Y(e,e.dyn_dtree,e.d_desc.max_code),G(e,e.bl_desc),t=f-1;3<=t&&0===e.bl_tree[2*S[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),a=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=a&&(a=s)):a=s=n+5,n+4<=a&&-1!==t?Q(e,t,n,r):4===e.strategy||s===a?(j(e,2+(r?1:0),3),W(e,k,T)):(j(e,4+(r?1:0),3),function(e,t,n,r){var i;for(j(e,t-257,5),j(e,n-1,5),j(e,r-4,4),i=0;i<r;i++)j(e,e.bl_tree[2*S[i]+1],3);K(e,e.dyn_ltree,t-1),K(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),W(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&q(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(A[n]+u+1)]++,e.dyn_dtree[2*F(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){var t;j(e,2,3),B(e,y,k),16===(t=e).bi_valid?(L(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}},{"../utils/common":41}],53:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(e){!function(e,t){if(!e.setImmediate){var n,r,i,o,a=1,s={},l=!1,u=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick(function(){f(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(o+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){i.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var t=u.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(f,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return s[a]=i,n(a),a++},c.clearImmediate=d}function d(e){delete s[e]}function f(e){if(l)setTimeout(f,0,e);else{var n=s[e];if(n){l=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{d(e),l=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&f(+t.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)),xSt.exports);const SSt=f(ESt),kSt=e=>{switch(e){case"csv":return"CSV (Comma-separated)";case"pipe":return"Pipe-delimited (TXT)";case"parquet":return"Parquet (Binary)"}},TSt=({isOpen:e,onClose:t,db:n,onExportComplete:r,onExportError:i})=>{const[o,a]=k.useState([]),[s,l]=k.useState(""),[u,c]=k.useState("csv"),[d,f]=k.useState(!1),[p,h]=k.useState(!1);k.useEffect(()=>{e&&n?m():e||(l(""),c("csv"))},[e,n]);const m=async()=>{try{h(!0);const e=await(async e=>{try{return(await e.connector.execute("\n      SELECT\n        table_name as name,\n        COALESCE((\n          SELECT COUNT(*)\n          FROM information_schema.tables t2\n          WHERE t2.table_name = t1.table_name\n          AND t2.table_schema = 'main'\n        ), 0) as estimated_rows\n      FROM information_schema.tables t1\n      WHERE table_schema = 'main'\n      AND table_type = 'BASE TABLE'\n      ORDER BY table_name\n    ")).toArray().map(e=>({name:e.name,rowCount:e.estimated_rows||0}))}catch(t){throw new Error(`Failed to get table list: ${t instanceof Error?t.message:"Unknown error"}`)}})(n);a(e),e.length>0&&l(e[0].name)}catch(e){i(`Failed to load tables: ${e instanceof Error?e.message:"Unknown error"}`),t()}finally{h(!1)}},g=()=>{d||t()},y=s&&u&&!d&&!p;return w.jsx(ba,{open:e,onOpenChange:g,children:w.jsxs(xa,{className:"sm:max-w-[400px]",children:[w.jsxs(Ea,{children:[w.jsxs(ka,{className:"flex items-center gap-2",children:[w.jsx(Bt,{className:"h-5 w-5"}),"Export Table"]}),w.jsx(Ta,{children:"Export a single table in your preferred format."})]}),w.jsxs("div",{className:"space-y-4 py-4",children:[w.jsxs("div",{className:"space-y-2",children:[w.jsx(Hp,{htmlFor:"table-select",children:"Table"}),p?w.jsx("div",{className:"text-sm text-gray-500",children:"Loading tables..."}):0===o.length?w.jsx("div",{className:"text-sm text-red-500",children:"No tables available"}):w.jsxs(Ev,{value:s,onValueChange:l,disabled:d||p,children:[w.jsx(Tv,{id:"table-select",children:w.jsx(kv,{placeholder:"Select a table..."})}),w.jsx(Iv,{children:o.map(e=>w.jsxs(Nv,{value:e.name,children:[e.name," (",e.rowCount.toLocaleString()," rows)"]},e.name))})]})]}),w.jsxs("div",{className:"space-y-3",children:[w.jsx(Hp,{children:"Format"}),w.jsx("div",{className:"space-y-2",children:["csv","pipe","parquet"].map(e=>w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsx("input",{type:"radio",id:`format-${e}`,name:"format",value:e,checked:u===e,onChange:e=>c(e.target.value),disabled:d||p,className:"h-4 w-4"}),w.jsx(Hp,{htmlFor:`format-${e}`,className:"text-sm font-normal cursor-pointer",children:kSt(e)})]},e))})]})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:g,disabled:d,children:"Cancel"}),w.jsx(er,{onClick:async()=>{if(s&&u)try{f(!0),await(async(e,t,n)=>{try{const i=e.connector.getDb(),o=(new Date).toISOString().replace(/[:.]/g,"-").slice(0,19);let a,s;switch(n){case"csv":a=`${t}_${o}.csv`,s=`COPY ${t} TO '${a}' (FORMAT CSV, HEADER)`;break;case"pipe":a=`${t}_${o}.txt`,s=`COPY ${t} TO '${a}' (FORMAT CSV, DELIMITER '|', HEADER)`;break;case"parquet":a=`${t}_${o}.parquet`,s=`COPY ${t} TO '${a}' (FORMAT PARQUET)`;break;default:throw new Error(`Unsupported export format: ${n}`)}await e.connector.execute(s);const l=await i.copyFileToBuffer(a);if(!l||0===l.length)throw new Error(`Export generated empty file for table: ${t}`);const u=new Blob([l],{type:"parquet"===n?"application/octet-stream":"text/plain"}),c=URL.createObjectURL(u),d=document.createElement("a");d.href=c,d.download=a,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(c);try{await i.dropFile(a)}catch(r){}}catch(i){throw bSt(i),i}})(n,s,u),r(s,u),t()}catch(e){i(`Export failed: ${e instanceof Error?e.message:"Unknown error"}`)}finally{f(!1)}},disabled:!y,className:"min-w-[80px]",children:d?"Exporting...":"Export"})]})]})})},CSt=({db:e,className:t=""})=>{const[n,r]=k.useState(!1),{toast:i}=H_();return w.jsxs(w.Fragment,{children:[w.jsxs(er,{onClick:()=>{r(!0)},variant:"outline",size:"sm",className:`w-full justify-center gap-2 ${t}`,children:[w.jsx(rt,{className:"h-4 w-4"}),"Export Table"]}),w.jsx(TSt,{isOpen:n,onClose:()=>r(!1),db:e,onExportComplete:(e,t)=>{i({variant:"default",title:"Table export completed",description:`${e} exported successfully as ${t.toUpperCase()}`})},onExportError:e=>{i({variant:"destructive",title:"Table export failed",description:e})}})]})},ASt=({className:e,onFileSelect:t,isLoading:n=!1})=>{const r=k.useRef(null);return w.jsxs(w.Fragment,{children:[w.jsx(er,{onClick:()=>{var e;null==(e=r.current)||e.click()},className:`flex items-center gap-2 ${e||""}`,variant:"outline",disabled:n,children:n?w.jsxs(w.Fragment,{children:[w.jsx(Tt,{className:"w-4 h-4 animate-spin"}),w.jsx("span",{children:"Importing..."})]}):w.jsxs(w.Fragment,{children:[w.jsx(ht,{className:"w-4 h-4"}),w.jsx(qt,{className:"w-3 h-3"}),w.jsx("span",{children:"Import Database"})]})}),w.jsx("input",{ref:r,type:"file",accept:".db,.duckdb",style:{display:"none"},onChange:e=>{var n;const r=null==(n=e.target.files)?void 0:n[0];if(!r)return;[".db",".duckdb"].some(e=>r.name.toLowerCase().endsWith(e))&&(e.target.value="",t(r))}})]})},ISt=async(e,t,n,r)=>{let i=null;const o=await e.getConnector();try{i=await(async(e,t)=>{const n=await t.arrayBuffer(),r=new Uint8Array(n),i=`temp_import_${Date.now()}.db`,o=await e.getConnector().then(e=>e.getDb());return await o.registerFileBuffer(i,r),i})(e,t);const a=await(async(e,t)=>{try{await e.execute(`ATTACH '${t}' AS temp_import`);const n=(await e.query("\n      SELECT table_name\n      FROM information_schema.tables\n      WHERE table_catalog = 'temp_import'\n      AND table_schema = 'main'\n      AND table_type = 'BASE TABLE'\n      ORDER BY table_name\n    ")).toArray().map(e=>e.table_name),r=[];for(const t of n){const n=await e.query(`\n        SELECT column_name as name, data_type as type\n        FROM information_schema.columns\n        WHERE table_catalog = 'temp_import'\n        AND table_name = '${t}'\n        AND table_schema = 'main'\n        ORDER BY ordinal_position\n      `),i=await e.query(`\n        SELECT COUNT(*) as count FROM temp_import.${t}\n      `),o=n.toArray(),a=i.toArray()[0].count,s="bigint"==typeof a?Number(a):a;r.push({table_name:t,columns:o,row_count:s})}return r}catch(n){throw n}})(o,i);if(0===a.length)throw new Error("No tables found in the uploaded database");await(async(e,t,n)=>{try{await e.execute(`CREATE SCHEMA IF NOT EXISTS ${t}`);let r=0;for(const i of n){const n=performance.now();await e.execute(`\n        CREATE TABLE ${t}.${i.table_name} AS\n        SELECT * FROM temp_import.${i.table_name}\n      `),(performance.now()-n).toFixed(1),r+="bigint"==typeof i.row_count?Number(i.row_count):i.row_count}}catch(r){throw r}})(o,n,a);const s=a.reduce((e,t)=>e+("bigint"==typeof t.row_count?Number(t.row_count):t.row_count),0),l={schemaName:n,tablesImported:a.length,totalRows:s,success:!0};return r&&r({variant:"default",title:"Import completed",description:`Imported ${a.length} tables (${s} rows) into schema '${n}'`}),l}catch(a){const e=a instanceof Error?a.message:"Unknown error occurred";return bSt(a),r&&r({variant:"destructive",title:"Import failed",description:`Import failed: ${e}`}),{schemaName:n,tablesImported:0,totalRows:0,success:!1,error:e}}finally{i&&await(async(e,t,n)=>{try{await t.execute("DETACH temp_import");const r=await e.getConnector().then(e=>e.getDb());await r.dropFile(n)}catch(a){}})(e,o,i)}},OSt=({isOpen:e,onClose:t,file:n,onImport:r,db:i})=>{const[o,a]=k.useState(""),[s,l]=k.useState(!1),[u,c]=k.useState(!1),[d,f]=k.useState(!1),[p,h]=k.useState(!1);k.useEffect(()=>{if(e&&n){const e=n.name.replace(/\.(db|duckdb)$/i,"").replace(/[^a-zA-Z0-9_]/g,"_").toLowerCase().substring(0,30);a(e),l(!1),c(!1),f(!1),h(!1)}},[e,n]),k.useEffect(()=>{o&&i&&m()},[o,i]);const m=async()=>{if(o.trim()&&!d){h(!0);try{const e=await i.getConnector(),t=await(async(e,t)=>{try{return(await e.query(`\n      SELECT COUNT(*) as count\n      FROM information_schema.schemata\n      WHERE schema_name = '${t}'\n    `)).toArray()[0].count>0}catch(n){return!1}})(e,o);l(t)}catch(e){l(!1)}finally{h(!1)}}},g=o.trim().length>0&&(!s||u)&&!d&&!p;return n?w.jsx(ba,{open:e,onOpenChange:e=>!e&&t(),children:w.jsxs(xa,{className:"sm:max-w-[425px]",children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Import DuckDB Database"}),w.jsx(Ta,{children:"Import tables from a DuckDB file into a new schema."})]}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(ht,{className:"w-4 h-4 text-gray-500"}),w.jsx("span",{className:"font-medium",children:n.name}),w.jsxs("span",{className:"text-sm text-gray-500",children:["(",(n.size/1024/1024).toFixed(2)," MB)"]})]})}),w.jsxs("div",{className:"space-y-2",children:[w.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Schema Name"}),w.jsx(pf,{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Enter schema name",disabled:d,className:"w-full"})]}),s&&w.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3",children:w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx(Ut,{className:"w-4 h-4 text-orange-500 mt-0.5 flex-shrink-0"}),w.jsxs("div",{className:"text-sm",children:[w.jsxs("p",{className:"text-orange-800 font-medium",children:["Schema '",o,"' already exists"]}),w.jsxs("label",{className:"flex items-center gap-2 mt-2",children:[w.jsx("input",{type:"checkbox",checked:u,onChange:e=>c(e.target.checked),disabled:d,className:"rounded"}),w.jsx("span",{className:"text-orange-700",children:"Replace existing schema"})]})]})]})}),d&&w.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(Ct,{className:"w-4 h-4 text-blue-500 animate-spin"}),w.jsx("span",{className:"text-sm text-blue-700",children:"Importing database... This may take a moment."})]})})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:()=>{t()},disabled:d,children:"Cancel"}),w.jsx(er,{onClick:async()=>{if(n&&o.trim()&&(!s||u)){f(!0);try{if(s&&u){const e=await i.getConnector();await e.execute(`DROP SCHEMA IF EXISTS ${o} CASCADE`)}await r(o),t()}catch(e){}finally{f(!1)}}},disabled:!g,className:"min-w-[80px]",children:d?w.jsxs(w.Fragment,{children:[w.jsx(Ct,{className:"w-4 h-4 animate-spin mr-2"}),"Import"]}):"Import"})]})]})}):null};async function NSt(e,t){const n=await Promise.all(t.map(async t=>{var n;const r=(null==(n=t.table)?void 0:n.toString())||t.tableName,i=await async function(e,t){var n,r;performance.now();try{let a,s;try{s=`SELECT * FROM ${t} USING SAMPLE 10`;performance.now();const r=await e.query(s);performance.now(),a=[];for(let e=0;e<r.numRows;e++){const t={};for(let i=0;i<r.numCols;i++){const o=r.schema.fields[i].name;let a=null==(n=r.getChildAt(i))?void 0:n.get(e);"bigint"==typeof a&&(a=Number(a)),t[o]=a}a.push(t)}return performance.now(),a}catch(i){try{s=`SELECT * FROM ${t} LIMIT 10`;performance.now();const n=await e.query(s);performance.now(),a=[];for(let e=0;e<n.numRows;e++){const t={};for(let i=0;i<n.numCols;i++){const o=n.schema.fields[i].name;let a=null==(r=n.getChildAt(i))?void 0:r.get(e);"bigint"==typeof a&&(a=Number(a)),t[o]=a}a.push(t)}return performance.now(),a}catch(o){return void performance.now()}}}catch(a){return void performance.now()}}(e,r);return{...t,sampleRows:i}}));n.filter(e=>e.sampleRows&&e.sampleRows.length>0);return n}const DSt=()=>{const e=CTt(e=>e.db.connector),t=CTt(e=>e.db),n=CTt(e=>e.db.refreshTableSchemas),{toast:r}=H_(),[i,o]=k.useState(!1),[a,s]=k.useState(null),[l,u]=k.useState(!1),[c,d]=k.useState(!1),[f,p]=k.useState(!1),[h,m]=k.useState(!1),[g,y]=k.useState(!1),[v,b]=k.useState(!1);!function(){const e=CTt(e=>e.db),t=CTt(e=>e.db.tables);k.useEffect(()=>{(async()=>{if(t&&t.length>0&&t.filter(e=>!e.sampleRows||0===e.sampleRows.length).length>0)try{const n=await NSt(await e.getConnector(),t);window.__enrichedTables=n}catch(n){}})()},[t,e])}();const _=async t=>{p(!0);try{const i=C6(t.name),o=t.name.toLowerCase().split(".").pop();let a;if("pipe"===o||"psv"===o)a={method:"read_csv",delim:"|",auto_detect:!0,sample_size:-1};else if("tsv"===o)a={method:"read_csv",delim:"\t",auto_detect:!0,sample_size:-1};else if("txt"===o){const e=(await t.text()).split("\n")[0],n=(e.match(/\|/g)||[]).length,r=(e.match(/\t/g)||[]).length,i=(e.match(/,/g)||[]).length;a=n>0?{method:"read_csv",delim:"|",auto_detect:!0,sample_size:-1}:r>0?{method:"read_csv",delim:"\t",auto_detect:!0,sample_size:-1}:i>0?{method:"read_csv",delim:",",auto_detect:!0,sample_size:-1}:{method:"read_csv",auto_detect:!0,sample_size:-1}}await e.loadFile(t,i,a),await n(),r({variant:"default",title:"File imported successfully",description:`${t.name} has been loaded as table "${i}"`})}catch(i){bSt(i),r({variant:"destructive",title:"Import failed",description:`Failed to import ${t.name}: ${i instanceof Error?i.message:"Unknown error"}`})}finally{p(!1)}};return w.jsxs(t7,{type:STt.enum["data-sources"],children:[w.jsxs("div",{className:"p-4 space-y-3",children:[w.jsxs("div",{className:"flex gap-2 -mr-2",children:[w.jsx(er,{variant:"outline",size:"sm",className:"flex-1 justify-center gap-2",disabled:f,onClick:()=>{const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept=".csv,.tsv,.pipe,.psv,.txt,.parquet,.json",e.onchange=async e=>{const t=Array.from(e.target.files||[]);if(t.length>0)for(const n of t)await _(n)},e.click()},children:f?w.jsxs(w.Fragment,{children:[w.jsx(Tt,{className:"h-4 w-4 animate-spin"}),"Importing..."]}):w.jsxs(w.Fragment,{children:[w.jsx(qt,{className:"h-4 w-4"}),"Import File"]})}),w.jsx(er,{onClick:async()=>{b(!0);try{await n(),r({variant:"default",title:"Schema refreshed",description:"Table list updated successfully"})}catch(e){r({variant:"destructive",title:"Refresh failed",description:`Failed to refresh schema: ${e instanceof Error?e.message:"Unknown error"}`})}finally{b(!1)}},variant:"outline",size:"sm",className:"px-2",disabled:v,title:"Refresh schema",children:w.jsx(Mt,{className:"h-4 w-4 "+(v?"animate-spin":"")})})]}),w.jsx("div",{className:"text-[10px] text-slate-800 leading-relaxed",children:"Supported formats: .csv, .tsv, .pipe, .psv, .txt, .parquet, .json. Files stay in your browser only (local storage - not uploaded to any server)."})]}),w.jsx(ySt,{className:"hidden",acceptedFormats:{"text/csv":[".csv"],"text/tsv":[".tsv"],"text/pipe":[".pipe",".psv"],"text/plain":[".txt"],"text/parquet":[".parquet"],"text/json":[".json"]},onDrop:async t=>{for(const n of t)try{const t=C6(n.name),o=n.name.toLowerCase().split(".").pop();let a={};if("pipe"===o||"psv"===o)a={method:"read_csv",delim:"|",auto_detect:!0,sample_size:-1};else if("tsv"===o)a={method:"read_csv",delim:"\t",auto_detect:!0,sample_size:-1};else if("txt"===o)try{const e=(await n.text()).split("\n")[0],t=(e.match(/\|/g)||[]).length,r=(e.match(/\t/g)||[]).length,i=(e.match(/,/g)||[]).length;a=t>0?{method:"read_csv",delim:"|",auto_detect:!0,sample_size:-1}:r>0?{method:"read_csv",delim:"\t",auto_detect:!0,sample_size:-1}:i>0?{method:"read_csv",delim:",",auto_detect:!0,sample_size:-1}:{method:"read_csv",auto_detect:!0,sample_size:-1}}catch(i){a={method:"read_csv",auto_detect:!0,sample_size:-1}}await e.loadFile(n,t,a),r({variant:"default",title:"Table created",description:`File ${n.name} loaded as ${t}`})}catch(o){bSt(o),r({variant:"destructive",title:"Error",description:`Error loading file ${n.name}: ${o}`})}await n()},children:w.jsxs(er,{variant:"outline",size:"sm",className:"gap-2",children:[w.jsx(qt,{className:"h-4 w-4"}),"Upload File"]})}),w.jsx(ite,{}),w.jsxs("div",{className:"p-3 border-t border-gray-200 space-y-2",children:[w.jsx(CSt,{db:t}),w.jsx(er,{onClick:async()=>{try{o(!0),await(async e=>{try{const o=e.connector.getDb(),a=(await e.connector.execute("\n      SELECT table_name \n      FROM information_schema.tables \n      WHERE table_schema = 'main' \n      AND table_type = 'BASE TABLE'\n    ")).toArray().map(e=>e.table_name);if(0===a.length)return void alert("No tables found to export. Please create some tables first.");const s=`sqlrooms_database_${(new Date).toISOString().replace(/[:.]/g,"-")}.zip`,l={},u=[];for(const r of a)try{const t=`${r}.parquet`;await e.connector.execute(`COPY ${r} TO '${t}' (FORMAT PARQUET)`);const n=await o.copyFileToBuffer(t);l[r]=n;const i=(await e.connector.execute(`\n          SELECT column_name, data_type, is_nullable \n          FROM information_schema.columns \n          WHERE table_name = '${r}' \n          ORDER BY ordinal_position\n        `)).toArray().map(e=>{const t="YES"===e.is_nullable?"":" NOT NULL";return`${e.column_name} ${e.data_type}${t}`}).join(", ");u.push(`CREATE TABLE ${r} (${i});`)}catch(t){try{const t=`${r}.csv`;await e.connector.execute(`COPY ${r} TO '${t}' (FORMAT CSV, HEADER)`);const n=await o.copyFileToBuffer(t);l[r]=n}catch(n){}}const c=new SSt,d=u.join("\n\n");c.file("schema.sql",d);for(const[e,t]of Object.entries(l)){const n=`${e}.parquet`;c.file(n,t)}const f=`# SQLRooms Database Export (Parquet Format)\n\nThis ZIP contains a complete export of your SQLRooms database using efficient Parquet format.\n\n## Files:\n- schema.sql: CREATE TABLE statements for all tables\n- *.parquet: Compressed columnar data files (10x smaller than CSV!)\n\n## File Size Benefits:\n- Parquet files are typically 80-90% smaller than CSV\n- Much faster to load and query\n- Perfect for large datasets (200MB+ CSV → 20-50MB Parquet)\n\n## Usage in Jupyter Notebook:\n\n### Quick Setup (RECOMMENDED)\n\`\`\`python\nimport duckdb\nimport zipfile\n\n# Extract files\nwith zipfile.ZipFile('${s}', 'r') as zip_ref:\n    zip_ref.extractall('database_files')\n\n# Create DuckDB connection\nconn = duckdb.connect('my_database.duckdb')\n\n# Import Parquet files directly (BLAZING FAST!)\n${a.map(e=>`conn.execute("CREATE TABLE ${e} AS SELECT * FROM 'database_files/${e}.parquet'")`).join("\n")}\n\n# Query your data immediately\nresult = conn.execute("SELECT COUNT(*) FROM ${a[0]}").fetchall()\nprint(f"Loaded {result[0][0]} rows from ${a[0]}")\n\`\`\`\n\nGenerated on: ${(new Date).toISOString()}\nTables exported: ${a.join(", ")}\n`;c.file("README.md",f);const p=await c.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:9}}),h=URL.createObjectURL(p),m=document.createElement("a");m.href=h,m.download=s,document.body.appendChild(m),m.click(),document.body.removeChild(m),URL.revokeObjectURL(h);try{for(const e of a)try{await o.dropFile(`${e}.parquet`)}catch(r){try{await o.dropFile(`${e}.csv`)}catch(i){}}}catch(r){r instanceof Error?r.message:String(r)}}catch(t){bSt(t),alert(`Export failed: ${t.message||t}`)}})(t),r({variant:"default",title:"Export completed",description:"Database export download started successfully"})}catch(e){r({variant:"destructive",title:"Export failed",description:`Failed to export database: ${e instanceof Error?e.message:"Unknown error"}`})}finally{o(!1)}},variant:"outline",size:"sm",className:"w-full justify-center gap-2",disabled:i,children:i?w.jsxs(w.Fragment,{children:[w.jsx(Tt,{className:"h-4 w-4 animate-spin"}),"Exporting..."]}):w.jsxs(w.Fragment,{children:[w.jsx(mt,{className:"h-4 w-4"}),"Download Database"]})}),w.jsx(ASt,{className:"w-full justify-center",onFileSelect:e=>{[".db",".duckdb"].some(t=>e.name.toLowerCase().endsWith(t))?(s(e),u(!0)):r({variant:"destructive",title:"Invalid file type",description:"Please select a DuckDB file (.db or .duckdb)"})},isLoading:c}),w.jsx(er,{variant:"outline",size:"sm",className:"w-full justify-center gap-2 text-red-600 hover:text-red-700 hover:bg-red-50",disabled:g,onClick:()=>m(!0),children:g?w.jsxs(w.Fragment,{children:[w.jsx(Tt,{className:"h-4 w-4 animate-spin"}),"Clearing..."]}):w.jsxs(w.Fragment,{children:[w.jsx(zt,{className:"h-4 w-4"}),"Clear All Data"]})})]}),w.jsx(OSt,{isOpen:l,onClose:()=>{u(!1),s(null)},file:a,onImport:async e=>{if(a){d(!0);try{const i=e=>{r({variant:e.variant,title:e.title,description:e.description})};(await ISt(t,a,e,i)).success&&await n()}catch(i){}finally{d(!1)}}},db:t}),w.jsx(ba,{open:h,onOpenChange:m,children:w.jsxs(xa,{children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:"Clear All Data?"}),w.jsxs(Ta,{children:["This will permanently delete:",w.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[w.jsx("li",{children:"All uploaded files and tables"}),w.jsx("li",{children:"All imported database schemas"}),w.jsx("li",{children:"All data in the main schema"})]}),w.jsx("p",{className:"mt-3 font-semibold text-red-600",children:"This action cannot be undone. Your chat history will be preserved."})]})]}),w.jsxs(Sa,{children:[w.jsx(er,{variant:"outline",onClick:()=>m(!1),disabled:g,children:"Cancel"}),w.jsx(er,{onClick:async()=>{var e,i;y(!0);try{const o=await t.getConnector(),a=await o.query("\n        SELECT DISTINCT schema_name\n        FROM information_schema.schemata\n        WHERE schema_name NOT IN ('information_schema', 'pg_catalog', 'temp')\n        ORDER BY schema_name\n      "),s=[];for(let t=0;t<a.numRows;t++){const n=null==(e=a.getChild("schema_name"))?void 0:e.get(t);n&&s.push(n)}for(const e of s)"main"!==e&&await o.query(`DROP SCHEMA IF EXISTS ${e} CASCADE`);const l=await o.query("\n        SELECT table_name\n        FROM information_schema.tables\n        WHERE table_schema = 'main'\n        AND table_type = 'BASE TABLE'\n      "),u=[];for(let e=0;e<l.numRows;e++){const t=null==(i=l.getChild("table_name"))?void 0:i.get(e);t&&u.push(t)}for(const e of u)await o.query(`DROP TABLE IF EXISTS main.${e}`);await n(),r({variant:"default",title:"Data cleared",description:`Removed ${s.length-1} imported schemas and ${u.length} tables from main schema`})}catch(o){r({variant:"destructive",title:"Clear failed",description:`Failed to clear data: ${o instanceof Error?o.message:"Unknown error"}`})}finally{y(!1),m(!1)}},disabled:g,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:g?w.jsxs(w.Fragment,{children:[w.jsx(Tt,{className:"mr-2 h-4 w-4 animate-spin"}),"Clearing..."]}):"Yes, Clear All Data"})]})]})})]})},RSt=({details:e})=>w.jsxs("div",{className:"border-muted text-fg rounded-md border-gray-200 bg-blue-500/50 p-2 text-sm",children:["👋🏽 ",e]}),MSt=({className:e})=>{const t=Fwe(e=>e.ai.isRunningAnalysis),n=Fwe(e=>e.ai.getCurrentSession()),r=Fwe(e=>e.ai.deleteAnalysisResult),i=(null==n?void 0:n.analysisResults.filter(e=>e.isCompleted))||[],o=k.useRef(null),a=k.useRef(null),{showScrollButton:s,scrollToBottom:l}=function({dataToObserve:e,containerRef:t,endRef:n,scrollOnInitialLoad:r=!1}){const[i,o]=k.useState(!1),a=k.useRef(r),s=k.useRef(!0),l=k.useCallback(e=>{if(!e)return!1;const{scrollTop:t,scrollHeight:n,clientHeight:r}=e;return n-t-r<=100},[]),u=k.useCallback(()=>{const e=t.current;if(!e)return;const n=l(e);a.current=n,o(!n)},[l,t]);return k.useEffect(()=>{if(!e)return;const i=t.current,o=n.current;i&&o&&a.current&&(s.current&&!r||o.scrollIntoView({behavior:"instant",block:"end"})),s.current=!1,u()},[t,e,n,u,r]),k.useEffect(()=>{const e=t.current;if(!e)return;e.addEventListener("scroll",u);const n=setTimeout(u,100);return()=>{e.removeEventListener("scroll",u),clearTimeout(n)}},[t,u]),{showScrollButton:i,scrollToBottom:()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight,behavior:"smooth"})}}}({containerRef:o,endRef:a,dataToObserve:i}),u=e=>{n&&r(n.id,e)};return w.jsxs("div",{className:zn("relative flex h-full w-full flex-col",e),children:[w.jsxs(mb,{ref:o,className:"flex w-full flex-grow flex-col gap-5",children:[i.map(e=>w.jsx(NNe,{result:e,onDeleteAnalysisResult:u},e.id)),t&&w.jsx("div",{className:"flex flex-col items-center justify-center p-8 space-y-4",children:w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-gray-300 border-t-blue-600"}),w.jsx("div",{className:"text-sm text-muted-foreground",children:"AI is analyzing your data..."})]})}),w.jsx("div",{ref:a,className:"h-10 w-full shrink-0"}),w.jsx(gb,{orientation:"vertical"}),w.jsx(gb,{orientation:"horizontal"})]}),w.jsx("div",{className:"pointer-events-none absolute inset-x-0 bottom-0 flex justify-center",children:w.jsx("button",{onClick:l,className:zn("bg-primary hover:bg-primary/90 text-primary-foreground pointer-events-auto z-50","mb-6 translate-y-4 rounded-full p-2 opacity-0 shadow-md transition-all duration-200",s&&"translate-y-0 opacity-100"),"aria-label":"Scroll to bottom",children:w.jsx(st,{className:"h-5 w-5"})})})]})},PSt={"claude-sonnet-4-5-20250929":"Claude Sonnet 4.5","claude-haiku-4-5-20251001":"Claude Sonnet 4.5 Haiku"},FSt={openai:"/api/openai-proxy",anthropic:"https://api.anthropic.com/v1",google:"https://generativelanguage.googleapis.com/v1beta",deepseek:"https://api.deepseek.com/v1",ollama:"http://localhost:11434/api"},LSt=[{name:"openai",models:["gpt-4.1-mini","gpt-4.1","gpt-5-nano","gpt-5-mini","gpt-5"]},{name:"google",models:["gemini-2.0-flash","gemini-2.5-flash","gemini-2.5-pro"]},{name:"anthropic",models:["claude-sonnet-4-5-20250929","claude-haiku-4-5-20251001"]}],jSt=[{name:"google",models:["gemini-2.0-flash","gemini-2.5-flash","gemini-2.5-pro"]}],BSt="undefined"!=typeof window&&"file:"===window.location.protocol?jSt:LSt,$St=({className:e,models:t})=>{const n=Fwe(e=>e.ai.getCurrentSession()),r=Fwe(e=>e.ai.setAiModel),i=Fwe(e=>e.ai.setBaseUrl);if(!n)return null;const o=n.model,a=t.find(e=>e.value===o),s=t.reduce((e,t)=>(e[t.provider]||(e[t.provider]=[]),e[t.provider].push(t),e),{});return w.jsx("div",{className:e,children:w.jsxs(Ev,{value:o,onValueChange:e=>{const n=t.find(t=>t.value===e);if(n){r(n.provider,e);const t=FSt[n.provider];t&&i(t)}},children:[w.jsx(Tv,{className:"w-full",children:w.jsx(kv,{placeholder:"Select AI Model",children:(null==a?void 0:a.label)??""})}),w.jsx(Iv,{style:{width:"auto",minWidth:"fit-content"},children:Object.entries(s).map(([e,t])=>{return w.jsxs(T.Fragment,{children:[w.jsxs(Sv,{children:[w.jsx(Ov,{className:"text-muted-foreground/50 text-center text-sm font-bold",children:(n=e,n.charAt(0).toUpperCase()+n.slice(1))}),t.map(e=>w.jsx(Nv,{value:e.value,children:e.label},e.value))]}),w.jsx(Dv,{})]},e);var n})})]})})};function zSt(e,t){if(!t||""===t.trim())return{isValid:!1,provider:e,errorMessage:"API key cannot be empty"};const n=t.trim();let r=!1,i="";switch(e){case"openai":r=n.startsWith("sk-")&&n.length>=20,i=r?"":'OpenAI API key should start with "sk-" and be at least 20 characters';break;case"google":r=n.startsWith("AIza")&&n.length>=20,i=r?"":'Google API key should start with "AIza" and be at least 20 characters';break;case"anthropic":r=n.startsWith("sk-ant-")&&n.length>=20,i=r?"":'Anthropic API key should start with "sk-ant-" and be at least 20 characters';break;case"deepseek":r=n.length>=16,i=r?"":"DeepSeek API key should be at least 16 characters";break;case"ollama":r=!0;break;default:r=n.length>=16,i=r?"":"API key should be at least 16 characters"}return{isValid:r,provider:e,errorMessage:r?void 0:i,maskedKey:USt(n)}}function USt(e){if(!e||e.length<=8)return"••••••••";const t=e.slice(0,4),n=e.slice(-4);return`${t}${"•".repeat(Math.min(12,e.length-8))}${n}`}function qSt(e,t,n){n&&USt(n)}function HSt(e){return{openai:"OpenAI",google:"Google Gemini",anthropic:"Anthropic Claude",deepseek:"DeepSeek",ollama:"Ollama (Local)"}[e]||e}function VSt(e){return"ollama"!==e}function WSt(e,t){if(!e)return{isValid:!1,errorMessage:"Please select a model to continue"};if("ollama"===e)return{isValid:!0,errorMessage:""};const n=t[e];if(!n||""===n.trim()){return{isValid:!1,errorMessage:`Please configure your ${HSt(e)} API key to continue`}}if(!zSt(e,n).isValid){return{isValid:!1,errorMessage:`Your ${HSt(e)} API key appears to be invalid. Please check your API Keys configuration.`}}return{isValid:!0,errorMessage:""}}const GSt=["openai","google","anthropic"],YSt=({apiKeys:e,currentProvider:t,onClick:n,className:r=""})=>{const i=k.useMemo(()=>{const n=GSt.filter(VSt),r=GSt.filter(t=>{const n=e[t];return n&&n.trim().length>0&&zSt(t,n).isValid}),i=n.filter(t=>{const n=e[t];return n&&n.trim().length>0&&zSt(t,n).isValid}),o=t&&e[t]&&zSt(t,e[t]).isValid;return{total:GSt.length,configured:r.length,requiredTotal:n.length,requiredConfigured:i.length,currentProviderConfigured:o,hasAnyKeys:r.length>0}},[e,t]),o=i.hasAnyKeys?i.currentProviderConfigured||i.requiredConfigured===i.requiredTotal?{variant:"outline",icon:at,iconColor:"text-green-500"}:{variant:"outline",icon:ct,iconColor:"text-orange-500"}:{variant:"outline",icon:ct,iconColor:"text-red-500"},a=o.icon;return w.jsx(er,{variant:o.variant,size:"sm",onClick:()=>{n()},className:`relative ${r}`,children:w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(kt,{className:"h-4 w-4"}),w.jsx(a,{className:`h-3 w-3 ${o.iconColor}`}),w.jsx("span",{className:"text-xs font-medium",children:"API Keys"})]})})},KSt=({provider:e,value:t,onChange:n,className:r=""})=>{const[i,o]=k.useState(!1),a=zSt(e,t),s=HSt(e),l=VSt(e),u=function(e){return{openai:"https://platform.openai.com/api-keys",google:"https://aistudio.google.com/app/apikey",anthropic:"https://console.anthropic.com/",deepseek:"https://platform.deepseek.com/",ollama:"https://ollama.ai/"}[e]||"#"}(e);return w.jsxs("div",{className:`space-y-2 ${r}`,children:[w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx("label",{className:"text-sm font-medium text-gray-700",children:s}),l&&w.jsx("span",{className:"text-xs text-red-500",children:"*"}),!l&&w.jsx("span",{className:"text-xs text-gray-400",children:"(optional)"})]}),l&&w.jsxs(er,{variant:"ghost",size:"sm",onClick:()=>{window.open(u,"_blank","noopener,noreferrer")},className:"h-6 px-2 text-xs text-blue-600 hover:text-blue-800",children:["Get API Key",w.jsx(yt,{className:"ml-1 h-3 w-3"})]})]}),w.jsxs("div",{className:"relative",children:[w.jsx(pf,{type:i?"text":"password",value:t,onChange:t=>{n(e,t.target.value)},placeholder:l?`Enter your ${s} API key`:`${s} API key (optional)`,className:"pr-20 "+(t&&!a.isValid?"border-red-300 focus:border-red-500":t&&a.isValid?"border-green-300 focus:border-green-500":"")}),w.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 gap-1",children:[t&&w.jsx(w.Fragment,{children:a.isValid?w.jsx(at,{className:"h-4 w-4 text-green-500"}):w.jsx(ct,{className:"h-4 w-4 text-red-500"})}),t&&w.jsx(er,{type:"button",variant:"ghost",size:"sm",onClick:()=>{o(!i)},className:"h-6 w-6 p-0 hover:bg-gray-100",children:i?w.jsx(vt,{className:"h-3 w-3"}):w.jsx(bt,{className:"h-3 w-3"})})]})]}),t&&!a.isValid&&a.errorMessage&&w.jsxs("p",{className:"text-xs text-red-600 flex items-center gap-1",children:[w.jsx(ct,{className:"h-3 w-3"}),a.errorMessage]}),t&&a.isValid&&w.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:[w.jsx(at,{className:"h-3 w-3"}),"Valid ",s," API key"]})]})},ZSt=["openai","google","anthropic"],QSt=({isOpen:e,onClose:t,currentApiKeys:n,onSaveKeys:r})=>{const[i,o]=k.useState({}),[a,s]=k.useState(!1);k.useEffect(()=>{if(e){const e={};ZSt.forEach(t=>{e[t]=n[t]||""}),o(e),s(!1)}},[e,n]);const l=(e,t)=>{o(n=>({...n,[e]:t}));t!==(n[e]||"")&&(s(!0),qSt(0,0,t))},u=()=>{const e=ZSt.map(e=>zSt(e,i[e]||"")),t=ZSt.filter(VSt).filter(e=>{const t=i[e]||"";return t.length>0&&!zSt(e,t).isValid});return{validationResults:e,hasInvalidRequired:t.length>0,invalidProviders:t}},c=()=>{if(u().hasInvalidRequired)return;const e={};Object.entries(i).forEach(([t,n])=>{n&&n.trim().length>0&&(e[t]=n.trim(),qSt(0,0,n))}),r(e),s(!1),t()},d=()=>{t()},f=u();return w.jsx(ba,{open:e,onOpenChange:d,children:w.jsxs(xa,{className:"sm:max-w-[500px] max-h-[80vh] overflow-y-auto",onKeyDown:e=>{if("Escape"===e.key)d();else if("Enter"===e.key&&e.metaKey){u().hasInvalidRequired||c()}},children:[w.jsxs(Ea,{children:[w.jsx(ka,{className:"flex items-center gap-2",children:"🔑 API Key Management"}),w.jsx(Ta,{children:"Configure your API keys for different AI providers. Keys are stored locally in your browser and never sent to our servers."})]}),w.jsx("div",{className:"space-y-4 py-4",children:w.jsx("div",{className:"space-y-4",children:ZSt.map(e=>w.jsx(KSt,{provider:e,value:i[e]||"",onChange:l},e))})}),w.jsxs(Sa,{className:"flex justify-between items-center",children:[w.jsx("div",{className:"text-sm text-gray-500",children:a&&"• Unsaved changes"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx(er,{variant:"outline",onClick:d,children:"Cancel"}),w.jsx(er,{onClick:c,disabled:f.hasInvalidRequired,className:"min-w-[100px]",children:a?"Save Keys":"Close"})]})]})]})})},XSt=({className:e})=>{const t=Fwe(e=>e.ai.getCurrentSession()),n=Fwe(e=>e.ai.renameSession);return w.jsx("div",{className:zn("flex items-center gap-2",e),children:t?w.jsx(hf,{value:t.name,onChange:e=>{t&&e.trim()&&n(t.id,e)},placeholder:"Session name",className:"text-sm font-medium",maxWidth:150}):w.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"No session selected"})})},JSt=({className:e,children:t})=>{const n=Fwe(e=>e.config.ai.sessions),r=Fwe(e=>e.config.ai.currentSessionId),i=Fwe(e=>e.ai.switchSession),o=Fwe(e=>e.ai.createSession),a=Fwe(e=>e.ai.renameSession),s=Fwe(e=>e.ai.setBaseUrl),l=T.useCallback((e,t,n)=>{if(!e){const t=new Date;e=`${t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} at ${t.toLocaleTimeString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})}.${t.getMilliseconds()}`}const r=o(e,t,n),i=FSt[t||"google"];return i&&s(i),r},[o,s]),u=CTt(e=>e.layout.togglePanel),c=CTt(e=>e.config.layout),d=CTt(e=>e.apiKeys),f=CTt(e=>e.setBatchApiKeys),[p,h]=T.useState(!1),m=(null==c?void 0:c.nodes)&&"object"==typeof c.nodes&&"first"in c.nodes&&"second"in c.nodes&&(c.nodes.first===STt.enum["data-sources"]||c.nodes.second===STt.enum["data-sources"]),g=Fwe(e=>e.ai.getCurrentSession()),y=T.useRef(!1);T.useEffect(()=>{y.current||(y.current=!0,l())},[]);const v=Fwe(e=>e.ai.setAiModel),[b,_]=T.useState(new Set);T.useEffect(()=>{if(g&&g.id&&!b.has(g.id)){if("gemini-2.5-flash"!==g.model){v("google","gemini-2.5-flash");s(FSt.google)}_(e=>new Set([...e,g.id]))}},[g,v,b,s]);const x=(null==g?void 0:g.modelProvider)||BSt[0].name,E=k.useMemo(()=>BSt.flatMap(e=>e.models.map(t=>({provider:e.name,label:PSt[t]||t,value:t}))),[]);return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:zn("flex flex-wrap items-center justify-between pb-3",e),children:[w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(er,{variant:m?"default":"outline",size:"sm",onClick:()=>u(STt.enum["data-sources"]),className:"gap-1",children:w.jsx(ht,{className:"h-4 w-4"})}),w.jsx(er,{variant:"outline",size:"sm",onClick:()=>{const e=new CustomEvent("toggle-sql-editor");window.dispatchEvent(e)},className:"gap-1",children:w.jsx($t,{className:"h-4 w-4"})}),w.jsxs(uf,{children:[w.jsx(cf,{asChild:!0,children:w.jsxs(er,{className:"gap-1",variant:"outline",size:"sm",children:[w.jsx(Et,{className:"h-4 w-4"}),w.jsx(st,{className:"ml-1 h-4 w-4"})]})}),w.jsxs(df,{align:"start",className:"w-70",children:[w.jsxs(ff,{onClick:()=>l(),className:"flex items-center py-2",children:[w.jsx(Rt,{className:"mr-2 h-4 w-4"}),"New Session"]}),w.jsxs("div",{className:"px-2 py-1 text-xs font-medium text-gray-500 flex items-center",children:[w.jsx(st,{className:"mr-1 h-3 w-3"}),"Past 10 Sessions"]}),w.jsx("div",{className:"bg-border my-1 h-px"}),n.filter(e=>e.analysisResults&&e.analysisResults.length>0||["xefziloqhpwqlj8kb31szv1q","wz49jbb35umuwi7gom6cnk5g","qejzk4rjeofiaby238nhdxnb"].includes(e.id)).slice(-10).map((e,t)=>w.jsxs(ff,{className:"flex justify-between items-center py-2 group/item",onClick:t=>{t.target instanceof HTMLElement&&t.target.closest(".edit-icon")||i(e.id)},children:[w.jsx("span",{className:"truncate flex-1",title:`ID: ${e.id}, Index: ${t}`,children:e.name}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx(Ux,{children:w.jsxs(qx,{children:[w.jsx(Hx,{asChild:!0,children:w.jsx(It,{className:"edit-icon h-3 w-3 text-muted-foreground opacity-0 transition-opacity cursor-pointer group-hover/item:opacity-100",onClick:t=>{t.stopPropagation();const n=prompt("Rename session:",e.name);n&&n.trim()&&n!==e.name&&a(e.id,n.trim())}})}),w.jsx(Vx,{children:w.jsx("p",{children:"Rename session"})})]})}),e.id===r&&w.jsx(at,{className:"ml-1 h-4 w-4"})]})]},e.id))]})]}),w.jsx(XSt,{}),w.jsx(MNe,{})]}),t,w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(YSt,{apiKeys:d,currentProvider:x,onClick:()=>{h(!0)}}),w.jsx($St,{models:E,className:"[&_[role=option]]:py-1.5 [&_[role=group]]:space-y-0.5 [&_button[aria-label='Scroll up']]:hidden [&_button[aria-label='Scroll down']]:hidden"})]})]}),w.jsx(QSt,{isOpen:p,onClose:()=>h(!1),currentApiKeys:d,onSaveKeys:e=>{f(e)}})]})},ekt=[{id:"what_data",displayText:"What Data Do You Have",description:"Querying AI for data exploration",actualPrompt:"What data you have in the database? Share 2 sample rows from each table in markdown text format and your understandng of each of the fields"},{id:"analyze_cycling_data",displayText:"Analyze Cycling Data",description:"Show top-ranked Tour de France riders from 2015-2025",actualPrompt:"For Tour De France data - Show the Rank 1 riders from 2015 to 2025, with their total distance (km), total time in hours, and average speed (km/h) and the team. Table in Markdown text format."},{id:"chart_top_winners",displayText:"Chart Top Winners",description:"Visualize riders with 3+ wins across Tour de France history",actualPrompt:"From the cycling Tour de France data, create a chart of riders who have won (i.e Rank 1) three  or more times across history, showing how many wins each has."},{id:"dual-axis-chart",displayText:"Create 2-Axis Chart",description:"Example of a dual-axis chart",actualPrompt:"Create a dual axis chart for Tour De France data. Take the latest 10 years. Find the top 10 rank riders for each year. Find the average distance (km) and average speed (km/h) for each year. Then plot average distance (km) on the left y-axis as bars and the average speed (km/h) on the right y-axis as lines"}],tkt=({isOpen:e,onClose:t,message:n})=>w.jsx(ba,{open:e,onOpenChange:t,children:w.jsxs(xa,{className:"sm:max-w-[425px]",children:[w.jsxs(Ea,{children:[w.jsxs(ka,{className:"flex items-center gap-2",children:[w.jsx(ct,{className:"h-5 w-5 text-orange-500"}),"API Key Required"]}),w.jsx(Ta,{className:"pt-2",children:n})]}),w.jsx(Sa,{className:"mt-4",children:w.jsx(er,{onClick:t,variant:"default",children:"Close"})})]})}),nkt=({className:e,placeholder:t="What would you like to learn about the data?",onRun:n,onCancel:r})=>{const i=k.useRef(null),[o,a]=k.useState(!1),s=Fwe(e=>e.ai.isRunningAnalysis),l=Fwe(e=>e.ai.startAnalysis),u=Fwe(e=>e.ai.cancelAnalysis),c=Fwe(e=>e.ai.analysisPrompt),d=Fwe(e=>e.room.isDataAvailable),f=Fwe(e=>e.ai.setAnalysisPrompt),p=Fwe(e=>e.ai.getCurrentSession()),h=null==p?void 0:p.model,m=CTt(e=>e.apiKeys),g=null==p?void 0:p.modelProvider,[y,v]=k.useState(!1),[b,_]=k.useState("");k.useEffect(()=>{if(!d)return;const e=setTimeout(()=>{i.current&&i.current.focus()},500);return()=>clearTimeout(e)},[d]);const x=k.useCallback(e=>{if(!("Enter"!==e.key||e.shiftKey||e.ctrlKey||e.altKey||e.metaKey)&&(e.preventDefault(),!s&&h&&c.trim().length)){const e=WSt(g,m);if(!e.isValid)return _(e.errorMessage),void v(!0);l()}},[s,h,c,l,g,m]),E=Boolean(h&&c.trim().length),S=k.useCallback(()=>{if(s)u(),null==r||r();else{const e=WSt(g,m);if(!e.isValid)return _(e.errorMessage),void v(!0);l(),null==n||n()}},[s,u,l,g,m]),T=k.useCallback(e=>{if(s)return;const t=ekt.find(t=>t.id===e);t&&(f(t.actualPrompt),i.current&&i.current.focus())},[s,f]);return w.jsxs("div",{className:zn("flex w-full flex-col items-center justify-center gap-2",e),children:[ekt.length>0&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"w-full md:hidden",children:w.jsxs("div",{className:"flex gap-2 flex-wrap px-2",children:[w.jsx(er,{variant:"outline",size:"sm",className:"text-sm rounded-full",onClick:()=>T(ekt[0].id),disabled:s,title:ekt[0].description,children:ekt[0].displayText},0),o?w.jsxs(w.Fragment,{children:[ekt.slice(1).map(e=>w.jsx(er,{variant:"outline",size:"sm",className:"text-sm rounded-full",onClick:()=>T(e.id),disabled:s,title:e.description,children:e.displayText},e.id)),w.jsx(er,{variant:"outline",size:"sm",className:"text-sm rounded-full",onClick:()=>a(!1),disabled:s,children:"Less..."})]}):w.jsx(er,{variant:"outline",size:"sm",className:"text-sm rounded-full",onClick:()=>a(!0),disabled:s,children:"More..."})]})}),w.jsx("div",{className:"hidden md:flex w-full gap-2 flex-wrap px-2",children:ekt.map(e=>w.jsx(er,{variant:"outline",size:"sm",className:"text-sm rounded-full",onClick:()=>T(e.id),disabled:s,title:e.description,children:e.displayText},e.id))})]}),w.jsxs("div",{className:"bg-muted/50 flex w-full flex-row items-center gap-2 rounded-md border p-2",children:[w.jsx(Uw,{ref:i,disabled:s,className:"min-h-[30px] resize-none border-none p-2 text-sm outline-none focus-visible:ring-0 flex-1",autoResize:!0,value:c,onChange:e=>f(e.target.value),onKeyDown:x,placeholder:t,autoFocus:!0}),w.jsx(er,{className:"h-8 w-8 rounded-full flex-shrink-0",variant:"default",size:"icon",onClick:S,disabled:!E,children:s?w.jsx(Tt,{className:"h-4 w-4 animate-spin"}):w.jsx(it,{})})]}),w.jsx(tkt,{isOpen:y,onClose:()=>v(!1),message:b})]})},rkt=()=>{const e=CTt(e=>e.config.ai.currentSessionId),t=CTt(e=>e.room.initialized);return w.jsxs("div",{className:"flex h-full w-full flex-col overflow-hidden",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx(JSt,{})}),w.jsx("div",{className:"flex-1 overflow-y-auto w-full max-w-full",children:t?w.jsx("div",{className:"w-full max-w-full px-2 space-y-1",children:w.jsx(MSt,{className:"w-full max-w-full"},e)}):w.jsxs("div",{className:"flex h-full w-full flex-col items-center justify-center px-4",children:[w.jsx(kb,{className:"p-4"}),w.jsx("p",{className:"text-muted-foreground mt-4",children:"Loading database..."})]})}),w.jsx("div",{className:"flex-shrink-0",children:w.jsx(nkt,{placeholder:"What would you like to learn about the data?",className:"gap-1"})})]})};
/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */
function ikt(e){return null==e}var okt={isNothing:ikt,isObject:function(e){return"object"==typeof e&&null!==e},toArray:function(e){return Array.isArray(e)?e:ikt(e)?[]:[e]},repeat:function(e,t){var n,r="";for(n=0;n<t;n+=1)r+=e;return r},isNegativeZero:function(e){return 0===e&&Number.NEGATIVE_INFINITY===1/e},extend:function(e,t){var n,r,i,o;if(t)for(n=0,r=(o=Object.keys(t)).length;n<r;n+=1)e[i=o[n]]=t[i];return e}};function akt(e,t){var n="",r=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(n+='in "'+e.mark.name+'" '),n+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(n+="\n\n"+e.mark.snippet),r+" "+n):r}function skt(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=akt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}skt.prototype=Object.create(Error.prototype),skt.prototype.constructor=skt,skt.prototype.toString=function(e){return this.name+": "+akt(this,e)};var lkt=skt,ukt=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],ckt=["scalar","sequence","mapping"];var dkt=function(e,t){var n,r;if(t=t||{},Object.keys(t).forEach(function(t){if(-1===ukt.indexOf(t))throw new lkt('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(e){return e},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=(n=t.styleAliases||null,r={},null!==n&&Object.keys(n).forEach(function(e){n[e].forEach(function(t){r[String(t)]=e})}),r),-1===ckt.indexOf(this.kind))throw new lkt('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')};function fkt(e,t){var n=[];return e[t].forEach(function(e){var t=n.length;n.forEach(function(n,r){n.tag===e.tag&&n.kind===e.kind&&n.multi===e.multi&&(t=r)}),n[t]=e}),n}function pkt(e){return this.extend(e)}pkt.prototype.extend=function(e){var t=[],n=[];if(e instanceof dkt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else{if(!e||!Array.isArray(e.implicit)&&!Array.isArray(e.explicit))throw new lkt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit))}t.forEach(function(e){if(!(e instanceof dkt))throw new lkt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(e.loadKind&&"scalar"!==e.loadKind)throw new lkt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(e.multi)throw new lkt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(e){if(!(e instanceof dkt))throw new lkt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(pkt.prototype);return r.implicit=(this.implicit||[]).concat(t),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=fkt(r,"implicit"),r.compiledExplicit=fkt(r,"explicit"),r.compiledTypeMap=function(){var e,t,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function r(e){e.multi?(n.multi[e.kind].push(e),n.multi.fallback.push(e)):n[e.kind][e.tag]=n.fallback[e.tag]=e}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(r);return n}(r.compiledImplicit,r.compiledExplicit),r};var hkt=new pkt({explicit:[new dkt("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return null!==e?e:""}}),new dkt("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return null!==e?e:[]}}),new dkt("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return null!==e?e:{}}})]});var mkt=new dkt("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(e){if(null===e)return!0;var t=e.length;return 1===t&&"~"===e||4===t&&("null"===e||"Null"===e||"NULL"===e)},construct:function(){return null},predicate:function(e){return null===e},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});var gkt=new dkt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t=e.length;return 4===t&&("true"===e||"True"===e||"TRUE"===e)||5===t&&("false"===e||"False"===e||"FALSE"===e)},construct:function(e){return"true"===e||"True"===e||"TRUE"===e},predicate:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)},represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function ykt(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function vkt(e){return 48<=e&&e<=55}function bkt(e){return 48<=e&&e<=57}var wkt=new dkt("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n=e.length,r=0,i=!1;if(!n)return!1;if("-"!==(t=e[r])&&"+"!==t||(t=e[++r]),"0"===t){if(r+1===n)return!0;if("b"===(t=e[++r])){for(r++;r<n;r++)if("_"!==(t=e[r])){if("0"!==t&&"1"!==t)return!1;i=!0}return i&&"_"!==t}if("x"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!ykt(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}if("o"===t){for(r++;r<n;r++)if("_"!==(t=e[r])){if(!vkt(e.charCodeAt(r)))return!1;i=!0}return i&&"_"!==t}}if("_"===t)return!1;for(;r<n;r++)if("_"!==(t=e[r])){if(!bkt(e.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===t)},construct:function(e){var t,n=e,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(t=n[0])&&"+"!==t||("-"===t&&(r=-1),t=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===t){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&e%1==0&&!okt.isNegativeZero(e)},represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),_kt=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var xkt=/^[-+]?[0-9]+e/;var Ekt=new dkt("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(e){return null!==e&&!(!_kt.test(e)||"_"===e[e.length-1])},construct:function(e){var t,n;return n="-"===(t=e.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),".inf"===t?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===t?NaN:n*parseFloat(t,10)},predicate:function(e){return"[object Number]"===Object.prototype.toString.call(e)&&(e%1!=0||okt.isNegativeZero(e))},represent:function(e,t){var n;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(okt.isNegativeZero(e))return"-0.0";return n=e.toString(10),xkt.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Skt=hkt.extend({implicit:[mkt,gkt,wkt,Ekt]}),kkt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Tkt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var Ckt=new dkt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(e){return null!==e&&(null!==kkt.exec(e)||null!==Tkt.exec(e))},construct:function(e){var t,n,r,i,o,a,s,l,u=0,c=null;if(null===(t=kkt.exec(e))&&(t=Tkt.exec(e)),null===t)throw new Error("Date resolve error");if(n=+t[1],r=+t[2]-1,i=+t[3],!t[4])return new Date(Date.UTC(n,r,i));if(o=+t[4],a=+t[5],s=+t[6],t[7]){for(u=t[7].slice(0,3);u.length<3;)u+="0";u=+u}return t[9]&&(c=6e4*(60*+t[10]+ +(t[11]||0)),"-"===t[9]&&(c=-c)),l=new Date(Date.UTC(n,r,i,o,a,s,u)),c&&l.setTime(l.getTime()-c),l},instanceOf:Date,represent:function(e){return e.toISOString()}});var Akt=new dkt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(e){return"<<"===e||null===e}}),Ikt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var Okt=new dkt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(e){if(null===e)return!1;var t,n,r=0,i=e.length,o=Ikt;for(n=0;n<i;n++)if(!((t=o.indexOf(e.charAt(n)))>64)){if(t<0)return!1;r+=6}return r%8==0},construct:function(e){var t,n,r=e.replace(/[\r\n=]/g,""),i=r.length,o=Ikt,a=0,s=[];for(t=0;t<i;t++)t%4==0&&t&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(t));return 0===(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)},predicate:function(e){return"[object Uint8Array]"===Object.prototype.toString.call(e)},represent:function(e){var t,n,r="",i=0,o=e.length,a=Ikt;for(t=0;t<o;t++)t%3==0&&t&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+e[t];return 0===(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),Nkt=Object.prototype.hasOwnProperty,Dkt=Object.prototype.toString;var Rkt=new dkt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=[],s=e;for(t=0,n=s.length;t<n;t+=1){if(r=s[t],o=!1,"[object Object]"!==Dkt.call(r))return!1;for(i in r)if(Nkt.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(e){return null!==e?e:[]}}),Mkt=Object.prototype.toString;var Pkt=new dkt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(e){if(null===e)return!0;var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1){if(r=a[t],"[object Object]"!==Mkt.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[t]=[i[0],r[i[0]]]}return!0},construct:function(e){if(null===e)return[];var t,n,r,i,o,a=e;for(o=new Array(a.length),t=0,n=a.length;t<n;t+=1)r=a[t],i=Object.keys(r),o[t]=[i[0],r[i[0]]];return o}}),Fkt=Object.prototype.hasOwnProperty;var Lkt=new dkt("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(e){if(null===e)return!0;var t,n=e;for(t in n)if(Fkt.call(n,t)&&null!==n[t])return!1;return!0},construct:function(e){return null!==e?e:{}}}),jkt=Skt.extend({implicit:[Ckt,Akt],explicit:[Okt,Rkt,Pkt,Lkt]});function Bkt(e){return 48===e?"\0":97===e?"":98===e?"\b":116===e||9===e?"\t":110===e?"\n":118===e?"\v":102===e?"\f":114===e?"\r":101===e?"":32===e?" ":34===e?'"':47===e?"/":92===e?"\\":78===e?"":95===e?" ":76===e?"\u2028":80===e?"\u2029":""}for(var $kt=new Array(256),zkt=new Array(256),Ukt=0;Ukt<256;Ukt++)$kt[Ukt]=Bkt(Ukt)?1:0,zkt[Ukt]=Bkt(Ukt);var qkt=Object.prototype.toString,Hkt=Object.prototype.hasOwnProperty,Vkt=65279,Wkt={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Gkt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ykt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Kkt(e){var t,n,r;if(t=e.toString(16).toUpperCase(),e<=255)n="x",r=2;else if(e<=65535)n="u",r=4;else{if(!(e<=4294967295))throw new lkt("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+okt.repeat("0",r-t.length)+t}function Zkt(e){this.schema=e.schema||jkt,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=okt.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=function(e,t){var n,r,i,o,a,s,l;if(null===t)return{};for(n={},i=0,o=(r=Object.keys(t)).length;i<o;i+=1)a=r[i],s=String(t[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=e.compiledTypeMap.fallback[a])&&Hkt.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType='"'===e.quotingType?2:1,this.forceQuotes=e.forceQuotes||!1,this.replacer="function"==typeof e.replacer?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Qkt(e,t){for(var n,r=okt.repeat(" ",t),i=0,o=-1,a="",s=e.length;i<s;)-1===(o=e.indexOf("\n",i))?(n=e.slice(i),i=s):(n=e.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function Xkt(e,t){return"\n"+okt.repeat(" ",e.indent*t)}function Jkt(e){return 32===e||9===e}function eTt(e){return 32<=e&&e<=126||161<=e&&e<=55295&&8232!==e&&8233!==e||57344<=e&&e<=65533&&e!==Vkt||65536<=e&&e<=1114111}function tTt(e){return eTt(e)&&e!==Vkt&&13!==e&&10!==e}function nTt(e,t,n){var r=tTt(e),i=r&&!Jkt(e);return(n?r:r&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e)&&35!==e&&!(58===t&&!i)||tTt(t)&&!Jkt(t)&&35===e||58===t&&i}function rTt(e,t){var n,r=e.charCodeAt(t);return r>=55296&&r<=56319&&t+1<e.length&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function iTt(e){return/^\n* /.test(e)}function oTt(e,t,n,r,i,o,a,s){var l,u=0,c=null,d=!1,f=!1,p=-1!==r,h=-1,m=function(e){return eTt(e)&&e!==Vkt&&!Jkt(e)&&45!==e&&63!==e&&58!==e&&44!==e&&91!==e&&93!==e&&123!==e&&125!==e&&35!==e&&38!==e&&42!==e&&33!==e&&124!==e&&61!==e&&62!==e&&39!==e&&34!==e&&37!==e&&64!==e&&96!==e}(rTt(e,0))&&function(e){return!Jkt(e)&&58!==e}(rTt(e,e.length-1));if(t||a)for(l=0;l<e.length;u>=65536?l+=2:l++){if(!eTt(u=rTt(e,l)))return 5;m=m&&nTt(u,c,s),c=u}else{for(l=0;l<e.length;u>=65536?l+=2:l++){if(10===(u=rTt(e,l)))d=!0,p&&(f=f||l-h-1>r&&" "!==e[h+1],h=l);else if(!eTt(u))return 5;m=m&&nTt(u,c,s),c=u}f=f||p&&l-h-1>r&&" "!==e[h+1]}return d||f?n>9&&iTt(e)?5:a?2===o?5:2:f?4:3:!m||a||i(e)?2===o?5:2:1}function aTt(e,t,n,r,i){e.dump=function(){if(0===t.length)return 2===e.quotingType?'""':"''";if(!e.noCompatMode&&(-1!==Gkt.indexOf(t)||Ykt.test(t)))return 2===e.quotingType?'"'+t+'"':"'"+t+"'";var o=e.indent*Math.max(1,n),a=-1===e.lineWidth?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),s=r||e.flowLevel>-1&&n>=e.flowLevel;switch(oTt(t,s,e.indent,a,function(t){return function(e,t){var n,r;for(n=0,r=e.implicitTypes.length;n<r;n+=1)if(e.implicitTypes[n].resolve(t))return!0;return!1}(e,t)},e.quotingType,e.forceQuotes&&!r,i)){case 1:return t;case 2:return"'"+t.replace(/'/g,"''")+"'";case 3:return"|"+sTt(t,e.indent)+lTt(Qkt(t,o));case 4:return">"+sTt(t,e.indent)+lTt(Qkt(function(e,t){var n,r,i=/(\n+)([^\n]*)/g,o=(s=e.indexOf("\n"),s=-1!==s?s:e.length,i.lastIndex=s,uTt(e.slice(0,s),t)),a="\n"===e[0]||" "===e[0];var s;for(;r=i.exec(e);){var l=r[1],u=r[2];n=" "===u[0],o+=l+(a||n||""===u?"":"\n")+uTt(u,t),a=n}return o}(t,a),o));case 5:return'"'+function(e){for(var t,n="",r=0,i=0;i<e.length;r>=65536?i+=2:i++)r=rTt(e,i),!(t=Wkt[r])&&eTt(r)?(n+=e[i],r>=65536&&(n+=e[i+1])):n+=t||Kkt(r);return n}(t)+'"';default:throw new lkt("impossible error: invalid scalar style")}}()}function sTt(e,t){var n=iTt(e)?String(t):"",r="\n"===e[e.length-1];return n+(r&&("\n"===e[e.length-2]||"\n"===e)?"+":r?"":"-")+"\n"}function lTt(e){return"\n"===e[e.length-1]?e.slice(0,-1):e}function uTt(e,t){if(""===e||" "===e[0])return e;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,l="";n=i.exec(e);)(s=n.index)-o>t&&(r=a>o?a:s,l+="\n"+e.slice(o,r),o=r+1),a=s;return l+="\n",e.length-o>t&&a>o?l+=e.slice(o,a)+"\n"+e.slice(a+1):l+=e.slice(o),l.slice(1)}function cTt(e,t,n,r){var i,o,a,s="",l=e.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],e.replacer&&(a=e.replacer.call(n,String(i),a)),(fTt(e,t+1,a,!0,!0,!1,!0)||void 0===a&&fTt(e,t+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=Xkt(e,t)),e.dump&&10===e.dump.charCodeAt(0)?s+="-":s+="- ",s+=e.dump);e.tag=l,e.dump=s||"[]"}function dTt(e,t,n){var r,i,o,a,s,l;for(o=0,a=(i=n?e.explicitTypes:e.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof t&&t instanceof s.instanceOf)&&(!s.predicate||s.predicate(t))){if(n?s.multi&&s.representName?e.tag=s.representName(t):e.tag=s.tag:e.tag="?",s.represent){if(l=e.styleMap[s.tag]||s.defaultStyle,"[object Function]"===qkt.call(s.represent))r=s.represent(t,l);else{if(!Hkt.call(s.represent,l))throw new lkt("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](t,l)}e.dump=r}return!0}return!1}function fTt(e,t,n,r,i,o,a){e.tag=null,e.dump=n,dTt(e,n,!1)||dTt(e,n,!0);var s,l=qkt.call(e.dump),u=r;r&&(r=e.flowLevel<0||e.flowLevel>t);var c,d,f="[object Object]"===l||"[object Array]"===l;if(f&&(d=-1!==(c=e.duplicates.indexOf(n))),(null!==e.tag&&"?"!==e.tag||d||2!==e.indent&&t>0)&&(i=!1),d&&e.usedDuplicates[c])e.dump="*ref_"+c;else{if(f&&d&&!e.usedDuplicates[c]&&(e.usedDuplicates[c]=!0),"[object Object]"===l)r&&0!==Object.keys(e.dump).length?(!function(e,t,n,r){var i,o,a,s,l,u,c="",d=e.tag,f=Object.keys(n);if(!0===e.sortKeys)f.sort();else if("function"==typeof e.sortKeys)f.sort(e.sortKeys);else if(e.sortKeys)throw new lkt("sortKeys must be a boolean or a function");for(i=0,o=f.length;i<o;i+=1)u="",r&&""===c||(u+=Xkt(e,t)),s=n[a=f[i]],e.replacer&&(s=e.replacer.call(n,a,s)),fTt(e,t+1,a,!0,!0,!0)&&((l=null!==e.tag&&"?"!==e.tag||e.dump&&e.dump.length>1024)&&(e.dump&&10===e.dump.charCodeAt(0)?u+="?":u+="? "),u+=e.dump,l&&(u+=Xkt(e,t)),fTt(e,t+1,s,!0,l)&&(e.dump&&10===e.dump.charCodeAt(0)?u+=":":u+=": ",c+=u+=e.dump));e.tag=d,e.dump=c||"{}"}(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,n){var r,i,o,a,s,l="",u=e.tag,c=Object.keys(n);for(r=0,i=c.length;r<i;r+=1)s="",""!==l&&(s+=", "),e.condenseFlow&&(s+='"'),a=n[o=c[r]],e.replacer&&(a=e.replacer.call(n,o,a)),fTt(e,t,o,!1,!1)&&(e.dump.length>1024&&(s+="? "),s+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),fTt(e,t,a,!1,!1)&&(l+=s+=e.dump));e.tag=u,e.dump="{"+l+"}"}(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else if("[object Array]"===l)r&&0!==e.dump.length?(e.noArrayIndent&&!a&&t>0?cTt(e,t-1,e.dump,i):cTt(e,t,e.dump,i),d&&(e.dump="&ref_"+c+e.dump)):(!function(e,t,n){var r,i,o,a="",s=e.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],e.replacer&&(o=e.replacer.call(n,String(r),o)),(fTt(e,t,o,!1,!1)||void 0===o&&fTt(e,t,null,!1,!1))&&(""!==a&&(a+=","+(e.condenseFlow?"":" ")),a+=e.dump);e.tag=s,e.dump="["+a+"]"}(e,t,e.dump),d&&(e.dump="&ref_"+c+" "+e.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(e.skipInvalid)return!1;throw new lkt("unacceptable kind of an object to dump "+l)}"?"!==e.tag&&aTt(e,e.dump,t,o,u)}null!==e.tag&&"?"!==e.tag&&(s=encodeURI("!"===e.tag[0]?e.tag.slice(1):e.tag).replace(/!/g,"%21"),s="!"===e.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",e.dump=s+" "+e.dump)}return!0}function pTt(e,t){var n,r,i=[],o=[];for(hTt(e,i,o),n=0,r=o.length;n<r;n+=1)t.duplicates.push(i[o[n]]);t.usedDuplicates=new Array(r)}function hTt(e,t,n){var r,i,o;if(null!==e&&"object"==typeof e)if(-1!==(i=t.indexOf(e)))-1===n.indexOf(i)&&n.push(i);else if(t.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)hTt(e[i],t,n);else for(i=0,o=(r=Object.keys(e)).length;i<o;i+=1)hTt(e[r[i]],t,n)}var mTt=function(e,t){var n=new Zkt(t=t||{});n.noRefs||pTt(e,n);var r=e;return n.replacer&&(r=n.replacer.call({"":r},"",r)),fTt(n,0,r,!0,!0)?n.dump+"\n":""},gTt={dump:mTt}.dump;function yTt(e){if(null==e)return e;if("bigint"==typeof e)return Number(e);if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(yTt);if("object"==typeof e){const t={};for(const[n,r]of Object.entries(e))t[n]=yTt(r);return t}return e}const vTt=e=>{let t=e;window.__enrichedTables&&(t=window.__enrichedTables);const n=function(e){const t=e.map(e=>{var t,n,r,i;return{schema:e.schema||(null==(t=e.table)?void 0:t.schema)||"main",tableName:e.tableName||(null==(n=e.table)?void 0:n.table),fullyQualifiedName:`${e.schema||(null==(r=e.table)?void 0:r.schema)||"main"}.${e.tableName||(null==(i=e.table)?void 0:i.table)}`,isView:e.isView,columns:e.columns.map(e=>({name:e.name,type:e.type})),rowCount:e.rowCount,inputFileName:e.inputFileName,sampleRows:yTt(e.sampleRows||[])}});try{return gTt(t,{indent:2,lineWidth:120,noRefs:!0,sortKeys:!1})}catch(n){return JSON.stringify(yTt(t),null,2)}}(t);return`You are analyzing tables in DuckDB database in the context of a room.\n\nInstructions for analysis:\n- When using 'query' tool, please assign parameter 'type' with value 'query'\n- IMPORTANT: Always use fully qualified table names (schema.tableName) in your SQL queries\n  * Tables in schemas other than 'main' MUST be qualified (e.g., odi_t20_only.odi)\n  * For 'main' schema, you can use either just the table name or main.tableName\n  * Check the 'schema' and 'fullyQualifiedName' fields in the table schema below\n- Use DuckDB-specific SQL syntax and functions (not Oracle, PostgreSQL, or other SQL dialects)\n- Some key DuckDB-specific functions to use:\n  * regexp_matches() for regex (not regexp_like)\n  * strftime() for date formatting (not to_char)\n  * list_aggregate() for array operations\n  * unnest() for array expansion\n  * regr_sxy()\n  * corr()\n  * skewness()\n- Please always try to use SQL queries to answer users questions\n- Please run tool calls sequentially, don't run multiple tool calls in parallel\n- IMPORTANT: Do not list out raw query results in your response. Instead:\n  * Describe the results in natural language\n  * Provide summary statistics\n  * Use comparisons and relative terms\n  * Include only the most relevant values if necessary\n- Break down complex problems into smaller steps\n- Use "SUMMARIZE table_name"for quick overview of the table\n- Please don't modify data\n- IMPORTANT: When you receive an error response from a tool call (where success: false):\n  * Stop making any further tool calls immediately\n  * Return a final answer that includes the error message\n  * Explain what went wrong and suggest possible fixes if applicable\n\nWhen creating visualizations:\n- Follow VegaLite syntax\n- Choose appropriate chart types based on the data and analysis goals\n- Use clear titles and axis labels\n- Consider color schemes for better readability\n- Add meaningful tooltips when relevant\n- Format numbers and dates appropriately\n- Use aggregations when dealing with large datasets\n\nFor your final answer:\n- Provide an explanation for how you got it\n- Explain your reasoning step by step\n- Include relevant statistics or metrics\n- For each prompt, please always provide the final answer.\n- IMPORTANT: Query tool results may include sample rows (firstRows) or may be empty:\n  * If no sample rows provided: Never fabricate data. Direct users to the table component for actual results.\n  * If sample rows provided: Use them to enhance your analysis, but always direct users to the table component for complete results.\n\nENHANCED DATA AWARENESS:\n- Each table schema below includes up to 10 sample rows to help you understand the actual data patterns\n- Use these sample rows to provide more accurate analysis and suggestions\n- Sample rows are randomly selected (when possible) to give you a representative view of the data\n- Consider data types, formats, and patterns when analyzing or creating queries\n\nPlease use the following schema and sample data for the tables:\n\n\n---\n${n}\n---\n\nIMPORTANT DDL/DML PERMISSIONS:\nYou are allowed to perform ALL SQL operations including:\n- CREATE TABLE, DROP TABLE, ALTER TABLE (DDL operations)\n- INSERT, UPDATE, DELETE (DML operations) \n- All SELECT queries (DQL operations)\n\nSAFETY GUIDELINES:\n- ALWAYS ask for confirmation before executing destructive commands like DROP TABLE or DELETE\n- For CREATE TABLE operations, suggest appropriate column types and constraints\n- Be careful with ALTER TABLE operations that might cause data loss\n- Use CASE statements to avoid division by zero errors\n- Use COALESCE to handle NULL values appropriately\n\nDATA QUALITY BEST PRACTICES:\n- When creating charts or analysis, always handle edge cases\n- For calculations involving division, use: CASE WHEN denominator = 0 THEN 0 ELSE numerator/denominator END\n- For NULL handling, use: COALESCE(column, default_value)\n- Always validate data before performing operations\n\nCHART TOOL - VEGA LITE VISUALIZATION:\n\nREQUIRED PARAMETERS:\n1. sqlQuery: The SQL query to fetch data for the chart\n2. vegaLiteSpec: The Vega Lite specification as a JSON string\n3. reasoning: Explain why you chose this chart type and what it shows (REQUIRED - do not omit this!)\n\nCRITICAL: Your vegaLiteSpec parameter MUST be a single, valid JSON object.\nCommon mistakes to avoid:\n❌ WRONG: {"mark":"bar"}, {"title":"My Chart"}  // Two separate objects with comma\n❌ WRONG: {"mark":"bar"}}, "title":"My Chart"}  // Extra closing brace\n✅ CORRECT: {"mark":"bar", "title":"My Chart"}  // Single object with all properties\n\nRequired vegaLiteSpec structure (all properties in ONE object):\n{\n  "mark": "bar|line|point|area|circle",\n  "encoding": {\n    "x": {"field": "column_name", "type": "quantitative|nominal|temporal|ordinal"},\n    "y": {"field": "column_name", "type": "quantitative|nominal|temporal|ordinal"}\n  },\n  "title": "Chart Title"\n}\n\nChart type examples (use appropriate mark type):\n\n1. BAR CHART (for categorical comparisons):\n{\n  "mark": "bar",\n  "encoding": {\n    "x": {"field": "category", "type": "nominal", "sort": "-y"},\n    "y": {"field": "value", "type": "quantitative"},\n    "tooltip": [{"field": "category"}, {"field": "value"}]\n  },\n  "title": "Category Comparison"\n}\n\n2. LINE CHART (for time series or trends):\n{\n  "mark": "line",\n  "encoding": {\n    "x": {"field": "date", "type": "temporal", "title": "Date"},\n    "y": {"field": "value", "type": "quantitative", "title": "Value"},\n    "tooltip": [{"field": "date"}, {"field": "value"}]\n  },\n  "title": "Trend Over Time"\n}\n\n3. SCATTER PLOT (for correlations):\n{\n  "mark": "point",\n  "encoding": {\n    "x": {"field": "var1", "type": "quantitative"},\n    "y": {"field": "var2", "type": "quantitative"},\n    "size": {"field": "count", "type": "quantitative"},\n    "tooltip": [{"field": "var1"}, {"field": "var2"}, {"field": "count"}]\n  },\n  "title": "Correlation Analysis"\n}\n\n4. DUAL-AXIS CHART (for different scales):\n{\n  "layer": [\n    {\n      "mark": "bar",\n      "encoding": {\n        "x": {"field": "category", "type": "nominal"},\n        "y": {"field": "metric1", "type": "quantitative"},\n        "color": {"value": "steelblue"}\n      }\n    },\n    {\n      "mark": "line",\n      "encoding": {\n        "x": {"field": "category", "type": "nominal"},\n        "y": {"field": "metric2", "type": "quantitative"},\n        "color": {"value": "orange"}\n      }\n    }\n  ],\n  "resolve": {"scale": {"y": "independent"}},\n  "title": "Dual Metric Comparison"\n}\n\nIMPORTANT JSON FORMATTING RULES:\n1. vegaLiteSpec must be a SINGLE JSON object (all properties inside ONE pair of curly braces)\n2. Do NOT put title, mark, encoding in separate objects\n3. Do NOT add extra commas or closing braces\n4. All properties (mark, encoding, title, etc.) go in the SAME object\n5. Use proper nesting for complex properties like encoding and layer\n\nField type guidelines:\n- "quantitative": Numbers (counts, measurements, values)\n- "nominal": Categories (names, labels, groups)\n- "temporal": Dates and times\n- "ordinal": Ordered categories (small/medium/large, ranks)\n\nPlease be polite, concise, and thorough in your responses.`},bTt="\n    This tool supports all SQL operations. Be extra careful with DDL operations.\n    Always explain what the query will do before executing it.\n  ",wTt=e=>{const{className:t,title:n,query:r,tableModal:i}=e,o=CTt(e=>e.db),[a,s]=k.useState([]),[l,u]=k.useState([]),[c,d]=k.useState(!1),[f,p]=k.useState(null);k.useEffect(()=>{i.isOpen&&r&&h()},[i.isOpen,r]);const h=async()=>{if(r){d(!0),p(null);try{const e=(await o.connector.execute(r)).toArray();if(e.length>0){const t=e[0],n=Object.keys(t);u(n),s(e)}else u([]),s([])}catch(HOt){p(HOt instanceof Error?HOt.message:"Query execution failed")}finally{d(!1)}}};return w.jsx(ba,{open:i.isOpen,onOpenChange:e=>!e&&i.onClose(),children:w.jsxs(xa,{className:zn("h-[80vh] max-w-[75vw]",t),"aria-describedby":"data-table-modal",children:[w.jsxs(Ea,{children:[w.jsx(ka,{children:n??"Query Result"}),w.jsx(Ta,{className:"hidden",children:n})]}),w.jsx("div",{className:"bg-muted flex-1 overflow-hidden",children:i.isOpen&&w.jsx("div",{className:"h-full w-full overflow-auto p-4",children:r?w.jsxs("div",{className:"space-y-4",children:[w.jsxs("div",{className:"bg-gray-100 p-3 rounded-md",children:[w.jsx("h4",{className:"text-sm font-medium mb-2",children:"SQL Query:"}),w.jsx("pre",{className:"text-xs font-mono whitespace-pre-wrap break-words",children:r})]}),w.jsx("div",{className:"bg-white rounded-md border",children:c?w.jsx("div",{className:"p-4 text-center",children:w.jsx("div",{className:"text-sm text-gray-600",children:"Loading query results..."})}):f?w.jsx("div",{className:"p-4 text-center",children:w.jsxs("div",{className:"text-sm text-red-600",children:["Error: ",f]})}):0===a.length?w.jsx("div",{className:"p-4 text-center",children:w.jsx("div",{className:"text-sm text-gray-600",children:"No data returned"})}):w.jsxs("div",{className:"overflow-auto max-h-[50vh]",children:[w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{className:"bg-gray-50 sticky top-0",children:w.jsx("tr",{children:l.map((e,t)=>w.jsx("th",{className:"px-3 py-2 text-left font-semibold text-gray-800 border-b",children:e},t))})}),w.jsx("tbody",{children:a.map((e,t)=>w.jsx("tr",{className:"border-b hover:bg-gray-50",children:l.map((t,n)=>w.jsx("td",{className:"px-3 py-2 text-gray-900 font-medium",children:null!==e[t]&&void 0!==e[t]?String(e[t]):w.jsx("span",{className:"text-gray-400 italic",children:"null"})},n))},t))})]}),w.jsxs("div",{className:"p-2 text-xs text-gray-500 bg-gray-50 border-t",children:["Showing ",a.length," rows"]})]})})]}):w.jsx("div",{className:"p-4 text-xs",children:"No query provided"})})}),w.jsx(Sa,{children:w.jsx(er,{variant:"outline",onClick:i.onClose,children:"Close"})})]})})},_Tt=e=>{const{title:t,sqlQuery:n}=e,r=Jx();return w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"flex items-center gap-2",children:w.jsxs(er,{variant:"ghost",size:"xs",onClick:r.onOpen,children:[w.jsx(Bt,{className:"h-4 w-4"}),w.jsx("h3",{className:"text-xs",children:"Show Query + Raw Results"})]})}),w.jsx(wTt,{title:t,query:n,tableModal:r})]})},xTt=oA({type:dA("query"),sqlQuery:XC().describe("The SQL query to execute"),reasoning:XC().describe("Explanation of what this query does and why")}),ETt=()=>({description:`A tool for running SQL queries on the database. ${bTt}\n  \n  Supports all SQL operations including:\n  - SELECT queries for data retrieval\n  - CREATE TABLE, DROP TABLE, ALTER TABLE (DDL operations)\n  - INSERT, UPDATE, DELETE (DML operations)\n  \n  Always explain what the query will do before executing destructive operations.`,parameters:xTt,execute:async({type:e,sqlQuery:t,reasoning:n},r)=>{var i;try{if(!(null==(i=null==r?void 0:r.context)?void 0:i.get))throw new Error("Store context not available");const o=r.context.get(),a=o.db.connector;if(!a)throw new Error("Database connector not available");const s=await a.query(t);/^\s*(CREATE|DROP|ALTER|TRUNCATE|RENAME)\s/i.test(t.trim())&&await o.db.refreshTableSchemas();const l=n8(s.slice(0,100));return{llmResult:{success:!0,data:{type:e,firstRows:l},reasoning:n},additionalData:{title:"Query Result",sqlQuery:t,rowCount:l.length,isLimitedResult:s.numRows>100},title:"Query Result",sqlQuery:t}}catch(o){return{llmResult:{success:!1,details:"Query execution failed.",errorMessage:o instanceof Error?o.message:"Unknown error",reasoning:n},additionalData:{sqlQuery:t,errorType:o instanceof Error?o.constructor.name:"UnknownError"},title:"Query Error",sqlQuery:t}}},component:_Tt}),STt=fA(["room-details","data-sources","view-configuration",AA]),kTt=jA.merge(Nwe).merge(ste),{roomStore:TTt,useRoomStore:CTt}=function(e){const t=function(e){let t;function n(...n){var r;return r=e(...n),t=r?yk(r):yk,"undefined"!=typeof window&&(async()=>{try{await t.getState().room.initialize(),t.setState(e=>hT(e,({room:e})=>{e.initialized=!0})),t.subscribe(async e=>{const{room:t}=e;t.onSaveConfig&&t.hasUnsavedChanges()&&t.onSaveConfig(e.config)})}catch(e){t.getState().room.captureException(e)}})(),t}function r(e){if(!t)throw new Error("Room store not initialized. Call createRoomStore first.");return bk(t,e)}return{createRoomStore:n,useRoomStore:r}}(()=>e);return{roomStore:t.createRoomStore(),useRoomStore:function(e){return t.useRoomStore(e)}}}(gEt((e,t,n)=>({...d8({config:{layout:{type:IA.enum.mosaic,nodes:AA},dataSources:[{tableName:"cycling_tour_de_france",type:"url",url:"https://app.tigzig.com/files/cycling_tour_de_france.csv",datasetVersion:"v2-cycling-2025"}],...Dwe(Nwe.shape.ai.parse({sessions:[]})),sqlEditor:{queries:[{id:"default",name:"Untitled",query:""}],selectedQueryId:"default"}},room:{panels:{[STt.enum["data-sources"]]:{title:"Data Sources",icon:ht,component:DSt,placement:"sidebar"},main:{title:"Main view",icon:()=>null,component:rkt,placement:"main"}}}})(e,t,n),...Nee()(e,t,n),...Rwe({getApiKey:e=>{var n;return(null==(n=t())?void 0:n.apiKeys[e])||""},numberOfRowsToShareWithLLM:100,customTools:{query:{...ETt(),execute:async(e,n)=>ETt().execute(e,{...n,context:{get:t}})},echo:{description:"A simple echo tool that returns the input text",parameters:oA({text:XC().describe("The text to echo back")}),execute:async({text:e})=>({llmResult:{success:!0,details:`Echo: ${e}`}}),component:RSt},debug_sql:{description:"Debug tool to trace SQL execution flow",parameters:oA({query:XC().describe("The SQL query to debug"),step:XC().describe("The step in the execution flow")}),execute:async({query:e,step:t})=>({llmResult:{success:!0,details:`Debug logged: ${t} - Query length: ${e.length}`}}),component:RSt},debug_charts:{description:"Debug tool to trace chart creation and display issues",parameters:oA({message:XC().describe("Debug message about chart state"),chartCount:JC().optional().describe("Number of charts expected")}),execute:async({message:e,chartCount:n})=>{const r=t().config.ai.currentSessionId;if(r){const e=t().config.ai.sessions[r];if(e){e.messages.filter(e=>"assistant"===e.type).flatMap(e=>e.toolCallMessages||[]).filter(e=>"chart"===e.toolName).forEach((e,t)=>{})}}return{llmResult:{success:!0,details:`Chart debug logged: ${e} - Found ${n||"unknown"} charts`}}},component:RSt},chart:{description:pEt().description,parameters:oA({sqlQuery:XC(),vegaLiteSpec:XC(),reasoning:XC().optional().default("Visualization created based on query results")}),execute:async(e,t)=>{const n={...e,reasoning:e.reasoning||"Visualization created based on query results"};return pEt().execute(n,t)},component:pEt().component}},getInstructions:vTt})(e,t,n),apiKeys:{openai:void 0,google:void 0,anthropic:void 0,deepseek:void 0},setProviderApiKey:(n,r)=>{e({apiKeys:{...t().apiKeys,[n]:r}})},setBatchApiKeys:n=>{const r={...t().apiKeys};Object.entries(n).forEach(([e,t])=>{t&&t.trim().length>0?r[e]=t.trim():r[e]=void 0}),e({apiKeys:r})}}),{name:"ai-example-app-state-storage-v2",onRehydrateStorage:()=>(e,t)=>{},partialize:e=>{var t;const n=e.config.ai.sessions,r=["xefziloqhpwqlj8kb31szv1q","wz49jbb35umuwi7gom6cnk5g","qejzk4rjeofiaby238nhdxnb"],i=n.filter(e=>r.includes(e.id)),o=n.filter(e=>!r.includes(e.id)).filter(e=>e.analysisResults&&e.analysisResults.length>0).slice(0,10).sort((e,t)=>new Date(t.createdAt||0).getTime()-new Date(e.createdAt||0).getTime()),a=[...o,...i],s=e.config.ai.currentSessionId,l=a.some(e=>e.id===s),u=l?s:(null==(t=a[0])?void 0:t.id)||"";!l&&s&&(window.__loggedRemovedSessions||(window.__loggedRemovedSessions=new Set),window.__loggedRemovedSessions.has(s)||window.__loggedRemovedSessions.add(s));const c={...e.config,ai:{...e.config.ai,sessions:a,currentSessionId:u}},d={config:kTt.parse(c),apiKeys:e.apiKeys};try{const e=JSON.stringify(d),t=new Blob([e]).size,n=((t/1048576).toFixed(2),Date.now());(!window.__lastPersistLog||n-window.__lastPersistLog>5e3)&&(window.__lastPersistLog=n)}catch(f){}return d},migrate:(e,t)=>{var n,r,i;if(null==(r=null==(n=null==e?void 0:e.config)?void 0:n.ai)?void 0:r.sessions){const t=e.config.ai.sessions,n=["xefziloqhpwqlj8kb31szv1q","wz49jbb35umuwi7gom6cnk5g","qejzk4rjeofiaby238nhdxnb"],r=t.filter(e=>n.includes(e.id)),o=t.filter(e=>!n.includes(e.id)).filter(e=>e.analysisResults&&e.analysisResults.length>0).slice(0,10).sort((e,t)=>new Date(t.createdAt||0).getTime()-new Date(e.createdAt||0).getTime()),a=[...o,...r],s=e.config.ai.currentSessionId,l=a.some(e=>e.id===s);if(!l&&s){const t=(null==(i=a[0])?void 0:i.id)||"";window.__loggedMigratedSessions||(window.__loggedMigratedSessions=new Set),window.__loggedMigratedSessions.has(s)||window.__loggedMigratedSessions.add(s),e.config.ai.currentSessionId=t}e.config.ai.sessions=a}return e},version:3}));function ATt(){const[e,t]=k.useState(!1);return k.useEffect(()=>{const e=()=>{t(window.innerWidth<=1024||window.screen.width<=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{isMobile:e}}const ITt=()=>{const{isMobile:e}=ATt(),[t,n]=k.useState(!1);return w.jsxs(w.Fragment,{children:[w.jsx("header",{className:"bg-indigo-950 border-b border-indigo-900 w-full "+(e?"py-2 px-2":"py-1 px-4"),style:{backgroundColor:"#1e1b4b"},children:e?w.jsxs("div",{className:"flex flex-col items-center gap-1 text-center",children:[w.jsx("div",{className:"app-header-left text-sm",children:"SQL Rooms AI @ Tigzig"}),w.jsx("div",{className:"app-header-description text-sm leading-tight",children:"In-Browser DuckDB ● Analyze in Natural Language with AI ● No Remote Database Required."}),w.jsxs("div",{className:"app-header-credits text-sm",style:{color:"rgba(255, 255, 255, 0.9)"},children:["Credits: ",w.jsx("a",{href:"https://sqlrooms.org",target:"_blank",rel:"noopener noreferrer",className:"app-header-link",children:"sqlrooms.org"})," ● A Tigzig Custom Implementation"]})]}):w.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",gap:"1rem"},children:[w.jsx("div",{className:"app-header-left",children:"SQL Rooms AI @ Tigzig"}),w.jsx("div",{className:"app-header-description",style:{flex:"1 1 auto",textAlign:"center"},children:"In-Browser DuckDB ● Analyze in Natural Language with AI ● No Remote Database Required."}),w.jsxs("div",{className:"app-header-credits",style:{textAlign:"right",flex:"0 0 auto"},children:["Credits: ",w.jsx("a",{href:"https://sqlrooms.org",target:"_blank",rel:"noopener noreferrer",className:"app-header-link",children:"sqlrooms.org"})," ● A Tigzig Custom Implementation"]})]})}),w.jsx("div",{className:"w-full border-b "+(e?"py-2 px-3":"py-1 px-6"),style:{backgroundColor:"#F9FAFB",borderColor:"#E5E7EB",borderBottomWidth:"1px"},children:e?w.jsx("div",{className:"flex flex-col gap-2",children:w.jsxs("div",{className:"flex items-center gap-2",children:[w.jsx(jt,{className:"h-5 w-5 text-amber-400",fill:"currentColor"}),w.jsx(er,{variant:"outline",size:"sm",asChild:!0,children:w.jsxs("a",{href:"https://sql-rooms.tigzig.com/SQL-ROOMS-TIGZIG-FULL-APP.html",download:"SQL-ROOMS-TIGZIG-FULL-APP.html",className:"flex items-center gap-2",children:[w.jsx(mt,{className:"h-4 w-4"}),"Download Full App (~3.5 MB)"]})}),w.jsx("button",{onClick:()=>n(!0),className:"p-1 hover:bg-gray-200 rounded-full transition-colors",title:"More information",children:w.jsx(St,{className:"h-5 w-5",style:{color:"#0f172a"}})})]})}):w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx(jt,{className:"h-5 w-5 text-amber-400",fill:"currentColor"}),w.jsx(er,{variant:"outline",size:"sm",asChild:!0,children:w.jsxs("a",{href:"https://sql-rooms.tigzig.com/SQL-ROOMS-TIGZIG-FULL-APP.html",download:"SQL-ROOMS-TIGZIG-FULL-APP.html",className:"flex items-center gap-2",style:{color:"#312e81"},children:[w.jsx(mt,{className:"h-4 w-4"}),"Download Full App (~3.5 MB)"]})}),w.jsx("span",{className:"text-sm download-info-text",style:{color:"#4f46e5"},children:"Standalone portable version - download as single HTML file. Email it, share it, double-click to run. Works like the website but without needing a server."})]})}),e&&t&&w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-end z-50",children:w.jsxs("div",{className:"bg-white w-full rounded-t-lg p-4 max-h-96 overflow-y-auto",children:[w.jsxs("div",{className:"flex justify-between items-center mb-3 pb-3 border-b",children:[w.jsx("h3",{className:"font-semibold text-gray-900",children:"Download Information"}),w.jsx("button",{onClick:()=>n(!1),className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:w.jsx(Vt,{className:"h-5 w-5"})})]}),w.jsx("p",{className:"text-sm leading-relaxed download-info-text",style:{color:"#4f46e5"},children:"Standalone portable version - download as single HTML file. Email it, share it, double-click to run. Works like the website but without needing a server."})]})})]})},OTt=({className:e=""})=>w.jsx("footer",{className:`bg-white/50 border-t border-indigo-100 py-2 mt-4 text-xs ${e}`,children:w.jsx("div",{className:"max-w-7xl mx-auto px-4",children:w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-1",children:[w.jsxs("div",{className:"app-footer-left text-xs text-center md:text-left",style:{fontWeight:"500"},children:[w.jsx("span",{style:{color:"#475569",fontWeight:"500"},children:"Amar Harolikar"}),w.jsx("span",{className:"mx-1.5 text-indigo-600",children:"•"}),w.jsx("span",{style:{color:"#475569",fontWeight:"500"},children:"Decision Sciences & Applied AI"}),w.jsx("span",{className:"mx-1.5 text-indigo-600",children:"•"}),w.jsxs("span",{style:{color:"#475569",fontWeight:"500"},children:[w.jsx("i",{className:"fas fa-envelope mr-1"}),"amar@harolikar.com"]}),w.jsx("span",{className:"mx-1.5 text-indigo-600",children:"•"}),w.jsxs("a",{href:"https://www.linkedin.com/in/amarharolikar",target:"_blank",style:{color:"#4f46e5",fontWeight:"500"},className:"hover:text-slate-800 hover:underline",children:[w.jsx("i",{className:"fab fa-linkedin mr-1"}),"LinkedIn"]})]}),w.jsxs("div",{className:"app-footer-right flex items-center gap-4 text-xs",style:{fontWeight:"500"},children:[w.jsxs("a",{href:"https://tigzig.com",target:"_blank",style:{color:"#4f46e5",fontWeight:"500"},className:"hover:text-slate-800 hover:underline",children:[w.jsx("i",{className:"fas fa-globe mr-1"}),"Tigzig"]}),w.jsxs("a",{href:"https://www.tigzig.com/privacy-policy-tigzig",target:"_blank",style:{color:"#4f46e5",fontWeight:"500"},className:"hover:text-slate-800 hover:underline",children:[w.jsx("i",{className:"fas fa-shield-alt mr-1"}),"Privacy"]}),w.jsxs("a",{href:"https://www.tigzig.com/terms-conditions",target:"_blank",style:{color:"#4f46e5",fontWeight:"500"},className:"hover:text-slate-800 hover:underline",children:[w.jsx("i",{className:"fas fa-file-contract mr-1"}),"Terms"]})]})]})})}),NTt=({error:e,onClose:t})=>{if(!e)return null;return w.jsx(ba,{open:!!e,onOpenChange:t,children:w.jsxs(xa,{className:"max-w-lg",children:[w.jsx(Ea,{children:w.jsxs("div",{className:"flex items-center gap-3",children:[w.jsx("div",{className:"flex-shrink-0",children:w.jsx(Ut,{className:"h-6 w-6 text-red-500"})}),w.jsxs("div",{children:[w.jsx(ka,{className:"text-lg font-semibold text-red-700",children:"Out of Memory Error"}),w.jsx(Ta,{className:"text-sm text-gray-600 mt-1",children:"The operation requires more memory than available"})]})]})}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:w.jsx("p",{className:"text-sm text-red-800",children:e.message})}),w.jsxs("div",{className:"space-y-3",children:[w.jsx("h4",{className:"font-medium text-gray-900",children:"Immediate solutions:"}),w.jsxs("div",{className:"space-y-2",children:[w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx(wt,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Reduce file size"}),w.jsx("p",{className:"text-xs text-gray-600",children:"Import smaller files or fewer files at once"})]})]}),w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx(ht,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Simplify queries"}),w.jsx("p",{className:"text-xs text-gray-600",children:"Break complex queries into smaller parts"})]})]})]})]}),w.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:w.jsxs("div",{className:"flex items-start gap-3",children:[w.jsx(Lt,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),w.jsxs("div",{children:[w.jsx("p",{className:"text-xs text-blue-800 font-medium mb-1",children:"Custom deployment option available"}),w.jsx("p",{className:"text-xs text-blue-700",children:"This uses default DuckDB settings (3.1GB memory limit). For larger files, you can deploy a custom version with increased memory configuration and optimized thread settings for your specific hardware requirements."})]})]})})]}),w.jsx(Sa,{children:w.jsx("button",{onClick:()=>{t()},className:"px-6 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"OK"})})]})})},DTt=k.createContext(null),RTt=({children:e})=>{const[t,n]=k.useState(null),r=k.useCallback(e=>{n(e)},[]),i=k.useCallback(()=>{n(null)},[]),o=T.useRef(r);return o.current=r,T.useMemo(()=>{vSt=e=>{o.current(e)}},[]),w.jsxs(DTt.Provider,{value:{showOutOfMemoryError:r},children:[e,w.jsx(NTt,{error:t,onClose:i})]})},MTt=()=>{const e=Jx();return k.useEffect(()=>{(async()=>{const e=TTt.getState().config.dataSources||[];if(e.length>0&&e[0].datasetVersion){const n=e[0].datasetVersion,r=localStorage.getItem("default-dataset-version");if(r&&r!==n)try{const t=TTt.getState().db,n=await t.getConnector(),r=e[0].tableName;await n.query(`DROP TABLE IF EXISTS ${r}`)}catch(t){}localStorage.setItem("default-dataset-version",n)}})()},[]),k.useEffect(()=>{const t=()=>{e.onToggle()};return window.addEventListener("toggle-sql-editor",t),()=>{window.removeEventListener("toggle-sql-editor",t)}},[e]),w.jsx(RTt,{children:w.jsxs("div",{className:"h-screen w-screen max-w-full flex flex-col m-0 p-0",children:[w.jsx(ITt,{}),w.jsx("div",{className:"flex-1 overflow-hidden",children:w.jsxs(y8,{className:"h-full w-full",roomStore:TTt,children:[w.jsx(y8.LayoutComposer,{}),w.jsx(y8.LoadingProgress,{}),w.jsx(ate,{isOpen:e.isOpen,onClose:e.onClose})]})}),w.jsx(OTt,{})]})})};(()=>{window.addEventListener("unhandledrejection",e=>{const t=e.reason;bSt(t)&&e.preventDefault()}),window.addEventListener("error",e=>{const t=e.error;bSt(t)&&e.preventDefault()});const e=console.error;console.error=(...t)=>{const n=t.join(" ").toLowerCase();n.includes("out of memory")&&bSt({message:n}),e.apply(console,t)}})(),gk.createRoot(document.getElementById("root")).render(w.jsx(k.StrictMode,{children:w.jsx(Hw,{defaultTheme:"light",storageKey:"sqlrooms-ui-theme",children:w.jsx(MTt,{})})}));var PTt,FTt="vercel.ai.error",LTt=Symbol.for(FTt),jTt=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[PTt]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,FTt)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};PTt=LTt;var BTt,$Tt=jTt,zTt="AI_InvalidResponseDataError",UTt=`vercel.ai.error.${zTt}`,qTt=Symbol.for(UTt),HTt=class extends $Tt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:zTt,message:t}),this[BTt]=!0,this.data=e}static isInstance(e){return $Tt.hasMarker(e,UTt)}};BTt=qTt;var VTt,WTt="AI_UnsupportedFunctionalityError",GTt=`vercel.ai.error.${WTt}`,YTt=Symbol.for(GTt),KTt=class extends $Tt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:WTt,message:t}),this[VTt]=!0,this.functionality=e}static isInstance(e){return $Tt.hasMarker(e,GTt)}};VTt=YTt;var ZTt,QTt="vercel.ai.error",XTt=Symbol.for(QTt),JTt=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[ZTt]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,QTt)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};ZTt=XTt;var eCt,tCt=JTt,nCt="AI_APICallError",rCt=`vercel.ai.error.${nCt}`,iCt=Symbol.for(rCt),oCt=class extends tCt{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:o,cause:a,isRetryable:s=null!=r&&(408===r||409===r||429===r||r>=500),data:l}){super({name:nCt,message:e,cause:a}),this[eCt]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=o,this.isRetryable=s,this.data=l}static isInstance(e){return tCt.hasMarker(e,rCt)}};eCt=iCt;var aCt,sCt="AI_EmptyResponseBodyError",lCt=`vercel.ai.error.${sCt}`,uCt=Symbol.for(lCt),cCt=class extends tCt{constructor({message:e="Empty response body"}={}){super({name:sCt,message:e}),this[aCt]=!0}static isInstance(e){return tCt.hasMarker(e,lCt)}};function dCt(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}aCt=uCt;var fCt,pCt="AI_InvalidArgumentError",hCt=`vercel.ai.error.${pCt}`,mCt=Symbol.for(hCt),gCt=class extends tCt{constructor({message:e,cause:t,argument:n}){super({name:pCt,message:e,cause:t}),this[fCt]=!0,this.argument=n}static isInstance(e){return tCt.hasMarker(e,hCt)}};fCt=mCt;var yCt,vCt="AI_JSONParseError",bCt=`vercel.ai.error.${vCt}`,wCt=Symbol.for(bCt),_Ct=class extends tCt{constructor({text:e,cause:t}){super({name:vCt,message:`JSON parsing failed: Text: ${e}.\nError message: ${dCt(t)}`,cause:t}),this[yCt]=!0,this.text=e}static isInstance(e){return tCt.hasMarker(e,bCt)}};yCt=wCt;var xCt,ECt="AI_LoadAPIKeyError",SCt=`vercel.ai.error.${ECt}`,kCt=Symbol.for(SCt),TCt=class extends tCt{constructor({message:e}){super({name:ECt,message:e}),this[xCt]=!0}static isInstance(e){return tCt.hasMarker(e,SCt)}};xCt=kCt;var CCt,ACt="AI_TypeValidationError",ICt=`vercel.ai.error.${ACt}`,OCt=Symbol.for(ICt);CCt=OCt;var NCt=class e extends tCt{constructor({value:e,cause:t}){super({name:ACt,message:`Type validation failed: Value: ${JSON.stringify(e)}.\nError message: ${dCt(t)}`,cause:t}),this[CCt]=!0,this.value=e}static isInstance(e){return tCt.hasMarker(e,ICt)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}};class DCt extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function RCt(e){}function MCt(e){if("function"==typeof e)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=RCt,onError:n=RCt,onRetry:r=RCt,onComment:i}=e;let o,a="",s=!0,l="",u="";function c(e){if(""===e)return l.length>0&&t({id:o,event:u||void 0,data:l.endsWith("\n")?l.slice(0,-1):l}),o=void 0,l="",void(u="");if(e.startsWith(":"))return void(i&&i(e.slice(e.startsWith(": ")?2:1)));const n=e.indexOf(":");if(-1!==n){const t=e.slice(0,n),r=" "===e[n+1]?2:1;return void d(t,e.slice(n+r),e)}d(e,"",e)}function d(e,t,i){switch(e){case"event":u=t;break;case"data":l=`${l}${t}\n`;break;case"id":o=t.includes("\0")?void 0:t;break;case"retry":/^\d+$/.test(t)?r(parseInt(t,10)):n(new DCt(`Invalid \`retry\` value: "${t}"`,{type:"invalid-retry",value:t,line:i}));break;default:n(new DCt(`Unknown field "${e.length>20?`${e.slice(0,20)}…`:e}"`,{type:"unknown-field",field:e,value:t,line:i}))}}return{feed:function(e){const t=s?e.replace(/^\xEF\xBB\xBF/,""):e,[n,r]=function(e){const t=[];let n="",r=0;for(;r<e.length;){const i=e.indexOf("\r",r),o=e.indexOf("\n",r);let a=-1;if(-1!==i&&-1!==o?a=Math.min(i,o):-1!==i?a=i===e.length-1?-1:i:-1!==o&&(a=o),-1===a){n=e.slice(r);break}{const n=e.slice(r,a);t.push(n),r=a+1,"\r"===e[r-1]&&"\n"===e[r]&&r++}}return[t,n]}(`${a}${t}`);for(const i of n)c(i);a=r,s=!1},reset:function(e={}){a&&e.consume&&c(a),s=!0,o=void 0,l="",u="",a=""}}}class PCt extends TransformStream{constructor({onError:e,onRetry:t,onComment:n}={}){let r;super({start(i){r=MCt({onEvent:e=>{i.enqueue(e)},onError(t){"terminate"===e?i.error(t):"function"==typeof e&&e(t)},onRetry:t,onComment:n})},transform(e){r.feed(e)}})}}var FCt={};function LCt(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function jCt(e){const t={};return e.headers.forEach((e,n)=>{t[n]=e}),t}var BCt=(({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Pne(n,t);if(null==e)return i;if(n.includes(r))throw new gCt({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return t=>`${e}${r}${i(t)}`})();function $Ct(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}function zCt({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if("string"==typeof e)return e;if(null!=e)throw new TCt({message:`${r} API key must be a string.`});if("undefined"==typeof process)throw new TCt({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(null==(e=FCt[t]))throw new TCt({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if("string"!=typeof e)throw new TCt({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var UCt=Symbol.for("vercel.ai.validator");function qCt(e){return function(e){return"object"==typeof e&&null!==e&&UCt in e&&!0===e[UCt]&&"validate"in e}(e)?e:(t=e,n=e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}},{[UCt]:!0,validate:n});var t,n}function HCt({value:e,schema:t}){const n=qCt(t);try{if(null==n.validate)return{success:!0,value:e};const t=n.validate(e);return t.success?t:{success:!1,error:NCt.wrap({value:e,cause:t.error})}}catch(r){return{success:!1,error:NCt.wrap({value:e,cause:r})}}}function VCt({text:e,schema:t}){try{const n=Bne.parse(e);return null==t?n:function({value:e,schema:t}){const n=HCt({value:e,schema:t});if(!n.success)throw NCt.wrap({value:e,cause:n.error});return n.value}({value:n,schema:t})}catch(n){if(_Ct.isInstance(n)||NCt.isInstance(n))throw n;throw new _Ct({text:e,cause:n})}}function WCt({text:e,schema:t}){try{const n=Bne.parse(e);if(null==t)return{success:!0,value:n,rawValue:n};const r=HCt({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:_Ct.isInstance(n)?n:new _Ct({text:e,cause:n})}}}function GCt(e){try{return Bne.parse(e),!0}catch(F0){return!1}}var YCt=()=>globalThis.fetch,KCt=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>ZCt({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),ZCt=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:o,fetch:a=YCt()})=>{try{const u=await a(e,{method:"POST",headers:(s=t,Object.fromEntries(Object.entries(s).filter(([e,t])=>null!=t))),body:n.content,signal:o}),c=jCt(u);if(!u.ok){let t;try{t=await i({response:u,url:e,requestBodyValues:n.values})}catch(l){if($Ct(l)||oCt.isInstance(l))throw l;throw new oCt({message:"Failed to process error response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}throw t.value}try{return await r({response:u,url:e,requestBodyValues:n.values})}catch(l){if(l instanceof Error&&($Ct(l)||oCt.isInstance(l)))throw l;throw new oCt({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}}catch(l){if($Ct(l))throw l;if(l instanceof TypeError&&"fetch failed"===l.message){const t=l.cause;if(null!=t)throw new oCt({message:`Cannot connect to API: ${t.message}`,cause:t,url:e,requestBodyValues:n.values,isRetryable:!0})}throw l}var s},{btoa:QCt}=globalThis;function XCt(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return QCt(t)}function JCt(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.providerMetadata)?void 0:t.openaiCompatible)?n:{}}function eAt(e){const t=[];for(const{role:n,content:r,...i}of e){const e=JCt({...i});switch(n){case"system":t.push({role:"system",content:r,...e});break;case"user":if(1===r.length&&"text"===r[0].type){t.push({role:"user",content:r[0].text,...JCt(r[0])});break}t.push({role:"user",content:r.map(e=>{var t;const n=JCt(e);switch(e.type){case"text":return{type:"text",text:e.text,...n};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(t=e.mimeType)?t:"image/jpeg"};base64,${XCt(e.image)}`},...n};case"file":throw new KTt({functionality:"File content parts in user messages"})}}),...e});break;case"assistant":{let n="";const i=[];for(const e of r){const t=JCt(e);switch(e.type){case"text":n+=e.text;break;case"tool-call":i.push({id:e.toolCallId,type:"function",function:{name:e.toolName,arguments:JSON.stringify(e.args)},...t})}}t.push({role:"assistant",content:n,tool_calls:i.length>0?i:void 0,...e});break}case"tool":for(const e of r){const n=JCt(e);t.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result),...n})}break;default:throw new Error(`Unsupported role: ${n}`)}}return t}function tAt({id:e,model:t,created:n}){return{id:null!=e?e:void 0,modelId:null!=t?t:void 0,timestamp:null!=n?new Date(1e3*n):void 0}}function nAt(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var rAt={errorSchema:oA({error:oA({message:XC(),type:XC().nullish(),param:nA().nullish(),code:aA([XC(),JC()]).nullish()})}),errorToMessage:e=>e.error.message};var iAt=class{constructor(e,t,n){var r,i;this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n;const o=null!=(r=n.errorStructure)?r:rAt;this.chunkSchema=aAt(o.errorSchema),this.failedResponseHandler=(({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:o})=>{const a=await r.text(),s=jCt(r);if(""===a.trim())return{responseHeaders:s,value:new oCt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})};try{const l=VCt({text:a,schema:e});return{responseHeaders:s,value:new oCt({message:t(l),url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,data:l,isRetryable:null==n?void 0:n(r,l)})}}catch(l){return{responseHeaders:s,value:new oCt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})}}})(o),this.supportsStructuredOutputs=null!=(i=n.supportsStructuredOutputs)&&i}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:o,frequencyPenalty:a,presencePenalty:s,providerMetadata:l,stopSequences:u,responseFormat:c,seed:d}){var f,p;const h=e.type,m=[];null!=o&&m.push({type:"unsupported-setting",setting:"topK"}),"json"!==(null==c?void 0:c.type)||null==c.schema||this.supportsStructuredOutputs||m.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const g={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:i,frequency_penalty:a,presence_penalty:s,response_format:"json"===(null==c?void 0:c.type)?!0===this.supportsStructuredOutputs&&null!=c.schema?{type:"json_schema",json_schema:{schema:c.schema,name:null!=(f=c.name)?f:"response",description:c.description}}:{type:"json_object"}:void 0,stop:u,seed:d,...null==l?void 0:l[this.providerOptionsName],messages:eAt(t)};switch(h){case"regular":{const{tools:t,tool_choice:n,toolWarnings:r}=function({mode:e,structuredOutputs:t}){var n;const r=(null==(n=e.tools)?void 0:n.length)?e.tools:void 0,i=[];if(null==r)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice,a=[];for(const l of r)"provider-defined"===l.type?i.push({type:"unsupported-tool",tool:l}):a.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(null==o)return{tools:a,tool_choice:void 0,toolWarnings:i};const s=o.type;switch(s){case"auto":case"none":case"required":return{tools:a,tool_choice:s,toolWarnings:i};case"tool":return{tools:a,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:throw new KTt({functionality:`Unsupported tool choice type: ${s}`})}}({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...g,tools:t,tool_choice:n},warnings:[...m,...r]}}case"object-json":return{args:{...g,response_format:!0===this.supportsStructuredOutputs&&null!=e.schema?{type:"json_schema",json_schema:{schema:e.schema,name:null!=(p=e.name)?p:"response",description:e.description}}:{type:"json_object"}},warnings:m};case"object-tool":return{args:{...g,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:m};default:throw new Error(`Unsupported type: ${h}`)}}async doGenerate(e){var t,n,r,i,o,a,s,l,u;const{args:c,warnings:d}=this.getArgs({...e}),f=JSON.stringify(c),{responseHeaders:p,value:h,rawValue:m}=await KCt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:LCt(this.config.headers(),e.headers),body:c,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(g=oAt,async({response:e,url:t,requestBodyValues:n})=>{const r=await e.text(),i=WCt({text:r,schema:g}),o=jCt(e);if(!i.success)throw new oCt({message:"Invalid JSON response",cause:i.error,statusCode:e.status,responseHeaders:o,responseBody:r,url:t,requestBodyValues:n});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}}),abortSignal:e.abortSignal,fetch:this.config.fetch});var g;const{messages:y,...v}=c,b=h.choices[0],w=null==(n=null==(t=this.config.metadataExtractor)?void 0:t.extractMetadata)?void 0:n.call(t,{parsedBody:m});return{text:null!=(r=b.message.content)?r:void 0,reasoning:null!=(i=b.message.reasoning_content)?i:void 0,toolCalls:null==(o=b.message.tool_calls)?void 0:o.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:BCt(),toolName:e.function.name,args:e.function.arguments}}),finishReason:nAt(b.finish_reason),usage:{promptTokens:null!=(s=null==(a=h.usage)?void 0:a.prompt_tokens)?s:NaN,completionTokens:null!=(u=null==(l=h.usage)?void 0:l.completion_tokens)?u:NaN},...w&&{providerMetadata:w},rawCall:{rawPrompt:y,rawSettings:v},rawResponse:{headers:p,body:m},response:tAt(h),warnings:d,request:{body:f}}}async doStream(e){var t;if(this.settings.simulateStreaming){const t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.reasoning)if(Array.isArray(t.reasoning))for(const n of t.reasoning)"text"===n.type&&e.enqueue({type:"reasoning",textDelta:n.text});else e.enqueue({type:"reasoning",textDelta:t.reasoning});if(t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(const n of t.toolCalls)e.enqueue({type:"tool-call",...n});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),i=JSON.stringify({...n,stream:!0}),o=null==(t=this.config.metadataExtractor)?void 0:t.createStreamExtractor(),{responseHeaders:a,value:s}=await KCt({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:LCt(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:(l=this.chunkSchema,async({response:e})=>{const t=jCt(e);if(null==e.body)throw new cCt({});return{responseHeaders:t,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new PCt).pipeThrough(new TransformStream({transform({data:e},t){"[DONE]"!==e&&t.enqueue(WCt({text:e,schema:l}))}}))}}),abortSignal:e.abortSignal,fetch:this.config.fetch});var l;const{messages:u,...c}=n,d=[];let f="unknown",p={promptTokens:void 0,completionTokens:void 0},h=!0;return{stream:s.pipeThrough(new TransformStream({transform(e,t){var n,r,i,a,s,l,u,c,m,g,y,v,b,w;if(!e.success)return f="error",void t.enqueue({type:"error",error:e.error});const _=e.value;if(null==o||o.processChunk(e.rawValue),"error"in _)return f="error",void t.enqueue({type:"error",error:_.error.message});h&&(h=!1,t.enqueue({type:"response-metadata",...tAt(_)})),null!=_.usage&&(p={promptTokens:null!=(n=_.usage.prompt_tokens)?n:void 0,completionTokens:null!=(r=_.usage.completion_tokens)?r:void 0});const x=_.choices[0];if(null!=(null==x?void 0:x.finish_reason)&&(f=nAt(x.finish_reason)),null==(null==x?void 0:x.delta))return;const E=x.delta;if(null!=E.reasoning_content&&t.enqueue({type:"reasoning",textDelta:E.reasoning_content}),null!=E.content&&t.enqueue({type:"text-delta",textDelta:E.content}),null!=E.tool_calls)for(const o of E.tool_calls){const e=o.index;if(null==d[e]){if("function"!==o.type)throw new HTt({data:o,message:"Expected 'function' type."});if(null==o.id)throw new HTt({data:o,message:"Expected 'id' to be a string."});if(null==(null==(i=o.function)?void 0:i.name))throw new HTt({data:o,message:"Expected 'function.name' to be a string."});d[e]={id:o.id,type:"function",function:{name:o.function.name,arguments:null!=(a=o.function.arguments)?a:""},hasFinished:!1};const n=d[e];null!=(null==(s=n.function)?void 0:s.name)&&null!=(null==(l=n.function)?void 0:l.arguments)&&(n.function.arguments.length>0&&t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:n.function.arguments}),GCt(n.function.arguments)&&(t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(u=n.id)?u:BCt(),toolName:n.function.name,args:n.function.arguments}),n.hasFinished=!0));continue}const n=d[e];n.hasFinished||(null!=(null==(c=o.function)?void 0:c.arguments)&&(n.function.arguments+=null!=(g=null==(m=o.function)?void 0:m.arguments)?g:""),t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.id,toolName:n.function.name,argsTextDelta:null!=(y=o.function.arguments)?y:""}),null!=(null==(v=n.function)?void 0:v.name)&&null!=(null==(b=n.function)?void 0:b.arguments)&&GCt(n.function.arguments)&&(t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:null!=(w=n.id)?w:BCt(),toolName:n.function.name,args:n.function.arguments}),n.hasFinished=!0))}},flush(e){var t,n;const r=null==o?void 0:o.buildMetadata();e.enqueue({type:"finish",finishReason:f,usage:{promptTokens:null!=(t=p.promptTokens)?t:NaN,completionTokens:null!=(n=p.completionTokens)?n:NaN},...r&&{providerMetadata:r}})}})),rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:a},warnings:r,request:{body:i}}}},oAt=oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({message:oA({role:dA("assistant").nullish(),content:XC().nullish(),reasoning_content:XC().nullish(),tool_calls:iA(oA({id:XC().nullish(),type:dA("function"),function:oA({name:XC(),arguments:XC()})})).nullish()}),finish_reason:XC().nullish()})),usage:oA({prompt_tokens:JC().nullish(),completion_tokens:JC().nullish()}).nullish()}),aAt=e=>aA([oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({delta:oA({role:fA(["assistant"]).nullish(),content:XC().nullish(),reasoning_content:XC().nullish(),tool_calls:iA(oA({index:JC(),id:XC().nullish(),type:dA("function").optional(),function:oA({name:XC().nullish(),arguments:XC().nullish()})})).nullish()}).nullish(),finish_reason:XC().nullish()})),usage:oA({prompt_tokens:JC().nullish(),completion_tokens:JC().nullish()}).nullish()}),e]);oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({text:XC(),finish_reason:XC()})),usage:oA({prompt_tokens:JC(),completion_tokens:JC()}).nullish()}),oA({data:iA(oA({embedding:iA(JC())})),usage:oA({prompt_tokens:JC()}).nullish()});var sAt,lAt="vercel.ai.error",uAt=Symbol.for(lAt),cAt=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[sAt]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,lAt)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};sAt=uAt;var dAt,fAt=cAt,pAt="AI_NoSuchModelError",hAt=`vercel.ai.error.${pAt}`,mAt=Symbol.for(hAt),gAt=class extends fAt{constructor({errorName:e=pAt,modelId:t,modelType:n,message:r=`No such ${n}: ${t}`}){super({name:e,message:r}),this[dAt]=!0,this.modelId=t,this.modelType=n}static isInstance(e){return fAt.hasMarker(e,hAt)}};dAt=mAt;var yAt=e=>{var t,n;return null==e?void 0:{deepseek:{promptCacheHitTokens:null!=(t=e.prompt_cache_hit_tokens)?t:NaN,promptCacheMissTokens:null!=(n=e.prompt_cache_miss_tokens)?n:NaN}}},vAt={extractMetadata:({parsedBody:e})=>{const t=HCt({value:e,schema:wAt});return t.success&&null!=t.value.usage?yAt(t.value.usage):void 0},createStreamExtractor:()=>{let e;return{processChunk:t=>{var n,r;const i=HCt({value:t,schema:_At});i.success&&"stop"===(null==(r=null==(n=i.value.choices)?void 0:n[0])?void 0:r.finish_reason)&&i.value.usage&&(e=i.value.usage)},buildMetadata:()=>yAt(e)}}},bAt=oA({prompt_cache_hit_tokens:JC().nullish(),prompt_cache_miss_tokens:JC().nullish()}),wAt=oA({usage:bAt.nullish()}),_At=oA({choices:iA(oA({finish_reason:XC().nullish()})).nullish(),usage:bAt.nullish()});function xAt(e={}){var t;const n=null==(r=null!=(t=e.baseURL)?t:"https://api.deepseek.com/v1")?void 0:r.replace(/\/$/,"");var r;const i=()=>({Authorization:`Bearer ${zCt({apiKey:e.apiKey,environmentVariableName:"DEEPSEEK_API_KEY",description:"DeepSeek API key"})}`,...e.headers}),o=(t,r={})=>new iAt(t,r,{provider:"deepseek.chat",url:({path:e})=>`${n}${e}`,headers:i,fetch:e.fetch,defaultObjectGenerationMode:"json",metadataExtractor:vAt}),a=(e,t)=>o(e,t);return a.languageModel=o,a.chat=o,a.textEmbeddingModel=e=>{throw new gAt({modelId:e,modelType:"textEmbeddingModel"})},a}var EAt=xAt();const SAt=Object.freeze(Object.defineProperty({__proto__:null,createDeepSeek:xAt,deepseek:EAt},Symbol.toStringTag,{value:"Module"}));function kAt(e){if(function(e){return null!=e&&"object"==typeof e&&"object"===e.type&&(null==e.properties||0===Object.keys(e.properties).length)&&!e.additionalProperties}(e))return;if("boolean"==typeof e)return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:i,items:o,allOf:a,anyOf:s,oneOf:l,format:u,const:c,minLength:d,enum:f}=e,p={};if(n&&(p.description=n),r&&(p.required=r),u&&(p.format=u),void 0!==c&&(p.enum=[c]),t&&(Array.isArray(t)?t.includes("null")?(p.type=t.filter(e=>"null"!==e)[0],p.nullable=!0):p.type=t:p.type="null"===t?"null":t),void 0!==f&&(p.enum=f),null!=i&&(p.properties=Object.entries(i).reduce((e,[t,n])=>(e[t]=kAt(n),e),{})),o&&(p.items=Array.isArray(o)?o.map(kAt):kAt(o)),a&&(p.allOf=a.map(kAt)),s)if(s.some(e=>"object"==typeof e&&"null"===(null==e?void 0:e.type))){const e=s.filter(e=>!("object"==typeof e&&"null"===(null==e?void 0:e.type)));if(1===e.length){const t=kAt(e[0]);"object"==typeof t&&(p.nullable=!0,Object.assign(p,t))}else p.anyOf=e.map(kAt),p.nullable=!0}else p.anyOf=s.map(kAt);return l&&(p.oneOf=l.map(kAt)),void 0!==d&&(p.minLength=d),p}function TAt(e){return e.includes("/")?e:`models/${e}`}var CAt=ore({errorSchema:oA({error:oA({code:JC().nullable(),message:XC(),status:XC()})}),errorToMessage:e=>e.error.message});function AAt({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var IAt=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return null==(e=this.settings.structuredOutputs)||e}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:o,frequencyPenalty:a,presencePenalty:s,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var f,p,h;const m=e.type,g=[],y=ere({provider:"google",providerOptions:d,schema:zAt});!0!==(null==(f=null==y?void 0:y.thinkingConfig)?void 0:f.includeThoughts)||this.config.provider.startsWith("google.vertex.")||g.push({type:"other",message:`The 'includeThoughts' option is only supported with the Google Vertex provider and might not be supported or could behave unexpectedly with the current Google provider (${this.config.provider}).`});const v={maxOutputTokens:n,temperature:r,topK:o,topP:i,frequencyPenalty:a,presencePenalty:s,stopSequences:l,seed:c,responseMimeType:"json"===(null==u?void 0:u.type)?"application/json":void 0,responseSchema:"json"===(null==u?void 0:u.type)&&null!=u.schema&&this.supportsStructuredOutputs?kAt(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:null==y?void 0:y.responseModalities,thinkingConfig:null==y?void 0:y.thinkingConfig},{contents:b,systemInstruction:w}=function(e){var t,n;const r=[],i=[];let o=!0;for(const{role:a,content:s}of e)switch(a){case"system":if(!o)throw new Mne({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break;case"user":{o=!1;const e=[];for(const r of s)switch(r.type){case"text":e.push({text:r.text});break;case"image":e.push(r.image instanceof URL?{fileData:{mimeType:null!=(t=r.mimeType)?t:"image/jpeg",fileUri:r.image.toString()}}:{inlineData:{mimeType:null!=(n=r.mimeType)?n:"image/jpeg",data:dre(r.image)}});break;case"file":e.push(r.data instanceof URL?{fileData:{mimeType:r.mimeType,fileUri:r.data.toString()}}:{inlineData:{mimeType:r.mimeType,data:r.data}})}i.push({role:"user",parts:e});break}case"assistant":o=!1,i.push({role:"model",parts:s.map(e=>{switch(e.type){case"text":return 0===e.text.length?void 0:{text:e.text};case"file":if("image/png"!==e.mimeType)throw new Mne({functionality:"Only PNG images are supported in assistant messages"});if(e.data instanceof URL)throw new Mne({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:e.mimeType,data:e.data}};case"tool-call":return{functionCall:{name:e.toolName,args:e.args}}}}).filter(e=>void 0!==e)});break;case"tool":o=!1,i.push({role:"user",parts:s.map(e=>({functionResponse:{name:e.toolName,response:{name:e.toolName,content:e.result}}}))})}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:i}}(t);switch(m){case"regular":{const{tools:t,toolConfig:n,toolWarnings:r}=function(e,t,n,r){var i,o;const a=(null==(i=e.tools)?void 0:i.length)?e.tools:void 0,s=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:u&&n?{dynamicRetrievalConfig:n}:{}},toolConfig:void 0,toolWarnings:s};if(null==a)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const c=[];for(const p of a)"provider-defined"===p.type?s.push({type:"unsupported-tool",tool:p}):c.push({name:p.name,description:null!=(o=p.description)?o:"",parameters:kAt(p.parameters)});const d=e.toolChoice;if(null==d)return{tools:{functionDeclarations:c},toolConfig:void 0,toolWarnings:s};const f=d.type;switch(f){case"auto":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:c},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[d.toolName]}},toolWarnings:s};default:throw new Mne({functionality:`Unsupported tool choice type: ${f}`})}}(e,null!=(p=this.settings.useSearchGrounding)&&p,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:v,contents:b,systemInstruction:w,safetySettings:this.settings.safetySettings,tools:t,toolConfig:n,cachedContent:this.settings.cachedContent},warnings:[...g,...r]}}case"object-json":return{args:{generationConfig:{...v,responseMimeType:"application/json",responseSchema:null!=e.schema&&this.supportsStructuredOutputs?kAt(e.schema):void 0},contents:b,systemInstruction:w,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:g};case"object-tool":return{args:{generationConfig:v,contents:b,systemInstruction:w,tools:{functionDeclarations:[{name:e.tool.name,description:null!=(h=e.tool.description)?h:"",parameters:kAt(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:g};default:throw new Error(`Unsupported type: ${m}`)}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,i,o;const{args:a,warnings:s}=await this.getArgs(e),l=JSON.stringify(a),u=zne(await ire(this.config.headers),e.headers),{responseHeaders:c,value:d,rawValue:f}=await nre({url:`${this.config.baseURL}/${TAt(this.modelId)}:generateContent`,headers:u,body:a,failedResponseHandler:CAt,successfulResponseHandler:sre(BAt),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:p,...h}=a,m=d.candidates[0],g=null!=m.content&&"object"==typeof m.content&&"parts"in m.content?m.content.parts:[],y=OAt({parts:g,generateId:this.config.generateId}),v=d.usageMetadata;return{text:NAt(g),reasoning:DAt(g),files:null==(t=RAt(g))?void 0:t.map(e=>({data:e.inlineData.data,mimeType:e.inlineData.mimeType})),toolCalls:y,finishReason:AAt({finishReason:m.finishReason,hasToolCalls:null!=y&&y.length>0}),usage:{promptTokens:null!=(n=null==v?void 0:v.promptTokenCount)?n:NaN,completionTokens:null!=(r=null==v?void 0:v.candidatesTokenCount)?r:NaN},rawCall:{rawPrompt:p,rawSettings:h},rawResponse:{headers:c,body:f},warnings:s,providerMetadata:{google:{groundingMetadata:null!=(i=m.groundingMetadata)?i:null,safetyRatings:null!=(o=m.safetyRatings)?o:null}},sources:MAt({groundingMetadata:m.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),i=zne(await ire(this.config.headers),e.headers),{responseHeaders:o,value:a}=await nre({url:`${this.config.baseURL}/${TAt(this.modelId)}:streamGenerateContent?alt=sse`,headers:i,body:t,failedResponseHandler:CAt,successfulResponseHandler:are($At),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...l}=t;let u,c="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN};const f=this.config.generateId;let p=!1;return{stream:a.pipeThrough(new TransformStream({transform(e,t){var n,r,i,o,a,s;if(!e.success)return void t.enqueue({type:"error",error:e.error});const l=e.value,h=l.usageMetadata;null!=h&&(d={promptTokens:null!=(n=h.promptTokenCount)?n:NaN,completionTokens:null!=(r=h.candidatesTokenCount)?r:NaN});const m=null==(i=l.candidates)?void 0:i[0];if(null==m)return;const g=m.content;if(null!=g){const e=NAt(g.parts);null!=e&&t.enqueue({type:"text-delta",textDelta:e});const n=DAt(g.parts);if(null!=n)for(const o of n)t.enqueue({type:"reasoning",textDelta:o.text});const r=RAt(g.parts);if(null!=r)for(const o of r)t.enqueue({type:"file",mimeType:o.inlineData.mimeType,data:o.inlineData.data});const i=OAt({parts:g.parts,generateId:f});if(null!=i)for(const o of i)t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:o.toolCallId,toolName:o.toolName,argsTextDelta:o.args}),t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:o.toolCallId,toolName:o.toolName,args:o.args}),p=!0}if(null!=m.finishReason){c=AAt({finishReason:m.finishReason,hasToolCalls:p});const e=null!=(o=MAt({groundingMetadata:m.groundingMetadata,generateId:f}))?o:[];for(const n of e)t.enqueue({type:"source",source:n});u={google:{groundingMetadata:null!=(a=m.groundingMetadata)?a:null,safetyRatings:null!=(s=m.safetyRatings)?s:null}}}},flush(e){e.enqueue({type:"finish",finishReason:c,usage:d,providerMetadata:u})}})),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:o},warnings:n,request:{body:r}}}};function OAt({parts:e,generateId:t}){const n=null==e?void 0:e.filter(e=>"functionCall"in e);return null==n||0===n.length?void 0:n.map(e=>({toolCallType:"function",toolCallId:t(),toolName:e.functionCall.name,args:JSON.stringify(e.functionCall.args)}))}function NAt(e){const t=null==e?void 0:e.filter(e=>"text"in e&&!0!==e.thought);return null==t||0===t.length?void 0:t.map(e=>e.text).join("")}function DAt(e){const t=null==e?void 0:e.filter(e=>"text"in e&&!0===e.thought&&null!=e.text);return null==t||0===t.length?void 0:t.map(e=>({type:"text",text:e.text}))}function RAt(e){return null==e?void 0:e.filter(e=>"inlineData"in e)}function MAt({groundingMetadata:e,generateId:t}){var n;return null==(n=null==e?void 0:e.groundingChunks)?void 0:n.filter(e=>null!=e.web).map(e=>({sourceType:"url",id:t(),url:e.web.uri,title:e.web.title}))}var PAt=oA({parts:iA(aA([oA({functionCall:oA({name:XC(),args:rA()})}),oA({inlineData:oA({mimeType:XC(),data:XC()})}),oA({text:XC().nullish(),thought:eA().nullish()})])).nullish()}),FAt=oA({web:oA({uri:XC(),title:XC()}).nullish(),retrievedContext:oA({uri:XC(),title:XC()}).nullish()}),LAt=oA({webSearchQueries:iA(XC()).nullish(),retrievalQueries:iA(XC()).nullish(),searchEntryPoint:oA({renderedContent:XC()}).nullish(),groundingChunks:iA(FAt).nullish(),groundingSupports:iA(oA({segment:oA({startIndex:JC().nullish(),endIndex:JC().nullish(),text:XC().nullish()}),segment_text:XC().nullish(),groundingChunkIndices:iA(JC()).nullish(),supportChunkIndices:iA(JC()).nullish(),confidenceScores:iA(JC()).nullish(),confidenceScore:iA(JC()).nullish()})).nullish(),retrievalMetadata:aA([oA({webDynamicRetrievalScore:JC()}),oA({})]).nullish()}),jAt=oA({category:XC().nullish(),probability:XC().nullish(),probabilityScore:JC().nullish(),severity:XC().nullish(),severityScore:JC().nullish(),blocked:eA().nullish()}),BAt=oA({candidates:iA(oA({content:PAt.nullish().or(oA({}).strict()),finishReason:XC().nullish(),safetyRatings:iA(jAt).nullish(),groundingMetadata:LAt.nullish()})),usageMetadata:oA({promptTokenCount:JC().nullish(),candidatesTokenCount:JC().nullish(),totalTokenCount:JC().nullish()}).nullish()}),$At=oA({candidates:iA(oA({content:PAt.nullish(),finishReason:XC().nullish(),safetyRatings:iA(jAt).nullish(),groundingMetadata:LAt.nullish()})).nullish(),usageMetadata:oA({promptTokenCount:JC().nullish(),candidatesTokenCount:JC().nullish(),totalTokenCount:JC().nullish()}).nullish()}),zAt=oA({responseModalities:iA(fA(["TEXT","IMAGE"])).nullish(),thinkingConfig:oA({thinkingBudget:JC().nullish(),includeThoughts:eA().nullish()}).nullish()}),UAt=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new Sne({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=zne(await ire(this.config.headers),t),{responseHeaders:i,value:o}=await nre({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(e=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:e}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:CAt,successfulResponseHandler:sre(qAt),abortSignal:n,fetch:this.config.fetch});return{embeddings:o.embeddings.map(e=>e.values),usage:void 0,rawResponse:{headers:i}}}},qAt=oA({embeddings:iA(oA({values:iA(JC())}))});function HAt(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function VAt(e={}){var t;const n=null!=(t=fre(e.baseURL))?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":Gne({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),i=(t,i={})=>{var o;return new IAt(t,i,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:null!=(o=e.generateId)?o:Vne,isSupportedUrl:HAt,fetch:e.fetch})},o=(t,i={})=>new UAt(t,i,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),a=function(e,t){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return i(e,t)};return a.languageModel=i,a.chat=i,a.generativeAI=i,a.embedding=o,a.textEmbedding=o,a.textEmbeddingModel=o,a}var WAt=VAt();const GAt=Object.freeze(Object.defineProperty({__proto__:null,createGoogleGenerativeAI:VAt,google:WAt},Symbol.toStringTag,{value:"Module"})),YAt=Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"}));var KAt,ZAt="vercel.ai.error",QAt=Symbol.for(ZAt),XAt=class e extends Error{constructor({name:e,message:t,cause:n}){super(t),this[KAt]=!0,this.name=e,this.cause=n}static isInstance(t){return e.hasMarker(t,ZAt)}static hasMarker(e,t){const n=Symbol.for(t);return null!=e&&"object"==typeof e&&n in e&&"boolean"==typeof e[n]&&!0===e[n]}};KAt=QAt;var JAt,eIt=XAt,tIt="AI_APICallError",nIt=`vercel.ai.error.${tIt}`,rIt=Symbol.for(nIt),iIt=class extends eIt{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:i,responseBody:o,cause:a,isRetryable:s=null!=r&&(408===r||409===r||429===r||r>=500),data:l}){super({name:tIt,message:e,cause:a}),this[JAt]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=i,this.responseBody=o,this.isRetryable=s,this.data=l}static isInstance(e){return eIt.hasMarker(e,nIt)}};JAt=rIt;var oIt,aIt="AI_EmptyResponseBodyError",sIt=`vercel.ai.error.${aIt}`,lIt=Symbol.for(sIt),uIt=class extends eIt{constructor({message:e="Empty response body"}={}){super({name:aIt,message:e}),this[oIt]=!0}static isInstance(e){return eIt.hasMarker(e,sIt)}};function cIt(e){return null==e?"unknown error":"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}oIt=lIt;var dIt,fIt="AI_InvalidArgumentError",pIt=`vercel.ai.error.${fIt}`,hIt=Symbol.for(pIt),mIt=class extends eIt{constructor({message:e,cause:t,argument:n}){super({name:fIt,message:e,cause:t}),this[dIt]=!0,this.argument=n}static isInstance(e){return eIt.hasMarker(e,pIt)}};dIt=hIt;var gIt,yIt="AI_InvalidPromptError",vIt=`vercel.ai.error.${yIt}`,bIt=Symbol.for(vIt),wIt=class extends eIt{constructor({prompt:e,message:t,cause:n}){super({name:yIt,message:`Invalid prompt: ${t}`,cause:n}),this[gIt]=!0,this.prompt=e}static isInstance(e){return eIt.hasMarker(e,vIt)}};gIt=bIt;var _It,xIt="AI_InvalidResponseDataError",EIt=`vercel.ai.error.${xIt}`,SIt=Symbol.for(EIt),kIt=class extends eIt{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:xIt,message:t}),this[_It]=!0,this.data=e}static isInstance(e){return eIt.hasMarker(e,EIt)}};_It=SIt;var TIt,CIt="AI_JSONParseError",AIt=`vercel.ai.error.${CIt}`,IIt=Symbol.for(AIt),OIt=class extends eIt{constructor({text:e,cause:t}){super({name:CIt,message:`JSON parsing failed: Text: ${e}.\nError message: ${cIt(t)}`,cause:t}),this[TIt]=!0,this.text=e}static isInstance(e){return eIt.hasMarker(e,AIt)}};TIt=IIt;var NIt,DIt="AI_TooManyEmbeddingValuesForCallError",RIt=`vercel.ai.error.${DIt}`,MIt=Symbol.for(RIt),PIt=class extends eIt{constructor(e){super({name:DIt,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[NIt]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return eIt.hasMarker(e,RIt)}};NIt=MIt;var FIt,LIt="AI_TypeValidationError",jIt=`vercel.ai.error.${LIt}`,BIt=Symbol.for(jIt);FIt=BIt;var $It,zIt=class e extends eIt{constructor({value:e,cause:t}){super({name:LIt,message:`Type validation failed: Value: ${JSON.stringify(e)}.\nError message: ${cIt(t)}`,cause:t}),this[FIt]=!0,this.value=e}static isInstance(e){return eIt.hasMarker(e,jIt)}static wrap({value:t,cause:n}){return e.isInstance(n)&&n.value===t?n:new e({value:t,cause:n})}},UIt="AI_UnsupportedFunctionalityError",qIt=`vercel.ai.error.${UIt}`,HIt=Symbol.for(qIt),VIt=class extends eIt{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:UIt,message:t}),this[$It]=!0,this.functionality=e}static isInstance(e){return eIt.hasMarker(e,qIt)}};function WIt(...e){return e.reduce((e,t)=>({...e,...null!=t?t:{}}),{})}function GIt(e){const t={};return e.headers.forEach((e,n)=>{t[n]=e}),t}$It=HIt;var YIt=(({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const i=Pne(n,t);if(null==e)return i;if(n.includes(r))throw new mIt({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return t=>`${e}${r}${i(t)}`})();function KIt(e){return e instanceof Error&&("AbortError"===e.name||"TimeoutError"===e.name)}var ZIt=Symbol.for("vercel.ai.validator");function QIt(e){return function(e){return"object"==typeof e&&null!==e&&ZIt in e&&!0===e[ZIt]&&"validate"in e}(e)?e:(t=e,n=e=>{const n=t.safeParse(e);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}},{[ZIt]:!0,validate:n});var t,n}function XIt({value:e,schema:t}){const n=QIt(t);try{if(null==n.validate)return{success:!0,value:e};const t=n.validate(e);return t.success?t:{success:!1,error:zIt.wrap({value:e,cause:t.error})}}catch(r){return{success:!1,error:zIt.wrap({value:e,cause:r})}}}function JIt({text:e,schema:t}){try{const n=Bne.parse(e);return null==t?n:function({value:e,schema:t}){const n=XIt({value:e,schema:t});if(!n.success)throw zIt.wrap({value:e,cause:n.error});return n.value}({value:n,schema:t})}catch(n){if(OIt.isInstance(n)||zIt.isInstance(n))throw n;throw new OIt({text:e,cause:n})}}function eOt({text:e,schema:t}){try{const n=Bne.parse(e);if(null==t)return{success:!0,value:n,rawValue:n};const r=XIt({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:OIt.isInstance(n)?n:new OIt({text:e,cause:n})}}}var tOt=()=>globalThis.fetch,nOt=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a})=>rOt({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:i,abortSignal:o,fetch:a}),rOt=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:i,abortSignal:o,fetch:a=tOt()})=>{try{const u=await a(e,{method:"POST",headers:(s=t,Object.fromEntries(Object.entries(s).filter(([e,t])=>null!=t))),body:n.content,signal:o}),c=GIt(u);if(!u.ok){let t;try{t=await i({response:u,url:e,requestBodyValues:n.values})}catch(l){if(KIt(l)||iIt.isInstance(l))throw l;throw new iIt({message:"Failed to process error response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}throw t.value}try{return await r({response:u,url:e,requestBodyValues:n.values})}catch(l){if(l instanceof Error&&(KIt(l)||iIt.isInstance(l)))throw l;throw new iIt({message:"Failed to process successful response",cause:l,statusCode:u.status,url:e,responseHeaders:c,requestBodyValues:n.values})}}catch(l){if(KIt(l))throw l;if(l instanceof TypeError&&"fetch failed"===l.message){const t=l.cause;if(null!=t)throw new iIt({message:`Cannot connect to API: ${t.message}`,cause:t,url:e,requestBodyValues:n.values,isRetryable:!0})}throw l}var s},iOt=e=>async({response:t,url:n,requestBodyValues:r})=>{const i=await t.text(),o=eOt({text:i,schema:e}),a=GIt(t);if(!o.success)throw new iIt({message:"Invalid JSON response",cause:o.error,statusCode:t.status,responseHeaders:a,responseBody:i,url:n,requestBodyValues:r});return{responseHeaders:a,value:o.value,rawValue:o.rawValue}},{btoa:oOt}=globalThis;function aOt(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return oOt(t)}function sOt({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[];for(const{role:i,content:o}of e)switch(i){case"system":switch(n){case"system":r.push({role:"system",content:o});break;case"developer":r.push({role:"developer",content:o});break;case"remove":break;default:throw new Error(`Unsupported system message mode: ${n}`)}break;case"user":if(1===o.length&&"text"===o[0].type){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map(e=>{var t,n,r;switch(e.type){case"text":return{type:"text",text:e.text};case"image":return{type:"image_url",image_url:{url:e.image instanceof URL?e.image.toString():`data:${null!=(t=e.mimeType)?t:"image/jpeg"};base64,${aOt(e.image)}`,detail:null==(r=null==(n=e.providerMetadata)?void 0:n.ollama)?void 0:r.imageDetail}};case"file":if(e.data instanceof URL)throw new VIt({functionality:"'File content parts with URL data' functionality not supported."});switch(e.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:e.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:e.data,format:"mp3"}};default:throw new VIt({functionality:`File content part type ${e.mimeType} in user messages`})}}})});break;case"assistant":{let e="";const n=[];for(const t of o)switch(t.type){case"text":e+=t.text;break;case"tool-call":n.push({id:t.toolCallId,type:"function",function:{name:t.toolName,arguments:t.args}});break;default:throw new Error(`Unsupported part: ${t}`)}if(t){if(n.length>1)throw new VIt({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:e,function_call:n.length>0?n[0].function:void 0})}else r.push({role:"assistant",content:e,tool_calls:n.length>0?n:void 0});break}case"tool":for(const e of o)t?r.push({role:"function",name:e.toolName,content:JSON.stringify(e.result)}):r.push({role:"tool",tool_call_id:e.toolCallId,content:JSON.stringify(e.result)});break;default:throw new Error(`Unsupported role: ${i}`)}return r}function lOt(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var uOt=oA({error:oA({message:XC(),type:XC().nullish(),param:nA().nullish(),code:aA([XC(),JC()]).nullish()})}),cOt=(({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:i,requestBodyValues:o})=>{const a=await r.text(),s=GIt(r);if(""===a.trim())return{responseHeaders:s,value:new iIt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})};try{const l=JIt({text:a,schema:e});return{responseHeaders:s,value:new iIt({message:t(l),url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,data:l,isRetryable:null==n?void 0:n(r,l)})}}catch(l){return{responseHeaders:s,value:new iIt({message:r.statusText,url:i,requestBodyValues:o,statusCode:r.status,responseHeaders:s,responseBody:a,isRetryable:null==n?void 0:n(r)})}}})({errorSchema:uOt,errorToMessage:e=>e.error.message});function dOt({model:e,created_at:t}){return{id:void 0,modelId:null!=e?e:void 0,timestamp:null!=t?new Date(t):void 0}}var fOt=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return null!=(e=this.settings.structuredOutputs)?e:hOt(this.modelId)}get defaultObjectGenerationMode(){return this.modelId.startsWith("gpt-4o-audio-preview")?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:i,topK:o,frequencyPenalty:a,presencePenalty:s,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var f,p,h,m,g,y,v,b;const w=e.type,_=[];null!=o&&_.push({type:"unsupported-setting",setting:"topK"}),"json"!==(null==u?void 0:u.type)||null==u.schema||this.supportsStructuredOutputs||_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const x=this.settings.useLegacyFunctionCalling;if(x&&!0===this.settings.parallelToolCalls)throw new VIt({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(x&&this.supportsStructuredOutputs)throw new VIt({functionality:"structuredOutputs with useLegacyFunctionCalling"});"remove"===mOt(this.modelId)&&t.some(e=>"system"===e.role)&&_.push({type:"other",message:"system messages are removed for this model"});const E={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:!0===this.settings.logprobs||"number"==typeof this.settings.logprobs||void 0,top_logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:i,think:this.settings.think,frequency_penalty:a,presence_penalty:s,response_format:"json"===(null==u?void 0:u.type)?this.supportsStructuredOutputs&&null!=u.schema?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:null!=(f=u.name)?f:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:c,max_completion_tokens:null==(p=null==d?void 0:d.ollama)?void 0:p.maxCompletionTokens,store:null==(h=null==d?void 0:d.ollama)?void 0:h.store,metadata:null==(m=null==d?void 0:d.ollama)?void 0:m.metadata,prediction:null==(g=null==d?void 0:d.ollama)?void 0:g.prediction,reasoning_effort:null!=(v=null==(y=null==d?void 0:d.ollama)?void 0:y.reasoningEffort)?v:this.settings.reasoningEffort,messages:sOt({prompt:t,useLegacyFunctionCalling:x,systemMessageMode:mOt(this.modelId)})};switch(hOt(this.modelId)&&(null!=E.temperature&&(E.temperature=void 0,_.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),null!=E.top_p&&(E.top_p=void 0,_.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),null!=E.frequency_penalty&&(E.frequency_penalty=void 0,_.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),null!=E.presence_penalty&&(E.presence_penalty=void 0,_.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),null!=E.logit_bias&&(E.logit_bias=void 0,_.push({type:"other",message:"logitBias is not supported for reasoning models"})),null!=E.logprobs&&(E.logprobs=void 0,_.push({type:"other",message:"logprobs is not supported for reasoning models"})),null!=E.top_logprobs&&(E.top_logprobs=void 0,_.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),null!=E.max_tokens&&(null==E.max_completion_tokens&&(E.max_completion_tokens=E.max_tokens),E.max_tokens=void 0)),w){case"regular":{const{tools:t,tool_choice:n,functions:r,function_call:i,toolWarnings:o}=function({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const i=(null==(r=e.tools)?void 0:r.length)?e.tools:void 0,o=[];if(null==i)return{tools:void 0,tool_choice:void 0,toolWarnings:o};const a=e.toolChoice;if(t){const e=[];for(const t of i)"provider-defined"===t.type?o.push({type:"unsupported-tool",tool:t}):e.push({name:t.name,description:t.description,parameters:t.parameters});if(null==a)return{functions:e,function_call:void 0,toolWarnings:o};switch(a.type){case"auto":case"none":case void 0:return{functions:e,function_call:void 0,toolWarnings:o};case"required":throw new VIt({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:e,function_call:{name:a.toolName},toolWarnings:o}}}const s=[];for(const u of i)"provider-defined"===u.type?o.push({type:"unsupported-tool",tool:u}):s.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:!!n||void 0}});if(null==a)return{tools:s,tool_choice:void 0,toolWarnings:o};const l=a.type;switch(l){case"auto":case"none":case"required":return{tools:s,tool_choice:l,toolWarnings:o};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:a.toolName}},toolWarnings:o};default:throw new VIt({functionality:`Unsupported tool choice type: ${l}`})}}({mode:e,useLegacyFunctionCalling:x,structuredOutputs:this.supportsStructuredOutputs});return{args:{...E,tools:t,tool_choice:n,functions:r,function_call:i},warnings:[..._,...o]}}case"object-json":return{args:{...E,response_format:this.supportsStructuredOutputs&&null!=e.schema?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:null!=(b=e.name)?b:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:x?{...E,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...E,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:!!this.supportsStructuredOutputs||void 0}}]},warnings:_};default:throw new Error(`Unsupported type: ${w}`)}}async doGenerate(e){var t,n,r,i;const{args:o,warnings:a}=this.getArgs(e),{responseHeaders:s,value:l}=await nOt({url:this.config.url({path:"/chat",modelId:this.modelId}),headers:WIt(this.config.headers(),e.headers),body:{...o,stream:!1},failedResponseHandler:cOt,successfulResponseHandler:iOt(pOt),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:u,...c}=o;return{text:null!=(t=l.message.content)?t:void 0,toolCalls:null==(n=l.message.tool_calls)?void 0:n.map(e=>{var t;return{toolCallType:"function",toolCallId:null!=(t=e.id)?t:YIt(),toolName:e.function.name,args:JSON.stringify(e.function.arguments)}}),finishReason:lOt(l.done_reason),usage:{promptTokens:null!=(r=l.prompt_eval_count)?r:NaN,completionTokens:null!=(i=l.eval_count)?i:NaN},rawCall:{rawPrompt:u,rawSettings:c},rawResponse:{headers:s},request:{body:JSON.stringify(o)},response:dOt(l),warnings:a,logprobs:void 0,providerMetadata:{ollama:{}}}}async doStream(e){var t;if(null!=(t=this.settings.simulateStreaming)?t:function(e){var t,n;if(!hOt(e))return!1;return null==(n=null==(t=gOt[e])?void 0:t.simulateStreamingByDefault)||n}(this.modelId)){const t=await this.doGenerate(e);return{stream:new ReadableStream({start(e){if(e.enqueue({type:"response-metadata",...t.response}),t.text&&e.enqueue({type:"text-delta",textDelta:t.text}),t.toolCalls)for(const n of t.toolCalls)e.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:n.toolCallId,toolName:n.toolName,argsTextDelta:n.args}),e.enqueue({type:"tool-call",...n});e.enqueue({type:"finish",finishReason:t.finishReason,usage:t.usage,logprobs:t.logprobs,providerMetadata:t.providerMetadata}),e.close()}}),rawCall:t.rawCall,rawResponse:t.rawResponse,warnings:t.warnings}}const{args:n,warnings:r}=this.getArgs(e),i={...n,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:o,value:a}=await nOt({url:this.config.url({path:"/chat",modelId:this.modelId}),headers:WIt(this.config.headers(),e.headers),body:i,failedResponseHandler:cOt,successfulResponseHandler:(s=pOt,async({response:e})=>{const t=GIt(e);if(null==e.body)throw new uIt({});let n="";return{responseHeaders:t,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform(e,t){e.endsWith("\n")?(t.enqueue(eOt({text:n+e,schema:s})),n=""):n+=e}}))}}),abortSignal:e.abortSignal,fetch:this.config.fetch});var s;const{messages:l,...u}=n;let c="unknown",d={promptTokens:void 0,completionTokens:void 0},f=!0;return{stream:a.pipeThrough(new TransformStream({flush(e){var t,n;e.enqueue({type:"finish",finishReason:c,usage:{promptTokens:null!=(t=d.promptTokens)?t:NaN,completionTokens:null!=(n=d.completionTokens)?n:NaN}})},transform(e,t){var n,r,i,o,a;if(!e.success){try{const n=e.error.text;return void n.split("\n").forEach(e=>{if(""===e.trim())return;const n=JSON.parse(e);t.enqueue({type:"text-delta",textDelta:n.message.content})})}catch(F0){}return c="error",void t.enqueue({type:"error",error:e.error})}const s=e.value;if("error"in s)return c="error",void t.enqueue({type:"error",error:s.error});f&&(f=!1,t.enqueue({type:"response-metadata",...dOt(s)})),s.done&&(c=lOt(s.done_reason),d={promptTokens:s.prompt_eval_count||0,completionTokens:null!=(n=s.eval_count)?n:void 0});const l=null==s?void 0:s.message;null!=(null==l?void 0:l.content)&&t.enqueue({type:"text-delta",textDelta:l.content});for(const u of null!=(r=l.tool_calls)?r:[]){if(null==(null==(i=u.function)?void 0:i.name))throw new kIt({data:u,message:"Expected 'function.name' to be a string."});if(null!=(null==(o=u.function)?void 0:o.name)&&null!=(null==(a=u.function)?void 0:a.arguments)&&Object.keys(u.function.arguments).length>0){const e=YIt();t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e,toolName:u.function.name,argsTextDelta:JSON.stringify(u.function.arguments)}),t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e,toolName:u.function.name,args:JSON.stringify(u.function.arguments)})}}}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},request:{body:JSON.stringify(i)},warnings:r}}};oA({prompt_tokens:JC().nullish(),completion_tokens:JC().nullish(),prompt_tokens_details:oA({cached_tokens:JC().nullish()}).nullish(),completion_tokens_details:oA({reasoning_tokens:JC().nullish(),accepted_prediction_tokens:JC().nullish(),rejected_prediction_tokens:JC().nullish()}).nullish()}).nullish();var pOt=oA({model:XC(),created_at:XC(),done:eA(),message:oA({content:XC(),role:XC(),tool_calls:iA(oA({function:oA({name:XC(),arguments:uA(nA())}),id:XC().optional()})).optional().nullable()}),done_reason:XC().optional(),eval_count:JC().optional(),eval_duration:JC().optional(),load_duration:JC().optional(),prompt_eval_count:JC().optional(),prompt_eval_duration:JC().optional(),total_duration:JC().optional()});function hOt(e){return"o1"===e||e.startsWith("o1-")||"o3"===e||e.startsWith("o3-")}function mOt(e){var t,n;return hOt(e)?null!=(n=null==(t=gOt[e])?void 0:t.systemMessageMode)?n:"developer":"system"}var gOt={"o1-mini":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-mini-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview":{systemMessageMode:"remove",simulateStreamingByDefault:!1},"o1-preview-2024-09-12":{systemMessageMode:"remove",simulateStreamingByDefault:!1}};var yOt=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:i,topP:o,topK:a,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:c,seed:d}){var f;const p=e.type,h=[];null!=a&&h.push({type:"unsupported-setting",setting:"topK"}),null!=c&&"text"!==c.type&&h.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:m,stopSequences:g}=function({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if("prompt"===t&&1===e.length&&"user"===e[0].role&&1===e[0].content.length&&"text"===e[0].content[0].type)return{prompt:e[0].content[0].text};let i="";"system"===e[0].role&&(i+=`${e[0].content}\n\n`,e=e.slice(1));for(const{role:o,content:a}of e)switch(o){case"system":throw new wIt({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":i+=`${n}:\n${a.map(e=>{switch(e.type){case"text":return e.text;case"image":throw new VIt({functionality:"images"})}}).join("")}\n\n`;break;case"assistant":i+=`${r}:\n${a.map(e=>{switch(e.type){case"text":return e.text;case"tool-call":throw new VIt({functionality:"tool-call messages"})}}).join("")}\n\n`;break;case"tool":throw new VIt({functionality:"tool messages"});default:throw new Error(`Unsupported role: ${o}`)}return i+=`${r}:\n`,{prompt:i,stopSequences:[`\n${n}:`]}}({prompt:n,inputFormat:t}),y=[...null!=g?g:[],...null!=u?u:[]],v={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:"number"==typeof this.settings.logprobs?this.settings.logprobs:"boolean"==typeof this.settings.logprobs&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:i,top_p:o,think:this.settings.think,frequency_penalty:s,presence_penalty:l,seed:d,prompt:m,stop:y.length>0?y:void 0};switch(p){case"regular":if(null==(f=e.tools)?void 0:f.length)throw new VIt({functionality:"tools"});if(e.toolChoice)throw new VIt({functionality:"toolChoice"});return{args:v,warnings:h};case"object-json":throw new VIt({functionality:"object-json mode"});case"object-tool":throw new VIt({functionality:"object-tool mode"});default:throw new Error(`Unsupported type: ${p}`)}}async doGenerate(e){var t,n;const{args:r,warnings:i}=this.getArgs(e),{responseHeaders:o,value:a}=await nOt({url:this.config.url({path:"/generate",modelId:this.modelId}),headers:WIt(this.config.headers(),e.headers),body:{args:r,stream:!1},failedResponseHandler:cOt,successfulResponseHandler:iOt(vOt),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...l}=r;return{text:a.response,usage:{promptTokens:null!=(t=a.prompt_eval_count)?t:0,completionTokens:null!=(n=a.eval_count)?n:0},finishReason:lOt("stop"),logprobs:(u=null,null==u?void 0:u.tokens.map((e,t)=>({token:e,logprob:u.token_logprobs[t],topLogprobs:u.top_logprobs?Object.entries(u.top_logprobs[t]).map(([e,t])=>({token:e,logprob:t})):[]}))),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:o},response:dOt(a),warnings:i,request:{body:JSON.stringify(r)}};var u}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:"strict"===this.config.compatibility?{include_usage:!0}:void 0},{responseHeaders:i,value:o}=await nOt({url:this.config.url({path:"/generate",modelId:this.modelId}),headers:WIt(this.config.headers(),e.headers),body:r,failedResponseHandler:cOt,successfulResponseHandler:(a=vOt,async({response:e})=>{const t=GIt(e);if(null==e.body)throw new uIt({});return{responseHeaders:t,value:e.body.pipeThrough(new TextDecoderStream).pipeThrough(new PCt).pipeThrough(new TransformStream({transform({data:e},t){"[DONE]"!==e&&t.enqueue(eOt({text:e,schema:a}))}}))}}),abortSignal:e.abortSignal,fetch:this.config.fetch});var a;const{prompt:s,...l}=t;let u="unknown",c={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:o.pipeThrough(new TransformStream({transform(e,t){if(!e.success)return u="error",void t.enqueue({type:"error",error:e.error});const n=e.value;if("error"in n)return u="error",void t.enqueue({type:"error",error:n.error});d&&(d=!1,t.enqueue({type:"response-metadata",...dOt(n)})),n.done&&(u=lOt("stop")),null!=n.response&&t.enqueue({type:"text-delta",textDelta:n.response})},flush(e){e.enqueue({type:"finish",finishReason:u,logprobs:undefined,usage:c})}})),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:JSON.stringify(r)}}}},vOt=oA({model:XC(),created_at:XC(),response:XC(),done:eA(),context:iA(JC()),eval_count:JC().optional(),eval_duration:JC().optional(),load_duration:JC().optional(),total_duration:JC().optional(),prompt_eval_count:JC().optional(),prompt_eval_duration:JC().optional()});oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({text:XC(),finish_reason:XC(),logprobs:oA({tokens:iA(XC()),token_logprobs:iA(JC()),top_logprobs:iA(uA(XC(),JC())).nullable()}).nullish()})),usage:oA({prompt_tokens:JC(),completion_tokens:JC()})}),aA([oA({id:XC().nullish(),created:JC().nullish(),model:XC().nullish(),choices:iA(oA({text:XC(),finish_reason:XC().nullish(),index:JC(),logprobs:oA({tokens:iA(XC()),token_logprobs:iA(JC()),top_logprobs:iA(uA(XC(),JC())).nullable()}).nullish()})),usage:oA({prompt_tokens:JC(),completion_tokens:JC()}).nullish()}),uOt]);var bOt=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return null!=(e=this.settings.maxEmbeddingsPerCall)?e:2048}get supportsParallelCalls(){var e;return null==(e=this.settings.supportsParallelCalls)||e}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new PIt({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:i}=await nOt({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:WIt(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:cOt,successfulResponseHandler:iOt(wOt),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(e=>e.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},wOt=oA({data:iA(oA({embedding:iA(JC())})),usage:oA({prompt_tokens:JC()}).nullish()}),_Ot={"dall-e-3":1,"dall-e-2":10},xOt=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return null!=(t=null!=(e=this.settings.maxImagesPerCall)?e:_Ot[this.modelId])?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:i,providerOptions:o,headers:a,abortSignal:s}){var l,u,c,d;const f=[];null!=r&&f.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),null!=i&&f.push({type:"unsupported-setting",setting:"seed"});const p=null!=(c=null==(u=null==(l=this.config._internal)?void 0:l.currentDate)?void 0:u.call(l))?c:new Date,{value:h,responseHeaders:m}=await nOt({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:WIt(this.config.headers(),a),body:{model:this.modelId,prompt:e,n:t,size:n,...null!=(d=o.ollama)?d:{},response_format:"b64_json"},failedResponseHandler:cOt,successfulResponseHandler:iOt(EOt),abortSignal:s,fetch:this.config.fetch});return{images:h.data.map(e=>e.b64_json),warnings:f,response:{timestamp:p,modelId:this.modelId,headers:m}}}},EOt=oA({data:iA(oA({b64_json:XC()}))});function SOt(e={}){var t,n,r;const i=null!=(t=null==(o=e.baseURL)?void 0:o.replace(/\/$/,""))?t:"http://127.0.0.1:11434/api";var o;const a=null!=(n=e.compatibility)?n:"compatible",s=null!=(r=e.name)?r:"ollama",l=()=>({"Ollama-Organization":e.organization,"Ollama-Project":e.project,...e.headers}),u=(t,n={})=>new fOt(t,n,{provider:`${s}.chat`,url:({path:e})=>`${i}${e}`,headers:l,compatibility:a,fetch:e.fetch}),c=(t,n={})=>new yOt(t,n,{provider:`${s}.completion`,url:({path:e})=>`${i}${e}`,headers:l,compatibility:a,fetch:e.fetch}),d=(t,n={})=>new bOt(t,n,{provider:`${s}.embedding`,url:({path:e})=>`${i}${e}`,headers:l,fetch:e.fetch}),f=(t,n={})=>new xOt(t,n,{provider:`${s}.image`,url:({path:e})=>`${i}${e}`,headers:l,fetch:e.fetch}),p=(e,t)=>{if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return"gpt-3.5-turbo-instruct"===e?c(e,t):u(e,t)},h=function(e,t){return p(e,t)};return h.languageModel=p,h.chat=u,h.completion=c,h.embedding=d,h.textEmbedding=d,h.textEmbeddingModel=d,h.image=f,h.imageModel=f,h}var kOt=SOt({compatibility:"strict"});const TOt=Object.freeze(Object.defineProperty({__proto__:null,createOllama:SOt,ollama:kOt},Symbol.toStringTag,{value:"Module"}));var COt=ore({errorSchema:oA({type:dA("error"),error:oA({type:XC(),message:XC()})}),errorToMessage:e=>e.error.message});function AOt({prompt:e,sendReasoning:t,warnings:n}){var r,i,o,a;const s=new Set,l=function(e){const t=[];let n;for(const r of e){const{role:e}=r;switch(e){case"system":"system"!==(null==n?void 0:n.type)&&(n={type:"system",messages:[]},t.push(n)),n.messages.push(r);break;case"assistant":"assistant"!==(null==n?void 0:n.type)&&(n={type:"assistant",messages:[]},t.push(n)),n.messages.push(r);break;case"user":case"tool":"user"!==(null==n?void 0:n.type)&&(n={type:"user",messages:[]},t.push(n)),n.messages.push(r);break;default:throw new Error(`Unsupported role: ${e}`)}}return t}(e);let u;const c=[];function d(e){var t;const n=null==e?void 0:e.anthropic;return null!=(t=null==n?void 0:n.cacheControl)?t:null==n?void 0:n.cache_control}for(let f=0;f<l.length;f++){const e=l[f],p=f===l.length-1,h=e.type;switch(h){case"system":if(null!=u)throw new Mne({functionality:"Multiple system messages that are separated by user/assistant messages"});u=e.messages.map(({content:e,providerMetadata:t})=>({type:"text",text:e,cache_control:d(t)}));break;case"user":{const t=[];for(const n of e.messages){const{role:e,content:a}=n;switch(e){case"user":for(let e=0;e<a.length;e++){const o=a[e],l=e===a.length-1,u=null!=(r=d(o.providerMetadata))?r:l?d(n.providerMetadata):void 0;switch(o.type){case"text":t.push({type:"text",text:o.text,cache_control:u});break;case"image":t.push({type:"image",source:o.image instanceof URL?{type:"url",url:o.image.toString()}:{type:"base64",media_type:null!=(i=o.mimeType)?i:"image/jpeg",data:dre(o.image)},cache_control:u});break;case"file":if("application/pdf"!==o.mimeType)throw new Mne({functionality:"Non-PDF files in user messages"});s.add("pdfs-2024-09-25"),t.push({type:"document",source:o.data instanceof URL?{type:"url",url:o.data.toString()}:{type:"base64",media_type:"application/pdf",data:o.data},cache_control:u})}}break;case"tool":for(let e=0;e<a.length;e++){const r=a[e],i=e===a.length-1,s=null!=(o=d(r.providerMetadata))?o:i?d(n.providerMetadata):void 0,l=null!=r.content?r.content.map(e=>{var t;switch(e.type){case"text":return{type:"text",text:e.text,cache_control:void 0};case"image":return{type:"image",source:{type:"base64",media_type:null!=(t=e.mimeType)?t:"image/jpeg",data:e.data},cache_control:void 0}}}):JSON.stringify(r.result);t.push({type:"tool_result",tool_use_id:r.toolCallId,content:l,is_error:r.isError,cache_control:s})}break;default:throw new Error(`Unsupported role: ${e}`)}}c.push({role:"user",content:t});break}case"assistant":{const r=[];for(let i=0;i<e.messages.length;i++){const o=e.messages[i],s=i===e.messages.length-1,{content:l}=o;for(let e=0;e<l.length;e++){const i=l[e],u=e===l.length-1,c=null!=(a=d(i.providerMetadata))?a:u?d(o.providerMetadata):void 0;switch(i.type){case"text":r.push({type:"text",text:p&&s&&u?i.text.trim():i.text,cache_control:c});break;case"reasoning":t?r.push({type:"thinking",thinking:i.text,signature:i.signature,cache_control:c}):n.push({type:"other",message:"sending reasoning content is disabled for this model"});break;case"redacted-reasoning":r.push({type:"redacted_thinking",data:i.data,cache_control:c});break;case"tool-call":r.push({type:"tool_use",id:i.toolCallId,name:i.toolName,input:i.args,cache_control:c})}}}c.push({role:"assistant",content:r});break}default:throw new Error(`Unsupported type: ${h}`)}}return{prompt:{system:u,messages:c},betas:s}}function IOt(e){switch(e){case"end_turn":case"stop_sequence":return"stop";case"tool_use":return"tool-calls";case"max_tokens":return"length";default:return"unknown"}}var OOt=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}supportsUrl(e){return"https:"===e.protocol}get provider(){return this.config.provider}get supportsImageUrls(){return this.config.supportsImageUrls}async getArgs({mode:e,prompt:t,maxTokens:n=4096,temperature:r,topP:i,topK:o,frequencyPenalty:a,presencePenalty:s,stopSequences:l,responseFormat:u,seed:c,providerMetadata:d}){var f,p,h;const m=e.type,g=[];null!=a&&g.push({type:"unsupported-setting",setting:"frequencyPenalty"}),null!=s&&g.push({type:"unsupported-setting",setting:"presencePenalty"}),null!=c&&g.push({type:"unsupported-setting",setting:"seed"}),null!=u&&"text"!==u.type&&g.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:y,betas:v}=AOt({prompt:t,sendReasoning:null==(f=this.settings.sendReasoning)||f,warnings:g}),b=ere({provider:"anthropic",providerOptions:d,schema:ROt}),w="enabled"===(null==(p=null==b?void 0:b.thinking)?void 0:p.type),_=null==(h=null==b?void 0:b.thinking)?void 0:h.budgetTokens,x={model:this.modelId,max_tokens:n,temperature:r,top_k:o,top_p:i,stop_sequences:l,...w&&{thinking:{type:"enabled",budget_tokens:_}},system:y.system,messages:y.messages};if(w){if(null==_)throw new Mne({functionality:"thinking requires a budget"});null!=x.temperature&&(x.temperature=void 0,g.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported when thinking is enabled"})),null!=o&&(x.top_k=void 0,g.push({type:"unsupported-setting",setting:"topK",details:"topK is not supported when thinking is enabled"})),null!=i&&(x.top_p=void 0,g.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported when thinking is enabled"})),x.max_tokens=n+_}switch(m){case"regular":{const{tools:t,tool_choice:n,toolWarnings:r,betas:i}=function(e){var t;const n=(null==(t=e.tools)?void 0:t.length)?e.tools:void 0,r=[],i=new Set;if(null==n)return{tools:void 0,tool_choice:void 0,toolWarnings:r,betas:i};const o=[];for(const l of n)switch(l.type){case"function":o.push({name:l.name,description:l.description,input_schema:l.parameters});break;case"provider-defined":switch(l.id){case"anthropic.computer_20250124":i.add("computer-use-2025-01-24"),o.push({name:l.name,type:"computer_20250124",display_width_px:l.args.displayWidthPx,display_height_px:l.args.displayHeightPx,display_number:l.args.displayNumber});break;case"anthropic.computer_20241022":i.add("computer-use-2024-10-22"),o.push({name:l.name,type:"computer_20241022",display_width_px:l.args.displayWidthPx,display_height_px:l.args.displayHeightPx,display_number:l.args.displayNumber});break;case"anthropic.text_editor_20250124":i.add("computer-use-2025-01-24"),o.push({name:l.name,type:"text_editor_20250124"});break;case"anthropic.text_editor_20241022":i.add("computer-use-2024-10-22"),o.push({name:l.name,type:"text_editor_20241022"});break;case"anthropic.bash_20250124":i.add("computer-use-2025-01-24"),o.push({name:l.name,type:"bash_20250124"});break;case"anthropic.bash_20241022":i.add("computer-use-2024-10-22"),o.push({name:l.name,type:"bash_20241022"});break;default:r.push({type:"unsupported-tool",tool:l})}break;default:r.push({type:"unsupported-tool",tool:l})}const a=e.toolChoice;if(null==a)return{tools:o,tool_choice:void 0,toolWarnings:r,betas:i};const s=a.type;switch(s){case"auto":return{tools:o,tool_choice:{type:"auto"},toolWarnings:r,betas:i};case"required":return{tools:o,tool_choice:{type:"any"},toolWarnings:r,betas:i};case"none":return{tools:void 0,tool_choice:void 0,toolWarnings:r,betas:i};case"tool":return{tools:o,tool_choice:{type:"tool",name:a.toolName},toolWarnings:r,betas:i};default:throw new Mne({functionality:`Unsupported tool choice type: ${s}`})}}(e);return{args:{...x,tools:t,tool_choice:n},warnings:[...g,...r],betas:new Set([...v,...i])}}case"object-json":throw new Mne({functionality:"json-mode object generation"});case"object-tool":{const{name:t,description:n,parameters:r}=e.tool;return{args:{...x,tools:[{name:t,description:n,input_schema:r}],tool_choice:{type:"tool",name:t}},warnings:g,betas:v}}default:throw new Error(`Unsupported type: ${m}`)}}async getHeaders({betas:e,headers:t}){return zne(await ire(this.config.headers),e.size>0?{"anthropic-beta":Array.from(e).join(",")}:{},t)}buildRequestUrl(e){var t,n,r;return null!=(r=null==(n=(t=this.config).buildRequestUrl)?void 0:n.call(t,this.config.baseURL,e))?r:`${this.config.baseURL}/messages`}transformRequestBody(e){var t,n,r;return null!=(r=null==(n=(t=this.config).transformRequestBody)?void 0:n.call(t,e))?r:e}async doGenerate(e){var t,n,r,i;const{args:o,warnings:a,betas:s}=await this.getArgs(e),{responseHeaders:l,value:u,rawValue:c}=await nre({url:this.buildRequestUrl(!1),headers:await this.getHeaders({betas:s,headers:e.headers}),body:this.transformRequestBody(o),failedResponseHandler:COt,successfulResponseHandler:sre(NOt),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:d,...f}=o;let p,h="";for(const g of u.content)"text"===g.type&&(h+=g.text);if(u.content.some(e=>"tool_use"===e.type)){p=[];for(const e of u.content)"tool_use"===e.type&&p.push({toolCallType:"function",toolCallId:e.id,toolName:e.name,args:JSON.stringify(e.input)})}const m=u.content.filter(e=>"redacted_thinking"===e.type||"thinking"===e.type).map(e=>"thinking"===e.type?{type:"text",text:e.thinking,signature:e.signature}:{type:"redacted",data:e.data});return{text:h,reasoning:m.length>0?m:void 0,toolCalls:p,finishReason:IOt(u.stop_reason),usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:d,rawSettings:f},rawResponse:{headers:l,body:c},response:{id:null!=(t=u.id)?t:void 0,modelId:null!=(n=u.model)?n:void 0},warnings:a,providerMetadata:{anthropic:{cacheCreationInputTokens:null!=(r=u.usage.cache_creation_input_tokens)?r:null,cacheReadInputTokens:null!=(i=u.usage.cache_read_input_tokens)?i:null}},request:{body:JSON.stringify(o)}}}async doStream(e){const{args:t,warnings:n,betas:r}=await this.getArgs(e),i={...t,stream:!0},{responseHeaders:o,value:a}=await nre({url:this.buildRequestUrl(!0),headers:await this.getHeaders({betas:r,headers:e.headers}),body:this.transformRequestBody(i),failedResponseHandler:COt,successfulResponseHandler:are(DOt),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...l}=t;let u="unknown";const c={promptTokens:Number.NaN,completionTokens:Number.NaN},d={};let f,p;return{stream:a.pipeThrough(new TransformStream({transform(e,t){var n,r,i,o;if(!e.success)return void t.enqueue({type:"error",error:e.error});const a=e.value;switch(a.type){case"ping":return;case"content_block_start":{const e=a.content_block.type;switch(p=e,e){case"text":case"thinking":return;case"redacted_thinking":return void t.enqueue({type:"redacted-reasoning",data:a.content_block.data});case"tool_use":return void(d[a.index]={toolCallId:a.content_block.id,toolName:a.content_block.name,jsonText:""});default:throw new Error(`Unsupported content block type: ${e}`)}}case"content_block_stop":if(null!=d[a.index]){const e=d[a.index];t.enqueue({type:"tool-call",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,args:e.jsonText}),delete d[a.index]}return void(p=void 0);case"content_block_delta":{const e=a.delta.type;switch(e){case"text_delta":return void t.enqueue({type:"text-delta",textDelta:a.delta.text});case"thinking_delta":return void t.enqueue({type:"reasoning",textDelta:a.delta.thinking});case"signature_delta":return void("thinking"===p&&t.enqueue({type:"reasoning-signature",signature:a.delta.signature}));case"input_json_delta":{const e=d[a.index];return t.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:e.toolCallId,toolName:e.toolName,argsTextDelta:a.delta.partial_json}),void(e.jsonText+=a.delta.partial_json)}default:throw new Error(`Unsupported delta type: ${e}`)}}case"message_start":return c.promptTokens=a.message.usage.input_tokens,c.completionTokens=a.message.usage.output_tokens,f={anthropic:{cacheCreationInputTokens:null!=(n=a.message.usage.cache_creation_input_tokens)?n:null,cacheReadInputTokens:null!=(r=a.message.usage.cache_read_input_tokens)?r:null}},void t.enqueue({type:"response-metadata",id:null!=(i=a.message.id)?i:void 0,modelId:null!=(o=a.message.model)?o:void 0});case"message_delta":return c.completionTokens=a.usage.output_tokens,void(u=IOt(a.delta.stop_reason));case"message_stop":return void t.enqueue({type:"finish",finishReason:u,usage:c,providerMetadata:f});case"error":return void t.enqueue({type:"error",error:a.error});default:throw new Error(`Unsupported chunk type: ${a}`)}}})),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:o},warnings:n,request:{body:JSON.stringify(i)}}}},NOt=oA({type:dA("message"),id:XC().nullish(),model:XC().nullish(),content:iA(sA("type",[oA({type:dA("text"),text:XC()}),oA({type:dA("thinking"),thinking:XC(),signature:XC()}),oA({type:dA("redacted_thinking"),data:XC()}),oA({type:dA("tool_use"),id:XC(),name:XC(),input:rA()})])),stop_reason:XC().nullish(),usage:oA({input_tokens:JC(),output_tokens:JC(),cache_creation_input_tokens:JC().nullish(),cache_read_input_tokens:JC().nullish()})}),DOt=sA("type",[oA({type:dA("message_start"),message:oA({id:XC().nullish(),model:XC().nullish(),usage:oA({input_tokens:JC(),output_tokens:JC(),cache_creation_input_tokens:JC().nullish(),cache_read_input_tokens:JC().nullish()})})}),oA({type:dA("content_block_start"),index:JC(),content_block:sA("type",[oA({type:dA("text"),text:XC()}),oA({type:dA("thinking"),thinking:XC()}),oA({type:dA("tool_use"),id:XC(),name:XC()}),oA({type:dA("redacted_thinking"),data:XC()})])}),oA({type:dA("content_block_delta"),index:JC(),delta:sA("type",[oA({type:dA("input_json_delta"),partial_json:XC()}),oA({type:dA("text_delta"),text:XC()}),oA({type:dA("thinking_delta"),thinking:XC()}),oA({type:dA("signature_delta"),signature:XC()})])}),oA({type:dA("content_block_stop"),index:JC()}),oA({type:dA("error"),error:oA({type:XC(),message:XC()})}),oA({type:dA("message_delta"),delta:oA({stop_reason:XC().nullish()}),usage:oA({output_tokens:JC()})}),oA({type:dA("message_stop")}),oA({type:dA("ping")})]),ROt=oA({thinking:oA({type:aA([dA("enabled"),dA("disabled")]),budgetTokens:JC().optional()}).optional()}),MOt=oA({command:XC(),restart:eA().optional()});var POt=oA({command:XC(),restart:eA().optional()});var FOt=oA({command:fA(["view","create","str_replace","insert","undo_edit"]),path:XC(),file_text:XC().optional(),insert_line:JC().int().optional(),new_str:XC().optional(),old_str:XC().optional(),view_range:iA(JC().int()).optional()});var LOt=oA({command:fA(["view","create","str_replace","insert","undo_edit"]),path:XC(),file_text:XC().optional(),insert_line:JC().int().optional(),new_str:XC().optional(),old_str:XC().optional(),view_range:iA(JC().int()).optional()});var jOt=oA({action:fA(["key","type","mouse_move","left_click","left_click_drag","right_click","middle_click","double_click","screenshot","cursor_position"]),coordinate:iA(JC().int()).optional(),text:XC().optional()});var BOt=oA({action:fA(["key","hold_key","type","cursor_position","mouse_move","left_mouse_down","left_mouse_up","left_click","left_click_drag","right_click","middle_click","double_click","triple_click","scroll","wait","screenshot"]),coordinate:lA([JC().int(),JC().int()]).optional(),duration:JC().optional(),scroll_amount:JC().optional(),scroll_direction:fA(["up","down","left","right"]).optional(),start_coordinate:lA([JC().int(),JC().int()]).optional(),text:XC().optional()});var $Ot={bash_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20241022",args:{},parameters:MOt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},bash_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.bash_20250124",args:{},parameters:POt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20241022:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20241022",args:{},parameters:FOt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},textEditor_20250124:function(e={}){return{type:"provider-defined",id:"anthropic.text_editor_20250124",args:{},parameters:LOt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20241022:function(e){return{type:"provider-defined",id:"anthropic.computer_20241022",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:jOt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}},computer_20250124:function(e){return{type:"provider-defined",id:"anthropic.computer_20250124",args:{displayWidthPx:e.displayWidthPx,displayHeightPx:e.displayHeightPx,displayNumber:e.displayNumber},parameters:BOt,execute:e.execute,experimental_toToolResultContent:e.experimental_toToolResultContent}}};function zOt(e={}){var t;const n=null!=(t=fre(e.baseURL))?t:"https://api.anthropic.com/v1",r=()=>({"anthropic-version":"2023-06-01","x-api-key":Gne({apiKey:e.apiKey,environmentVariableName:"ANTHROPIC_API_KEY",description:"Anthropic"}),...e.headers}),i=(t,i={})=>new OOt(t,i,{provider:"anthropic.messages",baseURL:n,headers:r,fetch:e.fetch,supportsImageUrls:!0}),o=function(e,t){if(new.target)throw new Error("The Anthropic model function cannot be called with the new keyword.");return i(e,t)};return o.languageModel=i,o.chat=i,o.messages=i,o.textEmbeddingModel=e=>{throw new bne({modelId:e,modelType:"textEmbeddingModel"})},o.tools=$Ot,o}var UOt=zOt();const qOt=Object.freeze(Object.defineProperty({__proto__:null,anthropic:UOt,createAnthropic:zOt},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}:root{--background: 0 0% 100%;--foreground: 240 10% 3.9%;--card: 0 0% 100%;--card-foreground: 240 10% 3.9%;--popover: 0 0% 100%;--popover-foreground: 240 10% 3.9%;--primary: 240 5.9% 10%;--primary-foreground: 0 0% 98%;--secondary: 240 4.8% 95.9%;--secondary-foreground: 240 5.9% 10%;--muted: 240 4.8% 95.9%;--muted-foreground: 240 3.8% 46.1%;--accent: 240 4.8% 95.9%;--accent-foreground: 240 5.9% 10%;--destructive: 0 84.2% 60.2%;--destructive-foreground: 0 0% 98%;--border: 240 5.9% 90%;--input: 240 5.9% 90%;--ring: 240 10% 3.9%;--chart-1: 12 76% 61%;--chart-2: 173 58% 39%;--chart-3: 197 37% 24%;--chart-4: 43 74% 66%;--chart-5: 27 87% 67%;--radius: .5rem}.dark{--background: 240 10% 3.9%;--foreground: 0 0% 98%;--card: 240 10% 3.9%;--card-foreground: 0 0% 98%;--popover: 240 10% 3.9%;--popover-foreground: 0 0% 98%;--primary: 0 0% 98%;--primary-foreground: 240 5.9% 10%;--secondary: 240 3.7% 15.9%;--secondary-foreground: 0 0% 98%;--muted: 240 3.7% 15.9%;--muted-foreground: 240 5% 64.9%;--accent: 240 3.7% 15.9%;--accent-foreground: 0 0% 98%;--destructive: 0 62.8% 30.6%;--destructive-foreground: 0 0% 98%;--border: 240 3.7% 15.9%;--input: 240 3.7% 15.9%;--ring: 240 4.9% 83.9%;--chart-1: 220 70% 50%;--chart-2: 160 60% 45%;--chart-3: 30 80% 55%;--chart-4: 280 65% 60%;--chart-5: 340 75% 55%}*{border-color:hsl(var(--border))}body{background-color:hsl(var(--background));color:hsl(var(--foreground))}.\!container{width:100%!important}.container{width:100%}@media (min-width: 640px){.\!container{max-width:640px!important}.container{max-width:640px}}@media (min-width: 768px){.\!container{max-width:768px!important}.container{max-width:768px}}@media (min-width: 1024px){.\!container{max-width:1024px!important}.container{max-width:1024px}}@media (min-width: 1280px){.\!container{max-width:1280px!important}.container{max-width:1280px}}@media (min-width: 1536px){.\!container{max-width:1536px!important}.container{max-width:1536px}}.prose{color:var(--tw-prose-body);max-width:65ch}.prose :where(p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where([class~=lead]):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-lead);font-size:1.25em;line-height:1.6;margin-top:1.2em;margin-bottom:1.2em}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)){color:hsl(var(--primary));text-decoration:none;font-weight:500}.prose :where(a):not(:where([class~=not-prose],[class~=not-prose] *)):hover{text-decoration:underline}.prose :where(strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-bold);font-weight:600}.prose :where(a strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th strong):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(ol):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol[type=A]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=A s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-alpha}.prose :where(ol[type=a s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-alpha}.prose :where(ol[type=I]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type=I s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:upper-roman}.prose :where(ol[type=i s]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:lower-roman}.prose :where(ol[type="1"]):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:decimal}.prose :where(ul):not(:where([class~=not-prose],[class~=not-prose] *)){list-style-type:disc;margin-top:1.25em;margin-bottom:1.25em;padding-inline-start:1.625em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{font-weight:400;color:var(--tw-prose-counters)}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *))::marker{color:var(--tw-prose-bullets)}.prose :where(dt):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.25em}.prose :where(hr):not(:where([class~=not-prose],[class~=not-prose] *)){border-color:var(--tw-prose-hr);border-top-width:1px;margin-top:3em;margin-bottom:3em}.prose :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-style:normal;color:hsl(var(--muted-foreground));border-inline-start-width:.25rem;border-inline-start-color:var(--tw-prose-quote-borders);quotes:"“""”""‘""’";margin-top:1.6em;margin-bottom:1.6em;padding-inline-start:1em;border-left-color:hsl(var(--border))}.prose :where(blockquote p:first-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:open-quote}.prose :where(blockquote p:last-of-type):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:close-quote}.prose :where(h1):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:800;font-size:2.25em;margin-top:0;margin-bottom:.8888889em;line-height:1.1111111}.prose :where(h1 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:900;color:inherit}.prose :where(h2):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:700;font-size:1.5em;margin-top:2em;margin-bottom:1em;line-height:1.3333333}.prose :where(h2 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:800;color:inherit}.prose :where(h3):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;font-size:1.25em;margin-top:1.6em;margin-bottom:.6em;line-height:1.6}.prose :where(h3 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(h4):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;margin-top:1.5em;margin-bottom:.5em;line-height:1.5}.prose :where(h4 strong):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:700;color:inherit}.prose :where(img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(picture):not(:where([class~=not-prose],[class~=not-prose] *)){display:block;margin-top:2em;margin-bottom:2em}.prose :where(video):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(kbd):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:500;font-family:inherit;color:var(--tw-prose-kbd);box-shadow:0 0 0 1px var(--tw-prose-kbd-shadows),0 3px 0 var(--tw-prose-kbd-shadows);font-size:.875em;border-radius:.3125rem;padding-top:.1875em;padding-inline-end:.375em;padding-bottom:.1875em;padding-inline-start:.375em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){color:hsl(var(--muted-foreground));font-weight:600;font-size:.875em;background-color:hsl(var(--muted));border-radius:.25em;padding:.2em .4em}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:"`"}.prose :where(code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:"`"}.prose :where(a code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h1 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(h2 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.875em}.prose :where(h3 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit;font-size:.9em}.prose :where(h4 code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(blockquote code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(thead th code):not(:where([class~=not-prose],[class~=not-prose] *)){color:inherit}.prose :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){color:hsl(var(--muted-foreground));background-color:hsl(var(--muted));overflow-x:auto;font-weight:400;font-size:.875em;line-height:1.7142857;margin-top:1.7142857em;margin-bottom:1.7142857em;border-radius:var(--radius);padding-inline-end:1.1428571em;padding-inline-start:1.1428571em;padding:1em}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:transparent;border-width:0;border-radius:0;padding:0;font-weight:inherit;color:inherit;font-size:inherit;font-family:inherit;line-height:inherit}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):before{content:none}.prose :where(pre code):not(:where([class~=not-prose],[class~=not-prose] *)):after{content:none}.prose :where(table):not(:where([class~=not-prose],[class~=not-prose] *)){width:100%;table-layout:auto;margin-top:2em;margin-bottom:2em;font-size:.875em;line-height:1.7142857;text-align:left;border-collapse:collapse}.prose :where(thead):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-th-borders)}.prose :where(thead th):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-headings);font-weight:600;vertical-align:bottom;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody tr):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-bottom-color:var(--tw-prose-td-borders)}.prose :where(tbody tr:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:0}.prose :where(tbody td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:baseline}.prose :where(tfoot):not(:where([class~=not-prose],[class~=not-prose] *)){border-top-width:1px;border-top-color:var(--tw-prose-th-borders)}.prose :where(tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){vertical-align:top}.prose :where(th,td):not(:where([class~=not-prose],[class~=not-prose] *)){text-align:start}.prose :where(figure>*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(figcaption):not(:where([class~=not-prose],[class~=not-prose] *)){color:var(--tw-prose-captions);font-size:.875em;line-height:1.4285714;margin-top:.8571429em}.prose{--tw-prose-body: #374151;--tw-prose-headings: #111827;--tw-prose-lead: #4b5563;--tw-prose-links: #111827;--tw-prose-bold: #111827;--tw-prose-counters: #6b7280;--tw-prose-bullets: #d1d5db;--tw-prose-hr: #e5e7eb;--tw-prose-quotes: #111827;--tw-prose-quote-borders: #e5e7eb;--tw-prose-captions: #6b7280;--tw-prose-kbd: #111827;--tw-prose-kbd-shadows: rgb(17, 24, 39 / 10%);--tw-prose-code: #111827;--tw-prose-pre-code: #e5e7eb;--tw-prose-pre-bg: #1f2937;--tw-prose-th-borders: #d1d5db;--tw-prose-td-borders: #e5e7eb;--tw-prose-invert-body: #d1d5db;--tw-prose-invert-headings: #fff;--tw-prose-invert-lead: #9ca3af;--tw-prose-invert-links: #fff;--tw-prose-invert-bold: #fff;--tw-prose-invert-counters: #9ca3af;--tw-prose-invert-bullets: #4b5563;--tw-prose-invert-hr: #374151;--tw-prose-invert-quotes: #f3f4f6;--tw-prose-invert-quote-borders: #374151;--tw-prose-invert-captions: #9ca3af;--tw-prose-invert-kbd: #fff;--tw-prose-invert-kbd-shadows: rgb(255, 255, 255 / 10%);--tw-prose-invert-code: #fff;--tw-prose-invert-pre-code: #d1d5db;--tw-prose-invert-pre-bg: rgb(0 0 0 / 50%);--tw-prose-invert-th-borders: #4b5563;--tw-prose-invert-td-borders: #374151;font-size:1rem;line-height:1.75}.prose :where(picture>img):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0;margin-bottom:0}.prose :where(li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;margin-bottom:.5em}.prose :where(ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(ul>li):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:.375em}.prose :where(.prose>ul>li p):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(.prose>ul>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ul>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(.prose>ol>li>p:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em}.prose :where(.prose>ol>li>p:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:1.25em}.prose :where(ul ul,ul ol,ol ul,ol ol):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.75em;margin-bottom:.75em}.prose :where(dl):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:1.25em;margin-bottom:1.25em}.prose :where(dd):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.5em;padding-inline-start:1.625em}.prose :where(hr+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h2+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h3+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(h4+*):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(thead th:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(thead th:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(tbody td,tfoot td):not(:where([class~=not-prose],[class~=not-prose] *)){padding-top:.5714286em;padding-inline-end:.5714286em;padding-bottom:.5714286em;padding-inline-start:.5714286em}.prose :where(tbody td:first-child,tfoot td:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-start:0}.prose :where(tbody td:last-child,tfoot td:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){padding-inline-end:0}.prose :where(figure):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:2em;margin-bottom:2em}.prose :where(.prose>:first-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:0}.prose :where(.prose>:last-child):not(:where([class~=not-prose],[class~=not-prose] *)){margin-bottom:0}.prose :where(ul,ol):not(:where([class~=not-prose],[class~=not-prose] *)){padding-left:1.5em;margin-top:.75em;margin-bottom:.75em}.prose :where(ul>li,ol>li):not(:where([class~=not-prose],[class~=not-prose] *)){margin-top:.25em;margin-bottom:.25em}.prose :where(h1,h2,h3,h4,h5,h6):not(:where([class~=not-prose],[class~=not-prose] *)){color:hsl(var(--foreground));font-weight:600}.prose :where(th):not(:where([class~=not-prose],[class~=not-prose] *)){font-weight:600;border-bottom-width:2px;border-color:hsl(var(--border));padding:.5em}.prose :where(td):not(:where([class~=not-prose],[class~=not-prose] *)){border-bottom-width:1px;border-color:hsl(var(--border));padding:.5em}table{width:-moz-max-content;width:max-content;table-layout:auto}th,td{white-space:nowrap;padding:.5rem}th:last-child,td:last-child{white-space:normal;word-break:break-word}.react-mosaic-window-body .flex.justify-between,.react-mosaic-window-body .flex.items-center.justify-between,.flex.flex-wrap.items-center.justify-between,div[class*=flex][class*=justify-between]{flex-wrap:wrap!important;gap:.5rem!important;justify-content:flex-start!important}.react-mosaic-window-body button,.react-mosaic-window-body .flex button{flex-shrink:1!important;min-width:auto!important}.react-mosaic-window-body .flex,.react-mosaic-window-body [class*=flex]{flex-wrap:wrap!important;max-width:100%!important}[data-testid=analysis-results],.analysis-results{width:100%!important;max-width:100%!important}[data-testid=analysis-results] img,.analysis-results img,[data-testid=analysis-results] canvas,.analysis-results canvas{max-width:100%!important;height:auto!important;width:auto!important}.prose,.prose p,.prose li,.prose div{max-width:100%!important;word-wrap:break-word!important;overflow-wrap:break-word!important;word-break:break-word!important;white-space:normal!important}[data-testid=analysis-results] p,[data-testid=analysis-results] li,[data-testid=analysis-results] div,[data-testid=analysis-results] span,.analysis-results p,.analysis-results li,.analysis-results div,.analysis-results span{word-wrap:break-word!important;overflow-wrap:break-word!important;max-width:100%!important;white-space:normal!important}[data-testid=analysis-results] table,.analysis-results table,.sql-query-results table{width:-moz-max-content;width:max-content;table-layout:auto}div:has(table){overflow-x:auto;overflow-y:visible;max-width:100%}div:has(table) table{width:-moz-max-content;width:max-content;table-layout:auto}div:has(table) th,div:has(table) td{white-space:nowrap;padding:.5rem;min-width:-moz-fit-content;min-width:fit-content}div:has(table) th:last-child,div:has(table) td:last-child{white-space:normal;word-break:break-word;min-width:120px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.pointer-events-none{pointer-events:none}.pointer-events-auto{pointer-events:auto}.visible{visibility:visible}.invisible{visibility:hidden}.collapse{visibility:collapse}.static{position:static}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.inset-x-0{left:0;right:0}.inset-y-0{top:0;bottom:0}.bottom-0{bottom:0}.bottom-4{bottom:1rem}.left-0{left:0}.left-1{left:.25rem}.left-2{left:.5rem}.left-\[50\%\]{left:50%}.right-0{right:0}.right-1{right:.25rem}.right-2{right:.5rem}.right-4{right:1rem}.top-0{top:0}.top-1{top:.25rem}.top-1\/2{top:50%}.top-4{top:1rem}.top-\[-12px\]{top:-12px}.top-\[-1px\]{top:-1px}.top-\[1px\]{top:1px}.top-\[50\%\]{top:50%}.z-10{z-index:10}.z-20{z-index:20}.z-50{z-index:50}.z-\[100\]{z-index:100}.m-0{margin:0}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.mx-1\.5{margin-left:.375rem;margin-right:.375rem}.mx-auto{margin-left:auto;margin-right:auto}.my-1{margin-top:.25rem;margin-bottom:.25rem}.-mr-2{margin-right:-.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:.75rem}.mb-4{margin-bottom:1rem}.mb-5{margin-bottom:1.25rem}.mb-6{margin-bottom:1.5rem}.ml-1{margin-left:.25rem}.ml-2{margin-left:.5rem}.ml-auto{margin-left:auto}.mr-1{margin-right:.25rem}.mr-2{margin-right:.5rem}.mt-0{margin-top:0}.mt-0\.5{margin-top:.125rem}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:.75rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.mt-auto{margin-top:auto}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.inline-flex{display:inline-flex}.\!table{display:table!important}.table{display:table}.grid{display:grid}.hidden{display:none}.aspect-square{aspect-ratio:1 / 1}.h-1{height:.25rem}.h-1\.5{height:.375rem}.h-10{height:2.5rem}.h-11{height:2.75rem}.h-16{height:4rem}.h-2{height:.5rem}.h-2\.5{height:.625rem}.h-3{height:.75rem}.h-3\.5{height:.875rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-64{height:16rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-9{height:2.25rem}.h-\[100vh\]{height:100vh}.h-\[1px\]{height:1px}.h-\[200px\]{height:200px}.h-\[22px\]{height:22px}.h-\[300px\]{height:300px}.h-\[30px\]{height:30px}.h-\[500px\]{height:500px}.h-\[80vh\]{height:80vh}.h-\[var\(--radix-select-trigger-height\)\]{height:var(--radix-select-trigger-height)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.h-screen{height:100vh}.max-h-96{max-height:24rem}.max-h-\[--radix-context-menu-content-available-height\]{max-height:var(--radix-context-menu-content-available-height)}.max-h-\[100vh\]{max-height:100vh}.max-h-\[150px\]{max-height:150px}.max-h-\[300px\]{max-height:300px}.max-h-\[50vh\]{max-height:50vh}.max-h-\[80vh\]{max-height:80vh}.max-h-screen{max-height:100vh}.min-h-\[180px\]{min-height:180px}.min-h-\[200px\]{min-height:200px}.min-h-\[25px\]{min-height:25px}.min-h-\[30px\]{min-height:30px}.min-h-\[60px\]{min-height:60px}.min-h-\[inherit\]{min-height:inherit}.w-10{width:2.5rem}.w-12{width:3rem}.w-16{width:4rem}.w-2{width:.5rem}.w-2\.5{width:.625rem}.w-3{width:.75rem}.w-3\.5{width:.875rem}.w-3\/4{width:75%}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-72{width:18rem}.w-8{width:2rem}.w-9{width:2.25rem}.w-\[100px\]{width:100px}.w-\[100vw\]{width:100vw}.w-\[110px\]{width:110px}.w-\[15px\]{width:15px}.w-\[18px\]{width:18px}.w-\[1px\]{width:1px}.w-\[200px\]{width:200px}.w-\[300px\]{width:300px}.w-\[55px\]{width:55px}.w-\[70px\]{width:70px}.w-auto{width:auto}.w-fit{width:-moz-fit-content;width:fit-content}.w-full{width:100%}.w-px{width:1px}.w-screen{width:100vw}.min-w-0{min-width:0px}.min-w-10{min-width:2.5rem}.min-w-8{min-width:2rem}.min-w-9{min-width:2.25rem}.min-w-\[100px\]{min-width:100px}.min-w-\[12rem\]{min-width:12rem}.min-w-\[350px\]{min-width:350px}.min-w-\[60px\]{min-width:60px}.min-w-\[70px\]{min-width:70px}.min-w-\[80px\]{min-width:80px}.min-w-\[8rem\]{min-width:8rem}.min-w-\[var\(--radix-select-trigger-width\)\]{min-width:var(--radix-select-trigger-width)}.max-w-7xl{max-width:80rem}.max-w-\[100px\]{max-width:100px}.max-w-\[100vw\]{max-width:100vw}.max-w-\[150px\]{max-width:150px}.max-w-\[250px\]{max-width:250px}.max-w-\[400px\]{max-width:400px}.max-w-\[450px\]{max-width:450px}.max-w-\[500px\]{max-width:500px}.max-w-\[600px\]{max-width:600px}.max-w-\[75vw\]{max-width:75vw}.max-w-full{max-width:100%}.max-w-lg{max-width:32rem}.max-w-none{max-width:none}.max-w-sm{max-width:24rem}.flex-1{flex:1 1 0%}.flex-none{flex:none}.flex-shrink-0,.shrink-0{flex-shrink:0}.flex-grow,.grow{flex-grow:1}.caption-bottom{caption-side:bottom}.border-collapse{border-collapse:collapse}.origin-\[--radix-context-menu-content-transform-origin\]{transform-origin:var(--radix-context-menu-content-transform-origin)}.origin-\[--radix-menubar-content-transform-origin\]{transform-origin:var(--radix-menubar-content-transform-origin)}.origin-left{transform-origin:left}.-translate-y-1\/2{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-x-\[-50\%\]{--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-0{--tw-translate-y: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-4{--tw-translate-y: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.translate-y-\[-50\%\]{--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-0{--tw-rotate: 0deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.rotate-90{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-0{--tw-scale-x: 0;--tw-scale-y: 0;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-100{--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.scale-110{--tw-scale-x: 1.1;--tw-scale-y: 1.1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@keyframes pulse{50%{opacity:.5}}.animate-pulse{animation:pulse 2s cubic-bezier(.4,0,.6,1) infinite}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}@keyframes sqlrooms-progress{0%{transform:translate(0) scaleX(0)}40%{transform:translate(0) scaleX(.4)}to{transform:translate(100%) scaleX(.5)}}.animate-sqlrooms-progress{animation:sqlrooms-progress 1s infinite linear}.cursor-default{cursor:default}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.select-none{-webkit-user-select:none;-moz-user-select:none;user-select:none}.select-text{-webkit-user-select:text;-moz-user-select:text;user-select:text}.resize-none{resize:none}.resize{resize:both}.list-inside{list-style-position:inside}.list-disc{list-style-type:disc}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-wrap{flex-wrap:wrap}.flex-nowrap{flex-wrap:nowrap}.items-start{align-items:flex-start}.items-end{align-items:flex-end}.items-center{align-items:center}.items-stretch{align-items:stretch}.justify-start{justify-content:flex-start}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-0{gap:0px}.gap-0\.5{gap:.125rem}.gap-1{gap:.25rem}.gap-1\.5{gap:.375rem}.gap-2{gap:.5rem}.gap-3{gap:.75rem}.gap-4{gap:1rem}.gap-5{gap:1.25rem}.space-x-1>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.25rem * var(--tw-space-x-reverse));margin-left:calc(.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-3>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.75rem * var(--tw-space-x-reverse));margin-left:calc(.75rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-1>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.25rem * var(--tw-space-y-reverse))}.space-y-1\.5>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.375rem * var(--tw-space-y-reverse))}.space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.5rem * var(--tw-space-y-reverse))}.space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.75rem * var(--tw-space-y-reverse))}.space-y-4>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.\!overflow-visible{overflow:visible!important}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.overflow-x-hidden{overflow-x:hidden}.overflow-y-hidden{overflow-y:hidden}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.text-ellipsis{text-overflow:ellipsis}.whitespace-normal{white-space:normal}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-wrap{text-wrap:wrap}.break-words{overflow-wrap:break-word}.rounded{border-radius:.25rem}.rounded-\[inherit\]{border-radius:inherit}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:var(--radius)}.rounded-md{border-radius:calc(var(--radius) - 2px)}.rounded-none{border-radius:0}.rounded-sm{border-radius:calc(var(--radius) - 4px)}.rounded-xl{border-radius:.75rem}.rounded-t-lg{border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-b-2{border-bottom-width:2px}.border-l{border-left-width:1px}.border-r{border-right-width:1px}.border-t{border-top-width:1px}.border-t-0{border-top-width:0px}.border-dashed{border-style:dashed}.border-none{border-style:none}.border-blue-200{--tw-border-opacity: 1;border-color:rgb(191 219 254 / var(--tw-border-opacity, 1))}.border-blue-600{--tw-border-opacity: 1;border-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-border{border-color:hsl(var(--border))}.border-destructive{border-color:hsl(var(--destructive))}.border-destructive\/50{border-color:hsl(var(--destructive) / .5)}.border-gray-200{--tw-border-opacity: 1;border-color:rgb(229 231 235 / var(--tw-border-opacity, 1))}.border-gray-300{--tw-border-opacity: 1;border-color:rgb(209 213 219 / var(--tw-border-opacity, 1))}.border-green-200{--tw-border-opacity: 1;border-color:rgb(187 247 208 / var(--tw-border-opacity, 1))}.border-green-300{--tw-border-opacity: 1;border-color:rgb(134 239 172 / var(--tw-border-opacity, 1))}.border-indigo-100{--tw-border-opacity: 1;border-color:rgb(224 231 255 / var(--tw-border-opacity, 1))}.border-indigo-900{--tw-border-opacity: 1;border-color:rgb(49 46 129 / var(--tw-border-opacity, 1))}.border-input{border-color:hsl(var(--input))}.border-muted{border-color:hsl(var(--muted))}.border-orange-200{--tw-border-opacity: 1;border-color:rgb(254 215 170 / var(--tw-border-opacity, 1))}.border-primary{border-color:hsl(var(--primary))}.border-primary\/50{border-color:hsl(var(--primary) / .5)}.border-red-200{--tw-border-opacity: 1;border-color:rgb(254 202 202 / var(--tw-border-opacity, 1))}.border-red-300{--tw-border-opacity: 1;border-color:rgb(252 165 165 / var(--tw-border-opacity, 1))}.border-transparent{border-color:transparent}.border-yellow-200{--tw-border-opacity: 1;border-color:rgb(254 240 138 / var(--tw-border-opacity, 1))}.border-l-transparent{border-left-color:transparent}.border-t-blue-600{--tw-border-opacity: 1;border-top-color:rgb(37 99 235 / var(--tw-border-opacity, 1))}.border-t-transparent{border-top-color:transparent}.bg-accent{background-color:hsl(var(--accent))}.bg-background{background-color:hsl(var(--background))}.bg-background\/10{background-color:hsl(var(--background) / .1)}.bg-background\/80{background-color:hsl(var(--background) / .8)}.bg-black\/50{background-color:#00000080}.bg-black\/80{background-color:#000c}.bg-blue-100{--tw-bg-opacity: 1;background-color:rgb(219 234 254 / var(--tw-bg-opacity, 1))}.bg-blue-50{--tw-bg-opacity: 1;background-color:rgb(239 246 255 / var(--tw-bg-opacity, 1))}.bg-blue-500{--tw-bg-opacity: 1;background-color:rgb(59 130 246 / var(--tw-bg-opacity, 1))}.bg-blue-500\/50{background-color:#3b82f680}.bg-blue-600{--tw-bg-opacity: 1;background-color:rgb(37 99 235 / var(--tw-bg-opacity, 1))}.bg-border{background-color:hsl(var(--border))}.bg-card{background-color:hsl(var(--card))}.bg-destructive{background-color:hsl(var(--destructive))}.bg-destructive\/15{background-color:hsl(var(--destructive) / .15)}.bg-gray-100{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.bg-gray-200{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.bg-gray-50{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.bg-green-100{--tw-bg-opacity: 1;background-color:rgb(220 252 231 / var(--tw-bg-opacity, 1))}.bg-green-50{--tw-bg-opacity: 1;background-color:rgb(240 253 244 / var(--tw-bg-opacity, 1))}.bg-indigo-950{--tw-bg-opacity: 1;background-color:rgb(30 27 75 / var(--tw-bg-opacity, 1))}.bg-muted{background-color:hsl(var(--muted))}.bg-muted\/50{background-color:hsl(var(--muted) / .5)}.bg-muted\/70{background-color:hsl(var(--muted) / .7)}.bg-orange-100{--tw-bg-opacity: 1;background-color:rgb(255 237 213 / var(--tw-bg-opacity, 1))}.bg-orange-50{--tw-bg-opacity: 1;background-color:rgb(255 247 237 / var(--tw-bg-opacity, 1))}.bg-popover{background-color:hsl(var(--popover))}.bg-primary{background-color:hsl(var(--primary))}.bg-primary\/10{background-color:hsl(var(--primary) / .1)}.bg-primary\/20{background-color:hsl(var(--primary) / .2)}.bg-purple-100{--tw-bg-opacity: 1;background-color:rgb(243 232 255 / var(--tw-bg-opacity, 1))}.bg-red-100{--tw-bg-opacity: 1;background-color:rgb(254 226 226 / var(--tw-bg-opacity, 1))}.bg-red-50{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.bg-red-600{--tw-bg-opacity: 1;background-color:rgb(220 38 38 / var(--tw-bg-opacity, 1))}.bg-secondary{background-color:hsl(var(--secondary))}.bg-secondary\/10{background-color:hsl(var(--secondary) / .1)}.bg-secondary\/50{background-color:hsl(var(--secondary) / .5)}.bg-transparent{background-color:transparent}.bg-white{--tw-bg-opacity: 1;background-color:rgb(255 255 255 / var(--tw-bg-opacity, 1))}.bg-white\/50{background-color:#ffffff80}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity, 1))}.bg-yellow-50{--tw-bg-opacity: 1;background-color:rgb(254 252 232 / var(--tw-bg-opacity, 1))}.fill-current{fill:currentColor}.fill-primary{fill:hsl(var(--primary))}.p-0{padding:0}.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:.75rem}.p-4{padding:1rem}.p-5{padding:1.25rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.p-\[1px\]{padding:1px}.px-0{padding-left:0;padding-right:0}.px-1{padding-left:.25rem;padding-right:.25rem}.px-1\.5{padding-left:.375rem;padding-right:.375rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-2\.5{padding-left:.625rem;padding-right:.625rem}.px-3{padding-left:.75rem;padding-right:.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.px-7{padding-left:1.75rem;padding-right:1.75rem}.px-8{padding-left:2rem;padding-right:2rem}.py-0{padding-top:0;padding-bottom:0}.py-0\.5{padding-top:.125rem;padding-bottom:.125rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-1\.5{padding-top:.375rem;padding-bottom:.375rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-3{padding-top:.75rem;padding-bottom:.75rem}.py-4{padding-top:1rem;padding-bottom:1rem}.py-6{padding-top:1.5rem;padding-bottom:1.5rem}.pb-0{padding-bottom:0}.pb-3{padding-bottom:.75rem}.pb-4{padding-bottom:1rem}.pl-2{padding-left:.5rem}.pl-2\.5{padding-left:.625rem}.pl-4{padding-left:1rem}.pl-8{padding-left:2rem}.pr-2{padding-right:.5rem}.pr-2\.5{padding-right:.625rem}.pr-20{padding-right:5rem}.pr-3{padding-right:.75rem}.pr-5{padding-right:1.25rem}.pr-6{padding-right:1.5rem}.pr-8{padding-right:2rem}.pt-0{padding-top:0}.pt-1{padding-top:.25rem}.pt-2{padding-top:.5rem}.text-left{text-align:left}.text-center{text-align:center}.text-right{text-align:right}.align-middle{vertical-align:middle}.font-mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.text-4xl{font-size:2.25rem;line-height:2.5rem}.text-\[0\.8rem\]{font-size:.8rem}.text-\[10px\]{font-size:10px}.text-\[11px\]{font-size:11px}.text-\[9px\]{font-size:9px}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:.75rem;line-height:1rem}.font-bold{font-weight:700}.font-medium{font-weight:500}.font-normal{font-weight:400}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.lowercase{text-transform:lowercase}.capitalize{text-transform:capitalize}.italic{font-style:italic}.ordinal{--tw-ordinal: ordinal;font-variant-numeric:var(--tw-ordinal) var(--tw-slashed-zero) var(--tw-numeric-figure) var(--tw-numeric-spacing) var(--tw-numeric-fraction)}.leading-none{line-height:1}.leading-relaxed{line-height:1.625}.leading-tight{line-height:1.25}.tracking-tight{letter-spacing:-.025em}.tracking-widest{letter-spacing:.1em}.text-accent-foreground{color:hsl(var(--accent-foreground))}.text-amber-400{--tw-text-opacity: 1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-blue-400{--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.text-blue-500{--tw-text-opacity: 1;color:rgb(59 130 246 / var(--tw-text-opacity, 1))}.text-blue-600{--tw-text-opacity: 1;color:rgb(37 99 235 / var(--tw-text-opacity, 1))}.text-blue-700{--tw-text-opacity: 1;color:rgb(29 78 216 / var(--tw-text-opacity, 1))}.text-blue-800{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.text-card-foreground{color:hsl(var(--card-foreground))}.text-current{color:currentColor}.text-destructive{color:hsl(var(--destructive))}.text-destructive-foreground{color:hsl(var(--destructive-foreground))}.text-foreground{color:hsl(var(--foreground))}.text-foreground\/50{color:hsl(var(--foreground) / .5)}.text-gray-100{--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.text-gray-400{--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-gray-500{--tw-text-opacity: 1;color:rgb(107 114 128 / var(--tw-text-opacity, 1))}.text-gray-600{--tw-text-opacity: 1;color:rgb(75 85 99 / var(--tw-text-opacity, 1))}.text-gray-700{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.text-gray-800{--tw-text-opacity: 1;color:rgb(31 41 55 / var(--tw-text-opacity, 1))}.text-gray-900{--tw-text-opacity: 1;color:rgb(17 24 39 / var(--tw-text-opacity, 1))}.text-green-400{--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-green-500{--tw-text-opacity: 1;color:rgb(34 197 94 / var(--tw-text-opacity, 1))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity, 1))}.text-green-800{--tw-text-opacity: 1;color:rgb(22 101 52 / var(--tw-text-opacity, 1))}.text-indigo-600{--tw-text-opacity: 1;color:rgb(79 70 229 / var(--tw-text-opacity, 1))}.text-muted-foreground{color:hsl(var(--muted-foreground))}.text-muted-foreground\/50{color:hsl(var(--muted-foreground) / .5)}.text-orange-400{--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.text-orange-500{--tw-text-opacity: 1;color:rgb(249 115 22 / var(--tw-text-opacity, 1))}.text-orange-700{--tw-text-opacity: 1;color:rgb(194 65 12 / var(--tw-text-opacity, 1))}.text-orange-800{--tw-text-opacity: 1;color:rgb(154 52 18 / var(--tw-text-opacity, 1))}.text-popover-foreground{color:hsl(var(--popover-foreground))}.text-primary{color:hsl(var(--primary))}.text-primary-foreground{color:hsl(var(--primary-foreground))}.text-purple-400{--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-purple-500{--tw-text-opacity: 1;color:rgb(168 85 247 / var(--tw-text-opacity, 1))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.text-red-500{--tw-text-opacity: 1;color:rgb(239 68 68 / var(--tw-text-opacity, 1))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity, 1))}.text-red-700{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.text-red-800{--tw-text-opacity: 1;color:rgb(153 27 27 / var(--tw-text-opacity, 1))}.text-secondary-foreground{color:hsl(var(--secondary-foreground))}.text-slate-800{--tw-text-opacity: 1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-yellow-400{--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.text-yellow-500{--tw-text-opacity: 1;color:rgb(234 179 8 / var(--tw-text-opacity, 1))}.text-yellow-700{--tw-text-opacity: 1;color:rgb(161 98 7 / var(--tw-text-opacity, 1))}.text-yellow-800{--tw-text-opacity: 1;color:rgb(133 77 14 / var(--tw-text-opacity, 1))}.underline{text-decoration-line:underline}.underline-offset-4{text-underline-offset:4px}.opacity-0{opacity:0}.opacity-100{opacity:1}.opacity-30{opacity:.3}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-70{opacity:.7}.opacity-90{opacity:.9}.shadow{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow: 0 10px 15px -3px rgb(0 0 0 / .1), 0 4px 6px -4px rgb(0 0 0 / .1);--tw-shadow-colored: 0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-md{--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / .1), 0 2px 4px -2px rgb(0 0 0 / .1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-sm{--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline{outline-style:solid}.ring{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(3px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-0{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.ring-offset-background{--tw-ring-offset-color: hsl(var(--background))}.blur{--tw-blur: blur(8px);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.grayscale{--tw-grayscale: grayscale(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.invert{--tw-invert: invert(100%);filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.filter{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-colors{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-opacity{transition-property:opacity;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-150{transition-duration:.15s}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}.ease-in-out{transition-timing-function:cubic-bezier(.4,0,.2,1)}@keyframes enter{0%{opacity:var(--tw-enter-opacity, 1);transform:translate3d(var(--tw-enter-translate-x, 0),var(--tw-enter-translate-y, 0),0) scale3d(var(--tw-enter-scale, 1),var(--tw-enter-scale, 1),var(--tw-enter-scale, 1)) rotate(var(--tw-enter-rotate, 0))}}@keyframes exit{to{opacity:var(--tw-exit-opacity, 1);transform:translate3d(var(--tw-exit-translate-x, 0),var(--tw-exit-translate-y, 0),0) scale3d(var(--tw-exit-scale, 1),var(--tw-exit-scale, 1),var(--tw-exit-scale, 1)) rotate(var(--tw-exit-rotate, 0))}}.animate-in{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.fade-in-0{--tw-enter-opacity: 0}.zoom-in-95{--tw-enter-scale: .95}.duration-150{animation-duration:.15s}.duration-200{animation-duration:.2s}.duration-300{animation-duration:.3s}.ease-in-out{animation-timing-function:cubic-bezier(.4,0,.2,1)}.running{animation-play-state:running}:root{--primary: 239 84% 67%;--primary-foreground: 0 0% 100%}.dark{--primary: 239 84% 67%;--primary-foreground: 0 0% 100%}body{font-family:Roboto,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif!important;word-wrap:break-word!important;overflow-wrap:break-word!important}.react-mosaic-window-body p,.react-mosaic-window-body li,.react-mosaic-window-body div:not([class*=table]):not([class*=flex]),.react-mosaic-window-body span{word-wrap:break-word!important;overflow-wrap:break-word!important;max-width:100%!important;white-space:normal!important}p,li,div,span,h1,h2,h3,h4,h5,h6{word-wrap:break-word!important;overflow-wrap:break-word!important;white-space:normal!important}span.truncate,.truncate,[class*=truncate]{white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;max-width:100%!important}span.text-sm.truncate{white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important;flex:1 1 0!important;min-width:0!important}p,li,div,span:not(.truncate){font-size:15px!important;font-weight:400!important}.react-mosaic-window-body p,.react-mosaic-window-body li,.react-mosaic-window-body div:not([class*=table]):not([class*=flex]):not([class*=button]),[data-testid=analysis-results] p,[data-testid=analysis-results] li,[data-testid=analysis-results] div,.prose p,.prose li,.prose div{color:#475569!important;font-weight:400!important}[data-testid=analysis-results] .text-gray-500,.prose .text-gray-500{color:#374151!important}.text-gray-500:not(header *):not(.app-header *){color:#475569!important}table,table td,table th{font-size:14px!important;font-weight:400!important;color:#1e293b!important}h1:not(header h1),h2:not(header h2),h3:not(header h3),h4:not(header h4),h5:not(header h5),h6:not(header h6){font-weight:600!important;color:#1e293b!important}[data-testid=analysis-results] strong,[data-testid=analysis-results] b,.prose strong,.prose b{color:#1e293b!important;font-weight:600!important}.app-header-title{color:#ffffffe6!important}.app-header-left{color:#ffffffe6!important;font-size:.9rem!important;font-weight:500!important}.app-header-description{color:#ffffffe6!important;font-size:1.05rem!important;font-weight:400!important}.app-header-credits{color:#ffffffe6!important;font-size:.85rem!important;font-weight:400!important}.app-header-link{color:#ffffffe6!important;text-decoration:underline!important}pre,code{font-size:13px!important;font-weight:500!important}button[class*=rounded-full][class*=outline] span,button[class*=rounded-full][class*=outline],.flex.gap-2 button[class*=rounded-full] span,.flex.gap-2 button[class*=rounded-full]{color:#6467f2!important;font-weight:500!important}div.p-3.border-t.border-gray-200.space-y-2 button,div.border-t.space-y-2 button,div.p-4.space-y-3 button,button.inline-flex[class*=w-full][class*=justify-center],button[class*=items-center][class*=justify-center][class*=w-full],button[class*=flex-1][class*=justify-center],button.px-2{color:#334155!important;font-size:.875rem!important;font-weight:500!important}div.p-3.border-t.border-gray-200.space-y-2 button span,div.p-3.border-t.border-gray-200.space-y-2 button svg,div.border-t.space-y-2 button span,div.border-t.space-y-2 button svg,div.p-4.space-y-3 button span,div.p-4.space-y-3 button svg,button.inline-flex[class*=w-full][class*=justify-center] span,button.inline-flex[class*=w-full][class*=justify-center] svg,button[class*=items-center][class*=justify-center][class*=w-full] span,button[class*=items-center][class*=justify-center][class*=w-full] svg,button[class*=flex-1][class*=justify-center] span,button[class*=flex-1][class*=justify-center] svg,button.px-2 svg{color:#334155!important;font-size:.875rem!important;font-weight:500!important}button[class*=gap-1]:not([class*=bg-primary]) span,button[class*=gap-1]:not([class*=bg-primary]){color:#334155!important;font-size:.875rem!important}button[class*=bg-primary] svg,button[class*=variant-default] svg{color:#fff!important}[role=option],[role=option] span,div[class*=select] [role=option],div[class*=Command] [role=option],input[value*=":"],input[value*=at],.text-sm.font-medium,span.text-sm.font-medium{color:#334155!important}h2.text-muted-foreground.text-xs.font-semibold.uppercase,h2.text-muted-foreground,[class*=panel] h2,.react-mosaic-window-title{font-size:.9rem!important;font-weight:600!important;letter-spacing:.025em!important;color:#334155!important}[role=menuitem],[role=menuitem] span,[class*=DropdownMenuItem],[class*=DropdownMenuItem] span,div[class*=dropdown] span,div[class*=DropdownMenuContent] span,div[class*=DropdownMenuContent] [role=menuitem],div[class*=DropdownMenuContent] [role=menuitem] span,button[role=menuitem],button[role=menuitem] span,[role=menu] button,[role=menu] button span,div[class*=DropdownMenuContent] button,div[class*=DropdownMenuContent] button span{color:#334155!important}[class*="text-[10px]"],div[class*="text-[10px]"],.text-xs{font-size:13px!important;line-height:1.5!important}input[placeholder*=session],input[placeholder*=Session],textarea[placeholder*=session],textarea[placeholder*=Session],.session-name-input,.session-name-textarea,.top-menu input,.top-menu textarea,.top-menu span,.top-menu div{color:#334155!important}footer span,footer a,footer div{font-size:12px!important;font-weight:400!important;color:#4338ca!important}footer .app-footer-left span,footer .app-footer-left a{font-size:12px!important;font-weight:500!important}footer .app-footer-left span:not(.app-footer-link){color:#475569!important}footer .app-footer-left a,footer .app-footer-right a{color:#4f46e5!important}footer .app-footer-left{flex:1}@media (min-width: 768px){footer .app-footer-left{text-align:left}}@media (max-width: 767px){footer .app-footer-left{text-align:center}}footer .app-footer-right{flex:0 0 auto;text-align:right}.data-sources-file-info{font-size:14px!important;font-weight:400!important;color:#000!important;line-height:1.3!important}.text-xs{color:#1e293b!important;font-weight:700!important;opacity:1!important}table{width:-moz-max-content!important;width:max-content!important;table-layout:auto!important}.table-container,div:has(table){overflow-x:auto!important;max-width:100%!important}#root{width:100vw!important;max-width:100vw!important;height:100vh!important;position:relative!important;margin:0!important;padding:0!important;top:0!important;left:0!important}*{box-sizing:border-box!important}body{width:100vw!important;max-width:100vw!important;word-wrap:break-word;overflow-wrap:break-word;margin:0!important;padding:0!important}html{width:100vw!important;max-width:100vw!important;margin:0!important;padding:0!important;top:0!important;left:0!important}.h-screen{width:100vw!important;max-width:100vw!important;height:100vh!important;overflow-x:hidden!important}div[class*=h-screen],div[class*=h-full][class*=w-full]{width:100%!important;max-width:100vw!important;overflow-x:hidden!important}.react-mosaic-root{width:100%!important;max-width:100%!important;overflow-x:hidden!important}span.text-sm.download-info-text,p.download-info-text{font-weight:500!important;color:#073bb5!important;font-family:Roboto,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica Neue,Arial,sans-serif!important}.react-mosaic-window-body .data-\[state\=active\]\:flex[data-state=active].justify-between,.react-mosaic-window-body .data-\[state\=active\]\:flex[data-state=active].items-center.justify-between,.data-\[state\=active\]\:flex[data-state=active].flex-wrap.items-center.justify-between{flex-wrap:wrap!important;gap:.5rem!important;justify-content:flex-start!important}.react-mosaic-window-body .data-\[state\=active\]\:flex[data-state=active] button{flex-shrink:1!important;min-width:auto!important}.react-mosaic-window-body .data-\[state\=active\]\:flex[data-state=active]{flex-wrap:wrap!important;max-width:100%!important}.dark\:prose-invert:is(.dark *){--tw-prose-body: var(--tw-prose-invert-body);--tw-prose-headings: var(--tw-prose-invert-headings);--tw-prose-lead: var(--tw-prose-invert-lead);--tw-prose-links: var(--tw-prose-invert-links);--tw-prose-bold: var(--tw-prose-invert-bold);--tw-prose-counters: var(--tw-prose-invert-counters);--tw-prose-bullets: var(--tw-prose-invert-bullets);--tw-prose-hr: var(--tw-prose-invert-hr);--tw-prose-quotes: var(--tw-prose-invert-quotes);--tw-prose-quote-borders: var(--tw-prose-invert-quote-borders);--tw-prose-captions: var(--tw-prose-invert-captions);--tw-prose-kbd: var(--tw-prose-invert-kbd);--tw-prose-kbd-shadows: var(--tw-prose-invert-kbd-shadows);--tw-prose-code: var(--tw-prose-invert-code);--tw-prose-pre-code: var(--tw-prose-invert-pre-code);--tw-prose-pre-bg: var(--tw-prose-invert-pre-bg);--tw-prose-th-borders: var(--tw-prose-invert-th-borders);--tw-prose-td-borders: var(--tw-prose-invert-td-borders);color:hsl(var(--foreground))}.dark\:prose-invert:is(.dark *) :where(pre):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:hsl(var(--muted));color:hsl(var(--muted-foreground))}.dark\:prose-invert:is(.dark *) :where(code):not(:where([class~=not-prose],[class~=not-prose] *)){background-color:hsl(var(--muted));color:hsl(var(--muted-foreground))}.dark\:prose-invert:is(.dark *) :where(h1,h2,h3,h4,h5,h6):not(:where([class~=not-prose],[class~=not-prose] *)){color:hsl(var(--foreground))}.dark\:prose-invert:is(.dark *) :where(blockquote):not(:where([class~=not-prose],[class~=not-prose] *)){border-left-color:hsl(var(--border));color:hsl(var(--muted-foreground))}@media (min-width: 768px){.react-mosaic-window-body .md\:flex.justify-between,.react-mosaic-window-body .md\:flex.items-center.justify-between,.md\:flex.flex-wrap.items-center.justify-between{flex-wrap:wrap!important;gap:.5rem!important;justify-content:flex-start!important}.react-mosaic-window-body .md\:flex button{flex-shrink:1!important;min-width:auto!important}.react-mosaic-window-body .md\:flex{flex-wrap:wrap!important;max-width:100%!important}}.file\:border-0::file-selector-button{border-width:0px}.file\:bg-transparent::file-selector-button{background-color:transparent}.file\:text-sm::file-selector-button{font-size:.875rem;line-height:1.25rem}.file\:font-medium::file-selector-button{font-weight:500}.file\:text-foreground::file-selector-button{color:hsl(var(--foreground))}.placeholder\:text-muted-foreground::-moz-placeholder{color:hsl(var(--muted-foreground))}.placeholder\:text-muted-foreground::placeholder{color:hsl(var(--muted-foreground))}.after\:absolute:after{content:var(--tw-content);position:absolute}.after\:inset-y-0:after{content:var(--tw-content);top:0;bottom:0}.after\:left-1\/2:after{content:var(--tw-content);left:50%}.after\:w-1:after{content:var(--tw-content);width:.25rem}.after\:-translate-x-1\/2:after{content:var(--tw-content);--tw-translate-x: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.focus-within\:relative:focus-within{position:relative}.focus-within\:z-20:focus-within{z-index:20}.hover\:border-foreground:hover{border-color:hsl(var(--foreground))}.hover\:border-muted:hover{border-color:hsl(var(--muted))}.hover\:bg-accent:hover{background-color:hsl(var(--accent))}.hover\:bg-blue-700:hover{--tw-bg-opacity: 1;background-color:rgb(29 78 216 / var(--tw-bg-opacity, 1))}.hover\:bg-destructive\/80:hover{background-color:hsl(var(--destructive) / .8)}.hover\:bg-destructive\/90:hover{background-color:hsl(var(--destructive) / .9)}.hover\:bg-foreground\/10:hover{background-color:hsl(var(--foreground) / .1)}.hover\:bg-gray-100:hover{--tw-bg-opacity: 1;background-color:rgb(243 244 246 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-200:hover{--tw-bg-opacity: 1;background-color:rgb(229 231 235 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-50:hover{--tw-bg-opacity: 1;background-color:rgb(249 250 251 / var(--tw-bg-opacity, 1))}.hover\:bg-muted:hover{background-color:hsl(var(--muted))}.hover\:bg-muted\/50:hover{background-color:hsl(var(--muted) / .5)}.hover\:bg-muted\/80:hover{background-color:hsl(var(--muted) / .8)}.hover\:bg-primary:hover{background-color:hsl(var(--primary))}.hover\:bg-primary\/80:hover{background-color:hsl(var(--primary) / .8)}.hover\:bg-primary\/90:hover{background-color:hsl(var(--primary) / .9)}.hover\:bg-red-50:hover{--tw-bg-opacity: 1;background-color:rgb(254 242 242 / var(--tw-bg-opacity, 1))}.hover\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity, 1))}.hover\:bg-secondary:hover{background-color:hsl(var(--secondary))}.hover\:bg-secondary\/50:hover{background-color:hsl(var(--secondary) / .5)}.hover\:bg-secondary\/80:hover{background-color:hsl(var(--secondary) / .8)}.hover\:text-accent-foreground:hover{color:hsl(var(--accent-foreground))}.hover\:text-blue-800:hover{--tw-text-opacity: 1;color:rgb(30 64 175 / var(--tw-text-opacity, 1))}.hover\:text-foreground:hover{color:hsl(var(--foreground))}.hover\:text-gray-700:hover{--tw-text-opacity: 1;color:rgb(55 65 81 / var(--tw-text-opacity, 1))}.hover\:text-muted-foreground:hover{color:hsl(var(--muted-foreground))}.hover\:text-primary-foreground:hover{color:hsl(var(--primary-foreground))}.hover\:text-red-700:hover{--tw-text-opacity: 1;color:rgb(185 28 28 / var(--tw-text-opacity, 1))}.hover\:text-slate-800:hover{--tw-text-opacity: 1;color:rgb(30 41 59 / var(--tw-text-opacity, 1))}.hover\:underline:hover{text-decoration-line:underline}.hover\:opacity-100:hover{opacity:1}.focus\:border-blue-500:focus{--tw-border-opacity: 1;border-color:rgb(59 130 246 / var(--tw-border-opacity, 1))}.focus\:border-green-500:focus{--tw-border-opacity: 1;border-color:rgb(34 197 94 / var(--tw-border-opacity, 1))}.focus\:border-red-500:focus{--tw-border-opacity: 1;border-color:rgb(239 68 68 / var(--tw-border-opacity, 1))}.focus\:bg-accent:focus{background-color:hsl(var(--accent))}.focus\:bg-primary:focus{background-color:hsl(var(--primary))}.focus\:text-accent-foreground:focus{color:hsl(var(--accent-foreground))}.focus\:text-primary-foreground:focus{color:hsl(var(--primary-foreground))}.focus\:opacity-100:focus{opacity:1}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.focus\:ring-1:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-2:focus{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus\:ring-blue-500:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(59 130 246 / var(--tw-ring-opacity, 1))}.focus\:ring-red-600:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(220 38 38 / var(--tw-ring-opacity, 1))}.focus\:ring-ring:focus{--tw-ring-color: hsl(var(--ring))}.focus\:ring-offset-2:focus{--tw-ring-offset-width: 2px}.focus-visible\:outline-none:focus-visible{outline:2px solid transparent;outline-offset:2px}.focus-visible\:ring-0:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-1:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-2:focus-visible{--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000)}.focus-visible\:ring-ring:focus-visible{--tw-ring-color: hsl(var(--ring))}.focus-visible\:ring-offset-1:focus-visible{--tw-ring-offset-width: 1px}.focus-visible\:ring-offset-2:focus-visible{--tw-ring-offset-width: 2px}.focus-visible\:ring-offset-background:focus-visible{--tw-ring-offset-color: hsl(var(--background))}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\:cursor-text:disabled{cursor:text}.disabled\:opacity-50:disabled{opacity:.5}.group\/item:hover .group-hover\/item\:opacity-100,.group:hover .group-hover\:opacity-100{opacity:1}.group.destructive .group-\[\.destructive\]\:border-muted\/40{border-color:hsl(var(--muted) / .4)}.group.destructive .group-\[\.destructive\]\:text-red-300{--tw-text-opacity: 1;color:rgb(252 165 165 / var(--tw-text-opacity, 1))}.group.destructive .group-\[\.destructive\]\:hover\:border-destructive\/30:hover{border-color:hsl(var(--destructive) / .3)}.group.destructive .group-\[\.destructive\]\:hover\:bg-destructive:hover{background-color:hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:hover\:text-destructive-foreground:hover{color:hsl(var(--destructive-foreground))}.group.destructive .group-\[\.destructive\]\:hover\:text-red-50:hover{--tw-text-opacity: 1;color:rgb(254 242 242 / var(--tw-text-opacity, 1))}.group.destructive .group-\[\.destructive\]\:focus\:ring-destructive:focus{--tw-ring-color: hsl(var(--destructive))}.group.destructive .group-\[\.destructive\]\:focus\:ring-red-400:focus{--tw-ring-opacity: 1;--tw-ring-color: rgb(248 113 113 / var(--tw-ring-opacity, 1))}.group.destructive .group-\[\.destructive\]\:focus\:ring-offset-red-600:focus{--tw-ring-offset-color: #dc2626}.peer:disabled~.peer-disabled\:cursor-not-allowed{cursor:not-allowed}.peer:disabled~.peer-disabled\:opacity-70{opacity:.7}.aria-selected\:bg-accent[aria-selected=true]{background-color:hsl(var(--accent))}.aria-selected\:bg-accent\/50[aria-selected=true]{background-color:hsl(var(--accent) / .5)}.aria-selected\:text-accent-foreground[aria-selected=true]{color:hsl(var(--accent-foreground))}.aria-selected\:text-muted-foreground[aria-selected=true]{color:hsl(var(--muted-foreground))}.aria-selected\:opacity-100[aria-selected=true]{opacity:1}.data-\[disabled\=true\]\:pointer-events-none[data-disabled=true],.data-\[disabled\]\:pointer-events-none[data-disabled]{pointer-events:none}.data-\[vaul-drawer-direction\=bottom\]\:inset-x-0[data-vaul-drawer-direction=bottom]{left:0;right:0}.data-\[vaul-drawer-direction\=left\]\:inset-y-0[data-vaul-drawer-direction=left],.data-\[vaul-drawer-direction\=right\]\:inset-y-0[data-vaul-drawer-direction=right]{top:0;bottom:0}.data-\[vaul-drawer-direction\=top\]\:inset-x-0[data-vaul-drawer-direction=top]{left:0;right:0}.data-\[vaul-drawer-direction\=bottom\]\:bottom-0[data-vaul-drawer-direction=bottom]{bottom:0}.data-\[vaul-drawer-direction\=left\]\:left-0[data-vaul-drawer-direction=left]{left:0}.data-\[vaul-drawer-direction\=right\]\:right-0[data-vaul-drawer-direction=right]{right:0}.data-\[vaul-drawer-direction\=top\]\:top-0[data-vaul-drawer-direction=top]{top:0}.data-\[vaul-drawer-direction\=bottom\]\:mt-24[data-vaul-drawer-direction=bottom]{margin-top:6rem}.data-\[vaul-drawer-direction\=top\]\:mb-24[data-vaul-drawer-direction=top]{margin-bottom:6rem}.data-\[state\=active\]\:flex[data-state=active]{display:flex}.data-\[panel-group-direction\=vertical\]\:h-px[data-panel-group-direction=vertical]{height:1px}.data-\[vaul-drawer-direction\=bottom\]\:max-h-\[80vh\][data-vaul-drawer-direction=bottom],.data-\[vaul-drawer-direction\=top\]\:max-h-\[80vh\][data-vaul-drawer-direction=top]{max-height:80vh}.data-\[panel-group-direction\=vertical\]\:w-full[data-panel-group-direction=vertical]{width:100%}.data-\[vaul-drawer-direction\=left\]\:w-3\/4[data-vaul-drawer-direction=left],.data-\[vaul-drawer-direction\=right\]\:w-3\/4[data-vaul-drawer-direction=right]{width:75%}.data-\[side\=bottom\]\:translate-y-1[data-side=bottom]{--tw-translate-y: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=left\]\:-translate-x-1[data-side=left]{--tw-translate-x: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=right\]\:translate-x-1[data-side=right]{--tw-translate-x: .25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[side\=top\]\:-translate-y-1[data-side=top]{--tw-translate-y: -.25rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=checked\]\:translate-x-4[data-state=checked]{--tw-translate-x: 1rem;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[state\=unchecked\]\:translate-x-0[data-state=unchecked],.data-\[swipe\=cancel\]\:translate-x-0[data-swipe=cancel]{--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=end\]\:translate-x-\[var\(--radix-toast-swipe-end-x\)\][data-swipe=end]{--tw-translate-x: var(--radix-toast-swipe-end-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[swipe\=move\]\:translate-x-\[var\(--radix-toast-swipe-move-x\)\][data-swipe=move]{--tw-translate-x: var(--radix-toast-swipe-move-x);transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[panel-group-direction\=vertical\]\:flex-col[data-panel-group-direction=vertical]{flex-direction:column}.data-\[vaul-drawer-direction\=bottom\]\:rounded-t-lg[data-vaul-drawer-direction=bottom]{border-top-left-radius:var(--radius);border-top-right-radius:var(--radius)}.data-\[vaul-drawer-direction\=top\]\:rounded-b-lg[data-vaul-drawer-direction=top]{border-bottom-right-radius:var(--radius);border-bottom-left-radius:var(--radius)}.data-\[vaul-drawer-direction\=bottom\]\:border-t[data-vaul-drawer-direction=bottom]{border-top-width:1px}.data-\[vaul-drawer-direction\=left\]\:border-r[data-vaul-drawer-direction=left]{border-right-width:1px}.data-\[vaul-drawer-direction\=right\]\:border-l[data-vaul-drawer-direction=right]{border-left-width:1px}.data-\[vaul-drawer-direction\=top\]\:border-b[data-vaul-drawer-direction=top]{border-bottom-width:1px}.data-\[selected\=true\]\:bg-accent[data-selected=true]{background-color:hsl(var(--accent))}.data-\[state\=active\]\:bg-background[data-state=active]{background-color:hsl(var(--background))}.data-\[state\=checked\]\:bg-primary[data-state=checked]{background-color:hsl(var(--primary))}.data-\[state\=checked\]\:bg-primary\/20[data-state=checked]{background-color:hsl(var(--primary) / .2)}.data-\[state\=on\]\:bg-accent[data-state=on],.data-\[state\=open\]\:bg-accent[data-state=open]{background-color:hsl(var(--accent))}.data-\[state\=open\]\:bg-secondary[data-state=open]{background-color:hsl(var(--secondary))}.data-\[state\=selected\]\:bg-muted[data-state=selected]{background-color:hsl(var(--muted))}.data-\[state\=unchecked\]\:bg-input[data-state=unchecked]{background-color:hsl(var(--input))}.data-\[selected\=true\]\:text-accent-foreground[data-selected=true]{color:hsl(var(--accent-foreground))}.data-\[state\=active\]\:text-foreground[data-state=active]{color:hsl(var(--foreground))}.data-\[state\=checked\]\:text-primary-foreground[data-state=checked]{color:hsl(var(--primary-foreground))}.data-\[state\=on\]\:text-accent-foreground[data-state=on],.data-\[state\=open\]\:text-accent-foreground[data-state=open]{color:hsl(var(--accent-foreground))}.data-\[state\=open\]\:text-muted-foreground[data-state=open]{color:hsl(var(--muted-foreground))}.data-\[disabled\=true\]\:opacity-50[data-disabled=true],.data-\[disabled\]\:opacity-50[data-disabled]{opacity:.5}.data-\[state\=active\]\:shadow[data-state=active]{--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1);--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.data-\[swipe\=move\]\:transition-none[data-swipe=move]{transition-property:none}.data-\[state\=closed\]\:duration-300[data-state=closed]{transition-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{transition-duration:.5s}.data-\[state\=open\]\:animate-in[data-state=open]{animation-name:enter;animation-duration:.15s;--tw-enter-opacity: initial;--tw-enter-scale: initial;--tw-enter-rotate: initial;--tw-enter-translate-x: initial;--tw-enter-translate-y: initial}.data-\[state\=closed\]\:animate-out[data-state=closed],.data-\[swipe\=end\]\:animate-out[data-swipe=end]{animation-name:exit;animation-duration:.15s;--tw-exit-opacity: initial;--tw-exit-scale: initial;--tw-exit-rotate: initial;--tw-exit-translate-x: initial;--tw-exit-translate-y: initial}.data-\[state\=closed\]\:fade-out-0[data-state=closed]{--tw-exit-opacity: 0}.data-\[state\=closed\]\:fade-out-80[data-state=closed]{--tw-exit-opacity: .8}.data-\[state\=open\]\:fade-in-0[data-state=open]{--tw-enter-opacity: 0}.data-\[state\=closed\]\:zoom-out-95[data-state=closed]{--tw-exit-scale: .95}.data-\[state\=open\]\:zoom-in-95[data-state=open]{--tw-enter-scale: .95}.data-\[side\=bottom\]\:slide-in-from-top-2[data-side=bottom]{--tw-enter-translate-y: -.5rem}.data-\[side\=left\]\:slide-in-from-right-2[data-side=left]{--tw-enter-translate-x: .5rem}.data-\[side\=right\]\:slide-in-from-left-2[data-side=right]{--tw-enter-translate-x: -.5rem}.data-\[side\=top\]\:slide-in-from-bottom-2[data-side=top]{--tw-enter-translate-y: .5rem}.data-\[state\=closed\]\:slide-out-to-bottom[data-state=closed]{--tw-exit-translate-y: 100%}.data-\[state\=closed\]\:slide-out-to-left[data-state=closed]{--tw-exit-translate-x: -100%}.data-\[state\=closed\]\:slide-out-to-left-1\/2[data-state=closed]{--tw-exit-translate-x: -50%}.data-\[state\=closed\]\:slide-out-to-right[data-state=closed],.data-\[state\=closed\]\:slide-out-to-right-full[data-state=closed]{--tw-exit-translate-x: 100%}.data-\[state\=closed\]\:slide-out-to-top[data-state=closed]{--tw-exit-translate-y: -100%}.data-\[state\=closed\]\:slide-out-to-top-\[48\%\][data-state=closed]{--tw-exit-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-bottom[data-state=open]{--tw-enter-translate-y: 100%}.data-\[state\=open\]\:slide-in-from-left[data-state=open]{--tw-enter-translate-x: -100%}.data-\[state\=open\]\:slide-in-from-left-1\/2[data-state=open]{--tw-enter-translate-x: -50%}.data-\[state\=open\]\:slide-in-from-right[data-state=open]{--tw-enter-translate-x: 100%}.data-\[state\=open\]\:slide-in-from-top[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=open\]\:slide-in-from-top-\[48\%\][data-state=open]{--tw-enter-translate-y: -48%}.data-\[state\=open\]\:slide-in-from-top-full[data-state=open]{--tw-enter-translate-y: -100%}.data-\[state\=closed\]\:duration-300[data-state=closed]{animation-duration:.3s}.data-\[state\=open\]\:duration-500[data-state=open]{animation-duration:.5s}.data-\[panel-group-direction\=vertical\]\:after\:left-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);left:0}.data-\[panel-group-direction\=vertical\]\:after\:h-1[data-panel-group-direction=vertical]:after{content:var(--tw-content);height:.25rem}.data-\[panel-group-direction\=vertical\]\:after\:w-full[data-panel-group-direction=vertical]:after{content:var(--tw-content);width:100%}.data-\[panel-group-direction\=vertical\]\:after\:-translate-y-1\/2[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-y: -50%;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.data-\[panel-group-direction\=vertical\]\:after\:translate-x-0[data-panel-group-direction=vertical]:after{content:var(--tw-content);--tw-translate-x: 0px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.group\/drawer-content[data-vaul-drawer-direction=bottom] .group-data-\[vaul-drawer-direction\=bottom\]\/drawer-content\:block{display:block}.group\/drawer-content[data-vaul-drawer-direction=bottom] .group-data-\[vaul-drawer-direction\=bottom\]\/drawer-content\:text-center,.group\/drawer-content[data-vaul-drawer-direction=top] .group-data-\[vaul-drawer-direction\=top\]\/drawer-content\:text-center{text-align:center}.dark\:-rotate-90:is(.dark *){--tw-rotate: -90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\:rotate-0:is(.dark *){--tw-rotate: 0deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\:scale-0:is(.dark *){--tw-scale-x: 0;--tw-scale-y: 0;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\:scale-100:is(.dark *){--tw-scale-x: 1;--tw-scale-y: 1;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.dark\:border-destructive:is(.dark *){border-color:hsl(var(--destructive))}.dark\:bg-blue-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(30 58 138 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-700:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.dark\:bg-gray-800\/50:is(.dark *){background-color:#1f293780}.dark\:bg-green-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity, 1))}.dark\:bg-orange-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity, 1))}.dark\:bg-purple-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity, 1))}.dark\:bg-red-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity, 1))}.dark\:bg-yellow-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(113 63 18 / var(--tw-bg-opacity, 1))}.dark\:bg-zinc-900:is(.dark *){--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity, 1))}.dark\:text-blue-400:is(.dark *){--tw-text-opacity: 1;color:rgb(96 165 250 / var(--tw-text-opacity, 1))}.dark\:text-gray-100:is(.dark *){--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity, 1))}.dark\:text-gray-400:is(.dark *){--tw-text-opacity: 1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.dark\:text-green-400:is(.dark *){--tw-text-opacity: 1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.dark\:text-orange-400:is(.dark *){--tw-text-opacity: 1;color:rgb(251 146 60 / var(--tw-text-opacity, 1))}.dark\:text-primary:is(.dark *){color:hsl(var(--primary))}.dark\:text-purple-400:is(.dark *){--tw-text-opacity: 1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.dark\:text-red-400:is(.dark *){--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity, 1))}.dark\:text-yellow-400:is(.dark *){--tw-text-opacity: 1;color:rgb(250 204 21 / var(--tw-text-opacity, 1))}.dark\:hover\:text-gray-300:hover:is(.dark *){--tw-text-opacity: 1;color:rgb(209 213 219 / var(--tw-text-opacity, 1))}@media (min-width: 640px){.sm\:bottom-0{bottom:0}.sm\:right-0{right:0}.sm\:top-auto{top:auto}.sm\:max-w-\[400px\]{max-width:400px}.sm\:max-w-\[425px\]{max-width:425px}.sm\:max-w-\[500px\]{max-width:500px}.sm\:max-w-\[800px\]{max-width:800px}.sm\:max-w-sm{max-width:24rem}.sm\:flex-row{flex-direction:row}.sm\:flex-col{flex-direction:column}.sm\:justify-end{justify-content:flex-end}.sm\:gap-2\.5{gap:.625rem}.sm\:space-x-2>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(.5rem * var(--tw-space-x-reverse));margin-left:calc(.5rem * calc(1 - var(--tw-space-x-reverse)))}.sm\:space-x-4>:not([hidden])~:not([hidden]){--tw-space-x-reverse: 0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.sm\:space-y-0>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.sm\:rounded-lg{border-radius:var(--radius)}.sm\:text-left{text-align:left}.data-\[vaul-drawer-direction\=left\]\:sm\:max-w-sm[data-vaul-drawer-direction=left],.data-\[vaul-drawer-direction\=right\]\:sm\:max-w-sm[data-vaul-drawer-direction=right]{max-width:24rem}.data-\[state\=open\]\:sm\:slide-in-from-bottom-full[data-state=open]{--tw-enter-translate-y: 100%}}@media (min-width: 768px){.md\:flex{display:flex}.md\:hidden{display:none}.md\:max-w-\[420px\]{max-width:420px}.md\:flex-row{flex-direction:row}.md\:gap-1\.5{gap:.375rem}.md\:text-left{text-align:left}.md\:text-sm{font-size:.875rem;line-height:1.25rem}}.\[\&\+div\]\:text-xs+div{font-size:.75rem;line-height:1rem}.\[\&\:has\(\[aria-selected\]\)\]\:bg-accent:has([aria-selected]){background-color:hsl(var(--accent))}.first\:\[\&\:has\(\[aria-selected\]\)\]\:rounded-l-md:has([aria-selected]):first-child{border-top-left-radius:calc(var(--radius) - 2px);border-bottom-left-radius:calc(var(--radius) - 2px)}.last\:\[\&\:has\(\[aria-selected\]\)\]\:rounded-r-md:has([aria-selected]):last-child{border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\[\&\:has\(\[aria-selected\]\.day-outside\)\]\:bg-accent\/50:has([aria-selected].day-outside){background-color:hsl(var(--accent) / .5)}.\[\&\:has\(\[aria-selected\]\.day-range-end\)\]\:rounded-r-md:has([aria-selected].day-range-end){border-top-right-radius:calc(var(--radius) - 2px);border-bottom-right-radius:calc(var(--radius) - 2px)}.\[\&\:has\(\[role\=checkbox\]\)\]\:pr-0:has([role=checkbox]){padding-right:0}.\[\&\>\[role\=checkbox\]\]\:translate-y-\[2px\]>[role=checkbox]{--tw-translate-y: 2px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\>span\]\:line-clamp-1>span{overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:1}.\[\&\>svg\+div\]\:translate-y-\[-3px\]>svg+div{--tw-translate-y: -3px;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\>svg\]\:absolute>svg{position:absolute}.\[\&\>svg\]\:left-4>svg{left:1rem}.\[\&\>svg\]\:top-4>svg{top:1rem}.\[\&\>svg\]\:size-4>svg{width:1rem;height:1rem}.\[\&\>svg\]\:h-3\.5>svg{height:.875rem}.\[\&\>svg\]\:w-3\.5>svg{width:.875rem}.\[\&\>svg\]\:shrink-0>svg{flex-shrink:0}.\[\&\>svg\]\:text-destructive>svg{color:hsl(var(--destructive))}.\[\&\>svg\]\:text-foreground>svg{color:hsl(var(--foreground))}.\[\&\>svg\~\*\]\:pl-7>svg~*{padding-left:1.75rem}.\[\&\>tr\]\:last\:border-b-0:last-child>tr{border-bottom-width:0px}.\[\&\[data-panel-group-direction\=vertical\]\>div\]\:rotate-90[data-panel-group-direction=vertical]>div{--tw-rotate: 90deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&\[data-state\=open\]\>svg\]\:rotate-180[data-state=open]>svg{--tw-rotate: 180deg;transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skew(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.\[\&_\[cmdk-group-heading\]\]\:px-2 [cmdk-group-heading]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-group-heading\]\]\:py-1\.5 [cmdk-group-heading]{padding-top:.375rem;padding-bottom:.375rem}.\[\&_\[cmdk-group-heading\]\]\:text-xs [cmdk-group-heading]{font-size:.75rem;line-height:1rem}.\[\&_\[cmdk-group-heading\]\]\:font-medium [cmdk-group-heading]{font-weight:500}.\[\&_\[cmdk-group-heading\]\]\:text-muted-foreground [cmdk-group-heading]{color:hsl(var(--muted-foreground))}.\[\&_\[cmdk-group\]\:not\(\[hidden\]\)_\~\[cmdk-group\]\]\:pt-0 [cmdk-group]:not([hidden])~[cmdk-group]{padding-top:0}.\[\&_\[cmdk-group\]\]\:px-2 [cmdk-group]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:h-5 [cmdk-input-wrapper] svg{height:1.25rem}.\[\&_\[cmdk-input-wrapper\]_svg\]\:w-5 [cmdk-input-wrapper] svg{width:1.25rem}.\[\&_\[cmdk-input\]\]\:h-12 [cmdk-input]{height:3rem}.\[\&_\[cmdk-item\]\]\:px-2 [cmdk-item]{padding-left:.5rem;padding-right:.5rem}.\[\&_\[cmdk-item\]\]\:py-3 [cmdk-item]{padding-top:.75rem;padding-bottom:.75rem}.\[\&_\[cmdk-item\]_svg\]\:h-5 [cmdk-item] svg{height:1.25rem}.\[\&_\[cmdk-item\]_svg\]\:w-5 [cmdk-item] svg{width:1.25rem}.\[\&_\[role\=group\]\]\:space-y-0\.5 [role=group]>:not([hidden])~:not([hidden]){--tw-space-y-reverse: 0;margin-top:calc(.125rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(.125rem * var(--tw-space-y-reverse))}.\[\&_\[role\=option\]\]\:py-1\.5 [role=option]{padding-top:.375rem;padding-bottom:.375rem}.\[\&_p\]\:leading-relaxed p{line-height:1.625}.\[\&_svg\]\:pointer-events-none svg{pointer-events:none}.\[\&_svg\]\:size-4 svg{width:1rem;height:1rem}.\[\&_svg\]\:shrink-0 svg{flex-shrink:0}.\[\&_tr\:last-child\]\:border-0 tr:last-child{border-width:0px}.\[\&_tr\]\:border-b tr{border-bottom-width:1px}/**
* @license
* Copyright 2019 Kevin Verdieck, originally developed at Palantir Technologies, Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/.mosaic{height:100%;width:100%}.mosaic,.mosaic>*{box-sizing:border-box}.mosaic .mosaic-zero-state{position:absolute;top:6px;right:6px;bottom:6px;left:6px;width:auto;height:auto;z-index:1}.mosaic-root{position:absolute;top:3px;right:3px;bottom:3px;left:3px}.mosaic-split{position:absolute;z-index:1;touch-action:none}.mosaic-split:hover{background:#000}.mosaic-split .mosaic-split-line{position:absolute}.mosaic-split.-row{margin-left:-3px;width:6px;cursor:ew-resize}.mosaic-split.-row .mosaic-split-line{top:0;bottom:0;left:3px;right:3px}.mosaic-split.-column{margin-top:-3px;height:6px;cursor:ns-resize}.mosaic-split.-column .mosaic-split-line{top:3px;bottom:3px;left:0;right:0}.mosaic-tile{position:absolute;margin:3px}.mosaic-tile>*{height:100%;width:100%}.mosaic-drop-target{position:relative}.mosaic-drop-target.drop-target-hover .drop-target-container{display:block}.mosaic-drop-target.mosaic>.drop-target-container .drop-target.left{right:calc(100% - 10px)}.mosaic-drop-target.mosaic>.drop-target-container .drop-target.right{left:calc(100% - 10px)}.mosaic-drop-target.mosaic>.drop-target-container .drop-target.bottom{top:calc(100% - 10px)}.mosaic-drop-target.mosaic>.drop-target-container .drop-target.top{bottom:calc(100% - 10px)}.mosaic-drop-target .drop-target-container{position:absolute;top:0;right:0;bottom:0;left:0;display:none}.mosaic-drop-target .drop-target-container.-dragging{display:block}.mosaic-drop-target .drop-target-container .drop-target{position:absolute;top:0;right:0;bottom:0;left:0;background:#0003;border:2px solid black;opacity:0;z-index:5}.mosaic-drop-target .drop-target-container .drop-target.left{right:70%}.mosaic-drop-target .drop-target-container .drop-target.right{left:70%}.mosaic-drop-target .drop-target-container .drop-target.bottom{top:70%}.mosaic-drop-target .drop-target-container .drop-target.top{bottom:70%}.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover{opacity:1}.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.left{right:50%}.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.right{left:50%}.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.bottom{top:50%}.mosaic-drop-target .drop-target-container .drop-target.drop-target-hover.top{bottom:50%}.mosaic-window,.mosaic-preview{position:relative;display:flex;flex-direction:column;overflow:hidden;box-shadow:0 0 1px #0003}.mosaic-window .mosaic-window-toolbar,.mosaic-preview .mosaic-window-toolbar{z-index:4;display:flex;justify-content:space-between;align-items:center;flex-shrink:0;height:30px;background:#fff;box-shadow:0 1px 1px #0003}.mosaic-window .mosaic-window-toolbar.draggable,.mosaic-preview .mosaic-window-toolbar.draggable{cursor:move}.mosaic-window .mosaic-window-title,.mosaic-preview .mosaic-window-title{display:flex;align-items:center;height:100%;padding-left:15px;flex:1;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-height:18px}.mosaic-window .mosaic-window-controls,.mosaic-preview .mosaic-window-controls{display:flex;height:100%}.mosaic-window .mosaic-window-controls .separator,.mosaic-preview .mosaic-window-controls .separator{height:20px;border-left:1px solid black;margin:5px 4px}.mosaic-window .mosaic-window-body,.mosaic-preview .mosaic-window-body{position:relative;flex:1;height:0;background:#fff;z-index:1;overflow:hidden}.mosaic-window .mosaic-window-additional-actions-bar,.mosaic-preview .mosaic-window-additional-actions-bar{position:absolute;top:30px;right:0;bottom:initial;left:0;height:0;overflow:hidden;background:#fff;justify-content:flex-end;display:flex;z-index:3}.mosaic-window .mosaic-window-additional-actions-bar .bp4-button,.mosaic-preview .mosaic-window-additional-actions-bar .bp4-button{margin:0}.mosaic-window .mosaic-window-additional-actions-bar .bp4-button:after,.mosaic-preview .mosaic-window-additional-actions-bar .bp4-button:after{display:none}.mosaic-window .mosaic-window-body-overlay,.mosaic-preview .mosaic-window-body-overlay{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;background:#fff;display:none;z-index:2}.mosaic-window.additional-controls-open .mosaic-window-additional-actions-bar,.mosaic-preview.additional-controls-open .mosaic-window-additional-actions-bar{height:30px}.mosaic-window.additional-controls-open .mosaic-window-body-overlay,.mosaic-preview.additional-controls-open .mosaic-window-body-overlay{display:block}.mosaic-window .mosaic-preview,.mosaic-preview .mosaic-preview{height:100%;width:100%;position:absolute;z-index:0;border:1px solid black;max-height:400px}.mosaic-window .mosaic-preview .mosaic-window-body,.mosaic-preview .mosaic-preview .mosaic-window-body{display:flex;flex-direction:column;align-items:center;justify-content:center}.mosaic-window .mosaic-preview h4,.mosaic-preview .mosaic-preview h4{margin-bottom:10px}.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.close-button:before{content:"Close"}.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.split-button:before{content:"Split"}.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.replace-button:before{content:"Replace"}.mosaic:not(.mosaic-blueprint-theme) .mosaic-default-control.expand-button:before{content:"Expand"}.mosaic.mosaic-blueprint-theme{background:#abb3bf}.mosaic.mosaic-blueprint-theme .mosaic-zero-state{background:#e5e8eb;border-radius:2px;box-shadow:0 0 0 1px #11141826}.mosaic.mosaic-blueprint-theme .mosaic-zero-state .default-zero-state-icon{font-size:120px}.mosaic.mosaic-blueprint-theme .mosaic-split:hover{background:none}.mosaic.mosaic-blueprint-theme .mosaic-split:hover .mosaic-split-line{box-shadow:0 0 0 1px #4c90f0}.mosaic.mosaic-blueprint-theme.mosaic-drop-target .drop-target-container .drop-target,.mosaic.mosaic-blueprint-theme .mosaic-drop-target .drop-target-container .drop-target{background:#8abbff33;border:2px solid #4c90f0;transition:opacity .1s;border-radius:2px}.mosaic.mosaic-blueprint-theme .mosaic-window,.mosaic.mosaic-blueprint-theme .mosaic-preview{box-shadow:0 0 0 1px #11141826;border-radius:2px}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar{box-shadow:0 1px 1px #11141826;border-top-right-radius:2px;border-top-left-radius:2px}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar.draggable:hover,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar.draggable:hover{background:linear-gradient(to bottom,#fff,#f6f7f9)}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-toolbar.draggable:hover .mosaic-window-title,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-toolbar.draggable:hover .mosaic-window-title{color:#111418}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-title,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-title{font-weight:600;color:#404854}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .separator,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .separator{border-left:1px solid #dce0e5}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .bp4-button,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .bp4-button,.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-controls .bp4-button:before,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-controls .bp4-button:before{color:#738091}.mosaic.mosaic-blueprint-theme .mosaic-window .default-preview-icon,.mosaic.mosaic-blueprint-theme .mosaic-preview .default-preview-icon{font-size:72px}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-body,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-body{border-top-width:0;background:#f6f7f9;border-bottom-right-radius:2px;border-bottom-left-radius:2px}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar{transition:height .25s;box-shadow:0 1px 1px #11141826}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar .bp4-button,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar .bp4-button,.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-window-additional-actions-bar .bp4-button:before,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-window-additional-actions-bar .bp4-button:before{color:#738091}.mosaic.mosaic-blueprint-theme .mosaic-window.additional-controls-open .mosaic-window-toolbar,.mosaic.mosaic-blueprint-theme .mosaic-preview.additional-controls-open .mosaic-window-toolbar{box-shadow:0 1px 0 0 0 0 1px #11141826}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-preview,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-preview{border:1px solid #8f99a8}.mosaic.mosaic-blueprint-theme .mosaic-window .mosaic-preview h4,.mosaic.mosaic-blueprint-theme .mosaic-preview .mosaic-preview h4{color:#404854}.mosaic.mosaic-blueprint-theme.bp4-dark{background:#252a31}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-zero-state{background:#383e47;box-shadow:inset 0 0 0 1px #fff3}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-split:hover .mosaic-split-line{box-shadow:0 0 0 1px #2d72d2}.mosaic.mosaic-blueprint-theme.bp4-dark.mosaic-drop-target .drop-target-container .drop-target,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-drop-target .drop-target-container .drop-target{background:#215db033;border-color:#2d72d2}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window-toolbar,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window-additional-actions-bar{background:#383e47;box-shadow:0 1px 1px #11141866}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview{box-shadow:inset 0 0 0 1px #fff3}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-toolbar.draggable:hover,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-toolbar.draggable:hover{background:linear-gradient(to bottom,#404854,#383e47)}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-toolbar.draggable:hover .mosaic-window-title,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-toolbar.draggable:hover .mosaic-window-title{color:#fff}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-title,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-title{color:#dce0e5}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-controls .separator,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-controls .separator{border-color:#5f6b7c}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-controls .bp4-button,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-controls .bp4-button,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-controls .bp4-button:before,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-controls .bp4-button:before{color:#abb3bf}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-body,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-body{background:#252a31}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-additional-actions-bar .bp4-button,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-additional-actions-bar .bp4-button,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-window-additional-actions-bar .bp4-button:before,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-window-additional-actions-bar .bp4-button:before{color:#c5cbd3}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window.additional-controls-open .mosaic-window-toolbar,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview.additional-controls-open .mosaic-window-toolbar{box-shadow:inset 0 0 0 1px #fff3}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-preview,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-preview{border-color:#5f6b7c}.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-window .mosaic-preview h4,.mosaic.mosaic-blueprint-theme.bp4-dark .mosaic-preview .mosaic-preview h4{color:#edeff2}</style>
  </head>
  <body>
    <div id="root"></div>
    
  </body>
</html>
